typedef unsigned char   undefined;

typedef unsigned char    bool;
typedef unsigned char    byte;
typedef unsigned int    dword;
typedef long long    longlong;
typedef unsigned long    qword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned long long    ulonglong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned long    undefined8;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef struct LegacyVertexBuffers LegacyVertexBuffers, *PLegacyVertexBuffers;

struct LegacyVertexBuffers { // PlaceHolder Class Structure
};

typedef struct IGVector<IOMemoryDescriptor*,IGIOMallocAllocatorPolicy> IGVector<IOMemoryDescriptor*,IGIOMallocAllocatorPolicy>, *PIGVector<IOMemoryDescriptor*,IGIOMallocAllocatorPolicy>;

struct IGVector<IOMemoryDescriptor*,IGIOMallocAllocatorPolicy> { // PlaceHolder Class Structure
};

typedef struct SeparateDepthSurfaceState SeparateDepthSurfaceState, *PSeparateDepthSurfaceState;

struct SeparateDepthSurfaceState { // PlaceHolder Class Structure
};

typedef struct SeparateStencilSurfaceState SeparateStencilSurfaceState, *PSeparateStencilSurfaceState;

struct SeparateStencilSurfaceState { // PlaceHolder Class Structure
};

typedef struct HizCommon HizCommon, *PHizCommon;

struct HizCommon { // PlaceHolder Class Structure
};

typedef struct IGTimeConverter IGTimeConverter, *PIGTimeConverter;

struct IGTimeConverter { // PlaceHolder Class Structure
};

typedef struct IGPerfCounterRestoreOnRC6Exit IGPerfCounterRestoreOnRC6Exit, *PIGPerfCounterRestoreOnRC6Exit;

struct IGPerfCounterRestoreOnRC6Exit { // PlaceHolder Class Structure
};

typedef struct StencilOnlySurfaceState StencilOnlySurfaceState, *PStencilOnlySurfaceState;

struct StencilOnlySurfaceState { // PlaceHolder Class Structure
};

typedef struct IGSupportMDAPI IGSupportMDAPI, *PIGSupportMDAPI;

struct IGSupportMDAPI { // PlaceHolder Class Structure
};

typedef struct IGTelemetryShared IGTelemetryShared, *PIGTelemetryShared;

struct IGTelemetryShared { // PlaceHolder Class Structure
};

typedef struct LegacyCombinedSsDispatch LegacyCombinedSsDispatch, *PLegacyCombinedSsDispatch;

struct LegacyCombinedSsDispatch { // PlaceHolder Class Structure
};

typedef struct IGPriorityQueue<IGPagePool::PoolElement*,IGPagePool::PoolElementCompare,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy> IGPriorityQueue<IGPagePool::PoolElement*,IGPagePool::PoolElementCompare,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>, *PIGPriorityQueue<IGPagePool::PoolElement*,IGPagePool::PoolElementCompare,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>;

struct IGPriorityQueue<IGPagePool::PoolElement*,IGPagePool::PoolElementCompare,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy> { // PlaceHolder Class Structure
};

typedef struct IGAccelStatsMemory IGAccelStatsMemory, *PIGAccelStatsMemory;

struct IGAccelStatsMemory { // PlaceHolder Class Structure
};

typedef struct LegacyHizDispatch LegacyHizDispatch, *PLegacyHizDispatch;

struct LegacyHizDispatch { // PlaceHolder Class Structure
};

typedef struct CombinedDepthStencilSurfaceState CombinedDepthStencilSurfaceState, *PCombinedDepthStencilSurfaceState;

struct CombinedDepthStencilSurfaceState { // PlaceHolder Class Structure
};

typedef struct LegacyCombinedSsStart LegacyCombinedSsStart, *PLegacyCombinedSsStart;

struct LegacyCombinedSsStart { // PlaceHolder Class Structure
};

typedef struct ResolveEpilog ResolveEpilog, *PResolveEpilog;

struct ResolveEpilog { // PlaceHolder Class Structure
};

typedef struct IGVector<IGPagePool::PoolElement*,IGIOMallocAllocatorPolicy> IGVector<IGPagePool::PoolElement*,IGIOMallocAllocatorPolicy>, *PIGVector<IGPagePool::PoolElement*,IGIOMallocAllocatorPolicy>;

struct IGVector<IGPagePool::PoolElement*,IGIOMallocAllocatorPolicy> { // PlaceHolder Class Structure
};

typedef struct HizDispatch HizDispatch, *PHizDispatch;

struct HizDispatch { // PlaceHolder Class Structure
};

typedef struct LegacyHizStart LegacyHizStart, *PLegacyHizStart;

struct LegacyHizStart { // PlaceHolder Class Structure
};

typedef struct SurfaceStateCommon SurfaceStateCommon, *PSurfaceStateCommon;

struct SurfaceStateCommon { // PlaceHolder Class Structure
};

typedef struct ResolveProlog ResolveProlog, *PResolveProlog;

struct ResolveProlog { // PlaceHolder Class Structure
};

typedef void *__darwin_va_list;

typedef long __darwin_ssize_t;

typedef uint __uint32_t;

typedef __uint32_t __darwin_socklen_t;

typedef ulong __darwin_size_t;

typedef uchar __uint8_t;

typedef ulonglong uint64_t;

typedef ulong uintptr_t;

typedef __darwin_size_t size_t;

typedef struct Iterator Iterator, *PIterator;

struct Iterator { // PlaceHolder Class Structure
};

typedef __darwin_socklen_t socklen_t;

typedef uint uint32_t;

typedef uint boolean_t;

typedef struct sockaddr sockaddr, *Psockaddr;

typedef __uint8_t sa_family_t;

struct sockaddr {
    __uint8_t sa_len;
    sa_family_t sa_family;
    char sa_data[14];
};

typedef __darwin_va_list va_list;

typedef struct IOAccelKernelCommand IOAccelKernelCommand, *PIOAccelKernelCommand;

struct IOAccelKernelCommand { // PlaceHolder Structure
};

typedef struct OSMetaClassBase OSMetaClassBase, *POSMetaClassBase;

struct OSMetaClassBase { // PlaceHolder Structure
};

typedef struct GTTPageTableEntry GTTPageTableEntry, *PGTTPageTableEntry;

struct GTTPageTableEntry { // PlaceHolder Structure
};

typedef struct IGVector<rect_pair_t,IGIOMallocAllocatorPolicy> IGVector<rect_pair_t,IGIOMallocAllocatorPolicy>, *PIGVector<rect_pair_t,IGIOMallocAllocatorPolicy>;

struct IGVector<rect_pair_t,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined eIOAccelGLBufferType;

typedef struct SGfxMIFlushDW SGfxMIFlushDW, *PSGfxMIFlushDW;

struct SGfxMIFlushDW { // PlaceHolder Structure
};

typedef struct MDAPIReadOABufferOpIn MDAPIReadOABufferOpIn, *PMDAPIReadOABufferOpIn;

struct MDAPIReadOABufferOpIn { // PlaceHolder Structure
};

typedef struct _vm_map _vm_map, *P_vm_map;

struct _vm_map { // PlaceHolder Structure
};

typedef struct IGHardwarePageTable IGHardwarePageTable, *PIGHardwarePageTable;

struct IGHardwarePageTable { // PlaceHolder Structure
};

typedef struct IOAccelSurfaceInformation IOAccelSurfaceInformation, *PIOAccelSurfaceInformation;

struct IOAccelSurfaceInformation { // PlaceHolder Structure
};

typedef struct IGAccelEventMachine IGAccelEventMachine, *PIGAccelEventMachine;

struct IGAccelEventMachine { // PlaceHolder Structure
};

typedef struct OSCollection OSCollection, *POSCollection;

struct OSCollection { // PlaceHolder Structure
};

typedef struct UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC, *PUK_GEN11_SCHED_WORK_QUEUE_ITEM_REC;

struct UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC { // PlaceHolder Structure
};

typedef struct IGAccelBlockFence IGAccelBlockFence, *PIGAccelBlockFence;

struct IGAccelBlockFence { // PlaceHolder Structure
};

typedef struct IOAccelCommandDescriptor IOAccelCommandDescriptor, *PIOAccelCommandDescriptor;

struct IOAccelCommandDescriptor { // PlaceHolder Structure
};

typedef struct IGVector IGVector, *PIGVector;

struct IGVector { // PlaceHolder Structure
};

typedef struct IGAccelDevice IGAccelDevice, *PIGAccelDevice;

struct IGAccelDevice { // PlaceHolder Structure
};

typedef struct sIntelVideoTokenArgsWADummyJPEG sIntelVideoTokenArgsWADummyJPEG, *PsIntelVideoTokenArgsWADummyJPEG;

struct sIntelVideoTokenArgsWADummyJPEG { // PlaceHolder Structure
};

typedef struct PerfCounterConfig PerfCounterConfig, *PPerfCounterConfig;

struct PerfCounterConfig { // PlaceHolder Structure
};

typedef struct IOAccelDisplayMachine IOAccelDisplayMachine, *PIOAccelDisplayMachine;

struct IOAccelDisplayMachine { // PlaceHolder Structure
};

typedef struct IOMemoryMap IOMemoryMap, *PIOMemoryMap;

struct IOMemoryMap { // PlaceHolder Structure
};

typedef struct _scissor_rect _scissor_rect, *P_scissor_rect;

struct _scissor_rect { // PlaceHolder Structure
};

typedef struct IGUkWorkItem IGUkWorkItem, *PIGUkWorkItem;

struct IGUkWorkItem { // PlaceHolder Structure
};

typedef struct IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy> IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>, *PIGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>;

struct IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct IGHardwarePerProcessPageTable64 IGHardwarePerProcessPageTable64, *PIGHardwarePerProcessPageTable64;

struct IGHardwarePerProcessPageTable64 { // PlaceHolder Structure
};

typedef struct IOMapper IOMapper, *PIOMapper;

struct IOMapper { // PlaceHolder Structure
};

typedef undefined TraceStreamCollectionChange;

typedef struct IGHardwareExtendedContextParams IGHardwareExtendedContextParams, *PIGHardwareExtendedContextParams;

struct IGHardwareExtendedContextParams { // PlaceHolder Structure
};

typedef struct IGMappedBuffer IGMappedBuffer, *PIGMappedBuffer;

struct IGMappedBuffer { // PlaceHolder Structure
};

typedef struct _AVCENCSurfaceStateHeap _AVCENCSurfaceStateHeap, *P_AVCENCSurfaceStateHeap;

struct _AVCENCSurfaceStateHeap { // PlaceHolder Structure
};

typedef struct IOSubMemoryDescriptor IOSubMemoryDescriptor, *PIOSubMemoryDescriptor;

struct IOSubMemoryDescriptor { // PlaceHolder Structure
};

typedef struct IGAccelTraceStreamManager IGAccelTraceStreamManager, *PIGAccelTraceStreamManager;

struct IGAccelTraceStreamManager { // PlaceHolder Structure
};

typedef struct _stolenMemInfo _stolenMemInfo, *P_stolenMemInfo;

struct _stolenMemInfo { // PlaceHolder Structure
};

typedef struct IGUkWorkQueueDesc IGUkWorkQueueDesc, *PIGUkWorkQueueDesc;

struct IGUkWorkQueueDesc { // PlaceHolder Structure
};

typedef struct IOExternalMethodDispatch IOExternalMethodDispatch, *PIOExternalMethodDispatch;

struct IOExternalMethodDispatch { // PlaceHolder Structure
};

typedef struct IGHardwareBlit2DContext IGHardwareBlit2DContext, *PIGHardwareBlit2DContext;

struct IGHardwareBlit2DContext { // PlaceHolder Structure
};

typedef struct sIntelVideoResourceMapEntry sIntelVideoResourceMapEntry, *PsIntelVideoResourceMapEntry;

struct sIntelVideoResourceMapEntry { // PlaceHolder Structure
};

typedef struct TelemetryConnection TelemetryConnection, *PTelemetryConnection;

struct TelemetryConnection { // PlaceHolder Structure
};

typedef struct IGAccelVideoContextVEBox IGAccelVideoContextVEBox, *PIGAccelVideoContextVEBox;

struct IGAccelVideoContextVEBox { // PlaceHolder Structure
};

typedef struct IntelStaticSkuFeatureTableExRec IntelStaticSkuFeatureTableExRec, *PIntelStaticSkuFeatureTableExRec;

struct IntelStaticSkuFeatureTableExRec { // PlaceHolder Structure
};

typedef struct IntelDeviceLogStatus IntelDeviceLogStatus, *PIntelDeviceLogStatus;

struct IntelDeviceLogStatus { // PlaceHolder Structure
};

typedef struct IntelMemoryInfo IntelMemoryInfo, *PIntelMemoryInfo;

struct IntelMemoryInfo { // PlaceHolder Structure
};

typedef struct blit_flags_t blit_flags_t, *Pblit_flags_t;

struct blit_flags_t { // PlaceHolder Structure
};

typedef struct IOAccelTaskList IOAccelTaskList, *PIOAccelTaskList;

struct IOAccelTaskList { // PlaceHolder Structure
};

typedef struct IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy> IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>, *PIGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>;

struct IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct IGGarbageCollector IGGarbageCollector, *PIGGarbageCollector;

struct IGGarbageCollector { // PlaceHolder Structure
};

typedef struct IOAccelResourcePrivate IOAccelResourcePrivate, *PIOAccelResourcePrivate;

struct IOAccelResourcePrivate { // PlaceHolder Structure
};

typedef struct IOAccelSurface IOAccelSurface, *PIOAccelSurface;

struct IOAccelSurface { // PlaceHolder Structure
};

typedef struct PerThreadInfo PerThreadInfo, *PPerThreadInfo;

struct PerThreadInfo { // PlaceHolder Structure
};

typedef undefined _OABufferPointerChangeFlags;

typedef struct IntelDeviceStartAubCapture IntelDeviceStartAubCapture, *PIntelDeviceStartAubCapture;

struct IntelDeviceStartAubCapture { // PlaceHolder Structure
};

typedef struct IOAccelVideoContext2 IOAccelVideoContext2, *PIOAccelVideoContext2;

struct IOAccelVideoContext2 { // PlaceHolder Structure
};

typedef undefined IGTimeoutReason;

typedef struct IntelSkuFeatureTableExRec IntelSkuFeatureTableExRec, *PIntelSkuFeatureTableExRec;

struct IntelSkuFeatureTableExRec { // PlaceHolder Structure
};

typedef struct _IntelHwCapsInfo _IntelHwCapsInfo, *P_IntelHwCapsInfo;

struct _IntelHwCapsInfo { // PlaceHolder Structure
};

typedef struct IGScheduler4 IGScheduler4, *PIGScheduler4;

struct IGScheduler4 { // PlaceHolder Structure
};

typedef struct OSMetaClass OSMetaClass, *POSMetaClass;

struct OSMetaClass { // PlaceHolder Structure
};

typedef struct IOAccelDrawable2 IOAccelDrawable2, *PIOAccelDrawable2;

struct IOAccelDrawable2 { // PlaceHolder Structure
};

typedef undefined Intent;

typedef struct IGScheduler5 IGScheduler5, *PIGScheduler5;

struct IGScheduler5 { // PlaceHolder Structure
};

typedef struct MDAPIConfigRegs MDAPIConfigRegs, *PMDAPIConfigRegs;

struct MDAPIConfigRegs { // PlaceHolder Structure
};

typedef undefined TelemetryOperationIndex;

typedef struct IOAccelNewResourceArgs IOAccelNewResourceArgs, *PIOAccelNewResourceArgs;

struct IOAccelNewResourceArgs { // PlaceHolder Structure
};

typedef struct IOAccel2DBlitRectStruc IOAccel2DBlitRectStruc, *PIOAccel2DBlitRectStruc;

struct IOAccel2DBlitRectStruc { // PlaceHolder Structure
};

typedef struct IntelSkuFeatureTableExPtrsRec IntelSkuFeatureTableExPtrsRec, *PIntelSkuFeatureTableExPtrsRec;

struct IntelSkuFeatureTableExPtrsRec { // PlaceHolder Structure
};

typedef struct IGPagePool IGPagePool, *PIGPagePool;

struct IGPagePool { // PlaceHolder Structure
};

typedef struct IOAccelContextGetDataBufferIn IOAccelContextGetDataBufferIn, *PIOAccelContextGetDataBufferIn;

struct IOAccelContextGetDataBufferIn { // PlaceHolder Structure
};

typedef struct IGFence IGFence, *PIGFence;

struct IGFence { // PlaceHolder Structure
};

typedef struct IGAccel2DContext IGAccel2DContext, *PIGAccel2DContext;

struct IGAccel2DContext { // PlaceHolder Structure
};

typedef struct IGAccelShared IGAccelShared, *PIGAccelShared;

struct IGAccelShared { // PlaceHolder Structure
};

typedef struct IntelDeviceDebugControlInOut IntelDeviceDebugControlInOut, *PIntelDeviceDebugControlInOut;

struct IntelDeviceDebugControlInOut { // PlaceHolder Structure
};

typedef struct IGCanonicalRangeAllocator IGCanonicalRangeAllocator, *PIGCanonicalRangeAllocator;

struct IGCanonicalRangeAllocator { // PlaceHolder Structure
};

typedef struct vendevtBarrierRec vendevtBarrierRec, *PvendevtBarrierRec;

struct vendevtBarrierRec { // PlaceHolder Structure
};

typedef struct IGTelemetryManager IGTelemetryManager, *PIGTelemetryManager;

struct IGTelemetryManager { // PlaceHolder Structure
};

typedef struct IGAccelTraceStream IGAccelTraceStream, *PIGAccelTraceStream;

struct IGAccelTraceStream { // PlaceHolder Structure
};

typedef struct IOMemoryDescriptor IOMemoryDescriptor, *PIOMemoryDescriptor;

struct IOMemoryDescriptor { // PlaceHolder Structure
};

typedef struct IOAccelSegmentResourceListHeader IOAccelSegmentResourceListHeader, *PIOAccelSegmentResourceListHeader;

struct IOAccelSegmentResourceListHeader { // PlaceHolder Structure
};

typedef struct IntelDeviceMapStatsMemInOut IntelDeviceMapStatsMemInOut, *PIntelDeviceMapStatsMemInOut;

struct IntelDeviceMapStatsMemInOut { // PlaceHolder Structure
};

typedef struct IOBufferMemoryDescriptor IOBufferMemoryDescriptor, *PIOBufferMemoryDescriptor;

struct IOBufferMemoryDescriptor { // PlaceHolder Structure
};

typedef struct IGHardwareRingBuffer IGHardwareRingBuffer, *PIGHardwareRingBuffer;

struct IGHardwareRingBuffer { // PlaceHolder Structure
};

typedef struct IGHardwareRingBufferVEBox IGHardwareRingBufferVEBox, *PIGHardwareRingBufferVEBox;

struct IGHardwareRingBufferVEBox { // PlaceHolder Structure
};

typedef struct IOAccelVidMemory IOAccelVidMemory, *PIOAccelVidMemory;

struct IOAccelVidMemory { // PlaceHolder Structure
};

typedef struct IGAccelSysMemory IGAccelSysMemory, *PIGAccelSysMemory;

struct IGAccelSysMemory { // PlaceHolder Structure
};

typedef struct IOAccelAllocationInfo IOAccelAllocationInfo, *PIOAccelAllocationInfo;

struct IOAccelAllocationInfo { // PlaceHolder Structure
};

typedef struct IGHardwareGuCWorkQueue IGHardwareGuCWorkQueue, *PIGHardwareGuCWorkQueue;

struct IGHardwareGuCWorkQueue { // PlaceHolder Structure
};

typedef undefined UK_GEN11_CONTEXT_PRIORITY;

typedef struct IOPMPowerState IOPMPowerState, *PIOPMPowerState;

struct IOPMPowerState { // PlaceHolder Structure
};

typedef struct IGHardwareExtendedContext IGHardwareExtendedContext, *PIGHardwareExtendedContext;

struct IGHardwareExtendedContext { // PlaceHolder Structure
};

typedef struct IGAccelResource IGAccelResource, *PIGAccelResource;

struct IGAccelResource { // PlaceHolder Structure
};

typedef undefined PAVPSessionControlCommand_t;

typedef struct _WA_TABLE _WA_TABLE, *P_WA_TABLE;

struct _WA_TABLE { // PlaceHolder Structure
};

typedef undefined eDoSwap;

typedef struct SCHED_CONTEXT_ENGINE_PRESENCE_STRUCT SCHED_CONTEXT_ENGINE_PRESENCE_STRUCT, *PSCHED_CONTEXT_ENGINE_PRESENCE_STRUCT;

struct SCHED_CONTEXT_ENGINE_PRESENCE_STRUCT { // PlaceHolder Structure
};

typedef struct IOAccelDisplayPipeTransaction2 IOAccelDisplayPipeTransaction2, *PIOAccelDisplayPipeTransaction2;

struct IOAccelDisplayPipeTransaction2 { // PlaceHolder Structure
};

typedef struct SGfxPipeControl SGfxPipeControl, *PSGfxPipeControl;

struct SGfxPipeControl { // PlaceHolder Structure
};

typedef struct IOAccelEvent IOAccelEvent, *PIOAccelEvent;

struct IOAccelEvent { // PlaceHolder Structure
};

typedef struct IOReportChannelList IOReportChannelList, *PIOReportChannelList;

struct IOReportChannelList { // PlaceHolder Structure
};

typedef struct IOAccelShared2 IOAccelShared2, *PIOAccelShared2;

struct IOAccelShared2 { // PlaceHolder Structure
};

typedef struct IGAccelVideoContextMedia IGAccelVideoContextMedia, *PIGAccelVideoContextMedia;

struct IGAccelVideoContextMedia { // PlaceHolder Structure
};

typedef struct IGAccelSurface IGAccelSurface, *PIGAccelSurface;

struct IGAccelSurface { // PlaceHolder Structure
};

typedef struct IOAccelEventMachineFast2 IOAccelEventMachineFast2, *PIOAccelEventMachineFast2;

struct IOAccelEventMachineFast2 { // PlaceHolder Structure
};

typedef struct ipc_port ipc_port, *Pipc_port;

struct ipc_port { // PlaceHolder Structure
};

typedef struct IOTimerEventSource IOTimerEventSource, *PIOTimerEventSource;

struct IOTimerEventSource { // PlaceHolder Structure
};

typedef struct sIntelVideoMethodArgsSetContextPriority sIntelVideoMethodArgsSetContextPriority, *PsIntelVideoMethodArgsSetContextPriority;

struct sIntelVideoMethodArgsSetContextPriority { // PlaceHolder Structure
};

typedef struct IGHardwareRenderCommandStreamer5 IGHardwareRenderCommandStreamer5, *PIGHardwareRenderCommandStreamer5;

struct IGHardwareRenderCommandStreamer5 { // PlaceHolder Structure
};

typedef undefined GFX3DSTATE_SURFACEFORMAT;

typedef undefined SurfaceUsage;

typedef struct IOWorkLoop IOWorkLoop, *PIOWorkLoop;

struct IOWorkLoop { // PlaceHolder Structure
};

typedef struct OSSymbol OSSymbol, *POSSymbol;

struct OSSymbol { // PlaceHolder Structure
};

typedef struct IGGCObject IGGCObject, *PIGGCObject;

struct IGGCObject { // PlaceHolder Structure
};

typedef struct IntelSharedMemInfo IntelSharedMemInfo, *PIntelSharedMemInfo;

struct IntelSharedMemInfo { // PlaceHolder Structure
};

typedef struct OSString OSString, *POSString;

struct OSString { // PlaceHolder Structure
};

typedef struct IGVector<IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> IGVector<IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>, *PIGVector<IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>;

struct IGVector<IGHashTable<IGPagePool::PoolElement*,unsigned_long,IGPagePool::PoolElementHash,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined MDAPIOABufferReportType;

typedef undefined GTTVirtualAddress32;

typedef undefined DisplaySleepCmd_t;

typedef struct IntelICLMemoryManager IntelICLMemoryManager, *PIntelICLMemoryManager;

struct IntelICLMemoryManager { // PlaceHolder Structure
};

typedef struct TelemetryOffsetValue TelemetryOffsetValue, *PTelemetryOffsetValue;

struct TelemetryOffsetValue { // PlaceHolder Structure
};

typedef struct wait_update_events wait_update_events, *Pwait_update_events;

struct wait_update_events { // PlaceHolder Structure
};

typedef struct IOAccelTask IOAccelTask, *PIOAccelTask;

struct IOAccelTask { // PlaceHolder Structure
};

typedef struct IGHwCsExecList5 IGHwCsExecList5, *PIGHwCsExecList5;

struct IGHwCsExecList5 { // PlaceHolder Structure
};

typedef struct IOAccelEventMachine2 IOAccelEventMachine2, *PIOAccelEventMachine2;

struct IOAccelEventMachine2 { // PlaceHolder Structure
};

typedef struct IGHardwareContext IGHardwareContext, *PIGHardwareContext;

struct IGHardwareContext { // PlaceHolder Structure
};

typedef struct IOAccelSurfaceScaling IOAccelSurfaceScaling, *PIOAccelSurfaceScaling;

struct IOAccelSurfaceScaling { // PlaceHolder Structure
};

typedef struct HiLoHi HiLoHi, *PHiLoHi;

struct HiLoHi { // PlaceHolder Structure
};

typedef struct semaphore semaphore, *Psemaphore;

struct semaphore { // PlaceHolder Structure
};

typedef struct sIntelVideoMethodArgsPerfCapabilityIn sIntelVideoMethodArgsPerfCapabilityIn, *PsIntelVideoMethodArgsPerfCapabilityIn;

struct sIntelVideoMethodArgsPerfCapabilityIn { // PlaceHolder Structure
};

typedef struct IGAccelMemoryMap IGAccelMemoryMap, *PIGAccelMemoryMap;

struct IGAccelMemoryMap { // PlaceHolder Structure
};

typedef struct IntelGLUnmapUserMemoryIn IntelGLUnmapUserMemoryIn, *PIntelGLUnmapUserMemoryIn;

struct IntelGLUnmapUserMemoryIn { // PlaceHolder Structure
};

typedef struct IOSurface IOSurface, *PIOSurface;

struct IOSurface { // PlaceHolder Structure
};

typedef struct UK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC UK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC, *PUK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC;

struct UK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC { // PlaceHolder Structure
};

typedef struct IGAccelStatisticsGlobalUsage IGAccelStatisticsGlobalUsage, *PIGAccelStatisticsGlobalUsage;

struct IGAccelStatisticsGlobalUsage { // PlaceHolder Structure
};

typedef struct IntelCLMapUserMemoryIn IntelCLMapUserMemoryIn, *PIntelCLMapUserMemoryIn;

struct IntelCLMapUserMemoryIn { // PlaceHolder Structure
};

typedef struct depth_resolve_params_t depth_resolve_params_t, *Pdepth_resolve_params_t;

struct depth_resolve_params_t { // PlaceHolder Structure
};

typedef struct IOPCIDevice IOPCIDevice, *PIOPCIDevice;

struct IOPCIDevice { // PlaceHolder Structure
};

typedef struct SGfxContextDescriptor SGfxContextDescriptor, *PSGfxContextDescriptor;

struct SGfxContextDescriptor { // PlaceHolder Structure
};

typedef struct TelemetrySampleUsageGPU TelemetrySampleUsageGPU, *PTelemetrySampleUsageGPU;

struct TelemetrySampleUsageGPU { // PlaceHolder Structure
};

typedef struct IOFilterInterruptEventSource IOFilterInterruptEventSource, *PIOFilterInterruptEventSource;

struct IOFilterInterruptEventSource { // PlaceHolder Structure
};

typedef struct IGTelemetryKMD IGTelemetryKMD, *PIGTelemetryKMD;

struct IGTelemetryKMD { // PlaceHolder Structure
};

typedef struct TelemetrySampleGPU TelemetrySampleGPU, *PTelemetrySampleGPU;

struct TelemetrySampleGPU { // PlaceHolder Structure
};

typedef struct IOUserClient IOUserClient, *PIOUserClient;

struct IOUserClient { // PlaceHolder Structure
};

typedef struct IGAccelGLContext IGAccelGLContext, *PIGAccelGLContext;

struct IGAccelGLContext { // PlaceHolder Structure
};

typedef struct IGHardwareResolveContext IGHardwareResolveContext, *PIGHardwareResolveContext;

struct IGHardwareResolveContext { // PlaceHolder Structure
};

typedef struct IOAccelConfig IOAccelConfig, *PIOAccelConfig;

struct IOAccelConfig { // PlaceHolder Structure
};

typedef struct IOExternalMethodArguments IOExternalMethodArguments, *PIOExternalMethodArguments;

struct IOExternalMethodArguments { // PlaceHolder Structure
};

typedef struct IOAccelSegmentResourceList IOAccelSegmentResourceList, *PIOAccelSegmentResourceList;

struct IOAccelSegmentResourceList { // PlaceHolder Structure
};

typedef struct OSSet OSSet, *POSSet;

struct OSSet { // PlaceHolder Structure
};

typedef struct ResourceCacheElement ResourceCacheElement, *PResourceCacheElement;

struct ResourceCacheElement { // PlaceHolder Structure
};

typedef struct IOVirtualRange IOVirtualRange, *PIOVirtualRange;

struct IOVirtualRange { // PlaceHolder Structure
};

typedef struct IGRangeAllocator IGRangeAllocator, *PIGRangeAllocator;

struct IGRangeAllocator { // PlaceHolder Structure
};

typedef struct IOFramebuffer IOFramebuffer, *PIOFramebuffer;

struct IOFramebuffer { // PlaceHolder Structure
};

typedef struct IntelAccelerator IntelAccelerator, *PIntelAccelerator;

struct IntelAccelerator { // PlaceHolder Structure
};

typedef undefined IGSliceConfig;

typedef struct SGfxHardwareContextImageRCS SGfxHardwareContextImageRCS, *PSGfxHardwareContextImageRCS;

struct SGfxHardwareContextImageRCS { // PlaceHolder Structure
};

typedef struct IntelCLUnmapUserMemoryIn IntelCLUnmapUserMemoryIn, *PIntelCLUnmapUserMemoryIn;

struct IntelCLUnmapUserMemoryIn { // PlaceHolder Structure
};

typedef undefined eIOAccelSurfaceShapeBits;

typedef struct IGHardwareContextParams IGHardwareContextParams, *PIGHardwareContextParams;

struct IGHardwareContextParams { // PlaceHolder Structure
};

typedef struct IGHwCsStatsTracker IGHwCsStatsTracker, *PIGHwCsStatsTracker;

struct IGHwCsStatsTracker { // PlaceHolder Structure
};

typedef struct IOPowerConnection IOPowerConnection, *PIOPowerConnection;

struct IOPowerConnection { // PlaceHolder Structure
};

typedef struct TelemetrySampleInfo TelemetrySampleInfo, *PTelemetrySampleInfo;

struct TelemetrySampleInfo { // PlaceHolder Structure
};

typedef struct IGHardwareBlit3DContext IGHardwareBlit3DContext, *PIGHardwareBlit3DContext;

struct IGHardwareBlit3DContext { // PlaceHolder Structure
};

typedef struct IGAccelVideoContext IGAccelVideoContext, *PIGAccelVideoContext;

struct IGAccelVideoContext { // PlaceHolder Structure
};

typedef undefined GFX3DSTATE_TILEMODE;

typedef struct IGHardwareGuC IGHardwareGuC, *PIGHardwareGuC;

struct IGHardwareGuC { // PlaceHolder Structure
};

typedef struct IGHardwareGuCCTBuffer IGHardwareGuCCTBuffer, *PIGHardwareGuCCTBuffer;

struct IGHardwareGuCCTBuffer { // PlaceHolder Structure
};

typedef struct IOAccelMemory IOAccelMemory, *PIOAccelMemory;

struct IOAccelMemory { // PlaceHolder Structure
};

typedef struct IOService IOService, *PIOService;

struct IOService { // PlaceHolder Structure
};

typedef struct IGTelemetryGPU IGTelemetryGPU, *PIGTelemetryGPU;

struct IGTelemetryGPU { // PlaceHolder Structure
};

typedef struct IGFenceAllocator IGFenceAllocator, *PIGFenceAllocator;

struct IGFenceAllocator { // PlaceHolder Structure
};

typedef struct IGAccelDisplayMachine IGAccelDisplayMachine, *PIGAccelDisplayMachine;

struct IGAccelDisplayMachine { // PlaceHolder Structure
};

typedef struct _SKU_FEATURE_TABLE _SKU_FEATURE_TABLE, *P_SKU_FEATURE_TABLE;

struct _SKU_FEATURE_TABLE { // PlaceHolder Structure
};

typedef struct IGAccelFIFOChannel IGAccelFIFOChannel, *PIGAccelFIFOChannel;

struct IGAccelFIFOChannel { // PlaceHolder Structure
};

typedef undefined UK_GEN11_CMD_TRANSPORT_BUFFER_TYPE;

typedef struct IOAccel2DContext2 IOAccel2DContext2, *PIOAccel2DContext2;

struct IOAccel2DContext2 { // PlaceHolder Structure
};

typedef struct IOAccelSharedUserClient2 IOAccelSharedUserClient2, *PIOAccelSharedUserClient2;

struct IOAccelSharedUserClient2 { // PlaceHolder Structure
};

typedef struct IGAccelDisplayPipe IGAccelDisplayPipe, *PIGAccelDisplayPipe;

struct IGAccelDisplayPipe { // PlaceHolder Structure
};

typedef struct IGSemaphoreWaitBufferQueue IGSemaphoreWaitBufferQueue, *PIGSemaphoreWaitBufferQueue;

struct IGSemaphoreWaitBufferQueue { // PlaceHolder Structure
};

typedef struct IOAccelClientSharedRW IOAccelClientSharedRW, *PIOAccelClientSharedRW;

struct IOAccelClientSharedRW { // PlaceHolder Structure
};

typedef struct IOAccelContextGetDataBufferOut IOAccelContextGetDataBufferOut, *PIOAccelContextGetDataBufferOut;

struct IOAccelContextGetDataBufferOut { // PlaceHolder Structure
};

typedef struct IOAccelMemoryMap IOAccelMemoryMap, *PIOAccelMemoryMap;

struct IOAccelMemoryMap { // PlaceHolder Structure
};

typedef struct _CODECHAL_TOKEN _CODECHAL_TOKEN, *P_CODECHAL_TOKEN;

struct _CODECHAL_TOKEN { // PlaceHolder Structure
};

typedef struct IGAccelCommandDescriptor IGAccelCommandDescriptor, *PIGAccelCommandDescriptor;

struct IGAccelCommandDescriptor { // PlaceHolder Structure
};

typedef struct IOAccelCLContext2 IOAccelCLContext2, *PIOAccelCLContext2;

struct IOAccelCLContext2 { // PlaceHolder Structure
};

typedef struct TelemetryOperation TelemetryOperation, *PTelemetryOperation;

struct TelemetryOperation { // PlaceHolder Structure
};

typedef struct rect_pair_t rect_pair_t, *Prect_pair_t;

struct rect_pair_t { // PlaceHolder Structure
};

typedef struct IGHardwarePerProcessPageTable IGHardwarePerProcessPageTable, *PIGHardwarePerProcessPageTable;

struct IGHardwarePerProcessPageTable { // PlaceHolder Structure
};

typedef struct SGfxContextStatusBufferEntry SGfxContextStatusBufferEntry, *PSGfxContextStatusBufferEntry;

struct SGfxContextStatusBufferEntry { // PlaceHolder Structure
};

typedef struct IGMemoryManager IGMemoryManager, *PIGMemoryManager;

struct IGMemoryManager { // PlaceHolder Structure
};

typedef struct UK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC UK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC, *PUK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC;

struct UK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC { // PlaceHolder Structure
};

typedef undefined ENCODING_CMD_MODE;

typedef struct vendevtCommandRec vendevtCommandRec, *PvendevtCommandRec;

struct vendevtCommandRec { // PlaceHolder Structure
};

typedef struct IGAccelSharedUserClient IGAccelSharedUserClient, *PIGAccelSharedUserClient;

struct IGAccelSharedUserClient { // PlaceHolder Structure
};

typedef struct IGAccelSegmentResourceList IGAccelSegmentResourceList, *PIGAccelSegmentResourceList;

struct IGAccelSegmentResourceList { // PlaceHolder Structure
};

typedef struct IGHardwareRingBufferMain IGHardwareRingBufferMain, *PIGHardwareRingBufferMain;

struct IGHardwareRingBufferMain { // PlaceHolder Structure
};

typedef struct IGAccelTask IGAccelTask, *PIGAccelTask;

struct IGAccelTask { // PlaceHolder Structure
};

typedef struct IGScheduler IGScheduler, *PIGScheduler;

struct IGScheduler { // PlaceHolder Structure
};

typedef struct sysctl_req sysctl_req, *Psysctl_req;

struct sysctl_req { // PlaceHolder Structure
};

typedef undefined EIntelCCSResolveType;

typedef struct debugRegisters debugRegisters, *PdebugRegisters;

struct debugRegisters { // PlaceHolder Structure
};

typedef struct IGVector<IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> IGVector<IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>, *PIGVector<IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>;

struct IGVector<IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct _AVCScalingSurfaceStateHeap _AVCScalingSurfaceStateHeap, *P_AVCScalingSurfaceStateHeap;

struct _AVCScalingSurfaceStateHeap { // PlaceHolder Structure
};

typedef struct IGGucCtrl IGGucCtrl, *PIGGucCtrl;

struct IGGucCtrl { // PlaceHolder Structure
};

typedef struct IntelSharedSkuFeatureTableExRec IntelSharedSkuFeatureTableExRec, *PIntelSharedSkuFeatureTableExRec;

struct IntelSharedSkuFeatureTableExRec { // PlaceHolder Structure
};

typedef struct IOAccelContext2 IOAccelContext2, *PIOAccelContext2;

struct IOAccelContext2 { // PlaceHolder Structure
};

typedef struct IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy> IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>, *PIGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>;

struct IGHashTable<unsigned_long_long,PerThreadInfo*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct _AVCSFDSurfaceStateHeap _AVCSFDSurfaceStateHeap, *P_AVCSFDSurfaceStateHeap;

struct _AVCSFDSurfaceStateHeap { // PlaceHolder Structure
};

typedef struct _AVCHMESurfaceStateHeap _AVCHMESurfaceStateHeap, *P_AVCHMESurfaceStateHeap;

struct _AVCHMESurfaceStateHeap { // PlaceHolder Structure
};

typedef struct IOAccelBlockFencePort2 IOAccelBlockFencePort2, *PIOAccelBlockFencePort2;

struct IOAccelBlockFencePort2 { // PlaceHolder Structure
};

typedef struct ThermalStallStats ThermalStallStats, *PThermalStallStats;

struct ThermalStallStats { // PlaceHolder Structure
};

typedef struct IGHardwareDisplayContext IGHardwareDisplayContext, *PIGHardwareDisplayContext;

struct IGHardwareDisplayContext { // PlaceHolder Structure
};

typedef struct task task, *Ptask;

struct task { // PlaceHolder Structure
};

typedef struct IGPhysicalSegmentIterator IGPhysicalSegmentIterator, *PIGPhysicalSegmentIterator;

struct IGPhysicalSegmentIterator { // PlaceHolder Structure
};

typedef struct IOAccelSidebandBufferHeader IOAccelSidebandBufferHeader, *PIOAccelSidebandBufferHeader;

struct IOAccelSidebandBufferHeader { // PlaceHolder Structure
};

typedef struct IGAddressRange IGAddressRange, *PIGAddressRange;

struct IGAddressRange { // PlaceHolder Structure
};

typedef struct IGAccelCommandQueue IGAccelCommandQueue, *PIGAccelCommandQueue;

struct IGAccelCommandQueue { // PlaceHolder Structure
};

typedef struct TelemetrySampleMeta TelemetrySampleMeta, *PTelemetrySampleMeta;

struct TelemetrySampleMeta { // PlaceHolder Structure
};

typedef struct IORangeAllocator IORangeAllocator, *PIORangeAllocator;

struct IORangeAllocator { // PlaceHolder Structure
};

typedef struct IGAddressRangeRotatedPageIterator IGAddressRangeRotatedPageIterator, *PIGAddressRangeRotatedPageIterator;

struct IGAddressRangeRotatedPageIterator { // PlaceHolder Structure
};

typedef struct IGHardwareRingBufferBlit IGHardwareRingBufferBlit, *PIGHardwareRingBufferBlit;

struct IGHardwareRingBufferBlit { // PlaceHolder Structure
};

typedef struct IGAccelCLContext IGAccelCLContext, *PIGAccelCLContext;

struct IGAccelCLContext { // PlaceHolder Structure
};

typedef struct IOAccelDeviceRegion IOAccelDeviceRegion, *PIOAccelDeviceRegion;

struct IOAccelDeviceRegion { // PlaceHolder Structure
};

typedef struct OSSerialize OSSerialize, *POSSerialize;

struct OSSerialize { // PlaceHolder Structure
};

typedef struct IntelScaledModeData IntelScaledModeData, *PIntelScaledModeData;

struct IntelScaledModeData { // PlaceHolder Structure
};

typedef struct IOGraphicsAccelerator2 IOGraphicsAccelerator2, *PIOGraphicsAccelerator2;

struct IOGraphicsAccelerator2 { // PlaceHolder Structure
};

typedef struct IOAccelDeviceShmem IOAccelDeviceShmem, *PIOAccelDeviceShmem;

struct IOAccelDeviceShmem { // PlaceHolder Structure
};

typedef struct IOInterruptEventSource IOInterruptEventSource, *PIOInterruptEventSource;

struct IOInterruptEventSource { // PlaceHolder Structure
};

typedef struct IOAccelSubmitter2 IOAccelSubmitter2, *PIOAccelSubmitter2;

struct IOAccelSubmitter2 { // PlaceHolder Structure
};

typedef struct IORegistryPlane IORegistryPlane, *PIORegistryPlane;

struct IORegistryPlane { // PlaceHolder Structure
};

typedef struct IGVector<resetRegisterInfo,IGIOMallocAllocatorPolicy> IGVector<resetRegisterInfo,IGIOMallocAllocatorPolicy>, *PIGVector<resetRegisterInfo,IGIOMallocAllocatorPolicy>;

struct IGVector<resetRegisterInfo,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined CombinedMode;

typedef struct OSObject OSObject, *POSObject;

struct OSObject { // PlaceHolder Structure
};

typedef struct color_resolve_params_t color_resolve_params_t, *Pcolor_resolve_params_t;

struct color_resolve_params_t { // PlaceHolder Structure
};

typedef struct IGStolenMemoryDescriptor IGStolenMemoryDescriptor, *PIGStolenMemoryDescriptor;

struct IGStolenMemoryDescriptor { // PlaceHolder Structure
};

typedef struct IntelGLMapUserMemoryIn IntelGLMapUserMemoryIn, *PIntelGLMapUserMemoryIn;

struct IntelGLMapUserMemoryIn { // PlaceHolder Structure
};

typedef struct IntelGLMapUserMemoryOut IntelGLMapUserMemoryOut, *PIntelGLMapUserMemoryOut;

struct IntelGLMapUserMemoryOut { // PlaceHolder Structure
};

typedef struct IOAccelCommandBufferPool2 IOAccelCommandBufferPool2, *PIOAccelCommandBufferPool2;

struct IOAccelCommandBufferPool2 { // PlaceHolder Structure
};

typedef undefined eLockType;

typedef struct IOTimingInformation IOTimingInformation, *PIOTimingInformation;

struct IOTimingInformation { // PlaceHolder Structure
};

typedef struct IGGCQueueEntry IGGCQueueEntry, *PIGGCQueueEntry;

struct IGGCQueueEntry { // PlaceHolder Structure
};

typedef struct IOAccelDisplayPipe IOAccelDisplayPipe, *PIOAccelDisplayPipe;

struct IOAccelDisplayPipe { // PlaceHolder Structure
};

typedef struct IGInterruptBridge IGInterruptBridge, *PIGInterruptBridge;

struct IGInterruptBridge { // PlaceHolder Structure
};

typedef struct IOAccelTraceStream2 IOAccelTraceStream2, *PIOAccelTraceStream2;

struct IOAccelTraceStream2 { // PlaceHolder Structure
};

typedef struct IGSharedMappedBuffer IGSharedMappedBuffer, *PIGSharedMappedBuffer;

struct IGSharedMappedBuffer { // PlaceHolder Structure
};

typedef struct _CODECHAL_TOKEN_HEADER _CODECHAL_TOKEN_HEADER, *P_CODECHAL_TOKEN_HEADER;

struct _CODECHAL_TOKEN_HEADER { // PlaceHolder Structure
};

typedef undefined kHeapType;

typedef struct IGHostToGucMessage IGHostToGucMessage, *PIGHostToGucMessage;

struct IGHostToGucMessage { // PlaceHolder Structure
};

typedef undefined eIOAccelCommandQueueError;

typedef struct IOAccelResource2 IOAccelResource2, *PIOAccelResource2;

struct IOAccelResource2 { // PlaceHolder Structure
};

typedef struct IGPerfCounterConfig IGPerfCounterConfig, *PIGPerfCounterConfig;

struct IGPerfCounterConfig { // PlaceHolder Structure
};

typedef struct MDAPIInitOABufferOp MDAPIInitOABufferOp, *PMDAPIInitOABufferOp;

struct MDAPIInitOABufferOp { // PlaceHolder Structure
};

typedef struct IGHeapsAccess IGHeapsAccess, *PIGHeapsAccess;

struct IGHeapsAccess { // PlaceHolder Structure
};

typedef struct TelemetryItem TelemetryItem, *PTelemetryItem;

struct TelemetryItem { // PlaceHolder Structure
};

typedef struct IOEventSource IOEventSource, *PIOEventSource;

struct IOEventSource { // PlaceHolder Structure
};

typedef struct IGTelemetryUsage IGTelemetryUsage, *PIGTelemetryUsage;

struct IGTelemetryUsage { // PlaceHolder Structure
};

typedef undefined ...;

typedef struct IGAccelVideoContextMain IGAccelVideoContextMain, *PIGAccelVideoContextMain;

struct IGAccelVideoContextMain { // PlaceHolder Structure
};

typedef struct IntelHwInfoRec IntelHwInfoRec, *PIntelHwInfoRec;

struct IntelHwInfoRec { // PlaceHolder Structure
};

typedef undefined Blt3DOptMode;

typedef struct IOAccelSysMemory IOAccelSysMemory, *PIOAccelSysMemory;

struct IOAccelSysMemory { // PlaceHolder Structure
};

typedef struct TelemetrySampleUsageMeta TelemetrySampleUsageMeta, *PTelemetrySampleUsageMeta;

struct TelemetrySampleUsageMeta { // PlaceHolder Structure
};

typedef struct UK_GEN11_TARGET_ENGINE_REC UK_GEN11_TARGET_ENGINE_REC, *PUK_GEN11_TARGET_ENGINE_REC;

struct UK_GEN11_TARGET_ENGINE_REC { // PlaceHolder Structure
};

typedef struct SGfxRenderSurfaceState SGfxRenderSurfaceState, *PSGfxRenderSurfaceState;

struct SGfxRenderSurfaceState { // PlaceHolder Structure
};

typedef struct blit3d_params_t blit3d_params_t, *Pblit3d_params_t;

struct blit3d_params_t { // PlaceHolder Structure
};

typedef struct IOAccelChannel2 IOAccelChannel2, *PIOAccelChannel2;

struct IOAccelChannel2 { // PlaceHolder Structure
};

typedef struct IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy> IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>, *PIGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>;

struct IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct _VPHAL_VEBOX_TOKEN_MERCURY _VPHAL_VEBOX_TOKEN_MERCURY, *P_VPHAL_VEBOX_TOKEN_MERCURY;

struct _VPHAL_VEBOX_TOKEN_MERCURY { // PlaceHolder Structure
};

typedef struct IOAccelEventQueue IOAccelEventQueue, *PIOAccelEventQueue;

struct IOAccelEventQueue { // PlaceHolder Structure
};

typedef struct IGHardwareContextUtilizationData IGHardwareContextUtilizationData, *PIGHardwareContextUtilizationData;

struct IGHardwareContextUtilizationData { // PlaceHolder Structure
};

typedef struct OSArray OSArray, *POSArray;

struct OSArray { // PlaceHolder Structure
};

typedef struct sysctl_oid sysctl_oid, *Psysctl_oid;

struct sysctl_oid { // PlaceHolder Structure
};

typedef undefined FLUSH_TYPE;

typedef struct IGHardwareCommandStreamer4 IGHardwareCommandStreamer4, *PIGHardwareCommandStreamer4;

struct IGHardwareCommandStreamer4 { // PlaceHolder Structure
};

typedef struct IOAccelClientSharedRO IOAccelClientSharedRO, *PIOAccelClientSharedRO;

struct IOAccelClientSharedRO { // PlaceHolder Structure
};

typedef struct IOAccelCommandStreamInfo IOAccelCommandStreamInfo, *PIOAccelCommandStreamInfo;

struct IOAccelCommandStreamInfo { // PlaceHolder Structure
};

typedef struct IOAccelDisplayPipeScaler IOAccelDisplayPipeScaler, *PIOAccelDisplayPipeScaler;

struct IOAccelDisplayPipeScaler { // PlaceHolder Structure
};

typedef undefined MDAPIOABufferOverrunMode;

typedef struct IntelGlobalSkuFeatureTableExRec IntelGlobalSkuFeatureTableExRec, *PIntelGlobalSkuFeatureTableExRec;

struct IntelGlobalSkuFeatureTableExRec { // PlaceHolder Structure
};

typedef struct SGfxMILoadRegisterImmediateVariable SGfxMILoadRegisterImmediateVariable, *PSGfxMILoadRegisterImmediateVariable;

struct SGfxMILoadRegisterImmediateVariable { // PlaceHolder Structure
};

typedef struct IGTelemetry IGTelemetry, *PIGTelemetry;

struct IGTelemetry { // PlaceHolder Structure
};

typedef struct IGStolenMemoryPool IGStolenMemoryPool, *PIGStolenMemoryPool;

struct IGStolenMemoryPool { // PlaceHolder Structure
};

typedef undefined eRestartRequest;

typedef struct IGVector<IGAccelResource*,IGIOMallocAllocatorPolicy> IGVector<IGAccelResource*,IGIOMallocAllocatorPolicy>, *PIGVector<IGAccelResource*,IGIOMallocAllocatorPolicy>;

struct IGVector<IGAccelResource*,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct IOAccelBlockFence IOAccelBlockFence, *PIOAccelBlockFence;

struct IOAccelBlockFence { // PlaceHolder Structure
};

typedef struct IORegistryEntry IORegistryEntry, *PIORegistryEntry;

struct IORegistryEntry { // PlaceHolder Structure
};

typedef struct IOAccelContextConfig IOAccelContextConfig, *PIOAccelContextConfig;

struct IOAccelContextConfig { // PlaceHolder Structure
};

typedef struct IOAccelGetResourceInfoReturnData IOAccelGetResourceInfoReturnData, *PIOAccelGetResourceInfoReturnData;

struct IOAccelGetResourceInfoReturnData { // PlaceHolder Structure
};

typedef struct OSDictionary OSDictionary, *POSDictionary;

struct OSDictionary { // PlaceHolder Structure
};

typedef struct surface_params_t surface_params_t, *Psurface_params_t;

struct surface_params_t { // PlaceHolder Structure
};

typedef undefined IORPC;

typedef struct IGHardwareGlobalPageTable IGHardwareGlobalPageTable, *PIGHardwareGlobalPageTable;

struct IGHardwareGlobalPageTable { // PlaceHolder Structure
};

typedef struct IGHardwareCommandStreamer5 IGHardwareCommandStreamer5, *PIGHardwareCommandStreamer5;

struct IGHardwareCommandStreamer5 { // PlaceHolder Structure
};

typedef struct IOAccelEventFence IOAccelEventFence, *PIOAccelEventFence;

struct IOAccelEventFence { // PlaceHolder Structure
};

typedef undefined IGFailureReason;

typedef struct MDAPIReadOABufferOpOut MDAPIReadOABufferOpOut, *PMDAPIReadOABufferOpOut;

struct MDAPIReadOABufferOpOut { // PlaceHolder Structure
};

typedef struct sIntelVideoMethodArgsGetAcceleratorId sIntelVideoMethodArgsGetAcceleratorId, *PsIntelVideoMethodArgsGetAcceleratorId;

struct sIntelVideoMethodArgsGetAcceleratorId { // PlaceHolder Structure
};

typedef struct IGBitSet IGBitSet, *PIGBitSet;

struct IGBitSet { // PlaceHolder Structure
};

typedef struct IGHardwareRingBufferMedia IGHardwareRingBufferMedia, *PIGHardwareRingBufferMedia;

struct IGHardwareRingBufferMedia { // PlaceHolder Structure
};

typedef struct IOAccelDevice2 IOAccelDevice2, *PIOAccelDevice2;

struct IOAccelDevice2 { // PlaceHolder Structure
};

typedef struct resetRegisterInfo resetRegisterInfo, *PresetRegisterInfo;

struct resetRegisterInfo { // PlaceHolder Structure
};

typedef struct IGHwCsWorkItem5 IGHwCsWorkItem5, *PIGHwCsWorkItem5;

struct IGHwCsWorkItem5 { // PlaceHolder Structure
};

typedef struct IntelCLMapUserMemoryOut IntelCLMapUserMemoryOut, *PIntelCLMapUserMemoryOut;

struct IntelCLMapUserMemoryOut { // PlaceHolder Structure
};

typedef struct IGVector<unsigned_int,IGIOMallocAllocatorPolicy> IGVector<unsigned_int,IGIOMallocAllocatorPolicy>, *PIGVector<unsigned_int,IGIOMallocAllocatorPolicy>;

struct IGVector<unsigned_int,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined ResolveRange;

typedef struct IGVector<IOAccelEvent*,IGIOMallocAllocatorPolicy> IGVector<IOAccelEvent*,IGIOMallocAllocatorPolicy>, *PIGVector<IOAccelEvent*,IGIOMallocAllocatorPolicy>;

struct IGVector<IOAccelEvent*,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct IGGuC IGGuC, *PIGGuC;

struct IGGuC { // PlaceHolder Structure
};

typedef struct IGBlockFenceManager IGBlockFenceManager, *PIGBlockFenceManager;

struct IGBlockFenceManager { // PlaceHolder Structure
};

typedef struct IOAccelStatistics2 IOAccelStatistics2, *PIOAccelStatistics2;

struct IOAccelStatistics2 { // PlaceHolder Structure
};

typedef struct _VPHAL_TOKEN_MERCURY _VPHAL_TOKEN_MERCURY, *P_VPHAL_TOKEN_MERCURY;

struct _VPHAL_TOKEN_MERCURY { // PlaceHolder Structure
};

typedef struct IOAccelFIFOChannel2 IOAccelFIFOChannel2, *PIOAccelFIFOChannel2;

struct IOAccelFIFOChannel2 { // PlaceHolder Structure
};

typedef struct IGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*,IGIOMallocAllocatorPolicy> IGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*,IGIOMallocAllocatorPolicy>, *PIGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*,IGIOMallocAllocatorPolicy>;

struct IGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef struct IGFlushNotifyInterruptEventSource IGFlushNotifyInterruptEventSource, *PIGFlushNotifyInterruptEventSource;

struct IGFlushNotifyInterruptEventSource { // PlaceHolder Structure
};

typedef undefined TelemetryTimeTupleOption;

typedef undefined GTTVirtualAddress64;

typedef struct IOAccelCommandQueue IOAccelCommandQueue, *PIOAccelCommandQueue;

struct IOAccelCommandQueue { // PlaceHolder Structure
};

typedef undefined EIntelResolveType;

typedef undefined PAVPSessionCommandID_t;

typedef struct IGHardwarePerProcessPageTable32 IGHardwarePerProcessPageTable32, *PIGHardwarePerProcessPageTable32;

struct IGHardwarePerProcessPageTable32 { // PlaceHolder Structure
};

typedef undefined IntelClientID_t;

typedef struct IOAccelGLContext2 IOAccelGLContext2, *PIOAccelGLContext2;

struct IOAccelGLContext2 { // PlaceHolder Structure
};

typedef struct IOPixelInformation IOPixelInformation, *PIOPixelInformation;

struct IOPixelInformation { // PlaceHolder Structure
};

typedef struct IGWorkQueueAk IGWorkQueueAk, *PIGWorkQueueAk;

struct IGWorkQueueAk { // PlaceHolder Structure
};

typedef undefined BufferType;

typedef struct IGSpinLock IGSpinLock, *PIGSpinLock;

struct IGSpinLock { // PlaceHolder Structure
};

typedef struct IGVector<IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> IGVector<IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>, *PIGVector<IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>;

struct IGVector<IGHashTable<unsigned_long_long,IGAccelMemoryMap*,IGHashTraits<unsigned_long_long>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined IGHwCsType;

typedef struct IGAccelStatistics IGAccelStatistics, *PIGAccelStatistics;

struct IGAccelStatistics { // PlaceHolder Structure
};

typedef undefined FlipCounterCmd_t;

typedef struct IGVector<IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> IGVector<IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>, *PIGVector<IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy>;

struct IGVector<IGHashTable<unsigned_int,unsigned_int,IGHashTraits<unsigned_int>,IGIOMallocAllocatorPolicy>::Slot,IGIOMallocAllocatorPolicy> { // PlaceHolder Structure
};

typedef undefined eIOAccelCommandQueuePriority;

typedef struct MetaClass MetaClass, *PMetaClass;

struct MetaClass { // PlaceHolder Structure
};

typedef undefined Type;

typedef struct LevelEntry LevelEntry, *PLevelEntry;

struct LevelEntry { // PlaceHolder Structure
};

typedef struct IGGuCSharedObject IGGuCSharedObject, *PIGGuCSharedObject;

struct IGGuCSharedObject { // PlaceHolder Structure
};

typedef undefined IGGucDmaType;

typedef struct InterruptTraits InterruptTraits, *PInterruptTraits;

struct InterruptTraits { // PlaceHolder Structure
};

typedef struct _Resource _Resource, *P_Resource;

struct _Resource { // PlaceHolder Structure
};

typedef undefined eTokens;

typedef struct ResourceInfoEntry ResourceInfoEntry, *PResourceInfoEntry;

struct ResourceInfoEntry { // PlaceHolder Structure
};

typedef struct ReshapeData ReshapeData, *PReshapeData;

struct ReshapeData { // PlaceHolder Structure
};

typedef struct sResolveResourceDesc sResolveResourceDesc, *PsResolveResourceDesc;

struct sResolveResourceDesc { // PlaceHolder Structure
};

typedef struct sCommandBufferEnd sCommandBufferEnd, *PsCommandBufferEnd;

struct sCommandBufferEnd { // PlaceHolder Structure
};

typedef undefined eResolveFilter;

typedef struct $_0 $_0, *P$_0;

struct $_0 { // PlaceHolder Structure
};

typedef struct SemaphoreWaitBufferDescriptor SemaphoreWaitBufferDescriptor, *PSemaphoreWaitBufferDescriptor;

struct SemaphoreWaitBufferDescriptor { // PlaceHolder Structure
};

typedef struct PageDescriptor PageDescriptor, *PPageDescriptor;

struct PageDescriptor { // PlaceHolder Structure
};

typedef struct PoolElement PoolElement, *PPoolElement;

struct PoolElement { // PlaceHolder Structure
};

typedef __darwin_ssize_t ssize_t;

typedef struct CS_CodeDirectory CS_CodeDirectory, *PCS_CodeDirectory;

struct CS_CodeDirectory {
    dword magic; // magic number (CSMAGIC_CODEDIRECTORY)
    dword length; // total length of CodeDirectory blob
    dword version; // compatibility version
    dword flags; // setup and mode flags
    dword hashOffset; // offset of hash slot element at index zero
    dword identOffset; // offset of identifier string
    dword nSpecialSlots; // number of special hash slots
    dword nCodeSlots; // number of ordinary (code) hash slots
    dword codeLimit; // limit to main image signature range
    byte hashSize; // size of each hash in bytes
    byte hashType; // type of hash (cdHashType* constants)
    byte platform; // platform identifier; zero if not platform binary
    byte pageSize; // log2(page size in bytes); 0 => infinite
    dword spare2; // unused (must be zero)
    dword scatterOffset; // offset of optional scatter vector
};

typedef struct uuid_command uuid_command, *Puuid_command;

struct uuid_command {
    dword cmd;
    dword cmdsize;
    byte uuid[16];
};

typedef struct CS_BlobIndex CS_BlobIndex, *PCS_BlobIndex;

struct CS_BlobIndex {
    dword type; // type of entry
    dword offset; // offset of entry
};

typedef struct section section, *Psection;

struct section {
    char sectname[16];
    char segname[16];
    qword addr;
    qword size;
    dword offset;
    dword align;
    dword reloff;
    dword nrelocs;
    dword flags;
    dword reserved1;
    dword reserved2;
    dword reserved3;
};

typedef struct nlist nlist, *Pnlist;

struct nlist {
    dword n_strx;
    byte n_type;
    byte n_sect;
    word n_desc;
    qword n_value;
};

typedef struct segment_command segment_command, *Psegment_command;

struct segment_command {
    dword cmd;
    dword cmdsize;
    char segname[16];
    qword vmaddr;
    qword vmsize;
    qword fileoff;
    qword filesize;
    dword maxprot;
    dword initprot;
    dword nsects;
    dword flags;
};

typedef struct source_version_command source_version_command, *Psource_version_command;

struct source_version_command {
    dword cmd;
    dword cmdsize;
    qword version;
};

typedef struct mach_header mach_header, *Pmach_header;

struct mach_header {
    dword magic;
    dword cputype;
    dword cpusubtype;
    dword filetype;
    dword ncmds;
    dword sizeofcmds;
    dword flags;
    dword reserved;
};

typedef struct dysymtab_command dysymtab_command, *Pdysymtab_command;

struct dysymtab_command {
    dword cmd;
    dword cmdsize;
    dword ilocalsym;
    dword nlocalsym;
    dword iextdefsym;
    dword nextdefsym;
    dword iundefsym;
    dword nundefsym;
    dword tocoff;
    dword ntoc;
    dword modtaboff;
    dword nmodtab;
    dword extrefsymoff;
    dword nextrefsyms;
    dword indirectsymoff;
    dword nindirectsyms;
    dword extreloff;
    dword nextrel;
    dword locreloff;
    dword nlocrel;
};

typedef struct CS_SuperBlob CS_SuperBlob, *PCS_SuperBlob;

struct CS_SuperBlob {
    dword magic; // magic number
    dword length; // total length of SuperBlob
    dword count; // number of index entries following
    struct CS_BlobIndex index[3]; // (count) entries
};

typedef struct symtab_command symtab_command, *Psymtab_command;

struct symtab_command {
    dword cmd;
    dword cmdsize;
    dword symoff;
    dword nsyms;
    dword stroff;
    dword strsize;
};

typedef struct linkedit_data_command linkedit_data_command, *Plinkedit_data_command;

struct linkedit_data_command {
    dword cmd;
    dword cmdsize;
    dword dataoff;
    dword datasize;
};

typedef struct CS_GenericBlob CS_GenericBlob, *PCS_GenericBlob;

struct CS_GenericBlob {
    dword magic; // magic number
    dword length; // total length of blob
};



undefined8 __realmain;
string s_com.apple.AppleSW_00131668;
string s_22.0.5_001316a8;
undefined4 DAT_00131664;
undefined8 __antimain;
pointer ~MetaClass;
pointer gMetaClass;
pointer ~IGGCObject;
pointer IGGCObject_ktv;
pointer vtable;
pointer ~IGAccelCLContext;
pointer ~IGHashTable;
pointer kalloc_type_view_14;
undefined DAT_000011b8;
pointer IGAccelCLContext_ktv;
undefined8 gMetaClass;
undefined DAT_000010f8;
pointer methodDescs;
pointer _page_size;
pointer kalloc_type_view_19;
pointer s_cTokenProcessMethods;
pointer s_cTokenDiscardMethods;
pointer _kernel_task;
pointer metaClass;
undefined DAT_00001128;
undefined DAT_00001140;
undefined DAT_00001150;
undefined DAT_00001151;
undefined DAT_00001168;
undefined DAT_00001170;
undefined DAT_000011b0;
undefined DAT_00001148;
undefined1 kalloc_type_view_29;
undefined1 kalloc_type_view_24;
undefined8 fGlobalLockGroup;
undefined8 fGlobalLockGroupAttributes;
pointer fGlobalLockGroupName;
undefined operator.new;
undefined operator.delete;
pointer ~IGAccel2DContext;
undefined DAT_00001100;
pointer IGAccel2DContext_ktv;
pointer ~IGAccelTask;
pointer IGAccelTask_ktv;
undefined DAT_00001290;
pointer fTaskCounter;
undefined DAT_000011c1;
pointer kalloc_type_view_453;
pointer kalloc_type_view_464;
pointer kalloc_type_view_518;
undefined DAT_00001280;
pointer ___stack_chk_guard;
undefined1 ExtendedCtxParams;
pointer _kdebug_enable;
undefined4 _graphicsTracePointEnable;
pointer ~IGAccelTraceStream;
pointer IGAccelTraceStream_ktv;
pointer PTR_s_RCS_0011cae5;
undefined8 _g_onEvent;
undefined8 _g_startingKDEBUG;
undefined8 _g_nSecDeltaMax;
undefined8 _g_nSecDeltaMin;
undefined8 _g_nSecNow;
undefined DAT_000011c0;
undefined8 _g_timestampFreqPerDenominator;
undefined DAT_000011c3;
undefined4 gl_assert_wait_timeout_event;
pointer ___ktrace_enable_filter;
pointer ___ktrace_kernel_enabled;
undefined4 _g_graphicsTracePointEnable_prev;
undefined DAT_00001270;
pointer ~IGAccelDevice;
pointer IGAccelDevice_ktv;
undefined DAT_00001154;
undefined DAT_00001188;
undefined DAT_00001010;
undefined DAT_00001080;
pointer ~IGHwCsStatsTracker;
pointer IGHwCsStatsTracker_ktv;
undefined DAT_000011c2;
nlist nlist_00145948;
pointer ~IGPagePool;
pointer IGPagePool_ktv;
pointer fInstanceCounter;
pointer kalloc_type_view_488;
pointer _page_shift;
pointer kalloc_type_view_417;
pointer kalloc_type_view_432;
pointer kalloc_type_view_442;
undefined pruneEvent;
undefined pruneTimer;
pointer ~IGStolenMemoryPool;
pointer IGStolenMemoryPool_ktv;
pointer ~IGHardwarePerProcessPageTable64;
pointer IGHardwarePerProcessPageTable64_ktv;
pointer ~IGMemoryManager;
pointer IGMemoryManager_ktv;
undefined DAT_000012b4;
undefined1 kalloc_type_view_581;
undefined1 kalloc_type_view_595;
undefined *_real_ncpus;
undefined1 kalloc_type_view_616;
pointer ~IGStolenMemoryDescriptor;
pointer IGStolenMemoryDescriptor_ktv;
undefined4 g_cInitGfxL3ControlRegisters;
undefined4 g_cInitGfxMemoryInterfaceControlRegisters;
undefined1 gMetaClass;
pointer ~IGHardwareGlobalPageTable;
pointer IGHardwareGlobalPageTable_ktv;
pointer ~IGSharedMappedBuffer;
pointer IGSharedMappedBuffer_ktv;
pointer ~IGAccelMemoryMap;
pointer IGAccelMemoryMap_ktv;
pointer ~IGCanonicalRangeAllocator;
pointer IGCanonicalRangeAllocator_ktv;
pointer ~IGHardwarePerProcessPageTable32;
pointer IGHardwarePerProcessPageTable32_ktv;
pointer ~IGAccelSysMemory;
pointer IGAccelSysMemory_ktv;
pointer ~IGHardwarePerProcessPageTable;
pointer IGHardwarePerProcessPageTable_ktv;
pointer ~IGRangeAllocator;
pointer IGRangeAllocator_ktv;
pointer ~IGFence;
pointer IGFence_ktv;
pointer ~IGFenceAllocator;
pointer IGFenceAllocator_ktv;
pointer ~IGMappedBuffer;
pointer IGMappedBuffer_ktv;
pointer ~IGHardwarePageTable;
pointer IGHardwarePageTable_ktv;
pointer ~IGAccelEventMachine;
pointer IGAccelEventMachine_ktv;
undefined handleSchedulerStampInterrupt;
undefined DAT_000011d0;
undefined DAT_000011d4;
undefined1 IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
pointer IG_STAMP_INDEX_TO_HWCS_LUT;
undefined DAT_00001278;
pointer ~IGAccelStatistics;
pointer IGAccelStatistics_ktv;
pointer ~IGGarbageCollector;
pointer IGGarbageCollector_ktv;
undefined handleTimerInterrupt;
undefined handleSecondaryInterrupt;
pointer ~IGAccelShared;
pointer IGAccelShared_ktv;
undefined DAT_00001108;
undefined DAT_00001110;
undefined DAT_00001118;
undefined DAT_00001120;
undefined DAT_00001130;
undefined DAT_00001138;
undefined DAT_000010c0;
undefined DAT_000010c8;
undefined DAT_000010d0;
undefined DAT_000010d8;
undefined DAT_000010e0;
undefined DAT_000010e8;
undefined DAT_000010f0;
pointer ~IGWorkQueueAk;
pointer IGWorkQueueAk_ktv;
undefined DAT_00001288;
pointer ~IGFlushNotifyInterruptEventSource;
pointer IGFlushNotifyInterruptEventSource_ktv;
pointer ~IGGuC;
pointer IGGuC_ktv;
undefined DAT_00001340;
undefined handleRetireWorkItemsInterruptSecondary;
undefined handleGucToHostInterruptSecondary;
undefined handleFlushNotifyInterruptSecondary;
undefined registerForInterrupts;
undefined1 fCanUseSpringboard;
undefined4 kSpringboardHash;
undefined DAT_00137201;
undefined DAT_00121bc9;
undefined DAT_00121bd1;
undefined1 kIGHwCsDesc;
undefined handleGucToHostInterrupt;
undefined DAT_00121bd9;
undefined DAT_00121bdd;
undefined handleHardwareFlushNotifyInterrupt;
undefined handleHardwareErrorInterrupt;
undefined ~IGHashTable;
undefined DAT_0009aab0;
undefined4 DAT_000aabf0;
undefined _guc_public_key_bin;
undefined DAT_0013816c;
undefined4 _guc_public_key_bin_len;
undefined1 __KmGuCBinary;
undefined1 __KmGen11SBBinary;
undefined1 __KmGuCSBBinarySig;
undefined4 __KmGuCHltInstructionLocations;
undefined DAT_000011c5;
undefined DAT_000011c4;
undefined DAT_000011c8;
undefined DAT_000011ca;
undefined1 fCSSHeaderPollReg;
undefined DAT_0013805c;
undefined8 DAT_000aadf0;
undefined8 DAT_000aae10;
undefined4 DAT_000aae80;
undefined *PTR_s_High_00121dd0;
undefined DAT_000aae90;
undefined DAT_000aaea0;
undefined DAT_00121bcd;
undefined DAT_00121bb1;
undefined DAT_00121bb5;
undefined ___block_descriptor_tmp;
undefined ____ZN5IGGuC15setPmAttributesEPKv_block_invoke;
pointer __NSConcreteStackBlock;
undefined DAT_00121b71;
pointer PTR_s_RCS_00121b75;
pointer ~IGScheduler4;
pointer IGScheduler4_ktv;
pointer ~IGHardwareGuCWorkQueue;
pointer IGHardwareGuCWorkQueue_ktv;
pointer ~IGHardwareCommandStreamer4;
pointer IGHardwareCommandStreamer4_ktv;
undefined handleHardwareUserInterrupt;
pointer ~IGHardwareGuCCTBuffer;
pointer IGHardwareGuCCTBuffer_ktv;
pointer ~IGHardwareGuC;
pointer IGHardwareGuC_ktv;
undefined DAT_0010be00;
undefined handleSoftwareGuCToHostInterrupt;
undefined4 DAT_0010b300;
undefined1 __KmGen11ICLGuCBinary;
undefined8 gl_assert_wait_timeout_event;
undefined DAT_00001002;
undefined4 DAT_0010be10;
pointer rcsRegisters;
undefined DAT_0010bdc0;
undefined DAT_0010bde0;
undefined DAT_0010be20;
undefined DAT_0010be30;
undefined DAT_00001004;
undefined DAT_0010be40;
undefined handleHardwareGuCToHostInterrupt;
pointer g_kdctl;
ulong DAT_00132f30;
undefined DAT_00132fa0;
undefined DAT_00132fb0;
undefined DAT_00132fa8;
undefined DAT_001330f8;
undefined DAT_00133100;
undefined DAT_00133138;
undefined DAT_00133110;
undefined DAT_00133118;
undefined DAT_00133108;
undefined DAT_00133120;
undefined DAT_00133128;
undefined DAT_00133130;
undefined DAT_00132f78;
undefined8 DAT_00132fb8;
undefined8 DAT_00132fd8;
nlist nlist_00145ee8;
undefined8 l_accelerators;
undefined DAT_00132f88;
undefined DAT_00132f90;
ulong DAT_00133020;
pointer ~IntelAccelerator;
pointer IntelAccelerator_ktv;
undefined8 _fSymFBCLASSUnregisterAccelerator;
undefined DAT_00132f28;
undefined DAT_00133050;
undefined DAT_00133048;
undefined DAT_00133040;
undefined DAT_00133038;
undefined DAT_00133000;
undefined DAT_00133008;
undefined DAT_00133010;
undefined DAT_00133018;
undefined dpsmIdleTimer;
undefined DAT_00001258;
undefined transcodeActiveTimerFired;
undefined8 _fSymFBCLASSRegisterAccelerator;
undefined _FlipCounterCallback;
undefined _PMSetParamsCallback;
undefined _PMGetUtilizationSnapshotCallback;
undefined _ProcessNonDisplayInterruptsCallback;
undefined8 _fSymFBCLASSGetRC6HandlingFunc;
undefined _PAVPCommandCallback;
undefined _PAVPCommandCallbackRecovery;
undefined _DisplaySleepCallback;
pointer ~IGTelemetryManager;
undefined grow;
undefined DAT_000011d8;
undefined DAT_00001218;
undefined1 g_cInitGfxHwCtxParamsForGraphics;
undefined free;
undefined turnOn;
undefined MetaClass;
undefined ~MetaClass;
undefined disableCollection;
pointer ~IGBlockFenceManager;
long DAT_00132f70;
undefined DAT_001330c0;
pointer _sysctl__debug_intel;
pointer _sysctl__debug_intel_GlobalUsageTotal_Busy_nSec;
pointer _sysctl__debug_intel_GlobalUsageTotal_nSec;
pointer _sysctl__debug_intel_IGInterruptControl;
pointer _sysctl__debug_intel_dtraceEnable;
pointer _sysctl__debug_intel_flipCount;
pointer _sysctl__debug_intel_gpuUsageEnables;
pointer _sysctl__debug_intel_gpuUsageEnablesCheck;
pointer _sysctl__debug_intel_graphicsFirmwareTracePointEnable;
pointer _sysctl__debug_intel_graphicsTracePointEnable;
pointer _sysctl__debug_intel_kdctlVersion;
pointer _sysctl__debug_intel_mSecCalcGPUBusy;
pointer _sysctl__debug_intel_oaEnable;
pointer _sysctl__debug_intel_perfEventEnable;
pointer _sysctl__debug_intel_ringBlitUsage;
pointer _sysctl__debug_intel_ringBlit_nSec;
pointer _sysctl__debug_intel_ringMainUsage;
pointer _sysctl__debug_intel_ringMain_nSec;
pointer _sysctl__debug_intel_ringMediaUsage;
pointer _sysctl__debug_intel_ringMedia_nSec;
pointer _sysctl__debug_intel_ringOnSample;
pointer _sysctl__debug_intel_ringTakeSample;
pointer _sysctl__debug_intel_ringVEBoxUsage;
pointer _sysctl__debug_intel_ringVEBox_nSec;
pointer _sysctl__debug_intel_schedEnableThrottleOverride;
pointer _sysctl__debug_intel_schedPriCreditsHigh;
pointer _sysctl__debug_intel_schedPriCreditsLow;
pointer _sysctl__debug_intel_schedPriCreditsNormal;
pointer _sysctl__debug_intel_schedPriCreditsNormalHigh;
pointer _sysctl__debug_intel_schedPriElevatePID;
pointer _sysctl__debug_intel_schedPriPreemption;
pointer _sysctl__debug_intel_schedThermalStallFeatureEnable;
pointer _sysctl__debug_intel_schedThermalStallIntEnableCount;
pointer _sysctl__debug_intel_schedThermalStallInterruptWatermarkHigh;
pointer _sysctl__debug_intel_schedThermalStallInterruptWatermarkLow;
pointer _sysctl__debug_intel_schedThermalStallInvalidTransitionCount;
pointer _sysctl__debug_intel_schedThermalStallOnSample;
pointer _sysctl__debug_intel_schedThermalStallQoSActiveTime_uSec;
pointer _sysctl__debug_intel_schedThermalStallQoSCreditsMax;
pointer _sysctl__debug_intel_schedThermalStallQoSTimeoutUSMax;
pointer _sysctl__debug_intel_schedThermalStallQoSTimeoutUSMin;
pointer _sysctl__debug_intel_schedThermalStallQoSTimerCount;
undefined8 l_nAccelerators;
pointer _sysctl__debug_intel_schedThermalStallRC6Time_uSec;
pointer _sysctl__debug_intel_schedThermalStallRPeFreq;
pointer _sysctl__debug_intel_schedThermalStallTakeSample;
pointer _sysctl__debug_intel_schedThermalStallTotalThermalStallTime_uSec;
pointer _sysctl__debug_intel_schedThermalStallTotal_nSec;
pointer _sysctl__debug_intel_schedThrottleHighPriByVal;
pointer _sysctl__debug_intel_schedThrottleLowPriByVal;
pointer _sysctl__debug_intel_schedThrottleNormalHighPriByVal;
pointer _sysctl__debug_intel_schedThrottleNormalPriByVal;
pointer _sysctl__debug_intel_swapCount;
pointer _sysctl__debug_intel_telemetryAltConfig;
pointer _sysctl__debug_intel_telemetryConfig;
pointer _sysctl__debug_intel_telemetryMode;
pointer _sysctl__debug_intel_telemetryNumFrame;
pointer _sysctl__debug_intel_telemetrySampleLocations;
pointer _sysctl__debug_intel_telemetrySpot1;
pointer _sysctl__debug_intel_telemetryStartFrame;
pointer _sysctl__debug_intel_telemetryStatPasses;
pointer _sysctl__debug_intel_telemetryStopFrame;
pointer _sysctl__debug_intel_telemetryTestCase;
pointer _sysctl__debug_intel_telemetryUsageReportmSec;
pointer _sysctl__debug_intel_telemetryVersion;
pointer _sysctl__debug_intel_temp0;
pointer _sysctl__debug_intel_temp1;
pointer _sysctl__debug_intel_temp2;
pointer _sysctl__debug_intel_temp3;
pointer _sysctl__debug_intel_temp4;
pointer sysctl__debug_kDisplayVar;
pointer sysctl__debug_KernelPrintf;
pointer kalloc_type_view_8687;
int DAT_00131950;
int DAT_001319a0;
int DAT_001319f0;
int DAT_00131a40;
int DAT_00131a90;
int DAT_00131ae0;
int DAT_00131b30;
int DAT_00131b80;
int DAT_00131bd0;
int DAT_00131c20;
int DAT_00131c70;
int DAT_00131cc0;
int DAT_00131d10;
int DAT_00131d60;
int DAT_00131db0;
int DAT_00131e00;
int DAT_00131e50;
int DAT_00131ea0;
int DAT_00131ef0;
int DAT_00131f40;
int DAT_00131f90;
int DAT_00131fe0;
int DAT_00132030;
int DAT_00132080;
int DAT_001320d0;
int DAT_00132120;
int DAT_00132170;
int DAT_001321c0;
int DAT_00132210;
int DAT_00132260;
int DAT_001322b0;
int DAT_00132300;
int DAT_00132350;
int DAT_001323a0;
int DAT_001323f0;
int DAT_00132440;
int DAT_00132490;
int DAT_001324e0;
int DAT_00132530;
int DAT_00132580;
int DAT_001325d0;
int DAT_00132620;
int DAT_00132670;
int DAT_001326c0;
int DAT_00132710;
int DAT_00132760;
int DAT_001327b0;
int DAT_00132800;
int DAT_00132850;
int DAT_001328a0;
int DAT_001328f0;
int DAT_00132940;
int DAT_00132990;
int DAT_001329e0;
int DAT_00132a30;
int DAT_00132a80;
int DAT_00132ad0;
int DAT_00132b20;
int DAT_00132b70;
int DAT_00132bc0;
int DAT_00132c10;
int DAT_00132c60;
int DAT_00132cb0;
int DAT_00132d00;
int DAT_00132d50;
int DAT_00132da0;
int DAT_00132df0;
int DAT_00132e40;
int DAT_00131900;
int DAT_00132ee0;
int DAT_00132e90;
undefined DAT_0010bf90;
undefined DAT_0010bfc0;
undefined DAT_00123931;
nlist nlist_00145998;
pointer init;
undefined1 g_cInitGfxHwCtxParamsForCompute;
pointer _RESERVEDOSMetaClass1;
undefined DAT_00123915;
undefined telemetryMapOABufferMemory;
undefined DAT_001082c0;
undefined1 fPavpEnabled;
pointer PTR_s_RCS_001238e5;
undefined _SafeForceWake;
undefined _PAVPSessionControl;
undefined _mediaKernelLoad;
undefined _mediaPrepareEncode;
undefined _clientNotify;
undefined _dpsmNotify;
undefined _pmNotify;
undefined _accelWillLoadGuC;
undefined _accelFailedToLoadGuC;
undefined _accelDidLoadGuC;
pointer kalloc_type_view_8656;
undefined _enableCoarsePowerGating;
undefined8 _fSymFBCLASSTranscodeActive;
undefined8 IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
mach_header MACH_HEADER;
pointer ___globalObjectIDCounter;
undefined8 _fSymFBCLASSExitPsr;
section section_000001f0;
section section_00000468;
undefined UNK_000006ff;
undefined UNK_000008ff;
undefined DAT_000012b8;
undefined DAT_00123951;
pointer _RESERVEDIORegistryEntry12;
undefined DAT_00123955;
undefined DAT_0002ced4;
undefined _fSymFBCLASSPrepareForTransaction;
undefined8 _fSymFBCLASSReadRegister32;
undefined _fSymFBCLASSRegisterVBLHandler;
undefined8 _fSymFBCLASSSetTransactionDisplayPipe;
undefined8 _fSymFBCLASSValidateTransaction;
undefined8 _fSymFBCLASSWriteRegister32;
undefined8 _fSymFBCLASSGetDisplayWaterMarkValues;
undefined8 _fSymFBCLASSGetScanRegionInfo;
undefined8 _fSymFBCLASSIsTransactionComplete;
undefined8 _fSymFBCLASSLogTransactionTimeout;
undefined8 _fSymFBCLASSPerformCscTransaction;
undefined8 _fSymFBCLASSPerformFlipTransaction;
undefined8 _fSymFBCLASSPerformGammaTransaction;
undefined8 _fSymFBCLASSPerformPQTransaction;
undefined8 _fSymFBCLASSPerformPlaneGammaTransaction;
pointer ~IGAccelCommandQueue;
pointer IGAccelCommandQueue_ktv;
pointer __os_log_default;
undefined1 IGBlit3DKernel_clamp_simd32;
undefined1 IGBlit3DKernel_default_simd16;
undefined1 IGBlit3DKernel_set_alpha_clamp_simd32;
undefined1 IGBlit3DKernel_set_alpha_simd32;
undefined1 IGBlit3DKernel_set_alpha_integer_simd32;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx1_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx4_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx8_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx2_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx8_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx16_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx2_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx8_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx16_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx16_stencil_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx16_stencil_max_simd16;
undefined1 IGBlit3DKernel_clamp_simd16;
undefined1 IGBlit3DKernel_RGB_to_YUV_simd16;
undefined1 IGBlit3DKernel_YUV_to_RGB_simd16;
undefined1 IGBlit3DKernel_default_simd32;
undefined1 IGBlit3DKernel_set_alpha_clamp_simd16;
undefined1 IGBlit3DKernel_set_alpha_simd16;
undefined1 IGBlit3DKernel_set_alpha_integer_simd16;
undefined1 IGBlit3DKernel_D32fS8_to_D24S8_simd16;
undefined1 IGBlit3DKernel_MSAA_to_MSAA_simd8;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx2_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx16_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx4_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx4_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx2_stencil_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx4_stencil_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx8_stencil_min_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx2_stencil_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx4_stencil_max_simd16;
undefined1 IGBlit3DKernel_MSAA_to_NonMSAAx8_stencil_max_simd16;
undefined1 DefaultBlendState;
undefined1 DepthD32FS8BlendState;
undefined1 DepthD24S8BlendState;
undefined1 StencilD32FS8BlendState;
undefined1 StencilD24S8BlendState;
undefined DAT_000f000e;
undefined1 g_cInitGfx3dStatePolyStipplePattern;
undefined8 DAT_00112ae0;
undefined1 g_cInitGfx3dStateVertexBuffers;
undefined1 g_cInitGfx3dStateVertexElements;
undefined1 g_cInitGfx3dStateVfInstancings;
undefined1 kalloc_type_view_4338;
undefined1 kalloc_type_view_4468;
undefined1 kalloc_type_view_4498;
undefined1 kalloc_type_view_4627;
pointer _page_mask;
undefined __start;
undefined DAT_0010bff0;
undefined1 g_cInitGfxMemoryInterfaceControlRegisters;
undefined DAT_000012c0;
undefined DAT_000012c8;
undefined DAT_00112d18;
undefined DAT_00112d38;
undefined DAT_00112d50;
undefined DAT_00112d90;
undefined DAT_00112dd0;
undefined DAT_00112e64;
pointer ~IGAccelVideoContextMain;
pointer IGAccelVideoContextMain_ktv;
pointer token_process_methods;
pointer token_discard_methods;
undefined1 g_cInitGfxHwCtxParamsForVideoMain;
undefined1 g_cInitGfxHwCtxParamsForVideoMainVME;
pointer ~IGScheduler5;
pointer IGScheduler5_ktv;
undefined handleKickDPSMInterrupt;
undefined DAT_00125919;
undefined DAT_0012591d;
undefined8 DAT_00112f10;
undefined8 DAT_00112f30;
undefined *PTR_s_High_00125b20;
undefined DAT_00125921;
undefined DAT_000f423f;
undefined handleHighPriThrottleTimerInterrupt;
undefined handleNormalHighPriThrottleTimerInterrupt;
undefined handleNormalPriThrottleTimerInterrupt;
undefined handleLowPriThrottleTimerInterrupt;
pointer ~IGHardwareCommandStreamer5;
pointer IGHardwareCommandStreamer5_ktv;
undefined handlePreemptionTimerInterrupt;
undefined handleChangeFrequencyInterrupt;
undefined handleSoftwareContextSwitchInterrupt;
undefined handleFinishContextInterrupt;
undefined handleHardwareContextSwitchInterrupt;
undefined DAT_00126028;
pointer pfnCsbProcessContextSwitchType;
undefined8 kStampIndexPriorityMappingTableRCS;
undefined __stop;
pointer ~IGHardwareRenderCommandStreamer5;
pointer IGHardwareRenderCommandStreamer5_ktv;
undefined8 kStampIndexPriorityMinTable;
undefined4 _reltable._ZL33DebugDumpContextStatusBufferEntryPK28SGfxContextStatusBufferEntry;
pointer ~IGAccelVideoContextMedia;
pointer IGAccelVideoContextMedia_ktv;
undefined1 g_cInitGfxHwCtxParamsForVideoMedia;
undefined DAT_00001370;
undefined _OSKextGetCurrentIdentifier;
undefined1 g_cInitGfxHwCtxParamsForVideoMedia2;
pointer ~IGHardwareRingBuffer;
pointer IGHardwareRingBuffer_ktv;
undefined *metaClass;
undefined ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_3;
undefined ___block_descriptor_tmp.4;
undefined DAT_00001380;
undefined ___block_descriptor_tmp.5;
undefined ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke;
undefined ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_2;
undefined DAT_00127469;
undefined DAT_00001190;
pointer PTR_s_RCS_00127425;
undefined4 fullWarning;
uint switchdataD_00044004;
undefined DAT_00113088;
undefined DAT_00113090;
pointer PTR_s_NOT_VALID_001276c0;
pointer PTR_s_FALSE_001276d0;
undefined *PTR_s_FAULT_AND_HANG_001276e0;
undefined *PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700;
pointer csbReason;
undefined DAT_00113078;
undefined *PTR_s_Main_(RCS)_00127680;
undefined isOpportunisticWorkload;
undefined initSubRange;
undefined withOptions;
undefined telemetryReadOABuffer;
undefined IGMappedBuffer;
undefined DAT_00100100;
undefined DAT_00100104;
undefined DAT_00101000;
undefined DAT_00101004;
undefined DAT_00101008;
undefined DAT_00108000;
undefined DAT_00108040;
undefined DAT_00108080;
undefined DAT_001080c0;
undefined DAT_00108100;
undefined DAT_00110000;
undefined DAT_00110040;
undefined DAT_00110080;
undefined DAT_001100c0;
undefined DAT_00110100;
undefined DAT_00110140;
undefined DAT_00110180;
undefined DAT_001101c0;
undefined DAT_00110200;
undefined DAT_00110240;
undefined DAT_00110280;
undefined DAT_001102c0;
undefined DAT_00110300;
undefined DAT_00110340;
undefined DAT_001103c0;
pointer ~IGInterruptBridge;
pointer IGInterruptBridge_ktv;
undefined8 DAT_00113110;
undefined4 DAT_00113118;
undefined8 g_pInterruptBridge;
undefined registerForInterruptTypeCallback;
undefined setInterruptStateCallback;
pointer kalloc_type_view_148;
undefined unregisterInterruptCallback;
undefined interruptHandler;
undefined interruptFilterHandler;
pointer kalloc_type_view_187;
pointer kalloc_type_view_553;
pointer kalloc_type_view_431;
undefined4 DAT_00113300;
undefined4 DAT_00113308;
undefined4 DAT_00113310;
undefined _fSymFBCLASSGetInterruptCallbacks;
pointer ~IGHardwareRingBufferVEBox;
pointer IGHardwareRingBufferVEBox_ktv;
undefined8 _vecsResetRegisters;
ulong DAT_001364e8;
long DAT_001364f0;
undefined8 vecsRegisters;
undefined DAT_00113328;
undefined4 DAT_00113340;
pointer ~IntelICLMemoryManager;
pointer IntelICLMemoryManager_ktv;
undefined DAT_00138124;
undefined DAT_00138128;
nlist nlist_00145908;
pointer _RESERVEDOSMetaClassBase7;
undefined4 g_cPageAttributeTableEntry;
pointer ~IGAccelFIFOChannel;
pointer IGAccelFIFOChannel_ktv;
pointer PTR_s_RCS_001281d5;
pointer PTR_s_Render_001281dd;
undefined DAT_00001268;
pointer ~IGTelemetryUsage;
pointer IGTelemetryUsage_ktv;
undefined8 g_telemetryUsageInvocationCount;
undefined1 kalloc_type_view_160;
undefined4 lusage_entries;
undefined1 kalloc_type_view_199;
pointer ~IGAccelBlockFence;
pointer IGAccelBlockFence_ktv;
pointer ~IGHardwareRingBufferBlit;
pointer IGHardwareRingBufferBlit_ktv;
undefined8 _bcsResetRegisters;
ulong DAT_001365c8;
long DAT_001365d0;
undefined DAT_00113468;
undefined8 bcsRegisters;
undefined8 DAT_00113478;
undefined4 DAT_00113480;
undefined1 g_cInitGfxL3ControlRegisters;
pointer ~IGScheduler;
pointer IGScheduler_ktv;
undefined DAT_001136d0;
undefined handlePeriodicTimerInterrupt;
undefined DAT_00128ecd;
undefined DAT_00138108;
nlist nlist_00145958;
section section_000002e0;
undefined DAT_000011a0;
pointer kalloc_type_view_1901;
pointer kalloc_type_view_1912;
pointer kalloc_type_view_1932;
nlist nlist_00144ff8;
pointer kalloc_type_view_1939;
nlist nlist_00145008;
pointer kalloc_type_view_1944;
pointer kalloc_type_view_1957;
pointer kalloc_type_view_1964;
pointer kalloc_type_view_1971;
pointer kalloc_type_view_1993;
uint switchdataD_00055cbc;
undefined DAT_00001298;
undefined4 _g_defaultFlexEU;
undefined1 found;
undefined DAT_00117250;
undefined DAT_00117254;
undefined DAT_00117260;
undefined DAT_00117264;
pointer kalloc_type_view_2830;
pointer kalloc_type_view_2913;
undefined4 internalContextId;
pointer ~IGTelemetryKMD;
pointer ~IGTelemetry;
pointer ~IGAccelGLContext;
undefined DAT_00001360;
pointer IGAccelGLContext_ktv;
undefined DAT_00001248;
pointer s_cTokenInfo;
undefined DAT_000012f8;
undefined DAT_000011ba;
undefined DAT_000011bc;
undefined DAT_000011be;
undefined DAT_000011b2;
undefined DAT_00113898;
undefined DAT_001138b4;
undefined DAT_001138e8;
undefined DAT_001138f6;
undefined1 g_cInitGfxHwCtxParamsForGraphicsGL;
undefined mapTransferToGARTIfNeeded;
undefined *UNK_1000007feedfc37;
undefined4 gSSHResourceID;
pointer ~IGHardwareRingBufferMedia;
pointer IGHardwareRingBufferMedia_ktv;
undefined _vcs2ResetRegisters;
undefined _vcsResetRegisters;
pointer ~IGAccelSegmentResourceList;
pointer IGAccelSegmentResourceList_ktv;
undefined *UNK_1000007feedfc5f;
undefined1 kalloc_type_view_263;
pointer ~IGAccelResource;
pointer IGAccelResource_ktv;
undefined1 kalloc_type_view_178;
undefined1 kalloc_type_view_207;
undefined1 kalloc_type_view_569;
undefined1 kalloc_type_view_574;
undefined1 kalloc_type_view_614;
undefined1 kalloc_type_view_619;
undefined1 kalloc_type_view_634;
undefined1 kalloc_type_view_666;
uint switchdataD_000719bc;
undefined1 kalloc_type_view_1852;
pointer _kIOSurfaceCreationProperties;
pointer _kIOSurfaceIsDisplayable;
undefined DAT_00113bf0;
undefined DAT_00113c84;
undefined DAT_00113d18;
undefined DAT_00113dac;
undefined1 alignment;
pointer ~IGAccelVideoContextVEBox;
pointer IGAccelVideoContextVEBox_ktv;
undefined1 g_cInitGfxHwCtxParamsForVideoEnhancement;
undefined DAT_00113e50;
nlist nlist_00145df8;
undefined DAT_00113e60;
undefined DAT_00113e98;
undefined DAT_00113e7c;
pointer ~IGAccelVideoContext;
undefined DAT_000013b0;
pointer IGAccelVideoContext_ktv;
undefined DAT_00001398;
pointer method_descs;
undefined DAT_00001348;
undefined DAT_00001364;
undefined DAT_000010ec;
undefined DAT_000012f0;
undefined DAT_00001300;
undefined DAT_00001304;
undefined DAT_00001308;
undefined DAT_00001368;
undefined DAT_00001390;
pointer kalloc_type_view_1058;
pointer kalloc_type_view_774;
pointer ~IGAccelSharedUserClient;
pointer IGAccelSharedUserClient_ktv;
undefined DAT_00117268;
pointer ~IGSemaphoreWaitBufferQueue;
pointer IGSemaphoreWaitBufferQueue_ktv;
undefined8 fQueueIdCounter;
pointer kalloc_type_view_409;
undefined DAT_0012d7c9;
undefined DAT_0012d7cd;
undefined1 g_cInitMiLoadGPR;
pointer kalloc_type_view_288;
pointer kalloc_type_view_708;
pointer kalloc_type_view_466;
pointer kalloc_type_view_482;
pointer ~IGHardwareContext;
pointer IGHardwareContext_ktv;
undefined DAT_0000100c;
undefined DAT_00001064;
undefined1 g_cInitGfxRingContextRCS;
undefined DAT_0000106c;
undefined1 g_cInitGfxRingContextBCS;
undefined DAT_00001074;
undefined1 g_cInitGfxRingContextVCS;
undefined DAT_0000109c;
undefined1 g_cInitGfxRingContextVECS;
undefined DAT_000010a4;
undefined1 g_cInitGfxRingContextVCS2;
undefined DAT_0000110c;
undefined _OSKextGetCurrentLoadTag;
undefined DAT_00001260;
undefined8 smNextContextId;
undefined DAT_0012dc75;
undefined DAT_00001014;
undefined DAT_0000101c;
undefined DAT_00001024;
undefined DAT_0000102c;
undefined DAT_000011cc;
undefined1 gl_assert_wait_timeout_event;
pointer ~IGHardwareExtendedContext;
pointer IGHardwareExtendedContext_ktv;
pointer ~IGHardwareResolveContext;
pointer IGHardwareResolveContext_ktv;
pointer ~IGHardwareBlit3DContext;
pointer IGHardwareBlit3DContext_ktv;
pointer ~IGHardwareBlit2DContext;
pointer IGHardwareBlit2DContext_ktv;
pointer ~IGHardwareDisplayContext;
pointer IGHardwareDisplayContext_ktv;
undefined DAT_00136898;
undefined1 DAT_0013689c;
undefined DAT_001368a0;
undefined DAT_001368a8;
undefined DAT_001368b0;
undefined DAT_001368b8;
undefined DAT_001368c0;
undefined DAT_001368d0;
undefined1 DAT_001368d4;
undefined DAT_001368d8;
undefined DAT_001368e0;
undefined DAT_001368e8;
undefined DAT_001368f0;
undefined DAT_001368f8;
pointer ~IGAccelDisplayMachine;
pointer IGAccelDisplayMachine_ktv;
pointer ~IGAccelDisplayPipe;
pointer IGAccelDisplayPipe_ktv;
undefined getScratchGPUVirtualAddress;
undefined DAT_001146b0;
undefined DAT_001146bc;
undefined1 val;
uint switchdataD_0007f37c;
pointer ~IGAccelSurface;
undefined DAT_00001338;
pointer IGAccelSurface_ktv;
undefined DAT_001146c8;
undefined DAT_00114704;
undefined DAT_001146f4;
undefined DAT_00114710;
undefined DAT_00114744;
undefined DAT_001147d8;
undefined DAT_0011486c;
undefined DAT_00114900;
pointer ~IGHardwareRingBufferMain;
pointer IGHardwareRingBufferMain_ktv;
undefined8 _rcsResetRegisters;
ulong DAT_00136980;
long DAT_00136988;
undefined8 DAT_001149d8;
undefined8 DAT_001149e0;
undefined8 DAT_001149e8;
undefined4 DAT_001149f0;
undefined8 rcsRegisters;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_MSAA;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx8;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx8;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx16;
undefined1 IGResolve3DKernel_Combined_to_SS_MSAA;
undefined1 IGResolve3DKernel_Combined_to_SS_MSAAx8;
undefined1 IGResolve3DKernel_Combined_to_SS_MSAAx16;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_MSAA;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_MSAAx8;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_NonMSAA;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx2;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx4;
undefined1 IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx16;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_NonMSAA;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_MSAA;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx2;
undefined1 IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx4;
undefined1 IGResolve3DKernel_Combined_to_SS_NonMSAA;
undefined1 IGResolve3DKernel_Combined_to_SS_MSAAx2;
undefined1 IGResolve3DKernel_Combined_to_SS_MSAAx4;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_NonMSAA;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_MSAAx2;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_MSAAx4;
undefined1 IGResolve3DKernel_SS_to_StencilOnly_MSAAx16;
undefined1 g_cInitGfxStateBaseAddress;
pointer g_cConvertNumMulitsampleHwState;
undefined4 g_validRegisters;
undefined _FormatAbsoluteValueOpenCL;
undefined *PTR_s_IAVertices_00133418;
undefined4 _FormatDynamicRegStats;
undefined *PTR_s_GTRequestQueueFull_00133628;
undefined _FormatGPUAbsolute;
undefined *PTR_s_RPPREVUP_GPU_ABS_00133d08;
undefined _FormatGPURelative;
undefined *PTR_s_TIMESTAMP_LO.tics_00133e98;
undefined _FormatPipeStats;
undefined *PTR_s_CPU_relativeTime_nSec_00134898;
undefined _FormatRelativeValue;
undefined *PTR_s_CPU_sampleTime_nSec_00134978;
undefined _FormatReportPerfCount;
undefined *PTR_s_CLKernelName_00134e98;
undefined _FormatReportPerfCount_Default;
undefined *PTR_s_GPU_beginSampleTime_nSec_00135258;
undefined _FormatAbsoluteValue;
undefined _FormatAbsoluteValueMDLIB;
undefined DAT_00135cb0;
undefined4 DAT_00133eb4;
pointer PTR_s_TIMESTAMP_LO.tics_00133e98;
pointer PTR_s_timeLo:tics:_low_32_bits_of_GPU_t_00133ea0;
undefined4 DAT_00133eb0;
undefined *_telemetryGroupNames;
undefined DAT_001369c8;
undefined DAT_001369d0;
undefined _telemetryItemsPerGroup;
undefined4 DAT_0013526c;
undefined DAT_000010aa;
undefined DAT_00001199;

undefined8 __start(void)

{
  undefined8 uVar1;
  
  if (__realmain != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x000013d4. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*__realmain)();
    return uVar1;
  }
  return 0;
}



char * _OSKextGetCurrentIdentifier(void)

{
  return s_com_apple_AppleSW_00131668;
}



char * _OSKextGetCurrentVersionString(void)

{
  return s_22_0_5_001316a8;
}



undefined4 _OSKextGetCurrentLoadTag(void)

{
  return DAT_00131664;
}



undefined8 __stop(void)

{
  undefined8 uVar1;
  
  if (__antimain != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x00001420. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*__antimain)();
    return uVar1;
  }
  return 0;
}



ulong ___chkstk_darwin_probe(void)

{
  ulong in_RAX;
  ulong uVar1;
  
  uVar1 = in_RAX;
  if (0xfff < in_RAX) {
    do {
      uVar1 = uVar1 - 0x1000;
    } while (0x1000 < uVar1);
  }
  return in_RAX;
}



ulong ____chkstk_darwin(void)

{
  ulong uVar1;
  ulong in_RAX;
  
  uVar1 = in_RAX;
  if (0xfff < in_RAX) {
    do {
      uVar1 = uVar1 - 0x1000;
    } while (0x1000 < uVar1);
  }
  return in_RAX;
}



// IGGCObject::MetaClass::MetaClass()

void __thiscall IGGCObject::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGGCObject",(OSMetaClass *)__got::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGCObject::MetaClass::~MetaClass()

void __thiscall IGGCObject::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGGCObject::IGGCObject(OSMetaClass const*)

void __thiscall IGGCObject::IGGCObject(IGGCObject *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGGCObject;
  return;
}



// IGGCObject::IGGCObject(OSMetaClass const*)

void __thiscall IGGCObject::IGGCObject(IGGCObject *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGGCObject;
  return;
}



// IGGCObject::~IGGCObject()

void __thiscall IGGCObject::~IGGCObject(IGGCObject *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGGCObject::~IGGCObject()

void __thiscall IGGCObject::~IGGCObject(IGGCObject *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGGCObject::~IGGCObject()

void __thiscall IGGCObject::~IGGCObject(IGGCObject *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGGCObject_ktv,this,0x38);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGCObject::operator delete(void*, unsigned long)

void __cdecl IGGCObject::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGGCObject_ktv,param_1,param_2);
  return;
}



// IGGCObject::getMetaClass() const

undefined ** IGGCObject::getMetaClass(void)

{
  return &gMetaClass;
}



// IGGCObject::MetaClass::MetaClass()

void __thiscall IGGCObject::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGGCObject",(OSMetaClass *)__got::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGCObject::MetaClass::alloc() const

OSObject * IGGCObject::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGGCObject_ktv,0x38);
  OSObject::OSObject(this,(OSMetaClass *)&IGGCObject::gMetaClass);
  *(undefined ***)this = &__const::~IGGCObject;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGGCObject::operator new(unsigned long)

void * __thiscall IGGCObject::operator_new(IGGCObject *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGGCObject_ktv,this);
  return pvVar1;
}



// IGGCObject::IGGCObject()

void __thiscall IGGCObject::IGGCObject(IGGCObject *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGGCObject;
  OSMetaClass::instanceConstructed();
  return;
}



// IGGCObject::IGGCObject()

void __thiscall IGGCObject::IGGCObject(IGGCObject *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGGCObject;
  OSMetaClass::instanceConstructed();
  return;
}



// IGGCObject::init(IGGarbageCollector*)

undefined4 __thiscall IGGCObject::init(IGGCObject *this,long *param_1)

{
  undefined4 uVar1;
  
  uVar1 = (**(code **)(__got::vtable + 0x98))();
  if ((char)uVar1 != '\0') {
    *(long **)(this + 0x10) = param_1;
    (**(code **)(*param_1 + 0x20))(param_1);
    *(IGGCObject **)(this + 0x18) = this;
  }
  return uVar1;
}



// IGGCObject::free()

void __thiscall IGGCObject::free(IGGCObject *this,void *param_1)

{
  IGGarbageCollector::remove(*(IGGarbageCollector **)(this + 0x10),(char *)(this + 0x18));
  (**(code **)(**(long **)(this + 0x10) + 0x28))();
                    // WARNING: Could not recover jumptable at 0x000016a6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGGCObject::retain() const

void IGGCObject::retain(void)

{
                    // WARNING: Could not recover jumptable at 0x000016b8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x30))();
  return;
}



// IGGCObject::release() const

void __thiscall IGGCObject::release(IGGCObject *this)

{
  char cVar1;
  int iVar2;
  
  iVar2 = (**(code **)(*(long *)this + 0x18))();
  if (iVar2 == 1) {
    if ((*(uint *)(this + 0x30) & 1) == 0) {
      *(uint *)(this + 0x30) = *(uint *)(this + 0x30) | 1;
      IGGarbageCollector::add(*(IGGarbageCollector **)(this + 0x10),(long)(this + 0x18));
      return;
    }
    cVar1 = (**(code **)(*(long *)this + 0x128))(this);
    if (cVar1 == '\0') {
      return;
    }
  }
                    // WARNING: Could not recover jumptable at 0x00001713. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x38))(this);
  return;
}



// IGGCObject::releaseNoCheck() const

void IGGCObject::releaseNoCheck(void)

{
                    // WARNING: Could not recover jumptable at 0x0000172a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x38))();
  return;
}



// IGGCObject::check() const

undefined1 IGGCObject::check(void)

{
  return 1;
}



// IGGCObject::MetaClass::~MetaClass()

void __thiscall IGGCObject::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGGCObject_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGGCObject::gMetaClass,"IGGCObject",(OSMetaClass *)__got::gMetaClass,
             0x38);
  IGGCObject::gMetaClass = (undefined *)&__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGGCObject::gMetaClass);
  return;
}



// IGAccelCLContext::MetaClass::MetaClass()

void __thiscall IGAccelCLContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelCLContext",(OSMetaClass *)__got::gMetaClass,0x11b8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelCLContext::MetaClass::~MetaClass()

void __thiscall IGAccelCLContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelCLContext::IGAccelCLContext(OSMetaClass const*)

void __thiscall IGAccelCLContext::IGAccelCLContext(IGAccelCLContext *this,OSMetaClass *param_1)

{
  IOAccelCLContext2::IOAccelCLContext2((IOAccelCLContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x1100));
  *(char **)(this + 0x1158) = "IGAccelCLContext";
  *(undefined2 *)(this + 0x1160) = 0;
  this[0x1162] = (IGAccelCLContext)0x0;
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::IGHashTable()

void __thiscall IGHashTable<>::IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  long lVar1;
  undefined8 *puVar2;
  
  *(undefined ***)this = &__const::~IGHashTable;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  this[0x20] = (IGHashTable<>)0x1;
  this_00 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_00,0x10);
  *(IGVector<> **)(this + 8) = this_00;
  if ((this_00 != (IGVector<> *)0x0) && (lVar1 = *(long *)(this_00 + 8), lVar1 != 0)) {
    puVar2 = *(undefined8 **)(this_00 + 0x10);
    do {
      *puVar2 = 0;
      puVar2[1] = puVar2;
      puVar2[2] = 0;
      puVar2 = puVar2 + 3;
      lVar1 = lVar1 + -1;
    } while (lVar1 != 0);
  }
  return;
}



// IGAccelCLContext::IGAccelCLContext(OSMetaClass const*)

void __thiscall IGAccelCLContext::IGAccelCLContext(IGAccelCLContext *this,OSMetaClass *param_1)

{
  IOAccelCLContext2::IOAccelCLContext2((IOAccelCLContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x1100));
  *(char **)(this + 0x1158) = "IGAccelCLContext";
  *(undefined2 *)(this + 0x1160) = 0;
  this[0x1162] = (IGAccelCLContext)0x0;
  return;
}



// IGAccelCLContext::~IGAccelCLContext()

void __thiscall IGAccelCLContext::~IGAccelCLContext(IGAccelCLContext *this)

{
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x1100));
  IOAccelCLContext2::~IOAccelCLContext2((IOAccelCLContext2 *)this);
  return;
}



// IGAccelCLContext::~IGAccelCLContext()

void __thiscall IGAccelCLContext::~IGAccelCLContext(IGAccelCLContext *this)

{
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x1100));
  IOAccelCLContext2::~IOAccelCLContext2((IOAccelCLContext2 *)this);
  return;
}



// IGAccelCLContext::~IGAccelCLContext()

void __thiscall IGAccelCLContext::~IGAccelCLContext(IGAccelCLContext *this)

{
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x1100));
  IOAccelCLContext2::~IOAccelCLContext2((IOAccelCLContext2 *)this);
  _OSObject_typed_operator_delete(&IGAccelCLContext_ktv,this,&DAT_000011b8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::operator delete(void*, unsigned long)

void __cdecl IGAccelCLContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelCLContext_ktv,param_1,param_2);
  return;
}



// IGAccelCLContext::getMetaClass() const

undefined8 * IGAccelCLContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelCLContext::MetaClass::MetaClass()

void __thiscall IGAccelCLContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelCLContext",(OSMetaClass *)__got::gMetaClass,0x11b8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelCLContext::MetaClass::alloc() const

IGAccelCLContext * IGAccelCLContext::MetaClass::alloc(void)

{
  IGAccelCLContext *this;
  
  this = (IGAccelCLContext *)_OSObject_typed_operator_new(&IGAccelCLContext_ktv,&DAT_000011b8);
  IGAccelCLContext(this);
  return this;
}



// IGAccelCLContext::operator new(unsigned long)

void * __thiscall IGAccelCLContext::operator_new(IGAccelCLContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelCLContext_ktv,this);
  return pvVar1;
}



// IGAccelCLContext::IGAccelCLContext()

void __thiscall IGAccelCLContext::IGAccelCLContext(IGAccelCLContext *this)

{
  IGAccelCLContext(this);
  return;
}



// IGAccelCLContext::IGAccelCLContext()

void __thiscall IGAccelCLContext::IGAccelCLContext(IGAccelCLContext *this)

{
  IOAccelCLContext2::IOAccelCLContext2((IOAccelCLContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelCLContext;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x1100));
  *(char **)(this + 0x1158) = "IGAccelCLContext";
  *(undefined2 *)(this + 0x1160) = 0;
  this[0x1162] = (IGAccelCLContext)0x0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelCLContext::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelCLContext::getTargetAndMethodForIndex
          (IGAccelCLContext *this,undefined8 *param_1,uint param_2)

{
  long lVar1;
  
  *param_1 = this;
  if ((param_2 & 0xfffffff8) == 0x100) {
    return (ulong)(param_2 - 0x100) * 0x30 + *(long *)(this + 0x10f8);
  }
                    // WARNING: Could not recover jumptable at 0x00001a90. Too many branches
                    // WARNING: Treating indirect jump as call
  lVar1 = (**(code **)(__got::vtable + 0x950))();
  return lVar1;
}



// IGAccelCLContext::populateContextConfig(IOAccelContextConfig*)

void __thiscall IGAccelCLContext::populateContextConfig(IGAccelCLContext *this,undefined4 *param_1)

{
  *param_1 = 0x800;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::attach(IOService*)

void __cdecl IGAccelCLContext::attach(long param_1)

{
  (**(code **)(__got::vtable + 0x680))();
  *(undefined ***)(&DAT_000010f8 + param_1) = &attach(IOService*)::methodDescs;
  return;
}



// IGAccelCLContext::map_user_memory(IntelCLMapUserMemoryIn*, IntelCLMapUserMemoryOut*, unsigned
// long long, unsigned long long*)

undefined8 __thiscall
IGAccelCLContext::map_user_memory
          (IGAccelCLContext *this,ulong *param_1,ulong *param_2,long param_3,undefined8 *param_4)

{
  IOGraphicsAccelerator2 *pIVar1;
  char cVar2;
  undefined8 uVar3;
  IOMemoryDescriptor *pIVar4;
  long *plVar5;
  long *plVar6;
  ulong uVar7;
  long lVar8;
  long *local_48;
  IGHashTable<> *local_40;
  undefined8 *local_38;
  
  if (param_3 != 0x10) {
    return 0xe00002c2;
  }
  if (*(long *)(this + 0x5a0) == 0) {
    return 0xe00002c2;
  }
  if (((uint)*param_1 & *(int *)__got::_page_size - 1U) != 0) {
    return 0xe00002c2;
  }
  local_40 = (IGHashTable<> *)(this + 0x1100);
  uVar3 = IGHashTable<>::contains(local_40,param_1);
  if ((char)uVar3 == '\0') {
    plVar5 = *(long **)(this + 0x5a8);
    local_38 = param_4;
    _OSIncrementAtomic(plVar5 + 0x12);
    _IOLockLock(plVar5[0x11]);
    _OSDecrementAtomic(plVar5 + 0x12);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*plVar5 + 0x850))(plVar5,"",0);
    pIVar4 = (IOMemoryDescriptor *)
             IOMemoryDescriptor::withAddressRange
                       (*param_1,(ulong)(uint)param_1[1],0x10201,
                        *(task **)(*(long *)(this + 0x5a0) + 0x80));
    pIVar1 = *(IOGraphicsAccelerator2 **)(this + 0x5a8);
    if (pIVar4 == (IOMemoryDescriptor *)0x0) {
      (**(code **)(*(long *)pIVar1 + 0x858))(pIVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(*(undefined8 *)(pIVar1 + 0x88));
      return 0xe00002be;
    }
    plVar5 = (long *)IOAccelSysMemory::withMemoryDescriptor(pIVar1,(IOAccelResource2 *)0x0,pIVar4);
    (**(code **)(*(long *)pIVar4 + 0x28))(pIVar4);
    if (plVar5 != (long *)0x0) {
      plVar6 = (long *)(**(code **)(*plVar5 + 0x138))(plVar5,*(undefined8 *)(this + 0x598),7);
      local_48 = plVar6;
      if (plVar6 == (long *)0x0) {
        lVar8 = *plVar5;
      }
      else {
        cVar2 = (**(code **)(*plVar6 + 0x138))(plVar6);
        if ((cVar2 != '\0') ||
           (cVar2 = IOGraphicsAccelerator2::freeToPrepareMapping
                              (*(IOAccelMemoryMap **)(this + 0x5a8)), cVar2 != '\0')) {
          IOGraphicsAccelerator2::acceleratorUnlock(*(IOGraphicsAccelerator2 **)(this + 0x5a8));
          *param_2 = *param_1;
          uVar7 = (**(code **)(*plVar6 + 0x128))(plVar6);
          param_2[1] = uVar7;
          *local_38 = 0x10;
          IGHashTable<>::add(local_40,param_1,(ulong *)&local_48);
          return 0;
        }
        (**(code **)(*plVar6 + 0x28))(plVar6);
        lVar8 = *plVar5;
      }
      (**(code **)(lVar8 + 0x28))(plVar5);
      IOGraphicsAccelerator2::acceleratorUnlock(*(IOGraphicsAccelerator2 **)(this + 0x5a8));
      return 0xe00002bc;
    }
    plVar5 = *(long **)(this + 0x5a8);
    (**(code **)(*plVar5 + 0x858))(plVar5,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar5[0x11]);
    return 0xe00002bd;
  }
  return 0xe00002c2;
}



// IGAccelCLContext::unmap_user_memory(IntelCLUnmapUserMemoryIn*, unsigned long long)

undefined8 __thiscall
IGAccelCLContext::unmap_user_memory(IGAccelCLContext *this,ulong *param_1,long param_2)

{
  IGHashTable<> *this_00;
  long lVar1;
  void *pvVar2;
  uint uVar3;
  int iVar4;
  undefined8 uVar5;
  long *plVar6;
  undefined4 extraout_var;
  char *pcVar8;
  undefined8 uVar9;
  void *pvVar10;
  long lVar7;
  
  if (param_2 != 8) {
    return 0xe00002c2;
  }
  plVar6 = *(long **)(this + 0x5a8);
  _OSIncrementAtomic(plVar6 + 0x12);
  _IOLockLock(plVar6[0x11]);
  _OSDecrementAtomic(plVar6 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar6 + 0x850))(plVar6,"",0);
  this_00 = (IGHashTable<> *)(this + 0x1100);
  uVar5 = IGHashTable<>::contains(this_00,param_1);
  uVar9 = 0xe00002c2;
  if ((char)uVar5 == '\0') goto LAB_00001ed8;
  plVar6 = (long *)IGHashTable<>::operator[](this_00,param_1);
  plVar6 = (long *)*plVar6;
  IGAccelEventMachine::finishEvent
            (*(IGAccelEventMachine **)(*(long *)(this + 0x5a8) + 0x380),this + 0x5d0,0x42);
  (**(code **)(*plVar6 + 0x140))(plVar6);
  (**(code **)(*(long *)plVar6[3] + 0x28))();
  (**(code **)(*plVar6 + 0x28))(plVar6);
  lVar1 = *(long *)(this + 0x1108);
  if (lVar1 != 0) {
    uVar3 = IGHashTable<>::slotIndex(this_00,param_1);
    lVar7 = CONCAT44(extraout_var,uVar3);
    pvVar2 = *(void **)(*(long *)(lVar1 + 0x10) + lVar7 * 0x18);
    do {
      pvVar10 = pvVar2;
      if (pvVar10 == (void *)0x0) goto LAB_00001ed5;
      pvVar2 = *(void **)((long)pvVar10 + 0x10);
      iVar4 = _memcmp(pvVar10,param_1,8);
    } while (iVar4 != 0);
    lVar1 = *(long *)((long)pvVar10 + 0x10);
    if (lVar1 == 0) {
      plVar6 = *(long **)((long)pvVar10 + 0x18);
      if ((void *)*plVar6 != pvVar10) {
LAB_00001f1a:
        pcVar8 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00001f2a:
                    // WARNING: Subroutine does not return
        _panic(pcVar8,pvVar10,0x312,"IGHash.h",0x312);
      }
      *(long **)(*(long *)(*(long *)(this + 0x1108) + 0x10) + 8 + lVar7 * 0x18) = plVar6;
    }
    else {
      if (*(long *)(lVar1 + 0x18) != (long)pvVar10 + 0x10) {
        pcVar8 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00001f2a;
      }
      if ((void *)**(long **)((long)pvVar10 + 0x18) != pvVar10) goto LAB_00001f1a;
      *(long **)(lVar1 + 0x18) = *(long **)((long)pvVar10 + 0x18);
      plVar6 = *(long **)((long)pvVar10 + 0x18);
    }
    *plVar6 = lVar1;
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                     kalloc_type_view_19,pvVar10);
    plVar6 = (long *)(*(long *)(*(long *)(this + 0x1108) + 0x10) + 0x10 + lVar7 * 0x18);
    *plVar6 = *plVar6 + -1;
    *(ulong *)(this + 0x1118) = *(long *)(this + 0x1118) - (ulong)(*plVar6 == 0);
    *(long *)(this + 0x1110) = *(long *)(this + 0x1110) + -1;
    IGHashTable<>::shrinkIfNeeded(this_00);
  }
LAB_00001ed5:
  uVar9 = 0;
LAB_00001ed8:
  plVar6 = *(long **)(this + 0x5a8);
  (**(code **)(*plVar6 + 0x858))(plVar6,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar6[0x11]);
  return uVar9;
}



// IGAccelCLContext::get_wa_table(_WA_TABLE*, _WA_TABLE*, unsigned long long, unsigned long long*)

undefined8 __thiscall
IGAccelCLContext::get_wa_table
          (IGAccelCLContext *this,undefined8 param_2_00,void *param_2,undefined8 param_4_00,
          undefined8 *param_4)

{
  *param_4 = 0xda;
  _memmove(param_2,(void *)(*(long *)(this + 0x5a8) + 0xf36),0xda);
  return 0;
}



// IGAccelCLContext::get_timestamp(unsigned long long*, unsigned long long*)

undefined8 __thiscall
IGAccelCLContext::get_timestamp(IGAccelCLContext *this,undefined8 *param_1,long *param_2)

{
  undefined8 uVar1;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  uint64_t local_28;
  
  uVar1 = 0xe00002c2;
  if (*param_2 == 8) {
    uVar1 = 0;
    local_30 = 0;
    local_38 = 0;
    local_40 = 0;
    local_48 = 0;
    local_50 = 0;
    local_58 = 0;
    local_60 = 0;
    local_28 = 0;
    IGAccelTraceStreamManager::gpuReadTimeTupleWithSampleUsageGPU
              ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5a8) + 0xe18),(long)&local_60,
               &local_28);
    *param_1 = local_58;
  }
  return uVar1;
}



// IGAccelCLContext::telemetryOperation(TelemetryOperation*, TelemetryOperation*, unsigned long
// long, unsigned long long*)

void __thiscall
IGAccelCLContext::telemetryOperation
          (IGAccelCLContext *this,ulong *param_1,ulong *param_2,long param_3,ulong *param_4)

{
  IGTelemetryManager *this_00;
  ulonglong uVar1;
  
  this_00 = *(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18);
  uVar1 = (**(code **)(*(long *)this + 0x960))();
  IGTelemetryManager::telemetryOperationWrapper
            (this_00,(long)(this + 0x1158),param_1,param_2,param_3,param_4,uVar1);
  return;
}



// IGAccelCLContext::telemetryInitOABuffer(MDAPIInitOABufferOp*, MDAPIInitOABufferOp*, unsigned long
// long, unsigned long long*)

void __thiscall
IGAccelCLContext::telemetryInitOABuffer
          (IGAccelCLContext *this,undefined8 *param_1,undefined8 *param_2,long param_3,
          ulong *param_4)

{
  IGTelemetryManager::telemetryInitOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),(long)(this + 0x1158),param_1
             ,param_2,param_3,param_4);
  return;
}



// IGAccelCLContext::telemetryReadOABuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*, unsigned
// long long, unsigned long long*)

void __thiscall
IGAccelCLContext::telemetryReadOABuffer
          (IGAccelCLContext *this,long param_1,int *param_2,long param_3,long *param_4)

{
  IGTelemetryManager::telemetryReadOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),param_1,param_2,param_3,
             param_4,(long)(this + 0x1158));
  return;
}



// IGAccelCLContext::telemetryMapOABufferMemory(IntelDeviceMapStatsMemInOut*,
// IntelDeviceMapStatsMemInOut*, unsigned long long, unsigned long long*)

void __thiscall
IGAccelCLContext::telemetryMapOABufferMemory
          (IGAccelCLContext *this,long *param_1,long *param_2,long param_3,undefined8 *param_4)

{
  IGTelemetryManager *this_00;
  ulonglong uVar1;
  
  this_00 = *(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18);
  uVar1 = (**(code **)(*(long *)this + 0x960))();
  IGTelemetryManager::telemetryMapOaBufferMemory(this_00,param_1,param_2,param_3,param_4,uVar1);
  return;
}



// IGAccelCLContext::contextStart()

undefined4 __thiscall IGAccelCLContext::contextStart(IGAccelCLContext *this)

{
  long lVar1;
  undefined4 uVar2;
  long lVar3;
  
  (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x140))
            (*(long **)(*(long *)(this + 0x5a8) + 0x380),this + 0x1170);
  uVar2 = (**(code **)(__got::vtable + 0x9f0))(this);
  if ((char)uVar2 != '\0') {
    lVar1 = *(long *)(*(long *)(this + 0x5a8) + 0xe50);
    lVar3 = 1;
    if (-2 < lVar1) {
      lVar3 = lVar1 + 1;
    }
    *(long *)(*(long *)(this + 0x5a8) + 0xe50) = lVar3;
    *(long *)(this + 0x1168) = lVar3;
    dtHookSwCtxCreation();
    this[0x1150] = (IGAccelCLContext)0x0;
    *(undefined ***)(this + 0x10e8) = &contextStart()::s_cTokenProcessMethods;
    *(undefined ***)(this + 0x10f0) = &contextStart()::s_cTokenDiscardMethods;
    IGHashTable<>::clear((IGHashTable<> *)(this + 0x1100));
    *(undefined8 *)(this + 0x1130) = 0;
    *(undefined8 *)(this + 0x1138) = 0;
    *(undefined4 *)(this + 0x1140) = 0;
    this[0x1151] = (IGAccelCLContext)0x0;
    this[0x11b0] = (IGAccelCLContext)0x1;
  }
  return uVar2;
}



// IGAccelCLContext::process_token_SetFence(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::process_token_SetFence(IGAccelCLContext *this,long *param_1)

{
  ulong uVar1;
  ulong uVar2;
  
  if (*(ulong *)(this + 0x628) < param_1[3] + 0xcU) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  if ((*(short *)((long)param_1 + 0x22) == 3) && (*param_1 != 0)) {
    uVar2 = (ulong)*(uint *)(param_1[3] + 8);
    uVar1 = uVar2 * 0x10;
    if ((uVar1 < *(uint *)(this + 0x6c8)) && (uVar2 = uVar2 * 0x40, uVar2 < *(uint *)(this + 0x6d8))
       ) {
      (**(code **)(*(long *)this + 0xa38))(this,param_1);
      (**(code **)(**(long **)(this + 0x1148) + 0x140))
                (*(long **)(this + 0x1148),uVar2 + *(long *)(this + 0x6a8));
      *(int *)(param_1 + 7) = (int)param_1[7] + 1;
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        *(undefined4 *)(*(long *)(this + 0x6a0) + uVar1) = 0;
      }
      this[0x1151] = (IGAccelCLContext)0x1;
      (**(code **)(*(long *)this + 0xa30))(this,param_1);
      this[0x1151] = (IGAccelCLContext)0x0;
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  return;
}



// IGAccelCLContext::process_token_IndirectStateBaseAddress(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_IndirectStateBaseAddress(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  ulong *puVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  undefined8 uVar10;
  long lVar11;
  ulong uVar12;
  uint uVar13;
  ulong uVar14;
  ulong uVar15;
  uint uVar16;
  OSMetaClassBase *pOVar17;
  ulong uVar18;
  ulong local_48;
  undefined4 local_3c;
  IGAccelResource *local_38;
  
  lVar1 = param_1[3];
  uVar16 = (uint)this;
  if (lVar1 + 0x18U <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (uVar13 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2),
       uVar14 = (ulong)uVar13, 0x15 < (int)uVar13)) {
      if ((*(short *)((long)param_1 + 0x22) != 6) || (puVar2 == (ulong *)0x0)) {
        IOAccelContext2::setContextError(uVar16);
        return;
      }
      local_48 = 0;
      local_3c = 0;
      local_38 = (IGAccelResource *)0x0;
      if (*(long **)(this + 0x1130) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x1130) + 0x28))();
      }
      *(undefined8 *)(this + 0x1130) = 0;
      uVar10 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 0xc),uVar14,'\0',&local_38);
      if ((char)uVar10 == '\0') {
        return;
      }
      pOVar17 = *(OSMetaClassBase **)(local_38 + 0x88);
      if ((pOVar17 != (OSMetaClassBase *)0x0) ||
         (pOVar17 = *(OSMetaClassBase **)(local_38 + 0x80), pOVar17 != (OSMetaClassBase *)0x0)) {
        lVar11 = OSMetaClassBase::safeMetaCast(pOVar17,*(OSMetaClass **)__got::metaClass);
        lVar11 = IOMemoryDescriptor::createMappingInTask
                           (*(task **)(lVar11 + 0xd0),*(ulonglong *)__got::_kernel_task,0,1,0);
        *(long *)(this + 0x1130) = lVar11;
        if (lVar11 != 0) {
          lVar11 = (**(code **)(*(long *)pOVar17 + 0x120))(pOVar17);
          *(long *)(this + 0x1138) = lVar11 + -0x40;
          IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
          puVar2[2] = (ulong)((uint)puVar2[2] & 0xfff) | local_48 & 0xfffffffffffff000;
          uVar10 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),
                                local_48 & 0xfffffffffffff000,'\0',&local_38);
          if ((char)uVar10 == '\0') {
            return;
          }
          IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
          puVar2[6] = puVar2[6] | 0x100000000;
          uVar14 = (puVar2[4] & 0xffe) + (local_48 & 0xfffffffffffff000) + 1;
          puVar2[4] = uVar14;
          puVar2[3] = (puVar2[3] & 0xffe) + (local_48 & 0xfffffffffffff000) + 1;
          puVar2[7] = puVar2[7] | 1;
          uVar10 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 0x10),uVar14,'\0',&local_38);
          if ((char)uVar10 == '\0') {
            return;
          }
          IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
          uVar14 = (ulong)((uint)puVar2[5] & 0xffe) + (local_48 & 0xfffffffffffff000) + 1;
          puVar2[5] = uVar14;
          uVar15 = (ulong)(*(uint *)(local_38 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8 + 200)
                          >> 0xc) << 0x2c;
          puVar2[5] = uVar14;
          puVar2[7] = puVar2[7] & 0xffeffffffff | uVar15 | 0x100000000;
          if (*(uint *)(lVar1 + 0x14) == 0xffffffff) {
            return;
          }
          uVar10 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 0x14),uVar15,'\0',&local_38);
          if ((char)uVar10 == '\0') {
            return;
          }
          IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
          uVar12 = (ulong)*(uint *)((long)puVar2 + 0xc) << 0x20 | local_48 >> 0x20;
          uVar14 = puVar2[2];
          uVar15 = puVar2[3];
          uVar3 = puVar2[4];
          uVar4 = puVar2[5];
          uVar5 = puVar2[6];
          uVar6 = puVar2[7];
          uVar7 = puVar2[10];
          uVar8 = puVar2[8];
          uVar9 = puVar2[9];
          uVar18 = *puVar2 & 0xffeffffffff | (local_48 >> 0xc) << 0x2c | 0x100000000;
          puVar2[9] = uVar9;
          puVar2[8] = uVar8;
          puVar2[10] = uVar7;
          puVar2[7] = uVar6;
          puVar2[6] = uVar5;
          puVar2[5] = uVar4;
          puVar2[4] = uVar3;
          puVar2[3] = uVar15;
          puVar2[2] = uVar14;
          puVar2[1] = uVar12;
          *puVar2 = uVar18;
          uVar16 = *(uint *)(local_38 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8 + 200);
          puVar2[9] = uVar9;
          puVar2[8] = uVar8;
          puVar2[10] = uVar7;
          puVar2[7] = uVar6;
          puVar2[5] = uVar4;
          puVar2[4] = uVar3;
          puVar2[3] = uVar15;
          puVar2[2] = uVar14;
          puVar2[1] = uVar12;
          *puVar2 = uVar18;
          puVar2[6] = (ulong)(uVar16 & 0xfffff000) + (uVar5 & 0xffffffff00000ffe) + 1;
          return;
        }
      }
      IOAccelContext2::setContextError(uVar16);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar16);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::process_token_MILoadRegMem(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::process_token_MILoadRegMem(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  uint uVar4;
  uint uVar5;
  IGAccelResource *local_40;
  long local_38;
  undefined4 local_2c;
  
  lVar1 = param_1[3];
  uVar5 = (uint)this;
  if (lVar1 + 0x10U <= *(ulong *)(this + 0x628)) {
    lVar2 = *param_1;
    if ((-4 < lVar2 - param_1[1]) &&
       (uVar4 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar2 - param_1[1]) >> 2),
       3 < (int)uVar4)) {
      if ((*(short *)((long)param_1 + 0x22) != 4) || (lVar2 == 0)) {
        IOAccelContext2::setContextError(uVar5);
        return;
      }
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        return;
      }
      local_40 = (IGAccelResource *)0x0;
      local_38 = 0;
      local_2c = 0;
      uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),(ulong)uVar4,'\0',&local_40);
      if ((char)uVar3 != '\0') {
        IGAccelResource::get_tex_data(local_40,&local_38,&local_2c);
        *(ulong *)(lVar2 + 8) =
             *(ulong *)(lVar2 + 8) & 0xffff000000000003 |
             (ulong)*(uint *)(lVar1 + 0xc) + local_38 & 0xfffffffffffc;
        return;
      }
      IOAccelContext2::setContextError(uVar5);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar5);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::process_token_ISHIndirectPatch(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_ISHIndirectPatch(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  uint uVar5;
  long lVar6;
  IGAccelResource *local_38;
  ulong local_30;
  undefined4 local_24;
  
  lVar1 = param_1[3];
  if (lVar1 + 0x18U <= *(ulong *)(this + 0x628)) {
    lVar2 = *param_1;
    if ((-4 < lVar2 - param_1[1]) &&
       (uVar5 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar2 - param_1[1]) >> 2),
       5 < (int)uVar5)) {
      if (*(short *)((long)param_1 + 0x22) == 6) {
        local_38 = (IGAccelResource *)0x0;
        local_30 = 0;
        local_24 = 0;
        uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),(ulong)uVar5,'\x01',&local_38);
        if ((char)uVar3 == '\0') {
          *(uint *)(lVar2 + 8) = *(uint *)(lVar2 + 8) & 3;
          uVar4 = 0;
        }
        else {
          IGAccelResource::get_tex_data(local_38,(long *)&local_30,&local_24);
          lVar6 = (ulong)*(uint *)(lVar1 + 0xc) + (local_30 & 0xfffffffffffffffc);
          *(uint *)(lVar2 + 8) = *(uint *)(lVar2 + 8) & 3 | (uint)lVar6 & 0xfffffffc;
          *(int *)(lVar2 + 0xc) = (int)((ulong)lVar6 >> 0x20);
          uVar4 = (ulong)*(uint *)(lVar1 + 0x10);
        }
        *(ulong *)(lVar2 + 0x10) = uVar4;
        return;
      }
      IOAccelContext2::setContextError((uint)this);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::process_token_SurfaceStatePatch(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_SurfaceStatePatch(IGAccelCLContext *this,long param_1)

{
  ushort uVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  long lVar5;
  undefined8 uVar6;
  IGAccelResource *pIVar7;
  ulong uVar8;
  uint uVar9;
  ulong *puVar10;
  long lVar11;
  bool bVar12;
  long local_68;
  IGAccelResource *local_60;
  undefined4 local_54;
  long local_50;
  IGAccelCLContext *local_48;
  int local_3c;
  IGAccelResource *local_38;
  
  lVar2 = *(long *)(param_1 + 0x18);
  if ((*(ulong *)(this + 0x628) < lVar2 + 0x510U) ||
     (uVar4 = (ulong)*(ushort *)(lVar2 + 10), 0x20 < uVar4)) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else if (uVar4 != 0) {
    lVar11 = 0;
    local_48 = this;
    do {
      local_50 = 0;
      local_3c = 0;
      local_38 = (IGAccelResource *)0x0;
      uVar8 = (ulong)*(uint *)(lVar2 + 0x18 + lVar11);
      if ((*(ulong *)(local_48 + 0x1138) < uVar8) || (*(long **)(local_48 + 0x1130) == (long *)0x0))
      {
LAB_00002bd3:
        uVar9 = (uint)local_48;
LAB_00002bd6:
        IOAccelContext2::setContextError(uVar9);
        return;
      }
      lVar5 = (**(code **)(**(long **)(local_48 + 0x1130) + 0x118))();
      puVar10 = (ulong *)(lVar5 + uVar8);
      if (puVar10 == (ulong *)0x0) goto LAB_00002bd3;
      uVar6 = bind_texture(local_48,param_1,*(uint *)(lVar2 + 0x10 + lVar11),local_48,
                           *(int *)(lVar2 + 0x34 + lVar11) != 0,&local_38);
      if ((char)uVar6 == '\0') {
        return;
      }
      IGAccelResource::get_tex_data(local_38,&local_50,&local_3c);
      if (((*(int *)(lVar2 + 0x30 + lVar11) != 0) && (*(int *)(lVar2 + 0xc) != 0)) &&
         (*(long **)(local_38 + 0x40) != (long *)0x0)) {
        local_50 = (**(code **)(**(long **)(local_38 + 0x40) + 0x128))();
      }
      puVar10[4] = (ulong)*(uint *)(lVar2 + 0x1c + lVar11) + local_50;
      lVar5 = IOAccelResource2::getStorageResource();
      pIVar7 = local_38;
      uVar1 = *(ushort *)(lVar5 + 0x194);
      *puVar10 = *puVar10 & 0xffffffffffffcfff | (ulong)((uVar1 & 3) << 0xc);
      *(ulong *)((long)puVar10 + 0x14) =
           *(ulong *)((long)puVar10 + 0x14) & 0xfffffffffff3ffff | (ulong)((uVar1 & 0xc) << 0x10);
      bVar12 = *(int *)(lVar2 + 0x34 + lVar11) != 0;
      uVar8 = (ulong)bVar12;
      lVar5 = IOAccelResource2::getStorageResource();
      IGAccelResource::fillSurfaceStateAuxInfo(pIVar7,lVar5 + 0x180,(long)puVar10,(uint)bVar12);
      if (*(int *)(lVar2 + 0x30 + lVar11) == 0) {
        if (*(int *)(lVar2 + 0x14 + lVar11) != 0) {
          local_68 = 0;
          local_54 = 0;
          local_60 = (IGAccelResource *)0x0;
          uVar6 = bind_texture(local_48,param_1,*(uint *)(lVar2 + 0x14 + lVar11),uVar8,'\0',
                               &local_60);
          if ((char)uVar6 == '\0') {
            return;
          }
          IGAccelResource::get_tex_data(local_60,&local_68,&local_54);
          puVar10[5] = (ulong)((uint)puVar10[5] & 0xfff | (uint)local_68 & 0xfffff000);
        }
        iVar3 = *(int *)(lVar2 + 0x20 + lVar11);
        if (iVar3 == 0) {
          iVar3 = local_3c;
        }
        puVar10[1] = puVar10[1] & 0xfffc0000ffffffff | (ulong)(iVar3 - 1U & 0x3ffff) << 0x20;
        lVar5 = IOAccelResource2::getStorageResource();
        if (((*(byte *)(lVar5 + 0x1d6) & 1) == 0) ||
           (lVar5 = IOAccelResource2::getStorageResource(), (*(byte *)(lVar5 + 0x1d6) & 2) != 0)) {
          pIVar7 = local_38 + 0xb4;
        }
        else {
          pIVar7 = local_38 + 0xb2;
        }
        puVar10[1] = puVar10[1] & 0x1fffffffffffff | (ulong)(*(ushort *)pIVar7 - 1) << 0x35;
        if (*(int *)(lVar2 + 0x34 + lVar11) != 0) {
          uVar9 = *(uint *)(lVar2 + 0x28 + lVar11);
          if ((byte)local_38[0xac] <= uVar9) {
            uVar9 = (uint)local_48;
            goto LAB_00002bd6;
          }
          (**(code **)(*(long *)local_38 + 0x168))
                    (local_38,uVar9,*(undefined4 *)(lVar2 + 0x2c + lVar11));
        }
      }
      lVar11 = lVar11 + 0x28;
    } while (uVar4 * 0x28 != lVar11);
  }
  return;
}



// IGAccelCLContext::process_token_PipeControl(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::process_token_PipeControl(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  undefined8 uVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  IGAccelResource *local_40;
  ulong local_38;
  undefined4 local_2c;
  
  lVar4 = param_1[3];
  uVar5 = (uint)this;
  if (lVar4 + 0x10U <= *(ulong *)(this + 0x628)) {
    lVar1 = *param_1;
    if ((-4 < lVar1 - param_1[1]) &&
       (uVar3 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar1 - param_1[1]) >> 2),
       5 < (int)uVar3)) {
      if (*(short *)((long)param_1 + 0x22) != 4) {
        IOAccelContext2::setContextError(uVar5);
        return;
      }
      local_40 = (IGAccelResource *)0x0;
      local_38 = 0;
      local_2c = 0;
      uVar2 = bind_texture(this,(long)param_1,*(uint *)(lVar4 + 8),(ulong)uVar3,'\x01',&local_40);
      if ((char)uVar2 != '\0') {
        IGAccelResource::get_tex_data(local_40,(long *)&local_38,&local_2c);
        lVar4 = (ulong)*(uint *)(lVar4 + 0xc) + (local_38 & 0xfffffffffffffffc);
        *(uint *)(lVar1 + 8) = *(uint *)(lVar1 + 8) & 3 | (uint)lVar4 & 0xfffffffc;
        *(int *)(lVar1 + 0xc) = (int)((ulong)lVar4 >> 0x20);
        return;
      }
      IOAccelContext2::setContextError(uVar5);
      *(uint *)(lVar1 + 8) = *(uint *)(lVar1 + 8) & 3;
      return;
    }
  }
  IOAccelContext2::setContextError(uVar5);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::process_token_BindQueryBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_BindQueryBuffer(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  uint uVar4;
  long lVar5;
  uint uVar6;
  IGAccelResource *local_40;
  long local_38;
  undefined4 local_2c;
  
  lVar1 = param_1[3];
  uVar6 = (uint)this;
  if (lVar1 + 0x14U <= *(ulong *)(this + 0x628)) {
    lVar2 = *param_1;
    if ((-4 < lVar2 - param_1[1]) &&
       (uVar4 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar2 - param_1[1]) >> 2),
       0xb < (int)uVar4)) {
      if ((*(short *)((long)param_1 + 0x22) != 5) || (lVar2 == 0)) {
        IOAccelContext2::setContextError(uVar6);
        return;
      }
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        return;
      }
      local_40 = (IGAccelResource *)0x0;
      local_38 = 0;
      local_2c = 0;
      uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),(ulong)uVar4,'\0',&local_40);
      if ((char)uVar3 != '\0') {
        IGAccelResource::get_tex_data(local_40,&local_38,&local_2c);
        lVar5 = (ulong)*(uint *)(lVar1 + 0xc) + local_38;
        *(uint *)(lVar2 + 8) = *(uint *)(lVar2 + 8) & 3 | (uint)lVar5 & 0xfffffffc;
        *(int *)(lVar2 + 0xc) = (int)((ulong)lVar5 >> 0x20);
        local_38 = (ulong)*(uint *)(lVar1 + 0x10) + local_38;
        *(uint *)(lVar2 + 0x20) = *(uint *)(lVar2 + 0x20) & 3 | (uint)local_38 & 0xfffffffc;
        *(int *)(lVar2 + 0x24) = (int)((ulong)local_38 >> 0x20);
        return;
      }
      IOAccelContext2::setContextError(uVar6);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar6);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::process_token_BindQueryStoreRegisterToMemoryList(IOAccelCommandStreamInfo&)

void __cdecl
IGAccelCLContext::process_token_BindQueryStoreRegisterToMemoryList
          (IGAccelCLContext *param_1,ulong *param_2,undefined8 param_3,undefined8 param_4)

{
  uint uVar1;
  ulong uVar2;
  long lVar3;
  uint uVar4;
  undefined8 uVar5;
  ulong uVar6;
  ulong uVar7;
  uint uVar8;
  long local_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  ulong local_50;
  IGAccelResource *local_48;
  ulong local_40;
  undefined4 local_34;
  
  uVar2 = param_2[3];
  uVar8 = (uint)param_1;
  if (*(ulong *)(param_1 + 0x628) < uVar2 + 0x218) {
    IOAccelContext2::setContextError(uVar8);
    *(undefined1 *)((long)param_2 + 0x3c) = 0;
  }
  else {
    if ((*(short *)((long)param_2 + 0x22) != 0x86) || (local_40 = *param_2, local_40 == 0)) {
      IOAccelContext2::setContextError(uVar8);
      return;
    }
    if (*(char *)((long)param_2 + 0x3c) != '\0') {
      local_68 = (ulong)*(uint *)(uVar2 + 0xc);
      uVar4 = *(uint *)(uVar2 + 0x10);
      uVar1 = *(uint *)(uVar2 + 0x14);
      local_60 = param_2[1];
      local_58 = (ulong)(uint)param_2[2];
      local_48 = (IGAccelResource *)0x0;
      local_70 = 0;
      local_34 = 0;
      uVar5 = bind_texture(param_1,(long)param_2,*(uint *)(uVar2 + 8),param_4,'\0',&local_48);
      if ((char)uVar5 != '\0') {
        local_50 = (ulong)uVar4;
        IGAccelResource::get_tex_data(local_48,&local_70,&local_34);
        uVar7 = local_70 + local_68;
        if ((uVar1 == 8) || (uVar1 == 4)) {
          lVar3 = (local_50 & 0xffffffff) * (ulong)uVar1;
          uVar4 = (uint)lVar3;
          if ((((int)((ulong)lVar3 >> 0x20) == 0) &&
              (((!CARRY4(uVar4,(uint)local_68) &&
                ((ulong)(uVar4 + (uint)local_68) <=
                 *(ulong *)(local_48 + (ulong)(*(long *)(local_48 + 0x88) == 0) * 8 + 200))) &&
               ((local_50 & 0xf0000000) == 0)))) &&
             ((local_60 <= local_40 &&
              (local_40 + (ulong)((int)local_50 * 4 & 0x3ffffffc) * 4 <
               local_60 + ((uint)local_58 & 0xfffffffc))))) {
            if (local_50 == 0) {
              return;
            }
            uVar6 = 0;
            uVar8 = 0;
            do {
              if (*(int *)(uVar2 + 0x18 + uVar6 * 4) != 0) {
                *(ulong *)(local_40 + 8 + (ulong)uVar8 * 4) =
                     *(ulong *)(local_40 + 8 + (ulong)uVar8 * 4) & 0xffff000000000003 |
                     uVar7 & 0xfffffffffffc;
                uVar8 = uVar8 + 4;
              }
              uVar7 = uVar7 + uVar1;
              uVar6 = uVar6 + 1;
            } while (local_50 != uVar6);
            return;
          }
        }
      }
      IOAccelContext2::setContextError(uVar8);
    }
  }
  return;
}



// IGAccelCLContext::process_token_BindQueryReportPerfCount(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_BindQueryReportPerfCount(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  ulong *puVar2;
  undefined8 uVar3;
  uint uVar4;
  uint uVar5;
  IGAccelResource *local_40;
  long local_38;
  undefined4 local_2c;
  
  lVar1 = param_1[3];
  uVar5 = (uint)this;
  if (lVar1 + 0x10U <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (uVar4 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2),
       3 < (int)uVar4)) {
      if ((*(short *)((long)param_1 + 0x22) == 4) && (puVar2 != (ulong *)0x0)) {
        if (*(char *)((long)param_1 + 0x3c) == '\0') {
          return;
        }
        local_40 = (IGAccelResource *)0x0;
        local_38 = 0;
        local_2c = 0;
        uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),(ulong)uVar4,'\0',&local_40);
        if ((char)uVar3 != '\0') {
          IGAccelResource::get_tex_data(local_40,&local_38,&local_2c);
          if ((ulong)*(uint *)(lVar1 + 0xc) + 0x100 <=
              *(ulong *)(local_40 + (ulong)(*(long *)(local_40 + 0x88) == 0) * 8 + 200)) {
            local_38 = (ulong)*(uint *)(lVar1 + 0xc) + local_38;
            *(short *)(puVar2 + 1) = (short)((ulong)local_38 >> 0x20);
            *puVar2 = *puVar2 & 0x3fffffffff | (ulong)((uint)local_38 & 0xffffffc0) << 0x20;
            return;
          }
        }
        IOAccelContext2::setContextError(uVar5);
        return;
      }
      IOAccelContext2::setContextError(uVar5);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar5);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::process_token_CurbeIndirectPatch(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::process_token_CurbeIndirectPatch(IGAccelCLContext *this,undefined8 *param_1)

{
  long lVar1;
  ulong *puVar2;
  ulong uVar3;
  undefined8 uVar4;
  ushort uVar5;
  uint uVar6;
  long lVar7;
  IGAccelResource *local_48;
  ulong local_40;
  undefined4 local_34;
  
  lVar1 = param_1[3];
  if (lVar1 + 0x18U <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (uVar6 = (*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2),
       4 < (int)uVar6)) {
      local_48 = (IGAccelResource *)0x0;
      local_40 = 0;
      local_34 = 0;
      uVar4 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),(ulong)uVar6,'\x01',&local_48);
      if ((char)uVar4 == '\0') {
        uVar3 = *puVar2;
        *(uint *)(puVar2 + 1) = (uint)puVar2[1] & 0xffff0000;
        *puVar2 = uVar3 & 0x3ffffffff;
        *(uint *)((long)puVar2 + 0xc) = 0;
        uVar6 = (uint)uVar3;
      }
      else {
        IGAccelResource::get_tex_data(local_48,(long *)&local_40,&local_34);
        lVar7 = (ulong)*(uint *)(lVar1 + 0xc) + (local_40 & 0xfffffffffffc);
        uVar5 = (ushort)((ulong)lVar7 >> 0x20);
        *puVar2 = *puVar2 & 0x3ffffffff | (ulong)((uint)lVar7 & 0xfffffffc) << 0x20;
        *(uint *)(puVar2 + 1) = (uint)puVar2[1] & 0xffff0000 | (uint)uVar5;
        if (*(uint *)(lVar1 + 0x10) == 0) {
          return;
        }
        uVar4 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 0x10),(ulong)uVar5,'\0',&local_48)
        ;
        if ((char)uVar4 != '\0') {
          IGAccelResource::get_tex_data(local_48,(long *)&local_40,&local_34);
          if ((*(char *)(lVar1 + 0x14) != '\0') && (*(long **)(local_48 + 0x40) != (long *)0x0)) {
            local_40 = (**(code **)(**(long **)(local_48 + 0x40) + 0x128))();
          }
          if (((uint)*puVar2 >> 0x15 & 1) == 0) {
            *(uint *)((long)puVar2 + 0xc) = (uint)local_40;
            return;
          }
          *(ulong *)((long)puVar2 + 0xc) = local_40;
          return;
        }
        uVar3 = *puVar2;
        *(uint *)(puVar2 + 1) = (uint)puVar2[1] & 0xffff0000;
        *puVar2 = uVar3 & 0x3ffffffff;
        *(uint *)((long)puVar2 + 0xc) = 0;
        uVar6 = (uint)uVar3;
      }
      if ((uVar6 >> 0x15 & 1) == 0) {
        return;
      }
      *(uint *)(puVar2 + 2) = 0;
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelCLContext::discard_token_SetFence(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_SetFence(void)

{
  return;
}



// IGAccelCLContext::discard_token_IndirectStateBaseAddress(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::discard_token_IndirectStateBaseAddress(IGAccelCLContext *this,long *param_1)

{
  long lVar1;
  char cVar2;
  long lVar3;
  uint uVar4;
  
  lVar3 = param_1[3];
  uVar4 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar3 + 0x18U) {
    IOAccelContext2::setContextError(uVar4);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    if (*(short *)((long)param_1 + 0x22) != 6) {
      IOAccelContext2::setContextError(uVar4);
      return;
    }
    lVar1 = *param_1;
    cVar2 = IOAccelContext2::lookupResource(uVar4,(void **)(ulong)*(uint *)(lVar3 + 0xc));
    if ((cVar2 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
    }
    cVar2 = IOAccelContext2::lookupResource(uVar4,(void **)(ulong)*(uint *)(lVar3 + 8));
    if ((cVar2 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
    }
    if (lVar1 != 0) {
      lVar3 = 0;
      do {
        *(undefined4 *)(lVar1 + lVar3 * 4) = 0;
        lVar3 = lVar3 + 1;
      } while (lVar3 != 10);
    }
  }
  return;
}



// IGAccelCLContext::discard_token_MILoadRegMem(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::discard_token_MILoadRegMem(IGAccelCLContext *this,long param_1)

{
  char cVar1;
  
  if (*(ulong *)(this + 0x628) < *(long *)(param_1 + 0x18) + 0x10U) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else {
    cVar1 = IOAccelContext2::lookupResource
                      ((uint)this,(void **)(ulong)*(uint *)(*(long *)(param_1 + 0x18) + 8));
    if ((cVar1 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
    }
  }
  return;
}



// IGAccelCLContext::discard_token_ISHIndirectPatch(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_ISHIndirectPatch(void)

{
  return;
}



// IGAccelCLContext::discard_token_SurfaceStatePatch(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_SurfaceStatePatch(void)

{
  return;
}



// IGAccelCLContext::discard_token_PipeControl(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_PipeControl(void)

{
  return;
}



// IGAccelCLContext::discard_token_BindQueryBuffer(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_BindQueryBuffer(void)

{
  return;
}



// IGAccelCLContext::discard_token_BindQueryStoreRegisterToMemoryList(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_BindQueryStoreRegisterToMemoryList(void)

{
  return;
}



// IGAccelCLContext::discard_token_BindQueryReportPerfCount(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_BindQueryReportPerfCount(void)

{
  return;
}



// IGAccelCLContext::discard_token_CurbeIndirectPatch(IOAccelCommandStreamInfo&)

void IGAccelCLContext::discard_token_CurbeIndirectPatch(void)

{
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::clear()

int __thiscall IGHashTable<>::clear(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  char *pcVar6;
  ulong uVar7;
  
  lVar4 = *(long *)(this + 8);
  if ((lVar4 != 0) && (*(long *)(lVar4 + 8) != 0)) {
    lVar5 = *(long *)(lVar4 + 0x10);
    uVar7 = 0;
    do {
      lVar1 = *(long *)(lVar5 + uVar7 * 0x18);
      if (lVar1 != 0) {
        for (lVar4 = *(long *)(lVar1 + 0x10); lVar4 != 0; lVar4 = *(long *)(lVar4 + 0x10)) {
          if (*(long *)(lVar4 + 0x18) != lVar1 + 0x10) {
            pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_00003648;
          }
          if (**(long **)(lVar1 + 0x18) != lVar1) goto LAB_00003641;
          *(long **)(lVar4 + 0x18) = *(long **)(lVar1 + 0x18);
          **(long **)(lVar1 + 0x18) = lVar4;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar4;
        }
        plVar2 = *(long **)(lVar1 + 0x18);
        if (*plVar2 != lVar1) {
LAB_00003641:
          pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00003648:
                    // WARNING: Subroutine does not return
          _panic(pcVar6,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar7 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        lVar4 = *(long *)(this + 8);
        lVar5 = *(long *)(lVar4 + 0x10);
      }
      *(undefined8 *)(lVar5 + 0x10 + uVar7 * 0x18) = 0;
      uVar7 = uVar7 + 1;
    } while (uVar7 < *(ulong *)(lVar4 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  iVar3 = shrinkIfNeeded(this);
  return iVar3;
}



// IGAccelCLContext::contextStop()

void __thiscall IGAccelCLContext::contextStop(IGAccelCLContext *this)

{
  IGHashTable<> *this_00;
  long lVar1;
  long *plVar2;
  long local_60;
  ulong *local_58;
  undefined4 local_50;
  IGHashTable<> *local_48;
  undefined1 local_40;
  long local_38;
  ulong local_30;
  
  IGAccelEventMachine::finishEvent
            (*(IGAccelEventMachine **)(*(long *)(this + 0x5a8) + 0x380),this + 0x5d0,0x42);
  if (*(IGHardwareContext **)(this + 0x1128) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x1128),0);
    (**(code **)(**(long **)(this + 0x1128) + 0x28))();
    *(undefined8 *)(this + 0x1128) = 0;
  }
  this_00 = (IGHashTable<> *)(this + 0x1100);
  local_50 = 0;
  local_38 = 0;
  local_40 = 1;
  local_48 = this_00;
  IGHashTable<>::Iterator::next((Iterator *)&local_60);
  lVar1 = **(long **)(this + 0x1108);
  while ((local_60 != lVar1 || (local_58 != (ulong *)0x0))) {
    local_30 = *local_58;
    plVar2 = (long *)IGHashTable<>::operator[](this_00,&local_30);
    plVar2 = (long *)*plVar2;
    (**(code **)(*plVar2 + 0x140))(plVar2);
    (**(code **)(*(long *)plVar2[3] + 0x28))();
    (**(code **)(*plVar2 + 0x28))(plVar2);
    IGHashTable<>::Iterator::next((Iterator *)&local_60);
  }
  if (local_38 != 0) {
    IGHashTable<>::shrinkIfNeeded(local_48);
  }
  IGHashTable<>::clear(this_00);
  if (*(long **)(this + 0x1130) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1130) + 0x28))();
  }
  *(undefined8 *)(this + 0x1130) = 0;
  dtHookSwCtxDestroy();
  IGTelemetryManager::onConnectionStop
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),(long)(this + 0x1158),0);
  (**(code **)(__got::vtable + 0x9f8))(this);
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::operator[](unsigned long long const&)

long __thiscall IGHashTable<>::operator[](IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  IGHashTable<> *this_00;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  void *pvVar4;
  void *pvVar5;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  IGHashTable<> *local_40;
  undefined8 local_38;
  long local_30;
  
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  local_30 = 0;
  local_38 = 1;
  local_40 = this;
  Iterator::next((Iterator *)&local_58);
  this_00 = local_40;
  lVar1 = *(long *)(local_40 + 8);
  uVar2 = slotIndex(local_40,param_1);
  pvVar5 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
  pvVar4 = (void *)0x0;
  if (pvVar5 != (void *)0x0) {
    do {
      iVar3 = _memcmp(pvVar5,param_1,8);
      pvVar4 = pvVar5;
      if (iVar3 == 0) break;
      pvVar5 = *(void **)((long)pvVar5 + 0x10);
      pvVar4 = (void *)0x0;
    } while (pvVar5 != (void *)0x0);
  }
  if (local_30 != 0) {
    shrinkIfNeeded(this_00);
  }
  return (long)pvVar4 + 8;
}



// IGAccelCLContext::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall
IGAccelCLContext::describeDriverAllocations(IGAccelCLContext *this,IOAccelMemory *param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long *plVar4;
  long local_68;
  ulong *local_60;
  undefined4 local_58;
  IGHashTable<> *local_50;
  undefined1 local_48;
  long local_40;
  ulong local_38;
  
  (**(code **)(__got::vtable + 0xb48))();
  lVar1 = *(long *)(this + 0x1128);
  if (lVar1 != 0) {
    (**(code **)(*(long *)this + 0x970))(this);
    IGHardwareContext::describeDriverAllocations(lVar1,param_1);
  }
  local_58 = 0;
  local_40 = 0;
  local_48 = 1;
  local_50 = (IGHashTable<> *)(this + 0x1100);
  IGHashTable<>::Iterator::next((Iterator *)&local_68);
  lVar1 = **(long **)(this + 0x1108);
  while ((local_68 != lVar1 || (local_60 != (ulong *)0x0))) {
    local_38 = *local_60;
    plVar4 = (long *)IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x1100),&local_38);
    lVar2 = *plVar4;
    if ((lVar2 != 0) && (*(char **)(lVar2 + 0x18) != (char *)0x0)) {
      IOAccelAllocationInfo::addString(param_1,*(char **)(lVar2 + 0x18));
      uVar3 = *(undefined8 *)(lVar2 + 0x18);
      (**(code **)(*(long *)this + 0x970))(this);
      IOAccelAllocationInfo::addPID(param_1,(int)uVar3);
    }
    IGHashTable<>::Iterator::next((Iterator *)&local_68);
  }
  if (local_40 != 0) {
    IGHashTable<>::shrinkIfNeeded(local_50);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::beginCommandStream(IOAccelCommandStreamInfo&)

void __cdecl IGAccelCLContext::beginCommandStream(long param_1)

{
  long *plVar1;
  
  if ((&DAT_00001151)[param_1] == '\0') {
    *(undefined4 *)(&DAT_00001140 + param_1) = 0;
    plVar1 = *(long **)(*(long *)(param_1 + 0x5a8) + 0x380);
    (**(code **)(*plVar1 + 0x148))(plVar1,&DAT_00001170 + param_1);
    (&DAT_000011b0)[param_1] = 1;
  }
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18),
             *(undefined8 *)(&DAT_00001168 + param_1));
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(&DAT_00001128 + param_1) + 0x80) =
       *(undefined8 *)(&DAT_00001168 + param_1);
  (&DAT_00001150)[param_1] = 1;
  return;
}



// IGAccelCLContext::endCommandStream(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelCLContext::endCommandStream
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  int *piVar1;
  uint uVar2;
  long lVar3;
  long *plVar4;
  long lVar5;
  char cVar6;
  long lVar7;
  undefined8 uVar8;
  
  dtHookSubmitQueueKMD();
  uVar8 = (**(code **)(**(long **)((long)this + 0x1148) + 0x148))();
  uVar2 = *(uint *)(param_10 + 0x34);
  if (uVar2 == 0) {
    IGAccelFIFOChannel::submitStampCommand
              (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               *(void **)((long)this + 0x1148));
  }
  else {
    if ((uVar2 < 3) || (*(char *)(param_10 + 0x3c) == '\0')) {
      IGAccelFIFOChannel::submitStampCommand
                (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(void **)((long)this + 0x1148));
    }
    else {
      lVar3 = *(long *)((long)this + 0x5a8);
      IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar3 + 0x388) + 0x58),2);
      piVar1 = (int *)(lVar3 + 0x1a8);
      *piVar1 = *piVar1 + uVar2 * 4 + -8;
      if (*(char *)((long)this + 0x11b0) == '\0') {
        plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        cVar6 = (**(code **)(*plVar4 + 0x1f0))
                          (plVar4,0,&DAT_00001170 + (long)this,*(long *)((long)this + 0x1148),
                           *(undefined4 *)(*(long *)((long)this + 0x1148) + 0x20));
        if (cVar6 == '\0') {
          plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
          (**(code **)(*plVar4 + 0x198))
                    (plVar4,&DAT_00001170 + (long)this,
                     *(undefined4 *)(*(long *)((long)this + 0x1148) + 0x20));
        }
      }
      lVar3 = *(long *)((long)this + 0xfe0);
      uVar2 = *(uint *)(param_10 + 0x30);
      *(ulong *)(*(long *)((long)this + 0x618) + 0x20) =
           (ulong)(uVar2 & 0xfffffffc) + *(long *)(param_10 + 8);
      lVar7 = (**(code **)(**(long **)(lVar3 + 0x40) + 0x128))();
      lVar5 = *(long *)((long)this + 0x618);
      *(ulong *)(lVar5 + 0x18) = lVar7 + (ulong)uVar2;
      *(int *)(lVar5 + 0x30) = *(int *)(param_10 + 0x34) + -2;
      (**(code **)(**(long **)((long)this + 0x1148) + 0x130))();
      (**(code **)(**(long **)((long)this + 0x1148) + 0x140))
                (*(long **)((long)this + 0x1148),(long)this + 0x5d0);
      (**(code **)(**(long **)((long)this + 0x1148) + 0x140))
                (*(long **)((long)this + 0x1148),*(long *)(lVar3 + 0x40) + 0x38);
    }
    *(int *)(param_10 + 0x30) = *(int *)(param_10 + 0x30) + *(int *)(param_10 + 0x34) * 4;
    *(undefined8 *)(param_10 + 0x34) = 0;
  }
  *(undefined1 *)((long)this + 0x1150) = 0;
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)((long)this + 0x5a8) + 0xe18));
  return;
}



// IGAccelCLContext::processDataBuffers(unsigned int)

undefined4 __thiscall
IGAccelCLContext::processDataBuffers(IGAccelCLContext *this,undefined4 param_1)

{
  IntelAccelerator *this_00;
  undefined4 uVar1;
  long lVar2;
  
  IOGraphicsAccelerator2::acceleratorWaitEnabled();
  if (*(long *)(this + 0x1128) == 0) {
    this_00 = *(IntelAccelerator **)(this + 0x5a8);
    lVar2 = (**(code **)(*(long *)this + 0x968))(this);
    lVar2 = IntelAccelerator::newCLHardwareContext(this_00,lVar2);
    *(long *)(this + 0x1128) = lVar2;
    if (lVar2 == 0) {
      return 0x80000000;
    }
    *(undefined8 *)(this + 0x1148) = *(undefined8 *)(lVar2 + 0xb0);
  }
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5a8) + 0xe18),
             *(undefined8 *)(this + 0x1168));
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(this + 0x1128) + 0x80) = *(undefined8 *)(this + 0x1168);
  uVar1 = (**(code **)(__got::vtable + 0xa38))(this,param_1);
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5a8) + 0xe18));
  return uVar1;
}



// IGAccelCLContext::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::processSidebandToken(IGAccelCLContext *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  long lVar1;
  
  if ((short)*(ushort *)(param_1 + 0x20) < -0x7600) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x80) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x10e8) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x10e8) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x00003d72. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00003d7c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa20))();
  return;
}



// IGAccelCLContext::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelCLContext::discardSidebandToken(IGAccelCLContext *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  long lVar1;
  
  if ((short)*(ushort *)(param_1 + 0x20) < -0x7600) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x80) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x10f0) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x10f0) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x00003dbc. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00003dc6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa28))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::getDataBufferLimits()

undefined4 * __cdecl IGAccelCLContext::getDataBufferLimits(undefined4 *param_1,undefined8 param_2)

{
  ___bzero(param_1,0x308);
  (**(code **)(__got::vtable + 0xa00))(param_1,param_2);
  *param_1 = 1;
  *(char **)(param_1 + 8) = "Default";
  *(undefined8 *)(param_1 + 2) = 0x100000010;
  *(undefined8 *)(param_1 + 4) = 0x4000;
  *(undefined8 *)(param_1 + 6) = 0x20000;
  param_1[0xb] = 0x300;
  return param_1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCLContext::addDataBufferToChannel(IOAccelResource2*, unsigned int)

void __cdecl IGAccelCLContext::addDataBufferToChannel(long param_1,long *param_2)

{
                    // WARNING: Could not recover jumptable at 0x00003e54. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_2 + 400))
            (param_2,*(undefined8 *)(&DAT_00001148 + param_1),0,*(code **)(*param_2 + 400));
  return;
}



// IGAccelCLContext::removeDataBufferFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelCLContext::removeDataBufferFromChannel
          (IGAccelCLContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00003e72. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)(this + 0x1148),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelCLContext::removeCurrentResourceFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelCLContext::removeCurrentResourceFromChannel
          (IGAccelCLContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00003e90. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)(this + 0x1148),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelCLContext::compactCurrentResources(IOAccelResource2*)

undefined8 IGAccelCLContext::compactCurrentResources(void)

{
  return 0;
}



// IGAccelCLContext::setCurrentTextureUnit(IGAccelResource*)

undefined4 __thiscall
IGAccelCLContext::setCurrentTextureUnit(IGAccelCLContext *this,undefined8 param_1)

{
  uint uVar1;
  
  uVar1 = *(uint *)(this + 0x1140);
  if ((ulong)uVar1 < 0x800) {
    *(uint *)(this + 0x1140) = uVar1 + 1;
    *(undefined8 *)(*(long *)(this + 0x5b8) + (ulong)uVar1 * 8) = param_1;
  }
  return CONCAT31((int3)(uVar1 >> 8),uVar1 < 0x800);
}



// IGAccelCLContext::unsetCurrentTextureUnit(unsigned int)

void __thiscall IGAccelCLContext::unsetCurrentTextureUnit(IGAccelCLContext *this,uint param_1)

{
  *(undefined8 *)(*(long *)(this + 0x5b8) + (ulong)param_1 * 8) = 0;
  return;
}



// IGAccelCLContext::mapTransferToGARTIfNeeded()

void IGAccelCLContext::mapTransferToGARTIfNeeded(void)

{
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::contains(unsigned long long const&) const

undefined8 __thiscall IGHashTable<>::contains(IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  undefined8 uVar4;
  void *pvVar5;
  
  lVar1 = *(long *)(this + 8);
  if (lVar1 != 0) {
    uVar2 = slotIndex(this,param_1);
    pvVar5 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
    if (pvVar5 != (void *)0x0) {
      do {
        iVar3 = _memcmp(pvVar5,param_1,8);
        uVar4 = CONCAT71((int7)(CONCAT44(extraout_var_00,iVar3) >> 8),iVar3 == 0);
        if (iVar3 == 0) {
          return uVar4;
        }
        pvVar5 = *(void **)((long)pvVar5 + 0x10);
      } while (pvVar5 != (void *)0x0);
      return uVar4;
    }
  }
  return 0;
}



// IOGraphicsAccelerator2::acceleratorUnlock()

void __thiscall IOGraphicsAccelerator2::acceleratorUnlock(IOGraphicsAccelerator2 *this)

{
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::add(unsigned long long const&, IGAccelMemoryMap* const&)

void __thiscall IGHashTable<>::add(IGHashTable<> *this,ulong *param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  undefined4 extraout_var;
  ulong *puVar8;
  
  if (*(long *)(this + 8) != 0) {
    uVar1 = *(ulong *)(*(long *)(this + 8) + 8);
    if ((((uVar1 < 0x4000) && (this[0x20] != (IGHashTable<>)0x0)) &&
        (uVar2 = *(ulong *)(this + 0x10), uVar2 != 0)) &&
       ((0x32 < ((uVar2 - *(long *)(this + 0x18)) * 100) / uVar2 &&
        (0x19 < (ulong)(*(long *)(this + 0x18) * 100) / uVar1)))) {
      resizeAndRehash(this,uVar1 * 2);
    }
    uVar7 = slotIndex(this,param_1);
    puVar8 = (ulong *)_IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::
                                         kalloc_type_view_14);
    if (puVar8 != (ulong *)0x0) {
      *puVar8 = *param_1;
      puVar8[1] = *param_2;
      puVar8[2] = 0;
      lVar6 = CONCAT44(extraout_var,uVar7) * 0x18;
      puVar3 = *(undefined8 **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + lVar6);
      puVar8[3] = (ulong)puVar3;
      *puVar3 = puVar8;
      lVar4 = *(long *)(*(long *)(this + 8) + 0x10);
      *(ulong **)(lVar4 + 8 + lVar6) = puVar8 + 2;
      lVar5 = *(long *)(lVar4 + 0x10 + lVar6);
      *(long *)(lVar4 + 0x10 + lVar6) = lVar5 + 1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) + (ulong)(lVar5 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
    }
  }
  return;
}



// IGAccelCLContext::bind_texture(IOAccelCommandStreamInfo&, unsigned int, unsigned int, bool,
// IGAccelResource**)

undefined8 __thiscall
IGAccelCLContext::bind_texture
          (IGAccelCLContext *this,long param_1,uint param_2,undefined8 param_4_00,char param_4,
          undefined8 *param_5)

{
  uint uVar1;
  long *plVar2;
  char cVar3;
  IGAccelCLContext IVar4;
  long lVar5;
  undefined8 uVar6;
  
  cVar3 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)param_2);
  if (cVar3 != '\0') {
    plVar2 = (long *)*param_5;
    if (*(char *)(param_1 + 0x3c) == '\0') {
      (**(code **)(*plVar2 + 400))(plVar2,*(undefined8 *)(this + 0x1148),param_4);
    }
    else {
      cVar3 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,plVar2,0,*(undefined8 *)(this + 0x1148),param_4,0);
      if (cVar3 == '\0') goto LAB_0000410b;
    }
    (**(code **)(*(long *)*param_5 + 0x20))();
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)*param_5);
    }
    uVar1 = *(uint *)(this + 0x1140);
    if ((ulong)uVar1 < 0x800) {
      uVar6 = *param_5;
      *(uint *)(this + 0x1140) = uVar1 + 1;
      *(undefined8 *)(*(long *)(this + 0x5b8) + (ulong)uVar1 * 8) = uVar6;
      lVar5 = IOAccelResource2::getStorageResource();
      plVar2 = *(long **)(*(long *)(this + 0x5a8) + 0x380);
      if (param_4 == '\0') {
        uVar6 = (**(code **)(*plVar2 + 0x1c8))
                          (plVar2,*(long *)(lVar5 + 0x38) + (ulong)*(byte *)(lVar5 + 0x16) * 0x40,
                           this + 0x1170,*(undefined4 *)(*(long *)(this + 0x1148) + 0x20));
        this[0x11b0] = SUB81(uVar6,0);
      }
      else {
        IVar4 = (IGAccelCLContext)
                (**(code **)(*plVar2 + 0x1c8))
                          (plVar2,*(long *)(lVar5 + 0x38) + (ulong)*(byte *)(lVar5 + 0x15) * 0x40);
        this[0x11b0] = IVar4;
        uVar6 = (**(code **)(*(long *)*param_5 + 0x168))((long *)*param_5,0,0);
      }
      return CONCAT71((int7)((ulong)uVar6 >> 8),1);
    }
  }
LAB_0000410b:
  *(undefined1 *)(param_1 + 0x3c) = 0;
  IOAccelContext2::setContextError((uint)this);
  return 0;
}



// IGAccelCLContext::MetaClass::~MetaClass()

void __thiscall IGAccelCLContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  
  *(undefined ***)this = &__const::~IGHashTable;
  clear(this);
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 != (IGVector<> *)0x0) {
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// IGVector<IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __thiscall IGVector<>::IGVector(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  if (param_1 != 0) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x18),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x18),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x18;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x18) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      *(ulong *)this = param_1;
    }
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::shrinkIfNeeded()

void __thiscall IGHashTable<>::shrinkIfNeeded(IGHashTable<> *this)

{
  ulong uVar1;
  
  if ((this[0x20] != (IGHashTable<>)0x0) && (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) {
    if ((((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 < 0xc) &&
       ((ulong)(*(long *)(this + 0x18) * 100) / *(ulong *)(*(long *)(this + 8) + 8) < 0xc)) {
      resizeAndRehash(this,*(ulong *)(*(long *)(this + 8) + 8) >> 1);
      return;
    }
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::resizeAndRehash(unsigned long)

bool __thiscall IGHashTable<>::resizeAndRehash(IGHashTable<> *this,ulong param_1)

{
  IGVector<> *this_00;
  long lVar1;
  IGVector<> *this_01;
  long lVar2;
  undefined8 *puVar3;
  ulong uVar4;
  long *plVar5;
  char *pcVar6;
  ulong *puVar7;
  ulong uVar8;
  long lVar9;
  
  this_00 = *(IGVector<> **)(this + 8);
  this_01 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_01,param_1);
  *(IGVector<> **)(this + 8) = this_01;
  if (this_01 != (IGVector<> *)0x0) {
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    lVar2 = *(long *)(this_01 + 8);
    if (lVar2 != 0) {
      puVar3 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar3 = 0;
        puVar3[1] = puVar3;
        puVar3[2] = 0;
        puVar3 = puVar3 + 3;
        lVar2 = lVar2 + -1;
      } while (lVar2 != 0);
    }
    lVar2 = *(long *)this_00;
    if (lVar2 != 0) {
      lVar9 = 0;
      do {
        for (puVar7 = *(ulong **)(*(long *)(this_00 + 0x10) + lVar9 * 0x18); puVar7 != (ulong *)0x0;
            puVar7 = (ulong *)puVar7[2]) {
          add(this,puVar7,puVar7 + 1);
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != lVar2);
    }
    uVar4 = *(ulong *)(this_00 + 8);
    if (uVar4 != 0) {
      lVar2 = *(long *)(this_00 + 0x10);
      uVar8 = 0;
      do {
        lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
        if (lVar9 != 0) {
          do {
            lVar1 = *(long *)(lVar9 + 0x10);
            if (lVar1 == 0) {
              plVar5 = *(long **)(lVar9 + 0x18);
              if (*plVar5 != lVar9) {
LAB_00004528:
                pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00004538:
                    // WARNING: Subroutine does not return
                _panic(pcVar6,lVar9,0x230,"IGHash.h",0x230);
              }
              *(long **)(lVar2 + 8 + uVar8 * 0x18) = plVar5;
            }
            else {
              if (*(long *)(lVar1 + 0x18) != lVar9 + 0x10) {
                pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
                goto LAB_00004538;
              }
              if (**(long **)(lVar9 + 0x18) != lVar9) goto LAB_00004528;
              *(long **)(lVar1 + 0x18) = *(long **)(lVar9 + 0x18);
              plVar5 = *(long **)(lVar9 + 0x18);
            }
            *plVar5 = lVar1;
            _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                             kalloc_type_view_19);
            lVar2 = *(long *)(this_00 + 0x10);
            lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
          } while (lVar9 != 0);
          uVar4 = *(ulong *)(this_00 + 8);
        }
        uVar8 = uVar8 + 1;
      } while (uVar8 < uVar4);
    }
    *(undefined8 *)this_00 = 0;
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
  }
  return this_01 != (IGVector<> *)0x0;
}



// IGVector<IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Iterator::next()

void __thiscall IGHashTable<>::Iterator::next(Iterator *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  ulong *puVar4;
  long *plVar5;
  
  if (this[0x20] == (Iterator)0x0) {
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
    if (*(ulong *)this == uVar3) {
      return;
    }
    if ((*(long *)(this + 8) != 0) &&
       (lVar1 = *(long *)(*(long *)(this + 8) + 0x10), *(long *)(this + 8) = lVar1, lVar1 != 0)) {
      return;
    }
    uVar2 = *(ulong *)this + 1;
    *(ulong *)this = uVar2;
  }
  else {
    uVar2 = 0;
    *(undefined8 *)this = 0;
    *(undefined8 *)(this + 8) = 0;
    this[0x20] = (Iterator)0x0;
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
  }
  if (uVar2 < uVar3) {
    plVar5 = (long *)(puVar4[2] + uVar2 * 0x18 + 0x10);
    do {
      uVar2 = uVar2 + 1;
      if (*plVar5 != 0) {
        *(long *)(this + 8) = plVar5[-2];
        return;
      }
      *(ulong *)this = uVar2;
      plVar5 = plVar5 + 3;
    } while (uVar2 != uVar3);
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::slotIndex(unsigned long long const&) const

uint __thiscall IGHashTable<>::slotIndex(IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  ulong uVar2;
  byte bVar3;
  ulong uVar4;
  ulong uVar5;
  
  lVar1 = 0;
  if (*(ulong *)(*(long *)(this + 8) + 8) != 0) {
    for (; (*(ulong *)(*(long *)(this + 8) + 8) >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
    }
  }
  uVar5 = *param_1;
  uVar2 = uVar5 >> 0x38 | (uVar5 & 0xff000000000000) >> 0x28 | (uVar5 & 0xff0000000000) >> 0x18;
  uVar4 = POPCOUNT(uVar5) << 0x3f |
          uVar2 | (uVar5 & 0xff00000000) >> 8 | (uVar5 & 0xff000000) << 8 |
          (uVar5 & 0xff0000) << 0x18 | (uVar5 & 0xff00) << 0x28 | uVar5 << 0x38;
  bVar3 = (byte)lVar1;
  uVar5 = uVar4 >> 3 ^ uVar5 << 0x3b ^ uVar5 << 0x17 ^ uVar4 >> 0x25 ^
          ((((uVar5 >> 0x38) << 0x39 | uVar5 >> 0x25) + (uVar2 << 0x2f ^ uVar5 >> 0xb)) -
          (uVar4 >> 0x15 ^ uVar5 * -0x20)) + (-uVar4 >> 0xb ^ uVar5 << 0x29 ^ 0xffffffffffffffc5);
  return ((uint)uVar5 ^ (uint)(uVar5 >> (bVar3 & 0x3f)) ^ (int)(uVar5 >> (-bVar3 & 0x3f)) * 0x3df) &
         ~(-1 << (bVar3 & 0x1f));
}



void __GLOBAL__sub_I_IGAccelCLContext_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelCLContext::gMetaClass,"IGAccelCLContext",
             (OSMetaClass *)__got::gMetaClass,0x11b8);
  IGAccelCLContext::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelCLContext::gMetaClass);
  return;
}



// IGSpinLock::initialize()

void IGSpinLock::initialize(void)

{
  fGlobalLockGroupAttributes = _lck_grp_attr_alloc_init();
  fGlobalLockGroup = _lck_grp_alloc_init(fGlobalLockGroupName,fGlobalLockGroupAttributes);
  return;
}



// IGSpinLock::cleanup()

void IGSpinLock::cleanup(void)

{
  if (fGlobalLockGroup != 0) {
    _lck_grp_free();
    fGlobalLockGroup = 0;
  }
  if (fGlobalLockGroupAttributes != 0) {
    _lck_grp_attr_free();
    fGlobalLockGroupAttributes = 0;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSpinLock::withOptions(unsigned int, unsigned int)

long * __cdecl IGSpinLock::withOptions(undefined4 param_1,undefined4 param_2)

{
  long *plVar1;
  long lVar2;
  
  plVar1 = (long *)_IOMallocTypeImpl(operator_new);
  *(undefined4 *)(plVar1 + 2) = param_1;
  *(undefined4 *)((long)plVar1 + 0x14) = param_2;
  lVar2 = _lck_attr_alloc_init();
  plVar1[1] = lVar2;
  if (lVar2 == 0) {
    *plVar1 = 0;
  }
  else {
    _lck_attr_setdefault(lVar2);
    lVar2 = _lck_spin_alloc_init(fGlobalLockGroup,plVar1[1]);
    *plVar1 = lVar2;
    if (lVar2 != 0) {
      return plVar1;
    }
    if (plVar1[1] != 0) {
      _lck_attr_free();
    }
  }
  _IOFreeTypeImpl(operator_delete,plVar1);
  return (long *)0x0;
}



// IGAccel2DContext::MetaClass::MetaClass()

void __thiscall IGAccel2DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccel2DContext",(OSMetaClass *)__got::gMetaClass,0x1100);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccel2DContext::MetaClass::~MetaClass()

void __thiscall IGAccel2DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccel2DContext::IGAccel2DContext(OSMetaClass const*)

void __thiscall IGAccel2DContext::IGAccel2DContext(IGAccel2DContext *this,OSMetaClass *param_1)

{
  IOAccel2DContext2::IOAccel2DContext2((IOAccel2DContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccel2DContext;
  return;
}



// IGAccel2DContext::IGAccel2DContext(OSMetaClass const*)

void __thiscall IGAccel2DContext::IGAccel2DContext(IGAccel2DContext *this,OSMetaClass *param_1)

{
  IOAccel2DContext2::IOAccel2DContext2((IOAccel2DContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccel2DContext;
  return;
}



// IGAccel2DContext::~IGAccel2DContext()

void __thiscall IGAccel2DContext::~IGAccel2DContext(IGAccel2DContext *this)

{
  IOAccel2DContext2::~IOAccel2DContext2((IOAccel2DContext2 *)this);
  return;
}



// IGAccel2DContext::~IGAccel2DContext()

void __thiscall IGAccel2DContext::~IGAccel2DContext(IGAccel2DContext *this)

{
  IOAccel2DContext2::~IOAccel2DContext2((IOAccel2DContext2 *)this);
  return;
}



// IGAccel2DContext::~IGAccel2DContext()

void __thiscall IGAccel2DContext::~IGAccel2DContext(IGAccel2DContext *this)

{
  IOAccel2DContext2::~IOAccel2DContext2((IOAccel2DContext2 *)this);
  _OSObject_typed_operator_delete(&IGAccel2DContext_ktv,this,&DAT_00001100);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccel2DContext::operator delete(void*, unsigned long)

void __cdecl IGAccel2DContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccel2DContext_ktv,param_1,param_2);
  return;
}



// IGAccel2DContext::getMetaClass() const

undefined8 * IGAccel2DContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccel2DContext::MetaClass::MetaClass()

void __thiscall IGAccel2DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccel2DContext",(OSMetaClass *)__got::gMetaClass,0x1100);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccel2DContext::MetaClass::alloc() const

IOAccel2DContext2 * IGAccel2DContext::MetaClass::alloc(void)

{
  IOAccel2DContext2 *this;
  
  this = (IOAccel2DContext2 *)_OSObject_typed_operator_new(&IGAccel2DContext_ktv,&DAT_00001100);
  IOAccel2DContext2::IOAccel2DContext2(this,(OSMetaClass *)&IGAccel2DContext::gMetaClass);
  *(undefined ***)this = &__const::~IGAccel2DContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccel2DContext::operator new(unsigned long)

void * __thiscall IGAccel2DContext::operator_new(IGAccel2DContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccel2DContext_ktv,this);
  return pvVar1;
}



// IGAccel2DContext::IGAccel2DContext()

void __thiscall IGAccel2DContext::IGAccel2DContext(IGAccel2DContext *this)

{
  IOAccel2DContext2::IOAccel2DContext2((IOAccel2DContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccel2DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccel2DContext::IGAccel2DContext()

void __thiscall IGAccel2DContext::IGAccel2DContext(IGAccel2DContext *this)

{
  IOAccel2DContext2::IOAccel2DContext2((IOAccel2DContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccel2DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccel2DContext::contextStart()

void IGAccel2DContext::contextStart(void)

{
                    // WARNING: Could not recover jumptable at 0x000049fa. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f0))();
  return;
}



// IGAccel2DContext::contextStop()

void IGAccel2DContext::contextStop(void)

{
                    // WARNING: Could not recover jumptable at 0x00004a0c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f8))();
  return;
}



// IGAccel2DContext::blitCopy(IOAccelEvent*, IOAccelResource2*, IOAccelResource2*,
// IOAccel2DBlitRectStruc*, unsigned int)

void __thiscall
IGAccel2DContext::blitCopy
          (undefined8 param_1,ulong param_2_00,ulong param_3_00,ulong param_4_00,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,undefined8 param_10,
          IGAccelResource *param_11,IGAccelResource *param_12,char *param_13,char *param_14)

{
  uint *puVar1;
  IGAccelResource IVar2;
  short sVar3;
  void *this_00;
  IntelAccelerator *pIVar4;
  long *plVar5;
  IGAccelResource *pIVar6;
  IGAccelResource *pIVar7;
  undefined8 uVar8;
  long lVar9;
  float *pfVar10;
  IGAccelTask *pIVar11;
  ulong uVar12;
  long lVar13;
  ulong uVar14;
  char *pcVar15;
  ushort uVar16;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  float fVar17;
  float fVar18;
  long local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  uint local_188 [2];
  long local_180;
  undefined8 local_178;
  long local_170;
  ulong local_168;
  IGAccelResource *local_160;
  long local_158;
  undefined8 local_150;
  undefined8 local_148;
  uint local_140 [2];
  long local_138;
  undefined8 local_130;
  long local_128;
  ulong local_120;
  IGAccelResource *local_118;
  undefined8 local_110;
  undefined8 local_108;
  undefined1 local_100;
  uint local_fe;
  undefined4 local_f8;
  undefined8 local_f0;
  undefined1 local_e8;
  undefined8 local_e0;
  ulong local_d8;
  long local_d0;
  ulong local_c8;
  ulong local_c0;
  long local_b8;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  long *local_68;
  ulong local_60;
  ulong local_58;
  long local_50;
  uint local_44;
  IGAccelResource *local_40;
  undefined8 local_38;
  
  local_44 = (uint)param_14;
  puVar1 = (uint *)(*(long *)((long)this + 0x5a8) + 0xeb8);
  *puVar1 = *puVar1 | 0x4000;
  pcVar15 = param_13;
  local_68 = this;
  local_40 = param_12;
  local_38 = param_10;
  ___bzero(&local_1a0,0x138);
  IGVector<>::grow((IGVector<> *)&local_e0,4);
  local_c8 = 0;
  local_c0 = 0;
  local_b8 = 0;
  IGVector<>::grow((IGVector<> *)&local_c8,4);
  local_1a0 = 0;
  local_198 = 0;
  local_190 = 0;
  local_188[0] = 0;
  local_188[1] = 0;
  local_180 = 0;
  local_178 = 0;
  local_170 = 0;
  local_160 = (IGAccelResource *)0x0;
  local_168 = 0x100000000;
  local_158 = 0;
  local_150 = 0;
  local_148 = 0;
  local_140[0] = 0;
  local_140[1] = 0;
  local_138 = 0;
  local_130 = 0;
  local_128 = 0;
  local_118 = (IGAccelResource *)0x0;
  local_120 = 0x100000000;
  local_110 = 0;
  local_108 = 0;
  local_fe = 0;
  local_100 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  local_c8 = 0;
  local_98 = 0;
  local_90 = 0;
  local_88 = 0;
  local_80 = 0;
  local_78 = 0;
  local_70 = 0;
  AddSrcResourceEvents((IGVector<> *)&local_e0,(long)param_11);
  pIVar6 = (IGAccelResource *)IOAccelResource2::getStorageResource();
  if (pIVar6 != param_11) {
    AddSrcResourceEvents((IGVector<> *)&local_e0,(long)pIVar6);
  }
  pIVar6 = local_40;
  AddDstResourceEvents((IGVector<> *)&local_e0,(long)local_40);
  pIVar7 = (IGAccelResource *)IOAccelResource2::getStorageResource();
  if (pIVar7 != pIVar6) {
    AddDstResourceEvents((IGVector<> *)&local_e0,(long)pIVar7);
  }
  if ((local_c8 != local_c0) ||
     (uVar8 = IGVector<>::grow((IGVector<> *)&local_c8,local_c8 * 2), (char)uVar8 != '\0')) {
    *(undefined8 *)(local_b8 + local_c8 * 8) = local_38;
    local_c8 = local_c8 + 1;
  }
  IVar2 = param_11[0xd8];
  local_38 = CONCAT71(local_38._1_7_,IVar2);
  if ((byte)IVar2 < 8) {
    if (IVar2 == (IGAccelResource)0x1) {
      uVar16 = 0x140;
      goto LAB_00004c06;
    }
    if (IVar2 == (IGAccelResource)0x4) {
      uVar16 = 0xc0;
      goto LAB_00004c06;
    }
  }
  else {
    if (IVar2 == (IGAccelResource)0x10) {
      uVar16 = 0x187;
      goto LAB_00004c06;
    }
    if (IVar2 == (IGAccelResource)0x8) {
      uVar16 = 0x186;
      goto LAB_00004c06;
    }
  }
  uVar16 = 0x102;
LAB_00004c06:
  local_1a0 = (**(code **)(**(long **)(param_11 + 0x40) + 0x128))();
  lVar9 = *(long *)(param_11 + 0xb8);
  if (lVar9 == 0) {
    lVar9 = *(long *)(param_11 + 0xc0);
  }
  local_198 = CONCAT44(local_198._4_4_,(int)lVar9);
  lVar9 = IOAccelResource2::getStorageResource();
  local_198._0_5_ = CONCAT14(*(undefined1 *)(lVar9 + 0x194),(undefined4)local_198);
  local_190 = (ulong)CONCAT24(*(undefined2 *)(param_11 + 0xb0),(undefined4)local_190);
  local_188[0] = (uint)*(ushort *)(param_11 + 0xb2);
  local_198 = CONCAT26(uVar16,(undefined6)local_198);
  local_158 = (**(code **)(**(long **)(pIVar6 + 0x40) + 0x128))();
  lVar9 = *(long *)(pIVar6 + 0xb8);
  if (lVar9 == 0) {
    lVar9 = *(long *)(pIVar6 + 0xc0);
  }
  local_150 = CONCAT44(local_150._4_4_,(int)lVar9);
  lVar9 = IOAccelResource2::getStorageResource();
  local_150._0_5_ = CONCAT14(*(undefined1 *)(lVar9 + 0x194),(undefined4)local_150);
  local_148 = (ulong)CONCAT24(*(undefined2 *)(pIVar6 + 0xb0),(undefined4)local_148);
  local_140[0] = (uint)*(ushort *)(pIVar6 + 0xb2);
  local_150 = CONCAT26(uVar16,(undefined6)local_150);
  IGAccelResource::getBufferWidthHeight
            (param_11,(uint *)((long)&local_190 + 4),local_188,(uint)uVar16);
  IGAccelResource::getBufferWidthHeight
            (pIVar6,(uint *)((long)&local_148 + 4),local_140,(uint)uVar16);
  local_100 = (undefined1)local_38;
  local_fe = local_fe & 0xfffffff8;
  local_190 = CONCAT44(local_190._4_4_,0x23);
  local_148 = local_148 & 0xffffffff00000000;
  local_118 = pIVar6;
  local_160 = param_11;
  lVar9 = IOAccelResource2::getStorageResource();
  if ((local_160 != (IGAccelResource *)0x0) && (1 < *(byte *)(lVar9 + 0x220))) {
    local_168 = local_168 | 0x10000000000;
    if ((*(byte *)(lVar9 + 0x221) & 4) == 0) {
      local_170 = 0;
    }
    else {
      local_170 = (ulong)*(uint *)(lVar9 + 0x1d0) + local_1a0;
    }
    local_180 = local_1a0 + (ulong)*(uint *)(lVar9 + 0x1c0);
    local_178 = CONCAT44(local_178._4_4_,*(undefined4 *)(lVar9 + 0x1c4));
  }
  local_118 = local_40;
  lVar9 = IOAccelResource2::getStorageResource();
  if ((local_118 != (IGAccelResource *)0x0) && (1 < *(byte *)(lVar9 + 0x220))) {
    local_120 = local_120 | 0x10000000000;
    if ((*(byte *)(lVar9 + 0x221) & 4) == 0) {
      local_128 = 0;
    }
    else {
      local_128 = (ulong)*(uint *)(lVar9 + 0x1d0) + local_158;
    }
    local_138 = local_158 + (ulong)*(uint *)(lVar9 + 0x1c0);
    local_130 = CONCAT44(local_130._4_4_,*(undefined4 *)(lVar9 + 0x1c4));
  }
  local_50 = 0;
  local_58 = 0;
  local_60 = 0;
  if ((param_13 != (char *)0x0) && (local_44 != 0)) {
    uVar14 = (ulong)local_44;
    lVar9 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       uVar14 << 5);
    if (lVar9 != 0) {
      uVar12 = 1;
      if (1 < uVar14) {
        uVar12 = uVar14;
      }
      pfVar10 = (float *)(lVar9 + 0x1c);
      lVar13 = 0;
      do {
        sVar3 = *(short *)(param_13 + lVar13 + 2);
        fVar17 = (float)(int)*(short *)(param_13 + lVar13 + 8);
        param_3_00 = (ulong)(uint)fVar17;
        fVar18 = (float)(int)*(short *)(param_13 + lVar13 + 10);
        param_4_00 = (ulong)(uint)fVar18;
        pfVar10[-7] = (float)(int)*(short *)(param_13 + lVar13);
        pfVar10[-6] = (float)(int)sVar3;
        pfVar10[-5] = fVar17;
        pfVar10[-4] = fVar18;
        sVar3 = *(short *)(param_13 + lVar13 + 6);
        param_2_00 = (ulong)(uint)(float)(int)sVar3;
        pfVar10[-3] = (float)(int)*(short *)(param_13 + lVar13 + 4);
        pfVar10[-2] = (float)(int)sVar3;
        pfVar10[-1] = fVar17;
        *pfVar10 = fVar18;
        lVar13 = lVar13 + 0xc;
        pfVar10 = pfVar10 + 8;
        local_60 = uVar14;
        local_58 = uVar14;
        local_50 = lVar9;
      } while (uVar12 * 0xc != lVar13);
    }
  }
  plVar5 = local_68;
  this_00 = (void *)local_68[0xb5];
  lVar9 = local_68[0xb8];
  pIVar11 = (IGAccelTask *)(**(code **)(*local_68 + 0x968))(local_68);
  IntelAccelerator::submitPendingWaitIfNeeded
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2_00,param_3_00,param_4_00,param_5,
             param_6,param_7,param_8,this_00,lVar9,(long)local_40,pIVar11,pcVar15,param_14);
  pIVar4 = (IntelAccelerator *)plVar5[0xb5];
  pIVar11 = (IGAccelTask *)(**(code **)(*plVar5 + 0x968))(plVar5);
  IntelAccelerator::submitBlit
            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2_00,param_3_00,param_4_00,
             param_5,param_6,param_7,param_8,pIVar4,&local_1a0,&local_60,pIVar11,0,param_14);
  *(uint *)(plVar5[0xb5] + 0xeb8) = *(uint *)(plVar5[0xb5] + 0xeb8) & 0xffffbfff;
  if (local_50 != 0) {
    lVar9 = local_58 << 5;
    if (lVar9 < 0) {
      lVar9 = -0x8000000000000000;
    }
    if (local_58 >> 0x3b != 0) {
      lVar9 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_50,lVar9);
  }
  if (local_b8 != 0) {
    lVar9 = local_c0 * 8;
    if (lVar9 < 0) {
      lVar9 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_c0) {
      lVar9 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_b8,lVar9);
  }
  if (local_d0 != 0) {
    lVar9 = local_d8 * 8;
    if (lVar9 < 0) {
      lVar9 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_d8) {
      lVar9 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_d0,lVar9);
  }
  return;
}



// IGAccel2DContext::blitFill(IOAccelEvent*, unsigned int, IOAccelResource2*,
// IOAccel2DBlitRectStruc*, unsigned int)

void __thiscall
IGAccel2DContext::blitFill
          (undefined8 param_1,ulong param_2_00,ulong param_3_00,ulong param_4_00,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,undefined8 param_10,
          undefined4 param_11,OSMetaClassBase *param_12,char *param_13,char *param_14)

{
  uint *puVar1;
  byte bVar2;
  short sVar3;
  short sVar4;
  short sVar5;
  void *pvVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  undefined8 uVar10;
  long lVar11;
  float *pfVar12;
  IGAccelTask *pIVar13;
  ulong uVar14;
  undefined2 uVar15;
  char *pcVar16;
  ulong uVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 local_198;
  undefined8 local_190;
  undefined8 local_188;
  undefined8 local_180;
  undefined8 local_178;
  undefined8 local_170;
  undefined8 local_168;
  undefined8 local_160;
  undefined8 local_158;
  long local_150;
  undefined8 local_148;
  long local_140;
  undefined8 local_138;
  long local_130;
  undefined8 local_128;
  long local_120;
  ulong local_118;
  long local_110;
  undefined8 local_108;
  undefined8 local_100;
  byte local_f8;
  uint local_f6;
  undefined4 local_f0;
  undefined8 local_e8;
  undefined1 local_e0;
  undefined8 local_d8;
  ulong local_d0;
  long local_c8;
  ulong local_c0;
  ulong local_b8;
  long local_b0;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  long *local_60;
  undefined8 local_58;
  ulong local_50;
  ulong local_48;
  long local_40;
  uint local_38;
  undefined4 local_34;
  
  local_38 = (uint)param_14;
  pcVar16 = param_13;
  local_58 = param_10;
  local_34 = param_11;
  lVar8 = OSMetaClassBase::safeMetaCast(param_12,(OSMetaClass *)&IGAccelResource::gMetaClass);
  puVar1 = (uint *)(*(long *)((long)this + 0x5a8) + 0xeb8);
  *puVar1 = *puVar1 | 0x8000;
  local_60 = this;
  ___bzero(&local_198,0x138);
  IGVector<>::grow((IGVector<> *)&local_d8,4);
  local_c0 = 0;
  local_b8 = 0;
  local_b0 = 0;
  IGVector<>::grow((IGVector<> *)&local_c0,4);
  local_198 = 0;
  local_190 = 0;
  local_188 = 0;
  local_180 = 0;
  local_178 = 0;
  local_170 = 0;
  local_168 = 0;
  local_158 = 0;
  local_160 = 0x100000000;
  local_150 = 0;
  local_148 = 0;
  local_140 = 0;
  local_138 = 0;
  local_130 = 0;
  local_128 = 0;
  local_120 = 0;
  local_110 = 0;
  local_118 = 0x100000000;
  local_108 = 0;
  local_100 = 0;
  local_f6 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  local_d8 = 0;
  local_c0 = 0;
  local_90 = 0;
  local_88 = 0;
  local_80 = 0;
  local_78 = 0;
  local_70 = 0;
  local_68 = 0;
  AddDstResourceEvents((IGVector<> *)&local_d8,lVar8);
  lVar9 = IOAccelResource2::getStorageResource();
  if (lVar9 != lVar8) {
    AddDstResourceEvents((IGVector<> *)&local_d8,lVar9);
  }
  if ((local_c0 != local_b8) ||
     (uVar10 = IGVector<>::grow((IGVector<> *)&local_c0,local_c0 * 2), (char)uVar10 != '\0')) {
    *(undefined8 *)(local_b0 + local_c0 * 8) = local_58;
    local_c0 = local_c0 + 1;
  }
  bVar2 = *(byte *)(lVar8 + 0xd8);
  if (bVar2 < 8) {
    if (bVar2 == 1) {
      uVar15 = 0x140;
      goto LAB_000051fb;
    }
    if (bVar2 == 4) {
      uVar15 = 0xc0;
      goto LAB_000051fb;
    }
  }
  else {
    if (bVar2 == 0x10) {
      uVar15 = 0x187;
      goto LAB_000051fb;
    }
    if (bVar2 == 8) {
      uVar15 = 0x186;
      goto LAB_000051fb;
    }
  }
  uVar15 = 0x102;
LAB_000051fb:
  lVar11 = (**(code **)(**(long **)(lVar8 + 0x40) + 0x128))();
  lVar9 = *(long *)(lVar8 + 0xb8);
  if (lVar9 == 0) {
    lVar9 = *(long *)(lVar8 + 0xc0);
  }
  local_148 = CONCAT44(local_148._4_4_,(int)lVar9);
  local_150 = lVar11;
  lVar9 = IOAccelResource2::getStorageResource();
  local_148._0_5_ = CONCAT14(*(undefined1 *)(lVar9 + 0x194),(undefined4)local_148);
  local_138 = CONCAT44(local_138._4_4_,(uint)*(ushort *)(lVar8 + 0xb2));
  local_148 = CONCAT26(uVar15,(undefined6)local_148);
  local_f0 = local_34;
  local_f6 = local_f6 & 0xfffffff8 | 3;
  local_140 = (ulong)*(ushort *)(lVar8 + 0xb0) << 0x20;
  local_110 = lVar8;
  local_f8 = bVar2;
  lVar9 = IOAccelResource2::getStorageResource();
  if (1 < *(byte *)(lVar9 + 0x220)) {
    local_118 = local_118 | 0x10000000000;
    if ((*(byte *)(lVar9 + 0x221) & 4) == 0) {
      local_120 = 0;
    }
    else {
      local_120 = (ulong)*(uint *)(lVar9 + 0x1d0) + lVar11;
    }
    local_130 = lVar11 + (ulong)*(uint *)(lVar9 + 0x1c0);
    local_128 = CONCAT44(local_128._4_4_,*(undefined4 *)(lVar9 + 0x1c4));
  }
  local_40 = 0;
  local_48 = 0;
  local_50 = 0;
  if ((param_13 != (char *)0x0) && (local_38 != 0)) {
    uVar17 = (ulong)local_38;
    lVar9 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<_blit_rect>::allocate(unsigned_long)::
                        kalloc_type_view_24,uVar17 << 4);
    if (lVar9 != 0) {
      uVar14 = 1;
      if (1 < uVar17) {
        uVar14 = uVar17;
      }
      pfVar12 = (float *)(lVar9 + 0xc);
      lVar11 = 0;
      do {
        sVar3 = *(short *)(param_13 + lVar11 + 6);
        param_2_00 = (ulong)(uint)(float)(int)sVar3;
        sVar4 = *(short *)(param_13 + lVar11 + 8);
        param_3_00 = (ulong)(uint)(float)(int)sVar4;
        sVar5 = *(short *)(param_13 + lVar11 + 10);
        param_4_00 = (ulong)(uint)(float)(int)sVar5;
        pfVar12[-3] = (float)(int)*(short *)(param_13 + lVar11 + 4);
        pfVar12[-2] = (float)(int)sVar3;
        pfVar12[-1] = (float)(int)sVar4;
        *pfVar12 = (float)(int)sVar5;
        lVar11 = lVar11 + 0xc;
        pfVar12 = pfVar12 + 4;
        local_50 = uVar17;
        local_48 = uVar17;
        local_40 = lVar9;
      } while (uVar14 * 0xc != lVar11);
    }
  }
  plVar7 = local_60;
  pvVar6 = (void *)local_60[0xb5];
  lVar9 = local_60[0xb8];
  pIVar13 = (IGAccelTask *)(**(code **)(*local_60 + 0x968))(local_60);
  IntelAccelerator::submitPendingWaitIfNeeded
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2_00,param_3_00,param_4_00,param_5,
             param_6,param_7,param_8,pvVar6,lVar9,lVar8,pIVar13,pcVar16,param_14);
  pvVar6 = (void *)plVar7[0xb5];
  pIVar13 = (IGAccelTask *)(**(code **)(*plVar7 + 0x968))(plVar7);
  IntelAccelerator::submitFill
            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2_00,param_3_00,param_4_00,
             param_5,param_6,param_7,param_8,pvVar6,(long)&local_198,&local_50,pIVar13,pcVar16,
             param_14);
  *(uint *)(plVar7[0xb5] + 0xeb8) = *(uint *)(plVar7[0xb5] + 0xeb8) & 0xffff7fff;
  if (local_40 != 0) {
    lVar8 = local_48 << 4;
    if (lVar8 < 0) {
      lVar8 = -0x8000000000000000;
    }
    if (local_48 >> 0x3c != 0) {
      lVar8 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<_blit_rect>::deallocate(_blit_rect*,unsigned_long)
                        ::kalloc_type_view_29,local_40,lVar8);
  }
  if (local_b0 != 0) {
    lVar8 = local_b8 * 8;
    if (lVar8 < 0) {
      lVar8 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_b8) {
      lVar8 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_b0,lVar8);
  }
  if (local_c8 != 0) {
    lVar8 = local_d0 * 8;
    if (lVar8 < 0) {
      lVar8 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_d0) {
      lVar8 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_c8,lVar8);
  }
  return;
}



// IGAccel2DContext::MetaClass::~MetaClass()

void __thiscall IGAccel2DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcResourceEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x16);
    lVar4 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)param_1;
    if (lVar3 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar3 * 2);
      if ((char)uVar2 != '\0') {
        lVar3 = *(long *)param_1;
        goto LAB_0000563b;
      }
    }
    else {
LAB_0000563b:
      *(long *)param_1 = lVar3 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar3 * 8) = (ulong)bVar1 * 0x40 + lVar4;
    }
    lVar4 = (ulong)*(byte *)(param_2 + 0x15) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    lVar4 = *(long *)(param_2 + 0x90);
  }
  lVar3 = *(long *)(param_1 + 0x18);
  if (lVar3 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
    if ((char)uVar2 == '\0') goto LAB_00005690;
    lVar3 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar3 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4;
LAB_00005690:
  lVar4 = *(long *)(param_2 + 0x40);
  if (lVar4 != 0) {
    lVar3 = *(long *)(param_1 + 0x18);
    if (lVar3 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar3 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar3 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4 + 0x38;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar5 = *(long *)param_1;
    if (lVar5 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar5 * 2);
      if ((char)uVar2 != '\0') {
        lVar5 = *(long *)param_1;
        goto LAB_00005719;
      }
    }
    else {
LAB_00005719:
      *(long *)param_1 = lVar5 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar4 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_00005755;
    }
    else {
LAB_00005755:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(param_1 + 0x18,lVar6 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_0000579e;
    }
    else {
LAB_0000579e:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_000057eb;
    lVar5 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_000057eb:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



void __GLOBAL__sub_I_IGAccel2DContext_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccel2DContext::gMetaClass,"IGAccel2DContext",
             (OSMetaClass *)__got::gMetaClass,0x1100);
  IGAccel2DContext::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccel2DContext::gMetaClass);
  return;
}



// IGAccelTask::MetaClass::MetaClass()

void __thiscall IGAccelTask::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGAccelTask",(OSMetaClass *)__got::gMetaClass,0x2d8)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelTask::MetaClass::~MetaClass()

void __thiscall IGAccelTask::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelTask::IGAccelTask(OSMetaClass const*)

void __thiscall IGAccelTask::IGAccelTask(IGAccelTask *this,OSMetaClass *param_1)

{
  IOAccelTask::IOAccelTask((IOAccelTask *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelTask;
  return;
}



// IGAccelTask::IGAccelTask(OSMetaClass const*)

void __thiscall IGAccelTask::IGAccelTask(IGAccelTask *this,OSMetaClass *param_1)

{
  IOAccelTask::IOAccelTask((IOAccelTask *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelTask;
  return;
}



// IGAccelTask::~IGAccelTask()

void __thiscall IGAccelTask::~IGAccelTask(IGAccelTask *this)

{
  IOAccelTask::~IOAccelTask((IOAccelTask *)this);
  return;
}



// IGAccelTask::~IGAccelTask()

void __thiscall IGAccelTask::~IGAccelTask(IGAccelTask *this)

{
  IOAccelTask::~IOAccelTask((IOAccelTask *)this);
  return;
}



// IGAccelTask::~IGAccelTask()

void __thiscall IGAccelTask::~IGAccelTask(IGAccelTask *this)

{
  IOAccelTask::~IOAccelTask((IOAccelTask *)this);
  _OSObject_typed_operator_delete(&IGAccelTask_ktv,this,0x2d8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTask::operator delete(void*, unsigned long)

void __cdecl IGAccelTask::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelTask_ktv,param_1,param_2);
  return;
}



// IGAccelTask::getMetaClass() const

undefined8 * IGAccelTask::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelTask::MetaClass::MetaClass()

void __thiscall IGAccelTask::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGAccelTask",(OSMetaClass *)__got::gMetaClass,0x2d8)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelTask::MetaClass::alloc() const

IOAccelTask * IGAccelTask::MetaClass::alloc(void)

{
  IOAccelTask *this;
  
  this = (IOAccelTask *)_OSObject_typed_operator_new(&IGAccelTask_ktv,0x2d8);
  IOAccelTask::IOAccelTask(this,(OSMetaClass *)&IGAccelTask::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTask;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelTask::operator new(unsigned long)

void * __thiscall IGAccelTask::operator_new(IGAccelTask *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelTask_ktv,this);
  return pvVar1;
}



// IGAccelTask::IGAccelTask()

void __thiscall IGAccelTask::IGAccelTask(IGAccelTask *this)

{
  IOAccelTask::IOAccelTask((IOAccelTask *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTask;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelTask::IGAccelTask()

void __thiscall IGAccelTask::IGAccelTask(IGAccelTask *this)

{
  IOAccelTask::IOAccelTask((IOAccelTask *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTask;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTask::withOptions(IntelAccelerator*)

IGAccelTask * __cdecl IGAccelTask::withOptions(IGAccelTask *param_1)

{
  IGAccelTask *this;
  undefined8 uVar1;
  
  this = (IGAccelTask *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGAccelTask *)0x0) {
    uVar1 = initWithOptions(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGAccelTask *)0x0;
}



// IGAccelTask::initWithOptions(IntelAccelerator*)

undefined8 __thiscall IGAccelTask::initWithOptions(IGAccelTask *this,IGAccelTask *param_1)

{
  IGAccelTask IVar1;
  char cVar2;
  long lVar3;
  undefined8 uVar4;
  IGHardwarePerProcessPageTable *pIVar5;
  ulong uVar6;
  long lVar7;
  IGAccelTask *pIVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  IGAccelTask *pIVar9;
  
  *(undefined8 *)(this + 0x260) = 0;
  *(undefined8 *)(this + 0x278) = 0;
  *(undefined8 *)(this + 0x280) = 0;
  *(undefined8 *)(this + 0x288) = 0;
  *(undefined8 *)(this + 0x290) = 0;
  *(undefined8 *)(this + 0x298) = 0;
  *(undefined8 *)(this + 0x2a0) = 0;
  lVar3 = _OSAddAtomic64(1,&fTaskCounter);
  *(long *)(this + 600) = lVar3;
  *(undefined8 *)(this + 0x2c0) = 0;
  *(undefined8 *)(this + 0x2c8) = 0;
  *(undefined8 *)(this + 0x268) = 0;
  *(IGAccelTask **)(this + 0x270) = this + 0x268;
  lVar7 = *(long *)(param_1 + 0x1290);
  this[0x2d1] = *(IGAccelTask *)(lVar7 + 0x101);
  if (lVar3 == 0) {
    IVar1 = (IGAccelTask)0x1;
    if ((*(IGAccelTask **)(param_1 + 0x150) == (IGAccelTask *)0x0) ||
       (*(IGAccelTask **)(param_1 + 0x150) == this)) goto LAB_00005b3a;
  }
  IVar1 = *(IGAccelTask *)(lVar7 + 0x100);
LAB_00005b3a:
  this[0x2d0] = IVar1;
  uVar4 = initAllocators(this,(long)param_1);
  if ((char)uVar4 != '\0') {
    pIVar8 = this + 0x2c0;
    pIVar9 = param_1;
    cVar2 = (**(code **)(__got::vtable + 0x128))(this,param_1,2);
    if (cVar2 != '\0') {
      uVar4 = extraout_RDX;
      if (((byte)param_1[0x11c1] & 1) != 0) {
        pIVar9 = this;
        pIVar5 = IGMemoryManager::newPageTableForTask
                           (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x10)),this);
        *(IGHardwarePerProcessPageTable **)(this + 0x260) = pIVar5;
        uVar4 = extraout_RDX_00;
        if (pIVar5 == (IGHardwarePerProcessPageTable *)0x0) {
          return 0;
        }
      }
      uVar6 = initManagedPageTableList((undefined8 *)this,pIVar9,uVar4,(undefined8 *)pIVar8);
      if ((char)uVar6 != '\0') {
        uVar6 = initStampAndScratchPages((long)this,pIVar9,extraout_RDX_01,pIVar8);
        if ((char)uVar6 != '\0') {
          lVar7 = 0;
          do {
            *(undefined4 *)(this + lVar7 * 4 + 0x2a8) = 0xffffffff;
            lVar7 = lVar7 + 1;
          } while (lVar7 != 4);
          this[0x2b8] = (IGAccelTask)0x2;
          return 1;
        }
        releaseManagedPageTableList(this);
      }
      if (*(long **)(this + 0x260) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x260) + 0x28))();
      }
      *(undefined8 *)(this + 0x260) = 0;
    }
  }
  return 0;
}



// IGAccelTask::stop()

void IGAccelTask::stop(void)

{
  fTaskCounter = (undefined *)0x0;
  return;
}



// IGAccelTask::initAllocators(IntelAccelerator*)

undefined8 __thiscall IGAccelTask::initAllocators(IGAccelTask *this,long param_1)

{
  IGMemoryManager *this_00;
  IGRangeAllocator *pIVar1;
  undefined8 uVar2;
  
  this_00 = *(IGMemoryManager **)(&DAT_00001290 + param_1);
  uVar2 = 0;
  *(undefined8 *)(this + 0x2c0) = 0;
  *(undefined8 *)(this + 0x2c8) = 0;
  pIVar1 = IGMemoryManager::newAddressRangeAllocatorForTask(this_00,this,0);
  *(IGRangeAllocator **)(this + 0x2c0) = pIVar1;
  if (pIVar1 != (IGRangeAllocator *)0x0) {
    pIVar1 = IGMemoryManager::newAddressRangeAllocatorForTask(this_00,this,1);
    *(IGRangeAllocator **)(this + 0x2c8) = pIVar1;
    uVar2 = 1;
    if (pIVar1 == (IGRangeAllocator *)0x0) {
      if (*(long **)(this + 0x2c0) == (long *)0x0) {
        *(undefined8 *)(this + 0x2c0) = 0;
      }
      else {
        (**(code **)(**(long **)(this + 0x2c0) + 0x28))();
        *(undefined8 *)(this + 0x2c0) = 0;
        if (*(long **)(this + 0x2c8) != (long *)0x0) {
          (**(code **)(**(long **)(this + 0x2c8) + 0x28))();
        }
      }
      *(undefined8 *)(this + 0x2c8) = 0;
      uVar2 = 0;
    }
  }
  return uVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTask::initManagedPageTableList()

ulong __cdecl
IGAccelTask::initManagedPageTableList
          (undefined8 *param_1,undefined8 param_2,undefined8 param_3,undefined8 *param_4)

{
  long lVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  ulong uVar6;
  
  if (((&DAT_000011c1)[param_1[2]] & 1) == 0) {
    puVar4 = (undefined8 *)0x0;
LAB_00005d17:
    lVar1 = param_1[2];
    if (((param_1[0x4b] == 0) &&
        ((param_4 = *(undefined8 **)(lVar1 + 0x150), param_4 == (undefined8 *)0x0 ||
         (param_4 == param_1)))) || (((&DAT_000011c1)[lVar1] & 1) == 0)) {
      uVar2 = *(undefined8 *)(*(long *)(&DAT_00001290 + lVar1) + 0x98);
      puVar5 = (undefined8 *)
               _IOMallocTypeImpl(&initManagedPageTableList()::$_0::operator()(IGHardwarePageTable*)
                                  ::kalloc_type_view_453);
      if (puVar5 == (undefined8 *)0x0) {
        if (puVar4 != (undefined8 *)0x0) {
          _IOFreeTypeImpl(&initManagedPageTableList()::$_1::
                           operator()(IGAccelTask::ManagedPageTableEntry*)::kalloc_type_view_464,
                          puVar4);
        }
        goto LAB_00005dc9;
      }
      *puVar5 = uVar2;
    }
    else {
      puVar5 = (undefined8 *)0x0;
    }
    if (puVar4 != (undefined8 *)0x0) {
      param_4 = puVar4 + 1;
      puVar4[1] = 0;
      puVar3 = (undefined8 *)param_1[0x4e];
      puVar4[2] = puVar3;
      *puVar3 = puVar4;
      param_1[0x4e] = param_4;
    }
    uVar6 = CONCAT71((int7)((ulong)param_4 >> 8),1);
    if (puVar5 != (undefined8 *)0x0) {
      puVar5[1] = 0;
      puVar4 = (undefined8 *)param_1[0x4e];
      puVar5[2] = puVar4;
      *puVar4 = puVar5;
      param_1[0x4e] = puVar5 + 1;
    }
  }
  else {
    uVar2 = param_1[0x4c];
    puVar4 = (undefined8 *)
             _IOMallocTypeImpl(&initManagedPageTableList()::$_0::operator()(IGHardwarePageTable*)::
                                kalloc_type_view_453);
    if (puVar4 != (undefined8 *)0x0) {
      *puVar4 = uVar2;
      goto LAB_00005d17;
    }
LAB_00005dc9:
    uVar6 = 0;
  }
  return uVar6 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTask::initStampAndScratchPages()

ulong __cdecl
IGAccelTask::initStampAndScratchPages
          (long param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4)

{
  long lVar1;
  IGMappedBuffer *pIVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(*(long *)(param_1 + 0x10) + 0x150);
  if ((*(long *)(param_1 + 600) == 0) && ((lVar1 == 0 || (lVar1 == param_1)))) {
    pIVar2 = IGMappedBuffer::withOptions(param_1,*(ulonglong *)__got::_page_size,1,0xfeedbeef);
    *(IGMappedBuffer **)(param_1 + 0x278) = pIVar2;
    param_4 = 0;
    pIVar2 = (IGMappedBuffer *)IGSharedMappedBuffer::withOptions(param_1,0x3000,3,0);
  }
  else {
    pIVar2 = IGMappedBuffer::cloneInTask(*(IGMappedBuffer **)(lVar1 + 0x278),param_1);
    *(IGMappedBuffer **)(param_1 + 0x278) = pIVar2;
    pIVar2 = IGSharedMappedBuffer::cloneInTask
                       (*(IGSharedMappedBuffer **)
                         (*(long *)(*(long *)(param_1 + 0x10) + 0x150) + 0x280),param_1);
  }
  *(IGMappedBuffer **)(param_1 + 0x280) = pIVar2;
  if (*(long **)(param_1 + 0x278) != (long *)0x0) {
    uVar3 = CONCAT71((int7)((ulong)param_4 >> 8),1);
    if (pIVar2 != (IGMappedBuffer *)0x0) goto LAB_00005eb6;
    (**(code **)(**(long **)(param_1 + 0x278) + 0x28))();
    pIVar2 = *(IGMappedBuffer **)(param_1 + 0x280);
  }
  *(undefined8 *)(param_1 + 0x278) = 0;
  if (pIVar2 != (IGMappedBuffer *)0x0) {
    (**(code **)(*(long *)pIVar2 + 0x28))(pIVar2);
  }
  *(undefined8 *)(param_1 + 0x280) = 0;
  uVar3 = 0;
LAB_00005eb6:
  return uVar3 & 0xffffffff;
}



// IGAccelTask::releaseManagedPageTableList()

void __thiscall IGAccelTask::releaseManagedPageTableList(IGAccelTask *this)

{
  long lVar1;
  long lVar2;
  long *plVar3;
  char *pcVar4;
  
  lVar1 = *(long *)(this + 0x268);
  do {
    if (lVar1 == 0) {
      return;
    }
    lVar2 = *(long *)(lVar1 + 8);
    if (lVar2 == 0) {
      plVar3 = *(long **)(lVar1 + 0x10);
      if (*plVar3 != lVar1) {
LAB_00005f2f:
        pcVar4 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00005f3f:
                    // WARNING: Subroutine does not return
        _panic(pcVar4,lVar1,0x205,"IGAccelTask.cpp",0x205);
      }
      *(long **)(this + 0x270) = plVar3;
    }
    else {
      if (*(long *)(lVar2 + 0x10) != lVar1 + 8) {
        pcVar4 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00005f3f;
      }
      if (**(long **)(lVar1 + 0x10) != lVar1) goto LAB_00005f2f;
      *(long **)(lVar2 + 0x10) = *(long **)(lVar1 + 0x10);
      plVar3 = *(long **)(lVar1 + 0x10);
    }
    *plVar3 = lVar2;
    _IOFreeTypeImpl(&releaseManagedPageTableList()::kalloc_type_view_518);
    lVar1 = *(long *)(this + 0x268);
  } while( true );
}



// IGAccelTask::free()

void __thiscall IGAccelTask::free(IGAccelTask *this,void *param_1)

{
  IGScheduler::releaseSemaphoreWaitBuffers
            (*(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10)),(long)this);
  if (*(long **)(this + 0x278) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x278) + 0x28))();
  }
  *(undefined8 *)(this + 0x278) = 0;
  if (*(long **)(this + 0x280) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x280) + 0x28))();
  }
  *(undefined8 *)(this + 0x280) = 0;
  if (*(long **)(this + 0x260) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x260) + 0x28))();
  }
  *(undefined8 *)(this + 0x260) = 0;
  releaseManagedPageTableList(this);
  if (*(long **)(this + 0x2c0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x2c0) + 0x28))();
  }
  *(undefined8 *)(this + 0x2c0) = 0;
  if (*(long **)(this + 0x2c8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x2c8) + 0x28))();
  }
  *(undefined8 *)(this + 0x2c8) = 0;
                    // WARNING: Could not recover jumptable at 0x0000601d. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelTask::releaseAllocators()

void __thiscall IGAccelTask::releaseAllocators(IGAccelTask *this)

{
  if (*(long **)(this + 0x2c0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x2c0) + 0x28))();
  }
  *(undefined8 *)(this + 0x2c0) = 0;
  if (*(long **)(this + 0x2c8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x2c8) + 0x28))();
  }
  *(undefined8 *)(this + 0x2c8) = 0;
  return;
}



// IGAccelTask::release() const

void __thiscall IGAccelTask::release(IGAccelTask *this)

{
  int iVar1;
  
  iVar1 = (**(code **)(*(long *)this + 0x18))();
  if ((iVar1 == 1) && (((byte)this[0x60] & 1) == 0)) {
    if (*(IGHardwareContext **)(this + 0x298) != (IGHardwareContext *)0x0) {
      IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x298),(long)(this + 0x20));
      (**(code **)(**(long **)(this + 0x298) + 0x28))();
      *(undefined8 *)(this + 0x298) = 0;
    }
    if (*(IGHardwareContext **)(this + 0x2a0) != (IGHardwareContext *)0x0) {
      IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x2a0),(long)(this + 0x20));
      (**(code **)(**(long **)(this + 0x2a0) + 0x28))();
      *(undefined8 *)(this + 0x2a0) = 0;
    }
    if (*(IGHardwareContext **)(this + 0x290) != (IGHardwareContext *)0x0) {
      IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x290),(long)(this + 0x20));
      (**(code **)(**(long **)(this + 0x290) + 0x28))();
      *(undefined8 *)(this + 0x290) = 0;
    }
    if (*(IGHardwareContext **)(this + 0x288) != (IGHardwareContext *)0x0) {
      IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x288),(long)(this + 0x20));
      (**(code **)(**(long **)(this + 0x288) + 0x28))();
      *(undefined8 *)(this + 0x288) = 0;
    }
  }
                    // WARNING: Could not recover jumptable at 0x00006154. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x38))(this);
  return;
}



// IGAccelTask::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall IGAccelTask::describeDriverAllocations(IGAccelTask *this,IOAccelMemory *param_1)

{
  long *plVar1;
  undefined4 uVar2;
  char *pcVar3;
  undefined8 uVar4;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  (**(code **)(__got::vtable + 0x168))();
  local_40 = 0;
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  local_70 = 0;
  local_78 = 0;
  local_80 = 0;
  local_88 = 0;
  local_90 = 0;
  local_98 = 0;
  local_a0 = 0;
  local_a8 = 0;
  local_b0 = 0;
  local_b8 = 0;
  uVar2 = IOAccelTask::getProcessIDAndName((char *)this,(int)&local_b8);
  if ((*(long *)(this + 600) == 0) &&
     ((*(IGAccelTask **)(*(long *)(this + 0x10) + 0x150) == (IGAccelTask *)0x0 ||
      (*(IGAccelTask **)(*(long *)(this + 0x10) + 0x150) == this)))) {
    pcVar3 = (char *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0x278));
    IOAccelAllocationInfo::addString(param_1,pcVar3);
    uVar4 = IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0x278));
    IOAccelAllocationInfo::addPID(param_1,(int)uVar4);
    pcVar3 = (char *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0x280));
    IOAccelAllocationInfo::addString(param_1,pcVar3);
    uVar4 = IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0x280));
    IOAccelAllocationInfo::addPID(param_1,(int)uVar4);
  }
  plVar1 = *(long **)(this + 0x260);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x150))(plVar1,param_1,uVar2);
  }
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelTask::isKernelGPUTask() const

undefined8 __thiscall IGAccelTask::isKernelGPUTask(IGAccelTask *this)

{
  IGAccelTask *pIVar1;
  undefined8 uVar2;
  
  if (*(long *)(this + 600) == 0) {
    pIVar1 = *(IGAccelTask **)(*(long *)(this + 0x10) + 0x150);
    uVar2 = CONCAT71((int7)((ulong)pIVar1 >> 8),pIVar1 == this || pIVar1 == (IGAccelTask *)0x0);
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



// IGAccelTask::getBlit2DContext(bool)

IGHardwareExtendedContext * __thiscall IGAccelTask::getBlit2DContext(IGAccelTask *this,char param_1)

{
  IGHardwareExtendedContext *this_00;
  ulong uVar1;
  
  this_00 = *(IGHardwareExtendedContext **)(this + 0x288);
  if ((this_00 == (IGHardwareExtendedContext *)0x0) && (param_1 != '\0')) {
    this_00 = (IGHardwareExtendedContext *)
              (**(code **)(IGHardwareBlit2DContext::gMetaClass + 0x88))();
    if (this_00 == (IGHardwareExtendedContext *)0x0) {
      this_00 = (IGHardwareExtendedContext *)0x0;
    }
    else {
      uVar1 = IGHardwareExtendedContext::initWithOptions
                        (this_00,(long)this,
                         (undefined8 *)&IGHardwareBlit2DContext::ExtendedCtxParams);
      if ((char)uVar1 == '\0') {
        this_00 = (IGHardwareExtendedContext *)0x0;
        _IOLog("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
        _kprintf("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
      }
    }
    *(IGHardwareExtendedContext **)(this + 0x288) = this_00;
  }
  return this_00;
}



// IGAccelTask::getBlit3DContext(bool)

IGHardwareExtendedContext * __thiscall IGAccelTask::getBlit3DContext(IGAccelTask *this,char param_1)

{
  IGHardwareExtendedContext *this_00;
  ulong uVar1;
  
  this_00 = *(IGHardwareExtendedContext **)(this + 0x290);
  if ((this_00 == (IGHardwareExtendedContext *)0x0) && (param_1 != '\0')) {
    this_00 = (IGHardwareExtendedContext *)
              (**(code **)(IGHardwareBlit3DContext::gMetaClass + 0x88))();
    if (this_00 == (IGHardwareExtendedContext *)0x0) {
      this_00 = (IGHardwareExtendedContext *)0x0;
    }
    else {
      uVar1 = IGHardwareExtendedContext::initWithOptions
                        (this_00,(long)this,
                         (undefined8 *)&IGHardwareBlit3DContext::ExtendedCtxParams);
      if ((char)uVar1 == '\0') {
        this_00 = (IGHardwareExtendedContext *)0x0;
        _IOLog("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
        _kprintf("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
      }
    }
    *(IGHardwareExtendedContext **)(this + 0x290) = this_00;
  }
  return this_00;
}



// IGAccelTask::getDepthResolveContext(bool)

void __thiscall IGAccelTask::getDepthResolveContext(IGAccelTask *this,char param_1)

{
  IGHardwareExtendedContext *pIVar1;
  
  if ((*(long *)(this + 0x298) == 0) && (param_1 != '\0')) {
    pIVar1 = ExtendedContextWithOptions<>((long)this);
    *(IGHardwareExtendedContext **)(this + 0x298) = pIVar1;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareResolveContext* ExtendedContextWithOptions<IGHardwareResolveContext>(IGAccelTask*)

IGHardwareExtendedContext * __cdecl ExtendedContextWithOptions<>(long param_1)

{
  IGHardwareExtendedContext *this;
  ulong uVar1;
  
  this = (IGHardwareExtendedContext *)(**(code **)(IGHardwareResolveContext::gMetaClass + 0x88))();
  if (this == (IGHardwareExtendedContext *)0x0) {
    this = (IGHardwareExtendedContext *)0x0;
  }
  else {
    uVar1 = IGHardwareExtendedContext::initWithOptions
                      (this,param_1,(undefined8 *)&IGHardwareResolveContext::ExtendedCtxParams);
    if ((char)uVar1 == '\0') {
      this = (IGHardwareExtendedContext *)0x0;
      _IOLog("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
      _kprintf("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
    }
  }
  return this;
}



// IGAccelTask::getColorResolveContext(bool)

void __thiscall IGAccelTask::getColorResolveContext(IGAccelTask *this,char param_1)

{
  IGHardwareExtendedContext *pIVar1;
  
  if ((*(long *)(this + 0x2a0) == 0) && (param_1 != '\0')) {
    pIVar1 = ExtendedContextWithOptions<>((long)this);
    *(IGHardwareExtendedContext **)(this + 0x2a0) = pIVar1;
  }
  return;
}



// IGAccelTask::getScratchGPUVirtualAddress() const

void __thiscall IGAccelTask::getScratchGPUVirtualAddress(IGAccelTask *this)

{
  IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x278));
  return;
}



// IGAccelTask::getStampGPUVirtualAddress() const

void __thiscall IGAccelTask::getStampGPUVirtualAddress(IGAccelTask *this)

{
  IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x280));
  return;
}



// IGAccelTask::getStamps() const

void __thiscall IGAccelTask::getStamps(IGAccelTask *this)

{
  IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x280));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTask::getStampAtIndex(unsigned long) const

undefined8 * __cdecl IGAccelTask::getStampAtIndex(undefined8 *param_1,long param_2,long param_3)

{
  undefined8 uVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_2 + 0x280));
  lVar3 = param_3 * 0x40;
  uVar1 = *(undefined8 *)(lVar2 + 8 + lVar3);
  *param_1 = *(undefined8 *)(lVar2 + lVar3);
  param_1[1] = uVar1;
  param_1[2] = *(undefined8 *)(lVar2 + 0x10 + lVar3);
  param_1[3] = *(undefined8 *)(lVar2 + 0x18 + lVar3);
  param_1[4] = *(undefined8 *)(lVar2 + 0x20 + lVar3);
  param_1[5] = *(undefined8 *)(lVar2 + 0x28 + lVar3);
  param_1[6] = *(undefined8 *)(lVar2 + 0x30 + lVar3);
  param_1[7] = *(undefined8 *)(lVar2 + 0x38 + lVar3);
  return param_1;
}



// IGAccelTask::getHardwareContextAddressMode() const

char __thiscall IGAccelTask::getHardwareContextAddressMode(IGAccelTask *this)

{
  return (this[0x2d1] == (IGAccelTask)0x0) * '\x02' + '\x01';
}



// IGAccelTask::isKernelGPUTask(IntelAccelerator*) const

undefined8 __thiscall IGAccelTask::isKernelGPUTask(IGAccelTask *this,long param_1)

{
  IGAccelTask *pIVar1;
  undefined8 uVar2;
  
  if (*(long *)(this + 600) == 0) {
    pIVar1 = *(IGAccelTask **)(param_1 + 0x150);
    uVar2 = CONCAT71((int7)((ulong)pIVar1 >> 8),pIVar1 == this || pIVar1 == (IGAccelTask *)0x0);
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



// IGAccelTask::releaseStampAndScratchPages()

void __thiscall IGAccelTask::releaseStampAndScratchPages(IGAccelTask *this)

{
  if (*(long **)(this + 0x278) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x278) + 0x28))();
  }
  *(undefined8 *)(this + 0x278) = 0;
  if (*(long **)(this + 0x280) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x280) + 0x28))();
  }
  *(undefined8 *)(this + 0x280) = 0;
  return;
}



// IGAccelTask::getRCSStampIndex(unsigned char) const

void __thiscall IGAccelTask::getRCSStampIndex(IGAccelTask *this,uint param_1)

{
  undefined4 uVar1;
  
  if (*(int *)(this + (ulong)param_1 * 4 + 0x2a8) == -1) {
    uVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x140))
                      (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),0,param_1 & 0xff);
    *(undefined4 *)(this + (ulong)param_1 * 4 + 0x2a8) = uVar1;
  }
  return;
}



// IGAccelTask::setRCSSchedPriority(unsigned char)

void __thiscall IGAccelTask::setRCSSchedPriority(IGAccelTask *this,IGAccelTask param_1)

{
  this[0x2b8] = param_1;
  return;
}



// IGAccelTask::MetaClass::~MetaClass()

void __thiscall IGAccelTask::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelTask_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelTask::gMetaClass,"IGAccelTask",(OSMetaClass *)__got::gMetaClass,
             0x2d8);
  IGAccelTask::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelTask::gMetaClass);
  return;
}



// IGTelemetryShared::init()

void __thiscall IGTelemetryShared::init(IGTelemetryShared *this)

{
  IGTelemetry::init((IGTelemetry *)this);
  *(undefined8 *)(this + 0x18) = *(undefined8 *)(*(long *)(this + 0xb0) + 0xe10);
  return;
}



// IGTelemetryShared::shutdown()

int IGTelemetryShared::shutdown(int param_1,int param_2)

{
  int in_EAX;
  
  return in_EAX;
}



// IGTelemetryShared::initPerProcessData()

void IGTelemetryShared::initPerProcessData(void)

{
  return;
}



// IGTelemetryShared::initPerfEvent(unsigned int, TelemetryItem*)

void IGTelemetryShared::initPerfEvent(void)

{
  return;
}



// IGTelemetryShared::operationGet(unsigned int, long long, unsigned long long*, unsigned long
// long*, int*)

undefined8 __thiscall
IGTelemetryShared::operationGet
          (IGTelemetryShared *this,ulong param_2_00,undefined8 param_2,undefined8 *param_3,
          undefined8 *param_4,undefined4 *param_5)

{
  long local_50;
  ulong local_48;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  undefined8 local_28;
  
  local_30 = 0;
  local_38 = 0;
  local_50 = 2;
  local_48 = param_2_00 & 0xffffffff;
  local_28 = 0xffffffffffffffff;
  local_40 = param_2;
  IGTelemetryManager::operation
            (*(IGTelemetryManager **)(*(long *)(this + 0xb0) + 0xf18),2,local_48,&local_50,0,0);
  if (param_5 != (undefined4 *)0x0) {
    *param_5 = (undefined4)local_28;
  }
  if (param_3 != (undefined8 *)0x0) {
    *param_3 = local_38;
  }
  if (param_4 != (undefined8 *)0x0) {
    *param_4 = local_30;
  }
  return local_40;
}



// IGTelemetryShared::operationSet(unsigned int, long long, unsigned long long, unsigned long long,
// int*)

undefined8 __thiscall
IGTelemetryShared::operationSet
          (IGTelemetryShared *this,uint param_1,undefined8 param_2,undefined8 param_3,
          undefined8 param_4,undefined4 *param_5)

{
  long local_40;
  ulong local_38;
  undefined8 local_30;
  undefined8 local_28;
  undefined8 local_20;
  undefined8 local_18;
  
  local_40 = 3;
  local_38 = (ulong)param_1;
  local_18 = 0xffffffffffffffff;
  local_30 = param_2;
  local_28 = param_3;
  local_20 = param_4;
  IGTelemetryManager::operation
            (*(IGTelemetryManager **)(*(long *)(this + 0xb0) + 0xf18),3,local_38,&local_40,0,0);
  if (param_5 != (undefined4 *)0x0) {
    *param_5 = (undefined4)local_18;
  }
  return local_30;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryShared::evalOperationReturnValue(TelemetryOperation*, int, int)

undefined8 __cdecl IGTelemetryShared::evalOperationReturnValue(undefined8 param_1,long param_2)

{
  return *(undefined8 *)(param_2 + 0x28);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryShared::emitSample(TelemetrySampleInfo*)

void __cdecl IGTelemetryShared::emitSample(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x000067ca. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x20))();
  return;
}



// IGTelemetryShared::emitSampleItem(unsigned int, int, char const*, unsigned long long)

void __thiscall
IGTelemetryShared::emitSampleItem
          (IGTelemetryShared *this,int param_1,int param_2,undefined8 param_3,uintptr_t param_4)

{
  if ((-1 < param_2) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(param_2 << 2 | param_1 << 9 | 0x85a40000,param_4,0,0,0,0);
      return;
    }
  }
  return;
}



// IGTelemetryShared::isSampleEnabledForOutput(TelemetrySampleInfo*)

undefined1 IGTelemetryShared::isSampleEnabledForOutput(void)

{
  return 1;
}



// IGTelemetryShared::fflush_tlm()

void IGTelemetryShared::fflush_tlm(void)

{
  return;
}



// IGAccelTraceStream::MetaClass::MetaClass()

void __thiscall IGAccelTraceStream::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelTraceStream",(OSMetaClass *)__got::gMetaClass,0xb0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelTraceStream::MetaClass::~MetaClass()

void __thiscall IGAccelTraceStream::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelTraceStream::IGAccelTraceStream(OSMetaClass const*)

void __thiscall
IGAccelTraceStream::IGAccelTraceStream(IGAccelTraceStream *this,OSMetaClass *param_1)

{
  IOAccelTraceStream2::IOAccelTraceStream2((IOAccelTraceStream2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelTraceStream;
  return;
}



// IGAccelTraceStream::IGAccelTraceStream(OSMetaClass const*)

void __thiscall
IGAccelTraceStream::IGAccelTraceStream(IGAccelTraceStream *this,OSMetaClass *param_1)

{
  IOAccelTraceStream2::IOAccelTraceStream2((IOAccelTraceStream2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelTraceStream;
  return;
}



// IGAccelTraceStream::~IGAccelTraceStream()

void __thiscall IGAccelTraceStream::~IGAccelTraceStream(IGAccelTraceStream *this)

{
  IOAccelTraceStream2::~IOAccelTraceStream2((IOAccelTraceStream2 *)this);
  return;
}



// IGAccelTraceStream::~IGAccelTraceStream()

void __thiscall IGAccelTraceStream::~IGAccelTraceStream(IGAccelTraceStream *this)

{
  IOAccelTraceStream2::~IOAccelTraceStream2((IOAccelTraceStream2 *)this);
  return;
}



// IGAccelTraceStream::~IGAccelTraceStream()

void __thiscall IGAccelTraceStream::~IGAccelTraceStream(IGAccelTraceStream *this)

{
  IOAccelTraceStream2::~IOAccelTraceStream2((IOAccelTraceStream2 *)this);
  _OSObject_typed_operator_delete(&IGAccelTraceStream_ktv,this,0xb0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTraceStream::operator delete(void*, unsigned long)

void __cdecl IGAccelTraceStream::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelTraceStream_ktv,param_1,param_2);
  return;
}



// IGAccelTraceStream::getMetaClass() const

undefined8 * IGAccelTraceStream::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelTraceStream::MetaClass::MetaClass()

void __thiscall IGAccelTraceStream::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelTraceStream",(OSMetaClass *)__got::gMetaClass,0xb0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelTraceStream::MetaClass::alloc() const

IOAccelTraceStream2 * IGAccelTraceStream::MetaClass::alloc(void)

{
  IOAccelTraceStream2 *this;
  
  this = (IOAccelTraceStream2 *)_OSObject_typed_operator_new(&IGAccelTraceStream_ktv,0xb0);
  IOAccelTraceStream2::IOAccelTraceStream2(this,(OSMetaClass *)&IGAccelTraceStream::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTraceStream;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelTraceStream::operator new(unsigned long)

void * __thiscall IGAccelTraceStream::operator_new(IGAccelTraceStream *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelTraceStream_ktv,this);
  return pvVar1;
}



// IGAccelTraceStream::IGAccelTraceStream()

void __thiscall IGAccelTraceStream::IGAccelTraceStream(IGAccelTraceStream *this)

{
  IOAccelTraceStream2::IOAccelTraceStream2((IOAccelTraceStream2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTraceStream;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelTraceStream::IGAccelTraceStream()

void __thiscall IGAccelTraceStream::IGAccelTraceStream(IGAccelTraceStream *this)

{
  IOAccelTraceStream2::IOAccelTraceStream2((IOAccelTraceStream2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelTraceStream;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelTraceStream::init(unsigned int, IntelAccelerator*)

undefined8 __thiscall
IGAccelTraceStream::init(IGAccelTraceStream *this,byte param_2_00,undefined8 param_2)

{
  undefined8 uVar1;
  
  *(undefined8 *)(this + 0x60) = param_2;
  this[0x68] = (IGAccelTraceStream)param_2_00;
  _snprintf((char *)(this + 0x69),0x32,"%s_%s",
            *(char **)((long)&PTR_s_RCS_0011cae5 + (ulong)param_2_00 * 0x79),"AppleIntelICLGraphics"
           );
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = 0;
  uVar1 = (**(code **)(__got::vtable + 0x98))(this);
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IGAccelTraceStream::turnOn()

void IGAccelTraceStream::turnOn(void)

{
  return;
}



// IGAccelTraceStream::turnOff()

void __thiscall IGAccelTraceStream::turnOff(IGAccelTraceStream *this)

{
                    // WARNING: Could not recover jumptable at 0x00006a8e. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x118))();
  return;
}



// IGAccelTraceStream::shutdown()

int __thiscall IGAccelTraceStream::shutdown(IGAccelTraceStream *this,int param_1,int param_2)

{
  int iVar1;
  
                    // WARNING: Could not recover jumptable at 0x00006a9c. Too many branches
                    // WARNING: Treating indirect jump as call
  iVar1 = (**(code **)(*(long *)this + 0x118))();
  return iVar1;
}



// IGAccelTraceStream::addEvent(unsigned int, unsigned long long, unsigned long long, unsigned long
// long, unsigned long long, unsigned long long)

ulong __thiscall
IGAccelTraceStream::addEvent
          (IGAccelTraceStream *this,uint param_1,long param_2,ulong param_3,ulong param_4,
          ulong param_5,ulong param_6)

{
  long lVar1;
  long lVar2;
  ulong arg2;
  uintptr_t arg2_00;
  
  lVar2 = *(long *)(*(long *)(this + 0x60) + 0xed8);
  arg2 = 0xffffffffffffffff;
  if (((lVar2 == 0) || (lVar1 = *(long *)(*(long *)(this + 0x60) + 0xed0), lVar1 == 0)) ||
     (arg2 = (lVar2 + param_2) - lVar1, _g_startingKDEBUG <= arg2)) {
    _g_nSecNow = _mach_absolute_time();
    lVar2 = arg2 - *(ulong *)(this + 0xa0);
    if (lVar2 < _g_nSecDeltaMin) {
      _g_nSecDeltaMin = lVar2;
    }
    if (_g_nSecDeltaMax < lVar2) {
      _g_nSecDeltaMax = lVar2;
    }
    _g_onEvent = _g_onEvent + 1;
    if (arg2 <= *(ulong *)(this + 0xa0)) {
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        _kernel_debug(0x85a0fffc,1,arg2,*(uintptr_t *)(this + 0xa0),
                      *(uintptr_t *)(this + 0xa0) - arg2,0);
      }
      arg2 = *(long *)(this + 0xa0) + 1;
      *(ulong *)(this + 0xa0) = arg2;
    }
    arg2_00 = arg2;
    if ((((long)_g_nSecNow < (long)arg2) && (arg2_00 = _g_nSecNow, _graphicsTracePointEnable != 0))
       && (dtHookTrace(), arg2_00 = _g_nSecNow, (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0))
    {
      _kernel_debug(0x85a0fffc,3,arg2,_g_nSecNow,0,0);
      arg2_00 = _g_nSecNow;
    }
    *(uintptr_t *)(this + 0xa0) = arg2_00;
    if (arg2_00 <= *(ulong *)(this + 0xa8)) {
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        _kernel_debug(0x85a0fffc,2,arg2_00,*(uintptr_t *)(this + 0xa8),0,0);
      }
      arg2_00 = *(long *)(this + 0xa8) + 1;
      *(uintptr_t *)(this + 0xa8) = arg2_00;
    }
    IOAccelTraceStream2::enter((uint)this,(ulong)param_1,arg2_00,param_3,param_4,param_5,param_6);
  }
  else {
    arg2_00 = 0;
  }
  return arg2_00;
}



// IGAccelTraceStream::flush()

void __thiscall IGAccelTraceStream::flush(IGAccelTraceStream *this)

{
  uint64_t uVar1;
  
  uVar1 = _mach_absolute_time();
  *(uint64_t *)(this + 0xa8) = uVar1;
  return;
}



// IGAccelTraceStreamManager::init(IntelAccelerator*)

void __thiscall IGAccelTraceStreamManager::init(IGAccelTraceStreamManager *this,long param_1)

{
  undefined8 *puVar1;
  code *pcVar2;
  long lVar3;
  undefined **ppuVar4;
  long lVar5;
  ulong local_38;
  
  *(long *)this = param_1;
  puVar1 = *(undefined8 **)(param_1 + 0xe10);
  *(undefined8 **)(this + 0xb0) = puVar1;
  if ((puVar1 == (undefined8 *)0x0) || ((*(ulong *)(&DAT_000011c0 + param_1) & 0x10000000) != 0)) {
    *(ulong *)(&DAT_000011c0 + param_1) = *(ulong *)(&DAT_000011c0 + param_1) | 0x10000000;
  }
  else {
    *puVar1 = 1;
    *(undefined4 *)((long)puVar1 + 0xc) = 0x7b;
    puVar1[0xd] = 0x10;
    puVar1[0xe] = 0x10;
    puVar1[0xf] = 0x10;
    puVar1[0x10] = 0;
    local_38 = 0;
    readFullTicTimestamps(this,&local_38,(uint64_t *)(this + 0xf8));
    *(ulong *)(this + 0xe8) = local_38;
    *(ulong *)(this + 0xf0) = (local_38 * 10000) / _g_timestampFreqPerDenominator;
    *(long *)(this + 0xe0) = *(long *)(this + 0xb0);
    if (*(long *)(this + 0xb0) != 0) {
      IGTimeConverter::gpuUpdateTimeTuple((IGTimeConverter *)(this + 0xb8),-1);
      IGTimeConverter::gpuUpdateTimeTuple((IGTimeConverter *)(this + 0xb8),0);
    }
    gpuReadFullTimeTuple(this,0,1);
    gpuReadFullTimeTuple(this,0,1);
    pcVar2 = *(code **)(__got::vtable + 0x98);
    ppuVar4 = &PTR_s_RCS_0011cae5;
    lVar5 = 0;
    do {
      if (*(long *)(this + lVar5 * 8 + 8) == 0) {
        lVar3 = (**(code **)(IGAccelTraceStream::gMetaClass + 0x88))
                          (&IGAccelTraceStream::gMetaClass);
        *(long *)(this + lVar5 * 8 + 8) = lVar3;
        *(undefined8 *)(lVar3 + 0x60) = *(undefined8 *)this;
        *(char *)(lVar3 + 0x68) = (char)lVar5;
        _snprintf((char *)(lVar3 + 0x69),0x32,"%s_%s",*ppuVar4,"AppleIntelICLGraphics");
        *(undefined8 *)(lVar3 + 0xa0) = 0;
        *(undefined8 *)(lVar3 + 0xa8) = 0;
        (*pcVar2)(lVar3);
      }
      lVar5 = lVar5 + 1;
      ppuVar4 = (undefined **)((long)ppuVar4 + 0x79);
    } while (lVar5 != 5);
  }
  return;
}



// IGAccelTraceStreamManager::readFullTicTimestamps(unsigned long long&, unsigned long long&)

void __thiscall
IGAccelTraceStreamManager::readFullTicTimestamps
          (IGAccelTraceStreamManager *this,ulong *param_1,uint64_t *param_2)

{
  int iVar1;
  ulong uVar2;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  undefined8 local_28;
  
  local_28 = 0;
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  gpuReadTimeTupleWithSampleUsageGPU(this,(long)&local_58,param_2);
  iVar1 = local_50._4_4_;
  if ((int)local_50 < 0) {
    iVar1 = local_58._4_4_;
  }
  if (local_58._4_4_ == local_50._4_4_) {
    iVar1 = local_58._4_4_;
  }
  uVar2 = IGTimeConverter::gpuGetFullTicsGivenRawTics
                    (CONCAT44(iVar1,(int)local_50),(long *)(*(long *)(this + 0xb0) + 0x68));
  *param_1 = uVar2;
  return;
}



// IGAccelTraceStreamManager::gpuReadFullTimeTuple(unsigned long long, TelemetryTimeTupleOption)

undefined8 __thiscall
IGAccelTraceStreamManager::gpuReadFullTimeTuple
          (IGAccelTraceStreamManager *this,long param_1,int param_2)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  undefined8 uVar5;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  uint64_t local_38;
  
  if (*(long *)(this + 0xb0) == 0) {
    uVar5 = 0;
  }
  else {
    uVar1 = *(uint *)(*(long *)(this + 0xb0) + 0x8c);
    local_38 = _mach_absolute_time();
    uVar5 = 0;
    if ((ulong)(param_1 + *(long *)(*(long *)(this + 0xb0) + 0x110 + (ulong)(uVar1 - 1 & 0xf) * 8))
        <= local_38) {
      local_40 = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      local_60 = 0;
      local_68 = 0;
      local_70 = 0;
      gpuReadTimeTupleWithSampleUsageGPU(this,(long)&local_70,&local_38);
      iVar3 = local_68._4_4_;
      if ((int)local_68 < 0) {
        iVar3 = local_70._4_4_;
      }
      if (local_70._4_4_ == local_68._4_4_) {
        iVar3 = local_70._4_4_;
      }
      uVar4 = IGTimeConverter::gpuGetFullTicsGivenRawTics
                        (CONCAT44(iVar3,(int)local_68),(long *)(*(long *)(this + 0xb0) + 0x68));
      lVar2 = *(long *)(this + 0xb0);
      *(ulong *)(lVar2 + 0x90 + (ulong)(uVar1 & 0xf) * 8) =
           (uVar4 * 10000) / _g_timestampFreqPerDenominator;
      *(uint64_t *)(lVar2 + 0x110 + (ulong)(uVar1 & 0xf) * 8) = local_38;
      *(uint *)(lVar2 + 0x8c) = uVar1 + 1;
      if (param_2 == 1) {
        IGTimeConverter::gpuUpdateTimeTuple((IGTimeConverter *)(this + 0xb8),0);
      }
      uVar5 = 1;
    }
  }
  return uVar5;
}



// IGAccelTraceStreamManager::turnOn()

void __thiscall IGAccelTraceStreamManager::turnOn(IGAccelTraceStreamManager *this)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  
  if (((&DAT_000011c3)[*(long *)this] & 0x10) == 0) {
    *(undefined4 *)(this + 0x30) = 1;
    if ((*(uint *)(*(long *)this + 0xc78) & 0x12) == 2) {
      resyncTimeTuples(this);
      IGPerfCounterConfig::configPerfcntForSQFull(*(long *)this);
    }
    puVar1 = __got::_kdebug_enable;
    iVar3 = 0;
    do {
      uVar2 = 0;
      do {
        if (_graphicsTracePointEnable != 0) {
          dtHookTrace();
          if ((*(uint *)puVar1 & 0xfffffff7) != 0) {
            _kernel_debug(iVar3 << 9 | uVar2 | 0x85a40000,0,0,0,0,0);
          }
        }
        uVar2 = uVar2 + 4;
      } while (uVar2 != 0x100);
      iVar3 = iVar3 + 1;
    } while (iVar3 != 9);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTraceStreamManager::resyncTimeTuples(TraceStreamCollectionChange)

void __cdecl IGAccelTraceStreamManager::resyncTimeTuples(IGAccelTraceStreamManager *param_1)

{
  long *plVar1;
  long lVar2;
  undefined1 auVar3 [16];
  uint64_t uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  uint uVar8;
  ulong uVar9;
  ulong uVar10;
  long lVar11;
  int iVar12;
  ulong local_40;
  uint64_t local_38;
  
  auVar3._8_8_ = 0;
  auVar3._0_8_ = _g_timestampFreqPerDenominator;
  uVar5 = SUB168((ZEXT816(0) << 0x40 | ZEXT816(0x9c400000000)) / auVar3,0);
  local_40 = 0;
  local_38 = 0;
  gpuReadFullTimeTuple((IGAccelTraceStreamManager *)(*(long *)param_1 + 0xe18),1000000000,1);
  readFullTicTimestamps(param_1,&local_40,&local_38);
  uVar4 = local_38;
  uVar10 = _g_timestampFreqPerDenominator;
  uVar6 = (local_40 * 10000) / _g_timestampFreqPerDenominator;
  uVar9 = 0xffffffffffffffff;
  if ((*(long *)(param_1 + 0xc0) != 0) && (*(long *)(param_1 + 0xb8) != 0)) {
    uVar9 = (*(long *)(param_1 + 0xc0) + uVar6) - *(long *)(param_1 + 0xb8);
  }
  lVar2 = *(long *)(param_1 + 0xf8);
  uVar7 = local_40;
  if (((uVar5 < local_38 - lVar2) || (uVar5 < uVar6 - *(long *)(param_1 + 0xf0))) &&
     (plVar1 = (long *)(*(long *)(*(long *)param_1 + 0xf18) + 0x260), *plVar1 = *plVar1 + 1,
     uVar9 <= local_38)) {
    uVar10 = ((local_38 - lVar2) * uVar10) / 10000 + *(long *)(param_1 + 0xe8);
    uVar8 = (uint)(uVar10 >> 0x20);
    uVar6 = (ulong)(uVar8 & 0xfffffff0);
    lVar2 = *(long *)(param_1 + 0xb0);
    plVar1 = (long *)(lVar2 + 0x68);
    lVar11 = 0;
    do {
      plVar1[lVar11] = uVar6;
      lVar11 = lVar11 + 1;
    } while (lVar11 != 4);
    plVar1[(uVar8 >> 2) + 2 & 3] = 0;
    uVar10 = uVar10 >> 0x22 & 3;
    if (uVar10 == 0) {
      *(ulong *)(lVar2 + 0x80) = uVar6 - 0x10;
    }
    else if ((int)uVar10 == 3) {
      *plVar1 = 0;
    }
    uVar7 = IGTimeConverter::gpuGetFullTicsGivenRawTics(local_40 & 0xfffffffff,plVar1);
    uVar6 = _g_timestampFreqPerDenominator;
    iVar12 = 0x10;
    do {
      gpuReadFullTimeTuple(param_1,0,1);
      iVar12 = iVar12 + -1;
    } while (iVar12 != 0);
    uVar6 = (uVar7 * 10000) / uVar6;
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
    _thread_block(0);
    gpuReadFullTimeTuple(param_1,0,1);
  }
  *(ulong *)(param_1 + 0xe8) = uVar7;
  *(ulong *)(param_1 + 0xf0) = uVar6;
  *(uint64_t *)(param_1 + 0xf8) = uVar4;
  return;
}



// IGAccelTraceStreamManager::turnOff()

void __thiscall IGAccelTraceStreamManager::turnOff(IGAccelTraceStreamManager *this)

{
  long lVar1;
  
  lVar1 = 1;
  do {
    if (*(long **)(this + lVar1 * 8) != (long *)0x0) {
      (**(code **)(**(long **)(this + lVar1 * 8) + 0x118))();
    }
    lVar1 = lVar1 + 1;
  } while (lVar1 != 6);
  *(undefined4 *)(this + 0x30) = 0;
  return;
}



// IGAccelTraceStreamManager::disableCollection(TraceStreamCollectionChange)

void __thiscall
IGAccelTraceStreamManager::disableCollection(IGAccelTraceStreamManager *this,int param_1)

{
  long lVar1;
  
  lVar1 = *(long *)this;
  if ((lVar1 != 0) && (((&DAT_000011c3)[lVar1] & 0x10) == 0)) {
    *(undefined8 *)(this + 0xa8) = 1;
    IGTelemetryManager::disableCollection(*(IGTelemetryManager **)(lVar1 + 0xf18));
    if (param_1 == 1) {
      resyncTimeTuples(this);
      return;
    }
  }
  return;
}



// IGAccelTraceStreamManager::enableCollection(TraceStreamCollectionChange)

void __thiscall
IGAccelTraceStreamManager::enableCollection(IGAccelTraceStreamManager *this,int param_1)

{
  if ((*(long *)(this + 0xb0) != 0) && (((&DAT_000011c3)[*(long *)this] & 0x10) == 0)) {
    IGTelemetryManager::enableCollection(*(IGTelemetryManager **)(*(long *)this + 0xf18));
    if (param_1 == 2) {
      resyncTimeTuples(this);
      if (*(int *)(this + 0x30) != 0) {
        IGPerfCounterConfig::configPerfcntForSQFull(*(long *)this);
      }
    }
    *(undefined8 *)(this + 0xa8) = 0;
  }
  return;
}



// IGAccelTraceStreamManager::shutdown()

int __thiscall
IGAccelTraceStreamManager::shutdown(IGAccelTraceStreamManager *this,int param_1,int param_2)

{
  int in_EAX;
  long lVar1;
  
  lVar1 = 1;
  do {
    if (*(long **)(this + lVar1 * 8) != (long *)0x0) {
      in_EAX = (**(code **)(**(long **)(this + lVar1 * 8) + 0x118))();
    }
    lVar1 = lVar1 + 1;
  } while (lVar1 != 6);
  *(undefined4 *)(this + 0x30) = 0;
  lVar1 = 1;
  do {
    if (*(long **)(this + lVar1 * 8) != (long *)0x0) {
      in_EAX = (**(code **)(**(long **)(this + lVar1 * 8) + 0x28))();
      *(undefined8 *)(this + lVar1 * 8) = 0;
    }
    lVar1 = lVar1 + 1;
  } while (lVar1 != 6);
  return in_EAX;
}



// IGAccelTraceStreamManager::incFlipCount()

undefined8 __thiscall IGAccelTraceStreamManager::incFlipCount(IGAccelTraceStreamManager *this)

{
  *(long *)(*(long *)(this + 0xb0) + 0x10) = *(long *)(*(long *)(this + 0xb0) + 0x10) + 1;
  dtHookDidFlip();
  return *(undefined8 *)(*(long *)(this + 0xb0) + 0x10);
}



// IGAccelTraceStreamManager::recognizeFlip()

void __thiscall
IGAccelTraceStreamManager::recognizeFlip
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  void *this_00;
  
  if ((_graphicsTracePointEnable != 0) &&
     (this_00 = *(void **)(*(long *)(*(long *)this + 0xf18) + 0x250), this_00 != (void *)0x0)) {
    IGTelemetryKMD::sample
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,2,param_11,
               param_12,param_13,param_14);
    return;
  }
  return;
}



// IGAccelTraceStreamManager::ktraceStateChanged(int, unsigned long long)

void __thiscall
IGAccelTraceStreamManager::ktraceStateChanged
          (IGAccelTraceStreamManager *this,undefined8 param_2_00,long param_2)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  undefined8 uVar2;
  long *plVar3;
  long lVar4;
  
  lVar1 = *(long *)this;
  if (((&DAT_000011c3)[lVar1] & 0x10) != 0) {
    return;
  }
  if (*(int *)__got::___ktrace_kernel_enabled == 0) {
    if (param_2 != 0) goto LAB_000074bc;
  }
  else if ((param_2 != 0) ||
          ((*__got::___ktrace_enable_filter & 8) != 0 ||
           __got::___ktrace_enable_filter[0x14] != '\0')) {
LAB_000074bc:
    turnOn((IGAccelTraceStreamManager *)(lVar1 + 0xe18));
    if (_g_graphicsTracePointEnable_prev == 0) {
      _g_startingKDEBUG = _mach_absolute_time();
    }
    _g_graphicsTracePointEnable_prev = _graphicsTracePointEnable;
    _graphicsTracePointEnable = 1;
    plVar3 = *(long **)(&DAT_00001280 + *(long *)this);
    UNRECOVERED_JUMPTABLE = *(code **)(*plVar3 + 0x200);
    uVar2 = 1;
    goto LAB_0000757e;
  }
  if (*(int *)(*(long *)(lVar1 + 0xf18) + 0x278) != 0) {
    return;
  }
  lVar4 = 0;
  do {
    plVar3 = *(long **)(lVar1 + 0xe20 + lVar4 * 8);
    if (plVar3 != (long *)0x0) {
      (**(code **)(*plVar3 + 0x118))();
    }
    lVar4 = lVar4 + 1;
  } while (lVar4 != 5);
  *(undefined4 *)(lVar1 + 0xe48) = 0;
  if (_g_graphicsTracePointEnable_prev != 0) {
    _g_startingKDEBUG = 0xffffffffffffffff;
  }
  _g_graphicsTracePointEnable_prev = _graphicsTracePointEnable;
  _graphicsTracePointEnable = 0;
  plVar3 = *(long **)(&DAT_00001280 + *(long *)this);
  UNRECOVERED_JUMPTABLE = *(code **)(*plVar3 + 0x200);
  uVar2 = 0;
LAB_0000757e:
                    // WARNING: Could not recover jumptable at 0x00007588. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)(plVar3,uVar2);
  return;
}



// IGAccelTraceStreamManager::dtracePushUnique(long long)

void __thiscall
IGAccelTraceStreamManager::dtracePushUnique(IGAccelTraceStreamManager *this,undefined8 param_1)

{
  int iVar1;
  undefined8 uVar2;
  
  iVar1 = *(int *)(this + 0x48);
  uVar2 = 0xffffffffffffffe1;
  if ((long)iVar1 < 10) {
    *(undefined8 *)(this + (long)iVar1 * 8 + 0x50) = *(undefined8 *)(this + 0x40);
    uVar2 = param_1;
  }
  *(int *)(this + 0x48) = iVar1 + 1;
  if (*(int *)(this + 0x4c) <= iVar1) {
    *(int *)(this + 0x4c) = iVar1 + 1;
  }
  *(undefined8 *)(this + 0x40) = uVar2;
  return;
}



// IGAccelTraceStreamManager::dtracePopUnique()

void __thiscall IGAccelTraceStreamManager::dtracePopUnique(IGAccelTraceStreamManager *this)

{
  uint uVar1;
  undefined8 uVar2;
  
  uVar1 = *(int *)(this + 0x48) - 1;
  *(uint *)(this + 0x48) = uVar1;
  uVar2 = 0xffffffffffffffe1;
  if (uVar1 < 10) {
    uVar2 = *(undefined8 *)(this + (ulong)uVar1 * 8 + 0x50);
  }
  *(undefined8 *)(this + 0x40) = uVar2;
  return;
}



// IGAccelTraceStreamManager::gpuReadTimeTupleWithSampleUsageGPU(TelemetrySampleUsageGPU&, unsigned
// long long&)

void __thiscall
IGAccelTraceStreamManager::gpuReadTimeTupleWithSampleUsageGPU
          (IGAccelTraceStreamManager *this,long param_1,uint64_t *param_2)

{
  undefined4 uVar1;
  uint64_t uVar2;
  ulong uVar3;
  int iVar4;
  ulong uVar5;
  uint64_t local_40;
  undefined4 local_34;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
  uVar5 = 0xffffffffffffffff;
  uVar1 = 0;
  local_34 = 0;
  local_40 = 0;
  do {
    *(undefined4 *)(param_1 + 4) =
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)this) + 0x235c);
    iVar4 = 10;
    do {
      uVar2 = _mach_absolute_time();
      *param_2 = uVar2;
      *(undefined4 *)(param_1 + 8) =
           *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)this) + 0x2358);
      uVar2 = _mach_absolute_time();
      uVar3 = uVar2 - *param_2;
      if (uVar3 < uVar5) {
        uVar1 = *(undefined4 *)(param_1 + 4);
        local_34 = *(undefined4 *)(param_1 + 8);
        uVar5 = uVar3;
        local_40 = *param_2;
      }
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
    iVar4 = *(int *)(*(long *)(&DAT_00001270 + *(long *)this) + 0x235c);
    *(int *)(param_1 + 0xc) = iVar4;
  } while (*(int *)(param_1 + 4) != iVar4);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,0);
  *(undefined4 *)(param_1 + 0xc) = uVar1;
  *(undefined4 *)(param_1 + 4) = uVar1;
  *(undefined4 *)(param_1 + 8) = local_34;
  *param_2 = local_40;
  return;
}



// IGAccelTraceStreamManager::get_fullTicTimestampFromSampleUsageGPU(TelemetrySampleUsageGPU*)

void __thiscall
IGAccelTraceStreamManager::get_fullTicTimestampFromSampleUsageGPU
          (IGAccelTraceStreamManager *this,long param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  iVar2 = *(int *)(param_1 + 0xc);
  if (*(int *)(param_1 + 8) < 0) {
    iVar2 = iVar1;
  }
  if (iVar1 == *(int *)(param_1 + 0xc)) {
    iVar2 = iVar1;
  }
  IGTimeConverter::gpuGetFullTicsGivenRawTics
            (CONCAT44(iVar2,*(int *)(param_1 + 8)),(long *)(*(long *)(this + 0xb0) + 0x68));
  return;
}



// IGTimeConverter::gpuUpdateTimeTuple(int)

void __thiscall IGTimeConverter::gpuUpdateTimeTuple(IGTimeConverter *this,int param_1)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  
  lVar4 = *(long *)(this + 0x28);
  if (lVar4 != 0) {
    do {
      uVar3 = (ulong)((*(int *)(lVar4 + 0x8c) + param_1) - 1U & 0xf);
      lVar1 = *(long *)(lVar4 + 0x90 + uVar3 * 8);
      lVar2 = *(long *)(lVar4 + 0x110 + uVar3 * 8);
    } while (0xc < (uint)(*(int *)(lVar4 + 0x8c) - *(int *)(lVar4 + 0x8c)));
    lVar4 = lVar2 - *(long *)(this + 0x18);
    if (lVar4 != 0) {
      lVar5 = lVar1 - *(long *)(this + 0x10);
      if (lVar5 != 0) {
        *(long *)this = *(long *)(this + 0x10);
        *(long *)(this + 8) = *(long *)(this + 0x18);
        *(long *)(this + 0x10) = lVar1;
        *(long *)(this + 0x18) = lVar2;
        *(double *)(this + 0x20) = (double)lVar4 / (double)lVar5;
      }
    }
  }
  return;
}



// IGAccelTraceStreamManager::RawGpuToCpuNsec(unsigned long long)

long __thiscall
IGAccelTraceStreamManager::RawGpuToCpuNsec(IGAccelTraceStreamManager *this,ulong param_1)

{
  ulong uVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *(long *)(this + 0xe0);
  lVar2 = -1;
  if (lVar3 != 0) {
    if (1000000000 < (ulong)(*(long *)(lVar3 + 0x110) - *(long *)(this + 0xc0))) {
      IGTimeConverter::gpuUpdateTimeTuple((IGTimeConverter *)(this + 0xb8),0);
      lVar3 = *(long *)(this + 0xe0);
    }
    uVar1 = IGTimeConverter::gpuGetFullTicsGivenRawTics(param_1,(long *)(lVar3 + 0x68));
    if ((*(long *)(this + 0xc0) != 0) && (lVar3 = *(long *)(this + 0xb8), lVar3 != 0)) {
      lVar2 = (*(long *)(this + 0xc0) + (uVar1 * 10000) / _g_timestampFreqPerDenominator) - lVar3;
    }
  }
  return lVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelTraceStreamManager::combineHiLoStopTic(TelemetrySampleUsageGPU*)

undefined8 __cdecl IGAccelTraceStreamManager::combineHiLoStopTic(long param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  iVar2 = *(int *)(param_1 + 0xc);
  if (*(int *)(param_1 + 8) < 0) {
    iVar2 = iVar1;
  }
  if (iVar1 == *(int *)(param_1 + 0xc)) {
    iVar2 = iVar1;
  }
  return CONCAT44(iVar2,*(int *)(param_1 + 8));
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTimeConverter::gpuGetFullTicsGivenRawTics(unsigned long long, unsigned long long volatile*)

ulong __cdecl IGTimeConverter::gpuGetFullTicsGivenRawTics(ulong param_1,long *param_2)

{
  uint uVar1;
  uint uVar3;
  ulong uVar2;
  
  uVar3 = (uint)(param_1 >> 0x22);
  uVar1 = uVar3 & 3;
  uVar2 = (ulong)uVar1;
  if (param_2[uVar2] == 0) {
    if (uVar2 == 0) {
      *param_2 = param_2[3] + 0x10;
    }
    else {
      param_2[uVar2] = param_2[uVar1 - 1];
    }
    param_2[uVar3 + 1 & 3] = 0;
  }
  return param_2[uVar2] << 0x20 | param_1 & 0xfffffffff;
}



// IGAccelTraceStreamManager::curTimesDashboard()

void __thiscall IGAccelTraceStreamManager::curTimesDashboard(IGAccelTraceStreamManager *this)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  undefined8 local_38;
  uint64_t local_30;
  
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  gpuReadTimeTupleWithSampleUsageGPU(this,(long)&local_68,&local_30);
  uVar2 = local_68._4_4_;
  uVar3 = (uint)local_60;
  _kprintf("x%08X %08X = GFXREG_TIMESTAMP_HI LO raw1\n",local_68._4_4_,(uint)local_60);
  uVar7 = local_60._4_4_;
  if (uVar2 == local_60._4_4_) {
    uVar7 = uVar2;
  }
  if ((int)uVar3 < 0) {
    uVar7 = uVar2;
  }
  uVar4 = IGTimeConverter::gpuGetFullTicsGivenRawTics
                    (CONCAT44(uVar7,uVar3),(long *)(*(long *)(this + 0xb0) + 0x68));
  uVar5 = (uVar4 * 10000) / _g_timestampFreqPerDenominator;
  _kprintf("x%08llX %08llX = GFXREG_TIMESTAMP_HI LO tics adjusted\n",uVar4 >> 0x20,
           uVar4 & 0xffffffff);
  _kprintf("x%08llX %08llX = GFXREG_TIMESTAMP_HI LO nSec\n",(long)uVar5 >> 0x20,uVar5 & 0xffffffff);
  uVar6 = 0xffffffffffffffff;
  if ((*(long *)(this + 0xc0) != 0) && (*(long *)(this + 0xb8) != 0)) {
    uVar6 = (*(long *)(this + 0xc0) + uVar5) - *(long *)(this + 0xb8);
  }
  _kprintf("x%08llX %08llX = GFXREG_TIMESTAMP_HI LO nSec to CPU scale\n",(long)uVar6 >> 0x20,
           uVar6 & 0xffffffff);
  _kprintf("x%08llX %08llX = mach_absolute_time = %lld nSec cpu-gpu=%lld\n",local_30 >> 0x20,
           local_30 & 0xffffffff,local_30,local_30 - uVar6);
  lVar1 = *(long *)(this + 0xb0);
  _kprintf("adjust ticBase %lld : x%8llX x%8llX x%8llX x%8llX\n",(ulong)((uint)(uVar4 >> 0x22) & 3),
           *(ulonglong *)(lVar1 + 0x68),*(ulonglong *)(lVar1 + 0x70),*(ulonglong *)(lVar1 + 0x78),
           *(ulonglong *)(lVar1 + 0x80));
  uVar7 = *(int *)(*(long *)(this + 0xb0) + 0x8c) - 1U & 0xf;
  uVar4 = *(ulong *)(*(long *)(this + 0xb0) + 0x90 + (ulong)uVar7 * 8);
  _kprintf("x%08llX %08llX = tuple gpuTime[%d]\n",(long)uVar4 >> 0x20,uVar4 & 0xffffffff,uVar7);
  uVar4 = *(ulong *)(*(long *)(this + 0xb0) + 0x110 + (ulong)uVar7 * 8);
  _kprintf("x%08llX %08llX = tuple cpuTime[%d]\n",(long)uVar4 >> 0x20,uVar4 & 0xffffffff,uVar7);
  _kprintf("%3lld g_onEvent) g_nSecNow = %lld = x%llX\n",_g_onEvent,_g_nSecNow,_g_nSecNow);
  _kprintf("[%lld %lld] = g_nSecDeltaMin/Max\n",_g_nSecDeltaMin,_g_nSecDeltaMax);
  return;
}



// IGAccelTraceStream::MetaClass::~MetaClass()

void __thiscall IGAccelTraceStream::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelTraceStream::free()

void IGAccelTraceStream::free(void *param_1)

{
  return;
}



// IGAccelTraceStream::getTraceStreamName()

IGAccelTraceStream * __thiscall IGAccelTraceStream::getTraceStreamName(IGAccelTraceStream *this)

{
  return this + 0x69;
}



void __GLOBAL__sub_I_IGAccelTraceStream_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelTraceStream::gMetaClass,"IGAccelTraceStream",
             (OSMetaClass *)__got::gMetaClass,0xb0);
  IGAccelTraceStream::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelTraceStream::gMetaClass);
  return;
}



// IGAccelStatsMemory::init(IntelAccelerator*)

void __thiscall IGAccelStatsMemory::init(IGAccelStatsMemory *this,undefined8 param_1)

{
  *(undefined8 *)this = param_1;
  allocStatsMem(this);
  return;
}



// IGAccelStatsMemory::allocStatsMem()

ulong __thiscall IGAccelStatsMemory::allocStatsMem(IGAccelStatsMemory *this)

{
  long *plVar1;
  long lVar2;
  undefined8 unaff_R14;
  ulong uVar3;
  undefined7 uVar4;
  
  uVar4 = (undefined7)((ulong)unaff_R14 >> 8);
  uVar3 = CONCAT71(uVar4,1);
  if (*(long *)(this + 0x10) == 0) {
    plVar1 = (long *)IOBufferMemoryDescriptor::withOptions
                               (0x10003,0x3c0,*(ulong *)__got::_page_size);
    *(long **)(this + 8) = plVar1;
    if (plVar1 == (long *)0x0) {
      lVar2 = *(long *)(this + 0x10);
      uVar3 = 0;
    }
    else {
      (**(code **)(*plVar1 + 0x20))(plVar1);
      lVar2 = (**(code **)(**(long **)(this + 8) + 0x2e0))();
      *(long *)(this + 0x10) = lVar2;
      uVar3 = CONCAT71(uVar4,lVar2 != 0);
    }
    ___bzero(lVar2,0x3c0);
  }
  return uVar3 & 0xffffffff;
}



// IGAccelStatsMemory::mapStatsMemForUser(task*, IOMemoryMap*&)

undefined8 __thiscall
IGAccelStatsMemory::mapStatsMemForUser(IGAccelStatsMemory *this,ulonglong param_1,long *param_2)

{
  undefined8 uVar1;
  long *plVar2;
  
  plVar2 = *(long **)this;
  _OSIncrementAtomic(plVar2 + 0x12);
  _IOLockLock(plVar2[0x11]);
  _OSDecrementAtomic(plVar2 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar2 + 0x850))(plVar2,"",0);
  plVar2 = (long *)*param_2;
  if (plVar2 == (long *)0x0) {
    uVar1 = 0;
    if (*(task **)(this + 8) == (task *)0x0) goto LAB_00007bf2;
    plVar2 = (long *)IOMemoryDescriptor::createMappingInTask
                               (*(task **)(this + 8),param_1,0,0x4000001,0);
    *param_2 = (long)plVar2;
    if (plVar2 == (long *)0x0) goto LAB_00007bf2;
  }
  uVar1 = (**(code **)(*plVar2 + 0x118))();
LAB_00007bf2:
  plVar2 = *(long **)this;
  (**(code **)(*plVar2 + 0x858))(plVar2,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar2[0x11]);
  return uVar1;
}



// IGAccelDevice::MetaClass::MetaClass()

void __thiscall IGAccelDevice::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDevice",(OSMetaClass *)__got::gMetaClass,0x1a8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDevice::MetaClass::~MetaClass()

void __thiscall IGAccelDevice::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelDevice::IGAccelDevice(OSMetaClass const*)

void __thiscall IGAccelDevice::IGAccelDevice(IGAccelDevice *this,OSMetaClass *param_1)

{
  IOAccelDevice2::IOAccelDevice2((IOAccelDevice2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDevice;
  *(char **)(this + 0x198) = "IGAccelDevice";
  *(undefined2 *)(this + 0x1a0) = 0;
  this[0x1a2] = (IGAccelDevice)0x0;
  return;
}



// IGAccelDevice::IGAccelDevice(OSMetaClass const*)

void __thiscall IGAccelDevice::IGAccelDevice(IGAccelDevice *this,OSMetaClass *param_1)

{
  IOAccelDevice2::IOAccelDevice2((IOAccelDevice2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDevice;
  *(char **)(this + 0x198) = "IGAccelDevice";
  *(undefined2 *)(this + 0x1a0) = 0;
  this[0x1a2] = (IGAccelDevice)0x0;
  return;
}



// IGAccelDevice::~IGAccelDevice()

void __thiscall IGAccelDevice::~IGAccelDevice(IGAccelDevice *this)

{
  IOAccelDevice2::~IOAccelDevice2((IOAccelDevice2 *)this);
  return;
}



// IGAccelDevice::~IGAccelDevice()

void __thiscall IGAccelDevice::~IGAccelDevice(IGAccelDevice *this)

{
  IOAccelDevice2::~IOAccelDevice2((IOAccelDevice2 *)this);
  return;
}



// IGAccelDevice::~IGAccelDevice()

void __thiscall IGAccelDevice::~IGAccelDevice(IGAccelDevice *this)

{
  IOAccelDevice2::~IOAccelDevice2((IOAccelDevice2 *)this);
  _OSObject_typed_operator_delete(&IGAccelDevice_ktv,this,0x1a8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDevice::operator delete(void*, unsigned long)

void __cdecl IGAccelDevice::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelDevice_ktv,param_1,param_2);
  return;
}



// IGAccelDevice::getMetaClass() const

undefined8 * IGAccelDevice::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelDevice::MetaClass::MetaClass()

void __thiscall IGAccelDevice::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDevice",(OSMetaClass *)__got::gMetaClass,0x1a8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDevice::MetaClass::alloc() const

IOAccelDevice2 * IGAccelDevice::MetaClass::alloc(void)

{
  IOAccelDevice2 *this;
  
  this = (IOAccelDevice2 *)_OSObject_typed_operator_new(&IGAccelDevice_ktv,0x1a8);
  IOAccelDevice2::IOAccelDevice2(this,(OSMetaClass *)&IGAccelDevice::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDevice;
  *(char **)(this + 0x198) = "IGAccelDevice";
  *(undefined2 *)(this + 0x1a0) = 0;
  this[0x1a2] = (IOAccelDevice2)0x0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelDevice::operator new(unsigned long)

void * __thiscall IGAccelDevice::operator_new(IGAccelDevice *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelDevice_ktv,this);
  return pvVar1;
}



// IGAccelDevice::IGAccelDevice()

void __thiscall IGAccelDevice::IGAccelDevice(IGAccelDevice *this)

{
  IOAccelDevice2::IOAccelDevice2((IOAccelDevice2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDevice;
  *(char **)(this + 0x198) = "IGAccelDevice";
  *(undefined2 *)(this + 0x1a0) = 0;
  this[0x1a2] = (IGAccelDevice)0x0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelDevice::IGAccelDevice()

void __thiscall IGAccelDevice::IGAccelDevice(IGAccelDevice *this)

{
  IOAccelDevice2::IOAccelDevice2((IOAccelDevice2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDevice;
  *(char **)(this + 0x198) = "IGAccelDevice";
  *(undefined2 *)(this + 0x1a0) = 0;
  this[0x1a2] = (IGAccelDevice)0x0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelDevice::setProperties(OSObject*)

undefined8 IGAccelDevice::setProperties(void)

{
  return 0;
}



// IGAccelDevice::deviceStart()

void __thiscall IGAccelDevice::deviceStart(IGAccelDevice *this)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x970))();
  if (cVar1 != '\0') {
    *(undefined ***)(this + 0x188) = &deviceStart()::methodDescs;
    *(undefined8 *)(this + 400) = 0;
  }
  return;
}



// IGAccelDevice::get_wa_table(_WA_TABLE*, _WA_TABLE*, unsigned long long, unsigned long long*)

undefined8 __thiscall
IGAccelDevice::get_wa_table
          (IGAccelDevice *this,undefined8 param_2_00,void *param_2,undefined8 param_4_00,
          undefined8 *param_4)

{
  *param_4 = 0xda;
  _memmove(param_2,(void *)(*(long *)(this + 0x108) + 0xf36),0xda);
  return 0;
}



// IGAccelDevice::get_hw_caps(_IntelHwCapsInfo*, _IntelHwCapsInfo*, unsigned long long, unsigned
// long long*)

undefined8 __thiscall
IGAccelDevice::get_hw_caps
          (IGAccelDevice *this,undefined8 param_2_00,undefined4 *param_2,undefined8 param_4_00,
          undefined8 *param_4)

{
  long lVar1;
  IntelAccelerator *pIVar2;
  byte bVar3;
  
  bVar3 = 0;
  *param_4 = 0x80;
  pIVar2 = *(IntelAccelerator **)(this + 0x108);
  if ((*(int *)(pIVar2 + 0x1188) == 0) || (*(int *)(pIVar2 + 0x1154) == 0)) {
    IntelAccelerator::initHardwareCaps(pIVar2);
    pIVar2 = *(IntelAccelerator **)(this + 0x108);
    if (*(int *)(pIVar2 + 0x1188) == 0) {
      _IOLog("[IGPU] HWCAPS get_hw_caps: hwCaps compromised fNumSubSlices: %d fExecUnitCount: %d.\n"
             ,0,*(undefined4 *)(pIVar2 + 0x1154));
      _kprintf("[IGPU] HWCAPS get_hw_caps: hwCaps compromised fNumSubSlices: %d fExecUnitCount: %d.\n"
               ,*(int *)(&DAT_00001188 + *(long *)(this + 0x108)),
               *(int *)(&DAT_00001154 + *(long *)(this + 0x108)));
      return 0xe00002bc;
    }
  }
  pIVar2 = pIVar2 + 0x1140;
  for (lVar1 = 0x20; lVar1 != 0; lVar1 = lVar1 + -1) {
    *param_2 = *(undefined4 *)pIVar2;
    pIVar2 = pIVar2 + (ulong)bVar3 * -8 + 4;
    param_2 = param_2 + (ulong)bVar3 * -2 + 1;
  }
  return 0;
}



// IGAccelDevice::debug_control(IntelDeviceDebugControlInOut*, IntelDeviceDebugControlInOut*,
// unsigned long long, unsigned long long*)

undefined8 __thiscall
IGAccelDevice::debug_control
          (IGAccelDevice *this,uint *param_1,undefined8 *param_2,long param_3,undefined8 *param_4)

{
  undefined8 uVar1;
  undefined *puVar2;
  
  *param_4 = 0x18;
  uVar1 = 0xe00002c2;
  if ((param_3 == 0x18) && (*param_1 < 0x49)) {
    param_2[2] = *(undefined8 *)(param_1 + 4);
    uVar1 = *(undefined8 *)param_1;
    param_2[1] = *(undefined8 *)(param_1 + 2);
    *param_2 = uVar1;
    if (param_1[1] == 1) {
      puVar2 = ___idvarGetParam(*param_1);
    }
    else {
      if (param_1[1] != 2) {
        return 0xe00002c2;
      }
      puVar2 = (undefined *)___idvarSetParam(*param_1,*(undefined **)(param_1 + 4));
    }
    param_2[1] = puVar2;
    uVar1 = 0;
  }
  return uVar1;
}



// IGAccelDevice::telemetryMapStatsMem(IntelDeviceMapStatsMemInOut*, IntelDeviceMapStatsMemInOut*,
// unsigned long long, unsigned long long*)

undefined8 __thiscall
IGAccelDevice::telemetryMapStatsMem
          (IGAccelDevice *this,long *param_1,long *param_2,long param_3,undefined8 *param_4)

{
  undefined8 uVar1;
  long lVar2;
  
  *param_4 = 0x10;
  uVar1 = 0xe00002c2;
  if (param_3 == 0x10) {
    lVar2 = *param_1;
    param_2[1] = param_1[1];
    *param_2 = lVar2;
    *(undefined4 *)(param_2 + 1) = 0x3c0;
    lVar2 = IGAccelStatsMemory::mapStatsMemForUser
                      ((IGAccelStatsMemory *)(*(long *)(this + 0x108) + 0xe00),
                       *(ulonglong *)(this + 0xe8),(long *)(this + 400));
    *param_2 = lVar2;
    *(uint *)((long)param_2 + 0xc) = *(uint *)(&DAT_000011c0 + *(long *)(this + 0x108)) >> 0x1c & 1;
    uVar1 = 0xe00002be;
    if (lVar2 != 0) {
      uVar1 = 0;
    }
  }
  return uVar1;
}



// IGAccelDevice::telemetryOperation(TelemetryOperation*, TelemetryOperation*, unsigned long long,
// unsigned long long*)

void __thiscall
IGAccelDevice::telemetryOperation
          (IGAccelDevice *this,ulong *param_1,ulong *param_2,long param_3,ulong *param_4)

{
  IGTelemetryManager::telemetryOperationWrapper
            (*(IGTelemetryManager **)(*(long *)(this + 0x108) + 0xf18),(long)(this + 0x198),param_1,
             param_2,param_3,param_4,*(ulonglong *)(this + 0xe8));
  return;
}



// IGAccelDevice::telemetryInitOABuffer(MDAPIInitOABufferOp*, MDAPIInitOABufferOp*, unsigned long
// long, unsigned long long*)

void __thiscall
IGAccelDevice::telemetryInitOABuffer
          (IGAccelDevice *this,undefined8 *param_1,undefined8 *param_2,long param_3,ulong *param_4)

{
  IGTelemetryManager::telemetryInitOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x108) + 0xf18),(long)(this + 0x198),param_1,
             param_2,param_3,param_4);
  return;
}



// IGAccelDevice::telemetryReadOABuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*, unsigned
// long long, unsigned long long*)

void __thiscall
IGAccelDevice::telemetryReadOABuffer
          (IGAccelDevice *this,long param_1,int *param_2,long param_3,long *param_4)

{
  IGTelemetryManager::telemetryReadOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x108) + 0xf18),param_1,param_2,param_3,
             param_4,(long)(this + 0x198));
  return;
}



// IGAccelDevice::telemetryMapOABufferMemory(IntelDeviceMapStatsMemInOut*,
// IntelDeviceMapStatsMemInOut*, unsigned long long, unsigned long long*)

void __thiscall
IGAccelDevice::telemetryMapOABufferMemory
          (IGAccelDevice *this,long *param_1,long *param_2,long param_3,undefined8 *param_4)

{
  IGTelemetryManager::telemetryMapOaBufferMemory
            (*(IGTelemetryManager **)(*(long *)(this + 0x108) + 0xf18),param_1,param_2,param_3,
             param_4,*(ulonglong *)(this + 0xe8));
  return;
}



// IGAccelDevice::logStatus(IntelDeviceLogStatus*, IntelDeviceLogStatus*, unsigned long long,
// unsigned long long*)

undefined8 __thiscall
IGAccelDevice::logStatus
          (IGAccelDevice *this,undefined8 *param_1,undefined8 *param_2,long param_3,
          undefined8 *param_4)

{
  undefined8 uVar1;
  
  uVar1 = 0xe00002c2;
  if (param_3 == 0x10) {
    *param_4 = 0x10;
    uVar1 = *param_1;
    param_2[1] = param_1[1];
    *param_2 = uVar1;
    uVar1 = 0;
  }
  return uVar1;
}



// IGAccelDevice::start_aub_capture(IntelDeviceStartAubCapture*, unsigned long long)

undefined8 IGAccelDevice::start_aub_capture(void)

{
  return 0xe00002c7;
}



// IGAccelDevice::get_aub_capture(char*, unsigned long long*)

undefined8 IGAccelDevice::get_aub_capture(void)

{
  return 0xe00002c7;
}



// IGAccelDevice::stop_aub_capture()

undefined8 IGAccelDevice::stop_aub_capture(void)

{
  return 0xe00002c7;
}



// IGAccelDevice::go_aub_capture()

undefined8 IGAccelDevice::go_aub_capture(void)

{
  return 0xe00002c7;
}



// IGAccelDevice::get_vram_size(unsigned long long*)

undefined8 __thiscall IGAccelDevice::get_vram_size(IGAccelDevice *this,undefined8 *param_1)

{
  *param_1 = *(undefined8 *)(*(long *)(this + 0x108) + 0xca8);
  return 0;
}



// IGAccelDevice::get_hw_info(IntelHwInfoRec*, IntelHwInfoRec*, unsigned long long, unsigned long
// long*)

undefined8 __thiscall
IGAccelDevice::get_hw_info
          (IGAccelDevice *this,undefined8 param_2_00,undefined8 *param_2,undefined8 param_4_00,
          undefined8 *param_4)

{
  long lVar1;
  undefined8 *puVar2;
  undefined8 *puVar3;
  
  *param_4 = 0x288;
  puVar2 = (undefined8 *)(&DAT_00001140 + *(long *)(this + 0x108));
  puVar3 = param_2;
  for (lVar1 = 0x10; lVar1 != 0; lVar1 = lVar1 + -1) {
    *puVar3 = *puVar2;
    puVar2 = puVar2 + 1;
    puVar3 = puVar3 + 1;
  }
  _memcpy(param_2 + 0x10,(void *)(*(long *)(this + 0x108) + 0xf36),0xda);
  _memcpy((void *)((long)param_2 + 0x15a),&DAT_00001010 + *(long *)(this + 0x108),0x6e);
  _memcpy(param_2 + 0x39,&DAT_00001080 + *(long *)(this + 0x108),0xc0);
  return 0;
}



// IGAccelDevice::deviceStop()

void __thiscall IGAccelDevice::deviceStop(IGAccelDevice *this)

{
  IGTelemetryManager::onConnectionStop
            (*(IGTelemetryManager **)(*(long *)(this + 0x108) + 0xf18),(long)(this + 0x198),0);
  if (*(long **)(this + 400) != (long *)0x0) {
    (**(code **)(**(long **)(this + 400) + 0x28))();
    *(undefined8 *)(this + 400) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x000082ac. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x978))(this);
  return;
}



// IGAccelDevice::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelDevice::getTargetAndMethodForIndex(IGAccelDevice *this,undefined8 *param_1,uint param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 < 10) {
                    // WARNING: Could not recover jumptable at 0x000082c6. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar1 = (**(code **)(__got::vtable + 0x950))();
    return lVar1;
  }
  if (param_2 < 0x19) {
    lVar1 = (ulong)(param_2 - 10) * 0x30 + *(long *)(this + 0x188);
  }
  else {
    lVar1 = 0;
  }
  return lVar1;
}



// IGAccelDevice::MetaClass::~MetaClass()

void __thiscall IGAccelDevice::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelDevice_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelDevice::gMetaClass,"IGAccelDevice",
             (OSMetaClass *)__got::gMetaClass,0x1a8);
  IGAccelDevice::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelDevice::gMetaClass);
  return;
}



// IGHwCsStatsTracker::MetaClass::MetaClass()

void __thiscall IGHwCsStatsTracker::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHwCsStatsTracker",(OSMetaClass *)__got::gMetaClass,0x698);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHwCsStatsTracker::MetaClass::~MetaClass()

void __thiscall IGHwCsStatsTracker::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHwCsStatsTracker::IGHwCsStatsTracker(OSMetaClass const*)

void __thiscall
IGHwCsStatsTracker::IGHwCsStatsTracker(IGHwCsStatsTracker *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHwCsStatsTracker;
  return;
}



// IGHwCsStatsTracker::IGHwCsStatsTracker(OSMetaClass const*)

void __thiscall
IGHwCsStatsTracker::IGHwCsStatsTracker(IGHwCsStatsTracker *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHwCsStatsTracker;
  return;
}



// IGHwCsStatsTracker::~IGHwCsStatsTracker()

void __thiscall IGHwCsStatsTracker::~IGHwCsStatsTracker(IGHwCsStatsTracker *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHwCsStatsTracker::~IGHwCsStatsTracker()

void __thiscall IGHwCsStatsTracker::~IGHwCsStatsTracker(IGHwCsStatsTracker *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHwCsStatsTracker::~IGHwCsStatsTracker()

void __thiscall IGHwCsStatsTracker::~IGHwCsStatsTracker(IGHwCsStatsTracker *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHwCsStatsTracker_ktv,this,0x698);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHwCsStatsTracker::operator delete(void*, unsigned long)

void __cdecl IGHwCsStatsTracker::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHwCsStatsTracker_ktv,param_1,param_2);
  return;
}



// IGHwCsStatsTracker::getMetaClass() const

undefined8 * IGHwCsStatsTracker::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHwCsStatsTracker::MetaClass::MetaClass()

void __thiscall IGHwCsStatsTracker::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHwCsStatsTracker",(OSMetaClass *)__got::gMetaClass,0x698);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHwCsStatsTracker::MetaClass::alloc() const

OSObject * IGHwCsStatsTracker::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGHwCsStatsTracker_ktv,0x698);
  OSObject::OSObject(this,(OSMetaClass *)&IGHwCsStatsTracker::gMetaClass);
  *(undefined ***)this = &__const::~IGHwCsStatsTracker;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHwCsStatsTracker::operator new(unsigned long)

void * __thiscall IGHwCsStatsTracker::operator_new(IGHwCsStatsTracker *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHwCsStatsTracker_ktv,this);
  return pvVar1;
}



// IGHwCsStatsTracker::IGHwCsStatsTracker()

void __thiscall IGHwCsStatsTracker::IGHwCsStatsTracker(IGHwCsStatsTracker *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHwCsStatsTracker;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHwCsStatsTracker::IGHwCsStatsTracker()

void __thiscall IGHwCsStatsTracker::IGHwCsStatsTracker(IGHwCsStatsTracker *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHwCsStatsTracker;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHwCsStatsTracker::withAccelerator(IOGraphicsAccelerator2*)

IGHwCsStatsTracker * __cdecl IGHwCsStatsTracker::withAccelerator(undefined8 param_1)

{
  char cVar1;
  IGHwCsStatsTracker *this;
  
  this = (IGHwCsStatsTracker *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHwCsStatsTracker *)0x0) {
    cVar1 = initWithAccelerator(this,param_1);
    if (cVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHwCsStatsTracker *)0x0;
}



// IGHwCsStatsTracker::initWithAccelerator(IOGraphicsAccelerator2*)

void __thiscall IGHwCsStatsTracker::initWithAccelerator(IGHwCsStatsTracker *this,undefined8 param_1)

{
  char cVar1;
  
  *(undefined8 *)(this + 0x10) = 0;
  ___bzero(this + 0x18,0x220);
  *(undefined8 *)(this + 0x240) = 0;
  *(undefined8 *)(this + 0x238) = 0;
  ___bzero(this + 0x248,0x200);
  ___bzero(this + 0x448,0x200);
  *(undefined8 *)(this + 0x650) = 0;
  *(undefined8 *)(this + 0x648) = 0;
  *(undefined8 *)(this + 0x658) = 0;
  *(undefined8 *)(this + 0x660) = 0;
  *(undefined8 *)(this + 0x668) = 0;
  *(undefined8 *)(this + 0x670) = 0;
  *(undefined8 *)(this + 0x678) = 0;
  *(undefined8 *)(this + 0x680) = 0;
  *(undefined8 *)(this + 0x688) = 0;
  *(undefined8 *)(this + 0x690) = 0;
  cVar1 = (**(code **)(__got::vtable + 0x98))(this);
  if (cVar1 != '\0') {
    *(undefined8 *)(this + 0x10) = param_1;
  }
  return;
}



// IGHwCsStatsTracker::free()

void __thiscall IGHwCsStatsTracker::free(IGHwCsStatsTracker *this,void *param_1)

{
  *(undefined8 *)(this + 0x10) = 0;
                    // WARNING: Could not recover jumptable at 0x0000861e. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))();
  return;
}



// IGHwCsStatsTracker::updateWithContextUtilizationData(IGHardwareContext*)

void __thiscall
IGHwCsStatsTracker::updateWithContextUtilizationData
          (IGHwCsStatsTracker *this,IGHardwareContext *param_1)

{
  uint uVar1;
  ulong uVar2;
  IGHwCsStatsTracker *pIVar3;
  ulong uVar4;
  uint uVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  long lVar9;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  ulong local_60;
  ulong local_58;
  IGHardwareContext *local_50;
  ulong local_48;
  ulong local_40;
  IGHwCsStatsTracker *local_38;
  
  local_70 = 0;
  local_78 = 0;
  local_80 = 0;
  local_88 = 0;
  uVar1 = IGHardwareContext::getUtilizationData(param_1,&local_88);
  uVar2 = ((ulong)uVar1 * 10000) / _g_timestampFreqPerDenominator;
  local_40 = (ulong)(byte)param_1[0x78];
  if (*(IGTelemetryUsage **)(*(long *)(param_1 + 0xb0) + 0xe8) != (IGTelemetryUsage *)0x0) {
    IGTelemetryUsage::logUsage(*(IGTelemetryUsage **)(*(long *)(param_1 + 0xb0) + 0xe8),param_1);
  }
  local_50 = param_1;
  dtHookCompleteExecList();
  uVar4 = local_40;
  uVar1 = *(uint *)(this + local_40 * 4 + 0x648);
  lVar9 = local_40 * 0x80;
  local_38 = this + lVar9;
  *(ulong *)(local_38 + (ulong)uVar1 * 8 + 0x248) = uVar2;
  *(ulong *)(this + local_40 * 8 + 0x658) = uVar2;
  *(uint *)(this + local_40 * 4 + 0x648) = uVar1 + 1 & 0xf;
  lVar8 = 0;
  local_68 = 0;
  local_58 = 0;
  local_48 = uVar2;
  _clock_get_uptime(&local_68);
  _absolutetime_to_nanoseconds(local_68,&local_58);
  uVar1 = *(uint *)(this + uVar4 * 4 + 0x238);
  uVar5 = (uVar1 + 1) % 0x11;
  *(ulong *)(local_38 + (ulong)*(uint *)(this + uVar4 * 4 + 0x648) * 8 + 0x448) = local_58;
  *(ulong *)(this + (ulong)uVar1 * 8 + uVar4 * 0x88 + 0x18) = local_58;
  *(uint *)(this + uVar4 * 4 + 0x238) = uVar5;
  uVar2 = 0;
  do {
    uVar2 = uVar2 + *(long *)(this + lVar8 * 8 + lVar9 + 0x248);
    lVar8 = lVar8 + 1;
  } while (lVar8 != 0x10);
  local_38 = (IGHwCsStatsTracker *)
             (local_58 - *(ulong *)(this + (ulong)uVar5 * 8 + uVar4 * 0x88 + 0x18));
  local_60 = uVar2 * 100;
  *(ulong *)(this + uVar4 * 8 + 0x678) = local_60 / (ulong)local_38;
  uVar7 = uVar4;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    uVar7 = local_40;
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001a4,(ulong)*(uint *)(local_50 + 0x7c),local_40,local_48,
                    (ulong)(*(uint *)((long)&nlist_00145948.n_strx +
                                     *(long *)(&DAT_00001270 + *(long *)(this + 0x10))) >> 8),0);
      uVar7 = local_40;
    }
  }
  if (((&DAT_000011c2)[*(long *)(this + 0x10)] & 4) != 0) {
    pIVar3 = this + 0x448;
    lVar8 = 0;
    do {
      lVar6 = 0;
      do {
        if (((lVar9 != lVar6) &&
            (*(ulong *)(pIVar3 + lVar6) <= *(ulong *)(this + (ulong)uVar1 * 8 + uVar4 * 0x88 + 0x18)
            )) && (*(ulong *)(this + (ulong)uVar5 * 8 + uVar4 * 0x88 + 0x18) <=
                   *(ulong *)(pIVar3 + lVar6))) {
          local_38 = (IGHwCsStatsTracker *)((long)local_38 - *(long *)(pIVar3 + lVar6 + -0x200));
        }
        lVar6 = lVar6 + 0x80;
      } while (lVar6 != 0x200);
      lVar8 = lVar8 + 1;
      pIVar3 = pIVar3 + 8;
    } while (lVar8 != 0x10);
    uVar4 = 100;
    if (uVar2 <= local_38) {
      uVar4 = local_60 / (ulong)local_38;
    }
    *(ulong *)(this + uVar7 * 8 + 0x678) = uVar4;
  }
  return;
}



// IGHwCsStatsTracker::getLastContextRunTimeNS(unsigned char) const

undefined8 __thiscall
IGHwCsStatsTracker::getLastContextRunTimeNS(IGHwCsStatsTracker *this,uint param_1)

{
  return *(undefined8 *)(this + (ulong)param_1 * 8 + 0x658);
}



// IGHwCsStatsTracker::resetLastContextRunTimeNS(unsigned char)

void __thiscall IGHwCsStatsTracker::resetLastContextRunTimeNS(IGHwCsStatsTracker *this,uint param_1)

{
  *(undefined8 *)(this + (ulong)param_1 * 8 + 0x658) = 0;
  return;
}



// IGHwCsStatsTracker::MetaClass::~MetaClass()

void __thiscall IGHwCsStatsTracker::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHwCsStatsTracker_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHwCsStatsTracker::gMetaClass,"IGHwCsStatsTracker",
             (OSMetaClass *)__got::gMetaClass,0x698);
  IGHwCsStatsTracker::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHwCsStatsTracker::gMetaClass);
  return;
}



// IGPagePool::MetaClass::MetaClass()

void __thiscall IGPagePool::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGPagePool",(OSMetaClass *)__got::gMetaClass,0x78);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGPagePool::MetaClass::~MetaClass()

void __thiscall IGPagePool::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGPagePool::IGPagePool(OSMetaClass const*)

void __thiscall IGPagePool::IGPagePool(IGPagePool *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGPagePool;
  return;
}



// IGPagePool::IGPagePool(OSMetaClass const*)

void __thiscall IGPagePool::IGPagePool(IGPagePool *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGPagePool;
  return;
}



// IGPagePool::~IGPagePool()

void __thiscall IGPagePool::~IGPagePool(IGPagePool *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGPagePool::~IGPagePool()

void __thiscall IGPagePool::~IGPagePool(IGPagePool *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGPagePool::~IGPagePool()

void __thiscall IGPagePool::~IGPagePool(IGPagePool *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGPagePool_ktv,this,0x78);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPagePool::operator delete(void*, unsigned long)

void __cdecl IGPagePool::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGPagePool_ktv,param_1,param_2);
  return;
}



// IGPagePool::getMetaClass() const

undefined8 * IGPagePool::getMetaClass(void)

{
  return &gMetaClass;
}



// IGPagePool::MetaClass::MetaClass()

void __thiscall IGPagePool::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGPagePool",(OSMetaClass *)__got::gMetaClass,0x78);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGPagePool::MetaClass::alloc() const

OSObject * IGPagePool::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGPagePool_ktv,0x78);
  OSObject::OSObject(this,(OSMetaClass *)&IGPagePool::gMetaClass);
  *(undefined ***)this = &__const::~IGPagePool;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGPagePool::operator new(unsigned long)

void * __thiscall IGPagePool::operator_new(IGPagePool *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGPagePool_ktv,this);
  return pvVar1;
}



// IGPagePool::IGPagePool()

void __thiscall IGPagePool::IGPagePool(IGPagePool *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGPagePool;
  OSMetaClass::instanceConstructed();
  return;
}



// IGPagePool::IGPagePool()

void __thiscall IGPagePool::IGPagePool(IGPagePool *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGPagePool;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPagePool::withOptions(IntelAccelerator*, unsigned int)

IGPagePool * __cdecl IGPagePool::withOptions(undefined8 param_1,undefined4 param_2)

{
  IGPagePool *this;
  ulong uVar1;
  
  this = (IGPagePool *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGPagePool *)0x0) {
    uVar1 = initWithOptions(this,param_1,param_2);
    if ((char)uVar1 == '\0') {
      this = (IGPagePool *)0x0;
    }
  }
  return this;
}



// IGPagePool::initWithOptions(IntelAccelerator*, unsigned int)

ulong __thiscall IGPagePool::initWithOptions(IGPagePool *this,undefined8 param_1,undefined4 param_2)

{
  char cVar1;
  undefined8 uVar2;
  IGVector<> *this_00;
  IGVector<> *this_01;
  long lVar3;
  undefined8 *puVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = 0;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = param_1;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  this[0x50] = (IGPagePool)0x0;
  *(undefined4 *)(this + 0x60) = param_2;
  this[100] = (IGPagePool)((byte)param_2 & 1);
  *(undefined8 *)(this + 0x68) = 0;
  uVar2 = _OSAddAtomic64(1,&fInstanceCounter);
  *(undefined8 *)(this + 0x70) = uVar2;
  _nanoseconds_to_absolutetime(1000000000,this + 0x58);
  *(undefined8 *)(this + 0x30) = 0;
  *(IGPagePool **)(this + 0x38) = this + 0x30;
  cVar1 = (**(code **)(__got::vtable + 0x98))(this);
  if (cVar1 != '\0') {
    this_00 = (IGVector<> *)
              _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
    *(undefined8 *)this_00 = 0;
    *(undefined8 *)(this_00 + 8) = 0;
    *(undefined8 *)(this_00 + 0x10) = 0;
    IGVector<>::grow(this_00,4);
    *(undefined ***)(this_00 + 0x18) = &__const::~IGHashTable;
    *(undefined8 *)(this_00 + 0x28) = 0;
    *(undefined8 *)(this_00 + 0x30) = 0;
    this_00[0x38] = (IGVector<>)0x1;
    this_01 = (IGVector<> *)
              _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
    IGVector<>::IGVector(this_01,0x10);
    *(IGVector<> **)(this_00 + 0x20) = this_01;
    if ((this_01 != (IGVector<> *)0x0) && (lVar3 = *(long *)(this_01 + 8), lVar3 != 0)) {
      puVar4 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar4 = 0;
        puVar4[1] = puVar4;
        puVar4[2] = 0;
        puVar4 = puVar4 + 3;
        lVar3 = lVar3 + -1;
      } while (lVar3 != 0);
    }
    *(IGVector<> **)(this + 0x28) = this_00;
    uVar6 = CONCAT71((int7)((ulong)this_00 >> 8),1);
    if (this[100] != (IGPagePool)0x0) {
      lVar3 = _IOSimpleLockAlloc();
      *(long *)(this + 0x68) = lVar3;
      if (lVar3 == 0) {
        lVar3 = *(long *)(this + 0x28);
        if (lVar3 != 0) {
          IGHashTable<>::~IGHashTable((IGHashTable<> *)(lVar3 + 0x18));
          if (*(long *)(lVar3 + 0x10) != 0) {
            lVar5 = *(ulong *)(lVar3 + 8) << 3;
            if (lVar5 < 0) {
              lVar5 = -0x8000000000000000;
            }
            if (*(ulong *)(lVar3 + 8) >> 0x3d != 0) {
              lVar5 = -0x8000000000000000;
            }
            _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                deallocate(IGPagePool::PoolElement**,unsigned_long)::
                                kalloc_type_view_29,*(long *)(lVar3 + 0x10),lVar5);
          }
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGPriorityQueue<>*)::
                           kalloc_type_view_19,lVar3);
          *(undefined8 *)(this + 0x28) = 0;
        }
        uVar6 = 0;
      }
    }
  }
  return uVar6 & 0xffffffff;
}



// IGPagePool::free()

void __thiscall IGPagePool::free(IGPagePool *this,void *param_1)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  
  if (*(long *)(this + 0x28) != 0) {
    prune(this,2);
    lVar1 = *(long *)(this + 0x28);
    if (lVar1 != 0) {
      IGHashTable<>::~IGHashTable((IGHashTable<> *)(lVar1 + 0x18));
      if (*(long *)(lVar1 + 0x10) != 0) {
        lVar3 = *(ulong *)(lVar1 + 8) << 3;
        if (lVar3 < 0) {
          lVar3 = -0x8000000000000000;
        }
        if (*(ulong *)(lVar1 + 8) >> 0x3d != 0) {
          lVar3 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGPagePool::PoolElement**,unsigned_long)::kalloc_type_view_29
                           ,*(long *)(lVar1 + 0x10),lVar3);
      }
      _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGPriorityQueue<>*)::
                       kalloc_type_view_19,lVar1);
    }
  }
  if (this[100] != (IGPagePool)0x0) {
    if (*(long **)(this + 0x48) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x48) + 0x218))();
      (**(code **)(**(long **)(this + 0x48) + 0x158))();
      plVar2 = (long *)(**(code **)(**(long **)(this + 0x18) + 0x688))();
      (**(code **)(*plVar2 + 0x148))(plVar2,*(undefined8 *)(this + 0x48));
      if (*(long **)(this + 0x48) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x48) + 0x28))();
      }
      *(undefined8 *)(this + 0x48) = 0;
    }
    if (*(long **)(this + 0x40) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x40) + 0x158))();
      plVar2 = (long *)(**(code **)(**(long **)(this + 0x18) + 0x688))();
      (**(code **)(*plVar2 + 0x148))(plVar2,*(undefined8 *)(this + 0x40));
      if (*(long **)(this + 0x40) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x40) + 0x28))();
      }
      *(undefined8 *)(this + 0x40) = 0;
    }
    _IOSimpleLockFree(*(undefined8 *)(this + 0x68));
  }
                    // WARNING: Could not recover jumptable at 0x00008e2f. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGPagePool::prune(unsigned int)

void __thiscall IGPagePool::prune(IGPagePool *this,int param_1)

{
  IGHashTable<> *this_00;
  undefined8 *puVar1;
  long lVar2;
  IGPriorityQueue<> *this_01;
  ulong uVar3;
  bool bVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  long *plVar8;
  long *plVar9;
  ulong uVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  char *pcVar14;
  undefined8 uVar15;
  long lVar16;
  long local_58;
  long *local_50;
  int local_44;
  long local_40;
  long *local_38;
  
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a0006d,**(uintptr_t **)(this + 0x28),0,0,0,0);
  }
  local_50 = &local_58;
  local_58 = 0;
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockLock(*(undefined8 *)(this + 0x68));
  }
  iVar5 = local_44;
  if (*(long *)(this + 0x30) != 0) {
    _clock_get_uptime();
    lVar2 = *(long *)(this + 0x30);
    iVar6 = param_1;
    iVar5 = local_44;
    while (local_44 = iVar6, lVar13 = lVar2, local_40 = lVar13, lVar13 != 0) {
      lVar2 = *(long *)(lVar13 + 0xc90);
      if ((param_1 != 1) ||
         (iVar6 = local_44, iVar5 = local_44,
         *(ulong *)(this + 0x58) < (ulong)-*(long *)(lVar13 + 0xc80))) {
        plVar9 = (long *)(lVar13 + 0xc90);
        this_01 = *(IGPriorityQueue<> **)(this + 0x28);
        this_00 = (IGHashTable<> *)(this_01 + 0x18);
        uVar7 = IGHashTable<>::contains(this_00,&local_40);
        if ((char)uVar7 != '\0') {
          plVar8 = IGHashTable<>::operator[](this_00,&local_40);
          lVar16 = *plVar8;
          lVar12 = lVar16;
          if (0 < lVar16) {
            do {
              lVar16 = lVar12 + -1 >> 1;
              puVar1 = (undefined8 *)(*(long *)(this_01 + 0x10) + lVar16 * 8);
              *(undefined8 *)(*(long *)(this_01 + 0x10) + lVar12 * 8) = *puVar1;
              plVar8 = IGHashTable<>::operator[](this_00,puVar1);
              *plVar8 = lVar12;
              bVar4 = 2 < lVar12;
              lVar12 = lVar16;
            } while (bVar4);
          }
          *(long *)(*(long *)(this_01 + 0x10) + lVar16 * 8) = lVar13;
          plVar8 = IGHashTable<>::operator[](this_00,&local_40);
          param_1 = local_44;
          *plVar8 = lVar16;
          lVar16 = *(long *)this_01;
          if (lVar16 != 0) {
            if (lVar16 == 1) {
              IGHashTable<>::remove(this_00,*(char **)(this_01 + 0x10));
              if (*(long *)this_01 != 0) {
                uVar10 = *(long *)this_01 - 1;
                *(ulong *)this_01 = uVar10;
                uVar3 = *(ulong *)(this_01 + 8);
                if (uVar10 < uVar3 >> 2) {
                  local_38 = (long *)(uVar3 >> 1);
                  lVar16 = (long)local_38 * 8;
                  if (lVar16 < 0) {
                    lVar16 = -0x8000000000000000;
                  }
                  if (0x3fffffffffffffff < uVar3) {
                    lVar16 = -0x8000000000000000;
                  }
                  lVar16 = _IOMallocTypeVarImpl
                                     (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                                       kalloc_type_view_24,lVar16);
                  if (lVar16 != 0) {
                    lVar12 = *(long *)this_01;
                    if (lVar12 != 0) {
                      lVar11 = 0;
                      do {
                        *(undefined8 *)(lVar16 + lVar11 * 8) =
                             *(undefined8 *)(*(long *)(this_01 + 0x10) + lVar11 * 8);
                        lVar11 = lVar11 + 1;
                      } while (lVar12 != lVar11);
                    }
LAB_00009112:
                    lVar12 = *(ulong *)(this_01 + 8) * 8;
                    if (lVar12 < 0) {
                      lVar12 = -0x8000000000000000;
                    }
                    if (0x1fffffffffffffff < *(ulong *)(this_01 + 8)) {
                      lVar12 = -0x8000000000000000;
                    }
                    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                        deallocate(IGPagePool::PoolElement**,unsigned_long)::
                                        kalloc_type_view_29,*(undefined8 *)(this_01 + 0x10),lVar12);
                    *(long *)(this_01 + 0x10) = lVar16;
                    *(long **)(this_01 + 8) = local_38;
                  }
                }
              }
            }
            else {
              local_38 = (long *)(*(char **)(this_01 + 0x10) + lVar16 * 8 + -8);
              IGHashTable<>::remove(this_00,*(char **)(this_01 + 0x10));
              IGPriorityQueue<>::percolateDown(this_01,local_38,0,*(long *)this_01 - 1);
              if (*(long *)this_01 != 0) {
                uVar10 = *(long *)this_01 - 1;
                *(ulong *)this_01 = uVar10;
                uVar3 = *(ulong *)(this_01 + 8);
                if (uVar10 < uVar3 >> 2) {
                  local_38 = (long *)(uVar3 >> 1);
                  lVar16 = (long)local_38 * 8;
                  if (lVar16 < 0) {
                    lVar16 = -0x8000000000000000;
                  }
                  if (0x3fffffffffffffff < uVar3) {
                    lVar16 = -0x8000000000000000;
                  }
                  lVar16 = _IOMallocTypeVarImpl
                                     (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                                       kalloc_type_view_24,lVar16);
                  if (lVar16 != 0) {
                    lVar12 = *(long *)this_01;
                    if (lVar12 != 0) {
                      lVar11 = 0;
                      do {
                        *(undefined8 *)(lVar16 + lVar11 * 8) =
                             *(undefined8 *)(*(long *)(this_01 + 0x10) + lVar11 * 8);
                        lVar11 = lVar11 + 1;
                      } while (lVar12 != lVar11);
                    }
                    goto LAB_00009112;
                  }
                }
              }
            }
          }
        }
        lVar16 = *plVar9;
        if (lVar16 == 0) {
          plVar8 = *(long **)(lVar13 + 0xc98);
          if (*plVar8 != lVar13) {
LAB_00009327:
            pcVar14 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
            goto LAB_00009337;
          }
          *(long **)(this + 0x38) = plVar8;
        }
        else {
          if (*(long **)(lVar16 + 0xc98) != plVar9) {
            pcVar14 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
LAB_00009337:
            uVar7 = 0x207;
            uVar15 = 0x207;
            goto LAB_0000934c;
          }
          if (**(long **)(lVar13 + 0xc98) != lVar13) goto LAB_00009327;
          *(long **)(lVar16 + 0xc98) = *(long **)(lVar13 + 0xc98);
          plVar8 = *(long **)(lVar13 + 0xc98);
        }
        *plVar8 = lVar16;
        *(undefined8 *)(lVar13 + 0xc90) = 0;
        *(long **)(lVar13 + 0xc98) = local_50;
        *local_50 = lVar13;
        *(long *)(this + 0x10) = *(long *)(this + 0x10) + -0x40;
        iVar6 = local_44;
        local_50 = plVar9;
        iVar5 = local_44;
      }
    }
  }
  local_44 = iVar5;
  lVar13 = local_58;
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
    lVar13 = local_58;
  }
  do {
    if (lVar13 == 0) {
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        _kernel_debug(0x85a0006e,**(uintptr_t **)(this + 0x28),0,0,0,0);
      }
      return;
    }
    lVar2 = *(long *)(lVar13 + 0xc90);
    if (lVar2 == 0) {
      plVar9 = *(long **)(lVar13 + 0xc98);
      plVar8 = plVar9;
      if (*plVar9 != lVar13) {
LAB_00009300:
        pcVar14 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00009310:
        uVar7 = 0x216;
        uVar15 = 0x216;
LAB_0000934c:
                    // WARNING: Subroutine does not return
        _panic(pcVar14,lVar13,uVar7,"IGPagePool.cpp",uVar15);
      }
    }
    else {
      if (*(long *)(lVar2 + 0xc98) != lVar13 + 0xc90) {
        pcVar14 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00009310;
      }
      if (**(long **)(lVar13 + 0xc98) != lVar13) goto LAB_00009300;
      *(long **)(lVar2 + 0xc98) = *(long **)(lVar13 + 0xc98);
      plVar9 = *(long **)(lVar13 + 0xc98);
      plVar8 = local_50;
    }
    local_50 = plVar8;
    *plVar9 = lVar2;
    (**(code **)(**(long **)(lVar13 + 0x10) + 0x28))();
    *(undefined8 *)(lVar13 + 0x10) = 0;
    (**(code **)(**(long **)(lVar13 + 8) + 0x1f8))(*(long **)(lVar13 + 8),0);
    (**(code **)(**(long **)(lVar13 + 8) + 0x28))();
    _IOFreeTypeImpl(&prune(unsigned_int)::$_0::operator()(IGPagePool::PoolElement*)::
                     kalloc_type_view_488);
    lVar13 = lVar2;
  } while( true );
}



// IGPagePool::allocatePage()

long __thiscall IGPagePool::allocatePage(IGPagePool *this)

{
  long lVar1;
  byte bVar2;
  long in_RAX;
  ulong uVar3;
  long *plVar4;
  long lVar5;
  char *pcVar6;
  long local_38;
  
  local_38 = in_RAX;
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00061,0,0,0,0,0);
  }
LAB_000093ab:
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockLock(*(undefined8 *)(this + 0x68));
  }
  if (**(long **)(this + 0x28) == 0) goto LAB_000093d4;
  lVar5 = *(long *)(*(long **)(this + 0x28))[2];
  uVar3 = *(ulong *)(lVar5 + 0x40);
  if (uVar3 == 0) goto LAB_000093d4;
  local_38 = lVar5;
  if (uVar3 == 0xffffffffffffffff) {
    lVar1 = *(long *)(lVar5 + 0xc90);
    if (lVar1 == 0) {
      plVar4 = *(long **)(lVar5 + 0xc98);
      if (*plVar4 != lVar5) {
LAB_0000951f:
        pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0000952f:
                    // WARNING: Subroutine does not return
        _panic(pcVar6,lVar5,0x145,"IGPagePool.cpp",0x145);
      }
      *(long **)(this + 0x38) = plVar4;
    }
    else {
      if (*(long *)(lVar1 + 0xc98) != lVar5 + 0xc90) {
        pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_0000952f;
      }
      if (**(long **)(lVar5 + 0xc98) != lVar5) goto LAB_0000951f;
      *(long **)(lVar1 + 0xc98) = *(long **)(lVar5 + 0xc98);
      plVar4 = *(long **)(lVar5 + 0xc98);
    }
    *plVar4 = lVar1;
  }
  lVar1 = 0;
  if (uVar3 != 0) {
    for (; (uVar3 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
    }
  }
  *(long *)(this + 0x10) = *(long *)(this + 0x10) + -1;
  _clock_get_uptime(lVar5 + 0xc88);
  bVar2 = (byte)lVar1 & 0x3f;
  *(ulong *)(lVar5 + 0x40) =
       *(ulong *)(lVar5 + 0x40) & (-2L << bVar2 | 0xfffffffffffffffeU >> 0x40 - bVar2);
  IGPriorityQueue<>::eval(*(IGPriorityQueue<> **)(this + 0x28),&local_38);
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
  }
  lVar5 = lVar5 + lVar1 * 0x30 + 0x80;
  _OSAddAtomic64(1);
  if (_graphicsTracePointEnable == 0) {
    return lVar5;
  }
  goto LAB_000094d5;
LAB_000093d4:
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
  }
  uVar3 = grow(this);
  if ((char)uVar3 == '\0') {
    if (_graphicsTracePointEnable == 0) {
      lVar5 = 0;
    }
    else {
      lVar5 = 0;
LAB_000094d5:
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a00062,0,0,0,0,0);
      }
    }
    return lVar5;
  }
  goto LAB_000093ab;
}



// IGPagePool::grow()

ulong __thiscall IGPagePool::grow(IGPagePool *this)

{
  IGHashTable<> *this_00;
  IGVector<> *this_01;
  int iVar1;
  undefined8 *puVar2;
  long *plVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  byte bVar7;
  byte bVar8;
  undefined **ppuVar9;
  undefined8 *puVar10;
  long lVar11;
  ulong uVar12;
  long lVar13;
  bool bVar14;
  long local_48;
  undefined8 *local_40;
  IGHashTable<> *local_38;
  
  puVar2 = (undefined8 *)_IOMallocTypeImpl();
  local_40 = puVar2;
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00069,**(uintptr_t **)(this + 0x28),0,0,0,0);
  }
  if (puVar2 == (undefined8 *)0x0) {
LAB_00009a7b:
    if ((_graphicsTracePointEnable != 0) &&
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
      _kernel_debug(0x85a0006a,**(uintptr_t **)(this + 0x28),0,0,0,0);
    }
    uVar12 = CONCAT71((int7)((ulong)this >> 8),puVar2 != (undefined8 *)0x0);
  }
  else {
    plVar3 = (long *)IOBufferMemoryDescriptor::inTaskWithOptions
                               ((task *)0x0,0x23,(long)(0x40 << (*__got::_page_shift & 0x1f)),1);
    puVar2[1] = plVar3;
    if (plVar3 == (long *)0x0) {
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        _kernel_debug(0x85a0006a,0,0,0,0,0);
      }
      ppuVar9 = &grow()::kalloc_type_view_417;
LAB_000098c0:
      _IOFreeTypeImpl(ppuVar9,puVar2);
      uVar12 = 0;
      goto LAB_00009acb;
    }
    iVar1 = (**(code **)(*plVar3 + 0x1f0))(plVar3);
    if (iVar1 != 0) {
      if (this[100] != (IGPagePool)0x0) {
        _IOSimpleLockLock(*(undefined8 *)(this + 0x68));
      }
      prune(this,0);
      if (this[100] != (IGPagePool)0x0) {
        _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
      }
      iVar1 = (**(code **)(*(long *)puVar2[1] + 0x1f0))();
      if (iVar1 != 0) {
        if ((_graphicsTracePointEnable != 0) &&
           (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
          _kernel_debug(0x85a0006a,0,0,0,0,0);
        }
        (**(code **)(*(long *)puVar2[1] + 0x28))();
        ppuVar9 = &grow()::kalloc_type_view_432;
        goto LAB_000098c0;
      }
    }
    plVar3 = (long *)IOMemoryDescriptor::createMappingInTask
                               ((task *)puVar2[1],*(ulonglong *)__got::_kernel_task,0,1,0);
    if (plVar3 == (long *)0x0) {
      _IOLog("[IGPU] Failed to create pMap in IGPagePoolMemoryDescriptorMap!\n");
      _kprintf("[IGPU] Failed to create pMap in IGPagePoolMemoryDescriptorMap!\n");
      puVar2[3] = 0;
    }
    else {
      lVar4 = (**(code **)(*plVar3 + 0x118))(plVar3);
      puVar2[2] = plVar3;
      puVar2[3] = lVar4;
      if (lVar4 != 0) {
        uVar5 = _OSAddAtomic64(1,this + 0x20);
        *puVar2 = uVar5;
        puVar2[8] = 0xffffffffffffffff;
        puVar10 = puVar2 + 0x15;
        lVar4 = 0;
        do {
          lVar13 = lVar4 << (*__got::_page_shift & 0x3f);
          uVar5 = (**(code **)(*(long *)puVar2[1] + 0x138))
                            ((long *)puVar2[1],lVar13,0,
                             *(undefined4 *)
                              (*(long *)(&DAT_00001290 + *(long *)(this + 0x18)) + 0x88));
          lVar6 = puVar2[3];
          puVar10[-5] = this;
          puVar10[-4] = puVar2;
          puVar10[-3] = lVar4;
          puVar10[-2] = uVar5;
          puVar10[-1] = lVar13 + lVar6;
          *puVar10 = 0;
          lVar4 = lVar4 + 1;
          puVar10 = puVar10 + 6;
        } while (lVar4 != 0x40);
        if (this[100] != (IGPagePool)0x0) {
          _IOSimpleLockLock(*(undefined8 *)(this + 0x68));
        }
        this_01 = *(IGVector<> **)(this + 0x28);
        this_00 = (IGHashTable<> *)(this_01 + 0x18);
        uVar5 = IGHashTable<>::contains(this_00,&local_40);
        if ((char)uVar5 == '\0') {
          lVar4 = *(long *)this_01;
          if (lVar4 == *(long *)(this_01 + 8)) {
            uVar5 = IGVector<>::grow(this_01,lVar4 * 2);
            if ((char)uVar5 == '\0') goto LAB_00009a3b;
            lVar4 = *(long *)this_01;
          }
          *(long *)this_01 = lVar4 + 1;
          local_48 = lVar4;
          uVar5 = IGHashTable<>::add(this_00,&local_40,&local_48);
          lVar4 = *(long *)this_01;
          if ((char)uVar5 == '\0') {
            if (lVar4 != 0) {
              *(ulong *)this_01 = lVar4 - 1U;
              uVar12 = *(ulong *)(this_01 + 8);
              if (lVar4 - 1U < uVar12 >> 2) {
                local_38 = (IGHashTable<> *)(uVar12 >> 1);
                lVar4 = (long)local_38 * 8;
                if (lVar4 < 0) {
                  lVar4 = -0x8000000000000000;
                }
                if (uVar12 >> 0x3e != 0) {
                  lVar4 = -0x8000000000000000;
                }
                lVar4 = _IOMallocTypeVarImpl
                                  (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                                    kalloc_type_view_24,lVar4);
                if (lVar4 != 0) {
                  lVar6 = *(long *)this_01;
                  if (lVar6 != 0) {
                    lVar13 = 0;
                    do {
                      *(undefined8 *)(lVar4 + lVar13 * 8) =
                           *(undefined8 *)(*(long *)(this_01 + 0x10) + lVar13 * 8);
                      lVar13 = lVar13 + 1;
                    } while (lVar6 != lVar13);
                  }
                  lVar6 = *(ulong *)(this_01 + 8) << 3;
                  if (lVar6 < 0) {
                    lVar6 = -0x8000000000000000;
                  }
                  if (*(ulong *)(this_01 + 8) >> 0x3d != 0) {
                    lVar6 = -0x8000000000000000;
                  }
                  _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                      deallocate(IGPagePool::PoolElement**,unsigned_long)::
                                      kalloc_type_view_29,*(undefined8 *)(this_01 + 0x10),lVar6);
                  *(long *)(this_01 + 0x10) = lVar4;
                  *(IGHashTable<> **)(this_01 + 8) = local_38;
                }
              }
            }
          }
          else {
            lVar4 = lVar4 + -1;
            local_38 = this_00;
            if (0 < lVar4) {
              do {
                lVar11 = lVar4 + -1 >> 1;
                lVar6 = *(long *)(this_01 + 0x10);
                lVar13 = *(long *)(lVar6 + lVar11 * 8);
                bVar7 = ((uint)POPCOUNT(*(long *)(lVar13 + 0x40)) < 0x31) + 1;
                if (*(long *)(lVar13 + 0x40) == 0) {
                  bVar7 = 0;
                }
                bVar8 = ((uint)POPCOUNT(puVar2[8]) < 0x31) + 1;
                if (puVar2[8] == 0) {
                  bVar8 = 0;
                }
                bVar14 = bVar7 < bVar8;
                if (bVar7 == bVar8) {
                  bVar14 = *(ulong *)(lVar13 + 0xc88) < (ulong)puVar2[0x191];
                }
                if (!bVar14) break;
                *(long *)(lVar6 + lVar4 * 8) = lVar13;
                plVar3 = IGHashTable<>::operator[](local_38,(undefined8 *)(lVar6 + lVar11 * 8));
                *plVar3 = lVar4;
                bVar14 = 2 < lVar4;
                lVar4 = lVar11;
              } while (bVar14);
            }
            *(undefined8 **)(*(long *)(this_01 + 0x10) + lVar4 * 8) = puVar2;
            plVar3 = IGHashTable<>::operator[](local_38,&local_40);
            *plVar3 = lVar4;
          }
        }
LAB_00009a3b:
        *(long *)(this + 0x10) = *(long *)(this + 0x10) + 0x40;
        puVar2[0x192] = 0;
        plVar3 = *(long **)(this + 0x38);
        puVar2[0x193] = plVar3;
        *plVar3 = (long)puVar2;
        *(undefined8 **)(this + 0x38) = puVar2 + 0x192;
        if (this[100] != (IGPagePool)0x0) {
          _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
        }
        goto LAB_00009a7b;
      }
    }
    if ((_graphicsTracePointEnable != 0) &&
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
      _kernel_debug(0x85a0006a,0,0,0,0,0);
    }
    uVar12 = 0;
    (**(code **)(*(long *)puVar2[1] + 0x1f8))((long *)puVar2[1],0);
    (**(code **)(*(long *)puVar2[1] + 0x28))();
    _IOFreeTypeImpl(&grow()::kalloc_type_view_442,puVar2);
  }
LAB_00009acb:
  return uVar12 & 0xffffffff;
}



// IGPriorityQueue<IGPagePool::PoolElement*, IGPagePool::PoolElementCompare,
// IGPagePool::PoolElementHash, IGIOMallocAllocatorPolicy>::eval(IGPagePool::PoolElement* const&)

void __thiscall IGPriorityQueue<>::eval(IGPriorityQueue<> *this,long *param_1)

{
  IGHashTable<> *this_00;
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  ulong *puVar4;
  long lVar5;
  long lVar6;
  byte bVar7;
  byte bVar8;
  ulong uVar9;
  ulong uVar10;
  bool bVar11;
  
  this_00 = (IGHashTable<> *)(this + 0x18);
  uVar3 = IGHashTable<>::contains(this_00,param_1);
  if ((char)uVar3 == '\0') {
    return;
  }
  puVar4 = IGHashTable<>::operator[](this_00,param_1);
  uVar9 = *puVar4;
  if (uVar9 != 0) {
    lVar5 = *(long *)(this + 0x10);
    lVar1 = *(long *)(lVar5 + (uVar9 * 4 - 4 & 0xfffffffffffffff8));
    lVar6 = *param_1;
    lVar2 = *(long *)(lVar1 + 0x40);
    bVar7 = ((uint)POPCOUNT(lVar2) < 0x31) + 1;
    if (lVar2 == 0) {
      bVar7 = 0;
    }
    bVar8 = ((uint)POPCOUNT(*(long *)(lVar6 + 0x40)) < 0x31) + 1;
    if (*(long *)(lVar6 + 0x40) == 0) {
      bVar8 = 0;
    }
    bVar11 = bVar7 < bVar8;
    if (bVar7 == bVar8) {
      bVar11 = *(ulong *)(lVar1 + 0xc88) < *(ulong *)(lVar6 + 0xc88);
    }
    if (bVar11) {
      if (0 < (long)uVar9) {
        do {
          uVar10 = (long)(uVar9 - 1) >> 1;
          lVar5 = *(long *)(this + 0x10);
          lVar1 = *(long *)(lVar5 + uVar10 * 8);
          lVar6 = *param_1;
          bVar7 = ((uint)POPCOUNT(*(long *)(lVar1 + 0x40)) < 0x31) + 1;
          if (*(long *)(lVar1 + 0x40) == 0) {
            bVar7 = 0;
          }
          bVar8 = ((uint)POPCOUNT(*(long *)(lVar6 + 0x40)) < 0x31) + 1;
          if (*(long *)(lVar6 + 0x40) == 0) {
            bVar8 = 0;
          }
          bVar11 = bVar7 < bVar8;
          if (bVar7 == bVar8) {
            bVar11 = *(ulong *)(lVar1 + 0xc88) < *(ulong *)(lVar6 + 0xc88);
          }
          if (!bVar11) goto LAB_00009c44;
          *(long *)(lVar5 + uVar9 * 8) = lVar1;
          puVar4 = IGHashTable<>::operator[](this_00,(undefined8 *)(lVar5 + uVar10 * 8));
          *puVar4 = uVar9;
          bVar11 = 2 < (long)uVar9;
          uVar9 = uVar10;
        } while (bVar11);
        lVar6 = *param_1;
        lVar5 = *(long *)(this + 0x10);
      }
LAB_00009c44:
      *(long *)(lVar5 + uVar9 * 8) = lVar6;
      puVar4 = IGHashTable<>::operator[](this_00,param_1);
      *puVar4 = uVar9;
      return;
    }
  }
  percolateDown(this,param_1,uVar9,*(ulong *)this);
  return;
}



// IGPagePool::PageDescriptor::retain()

void __thiscall IGPagePool::PageDescriptor::retain(PageDescriptor *this)

{
  _OSAddAtomic64(1,this + 0x28);
  return;
}



// IGPagePool::releasePage(IGPagePool::PageDescriptor const*)

void __thiscall IGPagePool::releasePage(IGPagePool *this,long param_1)

{
  ulong *puVar1;
  long lVar2;
  long *plVar3;
  long local_30;
  
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00065,0,0,0,0,0);
    }
  }
  ___bzero(*(undefined8 *)(param_1 + 0x20),*(undefined8 *)__got::_page_size);
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockLock(*(undefined8 *)(this + 0x68));
  }
  lVar2 = *(long *)(param_1 + 8);
  puVar1 = (ulong *)(lVar2 + 0x40 + (*(ulong *)(param_1 + 0x10) >> 6) * 8);
  *puVar1 = *puVar1 | 1L << ((byte)*(ulong *)(param_1 + 0x10) & 0x3f);
  local_30 = lVar2;
  IGPriorityQueue<>::eval(*(IGPriorityQueue<> **)(this + 0x28),&local_30);
  *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
  if (*(long *)(lVar2 + 0x40) == -1) {
    _clock_get_uptime(lVar2 + 0xc80);
    *(undefined8 *)(lVar2 + 0xc90) = 0;
    plVar3 = *(long **)(this + 0x38);
    *(long **)(lVar2 + 0xc98) = plVar3;
    *plVar3 = lVar2;
    *(long *)(this + 0x38) = lVar2 + 0xc90;
    schedulePrune(this);
  }
  if (this[100] != (IGPagePool)0x0) {
    _IOSimpleLockUnlock(*(undefined8 *)(this + 0x68));
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00066,0,0,0,0,0);
      return;
    }
  }
  return;
}



// IGPagePool::schedulePrune()

void __thiscall IGPagePool::schedulePrune(IGPagePool *this)

{
  if (this[100] != (IGPagePool)0x0) {
    if ((*(long *)(this + 0x30) != 0) && (this[0x50] == (IGPagePool)0x0)) {
      (**(code **)(**(long **)(this + 0x48) + 0x1e8))
                (*(long **)(this + 0x48),*(undefined8 *)(this + 0x58));
      this[0x50] = (IGPagePool)0x1;
    }
    return;
  }
  prune(this,1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPagePool::pruneEvent(IOInterruptEventSource*, int)

void __cdecl IGPagePool::pruneEvent(IGPagePool *param_1)

{
  prune(param_1,1);
  if (param_1[100] != (IGPagePool)0x0) {
    _IOSimpleLockLock(*(undefined8 *)(param_1 + 0x68));
  }
  schedulePrune(param_1);
  if (param_1[100] != (IGPagePool)0x0) {
    _IOSimpleLockUnlock(*(undefined8 *)(param_1 + 0x68));
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPagePool::pruneTimer(IOTimerEventSource*)

void __cdecl IGPagePool::pruneTimer(long param_1)

{
  if (*(char *)(param_1 + 100) == '\0') {
    *(undefined1 *)(param_1 + 0x50) = 0;
  }
  else {
    _IOSimpleLockLock(*(undefined8 *)(param_1 + 0x68));
    *(undefined1 *)(param_1 + 0x50) = 0;
    if (*(char *)(param_1 + 100) != '\0') {
      _IOSimpleLockUnlock(*(undefined8 *)(param_1 + 0x68));
    }
  }
                    // WARNING: Could not recover jumptable at 0x00009eab. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(param_1 + 0x40) + 0x1d8))(*(long **)(param_1 + 0x40),0,0,0);
  return;
}



// IGPagePool::inPruneList(IGPagePool::PoolElement*)

undefined8 __thiscall IGPagePool::inPruneList(IGPagePool *this,long param_1)

{
  long lVar1;
  IGPagePool *pIVar2;
  
  pIVar2 = this + 0x30;
  do {
    lVar1 = *(long *)pIVar2;
    if (lVar1 == 0) break;
    pIVar2 = (IGPagePool *)(lVar1 + 0xc90);
  } while (lVar1 != param_1);
  return CONCAT71((int7)((ulong)lVar1 >> 8),lVar1 != 0);
}



// IGPagePool::registerEvents()

ulong __thiscall IGPagePool::registerEvents(IGPagePool *this)

{
  long lVar1;
  long *plVar2;
  undefined8 unaff_RBX;
  ulong uVar3;
  
  uVar3 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
  if (this[100] != (IGPagePool)0x0) {
    lVar1 = IOInterruptEventSource::interruptEventSource
                      ((OSObject *)this,pruneEvent,(IOService *)0x0,0);
    *(long *)(this + 0x40) = lVar1;
    if (lVar1 != 0) {
      lVar1 = IOTimerEventSource::timerEventSource((OSObject *)this,pruneTimer);
      *(long *)(this + 0x48) = lVar1;
      if (lVar1 != 0) {
        plVar2 = (long *)(**(code **)(**(long **)(this + 0x18) + 0x688))();
        (**(code **)(*plVar2 + 0x140))(plVar2,*(undefined8 *)(this + 0x40));
        (**(code **)(**(long **)(this + 0x40) + 0x150))();
        (**(code **)(*plVar2 + 0x140))(plVar2,*(undefined8 *)(this + 0x48));
        (**(code **)(**(long **)(this + 0x48) + 0x150))();
        goto LAB_00009f81;
      }
      if (*(long **)(this + 0x40) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x40) + 0x28))();
      }
      *(undefined8 *)(this + 0x40) = 0;
    }
    uVar3 = 0;
  }
LAB_00009f81:
  return uVar3 & 0xffffffff;
}



// IGPagePool::describeDriverAllocations(IOAccelAllocationInfo*, int)

void IGPagePool::describeDriverAllocations(void)

{
  return;
}



// IGPagePool::PageDescriptor::release()

void __thiscall IGPagePool::PageDescriptor::release(PageDescriptor *this)

{
  long lVar1;
  
  lVar1 = _OSAddAtomic64(0xffffffffffffffff,this + 0x28);
  if (lVar1 == 1) {
    releasePage(*(IGPagePool **)this,(long)this);
    return;
  }
  return;
}



// IGPagePool::MetaClass::~MetaClass()

void __thiscall IGPagePool::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGVector<IGPagePool::PoolElement*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IGPagePool::PoolElement**,unsigned_long)::
                                    kalloc_type_view_29,lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// IGVector<IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __thiscall IGVector<>::IGVector(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  if (param_1 != 0) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x18),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x18),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x18;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x18) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      *(ulong *)this = param_1;
    }
  }
  return;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  IGVector<> *this_00;
  long lVar3;
  long lVar4;
  char *pcVar5;
  ulong uVar6;
  
  *(undefined ***)this = &__const::~IGHashTable;
  lVar3 = *(long *)(this + 8);
  if ((lVar3 != 0) && (*(long *)(lVar3 + 8) != 0)) {
    lVar4 = *(long *)(lVar3 + 0x10);
    uVar6 = 0;
    do {
      lVar1 = *(long *)(lVar4 + uVar6 * 0x18);
      if (lVar1 != 0) {
        for (lVar3 = *(long *)(lVar1 + 0x10); lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x10)) {
          if (*(long *)(lVar3 + 0x18) != lVar1 + 0x10) {
            pcVar5 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_0000a2cd;
          }
          if (**(long **)(lVar1 + 0x18) != lVar1) goto LAB_0000a2c6;
          *(long **)(lVar3 + 0x18) = *(long **)(lVar1 + 0x18);
          **(long **)(lVar1 + 0x18) = lVar3;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar3;
        }
        plVar2 = *(long **)(lVar1 + 0x18);
        if (*plVar2 != lVar1) {
LAB_0000a2c6:
          pcVar5 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0000a2cd:
                    // WARNING: Subroutine does not return
          _panic(pcVar5,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar6 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        lVar3 = *(long *)(this + 8);
        lVar4 = *(long *)(lVar3 + 0x10);
      }
      *(undefined8 *)(lVar4 + 0x10 + uVar6 * 0x18) = 0;
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ulong *)(lVar3 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  shrinkIfNeeded(this);
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 != (IGVector<> *)0x0) {
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
    return;
  }
  return;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// IGVector<IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::shrinkIfNeeded()

void __thiscall IGHashTable<>::shrinkIfNeeded(IGHashTable<> *this)

{
  ulong uVar1;
  
  if ((this[0x20] != (IGHashTable<>)0x0) && (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) {
    if ((((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 < 0xc) &&
       ((ulong)(*(long *)(this + 0x18) * 100) / *(ulong *)(*(long *)(this + 8) + 8) < 0xc)) {
      resizeAndRehash(this,*(ulong *)(*(long *)(this + 8) + 8) >> 1);
      return;
    }
  }
  return;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::resizeAndRehash(unsigned long)

bool __thiscall IGHashTable<>::resizeAndRehash(IGHashTable<> *this,ulong param_1)

{
  IGVector<> *this_00;
  long lVar1;
  IGVector<> *this_01;
  long lVar2;
  undefined8 *puVar3;
  ulong uVar4;
  long *plVar5;
  char *pcVar6;
  ulong uVar7;
  long lVar8;
  
  this_00 = *(IGVector<> **)(this + 8);
  this_01 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_01,param_1);
  *(IGVector<> **)(this + 8) = this_01;
  if (this_01 != (IGVector<> *)0x0) {
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    lVar2 = *(long *)(this_01 + 8);
    if (lVar2 != 0) {
      puVar3 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar3 = 0;
        puVar3[1] = puVar3;
        puVar3[2] = 0;
        puVar3 = puVar3 + 3;
        lVar2 = lVar2 + -1;
      } while (lVar2 != 0);
    }
    lVar2 = *(long *)this_00;
    if (lVar2 != 0) {
      lVar8 = 0;
      do {
        for (puVar3 = *(undefined8 **)(*(long *)(this_00 + 0x10) + lVar8 * 0x18);
            puVar3 != (undefined8 *)0x0; puVar3 = (undefined8 *)puVar3[2]) {
          add(this,puVar3,puVar3 + 1);
        }
        lVar8 = lVar8 + 1;
      } while (lVar8 != lVar2);
    }
    uVar4 = *(ulong *)(this_00 + 8);
    if (uVar4 != 0) {
      lVar2 = *(long *)(this_00 + 0x10);
      uVar7 = 0;
      do {
        lVar8 = *(long *)(lVar2 + uVar7 * 0x18);
        if (lVar8 != 0) {
          do {
            lVar1 = *(long *)(lVar8 + 0x10);
            if (lVar1 == 0) {
              plVar5 = *(long **)(lVar8 + 0x18);
              if (*plVar5 != lVar8) {
LAB_0000a4fe:
                pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0000a50e:
                    // WARNING: Subroutine does not return
                _panic(pcVar6,lVar8,0x230,"IGHash.h",0x230);
              }
              *(long **)(lVar2 + 8 + uVar7 * 0x18) = plVar5;
            }
            else {
              if (*(long *)(lVar1 + 0x18) != lVar8 + 0x10) {
                pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
                goto LAB_0000a50e;
              }
              if (**(long **)(lVar8 + 0x18) != lVar8) goto LAB_0000a4fe;
              *(long **)(lVar1 + 0x18) = *(long **)(lVar8 + 0x18);
              plVar5 = *(long **)(lVar8 + 0x18);
            }
            *plVar5 = lVar1;
            _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                             kalloc_type_view_19);
            lVar2 = *(long *)(this_00 + 0x10);
            lVar8 = *(long *)(lVar2 + uVar7 * 0x18);
          } while (lVar8 != 0);
          uVar4 = *(ulong *)(this_00 + 8);
        }
        uVar7 = uVar7 + 1;
      } while (uVar7 < uVar4);
    }
    *(undefined8 *)this_00 = 0;
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
  }
  return this_01 != (IGVector<> *)0x0;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::add(IGPagePool::PoolElement* const&, unsigned long const&)

undefined8 __thiscall
IGHashTable<>::add(IGHashTable<> *this,undefined8 *param_1,undefined8 *param_2)

{
  ulong uVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  undefined8 *puVar6;
  ulong uVar7;
  
  if (*(long *)(this + 8) != 0) {
    uVar7 = *(ulong *)(*(long *)(this + 8) + 8);
    if ((((uVar7 < 0x4000) && (this[0x20] != (IGHashTable<>)0x0)) &&
        (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) &&
       ((0x32 < ((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 &&
        (0x19 < (ulong)(*(long *)(this + 0x18) * 100) / uVar7)))) {
      resizeAndRehash(this,uVar7 * 2);
      uVar7 = *(ulong *)(*(long *)(this + 8) + 8);
    }
    uVar1 = *(ulong *)*param_1;
    puVar6 = (undefined8 *)
             _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
    if (puVar6 != (undefined8 *)0x0) {
      lVar4 = 0;
      if (uVar7 != 0) {
        for (; (uVar7 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      *puVar6 = *param_1;
      puVar6[1] = *param_2;
      puVar6[2] = 0;
      lVar5 = (uVar1 & ~(-1L << ((byte)lVar4 & 0x3f))) * 0x18;
      puVar2 = *(undefined8 **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + lVar5);
      puVar6[3] = puVar2;
      *puVar2 = puVar6;
      lVar4 = *(long *)(*(long *)(this + 8) + 0x10);
      *(undefined8 **)(lVar4 + 8 + lVar5) = puVar6 + 2;
      lVar3 = *(long *)(lVar4 + 0x10 + lVar5);
      *(long *)(lVar4 + 0x10 + lVar5) = lVar3 + 1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) + (ulong)(lVar3 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
      return CONCAT71((int7)((ulong)lVar4 >> 8),1);
    }
  }
  return 0;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::contains(IGPagePool::PoolElement* const&) const

undefined8 __thiscall IGHashTable<>::contains(IGHashTable<> *this,undefined8 *param_1)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 *puVar5;
  bool bVar6;
  
  lVar1 = *(long *)(this + 8);
  if (lVar1 != 0) {
    lVar3 = 0;
    if (*(ulong *)(lVar1 + 8) != 0) {
      for (; (*(ulong *)(lVar1 + 8) >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
      }
    }
    uVar2 = *(ulong *)*param_1;
    puVar5 = *(undefined8 **)
              (*(long *)(lVar1 + 0x10) + (~(-1L << ((byte)lVar3 & 0x3f)) & uVar2) * 0x18);
    if (puVar5 != (undefined8 *)0x0) {
      do {
        bVar6 = *(ulong *)*puVar5 == uVar2;
        uVar4 = CONCAT71((int7)((ulong)*puVar5 >> 8),bVar6);
        if (bVar6) {
          return uVar4;
        }
        puVar5 = (undefined8 *)puVar5[2];
      } while (puVar5 != (undefined8 *)0x0);
      return uVar4;
    }
  }
  return 0;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::operator[](IGPagePool::PoolElement* const&)

undefined8 * __thiscall IGHashTable<>::operator[](IGHashTable<> *this,undefined8 *param_1)

{
  ulong *puVar1;
  long lVar2;
  undefined8 *puVar3;
  
  puVar1 = (ulong *)(*(long *)(this + 8) + 8);
  lVar2 = 0;
  if (*puVar1 != 0) {
    for (; (*puVar1 >> lVar2 & 1) == 0; lVar2 = lVar2 + 1) {
    }
  }
  for (puVar3 = *(undefined8 **)
                 (*(long *)(*(long *)(this + 8) + 0x10) +
                 (~(-1L << ((byte)lVar2 & 0x3f)) & *(ulong *)*param_1) * 0x18);
      puVar3 != (undefined8 *)0x0; puVar3 = (undefined8 *)puVar3[2]) {
    if (*(ulong *)*puVar3 == *(ulong *)*param_1) goto LAB_0000a6e8;
  }
  puVar3 = (undefined8 *)0x0;
LAB_0000a6e8:
  return puVar3 + 1;
}



// IGPriorityQueue<IGPagePool::PoolElement*, IGPagePool::PoolElementCompare,
// IGPagePool::PoolElementHash, IGIOMallocAllocatorPolicy>::percolateDown(IGPagePool::PoolElement*
// const&, unsigned long, unsigned long)

void __thiscall
IGPriorityQueue<>::percolateDown(IGPriorityQueue<> *this,long *param_1,ulong param_2,ulong param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  ulong *puVar5;
  ulong uVar6;
  byte bVar7;
  byte bVar8;
  ulong uVar9;
  bool bVar10;
  
  uVar6 = param_2 * 2 + 1;
  if (uVar6 < *(ulong *)this) {
    do {
      uVar9 = param_2 * 2 + 2;
      lVar1 = *(long *)(this + 0x10);
      if (uVar9 < param_3) {
        lVar2 = *(long *)(lVar1 + uVar6 * 8);
        lVar3 = *(long *)(lVar2 + 0x40);
        bVar8 = 0;
        if (lVar3 != 0) {
          bVar8 = ((uint)POPCOUNT(lVar3) < 0x31) + 1;
        }
        lVar3 = *(long *)(lVar1 + 0x10 + param_2 * 0x10);
        lVar4 = *(long *)(lVar3 + 0x40);
        bVar7 = 0;
        if (lVar4 != 0) {
          bVar7 = ((uint)POPCOUNT(lVar4) < 0x31) + 1;
        }
        bVar10 = bVar8 < bVar7;
        if (bVar8 == bVar7) {
          bVar10 = *(ulong *)(lVar2 + 0xc88) < *(ulong *)(lVar3 + 0xc88);
        }
        if (!bVar10) goto LAB_0000a79c;
      }
      else {
LAB_0000a79c:
        uVar9 = uVar6;
      }
      lVar2 = *(long *)(*param_1 + 0x40);
      bVar8 = ((uint)POPCOUNT(lVar2) < 0x31) + 1;
      if (lVar2 == 0) {
        bVar8 = 0;
      }
      lVar2 = *(long *)(lVar1 + uVar9 * 8);
      bVar7 = 0;
      if (*(long *)(lVar2 + 0x40) != 0) {
        bVar7 = ((uint)POPCOUNT(*(long *)(lVar2 + 0x40)) < 0x31) + 1;
      }
      bVar10 = bVar8 < bVar7;
      if (bVar8 == bVar7) {
        bVar10 = *(ulong *)(*param_1 + 0xc88) < *(ulong *)(lVar2 + 0xc88);
      }
      if (!bVar10) break;
      *(long *)(lVar1 + param_2 * 8) = lVar2;
      puVar5 = IGHashTable<>::operator[]
                         ((IGHashTable<> *)(this + 0x18),(undefined8 *)(lVar1 + uVar9 * 8));
      *puVar5 = param_2;
      uVar6 = uVar9 * 2 + 1;
      param_2 = uVar9;
    } while (uVar6 < *(ulong *)this);
  }
  *(long *)(*(long *)(this + 0x10) + param_2 * 8) = *param_1;
  puVar5 = IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x18),param_1);
  *puVar5 = param_2;
  return;
}



// IGHashTable<IGPagePool::PoolElement*, unsigned long, IGPagePool::PoolElementHash,
// IGIOMallocAllocatorPolicy>::remove(IGPagePool::PoolElement* const&)

int __thiscall IGHashTable<>::remove(IGHashTable<> *this,char *param_1)

{
  undefined8 *puVar1;
  long *plVar2;
  long lVar3;
  undefined8 *puVar4;
  long lVar5;
  int iVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  ulong uVar9;
  char *pcVar10;
  
  lVar3 = *(long *)(this + 8);
  if (lVar3 == 0) {
    return 0;
  }
  lVar5 = 0;
  if (*(ulong *)(lVar3 + 8) != 0) {
    for (; (*(ulong *)(lVar3 + 8) >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
    }
  }
  uVar9 = ~(-1L << ((byte)lVar5 & 0x3f)) & **(ulong **)param_1;
  puVar1 = (undefined8 *)(*(long *)(lVar3 + 0x10) + uVar9 * 0x18);
  puVar4 = (undefined8 *)*puVar1;
  do {
    puVar7 = puVar4;
    if (puVar7 == (undefined8 *)0x0) {
      return 0;
    }
    puVar4 = (undefined8 *)puVar7[2];
  } while (*(ulong *)*puVar7 != **(ulong **)param_1);
  if (puVar4 == (undefined8 *)0x0) {
    puVar8 = (undefined8 *)puVar7[3];
    if ((undefined8 *)*puVar8 == puVar7) {
      puVar1[1] = puVar8;
LAB_0000a8d7:
      *puVar8 = puVar4;
      _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                       kalloc_type_view_19);
      plVar2 = (long *)(*(long *)(*(long *)(this + 8) + 0x10) + 0x10 + uVar9 * 0x18);
      *plVar2 = *plVar2 + -1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) - (ulong)(*plVar2 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + -1;
      iVar6 = shrinkIfNeeded(this);
      return iVar6;
    }
  }
  else {
    if ((undefined8 *)puVar4[3] != puVar7 + 2) {
      pcVar10 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
      goto LAB_0000a91c;
    }
    if (*(undefined8 **)puVar7[3] == puVar7) {
      puVar4[3] = (undefined8 *)puVar7[3];
      puVar8 = (undefined8 *)puVar7[3];
      goto LAB_0000a8d7;
    }
  }
  pcVar10 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0000a91c:
                    // WARNING: Subroutine does not return
  _panic(pcVar10,puVar7,0x312,"IGHash.h",0x312);
}



void __GLOBAL__sub_I_IGPagePool_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGPagePool::gMetaClass,"IGPagePool",(OSMetaClass *)__got::gMetaClass,
             0x78);
  IGPagePool::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGPagePool::gMetaClass);
  return;
}



// IGStolenMemoryPool::MetaClass::MetaClass()

void __thiscall IGStolenMemoryPool::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGStolenMemoryPool",(OSMetaClass *)__got::gMetaClass,0x80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGStolenMemoryPool::MetaClass::~MetaClass()

void __thiscall IGStolenMemoryPool::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGStolenMemoryPool::IGStolenMemoryPool(OSMetaClass const*)

void __thiscall
IGStolenMemoryPool::IGStolenMemoryPool(IGStolenMemoryPool *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGStolenMemoryPool;
  return;
}



// IGStolenMemoryPool::IGStolenMemoryPool(OSMetaClass const*)

void __thiscall
IGStolenMemoryPool::IGStolenMemoryPool(IGStolenMemoryPool *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGStolenMemoryPool;
  return;
}



// IGStolenMemoryPool::~IGStolenMemoryPool()

void __thiscall IGStolenMemoryPool::~IGStolenMemoryPool(IGStolenMemoryPool *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGStolenMemoryPool::~IGStolenMemoryPool()

void __thiscall IGStolenMemoryPool::~IGStolenMemoryPool(IGStolenMemoryPool *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGStolenMemoryPool::~IGStolenMemoryPool()

void __thiscall IGStolenMemoryPool::~IGStolenMemoryPool(IGStolenMemoryPool *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGStolenMemoryPool_ktv,this,0x80);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGStolenMemoryPool::operator delete(void*, unsigned long)

void __cdecl IGStolenMemoryPool::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGStolenMemoryPool_ktv,param_1,param_2);
  return;
}



// IGStolenMemoryPool::getMetaClass() const

undefined8 * IGStolenMemoryPool::getMetaClass(void)

{
  return &gMetaClass;
}



// IGStolenMemoryPool::MetaClass::MetaClass()

void __thiscall IGStolenMemoryPool::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGStolenMemoryPool",(OSMetaClass *)__got::gMetaClass,0x80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGStolenMemoryPool::MetaClass::alloc() const

OSObject * IGStolenMemoryPool::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGStolenMemoryPool_ktv,0x80);
  OSObject::OSObject(this,(OSMetaClass *)&IGStolenMemoryPool::gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryPool;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGStolenMemoryPool::operator new(unsigned long)

void * __thiscall IGStolenMemoryPool::operator_new(IGStolenMemoryPool *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGStolenMemoryPool_ktv,this);
  return pvVar1;
}



// IGStolenMemoryPool::IGStolenMemoryPool()

void __thiscall IGStolenMemoryPool::IGStolenMemoryPool(IGStolenMemoryPool *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryPool;
  OSMetaClass::instanceConstructed();
  return;
}



// IGStolenMemoryPool::IGStolenMemoryPool()

void __thiscall IGStolenMemoryPool::IGStolenMemoryPool(IGStolenMemoryPool *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryPool;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGStolenMemoryPool::withRanges(_stolenMemInfo const&, IntelAccelerator*)

IGStolenMemoryPool * __cdecl IGStolenMemoryPool::withRanges(undefined8 *param_1,undefined8 param_2)

{
  undefined4 uVar1;
  IGStolenMemoryPool *this;
  
  this = (IGStolenMemoryPool *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGStolenMemoryPool *)0x0) {
    uVar1 = init(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGStolenMemoryPool *)0x0;
}



// IGStolenMemoryPool::init(_stolenMemInfo const&, IntelAccelerator*)

undefined4 __thiscall
IGStolenMemoryPool::init(IGStolenMemoryPool *this,undefined8 *param_1,undefined8 param_2)

{
  undefined8 uVar1;
  bool bVar2;
  undefined4 uVar3;
  IGRangeAllocator *pIVar4;
  long local_38;
  undefined8 local_30;
  
  uVar3 = (**(code **)(__got::vtable + 0x98))();
  if ((char)uVar3 != '\0') {
    *(undefined8 *)(this + 0x10) = param_2;
    *(undefined8 *)(this + 0x18) = 0;
    *(undefined8 *)(this + 0x20) = 0;
    uVar1 = param_1[1];
    *(undefined8 *)(this + 0x28) = *param_1;
    *(undefined8 *)(this + 0x30) = uVar1;
    *(undefined8 *)(this + 0x38) = param_1[2];
    *(undefined8 *)(this + 0x40) = param_1[3];
    *(undefined8 *)(this + 0x48) = param_1[4];
    *(undefined8 *)(this + 0x50) = 0;
    *(undefined8 *)(this + 0x58) = 0;
    *(undefined8 *)(this + 0x60) = 0;
    *(undefined8 *)(this + 0x68) = 0;
    *(undefined8 *)(this + 0x70) = 0;
    *(IGStolenMemoryPool **)(this + 0x78) = this + 0x70;
    bVar2 = createDescriptor(this);
    if (bVar2) {
      local_30 = (**(code **)(**(long **)(this + 0x18) + 0x1c8))();
      local_38 = 0;
      pIVar4 = IGRangeAllocator::withRange(&local_38,*(undefined8 *)__got::_page_size);
      *(IGRangeAllocator **)(this + 0x20) = pIVar4;
      if (pIVar4 == (IGRangeAllocator *)0x0) {
        (**(code **)(**(long **)(this + 0x18) + 0x28))();
        *(undefined8 *)(this + 0x18) = 0;
      }
    }
  }
  return uVar3;
}



// IGStolenMemoryPool::createDescriptor()

bool __thiscall IGStolenMemoryPool::createDescriptor(IGStolenMemoryPool *this)

{
  IOMemoryDescriptor **ppIVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  long local_40;
  ulong local_38;
  IOMemoryDescriptor **local_30;
  
  local_30 = (IOMemoryDescriptor **)0x0;
  local_38 = 0;
  local_40 = 0;
  IGVector<>::grow((IGVector<> *)&local_40,4);
  prepareDescriptorList(this,(IGVector<> *)&local_40);
  ppIVar1 = local_30;
  lVar4 = local_40;
  if (local_40 == 0) {
    lVar4 = *(long *)(this + 0x18);
    if (local_30 == (IOMemoryDescriptor **)0x0) goto LAB_0000ad39;
  }
  else {
    lVar3 = 0;
    uVar2 = IOMultiMemoryDescriptor::withDescriptors(local_30,(uint)local_40,0x43,false);
    *(undefined8 *)(this + 0x18) = uVar2;
    do {
      (**(code **)(*(long *)ppIVar1[lVar3] + 0x28))();
      lVar3 = lVar3 + 1;
    } while (lVar4 != lVar3);
    lVar4 = *(long *)(this + 0x18);
  }
  lVar3 = local_38 << 3;
  if (lVar3 < 0) {
    lVar3 = -0x8000000000000000;
  }
  if (local_38 >> 0x3d != 0) {
    lVar3 = -0x8000000000000000;
  }
  _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOMemoryDescriptor**,unsigned_long)::
                      kalloc_type_view_29,ppIVar1,lVar3);
LAB_0000ad39:
  return lVar4 != 0;
}



// IGStolenMemoryPool::free()

void __thiscall IGStolenMemoryPool::free(IGStolenMemoryPool *this,void *param_1)

{
  if (*(long **)(this + 0x18) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x18) + 0x28))();
  }
  if (*(long **)(this + 0x20) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x20) + 0x28))();
  }
                    // WARNING: Could not recover jumptable at 0x0000ad83. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGStolenMemoryPool::prepareDescriptorList(IGVector<IOMemoryDescriptor*,
// IGIOMallocAllocatorPolicy>&)

void __thiscall
IGStolenMemoryPool::prepareDescriptorList(IGStolenMemoryPool *this,IGVector<> *param_1)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  long lVar5;
  IGStolenMemoryPool *pIVar6;
  ulong uVar7;
  
  if (*(int *)(this + 0x28) != 0) {
    pIVar6 = this + 0x38;
    uVar7 = 0;
    do {
      uVar1 = *(uint *)pIVar6;
      lVar2 = *(long *)__got::_page_size;
      lVar3 = IOMemoryDescriptor::withPhysicalAddress
                        (*(ulonglong *)(pIVar6 + -8),(ulong)uVar1 * lVar2,3);
      if (lVar3 != 0) {
        lVar5 = *(long *)param_1;
        if (lVar5 == *(long *)(param_1 + 8)) {
          uVar4 = IGVector<>::grow(param_1,lVar5 * 2);
          if ((char)uVar4 != '\0') {
            lVar5 = *(long *)param_1;
            goto LAB_0000adf3;
          }
        }
        else {
LAB_0000adf3:
          *(long *)param_1 = lVar5 + 1;
          *(long *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = lVar3;
        }
        *(ulong *)(this + 0x60) = *(long *)(this + 0x60) + (ulong)uVar1 * lVar2;
      }
      uVar7 = uVar7 + 1;
      pIVar6 = pIVar6 + 0x10;
    } while (uVar7 < *(uint *)(this + 0x28));
  }
  return;
}



// IGStolenMemoryPool::completeDescriptorList(IGVector<IOMemoryDescriptor*,
// IGIOMallocAllocatorPolicy>&)

void __thiscall IGStolenMemoryPool::completeDescriptorList(IGStolenMemoryPool *this,long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (lVar1 != 0) {
    lVar2 = 0;
    do {
      (**(code **)(**(long **)(param_1[2] + lVar2 * 8) + 0x28))();
      lVar2 = lVar2 + 1;
    } while (lVar1 != lVar2);
  }
  return;
}



// IGStolenMemoryPool::allocate(unsigned long)

long * __thiscall IGStolenMemoryPool::allocate(IGStolenMemoryPool *this,long param_1)

{
  undefined8 *puVar1;
  char cVar2;
  long *plVar3;
  
  if ((*(long **)(this + 0x20) != (long *)0x0) &&
     (cVar2 = (**(code **)(**(long **)(this + 0x20) + 0x150))(), cVar2 != '\0')) {
    plVar3 = IGStolenMemoryDescriptor::withSubRange
                       ((long)this,*(undefined8 *)(this + 0x18),0,param_1,0x43);
    if (plVar3 != (long *)0x0) {
      *(long *)(this + 0x50) = *(long *)(this + 0x50) + 1;
      *(long *)(this + 0x68) = *(long *)(this + 0x68) + param_1;
      plVar3[0x10] = 0;
      puVar1 = *(undefined8 **)(this + 0x78);
      plVar3[0x11] = (long)puVar1;
      *puVar1 = plVar3;
      *(long **)(this + 0x78) = plVar3 + 0x10;
      return plVar3;
    }
    (**(code **)(**(long **)(this + 0x20) + 0x160))(*(long **)(this + 0x20),0,param_1);
    return (long *)0x0;
  }
  return (long *)0x0;
}



// IGStolenMemoryPool::deallocate(IGStolenMemoryDescriptor*, unsigned long long, unsigned long)

void __thiscall
IGStolenMemoryPool::deallocate
          (IGStolenMemoryPool *this,long param_1,undefined8 param_2,long param_3)

{
  long lVar1;
  long *plVar2;
  char *pcVar3;
  
  (**(code **)(**(long **)(this + 0x20) + 0x160))(*(long **)(this + 0x20),param_2,param_3);
  *(long *)(this + 0x68) = *(long *)(this + 0x68) - param_3;
  lVar1 = *(long *)(param_1 + 0x80);
  if (lVar1 == 0) {
    plVar2 = *(long **)(param_1 + 0x88);
    if (*plVar2 == param_1) {
      *(long **)(this + 0x78) = plVar2;
LAB_0000af82:
      *plVar2 = lVar1;
      *(long *)(this + 0x58) = *(long *)(this + 0x58) + 1;
      return;
    }
  }
  else {
    if (*(long *)(lVar1 + 0x88) != param_1 + 0x80) {
      pcVar3 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
      goto LAB_0000afa4;
    }
    if (**(long **)(param_1 + 0x88) == param_1) {
      *(long **)(lVar1 + 0x88) = *(long **)(param_1 + 0x88);
      plVar2 = *(long **)(param_1 + 0x88);
      goto LAB_0000af82;
    }
  }
  pcVar3 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0000afa4:
                    // WARNING: Subroutine does not return
  _panic(pcVar3,param_1,0x113,"IGStolenMemoryPool.cpp",0x113);
}



// IGStolenMemoryPool::purge()

void __thiscall IGStolenMemoryPool::purge(IGStolenMemoryPool *this)

{
  long *plVar1;
  
  for (plVar1 = *(long **)(this + 0x70); plVar1 != (long *)0x0; plVar1 = (long *)plVar1[0x10]) {
    (**(code **)(*plVar1 + 0x120))(plVar1,4,0);
  }
  return;
}



// IGStolenMemoryPool::MetaClass::~MetaClass()

void __thiscall IGStolenMemoryPool::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGVector<IOMemoryDescriptor*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOMemoryDescriptor**,unsigned_long)::
                                    kalloc_type_view_29,lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



void __GLOBAL__sub_I_IGStolenMemoryPool_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGStolenMemoryPool::gMetaClass,"IGStolenMemoryPool",
             (OSMetaClass *)__got::gMetaClass,0x80);
  IGStolenMemoryPool::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGStolenMemoryPool::gMetaClass);
  return;
}



// IGHardwarePerProcessPageTable64::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable64::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable64",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0x60);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable64::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable64::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64(OSMetaClass const*)

void __thiscall
IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this,OSMetaClass *param_1)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable64;
  return;
}



// IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64(OSMetaClass const*)

void __thiscall
IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this,OSMetaClass *param_1)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable64;
  return;
}



// IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64()

void __thiscall
IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  return;
}



// IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64()

void __thiscall
IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  return;
}



// IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64()

void __thiscall
IGHardwarePerProcessPageTable64::~IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  _OSObject_typed_operator_delete(&IGHardwarePerProcessPageTable64_ktv,this,0x60);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::operator delete(void*, unsigned long)

void __cdecl IGHardwarePerProcessPageTable64::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwarePerProcessPageTable64_ktv,param_1,param_2);
  return;
}



// IGHardwarePerProcessPageTable64::getMetaClass() const

undefined8 * IGHardwarePerProcessPageTable64::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwarePerProcessPageTable64::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable64::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable64",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0x60);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable64::MetaClass::alloc() const

IGHardwarePerProcessPageTable * IGHardwarePerProcessPageTable64::MetaClass::alloc(void)

{
  IGHardwarePerProcessPageTable *this;
  
  this = (IGHardwarePerProcessPageTable *)
         _OSObject_typed_operator_new(&IGHardwarePerProcessPageTable64_ktv,0x60);
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            (this,(OSMetaClass *)&IGHardwarePerProcessPageTable64::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable64;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwarePerProcessPageTable64::operator new(unsigned long)

void * __thiscall
IGHardwarePerProcessPageTable64::operator_new(IGHardwarePerProcessPageTable64 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwarePerProcessPageTable64_ktv,this);
  return pvVar1;
}



// IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64()

void __thiscall
IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable64;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64()

void __thiscall
IGHardwarePerProcessPageTable64::IGHardwarePerProcessPageTable64
          (IGHardwarePerProcessPageTable64 *this)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable64;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::withOptions(IntelAccelerator*, IGAccelTask*)

IGHardwarePerProcessPageTable * __cdecl
IGHardwarePerProcessPageTable64::withOptions(undefined8 param_1,undefined8 param_2)

{
  char cVar1;
  IGHardwarePerProcessPageTable *this;
  
  this = (IGHardwarePerProcessPageTable *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwarePerProcessPageTable *)0x0) {
    *(undefined8 *)(this + 0x58) = 0;
    *(undefined8 *)(this + 0x50) = 0;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    cVar1 = IGHardwarePerProcessPageTable::initWithOptions(this,param_1,param_2,1);
    if (cVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwarePerProcessPageTable *)0x0;
}



// IGHardwarePerProcessPageTable64::initWithOptions(IntelAccelerator*, IGAccelTask*)

void __thiscall
IGHardwarePerProcessPageTable64::initWithOptions
          (IGHardwarePerProcessPageTable64 *this,undefined8 param_1,undefined8 param_2)

{
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  IGHardwarePerProcessPageTable::initWithOptions
            ((IGHardwarePerProcessPageTable *)this,param_1,param_2,1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::free()

void __cdecl IGHardwarePerProcessPageTable64::free(void *param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long *plVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  long lVar10;
  long lVar11;
  
  if (*(long *)((long)param_1 + 0x40) != 0) {
    lVar10 = 0;
    do {
      lVar1 = *(long *)((long)param_1 + 0x48);
      lVar6 = lVar10 * 0x20;
      if (*(long *)(lVar1 + lVar6) != 0) {
        plVar5 = (long *)(lVar1 + lVar6 + 8);
        lVar9 = 0;
        do {
          lVar2 = *plVar5;
          lVar8 = lVar9 * 0x20;
          if (*(long *)(lVar2 + lVar8) != 0) {
            if (*(short *)(lVar2 + 0x12 + lVar8) == 0) {
              lVar7 = 0;
              lVar11 = 0;
              do {
                lVar3 = *(long *)(lVar2 + lVar8 + 8);
                if (*(long *)(lVar3 + lVar7) != 0) {
                  *(undefined2 *)(lVar3 + 0x10 + lVar7) = 0;
                  lVar4 = *(long *)(lVar3 + 8 + lVar7);
                  if (lVar4 != 0) {
                    ___bzero(lVar4,0x4000);
                  }
                  shrinkLevel<>((long)param_1,(undefined8 *)(lVar3 + lVar7),(long *)(lVar2 + lVar8),
                                lVar11);
                }
                lVar11 = lVar11 + 1;
                lVar7 = lVar7 + 0x20;
              } while (lVar11 != 0x200);
            }
            *(undefined2 *)(lVar2 + 0x10 + lVar8) = 0;
            lVar7 = *(long *)(lVar2 + 8 + lVar8);
            if (lVar7 != 0) {
              ___bzero(lVar7,0x4000);
            }
            shrinkLevel<>((long)param_1,(long *)(lVar2 + lVar8),(long *)(lVar1 + lVar6),lVar9);
          }
          lVar9 = lVar9 + 1;
        } while (lVar9 != 0x200);
        *(undefined2 *)(lVar1 + 0x10 + lVar6) = 0;
        lVar9 = *plVar5;
        if (lVar9 != 0) {
          ___bzero(lVar9,0x4000);
        }
        shrinkLevel<>((long)param_1,(long *)(lVar1 + lVar6),(long *)((long)param_1 + 0x40),lVar10);
      }
      lVar10 = lVar10 + 1;
    } while (lVar10 != 0x200);
    *(undefined2 *)((long)param_1 + 0x50) = 0;
    if (*(long *)((long)param_1 + 0x48) != 0) {
      ___bzero(*(long *)((long)param_1 + 0x48),0x4000);
    }
    shrinkLevel<>((long *)((long)param_1 + 0x40));
  }
  IGHardwarePerProcessPageTable::free(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::shrinkLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageTableEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageDirectoryEntry>
// >(IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageTableEntry>&, unsigned long long,
// IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageDirectoryEntry>*, unsigned long long,
// unsigned long)

bool __cdecl
IGHardwarePerProcessPageTable64::shrinkLevel<>
          (long param_1,undefined8 *param_2,long *param_3,long param_4)

{
  short sVar1;
  
  sVar1 = *(short *)(param_2 + 2);
  if (sVar1 < 1) {
    *(ulong *)(*(long *)(*param_3 + 0x20) + param_4 * 8) =
         *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(param_1 + 0x10)) + 0xf8) & 0x7ffffff000 | 3;
    *(short *)(param_3 + 2) = (short)param_3[2] + -1;
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
    if ((*(short *)((long)param_2 + 0x12) == 0) && (param_2[1] != 0)) {
      _IOFreeData(param_2[1],0x4000);
      param_2[1] = 0;
    }
  }
  return sVar1 < 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::shrinkLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry> >(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryEntry>&, unsigned long long, IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry>*, unsigned long long, unsigned long)

bool __cdecl
IGHardwarePerProcessPageTable64::shrinkLevel<>
          (long param_1,undefined8 *param_2,long *param_3,long param_4)

{
  short sVar1;
  
  sVar1 = *(short *)(param_2 + 2);
  if (sVar1 < 1) {
    *(ulong *)(*(long *)(*param_3 + 0x20) + param_4 * 8) =
         *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(param_1 + 0x10)) + 0xf8) & 0x7ffffff000 | 3;
    *(short *)(param_3 + 2) = (short)param_3[2] + -1;
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
    if ((*(short *)((long)param_2 + 0x12) == 0) && (param_2[1] != 0)) {
      _IOFreeData(param_2[1],0x4000);
      param_2[1] = 0;
    }
  }
  return sVar1 < 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::shrinkLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry> >(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry>&, unsigned long long,
// IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageMapLevel4Entry>*, unsigned long long,
// unsigned long)

bool __cdecl
IGHardwarePerProcessPageTable64::shrinkLevel<>
          (long param_1,undefined8 *param_2,long *param_3,long param_4)

{
  short sVar1;
  
  sVar1 = *(short *)(param_2 + 2);
  if (sVar1 < 1) {
    *(ulong *)(*(long *)(*param_3 + 0x20) + param_4 * 8) =
         *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(param_1 + 0x10)) + 0xf8) & 0x7ffffff000 | 3;
    *(short *)(param_3 + 2) = (short)param_3[2] + -1;
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
    if ((*(short *)((long)param_2 + 0x12) == 0) && (param_2[1] != 0)) {
      _IOFreeData(param_2[1],0x4000);
      param_2[1] = 0;
    }
  }
  return sVar1 < 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::shrinkLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>, void>(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>&, unsigned long long, void*, unsigned long long, unsigned long)

bool __cdecl IGHardwarePerProcessPageTable64::shrinkLevel<>(undefined8 *param_1)

{
  undefined1 in_AL;
  
  if (*(short *)(param_1 + 2) < 1) {
    if ((PageDescriptor *)*param_1 != (PageDescriptor *)0x0) {
      in_AL = IGPagePool::PageDescriptor::release((PageDescriptor *)*param_1);
    }
    *param_1 = 0;
    if ((*(short *)((long)param_1 + 0x12) == 0) && (param_1[1] != 0)) {
      in_AL = _IOFreeData(param_1[1],0x4000);
      param_1[1] = 0;
    }
  }
  return (bool)in_AL;
}



// IGHardwarePerProcessPageTable64::getPageTableRootPhysicalAddress(unsigned long long*)

void __thiscall
IGHardwarePerProcessPageTable64::getPageTableRootPhysicalAddress
          (IGHardwarePerProcessPageTable64 *this,undefined8 *param_1)

{
  *param_1 = *(undefined8 *)(*(long *)(this + 0x40) + 0x18);
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  return;
}



// IGHardwarePerProcessPageTable64::mapRange(IGAddressRange const&, unsigned long long, unsigned
// long long)

undefined8 __thiscall
IGHardwarePerProcessPageTable64::mapRange
          (IGHardwarePerProcessPageTable64 *this,ulong *param_1,ulong param_2,ulong param_3)

{
  undefined8 uVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  long *local_40;
  ulong local_38;
  
  local_38 = param_3;
  uVar1 = expandRange((long)this,param_1);
  if ((char)uVar1 == '\0') {
    shrinkRange((long)this,param_1);
LAB_0000b805:
    uVar1 = 0;
  }
  else {
    uVar1 = CONCAT71((int7)((ulong)uVar1 >> 8),1);
    if (param_1[1] != 0) {
      uVar4 = *param_1;
      uVar3 = param_1[1] + uVar4;
      local_38 = local_38 & 0xffffff8000000ffe;
      do {
        local_40 = (long *)0x0;
        uVar1 = pageWalk3(this,uVar4,(long *)&local_40);
        if ((char)uVar1 == '\0') goto LAB_0000b805;
        *(ulong *)(*(long *)(*local_40 + 0x20) + (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
             param_2 & 0x7ffffff000 | local_38 | 1;
        *(short *)(local_40 + 2) = (short)local_40[2] + 1;
        param_2 = param_2 + *(long *)__got::_page_size;
        uVar2 = *(long *)__got::_page_size + uVar4;
        uVar4 = param_1[1] + *param_1;
        if (uVar2 < param_1[1] + *param_1) {
          uVar4 = uVar2;
        }
      } while (uVar4 != uVar3);
      uVar1 = CONCAT71((int7)(uVar2 >> 8),1);
    }
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::expandRange(IGAddressRange const&)

undefined8 __cdecl IGHardwarePerProcessPageTable64::expandRange(long param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  long lVar4;
  bool bVar5;
  long lVar6;
  undefined8 uVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  long lVar13;
  long lVar14;
  
  lVar6 = *(long *)(&DAT_00001290 + *(long *)(param_1 + 0x10));
  uVar1 = *(ulong *)(lVar6 + 0xf0);
  uVar2 = *(ulong *)(lVar6 + 0xf8);
  uVar10 = *param_2;
  uVar12 = param_2[1];
  if ((*(long *)(param_1 + 0x40) == 0) &&
     (lVar6 = expandLevel<>(param_1,(long *)(param_1 + 0x40),uVar2), (char)lVar6 == '\0')) {
LAB_0000ba3e:
    uVar7 = 0;
  }
  else {
    uVar12 = (uVar10 + uVar12) - 1;
    uVar7 = CONCAT71((int7)((ulong)lVar6 >> 8),1);
    if (uVar10 <= uVar12) {
      do {
        lVar6 = *(long *)(param_1 + 0x48);
        uVar9 = (ulong)((uint)(uVar10 >> 0x27) & 0x1ff);
        lVar14 = uVar9 * 0x20;
        if ((*(long *)(lVar6 + lVar14) == 0) &&
           (uVar7 = expandLevel<>(param_1,(long *)(lVar6 + lVar14),uVar2,(long *)(param_1 + 0x40),
                                  uVar9), (char)uVar7 == '\0')) goto LAB_0000ba3e;
        uVar9 = uVar10;
        if (uVar10 <= uVar12) {
          do {
            lVar3 = *(long *)(lVar6 + lVar14 + 8);
            uVar9 = (ulong)((uint)(uVar10 >> 0x1e) & 0x1ff);
            lVar13 = uVar9 * 0x20;
            if ((*(long *)(lVar3 + lVar13) == 0) &&
               (uVar7 = expandLevel<>(param_1,(long *)(lVar3 + lVar13),uVar2,
                                      (long *)(lVar6 + lVar14),uVar9), (char)uVar7 == '\0'))
            goto LAB_0000ba3e;
            if (uVar10 <= uVar12) {
              do {
                lVar4 = *(long *)(lVar3 + lVar13 + 8);
                uVar9 = (ulong)((uint)(uVar10 >> 0x15) & 0x1ff);
                lVar8 = uVar9 * 0x20;
                if ((*(long *)(lVar4 + lVar8) == 0) &&
                   (bVar5 = expandLevel<>(param_1,(long *)(lVar4 + lVar8),uVar1,
                                          (long *)(lVar3 + lVar13),uVar9), !bVar5))
                goto LAB_0000ba3e;
                uVar9 = uVar10 & 0xffffffffc0000fff | (ulong)((uint)uVar10 + 0x200000 & 0x3fe00000);
              } while (((~(uint)uVar10 & 0x3fe00000) != 0) && (uVar10 = uVar9, uVar9 <= uVar12));
            }
            uVar11 = uVar10 & 0xffffff8000000fff | uVar10 + 0x40000000 & 0x7fc0000000;
            uVar9 = uVar10;
          } while (((~uVar10 & 0x7fc0000000) != 0) &&
                  (uVar9 = uVar11, uVar10 = uVar11, uVar11 <= uVar12));
        }
        uVar10 = uVar9 & 0xffff000000000fff | uVar9 + 0x8000000000 & 0xff8000000000;
      } while (((~uVar9 & 0xff8000000000) != 0) && (uVar10 <= uVar12));
      uVar7 = CONCAT71((int7)(uVar9 >> 8),1);
    }
  }
  return uVar7;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::shrinkRange(IGAddressRange const&)

void __cdecl IGHardwarePerProcessPageTable64::shrinkRange(long param_1,uintptr_t *param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a000c5,*param_2,(*param_2 + param_2[1]) - 1,0,0,0);
  }
  if (*(long *)(param_1 + 0x40) != 0) {
    uVar8 = *param_2;
    uVar9 = (uVar8 + param_2[1]) - 1;
    if (uVar8 <= uVar9) {
      do {
        lVar1 = *(long *)(param_1 + 0x48);
        uVar7 = (ulong)((uint)(uVar8 >> 0x27) & 0x1ff);
        lVar5 = uVar7 * 0x20;
        if ((*(long *)(lVar1 + lVar5) != 0) && (uVar8 <= uVar9)) {
          do {
            lVar2 = *(long *)(lVar1 + lVar5 + 8);
            uVar7 = (ulong)((uint)(uVar8 >> 0x1e) & 0x1ff);
            lVar6 = uVar7 * 0x20;
            if ((*(long *)(lVar2 + lVar6) != 0) && (uVar8 <= uVar9)) {
              do {
                lVar3 = *(long *)(lVar2 + lVar6 + 8);
                uVar7 = (ulong)((uint)(uVar8 >> 0x15) & 0x1ff);
                lVar4 = uVar7 * 0x20;
                if (*(long *)(lVar3 + lVar4) != 0) {
                  shrinkLevel<>(param_1,(undefined8 *)(lVar3 + lVar4),(long *)(lVar2 + lVar6),uVar7)
                  ;
                }
                uVar7 = uVar8 & 0xffffffffc0000fff | (ulong)((uint)uVar8 + 0x200000 & 0x3fe00000);
              } while (((~(uint)uVar8 & 0x3fe00000) != 0) && (uVar8 = uVar7, uVar7 <= uVar9));
              uVar7 = (ulong)((uint)(uVar8 >> 0x1e) & 0x1ff);
            }
            shrinkLevel<>(param_1,(long *)(lVar2 + lVar6),(long *)(lVar1 + lVar5),uVar7);
            uVar7 = uVar8 & 0xffffff8000000fff | uVar8 + 0x40000000 & 0x7fc0000000;
          } while (((~uVar8 & 0x7fc0000000) != 0) && (uVar8 = uVar7, uVar7 <= uVar9));
          uVar7 = (ulong)((uint)(uVar8 >> 0x27) & 0x1ff);
        }
        shrinkLevel<>(param_1,(long *)(lVar1 + lVar5),(long *)(param_1 + 0x40),uVar7);
        shrinkLevel<>((long *)(param_1 + 0x40));
        uVar7 = ~uVar8;
        uVar8 = uVar8 & 0xffff000000000fff | uVar8 + 0x8000000000 & 0xff8000000000;
      } while (((uVar7 & 0xff8000000000) != 0) && (uVar8 <= uVar9));
    }
  }
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a000c6,*param_2,(*param_2 + param_2[1]) - 1,0,0,0);
    return;
  }
  return;
}



// IGHardwarePerProcessPageTable64::mapRangeRotated(IGAddressRangeRotatedPageIterator&,
// IGPhysicalSegmentIterator&, unsigned long long)

ulong __thiscall
IGHardwarePerProcessPageTable64::mapRangeRotated
          (IGHardwarePerProcessPageTable64 *this,long *param_1,undefined8 *param_2,ulong param_3)

{
  undefined4 uVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  uint uVar6;
  undefined8 uVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong local_80;
  long *local_78;
  ulong local_70;
  undefined4 local_68;
  ulong local_60;
  ulong local_58;
  ulong local_50;
  long *local_48;
  ulong local_40;
  undefined4 local_34;
  
  local_40 = param_3;
  uVar7 = expandRange((long)this,(ulong *)*param_1);
  if ((char)uVar7 == '\0') {
    shrinkRange((long)this,(uintptr_t *)*param_1);
    uVar10 = 0;
  }
  else {
    plVar2 = (long *)*param_2;
    local_34 = *(undefined4 *)(param_2 + 2);
    local_78 = plVar2;
    lVar8 = (**(code **)(*plVar2 + 0x1c8))(plVar2);
    local_70 = lVar8 + 0xfffU & 0xfffffffffffff000;
    local_68 = local_34;
    local_60 = 0;
    (**(code **)(*plVar2 + 0x20))(plVar2);
    local_58 = (**(code **)(*plVar2 + 0x138))(plVar2,0,&local_50,local_34);
    local_50 = local_50 + 0xfff & 0xfffffffffffff000;
    plVar2 = (long *)*param_2;
    uVar3 = param_2[1];
    uVar1 = *(undefined4 *)(param_2 + 2);
    (**(code **)(*plVar2 + 0x1c8))(plVar2);
    (**(code **)(*plVar2 + 0x20))(plVar2);
    if (uVar3 == 0) {
      (**(code **)(*plVar2 + 0x138))(plVar2,0,&local_80,uVar1);
      local_80 = local_80 + 0xfff & 0xfffffffffffff000;
    }
    else {
      local_80 = 0;
    }
    local_40 = local_40 & 0xffffff8000000ffe;
    uVar10 = CONCAT71((uint7)(uint3)((uint)uVar1 >> 8),1);
    uVar12 = local_60;
    while ((local_60 = uVar12, local_78 != plVar2 || (local_60 != uVar3))) {
      uVar12 = local_50 + local_58;
      if (local_58 < uVar12) {
        uVar10 = param_1[3];
        uVar11 = local_58;
        do {
          local_48 = (long *)0x0;
          uVar7 = pageWalk3(this,uVar10,(long *)&local_48);
          if ((char)uVar7 == '\0') {
            uVar10 = 0;
            goto LAB_0000bf5b;
          }
          *(ulong *)(*(long *)(*local_48 + 0x20) + (ulong)((uint)(uVar10 >> 9) & 0xff8)) =
               uVar11 & 0x7ffffff000 | local_40 | 1;
          *(short *)(local_48 + 2) = (short)local_48[2] + 1;
          lVar8 = *(long *)__got::_page_size;
          lVar4 = *(long *)*param_1;
          lVar5 = ((long *)*param_1)[1];
          uVar6 = (int)param_1[1] + 1;
          *(uint *)(param_1 + 1) = uVar6;
          uVar9 = lVar5 + lVar4;
          uVar10 = (ulong)((uVar6 % *(uint *)((long)param_1 + 0xc)) * (int)param_1[2] +
                          ~(uVar6 / *(uint *)((long)param_1 + 0xc)) + (int)param_1[2]) * lVar8 +
                   lVar4;
          if (uVar9 <= uVar10) {
            uVar10 = uVar9;
          }
          param_1[3] = uVar10;
          uVar11 = uVar11 + lVar8;
        } while (uVar11 < uVar12);
        uVar10 = CONCAT71((int7)(uVar10 >> 8),1);
      }
LAB_0000bf5b:
      local_60 = local_50 + local_60;
      uVar12 = local_70;
      if (local_60 < local_70) {
        local_58 = (**(code **)(*local_78 + 0x138))(local_78,local_60,&local_50,local_68);
        local_50 = local_50 + 0xfff & 0xfffffffffffff000;
        uVar12 = local_60;
      }
    }
    if ((local_78 != (long *)0x0) && ((**(code **)(*local_78 + 0x28))(), local_78 != (long *)0x0)) {
      (**(code **)(*local_78 + 0x28))();
    }
  }
  return uVar10 & 0xffffff01;
}



// IGHardwarePerProcessPageTable64::remapRange(IGAddressRange const&, unsigned long long, unsigned
// long long)

undefined8 __thiscall
IGHardwarePerProcessPageTable64::remapRange
          (IGHardwarePerProcessPageTable64 *this,ulong *param_1,ulong param_2,ulong param_3)

{
  undefined8 in_RAX;
  undefined7 uVar3;
  undefined8 uVar1;
  ulong uVar2;
  ulong uVar4;
  ulong uVar5;
  long *local_38;
  
  uVar3 = (undefined7)((ulong)in_RAX >> 8);
  if (param_1[1] != 0) {
    uVar4 = *param_1;
    uVar5 = param_1[1] + uVar4;
    do {
      local_38 = (long *)0x0;
      uVar1 = pageWalk3(this,uVar4,(long *)&local_38);
      if ((char)uVar1 == '\0') {
        return 0;
      }
      *(ulong *)(*(long *)(*local_38 + 0x20) + (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
           param_2 & 0x7ffffff000 | param_3 & 0xffffff8000000ffe | 1;
      param_2 = param_2 + *(long *)__got::_page_size;
      uVar2 = *(long *)__got::_page_size + uVar4;
      uVar4 = param_1[1] + *param_1;
      if (uVar2 < param_1[1] + *param_1) {
        uVar4 = uVar2;
      }
    } while (uVar4 != uVar5);
    uVar3 = (undefined7)(uVar2 >> 8);
  }
  return CONCAT71(uVar3,1);
}



// IGHardwarePerProcessPageTable64::unmapRange(IGAddressRange const&)

void __thiscall
IGHardwarePerProcessPageTable64::unmapRange
          (IGHardwarePerProcessPageTable64 *this,uintptr_t *param_1)

{
  undefined *puVar1;
  long *in_RAX;
  undefined8 uVar2;
  ulong uVar3;
  uintptr_t uVar4;
  long *local_38;
  
  puVar1 = __got::_page_size;
  local_38 = in_RAX;
  if (param_1[1] != 0) {
    uVar4 = *param_1;
    uVar3 = param_1[1] + uVar4;
    do {
      local_38 = (long *)0x0;
      uVar2 = pageWalk3(this,uVar4,(long *)&local_38);
      if ((char)uVar2 != '\0') {
        *(ulong *)(*(long *)(*local_38 + 0x20) + (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
             *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf0) & 0x7ffffff000 | 3
        ;
        *(short *)(local_38 + 2) = (short)local_38[2] + -1;
      }
      uVar4 = uVar4 + *(long *)puVar1;
      if (param_1[1] + *param_1 <= uVar4) {
        uVar4 = param_1[1] + *param_1;
      }
    } while (uVar4 != uVar3);
  }
  shrinkRange((long)this,param_1);
  return;
}



// IGHardwarePerProcessPageTable64::mapRangeDummy(IGAddressRange const&, unsigned long long)

undefined8 __thiscall
IGHardwarePerProcessPageTable64::mapRangeDummy
          (IGHardwarePerProcessPageTable64 *this,ulong *param_1,ulong param_2)

{
  ulong uVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  long *local_38;
  
  uVar2 = expandRange((long)this,param_1);
  if ((char)uVar2 == '\0') {
    shrinkRange((long)this,param_1);
LAB_0000c231:
    uVar2 = 0;
  }
  else {
    uVar2 = CONCAT71((int7)((ulong)uVar2 >> 8),1);
    if (param_1[1] != 0) {
      uVar4 = *param_1;
      uVar5 = param_1[1] + uVar4;
      uVar1 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf0);
      do {
        local_38 = (long *)0x0;
        uVar2 = pageWalk3(this,uVar4,(long *)&local_38);
        if ((char)uVar2 == '\0') goto LAB_0000c231;
        *(ulong *)(*(long *)(*local_38 + 0x20) + (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
             (param_2 & 0xffffff8000000ffe) + (uVar1 & 0x7ffffff000) + 1;
        *(short *)(local_38 + 2) = (short)local_38[2] + 1;
        uVar4 = uVar4 + *(long *)__got::_page_size;
        uVar3 = param_1[1] + *param_1;
        if (uVar3 <= uVar4) {
          uVar4 = uVar3;
        }
      } while (uVar4 != uVar5);
      uVar2 = CONCAT71((int7)(uVar3 >> 8),1);
    }
  }
  return uVar2;
}



// IGHardwarePerProcessPageTable64::read(unsigned long long, unsigned long long&, unsigned long
// long&) const

ssize_t __thiscall
IGHardwarePerProcessPageTable64::read
          (IGHardwarePerProcessPageTable64 *this,int param_1,void *param_2,size_t param_3)

{
  long lVar1;
  ssize_t sVar2;
  undefined4 in_register_00000034;
  ulong uVar3;
  long *local_28;
  
  local_28 = (long *)0x0;
  sVar2 = pageWalk3(this,CONCAT44(in_register_00000034,param_1),(long *)&local_28);
  if ((char)sVar2 != '\0') {
    lVar1 = *(long *)(*local_28 + 0x20);
    uVar3 = (ulong)((uint)(CONCAT44(in_register_00000034,param_1) >> 9) & 0xff8);
    *(ulong *)param_2 = *(ulong *)(lVar1 + uVar3) & 0x7ffffff000;
    *(ulong *)param_3 = (ulong)((uint)*(undefined8 *)(lVar1 + uVar3) & 0xfff);
  }
  return sVar2;
}



// IGHardwarePerProcessPageTable64::pageWalk4(GTTVirtualAddress64, GTTPageTableEntry const*&) const

void __thiscall
IGHardwarePerProcessPageTable64::pageWalk4
          (IGHardwarePerProcessPageTable64 *this,ulong param_1,long *param_2)

{
  undefined8 uVar1;
  long *local_20;
  
  local_20 = (long *)0x0;
  uVar1 = pageWalk3(this,param_1,(long *)&local_20);
  if ((char)uVar1 != '\0') {
    *param_2 = (ulong)((uint)(param_1 >> 9) & 0xff8) + *(long *)(*local_20 + 0x20);
  }
  return;
}



// IGHardwarePerProcessPageTable64::mapDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor*)

ulong __thiscall
IGHardwarePerProcessPageTable64::mapDescriptorForRange
          (IGHardwarePerProcessPageTable64 *this,uintptr_t *param_1,PageDescriptor *param_2)

{
  short *psVar1;
  long lVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  long lVar7;
  
  uVar6 = *param_1;
  uVar4 = expand2((long)this,uVar6);
  if ((char)uVar4 == '\0') {
    shrinkRange((long)this,param_1);
  }
  else {
    lVar2 = *(long *)(this + 0x48);
    uVar5 = (ulong)((uint)(uVar6 >> 0x22) & 0x3fe0);
    lVar3 = *(long *)(lVar2 + 8 + uVar5);
    uVar6 = (ulong)((uint)(uVar6 >> 0x1e) & 0x1ff);
    lVar7 = uVar6 * 0x20;
    *(PageDescriptor **)(lVar3 + lVar7) = param_2;
    IGPagePool::PageDescriptor::retain(param_2);
    *(undefined4 *)(lVar3 + 0x10 + lVar7) = 0x10200;
    *(ulong *)(*(long *)(*(long *)(lVar2 + uVar5) + 0x20) + uVar6 * 8) =
         *(ulong *)(*(long *)(lVar3 + lVar7) + 0x18) & 0x7ffffff000 | 3;
    psVar1 = (short *)(lVar2 + 0x10 + uVar5);
    *psVar1 = *psVar1 + 1;
  }
  return uVar4 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable64::expand2(GTTVirtualAddress64)

undefined8 __cdecl IGHardwarePerProcessPageTable64::expand2(long param_1,undefined8 param_2)

{
  ulong uVar1;
  undefined8 uVar2;
  long lVar3;
  ulong uVar4;
  
  uVar1 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(param_1 + 0x10)) + 0xf8);
  if (*(long *)(param_1 + 0x40) == 0) {
    uVar2 = expandLevel<>(param_1,(long *)(param_1 + 0x40),uVar1);
    if ((char)uVar2 != '\0') goto LAB_0000c3e4;
LAB_0000c41c:
    uVar2 = 0;
  }
  else {
LAB_0000c3e4:
    uVar4 = (ulong)((uint)((ulong)param_2 >> 0x27) & 0x1ff);
    lVar3 = uVar4 * 0x20;
    if (*(long *)(*(long *)(param_1 + 0x48) + lVar3) == 0) {
      lVar3 = expandLevel<>(param_1,(long *)(*(long *)(param_1 + 0x48) + lVar3),uVar1,
                            (long *)(param_1 + 0x40),uVar4);
      if ((char)lVar3 == '\0') goto LAB_0000c41c;
    }
    uVar2 = CONCAT71((int7)((ulong)lVar3 >> 8),1);
  }
  return uVar2;
}



// IGHardwarePerProcessPageTable64::remapDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor*)

undefined8 __thiscall
IGHardwarePerProcessPageTable64::remapDescriptorForRange
          (IGHardwarePerProcessPageTable64 *this,ulong *param_1,PageDescriptor *param_2)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  
  lVar1 = *(long *)(this + 0x48);
  uVar4 = (ulong)((uint)(*param_1 >> 0x22) & 0x3fe0);
  lVar2 = *(long *)(lVar1 + 8 + uVar4);
  uVar3 = (ulong)((uint)(*param_1 >> 0x1e) & 0x1ff);
  lVar5 = uVar3 * 0x20;
  IGPagePool::PageDescriptor::release(*(PageDescriptor **)(lVar2 + lVar5));
  *(PageDescriptor **)(lVar2 + lVar5) = param_2;
  IGPagePool::PageDescriptor::retain(param_2);
  lVar1 = *(long *)(*(long *)(lVar1 + uVar4) + 0x20);
  *(ulong *)(lVar1 + uVar3 * 8) = *(ulong *)(*(long *)(lVar2 + lVar5) + 0x18) & 0x7ffffff000 | 3;
  return CONCAT71((int7)((ulong)lVar1 >> 8),1);
}



// IGHardwarePerProcessPageTable64::readDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor**) const

undefined8 __thiscall
IGHardwarePerProcessPageTable64::readDescriptorForRange
          (IGHardwarePerProcessPageTable64 *this,ulong *param_1,undefined8 *param_2)

{
  undefined8 uVar1;
  
  uVar1 = *(undefined8 *)
           (*(long *)(*(long *)(this + 0x48) + 8 + (*param_1 >> 0x22 & 0x3fe0)) +
           (*param_1 >> 0x19 & 0x3fe0));
  *param_2 = uVar1;
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::expandLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>, void>(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>&, unsigned long long, unsigned long long, void*, unsigned long long,
// unsigned long)

undefined8 __cdecl
IGHardwarePerProcessPageTable64::expandLevel<>(long param_1,long *param_2,ulong param_3)

{
  IGPagePool *this;
  long lVar1;
  long lVar2;
  
  this = (IGPagePool *)
         IGMemoryManager::getPagePool
                   (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(param_1 + 0x10)));
  lVar1 = IGPagePool::allocatePage(this);
  *param_2 = lVar1;
  if (lVar1 != 0) {
    lVar1 = *(long *)(lVar1 + 0x20);
    lVar2 = 0;
    do {
      *(ulong *)(lVar1 + lVar2 * 8) = param_3 & 0x7ffffff000 | 3;
      lVar2 = lVar2 + 1;
    } while (lVar2 != 0x200);
    lVar1 = _IOMallocZeroData(0x4000);
    param_2[1] = lVar1;
    if (lVar1 != 0) {
      *(undefined4 *)(param_2 + 2) = 0;
      return CONCAT71((int7)((ulong)lVar1 >> 8),1);
    }
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::expandLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry> >(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry>&, unsigned long long, unsigned long long,
// IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageMapLevel4Entry>*, unsigned long long,
// unsigned long)

undefined8 __cdecl
IGHardwarePerProcessPageTable64::expandLevel<>
          (long param_1,long *param_2,ulong param_3,long *param_4,long param_5)

{
  IGPagePool *this;
  long lVar1;
  long lVar2;
  
  this = (IGPagePool *)
         IGMemoryManager::getPagePool
                   (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(param_1 + 0x10)));
  lVar1 = IGPagePool::allocatePage(this);
  *param_2 = lVar1;
  if (lVar1 != 0) {
    lVar1 = *(long *)(lVar1 + 0x20);
    lVar2 = 0;
    do {
      *(ulong *)(lVar1 + lVar2 * 8) = param_3 & 0x7ffffff000 | 3;
      lVar2 = lVar2 + 1;
    } while (lVar2 != 0x200);
    lVar1 = _IOMallocZeroData(0x4000);
    param_2[1] = lVar1;
    if (lVar1 != 0) {
      if (param_4 != (long *)0x0) {
        lVar1 = *param_2;
        *(ulong *)(*(long *)(*param_4 + 0x20) + param_5 * 8) =
             *(ulong *)(lVar1 + 0x18) & 0x7ffffff000 | 3;
      }
      *(short *)(param_4 + 2) = (short)param_4[2] + 1;
      *(undefined4 *)(param_2 + 2) = 0;
      return CONCAT71((int7)((ulong)lVar1 >> 8),1);
    }
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
  }
  return 0;
}



// IGHardwarePerProcessPageTable64::expand(GTTVirtualAddress64)

ulong __thiscall
IGHardwarePerProcessPageTable64::expand(IGHardwarePerProcessPageTable64 *this,ulong param_1)

{
  long *plVar1;
  ulong uVar2;
  long lVar3;
  bool bVar4;
  undefined8 uVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  long *plVar9;
  ulong uVar10;
  
  uVar2 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf0);
  plVar9 = *(long **)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf8);
  uVar5 = expand2((long)this,param_1);
  if ((char)uVar5 != '\0') {
    lVar6 = (param_1 >> 0x27 & 0x1ff) * 0x20;
    lVar3 = *(long *)(*(long *)(this + 0x48) + 8 + lVar6);
    uVar7 = param_1 >> 0x1e & 0x1ff;
    lVar8 = uVar7 * 0x20;
    plVar1 = (long *)(lVar3 + lVar8);
    if (*(long *)(lVar3 + lVar8) == 0) {
      uVar5 = expandLevel<>((long)this,plVar1,(ulong)plVar9,(long *)(*(long *)(this + 0x48) + lVar6)
                            ,uVar7);
      plVar9 = plVar1;
      if ((char)uVar5 == '\0') goto LAB_0000c701;
    }
    lVar3 = *(long *)(lVar3 + 8 + lVar8);
    uVar7 = (ulong)((uint)(param_1 >> 0x15) & 0x1ff);
    lVar6 = uVar7 * 0x20;
    uVar10 = CONCAT71((int7)((ulong)plVar9 >> 8),1);
    if (*(long *)(lVar3 + lVar6) != 0) goto LAB_0000c70f;
    bVar4 = expandLevel<>((long)this,(long *)(lVar3 + lVar6),uVar2,plVar1,uVar7);
    if (bVar4) goto LAB_0000c70f;
  }
LAB_0000c701:
  shrink(this,param_1);
  uVar10 = 0;
LAB_0000c70f:
  return uVar10 & 0xffffffff;
}



// IGHardwarePerProcessPageTable64::shrink(GTTVirtualAddress64)

void __thiscall
IGHardwarePerProcessPageTable64::shrink(IGHardwarePerProcessPageTable64 *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  bool bVar4;
  long lVar5;
  ulong uVar6;
  long lVar7;
  ulong uVar8;
  long lVar9;
  ulong uVar10;
  
  if (*(long *)(this + 0x40) != 0) {
    lVar1 = *(long *)(this + 0x48);
    uVar10 = (ulong)((uint)(param_1 >> 0x27) & 0x1ff);
    lVar9 = uVar10 * 0x20;
    if (*(long *)(lVar1 + lVar9) != 0) {
      lVar2 = *(long *)(lVar1 + 8 + lVar9);
      uVar8 = (ulong)((uint)(param_1 >> 0x1e) & 0x1ff);
      lVar5 = uVar8 * 0x20;
      if (*(long *)(lVar2 + lVar5) != 0) {
        lVar3 = *(long *)(lVar2 + 8 + lVar5);
        uVar6 = (ulong)((uint)(param_1 >> 0x15) & 0x1ff);
        lVar7 = uVar6 * 0x20;
        if (*(long *)(lVar3 + lVar7) != 0) {
          bVar4 = shrinkLevel<>((long)this,(undefined8 *)(lVar3 + lVar7),(long *)(lVar2 + lVar5),
                                uVar6);
          if (bVar4) {
            bVar4 = shrinkLevel<>((long)this,(long *)(lVar2 + lVar5),(long *)(lVar1 + lVar9),uVar8);
            if (bVar4) {
              bVar4 = shrinkLevel<>((long)this,(long *)(lVar1 + lVar9),(long *)(this + 0x40),uVar10)
              ;
              if (bVar4) {
                shrinkLevel<>((undefined8 *)(this + 0x40));
                return;
              }
            }
          }
        }
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::expandLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryPointerEntry> >(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageDirectoryEntry>&, unsigned long long, unsigned long long,
// IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageDirectoryPointerEntry>*, unsigned long
// long, unsigned long)

undefined8 __cdecl
IGHardwarePerProcessPageTable64::expandLevel<>
          (long param_1,long *param_2,ulong param_3,long *param_4,long param_5)

{
  IGPagePool *this;
  long lVar1;
  long lVar2;
  
  this = (IGPagePool *)
         IGMemoryManager::getPagePool
                   (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(param_1 + 0x10)));
  lVar1 = IGPagePool::allocatePage(this);
  *param_2 = lVar1;
  if (lVar1 != 0) {
    lVar1 = *(long *)(lVar1 + 0x20);
    lVar2 = 0;
    do {
      *(ulong *)(lVar1 + lVar2 * 8) = param_3 & 0x7ffffff000 | 3;
      lVar2 = lVar2 + 1;
    } while (lVar2 != 0x200);
    lVar1 = _IOMallocZeroData(0x4000);
    param_2[1] = lVar1;
    if (lVar1 != 0) {
      if (param_4 != (long *)0x0) {
        lVar1 = *param_2;
        *(ulong *)(*(long *)(*param_4 + 0x20) + param_5 * 8) =
             *(ulong *)(lVar1 + 0x18) & 0x7ffffff000 | 3;
      }
      *(short *)(param_4 + 2) = (short)param_4[2] + 1;
      *(undefined4 *)(param_2 + 2) = 0;
      return CONCAT71((int7)((ulong)lVar1 >> 8),1);
    }
    if ((PageDescriptor *)*param_2 != (PageDescriptor *)0x0) {
      IGPagePool::PageDescriptor::release((PageDescriptor *)*param_2);
    }
    *param_2 = 0;
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// bool 
// IGHardwarePerProcessPageTable64::expandLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageTableEntry>, IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageDirectoryEntry>
// >(IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageTableEntry>&, unsigned long long,
// unsigned long long, IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageDirectoryEntry>*,
// unsigned long long, unsigned long)

bool __cdecl
IGHardwarePerProcessPageTable64::expandLevel<>
          (long param_1,long *param_2,ulong param_3,long *param_4,long param_5)

{
  long lVar1;
  IGPagePool *this;
  long lVar2;
  long lVar3;
  
  this = (IGPagePool *)
         IGMemoryManager::getPagePool
                   (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(param_1 + 0x10)));
  lVar2 = IGPagePool::allocatePage(this);
  *param_2 = lVar2;
  if (lVar2 != 0) {
    lVar1 = *(long *)(lVar2 + 0x20);
    lVar3 = 0;
    do {
      *(ulong *)(lVar1 + lVar3 * 8) = param_3 & 0x7ffffff000 | 3;
      lVar3 = lVar3 + 1;
    } while (lVar3 != 0x200);
    if (param_4 != (long *)0x0) {
      *(ulong *)(*(long *)(*param_4 + 0x20) + param_5 * 8) =
           *(ulong *)(*param_2 + 0x18) & 0x7ffffff000 | 3;
    }
    *(short *)(param_4 + 2) = (short)param_4[2] + 1;
    *(undefined4 *)(param_2 + 2) = 0;
  }
  return lVar2 != 0;
}



// bool 
// IGHardwarePerProcessPageTable64::commitLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>, void>(IGPagePool::PageDescriptor const*, void*, unsigned long long,
// unsigned long)

undefined1 IGHardwarePerProcessPageTable64::commitLevel<>(void)

{
  return 1;
}



// bool 
// IGHardwarePerProcessPageTable64::allocateDescriptorTable<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageTableEntry> >(IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageTableEntry>&)

undefined1 IGHardwarePerProcessPageTable64::allocateDescriptorTable<>(void)

{
  return 1;
}



// bool 
// IGHardwarePerProcessPageTable64::uncommitLevel<IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>, void>(IGHardwarePerProcessPageTable64::LevelEntry<9ul,
// GTTPageMapLevel4Entry>&, void*, unsigned long long, unsigned long)

undefined1 IGHardwarePerProcessPageTable64::uncommitLevel<>(void)

{
  return 1;
}



// IGHardwarePerProcessPageTable64::validateMapping(GTTVirtualAddress64, unsigned long long)

void IGHardwarePerProcessPageTable64::validateMapping(void)

{
  return;
}



// IGHardwarePerProcessPageTable64::hwPageWalk(GTTVirtualAddress64) const

undefined8 IGHardwarePerProcessPageTable64::hwPageWalk(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable64::pageWalk3(GTTVirtualAddress64,
// IGHardwarePerProcessPageTable64::LevelEntry<9ul, GTTPageTableEntry>*&) const

undefined8 __thiscall
IGHardwarePerProcessPageTable64::pageWalk3
          (IGHardwarePerProcessPageTable64 *this,ulong param_1,long *param_2)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  
  if (*(long *)(this + 0x40) != 0) {
    lVar1 = (ulong)((uint)(param_1 >> 0x27) & 0x1ff) * 0x20;
    if (*(long *)(*(long *)(this + 0x48) + lVar1) != 0) {
      lVar1 = *(long *)(*(long *)(this + 0x48) + 8 + lVar1);
      lVar2 = (ulong)((uint)(param_1 >> 0x1e) & 0x1ff) * 0x20;
      if (*(long *)(lVar1 + lVar2) != 0) {
        lVar1 = *(long *)(lVar1 + 8 + lVar2);
        uVar3 = (ulong)((uint)(param_1 >> 0x10) & 0x3fe0);
        *param_2 = lVar1 + uVar3;
        return CONCAT71((int7)((ulong)lVar1 >> 8),*(long *)(lVar1 + uVar3) != 0);
      }
    }
  }
  return 0;
}



// IGHardwarePerProcessPageTable64::describeDriverAllocations(IOAccelAllocationInfo*, int)

void IGHardwarePerProcessPageTable64::describeDriverAllocations(void)

{
  return;
}



// IGHardwarePerProcessPageTable64::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable64::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwarePerProcessPageTable64_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwarePerProcessPageTable64::gMetaClass,
             "IGHardwarePerProcessPageTable64",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0x60);
  IGHardwarePerProcessPageTable64::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwarePerProcessPageTable64::gMetaClass);
  return;
}



// IGMemoryManager::MetaClass::MetaClass()

void __thiscall IGMemoryManager::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGMemoryManager",(OSMetaClass *)__got::gMetaClass,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGMemoryManager::MetaClass::~MetaClass()

void __thiscall IGMemoryManager::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGMemoryManager::IGMemoryManager(OSMetaClass const*)

void __thiscall IGMemoryManager::IGMemoryManager(IGMemoryManager *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGMemoryManager;
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  *(undefined8 *)(this + 0xd8) = 0;
  return;
}



// IGMemoryManager::~IGMemoryManager()

void __thiscall IGMemoryManager::~IGMemoryManager(IGMemoryManager *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGMemoryManager::~IGMemoryManager()

void __thiscall IGMemoryManager::~IGMemoryManager(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGMemoryManager::~IGMemoryManager()

void __thiscall IGMemoryManager::~IGMemoryManager(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGMemoryManager::getMetaClass() const

undefined ** IGMemoryManager::getMetaClass(void)

{
  return &gMetaClass;
}



// IGMemoryManager::MetaClass::MetaClass()

void __thiscall IGMemoryManager::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGMemoryManager",(OSMetaClass *)__got::gMetaClass,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGMemoryManager::MetaClass::alloc() const

undefined8 IGMemoryManager::MetaClass::alloc(void)

{
  return 0;
}



// IGMemoryManager::operator new(unsigned long)

void * __thiscall IGMemoryManager::operator_new(IGMemoryManager *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGMemoryManager_ktv,this);
  return pvVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGMemoryManager::operator delete(void*, unsigned long)

void __cdecl IGMemoryManager::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGMemoryManager_ktv,param_1,param_2);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGMemoryManager::withAccelerator(IntelAccelerator*)

void __cdecl IGMemoryManager::withAccelerator(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0000cb7c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0xaf8))();
  return;
}



// IGMemoryManager::init(IntelAccelerator*, IntelSharedMemInfo const&, _stolenMemInfo const&)

undefined8 __thiscall
IGMemoryManager::init(IGMemoryManager *this,undefined8 param_1,uint *param_2,undefined8 *param_3)

{
  uint uVar1;
  char cVar2;
  bool bVar3;
  undefined8 uVar4;
  IGStolenMemoryPool *pIVar5;
  long lVar6;
  ulong uVar7;
  IGMemoryManager *local_30;
  
  local_30 = this;
  cVar2 = (**(code **)(__got::vtable + 0x98))();
  if (cVar2 != '\0') {
    *(undefined8 *)(this + 0x10) = param_1;
    *(undefined8 *)(this + 0x28) = 0;
    uVar1 = param_2[1];
    *(ulong *)(this + 0x30) = (ulong)uVar1;
    *(ulong *)(this + 0x38) = (ulong)*param_2;
    uVar4 = param_3[1];
    *(undefined8 *)(this + 0x40) = *param_3;
    *(undefined8 *)(this + 0x48) = uVar4;
    *(undefined8 *)(this + 0x50) = param_3[2];
    *(undefined8 *)(this + 0x58) = param_3[3];
    *(undefined8 *)(this + 0x60) = param_3[4];
    *(undefined8 *)(this + 0x68) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    *(undefined8 *)(this + 0x70) = 0;
    *(undefined8 *)(this + 0x78) = 0;
    *(undefined8 *)(this + 0x80) = 0;
    *(undefined8 *)(this + 0xa0) = 0;
    *(undefined8 *)(this + 0xa8) = 0;
    *(undefined8 *)(this + 0xb0) = 0;
    *(undefined8 *)(this + 0xb8) = 0;
    *(undefined8 *)(this + 0xc0) = 0;
    *(undefined8 *)(this + 200) = 0;
    *(undefined8 *)(this + 0xd0) = 0;
    *(undefined8 *)(this + 0xd8) = 0;
    *(ulong *)(this + 0x90) = (ulong)uVar1;
    *(undefined4 *)(this + 0x88) = 0;
    *(undefined2 *)(this + 0x20) = 0;
    *(undefined2 *)(this + 0x100) = 0;
    *(undefined4 *)(this + 0x24) = 3;
    *(undefined8 *)(this + 0x110) = 0;
    uVar4 = initDeviceMemory(this);
    if ((char)uVar4 != '\0') {
      initSegments(this);
      uVar4 = initDummyPages(this);
      if (((char)uVar4 != '\0') && (bVar3 = initGlobalGTT(this), bVar3)) {
        pIVar5 = IGStolenMemoryPool::withRanges
                           ((undefined8 *)(this + 0x40),*(undefined8 *)(this + 0x10));
        *(IGStolenMemoryPool **)(this + 0x78) = pIVar5;
        if (pIVar5 != (IGStolenMemoryPool *)0x0) {
          lVar6 = IGFenceAllocator::withOptions(*(undefined8 *)(this + 0x10));
          *(long *)(this + 0x80) = lVar6;
          if ((lVar6 != 0) && (uVar7 = initPagePool(this), (char)uVar7 != '\0')) {
            (**(code **)(*(long *)this + 0x148))(this);
            uVar4 = (**(code **)(**(long **)(this + 0x10) + 0x280))
                              (*(long **)(this + 0x10),"VRAM,totalMB",
                               *(ulong *)(this + 0x30) >> 0x14,0x20);
            return CONCAT71((int7)((ulong)uVar4 >> 8),1);
          }
          init(IntelAccelerator*,IntelSharedMemInfo_const&,_stolenMemInfo_const&)::$_0::operator()
                    ((__0 *)&local_30);
          return 0;
        }
      }
    }
    releaseDeviceMemory(this);
    *(undefined8 *)(this + 0xa0) = 0;
    *(undefined8 *)(this + 0xa8) = 0;
    *(undefined8 *)(this + 0xb0) = 0;
    *(undefined8 *)(this + 0xb8) = 0;
    *(undefined8 *)(this + 0xc0) = 0;
    *(undefined8 *)(this + 200) = 0;
    *(undefined8 *)(this + 0xd0) = 0;
    *(undefined8 *)(this + 0xd8) = 0;
    if (*(long **)(this + 0x98) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x98) + 0x28))();
    }
    *(undefined8 *)(this + 0x98) = 0;
    if (*(long **)(this + 0x78) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x78) + 0x28))();
    }
    *(undefined8 *)(this + 0x78) = 0;
    if (*(long **)(this + 0x80) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x80) + 0x28))();
    }
    *(undefined8 *)(this + 0x80) = 0;
    releaseDummyPages(this);
    releasePagePool(this);
  }
  return 0;
}



// IGMemoryManager::initDeviceMemory()

undefined8 __thiscall IGMemoryManager::initDeviceMemory(IGMemoryManager *this)

{
  int in_EAX;
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  long *plVar4;
  long *plVar5;
  long lVar6;
  OSMetaClassBase *pOVar7;
  OSMetaClass *pOVar8;
  void *pvVar9;
  char *pcVar10;
  undefined4 extraout_var;
  undefined8 uVar11;
  int local_28;
  int local_24;
  
  local_28 = in_EAX;
  plVar4 = (long *)OSMetaClassBase::safeMetaCast
                             (*(OSMetaClassBase **)(*(long *)(this + 0x10) + 0x368),
                              *(OSMetaClass **)__got::metaClass);
  plVar5 = (long *)(**(code **)(*plVar4 + 0x900))(plVar4,0x10);
  if (plVar5 == (long *)0x0) {
LAB_0000cf24:
    releaseDeviceMemory(this);
    return 0;
  }
  plVar5 = (long *)(**(code **)(*plVar5 + 0x200))(plVar5,0);
  *(long **)(this + 0x68) = plVar5;
  if (plVar5 == (long *)0x0) goto LAB_0000cf24;
  lVar6 = (**(code **)(*plVar5 + 0x118))(plVar5);
  *(long *)(this + 0x18) = lVar6;
  if (lVar6 == 0) goto LAB_0000cf24;
  plVar5 = (long *)(**(code **)(*plVar4 + 0x900))(plVar4,0x18);
  *(long **)(this + 0x70) = plVar5;
  if (plVar5 == (long *)0x0) goto LAB_0000cf24;
  (**(code **)(*plVar5 + 0x20))(plVar5);
  uVar1 = utilGetProperty<int>(plVar4,"IOMemoryDescriptorOptions",0);
  *(undefined4 *)(this + 0x88) = uVar1;
  plVar4 = *(long **)(this + 0x10);
  pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4);
  _local_28 = CONCAT44(0x40,local_28);
  if (pOVar7 == (OSMetaClassBase *)0x0) {
    pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 != (long *)0x0) &&
       (pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar7 != (OSMetaClassBase *)0x0)) goto LAB_0000ceb0;
  }
  else {
LAB_0000ceb0:
    pOVar8 = (OSMetaClass *)(**(code **)(*(long *)pOVar7 + 0x38))(pOVar7);
    if (pOVar8 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,pOVar8);
      uVar1 = (**(code **)(*plVar4 + 0x148))(plVar4);
      _local_28 = CONCAT44(uVar1,local_28);
    }
    else {
      pOVar8 = (OSMetaClass *)(**(code **)(*(long *)pOVar7 + 0x38))(pOVar7);
      if (pOVar8 == *(OSMetaClass **)__got::metaClass) {
        plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,pOVar8);
        pvVar9 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
        uVar2 = (**(code **)(*plVar4 + 0x140))(plVar4);
        if (4 < uVar2) {
          initDeviceMemory();
          return 0;
        }
        _memcpy(&local_24,pvVar9,(ulong)uVar2);
      }
    }
  }
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar4 == (long *)0x0) ||
      (pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"AddressMode"),
      pOVar7 == (OSMetaClassBase *)0x0)) ||
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,*(OSMetaClass **)__got::metaClass),
     plVar4 == (long *)0x0)) {
LAB_0000d022:
    iVar3 = local_24;
  }
  else {
    pcVar10 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar10,0x20);
    if (plVar4 == (long *)0x0) goto LAB_0000d022;
    iVar3 = (**(code **)(*plVar4 + 0x148))(plVar4);
    (**(code **)(*plVar4 + 0x28))(plVar4);
  }
  this[0x100] = (IGMemoryManager)(iVar3 == 0x20);
  plVar4 = *(long **)(this + 0x10);
  pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4);
  local_28 = 0x40;
  if (pOVar7 == (OSMetaClassBase *)0x0) {
    pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 == (long *)0x0) ||
       (pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar7 == (OSMetaClassBase *)0x0)) goto LAB_0000d130;
  }
  pOVar8 = (OSMetaClass *)(**(code **)(*(long *)pOVar7 + 0x38))(pOVar7);
  if (pOVar8 == *(OSMetaClass **)__got::metaClass) {
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,pOVar8);
    local_28 = (**(code **)(*plVar4 + 0x148))(plVar4);
  }
  else {
    pOVar8 = (OSMetaClass *)(**(code **)(*(long *)pOVar7 + 0x38))(pOVar7);
    if (pOVar8 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,pOVar8);
      pvVar9 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
      uVar2 = (**(code **)(*plVar4 + 0x140))(plVar4);
      if (4 < uVar2) {
        initDeviceMemory();
        return 0;
      }
      _memcpy(&local_28,pvVar9,(ulong)uVar2);
    }
  }
LAB_0000d130:
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  iVar3 = local_28;
  if (((plVar4 != (long *)0x0) &&
      (pOVar7 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"PageTableMode"),
      iVar3 = local_28, pOVar7 != (OSMetaClassBase *)0x0)) &&
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar7,*(OSMetaClass **)__got::metaClass),
     iVar3 = local_28, plVar4 != (long *)0x0)) {
    pcVar10 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar10,0x20);
    iVar3 = local_28;
    if (plVar4 != (long *)0x0) {
      iVar3 = (**(code **)(*plVar4 + 0x148))(plVar4);
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
  }
  this[0x101] = (IGMemoryManager)(iVar3 == 0x20);
  iVar3 = utilGetProperty<int>(*(long **)(this + 0x10),"AddressSpaceEnableMask",3);
  uVar11 = CONCAT71((int7)(CONCAT44(extraout_var,iVar3) >> 8),1);
  if (0xfffffffc < iVar3 - 4U) {
    *(int *)(this + 0x24) = iVar3;
    return uVar11;
  }
  return uVar11;
}



// IGMemoryManager::init(IntelAccelerator*, IntelSharedMemInfo const&, _stolenMemInfo
// const&)::$_0::TEMPNAMEPLACEHOLDERVALUE(char const*) const

void __thiscall
IGMemoryManager::init(IntelAccelerator*,IntelSharedMemInfo_const&,_stolenMemInfo_const&)::$_0::
operator()(__0 *this)

{
  IGMemoryManager *this_00;
  
  this_00 = *(IGMemoryManager **)this;
  releaseDeviceMemory(this_00);
  *(undefined8 *)(this_00 + 0xa0) = 0;
  *(undefined8 *)(this_00 + 0xa8) = 0;
  *(undefined8 *)(this_00 + 0xb0) = 0;
  *(undefined8 *)(this_00 + 0xb8) = 0;
  *(undefined8 *)(this_00 + 0xc0) = 0;
  *(undefined8 *)(this_00 + 200) = 0;
  *(undefined8 *)(this_00 + 0xd0) = 0;
  *(undefined8 *)(this_00 + 0xd8) = 0;
  if (*(long **)(this_00 + 0x98) != (long *)0x0) {
    (**(code **)(**(long **)(this_00 + 0x98) + 0x28))();
  }
  *(undefined8 *)(this_00 + 0x98) = 0;
  if (*(long **)(this_00 + 0x78) != (long *)0x0) {
    (**(code **)(**(long **)(this_00 + 0x78) + 0x28))();
  }
  *(undefined8 *)(this_00 + 0x78) = 0;
  if (*(long **)(this_00 + 0x80) != (long *)0x0) {
    (**(code **)(**(long **)(this_00 + 0x80) + 0x28))();
  }
  *(undefined8 *)(this_00 + 0x80) = 0;
  releaseDummyPages(this_00);
  releasePagePool(this_00);
  return;
}



// IGMemoryManager::initSegments()

undefined8 __thiscall IGMemoryManager::initSegments(IGMemoryManager *this)

{
  ushort uVar1;
  ulonglong uVar2;
  long lVar3;
  long lVar4;
  
  if ((&DAT_000012b4)[*(long *)(this + 0x10)] == '\0') {
    uVar2 = OSMetaClassBase::safeMetaCast
                      (*(OSMetaClassBase **)(*(long *)(this + 0x10) + 0x368),
                       *(OSMetaClass **)__got::metaClass);
    uVar1 = IOPCIDevice::extendedConfigRead16(uVar2);
    lVar4 = (ulong)(uVar1 & 0xff00) << 0x11;
  }
  else {
    lVar4 = *(long *)(this + 0x38);
  }
  *(undefined8 *)(this + 0xa0) = 0;
  *(long *)(this + 0xa8) = lVar4;
  lVar3 = (**(code **)(**(long **)(this + 0x70) + 0x1c8))();
  *(long *)(this + 0xb0) = lVar4;
  *(long *)(this + 0xb8) = lVar3 - *(long *)(this + 0xa8);
  *(undefined8 *)(this + 0xc0) = 0x40000000;
  *(undefined8 *)(this + 200) = 0xbe000000;
  *(undefined8 *)(this + 0xd0) = 0x40000000;
  *(undefined8 *)(this + 0xd8) = 0xffffffffc0000000;
  return 0x40000001;
}



// IGMemoryManager::initDummyPages()

undefined8 __thiscall IGMemoryManager::initDummyPages(IGMemoryManager *this)

{
  ulong uVar1;
  undefined8 uVar2;
  
  uVar2 = 0;
  uVar1 = initDummyPages()::$_5::operator()
                    ((undefined8 *)(this + 0xe0),(ulong *)(this + 0xf0),*(undefined4 *)(this + 0x88)
                     ,0);
  if ((char)uVar1 != '\0') {
    uVar1 = initDummyPages()::$_5::operator()
                      ((undefined8 *)(this + 0xe8),(ulong *)(this + 0xf8),
                       *(undefined4 *)(this + 0x88),0x1000);
    uVar2 = 1;
    if ((char)uVar1 == '\0') {
      releaseDummyPages(this);
      uVar2 = 0;
    }
  }
  return uVar2;
}



// IGMemoryManager::initGlobalGTT()

bool __thiscall IGMemoryManager::initGlobalGTT(IGMemoryManager *this)

{
  uint uVar1;
  IGHardwareGlobalPageTable *pIVar2;
  ulonglong uVar3;
  
  uVar1 = (**(code **)(*(long *)this + 0x128))(this,3);
  pIVar2 = IGHardwareGlobalPageTable::withOptions
                     (*(undefined8 *)(this + 0x10),(ulong *)(this + 0xa0),
                      *(undefined8 *)(this + 0x18),*(ulong *)(this + 0xf0),uVar1);
  *(IGHardwareGlobalPageTable **)(this + 0x98) = pIVar2;
  if (pIVar2 != (IGHardwareGlobalPageTable *)0x0) {
    uVar3 = OSMetaClassBase::safeMetaCast
                      (*(OSMetaClassBase **)(*(long *)(this + 0x10) + 0x368),
                       *(OSMetaClass **)__got::metaClass);
    IOPCIDevice::extendedConfigRead16(uVar3);
  }
  return pIVar2 != (IGHardwareGlobalPageTable *)0x0;
}



// IGMemoryManager::initStolenMemoryPool()

bool __thiscall IGMemoryManager::initStolenMemoryPool(IGMemoryManager *this)

{
  IGStolenMemoryPool *pIVar1;
  
  pIVar1 = IGStolenMemoryPool::withRanges((undefined8 *)(this + 0x40),*(undefined8 *)(this + 0x10));
  *(IGStolenMemoryPool **)(this + 0x78) = pIVar1;
  return pIVar1 != (IGStolenMemoryPool *)0x0;
}



// IGMemoryManager::initFenceAllocator()

bool __thiscall IGMemoryManager::initFenceAllocator(IGMemoryManager *this)

{
  long lVar1;
  
  lVar1 = IGFenceAllocator::withOptions(*(undefined8 *)(this + 0x10));
  *(long *)(this + 0x80) = lVar1;
  return lVar1 != 0;
}



// IGMemoryManager::initPagePool()

ulong __thiscall IGMemoryManager::initPagePool(IGMemoryManager *this)

{
  uint uVar1;
  long *plVar2;
  undefined8 uVar3;
  undefined *puVar4;
  long lVar5;
  IGPagePool *pIVar6;
  ulong uVar7;
  undefined8 unaff_R14;
  ulong uVar8;
  
  puVar4 = __got::_real_ncpus;
  lVar5 = _IOMallocTypeVarImpl(&initPagePool()::kalloc_type_view_581);
  *(long *)(this + 0x110) = lVar5;
  if (lVar5 != 0) {
    uVar8 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
    if (*(int *)puVar4 != 0) {
      uVar7 = 0;
      do {
        pIVar6 = IGPagePool::withOptions(*(undefined8 *)(this + 0x10),0);
        *(IGPagePool **)(*(long *)(this + 0x110) + uVar7 * 8) = pIVar6;
        if (pIVar6 == (IGPagePool *)0x0) goto joined_r0x0000d507;
        uVar7 = uVar7 + 1;
      } while (uVar7 < *(uint *)puVar4);
    }
    goto LAB_0000d55b;
  }
  goto LAB_0000d558;
joined_r0x0000d507:
  for (; uVar7 != 0; uVar7 = uVar7 + 1) {
    lVar5 = *(long *)(this + 0x110);
    plVar2 = *(long **)(lVar5 + uVar7 * 8);
    if (plVar2 != (long *)0x0) {
      (**(code **)(*plVar2 + 0x28))();
      lVar5 = *(long *)(this + 0x110);
    }
    *(undefined8 *)(lVar5 + uVar7 * 8) = 0;
  }
  uVar1 = *(uint *)puVar4;
  uVar3 = *(undefined8 *)(this + 0x110);
  *(undefined8 *)(this + 0x110) = 0;
  _IOFreeTypeVarImpl(&initPagePool()::kalloc_type_view_595,uVar3,(ulong)uVar1 << 3);
LAB_0000d558:
  uVar8 = 0;
LAB_0000d55b:
  return uVar8 & 0xffffffff;
}



// IGMemoryManager::free()

void __thiscall IGMemoryManager::free(IGMemoryManager *this,void *param_1)

{
  releaseDummyPages(this);
  if (*(long **)(this + 0x80) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80) + 0x28))();
  }
  *(undefined8 *)(this + 0x80) = 0;
  if (*(long **)(this + 0x78) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x78) + 0x28))();
  }
  *(undefined8 *)(this + 0x78) = 0;
  if (*(long **)(this + 0x98) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x98) + 0x28))();
  }
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  *(undefined8 *)(this + 0xd8) = 0;
  releaseDeviceMemory(this);
                    // WARNING: Could not recover jumptable at 0x0000d615. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGMemoryManager::releaseDummyPages()

void __thiscall IGMemoryManager::releaseDummyPages(IGMemoryManager *this)

{
  long *plVar1;
  
  plVar1 = *(long **)(this + 0xe0);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x1f8))(plVar1,0);
    (**(code **)(**(long **)(this + 0xe0) + 0x28))();
    *(undefined8 *)(this + 0xe0) = 0;
    *(undefined8 *)(this + 0xf0) = 0;
  }
  plVar1 = *(long **)(this + 0xe8);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x1f8))(plVar1,0);
    (**(code **)(**(long **)(this + 0xe8) + 0x28))();
    *(undefined8 *)(this + 0xe8) = 0;
    *(undefined8 *)(this + 0xf8) = 0;
  }
  return;
}



// IGMemoryManager::releaseFenceAllocator()

void __thiscall IGMemoryManager::releaseFenceAllocator(IGMemoryManager *this)

{
  if (*(long **)(this + 0x80) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80) + 0x28))();
  }
  *(undefined8 *)(this + 0x80) = 0;
  return;
}



// IGMemoryManager::releaseStolenMemoryPool()

void __thiscall IGMemoryManager::releaseStolenMemoryPool(IGMemoryManager *this)

{
  if (*(long **)(this + 0x78) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x78) + 0x28))();
  }
  *(undefined8 *)(this + 0x78) = 0;
  return;
}



// IGMemoryManager::releaseGlobalGTT()

void __thiscall IGMemoryManager::releaseGlobalGTT(IGMemoryManager *this)

{
  if (*(long **)(this + 0x98) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x98) + 0x28))();
  }
  *(undefined8 *)(this + 0x98) = 0;
  return;
}



// IGMemoryManager::releaseSegments()

void __thiscall IGMemoryManager::releaseSegments(IGMemoryManager *this)

{
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  *(undefined8 *)(this + 0xd8) = 0;
  return;
}



// IGMemoryManager::releaseDeviceMemory()

void __thiscall IGMemoryManager::releaseDeviceMemory(IGMemoryManager *this)

{
  *(undefined8 *)(this + 0x18) = 0;
  if (*(long **)(this + 0x68) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x68) + 0x28))();
  }
  *(undefined8 *)(this + 0x68) = 0;
  if (*(long **)(this + 0x70) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x70) + 0x28))();
  }
  *(undefined8 *)(this + 0x70) = 0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// int utilGetProperty<int>(IORegistryEntry*, char const*, int)

undefined4 __cdecl utilGetProperty<int>(long *param_1,undefined8 param_2,undefined4 param_3)

{
  uint uVar1;
  OSMetaClassBase *pOVar2;
  OSMetaClass *pOVar3;
  long *plVar4;
  void *pvVar5;
  char *pcVar6;
  undefined4 local_2c;
  
  pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))();
  local_2c = param_3;
  if (pOVar2 == (OSMetaClassBase *)0x0) {
    pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))(param_1,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 == (long *)0x0) ||
       (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar2 == (OSMetaClassBase *)0x0)) goto LAB_0000d8a2;
  }
  pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
  if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
    local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
  }
  else {
    pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
    if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
      pvVar5 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
      uVar1 = (**(code **)(*plVar4 + 0x140))(plVar4);
      if (4 < uVar1) {
        utilGetProperty<int>();
        return 0;
      }
      _memcpy(&local_2c,pvVar5,(ulong)uVar1);
    }
  }
LAB_0000d8a2:
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar4 != (long *)0x0) &&
      (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,param_2),
      pOVar2 != (OSMetaClassBase *)0x0)) &&
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass),
     plVar4 != (long *)0x0)) {
    pcVar6 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar6,0x20);
    if (plVar4 != (long *)0x0) {
      local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
  }
  return local_2c;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGMemoryManager::initDummyPages()::$_5::TEMPNAMEPLACEHOLDERVALUE(IOBufferMemoryDescriptor**,
// unsigned long long*, unsigned int, unsigned int) const

ulong __cdecl
IGMemoryManager::initDummyPages()::$_5::operator()
          (undefined8 *param_1,ulong *param_2,undefined4 param_3,uint param_4)

{
  int iVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  ulong uVar7;
  
  uVar7 = 0;
  plVar2 = (long *)IOBufferMemoryDescriptor::inTaskWithOptions
                             ((task *)0x0,0x323,*(ulong *)__got::_page_size,1);
  *param_1 = plVar2;
  if (plVar2 != (long *)0x0) {
    iVar1 = (**(code **)(*plVar2 + 0x1f0))(plVar2,3);
    lVar4 = *(long *)*param_1;
    if (iVar1 == 0) {
      uVar3 = (**(code **)(lVar4 + 0x138))((long *)*param_1,0,0,param_3);
      *param_2 = uVar3;
      plVar2 = (long *)IOMemoryDescriptor::createMappingInTask
                                 ((task *)*param_1,*(ulonglong *)__got::_kernel_task,0,1,0);
      if (plVar2 == (long *)0x0) {
        (**(code **)(*(long *)*param_1 + 0x1f8))((long *)*param_1,0);
        (**(code **)(*(long *)*param_1 + 0x28))();
        *param_1 = 0;
        *param_2 = 0;
      }
      else {
        lVar4 = (**(code **)(*plVar2 + 0x118))(plVar2);
        if ((param_4 >> 0xc & 1) == 0) {
          lVar5 = (**(code **)(*plVar2 + 0x128))(plVar2);
          if (lVar5 != 0) {
            uVar3 = 0;
            do {
              *(undefined4 *)(lVar4 + uVar3) = 0xc01dbead;
              uVar3 = uVar3 + 4;
              uVar6 = (**(code **)(*plVar2 + 0x128))(plVar2);
            } while (uVar3 < uVar6);
          }
        }
        else {
          lVar5 = (**(code **)(*plVar2 + 0x128))(plVar2);
          if (lVar5 != 0) {
            uVar3 = 0;
            uVar7 = 0x7ffffff000;
            do {
              *(ulong *)(lVar4 + uVar3) = *param_2 & 0x7ffffff000 | 1;
              uVar3 = uVar3 + 8;
              uVar6 = (**(code **)(*plVar2 + 0x128))(plVar2);
            } while (uVar3 < uVar6);
          }
        }
        (**(code **)(*plVar2 + 0x28))(plVar2);
      }
      uVar7 = CONCAT71((int7)(uVar7 >> 8),plVar2 != (long *)0x0);
    }
    else {
      (**(code **)(lVar4 + 0x28))();
      uVar7 = 0;
    }
  }
  return uVar7 & 0xffffffff;
}



// IGMemoryManager::releasePagePool()

void __thiscall IGMemoryManager::releasePagePool(IGMemoryManager *this)

{
  long *plVar1;
  undefined *puVar2;
  uint uVar3;
  long lVar4;
  ulong uVar5;
  
  puVar2 = __got::_real_ncpus;
  lVar4 = *(long *)(this + 0x110);
  if (lVar4 != 0) {
    uVar3 = *(uint *)__got::_real_ncpus;
    if (uVar3 == 0) {
      uVar3 = 0;
    }
    else {
      uVar5 = 0;
      do {
        lVar4 = *(long *)(this + 0x110);
        plVar1 = *(long **)(lVar4 + uVar5 * 8);
        if (plVar1 != (long *)0x0) {
          (**(code **)(*plVar1 + 0x28))();
          lVar4 = *(long *)(this + 0x110);
          uVar3 = *(uint *)puVar2;
        }
        *(undefined8 *)(lVar4 + uVar5 * 8) = 0;
        uVar5 = uVar5 + 1;
      } while (uVar5 < uVar3);
      lVar4 = *(long *)(this + 0x110);
    }
    *(undefined8 *)(this + 0x110) = 0;
    _IOFreeTypeVarImpl(&releasePagePool()::kalloc_type_view_616,lVar4,(ulong)uVar3 << 3);
    return;
  }
  return;
}



// IGMemoryManager::getPagePool()

undefined8 __thiscall IGMemoryManager::getPagePool(IGMemoryManager *this)

{
  long lVar1;
  int iVar2;
  
  lVar1 = *(long *)(this + 0x110);
  iVar2 = _cpu_number();
  return *(undefined8 *)(lVar1 + (long)iVar2 * 8);
}



// IGMemoryManager::registerEvents()

ulong __thiscall IGMemoryManager::registerEvents(IGMemoryManager *this)

{
  undefined *puVar1;
  ulong uVar2;
  ulong uVar3;
  undefined8 unaff_R14;
  undefined7 uVar5;
  ulong uVar4;
  
  puVar1 = __got::_real_ncpus;
  uVar5 = (undefined7)((ulong)unaff_R14 >> 8);
  if (*(int *)__got::_real_ncpus == 0) {
    uVar4 = CONCAT71(uVar5,1);
  }
  else {
    uVar4 = CONCAT71(uVar5,1);
    uVar3 = 0;
    do {
      uVar2 = IGPagePool::registerEvents(*(IGPagePool **)(*(long *)(this + 0x110) + uVar3 * 8));
      uVar4 = CONCAT71((int7)(uVar4 >> 8),(byte)uVar4 & (byte)uVar2);
      uVar3 = uVar3 + 1;
    } while (uVar3 < *(uint *)puVar1);
  }
  return uVar4 & 0xffffffff;
}



// IGMemoryManager::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall IGMemoryManager::describeDriverAllocations(void)

{
  undefined *puVar1;
  ulong uVar2;
  
  puVar1 = __got::_real_ncpus;
  if (*(int *)__got::_real_ncpus != 0) {
    uVar2 = 0;
    do {
      IGPagePool::describeDriverAllocations();
      uVar2 = uVar2 + 1;
    } while (uVar2 < *(uint *)puVar1);
  }
  return;
}



// IGMemoryManager::synchronizeAllTasks()

void __thiscall IGMemoryManager::synchronizeAllTasks(IGMemoryManager *this)

{
  long lVar1;
  undefined8 local_38;
  undefined8 local_30;
  undefined8 local_28;
  
  local_28 = 0;
  local_30 = 0;
  local_38 = 0;
  IOAccelTaskList::Iterator::Iterator
            ((Iterator *)&local_38,(IOAccelTaskList *)(*(long *)(this + 0x10) + 0xc48));
  IGHardwarePerProcessPageTable::synchronizeWith<>
            (*(IGHardwarePerProcessPageTable **)(*(long *)(*(long *)(this + 0x10) + 0x150) + 0x260),
             *(long **)(this + 0x98),(ulong *)(this + 0xa0),1);
  lVar1 = IOAccelTaskList::Iterator::getNextTask();
  while (lVar1 != 0) {
    if (lVar1 != *(long *)(*(long *)(this + 0x10) + 0x150)) {
      IGHardwarePerProcessPageTable::synchronizeWith<>
                (*(IGHardwarePerProcessPageTable **)(lVar1 + 0x260),
                 *(long **)(*(long *)(*(long *)(this + 0x10) + 0x150) + 0x260),
                 (ulong *)(this + 0xa0),1);
    }
    lVar1 = IOAccelTaskList::Iterator::getNextTask();
  }
  return;
}



// IGMemoryManager::commitIntoPageTableForTask(IGAccelTask*, IGAccelMemoryMap*)

ulong __thiscall
IGMemoryManager::commitIntoPageTableForTask(IGMemoryManager *this,long param_1,long *param_2)

{
  undefined4 uVar1;
  uintptr_t arg2;
  uintptr_t arg1;
  undefined8 *puVar2;
  ulong uVar3;
  uintptr_t local_40;
  uintptr_t local_38;
  
  arg2 = (**(code **)(*param_2 + 0x128))(param_2);
  arg1 = (**(code **)(*param_2 + 0x168))(param_2);
  local_40 = arg2;
  local_38 = arg1;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00089,arg1,arg2,(arg1 + arg2) - 1,0,0);
    }
  }
  puVar2 = *(undefined8 **)(param_1 + 0x268);
  uVar3 = CONCAT71((int7)((ulong)param_1 >> 8),1);
  if (puVar2 != (undefined8 *)0x0) {
    do {
      uVar1 = IGHardwarePageTable::commitRange
                        ((IGHardwarePageTable *)*puVar2,(long *)&local_40,(long)param_2);
      uVar3 = CONCAT71((int7)(uVar3 >> 8),(byte)uVar3 & (byte)uVar1);
      puVar2 = (undefined8 *)puVar2[1];
    } while (puVar2 != (undefined8 *)0x0);
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0008a,local_38,local_40,(local_38 + local_40) - 1,0,0);
    }
  }
  return uVar3 & 0xffffffff;
}



// IGMemoryManager::releaseFromPageTableForTask(IGAccelTask*, IGAccelMemoryMap*)

ulong __thiscall
IGMemoryManager::releaseFromPageTableForTask(IGMemoryManager *this,long param_1,long *param_2)

{
  uintptr_t arg2;
  uintptr_t arg1;
  undefined8 uVar1;
  ulong uVar2;
  undefined8 *puVar3;
  uintptr_t local_38;
  uintptr_t local_30;
  
  arg2 = (**(code **)(*param_2 + 0x128))(param_2);
  arg1 = (**(code **)(*param_2 + 0x168))(param_2);
  local_38 = arg2;
  local_30 = arg1;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0008d,arg1,arg2,(arg1 + arg2) - 1,0,0);
    }
  }
  puVar3 = *(undefined8 **)(param_1 + 0x268);
  uVar2 = CONCAT71((int7)((ulong)param_1 >> 8),1);
  if (puVar3 != (undefined8 *)0x0) {
    do {
      uVar1 = IGHardwarePageTable::releaseRange((IGHardwarePageTable *)*puVar3,&local_38);
      uVar2 = CONCAT71((int7)(uVar2 >> 8),(byte)uVar2 & (byte)uVar1);
      puVar3 = (undefined8 *)puVar3[1];
    } while (puVar3 != (undefined8 *)0x0);
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0008e,local_30,local_38,(local_30 + local_38) - 1,0,0);
    }
  }
  return uVar2 & 0xffffffff;
}



// IGMemoryManager::updatePageTableForTask(IGAccelTask*, IGAccelMemoryMap*)

ulong __thiscall
IGMemoryManager::updatePageTableForTask(IGMemoryManager *this,long param_1,long *param_2)

{
  uintptr_t arg2;
  uintptr_t arg1;
  ulong uVar1;
  undefined8 *puVar2;
  ulong uVar3;
  uintptr_t local_40;
  uintptr_t local_38;
  
  arg2 = (**(code **)(*param_2 + 0x128))(param_2);
  arg1 = (**(code **)(*param_2 + 0x168))(param_2);
  local_40 = arg2;
  local_38 = arg1;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00091,arg1,arg2,(arg1 + arg2) - 1,0,0);
    }
  }
  puVar2 = *(undefined8 **)(param_1 + 0x268);
  uVar3 = CONCAT71((int7)((ulong)param_1 >> 8),1);
  if (puVar2 != (undefined8 *)0x0) {
    do {
      uVar1 = IGHardwarePageTable::updateRange
                        ((IGHardwarePageTable *)*puVar2,&local_40,(long)param_2);
      uVar3 = CONCAT71((int7)(uVar3 >> 8),(byte)uVar3 & (byte)uVar1);
      puVar2 = (undefined8 *)puVar2[1];
    } while (puVar2 != (undefined8 *)0x0);
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00092,local_38,local_40,(local_38 + local_40) - 1,0,0);
    }
  }
  return uVar3 & 0xffffffff;
}



// IGMemoryManager::newPageTableForTask(IGAccelTask*)

IGHardwarePerProcessPageTable * __thiscall
IGMemoryManager::newPageTableForTask(IGMemoryManager *this,IGAccelTask *param_1)

{
  char cVar1;
  int iVar2;
  undefined7 extraout_var;
  IGHardwarePerProcessPageTable *this_00;
  undefined8 uVar3;
  
  cVar1 = IGAccelTask::getHardwareContextAddressMode(param_1);
  iVar2 = (int)CONCAT71(extraout_var,cVar1);
  if (iVar2 == 3) {
    this_00 = IGHardwarePerProcessPageTable64::withOptions(*(undefined8 *)(this + 0x10),param_1);
  }
  else {
    if (iVar2 != 1) {
      return (IGHardwarePerProcessPageTable *)0x0;
    }
    this_00 = (IGHardwarePerProcessPageTable *)
              IGHardwarePerProcessPageTable32::withOptions(*(undefined8 *)(this + 0x10),param_1);
  }
  if (this_00 == (IGHardwarePerProcessPageTable *)0x0) {
    return (IGHardwarePerProcessPageTable *)0x0;
  }
  uVar3 = IGAccelTask::isKernelGPUTask(param_1);
  if ((char)uVar3 == '\0') {
    IGHardwarePerProcessPageTable::synchronizeWith<>
              (this_00,*(long **)(*(long *)(*(long *)(this + 0x10) + 0x150) + 0x260),
               (ulong *)(this + 0xa0),0);
    return this_00;
  }
  IGHardwarePerProcessPageTable::synchronizeWith<>
            (this_00,*(long **)(this + 0x98),(ulong *)(this + 0xa0),0);
  return this_00;
}



// IGMemoryManager::newUnifiedAddressRangeAllocator(IGAccelTask*)

IGRangeAllocator * __thiscall
IGMemoryManager::newUnifiedAddressRangeAllocator(IGMemoryManager *this,long param_1)

{
  uint uVar1;
  IGRangeAllocator *pIVar2;
  long local_40;
  undefined8 local_38;
  long local_30;
  undefined8 local_28;
  
  if (*(char *)(param_1 + 0x2d0) == '\0') {
    local_30 = *(long *)(this + 0xd0);
    local_28 = *(undefined8 *)(this + 0xd8);
    pIVar2 = (IGRangeAllocator *)
             IGCanonicalRangeAllocator::withRange(&local_30,*(undefined8 *)__got::_page_size,0x30);
    if (pIVar2 == (IGRangeAllocator *)0x0) {
      pIVar2 = (IGRangeAllocator *)0x0;
    }
    else {
      uVar1 = *(uint *)(this + 0x24);
      if ((uVar1 & 1) == 0) {
        (**(code **)(*(long *)pIVar2 + 0x158))(pIVar2,0x40000000,0x7fffc0000000);
        uVar1 = *(uint *)(this + 0x24);
      }
      if ((uVar1 & 2) == 0) {
        (**(code **)(*(long *)pIVar2 + 0x158))(pIVar2,0xffff800000000000,0x800000000000);
      }
    }
  }
  else {
    local_40 = *(long *)(this + 0xc0);
    local_38 = *(undefined8 *)(this + 200);
    pIVar2 = IGRangeAllocator::withRange(&local_40,*(undefined8 *)__got::_page_size);
  }
  return pIVar2;
}



// IGMemoryManager::reserveRange(IGRangeAllocator*, unsigned long long, unsigned long)

void __thiscall
IGMemoryManager::reserveRange
          (IGMemoryManager *this,long *param_1,undefined8 param_2,undefined8 param_3)

{
                    // WARNING: Could not recover jumptable at 0x0000e1b6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x158))(param_1,param_2,param_3);
  return;
}



// IGMemoryManager::newAddressRangeAllocatorForTask(IGAccelTask*, unsigned int)

IGRangeAllocator * __thiscall
IGMemoryManager::newAddressRangeAllocatorForTask
          (IGMemoryManager *this,undefined8 param_2_00,int param_2)

{
  IGRangeAllocator *pIVar1;
  long local_18;
  undefined8 local_10;
  
  if (param_2 != 1) {
    if (param_2 == 0) {
      local_18 = *(long *)(this + 0xb0);
      local_10 = *(undefined8 *)(this + 0xb8);
      pIVar1 = IGRangeAllocator::withRange(&local_18,*(undefined8 *)__got::_page_size);
    }
    else {
      pIVar1 = (IGRangeAllocator *)0x0;
    }
    return pIVar1;
  }
                    // WARNING: Could not recover jumptable at 0x0000e205. Too many branches
                    // WARNING: Treating indirect jump as call
  pIVar1 = (IGRangeAllocator *)(**(code **)(*(long *)this + 0x158))();
  return pIVar1;
}



// IGMemoryManager::MetaClass::~MetaClass()

void __thiscall IGMemoryManager::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGMemoryManager_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGMemoryManager::gMetaClass,"IGMemoryManager",
             (OSMetaClass *)__got::gMetaClass,0x118);
  IGMemoryManager::gMetaClass = (undefined *)&__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGMemoryManager::gMetaClass);
  return;
}



// IGStolenMemoryDescriptor::MetaClass::MetaClass()

void __thiscall IGStolenMemoryDescriptor::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGStolenMemoryDescriptor",(OSMetaClass *)__got::gMetaClass,0x90);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGStolenMemoryDescriptor::MetaClass::~MetaClass()

void __thiscall IGStolenMemoryDescriptor::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGStolenMemoryDescriptor::IGStolenMemoryDescriptor(OSMetaClass const*)

void __thiscall
IGStolenMemoryDescriptor::IGStolenMemoryDescriptor
          (IGStolenMemoryDescriptor *this,OSMetaClass *param_1)

{
  IOSubMemoryDescriptor::IOSubMemoryDescriptor((IOSubMemoryDescriptor *)this,param_1);
  *(undefined ***)this = &__const::~IGStolenMemoryDescriptor;
  return;
}



// IGStolenMemoryDescriptor::IGStolenMemoryDescriptor(OSMetaClass const*)

void __thiscall
IGStolenMemoryDescriptor::IGStolenMemoryDescriptor
          (IGStolenMemoryDescriptor *this,OSMetaClass *param_1)

{
  IOSubMemoryDescriptor::IOSubMemoryDescriptor((IOSubMemoryDescriptor *)this,param_1);
  *(undefined ***)this = &__const::~IGStolenMemoryDescriptor;
  return;
}



// IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor()

void __thiscall IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor(IGStolenMemoryDescriptor *this)

{
  IOSubMemoryDescriptor::~IOSubMemoryDescriptor((IOSubMemoryDescriptor *)this);
  return;
}



// IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor()

void __thiscall IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor(IGStolenMemoryDescriptor *this)

{
  IOSubMemoryDescriptor::~IOSubMemoryDescriptor((IOSubMemoryDescriptor *)this);
  return;
}



// IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor()

void __thiscall IGStolenMemoryDescriptor::~IGStolenMemoryDescriptor(IGStolenMemoryDescriptor *this)

{
  IOSubMemoryDescriptor::~IOSubMemoryDescriptor((IOSubMemoryDescriptor *)this);
  _OSObject_typed_operator_delete(&IGStolenMemoryDescriptor_ktv,this,0x90);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGStolenMemoryDescriptor::operator delete(void*, unsigned long)

void __cdecl IGStolenMemoryDescriptor::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGStolenMemoryDescriptor_ktv,param_1,param_2);
  return;
}



// IGStolenMemoryDescriptor::getMetaClass() const

undefined8 * IGStolenMemoryDescriptor::getMetaClass(void)

{
  return &gMetaClass;
}



// IGStolenMemoryDescriptor::MetaClass::MetaClass()

void __thiscall IGStolenMemoryDescriptor::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGStolenMemoryDescriptor",(OSMetaClass *)__got::gMetaClass,0x90);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGStolenMemoryDescriptor::MetaClass::alloc() const

IOSubMemoryDescriptor * IGStolenMemoryDescriptor::MetaClass::alloc(void)

{
  IOSubMemoryDescriptor *this;
  
  this = (IOSubMemoryDescriptor *)_OSObject_typed_operator_new(&IGStolenMemoryDescriptor_ktv,0x90);
  IOSubMemoryDescriptor::IOSubMemoryDescriptor
            (this,(OSMetaClass *)&IGStolenMemoryDescriptor::gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryDescriptor;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGStolenMemoryDescriptor::operator new(unsigned long)

void * __thiscall IGStolenMemoryDescriptor::operator_new(IGStolenMemoryDescriptor *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGStolenMemoryDescriptor_ktv,this);
  return pvVar1;
}



// IGStolenMemoryDescriptor::IGStolenMemoryDescriptor()

void __thiscall IGStolenMemoryDescriptor::IGStolenMemoryDescriptor(IGStolenMemoryDescriptor *this)

{
  IOSubMemoryDescriptor::IOSubMemoryDescriptor
            ((IOSubMemoryDescriptor *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryDescriptor;
  OSMetaClass::instanceConstructed();
  return;
}



// IGStolenMemoryDescriptor::IGStolenMemoryDescriptor()

void __thiscall IGStolenMemoryDescriptor::IGStolenMemoryDescriptor(IGStolenMemoryDescriptor *this)

{
  IOSubMemoryDescriptor::IOSubMemoryDescriptor
            ((IOSubMemoryDescriptor *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGStolenMemoryDescriptor;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGStolenMemoryDescriptor::withSubRange(IGStolenMemoryPool*, IOMemoryDescriptor*, unsigned long
// long, unsigned long long, unsigned int)

long * __cdecl
IGStolenMemoryDescriptor::withSubRange
          (long param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,undefined4 param_5)

{
  char cVar1;
  long *plVar2;
  
  plVar2 = (long *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (plVar2 != (long *)0x0) {
    cVar1 = (**(code **)(__got::vtable + 0x250))(plVar2,param_2,param_3,param_4,param_5);
    if (cVar1 != '\0') {
      plVar2[0xe] = param_1;
      *(undefined4 *)(plVar2 + 0xf) = 2;
      return plVar2;
    }
    (**(code **)(*plVar2 + 0x28))(plVar2);
  }
  return (long *)0x0;
}



// IGStolenMemoryDescriptor::initSubRange(IGStolenMemoryPool*, IOMemoryDescriptor*, unsigned long
// long, unsigned long long, unsigned int)

void __thiscall
IGStolenMemoryDescriptor::initSubRange
          (IGStolenMemoryDescriptor *this,undefined8 param_1,undefined8 param_2,undefined8 param_3,
          undefined8 param_4,undefined4 param_5)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x250))(this,param_2,param_3,param_4,param_5);
  if (cVar1 != '\0') {
    *(undefined8 *)(this + 0x70) = param_1;
    *(undefined4 *)(this + 0x78) = 2;
  }
  return;
}



// IGStolenMemoryDescriptor::free()

void __thiscall IGStolenMemoryDescriptor::free(IGStolenMemoryDescriptor *this,void *param_1)

{
  IGStolenMemoryPool *this_00;
  undefined8 uVar1;
  long lVar2;
  
  this_00 = *(IGStolenMemoryPool **)(this + 0x70);
  uVar1 = *(undefined8 *)(this + 0x68);
  lVar2 = (**(code **)(*(long *)this + 0x1c8))();
  IGStolenMemoryPool::deallocate(this_00,(long)this,uVar1,lVar2);
                    // WARNING: Could not recover jumptable at 0x0000e52f. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGStolenMemoryDescriptor::setPurgeable(unsigned int, unsigned int*)

undefined8 __thiscall
IGStolenMemoryDescriptor::setPurgeable
          (IGStolenMemoryDescriptor *this,int param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  
  uVar1 = *(undefined4 *)(this + 0x78);
  if (param_1 - 2U < 3) {
    *(int *)(this + 0x78) = param_1;
  }
  else if (param_1 != 1) {
    return 0xe00002d8;
  }
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = uVar1;
  }
  return 0;
}



// IGStolenMemoryDescriptor::MetaClass::~MetaClass()

void __thiscall IGStolenMemoryDescriptor::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGStolenMemoryDescriptor_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGStolenMemoryDescriptor::gMetaClass,"IGStolenMemoryDescriptor",
             (OSMetaClass *)__got::gMetaClass,0x90);
  IGStolenMemoryDescriptor::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGStolenMemoryDescriptor::gMetaClass);
  return;
}



// WARNING: Removing unreachable block (ram,0x0000e6ec)
// WARNING: Removing unreachable block (ram,0x0000e5d0)
// IGMemoryManager::initCache()

void __thiscall IGMemoryManager::initCache(IGMemoryManager *this)

{
  uint *puVar1;
  long lVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  
  iVar8 = 0;
  uVar9 = 0xffffffff;
  iVar7 = -1;
  do {
    puVar1 = (uint *)cpuid_Deterministic_Cache_Parameters_info(4);
    uVar6 = puVar1[1];
    uVar3 = puVar1[3];
    uVar5 = *puVar1 & 0x1f;
    if ((uVar5 == 1) || (uVar5 == 3)) {
      uVar5 = *puVar1 >> 5 & 7;
      if ((int)uVar9 < (int)uVar5) {
        uVar9 = uVar5;
        iVar7 = iVar8;
      }
    }
    else if (uVar5 == 0) {
      if (-1 < iVar7) {
        lVar2 = cpuid_Deterministic_Cache_Parameters_info(4);
        uVar6 = *(uint *)(lVar2 + 4);
        uVar3 = *(uint *)(lVar2 + 0xc);
      }
      break;
    }
    iVar8 = iVar8 + 1;
  } while (iVar8 != 5);
  *(ulong *)(this + 0x108) =
       (ulong)(((uVar6 & 0xfff) + 1) * ((uVar6 >> 0xc & 0x3ff) + 1) *
              (uVar3 + 1) * ((uVar6 >> 0x16) + 1));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,5);
  lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  *(uint *)(lVar2 + 0x900c) = *(uint *)(*(long *)(this + 0x18) + 0x900c) & 0xff9fffff;
  puVar1 = (uint *)(lVar2 + 0x9008);
  *puVar1 = *puVar1 & 0xff3fffff;
  (**(code **)(*(long *)this + 0x150))(this);
  (**(code **)(*(long *)this + 0x140))(this);
  lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  *(undefined4 *)(lVar2 + 0x4024) = 0xf0007fff;
  lVar4 = 0;
  do {
    *(undefined4 *)(lVar2 + 0xb020 + lVar4) =
         *(undefined4 *)((long)&g_cInitGfxL3ControlRegisters + lVar4);
    lVar4 = lVar4 + 4;
  } while (lVar4 != 0x80);
  (**(code **)(*(long *)this + 0x138))(this);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,5);
  return;
}



// IGMemoryManager::initMOCSTableEntries()

void __thiscall IGMemoryManager::initMOCSTableEntries(IGMemoryManager *this)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc800;
  lVar2 = 0;
  do {
    lVar3 = 0;
    do {
      *(undefined4 *)(lVar1 + lVar3) =
           *(undefined4 *)((long)&g_cInitGfxMemoryInterfaceControlRegisters + lVar3);
      lVar3 = lVar3 + 4;
    } while (lVar3 != 0x100);
    lVar2 = lVar2 + 1;
    lVar1 = lVar1 + 0x100;
  } while (lVar2 != 8);
  return;
}



// IGHardwareGlobalPageTable::MetaClass::MetaClass()

void __thiscall IGHardwareGlobalPageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGlobalPageTable",
             (OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGlobalPageTable::MetaClass::~MetaClass()

void __thiscall IGHardwareGlobalPageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareGlobalPageTable::IGHardwareGlobalPageTable(OSMetaClass const*)

void __thiscall
IGHardwareGlobalPageTable::IGHardwareGlobalPageTable
          (IGHardwareGlobalPageTable *this,OSMetaClass *param_1)

{
  IGHardwarePageTable::IGHardwarePageTable((IGHardwarePageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGlobalPageTable;
  return;
}



// IGHardwareGlobalPageTable::IGHardwareGlobalPageTable(OSMetaClass const*)

void __thiscall
IGHardwareGlobalPageTable::IGHardwareGlobalPageTable
          (IGHardwareGlobalPageTable *this,OSMetaClass *param_1)

{
  IGHardwarePageTable::IGHardwarePageTable((IGHardwarePageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGlobalPageTable;
  return;
}



// IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable()

void __thiscall
IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable(IGHardwareGlobalPageTable *this)

{
  IGHardwarePageTable::~IGHardwarePageTable((IGHardwarePageTable *)this);
  return;
}



// IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable()

void __thiscall
IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable(IGHardwareGlobalPageTable *this)

{
  IGHardwarePageTable::~IGHardwarePageTable((IGHardwarePageTable *)this);
  return;
}



// IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable()

void __thiscall
IGHardwareGlobalPageTable::~IGHardwareGlobalPageTable(IGHardwareGlobalPageTable *this)

{
  IGHardwarePageTable::~IGHardwarePageTable((IGHardwarePageTable *)this);
  _OSObject_typed_operator_delete(&IGHardwareGlobalPageTable_ktv,this,0x40);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGlobalPageTable::operator delete(void*, unsigned long)

void __cdecl IGHardwareGlobalPageTable::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareGlobalPageTable_ktv,param_1,param_2);
  return;
}



// IGHardwareGlobalPageTable::getMetaClass() const

undefined8 * IGHardwareGlobalPageTable::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareGlobalPageTable::MetaClass::MetaClass()

void __thiscall IGHardwareGlobalPageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGlobalPageTable",
             (OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGlobalPageTable::MetaClass::alloc() const

IGHardwarePageTable * IGHardwareGlobalPageTable::MetaClass::alloc(void)

{
  IGHardwarePageTable *this;
  
  this = (IGHardwarePageTable *)_OSObject_typed_operator_new(&IGHardwareGlobalPageTable_ktv,0x40);
  IGHardwarePageTable::IGHardwarePageTable
            (this,(OSMetaClass *)&IGHardwareGlobalPageTable::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGlobalPageTable;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareGlobalPageTable::operator new(unsigned long)

void * __thiscall IGHardwareGlobalPageTable::operator_new(IGHardwareGlobalPageTable *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareGlobalPageTable_ktv,this);
  return pvVar1;
}



// IGHardwareGlobalPageTable::IGHardwareGlobalPageTable()

void __thiscall
IGHardwareGlobalPageTable::IGHardwareGlobalPageTable(IGHardwareGlobalPageTable *this)

{
  IGHardwarePageTable::IGHardwarePageTable((IGHardwarePageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGlobalPageTable;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareGlobalPageTable::IGHardwareGlobalPageTable()

void __thiscall
IGHardwareGlobalPageTable::IGHardwareGlobalPageTable(IGHardwareGlobalPageTable *this)

{
  IGHardwarePageTable::IGHardwarePageTable((IGHardwarePageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGlobalPageTable;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGlobalPageTable::withOptions(IntelAccelerator*, IGAddressRange const&, void*, unsigned
// long long, unsigned int)

IGHardwareGlobalPageTable * __cdecl
IGHardwareGlobalPageTable::withOptions
          (undefined8 param_1,ulong *param_2,undefined8 param_3,ulong param_4,uint param_5)

{
  char cVar1;
  IGHardwareGlobalPageTable *this;
  
  this = (IGHardwareGlobalPageTable *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwareGlobalPageTable *)0x0) {
    cVar1 = initWithOptions(this,param_1,param_2,param_3,param_4,param_5);
    if (cVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwareGlobalPageTable *)0x0;
}



// IGHardwareGlobalPageTable::initWithOptions(IntelAccelerator*, IGAddressRange const&, void*,
// unsigned long long, unsigned int)

char __thiscall
IGHardwareGlobalPageTable::initWithOptions
          (IGHardwareGlobalPageTable *this,undefined8 param_1,ulong *param_2,undefined8 param_3,
          ulong param_4,uint param_5)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  undefined *puVar4;
  char cVar5;
  ulonglong uVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  undefined4 *puVar10;
  
  cVar5 = IGHardwarePageTable::initWithOptions((IGHardwarePageTable *)this,param_1,0);
  if (cVar5 != '\0') {
    *(undefined8 *)(this + 0x20) = param_3;
    *(ulong *)(this + 0x38) = param_4;
    uVar6 = OSMetaClassBase::safeMetaCast
                      (*(OSMetaClassBase **)(*(long *)(this + 0x10) + 0x368),
                       *(OSMetaClass **)__got::metaClass);
    IOPCIDevice::extendedConfigRead16(uVar6);
    *(undefined8 *)(this + 0x30) = 0x800000;
    lVar1 = *(long *)(this + 0x20);
    *(long *)(this + 0x28) = lVar1 + 0x800000;
    puVar4 = __got::_page_shift;
    uVar2 = *param_2;
    uVar8 = uVar2 >> (*__got::_page_shift & 0x3f);
    uVar7 = param_2[1];
    uVar9 = (uVar7 + uVar2) - 1;
    if (uVar8 <= uVar9 >> (*__got::_page_shift & 0x3f)) {
      puVar10 = (undefined4 *)(lVar1 + uVar8 * 8 + 0x800004);
      do {
        *puVar10 = *puVar10;
        puVar10[-1] = puVar10[-1] & 0xffffff65 | (param_5 & 4) * 0x20 + (param_5 & 3) * 8 | 2;
        uVar8 = uVar8 + 1;
        puVar10 = puVar10 + 2;
      } while (uVar8 <= uVar9 >> (*puVar4 & 0x3f));
    }
    if (uVar7 != 0x100000000) {
      lVar3 = *(long *)__got::_page_size;
      uVar7 = uVar7 + uVar2;
      do {
        uVar8 = lVar3 + uVar7;
        uVar7 = uVar7 >> (*puVar4 & 0x3f);
        *(int *)(lVar1 + 0x800004 + uVar7 * 8) = (int)((param_4 & 0x7ffffff000) >> 0x20);
        *(int *)(lVar1 + 0x800000 + uVar7 * 8) = (int)(param_4 & 0x7ffffff000) + 1;
        uVar7 = uVar8;
      } while (uVar8 < uVar2 + 0x100000000);
    }
  }
  return cVar5;
}



// IGHardwareGlobalPageTable::free()

void IGHardwareGlobalPageTable::free(void *param_1)

{
  IGHardwarePageTable::free(param_1);
  return;
}



// IGHardwareGlobalPageTable::mapRange(IGAddressRange const&, unsigned long long, unsigned long
// long)

undefined8 __thiscall
IGHardwareGlobalPageTable::mapRange
          (IGHardwareGlobalPageTable *this,ulong *param_1,ulong param_2,ulong param_3)

{
  ulong uVar1;
  long lVar2;
  long lVar3;
  undefined *puVar4;
  ulong in_RAX;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  
  puVar4 = __got::_page_shift;
  if (param_1[1] != 0) {
    uVar6 = *param_1;
    uVar7 = param_1[1] + uVar6;
    in_RAX = param_3 & 0xffffff8000000ffe;
    lVar2 = *(long *)(this + 0x28);
    lVar3 = *(long *)__got::_page_size;
    do {
      uVar1 = lVar3 + uVar6;
      uVar6 = uVar6 >> (*puVar4 & 0x3f);
      uVar5 = param_2 & 0x7ffffff000 | in_RAX;
      *(int *)(lVar2 + 4 + uVar6 * 8) = (int)(uVar5 >> 0x20);
      *(uint *)(lVar2 + uVar6 * 8) = (uint)uVar5 | 1;
      uVar6 = uVar7;
      if (uVar1 < uVar7) {
        uVar6 = uVar1;
      }
      param_2 = param_2 + lVar3;
    } while (uVar1 < uVar7);
  }
  return CONCAT71((int7)(in_RAX >> 8),1);
}



// IGHardwareGlobalPageTable::mapRangeRotated(IGAddressRangeRotatedPageIterator&,
// IGPhysicalSegmentIterator&, unsigned long long)

undefined8 __thiscall
IGHardwareGlobalPageTable::mapRangeRotated
          (IGHardwareGlobalPageTable *this,long *param_1,undefined8 *param_2,ulong param_3)

{
  undefined4 uVar1;
  long *plVar2;
  long *plVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  undefined *puVar8;
  uint uVar9;
  long lVar10;
  ulong uVar11;
  ulong uVar12;
  ulong uVar13;
  ulong uVar14;
  long *plVar15;
  ulong local_80;
  long *local_78;
  IGHardwareGlobalPageTable *local_70;
  long *local_68;
  ulong local_60;
  undefined4 local_58;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  long *local_38;
  
  plVar2 = (long *)*param_2;
  uVar1 = *(undefined4 *)(param_2 + 2);
  local_70 = this;
  local_68 = plVar2;
  local_38 = param_1;
  lVar10 = (**(code **)(*plVar2 + 0x1c8))(plVar2);
  local_60 = lVar10 + 0xfffU & 0xfffffffffffff000;
  local_50 = 0;
  local_58 = uVar1;
  (**(code **)(*plVar2 + 0x20))(plVar2);
  local_48 = (**(code **)(*plVar2 + 0x138))(plVar2,0,&local_40,uVar1);
  local_40 = local_40 + 0xfff & 0xfffffffffffff000;
  plVar2 = (long *)*param_2;
  uVar12 = param_2[1];
  uVar1 = *(undefined4 *)(param_2 + 2);
  (**(code **)(*plVar2 + 0x1c8))(plVar2);
  (**(code **)(*plVar2 + 0x20))(plVar2);
  if (uVar12 == 0) {
    (**(code **)(*plVar2 + 0x138))(plVar2,0,&local_80,uVar1);
    local_80 = local_80 + 0xfff & 0xfffffffffffff000;
  }
  else {
    local_80 = 0;
  }
  puVar8 = __got::_page_shift;
  plVar15 = local_38;
  uVar13 = local_50;
  while ((local_50 = uVar13, local_68 != plVar2 || (local_50 != uVar12))) {
    if (local_48 < local_40 + local_48) {
      local_78 = local_68;
      lVar10 = *(long *)(local_70 + 0x28);
      plVar3 = (long *)*plVar15;
      uVar13 = plVar15[3];
      lVar4 = *(long *)__got::_page_size;
      uVar14 = local_48;
      do {
        uVar13 = uVar13 >> (*puVar8 & 0x3f);
        uVar11 = uVar14 & 0x7ffffff000 | param_3 & 0xffffff8000000ffe;
        *(int *)(lVar10 + 4 + uVar13 * 8) = (int)(uVar11 >> 0x20);
        *(uint *)(lVar10 + uVar13 * 8) = (uint)uVar11 | 1;
        lVar7 = plVar15[2];
        lVar5 = *plVar3;
        lVar6 = plVar3[1];
        uVar9 = (int)plVar15[1] + 1;
        *(uint *)(local_38 + 1) = uVar9;
        uVar11 = lVar6 + lVar5;
        uVar13 = (ulong)((uVar9 % *(uint *)((long)local_38 + 0xc)) * (int)lVar7 +
                        ~(uVar9 / *(uint *)((long)local_38 + 0xc)) + (int)lVar7) * lVar4 + lVar5;
        if (uVar11 <= uVar13) {
          uVar13 = uVar11;
        }
        local_38[3] = uVar13;
        uVar14 = uVar14 + lVar4;
        plVar15 = local_38;
      } while (uVar14 < local_40 + local_48);
    }
    local_50 = local_40 + local_50;
    uVar13 = local_60;
    if (local_50 < local_60) {
      local_48 = (**(code **)(*local_68 + 0x138))(local_68,local_50,&local_40,local_58);
      local_40 = local_40 + 0xfff & 0xfffffffffffff000;
      uVar13 = local_50;
    }
  }
  uVar12 = local_50;
  if ((local_68 != (long *)0x0) &&
     (uVar12 = (**(code **)(*local_68 + 0x28))(), local_68 != (long *)0x0)) {
    uVar12 = (**(code **)(*local_68 + 0x28))();
  }
  return CONCAT71((int7)(uVar12 >> 8),1);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGlobalPageTable::remapRange(IGAddressRange const&, unsigned long long, unsigned long
// long)

void __cdecl IGHardwareGlobalPageTable::remapRange(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0000ee0d. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x118))();
  return;
}



// IGHardwareGlobalPageTable::unmapRange(IGAddressRange const&)

void __thiscall
IGHardwareGlobalPageTable::unmapRange(IGHardwareGlobalPageTable *this,ulong *param_1)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  long lVar6;
  undefined *puVar7;
  ulong uVar8;
  
  puVar7 = __got::_page_shift;
  uVar2 = param_1[1];
  if (uVar2 != 0) {
    uVar3 = *param_1;
    uVar4 = *(ulong *)(this + 0x38);
    lVar5 = *(long *)(this + 0x28);
    lVar6 = *(long *)__got::_page_size;
    uVar8 = uVar3;
    do {
      uVar1 = lVar6 + uVar8;
      uVar8 = uVar8 >> (*puVar7 & 0x3f);
      *(int *)(lVar5 + 4 + uVar8 * 8) = (int)((uVar4 & 0x7ffffff000) >> 0x20);
      *(int *)(lVar5 + uVar8 * 8) = (int)(uVar4 & 0x7ffffff000) + 1;
      uVar8 = uVar1;
    } while (uVar1 < uVar2 + uVar3);
  }
  return;
}



// IGHardwareGlobalPageTable::mapRangeDummy(IGAddressRange const&, unsigned long long)

undefined8 __thiscall
IGHardwareGlobalPageTable::mapRangeDummy
          (IGHardwareGlobalPageTable *this,ulong *param_1,ulong param_2)

{
  ulong uVar1;
  long lVar2;
  long lVar3;
  undefined *puVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  
  puVar4 = __got::_page_shift;
  uVar5 = param_1[1];
  if (uVar5 != 0) {
    uVar5 = uVar5 + *param_1;
    uVar6 = param_2 & 0xffffff8000000ffe | *(ulong *)(this + 0x38) & 0x7ffffff000;
    lVar2 = *(long *)(this + 0x28);
    lVar3 = *(long *)__got::_page_size;
    uVar7 = *param_1;
    do {
      uVar1 = lVar3 + uVar7;
      uVar7 = uVar7 >> (*puVar4 & 0x3f);
      *(int *)(lVar2 + 4 + uVar7 * 8) = (int)(uVar6 >> 0x20);
      *(int *)(lVar2 + uVar7 * 8) = (int)uVar6 + 1;
      uVar7 = uVar1;
    } while (uVar1 < uVar5);
  }
  return CONCAT71((int7)(uVar5 >> 8),1);
}



// IGHardwareGlobalPageTable::read(unsigned long long, unsigned long long&, unsigned long long&)
// const

ssize_t __thiscall
IGHardwareGlobalPageTable::read
          (IGHardwareGlobalPageTable *this,int param_1,void *param_2,size_t param_3)

{
  uint uVar1;
  undefined4 in_register_00000034;
  ulong uVar2;
  
  uVar2 = CONCAT44(in_register_00000034,param_1) >> (*__got::_page_shift & 0x3f);
  uVar1 = *(uint *)(*(long *)(this + 0x28) + uVar2 * 8);
  *(ulong *)param_2 =
       CONCAT44(*(undefined4 *)(*(long *)(this + 0x28) + 4 + uVar2 * 8),uVar1) & 0x7ffffff000;
  *(ulong *)param_3 = (ulong)(uVar1 & 0xfff);
  return (ulong)uVar1 & 0xffffffffffffff01;
}



// IGHardwareGlobalPageTable::MetaClass::~MetaClass()

void __thiscall IGHardwareGlobalPageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwareGlobalPageTable_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareGlobalPageTable::gMetaClass,"IGHardwareGlobalPageTable",
             (OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x40);
  IGHardwareGlobalPageTable::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareGlobalPageTable::gMetaClass);
  return;
}



// IGSharedMappedBuffer::MetaClass::MetaClass()

void __thiscall IGSharedMappedBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGSharedMappedBuffer",(OSMetaClass *)&IGMappedBuffer::gMetaClass,
             0x48);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGSharedMappedBuffer::MetaClass::~MetaClass()

void __thiscall IGSharedMappedBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGSharedMappedBuffer::IGSharedMappedBuffer(OSMetaClass const*)

void __thiscall
IGSharedMappedBuffer::IGSharedMappedBuffer(IGSharedMappedBuffer *this,OSMetaClass *param_1)

{
  IGMappedBuffer::IGMappedBuffer((IGMappedBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGSharedMappedBuffer;
  return;
}



// IGSharedMappedBuffer::IGSharedMappedBuffer(OSMetaClass const*)

void __thiscall
IGSharedMappedBuffer::IGSharedMappedBuffer(IGSharedMappedBuffer *this,OSMetaClass *param_1)

{
  IGMappedBuffer::IGMappedBuffer((IGMappedBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGSharedMappedBuffer;
  return;
}



// IGSharedMappedBuffer::~IGSharedMappedBuffer()

void __thiscall IGSharedMappedBuffer::~IGSharedMappedBuffer(IGSharedMappedBuffer *this)

{
  IGMappedBuffer::~IGMappedBuffer((IGMappedBuffer *)this);
  return;
}



// IGSharedMappedBuffer::~IGSharedMappedBuffer()

void __thiscall IGSharedMappedBuffer::~IGSharedMappedBuffer(IGSharedMappedBuffer *this)

{
  IGMappedBuffer::~IGMappedBuffer((IGMappedBuffer *)this);
  return;
}



// IGSharedMappedBuffer::~IGSharedMappedBuffer()

void __thiscall IGSharedMappedBuffer::~IGSharedMappedBuffer(IGSharedMappedBuffer *this)

{
  IGMappedBuffer::~IGMappedBuffer((IGMappedBuffer *)this);
  _OSObject_typed_operator_delete(&IGSharedMappedBuffer_ktv,this,0x48);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSharedMappedBuffer::operator delete(void*, unsigned long)

void __cdecl IGSharedMappedBuffer::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGSharedMappedBuffer_ktv,param_1,param_2);
  return;
}



// IGSharedMappedBuffer::getMetaClass() const

undefined8 * IGSharedMappedBuffer::getMetaClass(void)

{
  return &gMetaClass;
}



// IGSharedMappedBuffer::MetaClass::MetaClass()

void __thiscall IGSharedMappedBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGSharedMappedBuffer",(OSMetaClass *)&IGMappedBuffer::gMetaClass,
             0x48);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGSharedMappedBuffer::MetaClass::alloc() const

IGMappedBuffer * IGSharedMappedBuffer::MetaClass::alloc(void)

{
  IGMappedBuffer *this;
  
  this = (IGMappedBuffer *)_OSObject_typed_operator_new(&IGSharedMappedBuffer_ktv,0x48);
  IGMappedBuffer::IGMappedBuffer(this,(OSMetaClass *)&IGSharedMappedBuffer::gMetaClass);
  *(undefined ***)this = &__const::~IGSharedMappedBuffer;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGSharedMappedBuffer::operator new(unsigned long)

void * __thiscall IGSharedMappedBuffer::operator_new(IGSharedMappedBuffer *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGSharedMappedBuffer_ktv,this);
  return pvVar1;
}



// IGSharedMappedBuffer::IGSharedMappedBuffer()

void __thiscall IGSharedMappedBuffer::IGSharedMappedBuffer(IGSharedMappedBuffer *this)

{
  IGMappedBuffer::IGMappedBuffer((IGMappedBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGSharedMappedBuffer;
  OSMetaClass::instanceConstructed();
  return;
}



// IGSharedMappedBuffer::IGSharedMappedBuffer()

void __thiscall IGSharedMappedBuffer::IGSharedMappedBuffer(IGSharedMappedBuffer *this)

{
  IGMappedBuffer::IGMappedBuffer((IGMappedBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGSharedMappedBuffer;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSharedMappedBuffer::withOptions(IGAccelTask*, unsigned long, unsigned int, unsigned int)

IGSharedMappedBuffer * __cdecl
IGSharedMappedBuffer::withOptions(long param_1,ulonglong param_2,uint param_3,undefined4 param_4)

{
  bool bVar1;
  IGSharedMappedBuffer *this;
  
  this = (IGSharedMappedBuffer *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGSharedMappedBuffer *)0x0) {
    bVar1 = initWithOptions(this,param_1,param_2,param_3,param_4);
    if (bVar1) {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGSharedMappedBuffer *)0x0;
}



// IGSharedMappedBuffer::initWithOptions(IGAccelTask*, unsigned long, unsigned int, unsigned int)

bool __thiscall
IGSharedMappedBuffer::initWithOptions
          (IGSharedMappedBuffer *this,long param_1,ulonglong param_2,uint param_3,undefined4 param_4
          )

{
  undefined8 uVar1;
  ulong uVar2;
  long lVar3;
  bool bVar4;
  
  *(uint *)(this + 0x44) = param_3;
  uVar1 = IGMappedBuffer::getMemoryOptions();
  *(uint *)(this + 0x40) = (param_3 & 1) << 0x10 | (uint)uVar1;
  uVar2 = IGMappedBuffer::initWithOptions
                    ((IGMappedBuffer *)this,param_1,param_2,(char)((param_3 & 2) >> 1),param_4);
  if ((char)uVar2 == '\0') {
    bVar4 = false;
  }
  else {
    lVar3 = IOAccelSysMemory::lockForCPUAccess
                      (*(task **)(*(long *)(this + 0x30) + 0x18),
                       (uint)*(undefined8 *)__got::_kernel_task);
    *(long *)(this + 0x38) = lVar3;
    bVar4 = lVar3 != 0;
  }
  return bVar4;
}



// IGSharedMappedBuffer::lockForCPUAccess()

bool __thiscall IGSharedMappedBuffer::lockForCPUAccess(IGSharedMappedBuffer *this)

{
  long lVar1;
  
  lVar1 = IOAccelSysMemory::lockForCPUAccess
                    (*(task **)(*(long *)(this + 0x30) + 0x18),
                     (uint)*(undefined8 *)__got::_kernel_task);
  *(long *)(this + 0x38) = lVar1;
  return lVar1 != 0;
}



// IGSharedMappedBuffer::cloneInTask(IGAccelTask*)

IGMappedBuffer * __thiscall
IGSharedMappedBuffer::cloneInTask(IGSharedMappedBuffer *this,undefined8 param_1)

{
  IGMappedBuffer *this_00;
  ulong uVar1;
  long lVar2;
  
  this_00 = (IGMappedBuffer *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this_00 != (IGMappedBuffer *)0x0) {
    uVar1 = IGMappedBuffer::initWithOptions(this_00,(long *)this,param_1);
    if ((char)uVar1 != '\0') {
      *(undefined4 *)(this_00 + 0x44) = *(undefined4 *)(this + 0x44);
      *(undefined4 *)(this_00 + 0x40) = *(undefined4 *)(this + 0x40);
      lVar2 = IOAccelSysMemory::lockForCPUAccess
                        (*(task **)(*(long *)(this_00 + 0x30) + 0x18),
                         (uint)*(undefined8 *)__got::_kernel_task);
      *(long *)(this_00 + 0x38) = lVar2;
      if (lVar2 != 0) {
        return this_00;
      }
    }
    (**(code **)(*(long *)this_00 + 0x28))(this_00);
  }
  return (IGMappedBuffer *)0x0;
}



// IGSharedMappedBuffer::free()

void __thiscall IGSharedMappedBuffer::free(IGSharedMappedBuffer *this,void *param_1)

{
  if (*(long *)(this + 0x38) != 0) {
    param_1 = *(void **)__got::_kernel_task;
    IOAccelSysMemory::unlockForCPUAccess(*(task **)(*(long *)(this + 0x30) + 0x18));
    *(undefined8 *)(this + 0x38) = 0;
  }
  IGMappedBuffer::free((IGMappedBuffer *)this,param_1);
  return;
}



// IGSharedMappedBuffer::unlockForCPUAccess()

void __thiscall IGSharedMappedBuffer::unlockForCPUAccess(IGSharedMappedBuffer *this)

{
  IOAccelSysMemory::unlockForCPUAccess(*(task **)(*(long *)(this + 0x30) + 0x18));
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



// IGSharedMappedBuffer::getMemoryOptions() const

undefined4 __thiscall IGSharedMappedBuffer::getMemoryOptions(IGSharedMappedBuffer *this)

{
  return *(undefined4 *)(this + 0x40);
}



// IGSharedMappedBuffer::getVirtualAddress() const

undefined8 __thiscall IGSharedMappedBuffer::getVirtualAddress(IGSharedMappedBuffer *this)

{
  return *(undefined8 *)(this + 0x38);
}



// IGSharedMappedBuffer::MetaClass::~MetaClass()

void __thiscall IGSharedMappedBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGSharedMappedBuffer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGSharedMappedBuffer::gMetaClass,"IGSharedMappedBuffer",
             (OSMetaClass *)&IGMappedBuffer::gMetaClass,0x48);
  IGSharedMappedBuffer::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGSharedMappedBuffer::gMetaClass);
  return;
}



// IGAccelMemoryMap::MetaClass::MetaClass()

void __thiscall IGAccelMemoryMap::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelMemoryMap",(OSMetaClass *)__got::gMetaClass,0x128);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelMemoryMap::MetaClass::~MetaClass()

void __thiscall IGAccelMemoryMap::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelMemoryMap::IGAccelMemoryMap(OSMetaClass const*)

void __thiscall IGAccelMemoryMap::IGAccelMemoryMap(IGAccelMemoryMap *this,OSMetaClass *param_1)

{
  IOAccelMemoryMap::IOAccelMemoryMap((IOAccelMemoryMap *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelMemoryMap;
  return;
}



// IGAccelMemoryMap::IGAccelMemoryMap(OSMetaClass const*)

void __thiscall IGAccelMemoryMap::IGAccelMemoryMap(IGAccelMemoryMap *this,OSMetaClass *param_1)

{
  IOAccelMemoryMap::IOAccelMemoryMap((IOAccelMemoryMap *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelMemoryMap;
  return;
}



// IGAccelMemoryMap::~IGAccelMemoryMap()

void __thiscall IGAccelMemoryMap::~IGAccelMemoryMap(IGAccelMemoryMap *this)

{
  IOAccelMemoryMap::~IOAccelMemoryMap((IOAccelMemoryMap *)this);
  return;
}



// IGAccelMemoryMap::~IGAccelMemoryMap()

void __thiscall IGAccelMemoryMap::~IGAccelMemoryMap(IGAccelMemoryMap *this)

{
  IOAccelMemoryMap::~IOAccelMemoryMap((IOAccelMemoryMap *)this);
  return;
}



// IGAccelMemoryMap::~IGAccelMemoryMap()

void __thiscall IGAccelMemoryMap::~IGAccelMemoryMap(IGAccelMemoryMap *this)

{
  IOAccelMemoryMap::~IOAccelMemoryMap((IOAccelMemoryMap *)this);
  _OSObject_typed_operator_delete(&IGAccelMemoryMap_ktv,this,0x128);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelMemoryMap::operator delete(void*, unsigned long)

void __cdecl IGAccelMemoryMap::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelMemoryMap_ktv,param_1,param_2);
  return;
}



// IGAccelMemoryMap::getMetaClass() const

undefined8 * IGAccelMemoryMap::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelMemoryMap::MetaClass::MetaClass()

void __thiscall IGAccelMemoryMap::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelMemoryMap",(OSMetaClass *)__got::gMetaClass,0x128);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelMemoryMap::MetaClass::alloc() const

IOAccelMemoryMap * IGAccelMemoryMap::MetaClass::alloc(void)

{
  IOAccelMemoryMap *this;
  
  this = (IOAccelMemoryMap *)_OSObject_typed_operator_new(&IGAccelMemoryMap_ktv,0x128);
  IOAccelMemoryMap::IOAccelMemoryMap(this,(OSMetaClass *)&IGAccelMemoryMap::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelMemoryMap;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelMemoryMap::operator new(unsigned long)

void * __thiscall IGAccelMemoryMap::operator_new(IGAccelMemoryMap *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelMemoryMap_ktv,this);
  return pvVar1;
}



// IGAccelMemoryMap::IGAccelMemoryMap()

void __thiscall IGAccelMemoryMap::IGAccelMemoryMap(IGAccelMemoryMap *this)

{
  IOAccelMemoryMap::IOAccelMemoryMap((IOAccelMemoryMap *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelMemoryMap;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelMemoryMap::IGAccelMemoryMap()

void __thiscall IGAccelMemoryMap::IGAccelMemoryMap(IGAccelMemoryMap *this)

{
  IOAccelMemoryMap::IOAccelMemoryMap((IOAccelMemoryMap *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelMemoryMap;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelMemoryMap::init(IOGraphicsAccelerator2*, IOAccelTask*, IOAccelMemory*, unsigned int)

undefined4 __cdecl IGAccelMemoryMap::init(long *param_1)

{
  undefined4 uVar1;
  uint in_R8D;
  
  uVar1 = (**(code **)(__got::vtable + 0x128))();
  if ((char)uVar1 != '\0') {
    *(uint *)(param_1 + 0x23) = in_R8D;
    *(uint *)(param_1 + 0xf) = (uint)((in_R8D >> 0x10 & 1) == 0);
    (**(code **)(*param_1 + 0x1c8))(param_1);
    (**(code **)(*param_1 + 0x1d0))(param_1);
    *(undefined1 *)((long)param_1 + 0x11c) = 0;
    param_1[0x24] = 0;
  }
  return uVar1;
}



// IGAccelMemoryMap::initCacheType()

void __thiscall IGAccelMemoryMap::initCacheType(IGAccelMemoryMap *this)

{
  *(uint *)(this + 0x114) = *(uint *)(this + 0x118) >> 0x19 & 3;
  if (((*(uint *)(this + 0x118) >> 0x1b & 1) != 0) &&
     (*(long *)(this + 0x90) == *(long *)(*(long *)(this + 0x88) + 0x150))) {
    *(undefined8 *)(this + 0x80) = 0x100000;
  }
  return;
}



// IGAccelMemoryMap::initAlignment()

void __thiscall IGAccelMemoryMap::initAlignment(IGAccelMemoryMap *this)

{
  undefined8 uVar1;
  
  if ((((byte)this[0x11b] & 8) == 0) ||
     (*(long *)(this + 0x90) != *(long *)(*(long *)(this + 0x88) + 0x150))) {
    uVar1 = 0;
  }
  else {
    uVar1 = 0x100000;
  }
  *(undefined8 *)(this + 0x80) = uVar1;
  return;
}



// IGAccelMemoryMap::free()

void IGAccelMemoryMap::free(void *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0000f694. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))();
  return;
}



// IGAccelMemoryMap::allocGPUVirtualAddress()

undefined4 __thiscall IGAccelMemoryMap::allocGPUVirtualAddress(IGAccelMemoryMap *this)

{
  undefined4 uVar1;
  ulong in_RAX;
  uintptr_t uVar2;
  ulong uVar3;
  undefined8 uVar4;
  uintptr_t arg2;
  uintptr_t arg3;
  ulong local_28;
  
  local_28 = in_RAX;
  if (_graphicsTracePointEnable != 0) {
    (**(code **)(*(long *)this + 0x168))(this);
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      uVar2 = (**(code **)(*(long *)this + 0x168))(this);
      _kernel_debug(0x85a000a1,uVar2,0,0,0,0);
    }
  }
  if (((byte)this[0x10] & 0x80) != 0) {
    local_28 = 0;
    uVar3 = IGAccelDisplayMachine::getScanoutOffset
                      ((uint)*(undefined8 *)(*(long *)(this + 0x88) + 0x378),*(long *)(this + 0x18),
                       &local_28);
    if ((char)uVar3 != '\0') {
      uVar4 = IGAccelTask::isKernelGPUTask(*(IGAccelTask **)(this + 0x90));
      if ((char)uVar4 == '\0') {
        uVar3 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x88)) + 0xa0);
        if ((local_28 < uVar3) ||
           ((*(long *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x88)) + 0xa8) + uVar3) - 1 <
            local_28)) goto LAB_0000f77a;
      }
      this[0x10] = (IGAccelMemoryMap)((byte)this[0x10] | 0x20);
      uVar1 = (**(code **)(__got::vtable + 0x160))(this);
      *(ulong *)(this + 0x98) = local_28;
      if (_graphicsTracePointEnable == 0) {
        return uVar1;
      }
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
        return uVar1;
      }
      uVar2 = (**(code **)(*(long *)this + 0x168))(this);
      arg2 = (**(code **)(*(long *)this + 0x128))(this);
      arg3 = 1;
      goto LAB_0000f7fa;
    }
  }
LAB_0000f77a:
  uVar1 = (**(code **)(__got::vtable + 0x160))(this);
  if (_graphicsTracePointEnable == 0) {
    return uVar1;
  }
  (**(code **)(*(long *)this + 0x168))(this);
  (**(code **)(*(long *)this + 0x128))(this);
  dtHookTrace();
  if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
    return uVar1;
  }
  uVar2 = (**(code **)(*(long *)this + 0x168))(this);
  arg2 = (**(code **)(*(long *)this + 0x128))(this);
  arg3 = 0;
LAB_0000f7fa:
  _kernel_debug(0x85a000a2,uVar2,arg2,arg3,0,0);
  return uVar1;
}



// IGAccelMemoryMap::freeGPUVirtualAddress()

void __thiscall IGAccelMemoryMap::freeGPUVirtualAddress(IGAccelMemoryMap *this)

{
  uintptr_t uVar1;
  uintptr_t arg2;
  
  if (_graphicsTracePointEnable != 0) {
    (**(code **)(*(long *)this + 0x168))(this);
    (**(code **)(*(long *)this + 0x128))(this);
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      uVar1 = (**(code **)(*(long *)this + 0x168))(this);
      arg2 = (**(code **)(*(long *)this + 0x128))(this);
      _kernel_debug(0x85a000a5,uVar1,arg2,0,0,0);
    }
  }
  (**(code **)(__got::vtable + 0x170))(this);
  if (_graphicsTracePointEnable != 0) {
    (**(code **)(*(long *)this + 0x168))(this);
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      uVar1 = (**(code **)(*(long *)this + 0x168))(this);
      _kernel_debug(0x85a000a6,uVar1,0,0,0,0);
      return;
    }
  }
  return;
}



// IGAccelMemoryMap::getLength() const

long __thiscall IGAccelMemoryMap::getLength(IGAccelMemoryMap *this)

{
  long lVar1;
  
  lVar1 = (**(code **)(__got::vtable + 0x178))();
  return lVar1 + (int)((*(uint *)(this + 0x118) >> 0x11 & 0xff) << (*__got::_page_shift & 0x1f));
}



// IGAccelMemoryMap::commitIntoGPUPageTable()

ulong __thiscall IGAccelMemoryMap::commitIntoGPUPageTable(IGAccelMemoryMap *this)

{
  uintptr_t uVar1;
  uintptr_t uVar2;
  ulong uVar3;
  undefined8 unaff_R14;
  
  uVar3 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
  if (((byte)this[0x10] & 0x20) == 0) {
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000a9,uVar1,uVar2,0,0,0);
      }
    }
    uVar3 = IGMemoryManager::commitIntoPageTableForTask
                      (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x88)),
                       *(long *)(this + 0x90),(long *)this);
    uVar3 = uVar3 & 0xffffffff;
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000aa,uVar1,uVar2,0,0,0);
      }
    }
  }
  return uVar3 & 0xffffffff;
}



// IGAccelMemoryMap::releaseFromGPUPageTable()

ulong __thiscall IGAccelMemoryMap::releaseFromGPUPageTable(IGAccelMemoryMap *this)

{
  uintptr_t uVar1;
  uintptr_t uVar2;
  ulong uVar3;
  undefined8 unaff_R14;
  
  uVar3 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
  if (((byte)this[0x10] & 0x20) == 0) {
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000ad,uVar1,uVar2,0,0,0);
      }
    }
    uVar3 = IGMemoryManager::releaseFromPageTableForTask
                      (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x88)),
                       *(long *)(this + 0x90),(long *)this);
    uVar3 = uVar3 & 0xffffffff;
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000ae,uVar1,uVar2,0,0,0);
      }
    }
  }
  return uVar3 & 0xffffffff;
}



// IGAccelMemoryMap::updateGPUPageTable()

ulong __thiscall IGAccelMemoryMap::updateGPUPageTable(IGAccelMemoryMap *this)

{
  uintptr_t uVar1;
  uintptr_t uVar2;
  ulong uVar3;
  undefined8 unaff_R14;
  
  uVar3 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
  if (((byte)this[0x10] & 0x20) == 0) {
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000b1,uVar1,uVar2,0,0,0);
      }
    }
    uVar3 = IGMemoryManager::updatePageTableForTask
                      (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x88)),
                       *(long *)(this + 0x90),(long *)this);
    uVar3 = uVar3 & 0xffffffff;
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(*(long *)this + 0x168))(this);
      (**(code **)(*(long *)this + 0x128))(this);
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar1 = (**(code **)(*(long *)this + 0x168))(this);
        uVar2 = (**(code **)(*(long *)this + 0x128))(this);
        _kernel_debug(0x85a000b2,uVar1,uVar2,0,0,0);
      }
    }
  }
  return uVar3 & 0xffffffff;
}



// IGAccelMemoryMap::compatibleWith(IOAccelMemoryMap*)

undefined1 IGAccelMemoryMap::compatibleWith(void)

{
  return 1;
}



// IGAccelMemoryMap::matchOptionBits(unsigned int)

bool __thiscall IGAccelMemoryMap::matchOptionBits(IGAccelMemoryMap *this,int param_1)

{
  return *(int *)(this + 0x118) == param_1;
}



// IGAccelMemoryMap::updateCacheType(unsigned int)

void __thiscall IGAccelMemoryMap::updateCacheType(IGAccelMemoryMap *this,int param_1)

{
  if ((*(int *)(this + 0x114) != param_1) &&
     (*(int *)(this + 0x114) = param_1, ((byte)this[0x10] & 4) != 0)) {
                    // WARNING: Could not recover jumptable at 0x0000fde8. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(long *)this + 0x180))();
    return;
  }
  return;
}



// IGAccelMemoryMap::MetaClass::~MetaClass()

void __thiscall IGAccelMemoryMap::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelMemoryMap_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelMemoryMap::gMetaClass,"IGAccelMemoryMap",
             (OSMetaClass *)__got::gMetaClass,0x128);
  IGAccelMemoryMap::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelMemoryMap::gMetaClass);
  return;
}



// IGCanonicalRangeAllocator::MetaClass::MetaClass()

void __thiscall IGCanonicalRangeAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGCanonicalRangeAllocator",
             (OSMetaClass *)&IGRangeAllocator::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGCanonicalRangeAllocator::MetaClass::~MetaClass()

void __thiscall IGCanonicalRangeAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGCanonicalRangeAllocator::IGCanonicalRangeAllocator(OSMetaClass const*)

void __thiscall
IGCanonicalRangeAllocator::IGCanonicalRangeAllocator
          (IGCanonicalRangeAllocator *this,OSMetaClass *param_1)

{
  IGRangeAllocator::IGRangeAllocator((IGRangeAllocator *)this,param_1);
  *(undefined ***)this = &__const::~IGCanonicalRangeAllocator;
  return;
}



// IGCanonicalRangeAllocator::IGCanonicalRangeAllocator(OSMetaClass const*)

void __thiscall
IGCanonicalRangeAllocator::IGCanonicalRangeAllocator
          (IGCanonicalRangeAllocator *this,OSMetaClass *param_1)

{
  IGRangeAllocator::IGRangeAllocator((IGRangeAllocator *)this,param_1);
  *(undefined ***)this = &__const::~IGCanonicalRangeAllocator;
  return;
}



// IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator()

void __thiscall
IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator(IGCanonicalRangeAllocator *this)

{
  IGRangeAllocator::~IGRangeAllocator((IGRangeAllocator *)this);
  return;
}



// IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator()

void __thiscall
IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator(IGCanonicalRangeAllocator *this)

{
  IGRangeAllocator::~IGRangeAllocator((IGRangeAllocator *)this);
  return;
}



// IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator()

void __thiscall
IGCanonicalRangeAllocator::~IGCanonicalRangeAllocator(IGCanonicalRangeAllocator *this)

{
  IGRangeAllocator::~IGRangeAllocator((IGRangeAllocator *)this);
  _OSObject_typed_operator_delete(&IGCanonicalRangeAllocator_ktv,this,0x38);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGCanonicalRangeAllocator::operator delete(void*, unsigned long)

void __cdecl IGCanonicalRangeAllocator::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGCanonicalRangeAllocator_ktv,param_1,param_2);
  return;
}



// IGCanonicalRangeAllocator::getMetaClass() const

undefined8 * IGCanonicalRangeAllocator::getMetaClass(void)

{
  return &gMetaClass;
}



// IGCanonicalRangeAllocator::MetaClass::MetaClass()

void __thiscall IGCanonicalRangeAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGCanonicalRangeAllocator",
             (OSMetaClass *)&IGRangeAllocator::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGCanonicalRangeAllocator::MetaClass::alloc() const

IGRangeAllocator * IGCanonicalRangeAllocator::MetaClass::alloc(void)

{
  IGRangeAllocator *this;
  
  this = (IGRangeAllocator *)_OSObject_typed_operator_new(&IGCanonicalRangeAllocator_ktv,0x38);
  IGRangeAllocator::IGRangeAllocator(this,(OSMetaClass *)&IGCanonicalRangeAllocator::gMetaClass);
  *(undefined ***)this = &__const::~IGCanonicalRangeAllocator;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGCanonicalRangeAllocator::operator new(unsigned long)

void * __thiscall IGCanonicalRangeAllocator::operator_new(IGCanonicalRangeAllocator *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGCanonicalRangeAllocator_ktv,this);
  return pvVar1;
}



// IGCanonicalRangeAllocator::IGCanonicalRangeAllocator()

void __thiscall
IGCanonicalRangeAllocator::IGCanonicalRangeAllocator(IGCanonicalRangeAllocator *this)

{
  IGRangeAllocator::IGRangeAllocator((IGRangeAllocator *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGCanonicalRangeAllocator;
  OSMetaClass::instanceConstructed();
  return;
}



// IGCanonicalRangeAllocator::IGCanonicalRangeAllocator()

void __thiscall
IGCanonicalRangeAllocator::IGCanonicalRangeAllocator(IGCanonicalRangeAllocator *this)

{
  IGRangeAllocator::IGRangeAllocator((IGRangeAllocator *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGCanonicalRangeAllocator;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGCanonicalRangeAllocator::withRange(IGAddressRange, unsigned long long, unsigned char)

IGCanonicalRangeAllocator * __cdecl
IGCanonicalRangeAllocator::withRange(long *param_1,undefined8 param_2,undefined1 param_3)

{
  IGCanonicalRangeAllocator *this;
  undefined8 uVar1;
  long local_38;
  long local_30;
  
  this = (IGCanonicalRangeAllocator *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGCanonicalRangeAllocator *)0x0) {
    local_38 = *param_1;
    local_30 = param_1[1];
    uVar1 = initWithRange(this,&local_38,param_2,param_3);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGCanonicalRangeAllocator *)0x0;
}



// IGCanonicalRangeAllocator::initWithRange(IGAddressRange, unsigned long long, unsigned char)

undefined8 __thiscall
IGCanonicalRangeAllocator::initWithRange
          (IGCanonicalRangeAllocator *this,long *param_1,undefined8 param_2,
          IGCanonicalRangeAllocator param_3)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long local_20;
  long local_18;
  
  this[0x30] = param_3;
  local_20 = *param_1;
  local_18 = param_1[1];
  uVar2 = IGRangeAllocator::initWithRange((IGRangeAllocator *)this,&local_20,param_2);
  if ((char)uVar2 == '\0') {
    uVar2 = 0;
  }
  else {
    lVar3 = 1L << ((char)this[0x30] - 1U & 0x3f);
    bVar1 = (char)this[0x30] - 1U & 0x3f;
    uVar2 = (**(code **)(*(long *)this + 0x158))
                      (this,lVar3,((-2L << bVar1 | 0xfffffffffffffffeU >> 0x40 - bVar1) - lVar3) + 1
                      );
  }
  return uVar2;
}



// IGCanonicalRangeAllocator::allocateRange(IGAddressRange)

void __thiscall
IGCanonicalRangeAllocator::allocateRange(IGCanonicalRangeAllocator *this,undefined8 *param_1)

{
                    // WARNING: Could not recover jumptable at 0x000100f9. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x158))(this,*param_1,param_1[1],*(code **)(*(long *)this + 0x158));
  return;
}



// IGCanonicalRangeAllocator::free()

void IGCanonicalRangeAllocator::free(void *param_1)

{
  IGRangeAllocator::free(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGCanonicalRangeAllocator::allocateRange(unsigned long long, unsigned long long)

void __cdecl IGCanonicalRangeAllocator::allocateRange(ulonglong param_1,ulonglong param_2)

{
  IORangeAllocator::allocateRange(param_1,param_2);
  return;
}



// IGCanonicalRangeAllocator::allocate(unsigned long long, unsigned long long*, unsigned long long)

undefined4 __thiscall
IGCanonicalRangeAllocator::allocate
          (IGCanonicalRangeAllocator *this,ulonglong *param_1,uintptr_t *param_2,uintptr_t param_3)

{
  undefined4 uVar1;
  uintptr_t arg3;
  
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00081,(uintptr_t)param_1,param_3,0,0,0);
  }
  uVar1 = IORangeAllocator::allocate((ulonglong)this,param_1,(ulonglong)param_2);
  if ((char)uVar1 == '\0') {
    if (_graphicsTracePointEnable == 0) {
      return uVar1;
    }
    arg3 = 0;
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return uVar1;
    }
  }
  else {
    if (_graphicsTracePointEnable == 0) {
      return uVar1;
    }
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return uVar1;
    }
    arg3 = *param_2;
  }
  _kernel_debug(0x85a00082,(uintptr_t)param_1,param_3,arg3,0,0);
  return uVar1;
}



// IGCanonicalRangeAllocator::deallocate(unsigned long long, unsigned long long)

void __thiscall
IGCanonicalRangeAllocator::deallocate
          (IGCanonicalRangeAllocator *this,uintptr_t param_1,uintptr_t param_2)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00085,param_1,param_2,0,0,0);
    }
  }
  IORangeAllocator::deallocate((ulonglong)this,param_1);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00086,param_1,param_2,0,0,0);
      return;
    }
  }
  return;
}



// IGCanonicalRangeAllocator::isCanonical(unsigned long long)

bool __thiscall
IGCanonicalRangeAllocator::isCanonical(IGCanonicalRangeAllocator *this,ulong param_1)

{
  bool bVar1;
  ulong uVar2;
  ulong uVar3;
  
  uVar2 = -(1L << ((char)this[0x30] - 1U & 0x3f));
  uVar3 = uVar2 & param_1;
  bVar1 = uVar3 == 0;
  if ((param_1 >> ((ulong)(byte)((char)this[0x30] - 1U) & 0x3f) & 1) != 0) {
    bVar1 = uVar3 == uVar2;
  }
  return bVar1;
}



// IGCanonicalRangeAllocator::MetaClass::~MetaClass()

void __thiscall IGCanonicalRangeAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGCanonicalRangeAllocator_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGCanonicalRangeAllocator::gMetaClass,"IGCanonicalRangeAllocator",
             (OSMetaClass *)&IGRangeAllocator::gMetaClass,0x38);
  IGCanonicalRangeAllocator::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGCanonicalRangeAllocator::gMetaClass);
  return;
}



// IGHardwarePerProcessPageTable32::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable32::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable32",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0xc0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable32::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable32::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32(OSMetaClass const*)

void __thiscall
IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this,OSMetaClass *param_1)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable32;
  return;
}



// IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32(OSMetaClass const*)

void __thiscall
IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this,OSMetaClass *param_1)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable32;
  return;
}



// IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32()

void __thiscall
IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  return;
}



// IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32()

void __thiscall
IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  return;
}



// IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32()

void __thiscall
IGHardwarePerProcessPageTable32::~IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this)

{
  IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this);
  _OSObject_typed_operator_delete(&IGHardwarePerProcessPageTable32_ktv,this,0xc0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable32::operator delete(void*, unsigned long)

void __cdecl IGHardwarePerProcessPageTable32::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwarePerProcessPageTable32_ktv,param_1,param_2);
  return;
}



// IGHardwarePerProcessPageTable32::getMetaClass() const

undefined8 * IGHardwarePerProcessPageTable32::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwarePerProcessPageTable32::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable32::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable32",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0xc0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable32::MetaClass::alloc() const

IGHardwarePerProcessPageTable * IGHardwarePerProcessPageTable32::MetaClass::alloc(void)

{
  IGHardwarePerProcessPageTable *this;
  
  this = (IGHardwarePerProcessPageTable *)
         _OSObject_typed_operator_new(&IGHardwarePerProcessPageTable32_ktv,0xc0);
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            (this,(OSMetaClass *)&IGHardwarePerProcessPageTable32::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable32;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwarePerProcessPageTable32::operator new(unsigned long)

void * __thiscall
IGHardwarePerProcessPageTable32::operator_new(IGHardwarePerProcessPageTable32 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwarePerProcessPageTable32_ktv,this);
  return pvVar1;
}



// IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32()

void __thiscall
IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable32;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32()

void __thiscall
IGHardwarePerProcessPageTable32::IGHardwarePerProcessPageTable32
          (IGHardwarePerProcessPageTable32 *this)

{
  IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
            ((IGHardwarePerProcessPageTable *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable32;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable32::withOptions(IntelAccelerator*, IGAccelTask*)

IGHardwarePerProcessPageTable32 * __cdecl
IGHardwarePerProcessPageTable32::withOptions(undefined8 param_1,undefined8 param_2)

{
  undefined4 uVar1;
  IGHardwarePerProcessPageTable32 *this;
  
  this = (IGHardwarePerProcessPageTable32 *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwarePerProcessPageTable32 *)0x0) {
    uVar1 = initWithOptions(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwarePerProcessPageTable32 *)0x0;
}



// IGHardwarePerProcessPageTable32::initWithOptions(IntelAccelerator*, IGAccelTask*)

undefined4 __thiscall
IGHardwarePerProcessPageTable32::initWithOptions
          (IGHardwarePerProcessPageTable32 *this,undefined8 param_1,undefined8 param_2)

{
  undefined4 uVar1;
  long lVar2;
  
  lVar2 = 0x40;
  do {
    *(undefined8 *)(this + lVar2 + 0x18) = 0;
    *(undefined8 *)(this + lVar2 + 0x10) = 0;
    *(undefined8 *)(this + lVar2 + 8) = 0;
    *(undefined8 *)(this + lVar2) = 0;
    lVar2 = lVar2 + 0x20;
  } while (lVar2 != 0xc0);
  uVar1 = IGHardwarePerProcessPageTable::initWithOptions
                    ((IGHardwarePerProcessPageTable *)this,param_1,param_2,0);
  if ((char)uVar1 != '\0') {
    (**(code **)(*(long *)this + 0x130))
              (this,*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xa0);
    (**(code **)(*(long *)this + 0x130))
              (this,*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xb0);
    (**(code **)(*(long *)this + 0x130))
              (this,*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xc0);
  }
  return uVar1;
}



// IGHardwarePerProcessPageTable32::free()

void __thiscall
IGHardwarePerProcessPageTable32::free(IGHardwarePerProcessPageTable32 *this,void *param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = 0;
  do {
    lVar1 = lVar3 * 0x20;
    if (*(long *)(this + lVar1 + 0x40) != 0) {
      lVar2 = 0;
      do {
        if (*(PageDescriptor **)(*(long *)(this + lVar1 + 0x48) + lVar2) != (PageDescriptor *)0x0) {
          IGPagePool::PageDescriptor::release
                    (*(PageDescriptor **)(*(long *)(this + lVar1 + 0x48) + lVar2));
        }
        lVar2 = lVar2 + 0x20;
      } while (lVar2 != 0x4000);
      _IOFreeData(*(undefined8 *)(this + lVar1 + 0x48),0x4000);
      IGPagePool::PageDescriptor::release(*(PageDescriptor **)(this + lVar1 + 0x40));
    }
    lVar3 = lVar3 + 1;
  } while (lVar3 != 4);
  IGHardwarePerProcessPageTable::free(this);
  return;
}



// IGHardwarePerProcessPageTable32::getPageTableRootPhysicalAddress(unsigned long long*)

void __thiscall
IGHardwarePerProcessPageTable32::getPageTableRootPhysicalAddress
          (IGHardwarePerProcessPageTable32 *this,long param_1)

{
  long lVar1;
  
  lVar1 = 0;
  do {
    *(undefined8 *)(param_1 + lVar1) = *(undefined8 *)(*(long *)(this + lVar1 * 4 + 0x40) + 0x18);
    lVar1 = lVar1 + 8;
  } while (lVar1 != 0x20);
  return;
}



// IGHardwarePerProcessPageTable32::mapRange(IGAddressRange const&, unsigned long long, unsigned
// long long)

ulong __thiscall
IGHardwarePerProcessPageTable32::mapRange
          (IGHardwarePerProcessPageTable32 *this,ulong *param_1,ulong param_2,ulong param_3)

{
  undefined8 in_RAX;
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  
  if (param_1[1] == 0) {
    uVar1 = CONCAT71((int7)((ulong)in_RAX >> 8),1);
  }
  else {
    uVar4 = *param_1;
    uVar3 = param_1[1] + uVar4;
    do {
      uVar1 = expand(this,uVar4 & 0xffffffff);
      if ((char)uVar1 == '\0') {
        return uVar1;
      }
      *(ulong *)(*(long *)(*(long *)(*(long *)(this + (ulong)((uint)(uVar4 >> 0x19) & 0x60) + 0x48)
                                    + (ulong)((uint)(uVar4 >> 0x10) & 0x3fe0)) + 0x20) +
                (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
           param_2 & 0x7ffffff000 | param_3 & 0xffffff8000000ffe | 1;
      param_2 = param_2 + *(long *)__got::_page_size;
      uVar2 = *(long *)__got::_page_size + uVar4;
      uVar4 = param_1[1] + *param_1;
      if (uVar2 < param_1[1] + *param_1) {
        uVar4 = uVar2;
      }
    } while (uVar4 != uVar3);
  }
  return uVar1;
}



// IGHardwarePerProcessPageTable32::mapRangeRotated(IGAddressRangeRotatedPageIterator&,
// IGPhysicalSegmentIterator&, unsigned long long)

ulong __thiscall
IGHardwarePerProcessPageTable32::mapRangeRotated
          (IGHardwarePerProcessPageTable32 *this,long *param_1,undefined8 *param_2,ulong param_3)

{
  ulong uVar1;
  undefined4 uVar2;
  long *plVar3;
  ulong uVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong local_78;
  long *local_70;
  ulong local_68;
  undefined4 local_60;
  ulong local_58;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  undefined8 *local_38;
  
  plVar3 = (long *)*param_2;
  uVar2 = *(undefined4 *)(param_2 + 2);
  local_70 = plVar3;
  local_40 = param_3;
  local_38 = param_2;
  lVar8 = (**(code **)(*plVar3 + 0x1c8))(plVar3);
  local_68 = lVar8 + 0xfffU & 0xfffffffffffff000;
  local_58 = 0;
  local_60 = uVar2;
  (**(code **)(*plVar3 + 0x20))(plVar3);
  local_50 = (**(code **)(*plVar3 + 0x138))(plVar3,0,&local_48,uVar2);
  local_48 = local_48 + 0xfff & 0xfffffffffffff000;
  plVar3 = (long *)*local_38;
  uVar4 = local_38[1];
  uVar2 = *(undefined4 *)(local_38 + 2);
  (**(code **)(*plVar3 + 0x1c8))(plVar3);
  local_38 = (undefined8 *)CONCAT44(local_38._4_4_,uVar2);
  (**(code **)(*plVar3 + 0x20))(plVar3);
  if (uVar4 == 0) {
    (**(code **)(*plVar3 + 0x138))(plVar3,0,&local_78,(ulong)local_38 & 0xffffffff);
    local_78 = local_78 + 0xfff & 0xfffffffffffff000;
  }
  else {
    local_78 = 0;
  }
  local_40 = local_40 & 0xffffff8000000ffe;
  uVar11 = CONCAT71((int7)((ulong)plVar3 >> 8),1);
  uVar1 = local_58;
  do {
    local_58 = uVar1;
    if ((local_70 == plVar3) && (local_58 == uVar4)) {
      if ((local_70 != (long *)0x0) && ((**(code **)(*local_70 + 0x28))(), local_70 != (long *)0x0))
      {
        (**(code **)(*local_70 + 0x28))();
      }
      return uVar11 & 0xffffff01;
    }
    uVar1 = local_48 + local_50;
    if (local_50 < uVar1) {
      uVar11 = param_1[3];
      uVar10 = local_50;
      do {
        uVar9 = expand(this,uVar11 & 0xffffffff);
        if ((char)uVar9 == '\0') {
          uVar11 = 0;
          goto LAB_000109eb;
        }
        *(ulong *)(*(long *)(*(long *)(*(long *)(this + (ulong)((uint)(uVar11 >> 0x19) & 0x60) +
                                                        0x48) +
                                      (ulong)((uint)(uVar11 >> 0x10) & 0x3fe0)) + 0x20) +
                  (ulong)((uint)(uVar11 >> 9) & 0xff8)) = uVar10 & 0x7ffffff000 | local_40 | 1;
        lVar8 = *(long *)__got::_page_size;
        lVar5 = *(long *)*param_1;
        lVar6 = ((long *)*param_1)[1];
        uVar7 = (int)param_1[1] + 1;
        *(uint *)(param_1 + 1) = uVar7;
        uVar9 = lVar6 + lVar5;
        uVar11 = (ulong)((uVar7 % *(uint *)((long)param_1 + 0xc)) * (int)param_1[2] +
                        ~(uVar7 / *(uint *)((long)param_1 + 0xc)) + (int)param_1[2]) * lVar8 + lVar5
        ;
        if (uVar9 <= uVar11) {
          uVar11 = uVar9;
        }
        param_1[3] = uVar11;
        uVar10 = uVar10 + lVar8;
      } while (uVar10 < uVar1);
      uVar11 = CONCAT71((int7)(uVar11 >> 8),1);
    }
LAB_000109eb:
    local_58 = local_48 + local_58;
    uVar1 = local_68;
    if (local_58 < local_68) {
      local_50 = (**(code **)(*local_70 + 0x138))(local_70,local_58,&local_48,local_60);
      local_48 = local_48 + 0xfff & 0xfffffffffffff000;
      uVar1 = local_58;
    }
  } while( true );
}



// IGHardwarePerProcessPageTable32::remapRange(IGAddressRange const&, unsigned long long, unsigned
// long long)

undefined8 __thiscall
IGHardwarePerProcessPageTable32::remapRange
          (IGHardwarePerProcessPageTable32 *this,ulong *param_1,ulong param_2,ulong param_3)

{
  undefined *puVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  
  puVar1 = __got::_page_size;
  uVar2 = param_1[1];
  if (uVar2 != 0) {
    uVar3 = *param_1;
    uVar2 = uVar2 + uVar3;
    do {
      *(ulong *)(*(long *)(*(long *)(*(long *)(this + (ulong)((uint)(uVar3 >> 0x19) & 0x60) + 0x48)
                                    + (ulong)((uint)(uVar3 >> 0x10) & 0x3fe0)) + 0x20) +
                (ulong)((uint)(uVar3 >> 9) & 0xff8)) =
           param_2 & 0x7ffffff000 | param_3 & 0xffffff8000000ffe | 1;
      param_2 = param_2 + *(long *)puVar1;
      uVar4 = *(long *)puVar1 + uVar3;
      uVar3 = param_1[1] + *param_1;
      if (uVar4 < param_1[1] + *param_1) {
        uVar3 = uVar4;
      }
    } while (uVar3 != uVar2);
  }
  return CONCAT71((int7)(uVar2 >> 8),1);
}



// IGHardwarePerProcessPageTable32::unmapRange(IGAddressRange const&)

void __thiscall
IGHardwarePerProcessPageTable32::unmapRange(IGHardwarePerProcessPageTable32 *this,ulong *param_1)

{
  undefined *puVar1;
  ulong uVar2;
  ulong uVar3;
  
  puVar1 = __got::_page_size;
  if (param_1[1] != 0) {
    uVar3 = *param_1;
    uVar2 = param_1[1] + uVar3;
    do {
      *(ulong *)(*(long *)(*(long *)(*(long *)(this + (ulong)((uint)(uVar3 >> 0x19) & 0x60) + 0x48)
                                    + (ulong)((uint)(uVar3 >> 0x10) & 0x3fe0)) + 0x20) +
                (ulong)((uint)(uVar3 >> 9) & 0xff8)) =
           *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf0) & 0x7ffffff000 | 3;
      uVar3 = uVar3 + *(long *)puVar1;
      if (param_1[1] + *param_1 <= uVar3) {
        uVar3 = param_1[1] + *param_1;
      }
    } while (uVar3 != uVar2);
  }
  return;
}



// IGHardwarePerProcessPageTable32::mapRangeDummy(IGAddressRange const&, unsigned long long)

ulong __thiscall
IGHardwarePerProcessPageTable32::mapRangeDummy
          (IGHardwarePerProcessPageTable32 *this,ulong *param_1,ulong param_2)

{
  ulong uVar1;
  undefined8 in_RAX;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  
  if (param_1[1] == 0) {
    uVar2 = CONCAT71((int7)((ulong)in_RAX >> 8),1);
  }
  else {
    uVar4 = *param_1;
    uVar3 = param_1[1] + uVar4;
    uVar1 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0xf0);
    do {
      uVar2 = expand(this,uVar4 & 0xffffffff);
      if ((char)uVar2 == '\0') {
        return uVar2;
      }
      *(ulong *)(*(long *)(*(long *)(*(long *)(this + (ulong)((uint)(uVar4 >> 0x19) & 0x60) + 0x48)
                                    + (ulong)((uint)(uVar4 >> 0x10) & 0x3fe0)) + 0x20) +
                (ulong)((uint)(uVar4 >> 9) & 0xff8)) =
           (param_2 & 0xffffff8000000ffe) + (uVar1 & 0x7ffffff000) + 1;
      uVar4 = uVar4 + *(long *)__got::_page_size;
      if (param_1[1] + *param_1 <= uVar4) {
        uVar4 = param_1[1] + *param_1;
      }
    } while (uVar4 != uVar3);
  }
  return uVar2;
}



// IGHardwarePerProcessPageTable32::read(unsigned long long, unsigned long long&, unsigned long
// long&) const

ssize_t __thiscall
IGHardwarePerProcessPageTable32::read
          (IGHardwarePerProcessPageTable32 *this,int param_1,void *param_2,size_t param_3)

{
  long lVar1;
  uint uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(*(long *)(*(long *)(this + (ulong)((uint)param_1 >> 0x19 & 0x60) + 0x48) +
                             (ulong)((uint)param_1 >> 0x10 & 0x3fe0)) + 0x20);
  uVar3 = (ulong)((uint)param_1 >> 9 & 0xff8);
  *(ulong *)param_2 = *(ulong *)(lVar1 + uVar3) & 0x7ffffff000;
  uVar2 = (uint)*(undefined8 *)(lVar1 + uVar3) & 0xfff;
  *(ulong *)param_3 = (ulong)uVar2;
  return CONCAT71((uint7)(uint3)(uVar2 >> 8),1);
}



// IGHardwarePerProcessPageTable32::expand(GTTVirtualAddress32)

ulong __thiscall
IGHardwarePerProcessPageTable32::expand(IGHardwarePerProcessPageTable32 *this,ulong param_1)

{
  IGMemoryManager *this_00;
  IGPagePool *pIVar1;
  IGHardwarePerProcessPageTable32 *pIVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  ulong arg2;
  ulong uVar8;
  
  arg2 = param_1 >> 0x1e & 3;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a000c1,0,arg2,(ulong)((uint)(param_1 >> 0x15) & 0x1ff),
                    (ulong)((uint)(param_1 >> 0xc) & 0x1ff),0);
    }
  }
  this_00 = *(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x10));
  uVar8 = *(ulong *)(this_00 + 0xf0);
  lVar5 = arg2 * 0x20;
  pIVar2 = this + lVar5 + 0x40;
  if (*(long *)pIVar2 == 0) {
    uVar6 = *(ulong *)(this_00 + 0xf8);
    pIVar1 = (IGPagePool *)IGMemoryManager::getPagePool(this_00);
    lVar4 = IGPagePool::allocatePage(pIVar1);
    *(long *)pIVar2 = lVar4;
    if (lVar4 != 0) {
      lVar4 = *(long *)(lVar4 + 0x20);
      lVar3 = 0;
      do {
        *(ulong *)(lVar4 + lVar3 * 8) = uVar6 & 0x7ffffff000 | 3;
        lVar3 = lVar3 + 1;
      } while (lVar3 != 0x200);
      lVar4 = _IOMallocZeroData(0x4000);
      *(long *)(this + lVar5 + 0x48) = lVar4;
      if (lVar4 != 0) goto LAB_00010d68;
      if (*(PageDescriptor **)pIVar2 != (PageDescriptor *)0x0) {
        IGPagePool::PageDescriptor::release(*(PageDescriptor **)pIVar2);
      }
      *(long *)pIVar2 = 0;
    }
LAB_00010eda:
    uVar8 = 0;
  }
  else {
    lVar4 = *(long *)(this + lVar5 + 0x48);
LAB_00010d68:
    uVar6 = (ulong)((uint)(param_1 >> 0x15) & 0x1ff);
    if (*(long *)(lVar4 + uVar6 * 0x20) == 0) {
      plVar7 = (long *)(lVar4 + uVar6 * 0x20);
      pIVar1 = (IGPagePool *)
               IGMemoryManager::getPagePool
                         (*(IGMemoryManager **)(&DAT_00001290 + *(long *)(this + 0x10)));
      lVar5 = IGPagePool::allocatePage(pIVar1);
      *plVar7 = lVar5;
      if (lVar5 == 0) goto LAB_00010eda;
      lVar5 = *(long *)(lVar5 + 0x20);
      lVar4 = 0;
      do {
        *(ulong *)(lVar5 + lVar4 * 8) = uVar8 & 0x7ffffff000 | 3;
        lVar4 = lVar4 + 1;
      } while (lVar4 != 0x200);
      *(ulong *)(*(long *)(*(long *)pIVar2 + 0x20) + uVar6 * 8) =
           *(ulong *)(*plVar7 + 0x18) & 0x7ffffff000 | 3;
    }
    uVar8 = CONCAT71((int7)((ulong)this >> 8),1);
    if (_graphicsTracePointEnable != 0) {
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a000c2,0,arg2,uVar6,(ulong)((uint)param_1 >> 0xc & 0x1ff),0);
      }
    }
  }
  return uVar8 & 0xffffffff;
}



// bool 
// IGHardwarePerProcessPageTable32::commitLevel<IGHardwarePerProcessPageTable32::LevelEntry<9ul,
// GTTPageDirectoryEntry>, void>(IGPagePool::PageDescriptor const*, void*, unsigned long long,
// unsigned long)

undefined1 IGHardwarePerProcessPageTable32::commitLevel<>(void)

{
  return 1;
}



// bool 
// IGHardwarePerProcessPageTable32::allocateDescriptorTable<IGHardwarePerProcessPageTable32::LevelEntry<9ul,
// GTTPageTableEntry> >(IGHardwarePerProcessPageTable32::LevelEntry<9ul, GTTPageTableEntry>&)

undefined1 IGHardwarePerProcessPageTable32::allocateDescriptorTable<>(void)

{
  return 1;
}



// IGHardwarePerProcessPageTable32::validateMapping(GTTVirtualAddress32, unsigned long long)

void IGHardwarePerProcessPageTable32::validateMapping(void)

{
  return;
}



// IGHardwarePerProcessPageTable32::hwPageWalk(GTTVirtualAddress32) const

undefined8 IGHardwarePerProcessPageTable32::hwPageWalk(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable32::describeDriverAllocations(IOAccelAllocationInfo*, int)

void IGHardwarePerProcessPageTable32::describeDriverAllocations(void)

{
  return;
}



// IGHardwarePerProcessPageTable32::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable32::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwarePerProcessPageTable32_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwarePerProcessPageTable32::gMetaClass,
             "IGHardwarePerProcessPageTable32",
             (OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,0xc0);
  IGHardwarePerProcessPageTable32::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwarePerProcessPageTable32::gMetaClass);
  return;
}



// IGAccelSysMemory::MetaClass::MetaClass()

void __thiscall IGAccelSysMemory::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSysMemory",(OSMetaClass *)__got::gMetaClass,0x198);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSysMemory::MetaClass::~MetaClass()

void __thiscall IGAccelSysMemory::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelSysMemory::IGAccelSysMemory(OSMetaClass const*)

void __thiscall IGAccelSysMemory::IGAccelSysMemory(IGAccelSysMemory *this,OSMetaClass *param_1)

{
  IOAccelSysMemory::IOAccelSysMemory((IOAccelSysMemory *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSysMemory;
  return;
}



// IGAccelSysMemory::IGAccelSysMemory(OSMetaClass const*)

void __thiscall IGAccelSysMemory::IGAccelSysMemory(IGAccelSysMemory *this,OSMetaClass *param_1)

{
  IOAccelSysMemory::IOAccelSysMemory((IOAccelSysMemory *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSysMemory;
  return;
}



// IGAccelSysMemory::~IGAccelSysMemory()

void __thiscall IGAccelSysMemory::~IGAccelSysMemory(IGAccelSysMemory *this)

{
  IOAccelSysMemory::~IOAccelSysMemory((IOAccelSysMemory *)this);
  return;
}



// IGAccelSysMemory::~IGAccelSysMemory()

void __thiscall IGAccelSysMemory::~IGAccelSysMemory(IGAccelSysMemory *this)

{
  IOAccelSysMemory::~IOAccelSysMemory((IOAccelSysMemory *)this);
  return;
}



// IGAccelSysMemory::~IGAccelSysMemory()

void __thiscall IGAccelSysMemory::~IGAccelSysMemory(IGAccelSysMemory *this)

{
  IOAccelSysMemory::~IOAccelSysMemory((IOAccelSysMemory *)this);
  _OSObject_typed_operator_delete(&IGAccelSysMemory_ktv,this,0x198);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSysMemory::operator delete(void*, unsigned long)

void __cdecl IGAccelSysMemory::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelSysMemory_ktv,param_1,param_2);
  return;
}



// IGAccelSysMemory::getMetaClass() const

undefined8 * IGAccelSysMemory::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelSysMemory::MetaClass::MetaClass()

void __thiscall IGAccelSysMemory::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSysMemory",(OSMetaClass *)__got::gMetaClass,0x198);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSysMemory::MetaClass::alloc() const

IOAccelSysMemory * IGAccelSysMemory::MetaClass::alloc(void)

{
  IOAccelSysMemory *this;
  
  this = (IOAccelSysMemory *)_OSObject_typed_operator_new(&IGAccelSysMemory_ktv,0x198);
  IOAccelSysMemory::IOAccelSysMemory(this,(OSMetaClass *)&IGAccelSysMemory::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSysMemory;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelSysMemory::operator new(unsigned long)

void * __thiscall IGAccelSysMemory::operator_new(IGAccelSysMemory *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelSysMemory_ktv,this);
  return pvVar1;
}



// IGAccelSysMemory::IGAccelSysMemory()

void __thiscall IGAccelSysMemory::IGAccelSysMemory(IGAccelSysMemory *this)

{
  IOAccelSysMemory::IOAccelSysMemory((IOAccelSysMemory *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSysMemory;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSysMemory::IGAccelSysMemory()

void __thiscall IGAccelSysMemory::IGAccelSysMemory(IGAccelSysMemory *this)

{
  IOAccelSysMemory::IOAccelSysMemory((IOAccelSysMemory *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSysMemory;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSysMemory::init(IOGraphicsAccelerator2*)

void IGAccelSysMemory::init(void)

{
                    // WARNING: Could not recover jumptable at 0x0001113a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x128))();
  return;
}



// IGAccelSysMemory::wire()

undefined4 __thiscall IGAccelSysMemory::wire(IGAccelSysMemory *this)

{
  undefined *puVar1;
  undefined4 uVar2;
  long lVar3;
  
  uVar2 = (**(code **)(__got::vtable + 0x1c0))();
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    puVar1 = __got::_kdebug_enable;
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a000ec,*(uintptr_t *)(*(long *)(this + 0x28) + 0x350),0x3e,2,0,0);
    }
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(**(long **)(this + 0x28) + 0x990))();
      dtHookTrace();
      if ((*(uint *)puVar1 & 0xfffffff7) != 0) {
        lVar3 = (**(code **)(**(long **)(this + 0x28) + 0x990))();
        _kernel_debug(0x85a000f0,lVar3 - *(long *)(*(long *)(this + 0x28) + 0x350),0x3f,3,0,0);
      }
    }
  }
  return uVar2;
}



// IGAccelSysMemory::unwire()

void __thiscall IGAccelSysMemory::unwire(IGAccelSysMemory *this)

{
  undefined *puVar1;
  long lVar2;
  
  (**(code **)(__got::vtable + 0x1c8))();
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    puVar1 = __got::_kdebug_enable;
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a000ec,*(uintptr_t *)(*(long *)(this + 0x28) + 0x350),0x4d,0xc,0,0);
    }
    if (_graphicsTracePointEnable != 0) {
      (**(code **)(**(long **)(this + 0x28) + 0x990))();
      dtHookTrace();
      if ((*(uint *)puVar1 & 0xfffffff7) != 0) {
        lVar2 = (**(code **)(**(long **)(this + 0x28) + 0x990))();
        _kernel_debug(0x85a000f0,lVar2 - *(long *)(*(long *)(this + 0x28) + 0x350),0x4e,0xd,0,0);
        return;
      }
    }
  }
  return;
}



// IGAccelSysMemory::getPhysicalSegment(unsigned long long, unsigned long long*)

void __thiscall
IGAccelSysMemory::getPhysicalSegment
          (IGAccelSysMemory *this,undefined8 param_2_00,undefined8 *param_2)

{
  (**(code **)(**(long **)(this + 0xd0) + 0x138))();
  if (param_2 != (undefined8 *)0x0) {
    *param_2 = 0;
  }
  return;
}



// IGAccelSysMemory::MetaClass::~MetaClass()

void __thiscall IGAccelSysMemory::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelMemory::getLength() const

undefined8 __thiscall IOAccelMemory::getLength(IOAccelMemory *this)

{
  return *(undefined8 *)(this + 0x40);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IOAccelSysMemory::setTag(unsigned int)

void __cdecl IOAccelSysMemory::setTag(long param_1)

{
                    // WARNING: Could not recover jumptable at 0x000113c8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(param_1 + 0xd0) + 0x1d0))();
  return;
}



// IOAccelSysMemory::getTag()

void __thiscall IOAccelSysMemory::getTag(IOAccelSysMemory *this)

{
                    // WARNING: Could not recover jumptable at 0x000113d9. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0xd0) + 0x1d8))();
  return;
}



void __GLOBAL__sub_I_IGAccelSysMemory_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelSysMemory::gMetaClass,"IGAccelSysMemory",
             (OSMetaClass *)__got::gMetaClass,0x198);
  IGAccelSysMemory::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelSysMemory::gMetaClass);
  return;
}



// IGHardwarePerProcessPageTable::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable",
             (OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x30);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable(OSMetaClass const*)

void __thiscall
IGHardwarePerProcessPageTable::IGHardwarePerProcessPageTable
          (IGHardwarePerProcessPageTable *this,OSMetaClass *param_1)

{
  IGHardwarePageTable::IGHardwarePageTable((IGHardwarePageTable *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePerProcessPageTable;
  return;
}



// IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable()

void __thiscall
IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable(IGHardwarePerProcessPageTable *this)

{
  IGHardwarePageTable::~IGHardwarePageTable((IGHardwarePageTable *)this);
  return;
}



// IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable()

void __thiscall IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable()

void __thiscall IGHardwarePerProcessPageTable::~IGHardwarePerProcessPageTable(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGHardwarePerProcessPageTable::getMetaClass() const

undefined ** IGHardwarePerProcessPageTable::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwarePerProcessPageTable::MetaClass::MetaClass()

void __thiscall IGHardwarePerProcessPageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePerProcessPageTable",
             (OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x30);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePerProcessPageTable::MetaClass::alloc() const

undefined8 IGHardwarePerProcessPageTable::MetaClass::alloc(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable::operator new(unsigned long)

void * __thiscall IGHardwarePerProcessPageTable::operator_new(IGHardwarePerProcessPageTable *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwarePerProcessPageTable_ktv,this);
  return pvVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePerProcessPageTable::operator delete(void*, unsigned long)

void __cdecl IGHardwarePerProcessPageTable::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwarePerProcessPageTable_ktv,param_1,param_2);
  return;
}



// IGHardwarePerProcessPageTable::initWithOptions(IntelAccelerator*, IGAccelTask*, unsigned int)

void __thiscall
IGHardwarePerProcessPageTable::initWithOptions
          (IGHardwarePerProcessPageTable *this,undefined8 param_1,undefined8 param_2,
          undefined4 param_3)

{
  char cVar1;
  
  cVar1 = IGHardwarePageTable::initWithOptions((IGHardwarePageTable *)this,param_1,1);
  if (cVar1 != '\0') {
    *(undefined8 *)(this + 0x20) = param_2;
    *(undefined4 *)(this + 0x28) = param_3;
  }
  return;
}



// IGHardwarePerProcessPageTable::free()

void IGHardwarePerProcessPageTable::free(void *param_1)

{
  IGHardwarePageTable::free(param_1);
  return;
}



// void 
// IGHardwarePerProcessPageTable::synchronizeWith<IGHardwareGlobalPageTable>(IGHardwareGlobalPageTable
// const*, IGAddressRange const&, bool)

void __thiscall
IGHardwarePerProcessPageTable::synchronizeWith<>
          (IGHardwarePerProcessPageTable *this,long *param_1,ulong *param_2,byte param_3)

{
  synchronizeEachEntry(this,param_1,param_2,param_3);
  return;
}



// IGHardwarePerProcessPageTable::synchronizeEachEntry(IGHardwarePageTable const*, IGAddressRange
// const&, bool)

void __thiscall
IGHardwarePerProcessPageTable::synchronizeEachEntry
          (IGHardwarePerProcessPageTable *this,long *param_1,ulong *param_2,byte param_3)

{
  char cVar1;
  code *pcVar2;
  ulong uVar3;
  ulong uVar4;
  code *pcVar5;
  ulong local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  IGHardwarePerProcessPageTable *local_38;
  
  local_48 = 0;
  local_40 = 0;
  local_38 = this;
  if (param_2[1] != 0) {
    uVar3 = *param_2;
    uVar4 = param_2[1] + uVar3;
    pcVar5 = (code *)((ulong)param_3 * 0x10 + 0x119);
    do {
      cVar1 = (**(code **)(*param_1 + 0x140))(param_1,uVar3,&local_48,&local_40);
      if (cVar1 != '\0') {
        local_50 = *(undefined8 *)__got::_page_size;
        pcVar2 = pcVar5;
        if (((ulong)pcVar5 & 1) != 0) {
          pcVar2 = *(code **)(pcVar5 + *(long *)local_38 + -1);
        }
        local_58 = uVar3;
        cVar1 = (*pcVar2)(local_38,&local_58,local_48,local_40);
        if (cVar1 == '\0') break;
      }
      uVar3 = uVar3 + *(long *)__got::_page_size;
      if (param_2[1] + *param_2 <= uVar3) {
        uVar3 = param_2[1] + *param_2;
      }
    } while (uVar3 != uVar4);
  }
  IntelAccelerator::flushHardwareAfterGttUpdate(*(IntelAccelerator **)(local_38 + 0x10));
  return;
}



// void 
// IGHardwarePerProcessPageTable::synchronizeWith<IGHardwarePerProcessPageTable>(IGHardwarePerProcessPageTable
// const*, IGAddressRange const&, bool)

void __thiscall
IGHardwarePerProcessPageTable::synchronizeWith<>
          (IGHardwarePerProcessPageTable *this,long *param_1,ulong *param_2,byte param_3)

{
  char cVar1;
  undefined8 local_30;
  undefined8 local_28;
  undefined8 local_20;
  
  if ((((byte)this[0x28] & 1) != 0) && ((*(byte *)(param_1 + 5) & 1) != 0)) {
    local_30 = 0;
    local_28 = 0x40000000;
    local_20 = 0;
    cVar1 = (**(code **)(*param_1 + 0x168))(param_1,&local_30);
    if (cVar1 != '\0') {
      (**(code **)(*(long *)this + 0x158 + (ulong)param_3 * 8))(this,&local_30,local_20);
    }
    return;
  }
  synchronizeEachEntry(this,param_1,param_2,param_3);
  return;
}



// IGHardwarePerProcessPageTable::synchronizePageDescriptor(IGHardwarePerProcessPageTable const*,
// IGAddressRange const&, bool)

void __thiscall
IGHardwarePerProcessPageTable::synchronizePageDescriptor
          (IGHardwarePerProcessPageTable *this,long *param_1,undefined8 param_2,ulong param_3)

{
  char cVar1;
  
  cVar1 = (**(code **)(*param_1 + 0x168))(param_1,param_2);
  if (cVar1 != '\0') {
    (**(code **)(*(long *)this + 0x158 + (param_3 & 0xff) * 8))(this,param_2,0);
  }
  return;
}



// IGHardwarePerProcessPageTable::mapDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor*)

undefined8 IGHardwarePerProcessPageTable::mapDescriptorForRange(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable::remapDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor*)

undefined8 IGHardwarePerProcessPageTable::remapDescriptorForRange(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable::readDescriptorForRange(IGAddressRange const&,
// IGPagePool::PageDescriptor**) const

undefined8 IGHardwarePerProcessPageTable::readDescriptorForRange(void)

{
  return 0;
}



// IGHardwarePerProcessPageTable::MetaClass::~MetaClass()

void __thiscall IGHardwarePerProcessPageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwarePerProcessPageTable_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass,
             "IGHardwarePerProcessPageTable",(OSMetaClass *)&IGHardwarePageTable::gMetaClass,0x30);
  IGHardwarePerProcessPageTable::gMetaClass = (undefined *)&__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwarePerProcessPageTable::gMetaClass);
  return;
}



// IGRangeAllocator::MetaClass::MetaClass()

void __thiscall IGRangeAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGRangeAllocator",(OSMetaClass *)__got::gMetaClass,0x30);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGRangeAllocator::MetaClass::~MetaClass()

void __thiscall IGRangeAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGRangeAllocator::IGRangeAllocator(OSMetaClass const*)

void __thiscall IGRangeAllocator::IGRangeAllocator(IGRangeAllocator *this,OSMetaClass *param_1)

{
  IORangeAllocator::IORangeAllocator((IORangeAllocator *)this,param_1);
  *(undefined ***)this = &__const::~IGRangeAllocator;
  return;
}



// IGRangeAllocator::IGRangeAllocator(OSMetaClass const*)

void __thiscall IGRangeAllocator::IGRangeAllocator(IGRangeAllocator *this,OSMetaClass *param_1)

{
  IORangeAllocator::IORangeAllocator((IORangeAllocator *)this,param_1);
  *(undefined ***)this = &__const::~IGRangeAllocator;
  return;
}



// IGRangeAllocator::~IGRangeAllocator()

void __thiscall IGRangeAllocator::~IGRangeAllocator(IGRangeAllocator *this)

{
  IORangeAllocator::~IORangeAllocator((IORangeAllocator *)this);
  return;
}



// IGRangeAllocator::~IGRangeAllocator()

void __thiscall IGRangeAllocator::~IGRangeAllocator(IGRangeAllocator *this)

{
  IORangeAllocator::~IORangeAllocator((IORangeAllocator *)this);
  return;
}



// IGRangeAllocator::~IGRangeAllocator()

void __thiscall IGRangeAllocator::~IGRangeAllocator(IGRangeAllocator *this)

{
  IORangeAllocator::~IORangeAllocator((IORangeAllocator *)this);
  _OSObject_typed_operator_delete(&IGRangeAllocator_ktv,this,0x30);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGRangeAllocator::operator delete(void*, unsigned long)

void __cdecl IGRangeAllocator::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGRangeAllocator_ktv,param_1,param_2);
  return;
}



// IGRangeAllocator::getMetaClass() const

undefined8 * IGRangeAllocator::getMetaClass(void)

{
  return &gMetaClass;
}



// IGRangeAllocator::MetaClass::MetaClass()

void __thiscall IGRangeAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGRangeAllocator",(OSMetaClass *)__got::gMetaClass,0x30);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGRangeAllocator::MetaClass::alloc() const

IORangeAllocator * IGRangeAllocator::MetaClass::alloc(void)

{
  IORangeAllocator *this;
  
  this = (IORangeAllocator *)_OSObject_typed_operator_new(&IGRangeAllocator_ktv,0x30);
  IORangeAllocator::IORangeAllocator(this,(OSMetaClass *)&IGRangeAllocator::gMetaClass);
  *(undefined ***)this = &__const::~IGRangeAllocator;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGRangeAllocator::operator new(unsigned long)

void * __thiscall IGRangeAllocator::operator_new(IGRangeAllocator *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGRangeAllocator_ktv,this);
  return pvVar1;
}



// IGRangeAllocator::IGRangeAllocator()

void __thiscall IGRangeAllocator::IGRangeAllocator(IGRangeAllocator *this)

{
  IORangeAllocator::IORangeAllocator((IORangeAllocator *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGRangeAllocator;
  OSMetaClass::instanceConstructed();
  return;
}



// IGRangeAllocator::IGRangeAllocator()

void __thiscall IGRangeAllocator::IGRangeAllocator(IGRangeAllocator *this)

{
  IORangeAllocator::IORangeAllocator((IORangeAllocator *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGRangeAllocator;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGRangeAllocator::withRange(IGAddressRange, unsigned long long)

IGRangeAllocator * __cdecl IGRangeAllocator::withRange(long *param_1,undefined8 param_2)

{
  IGRangeAllocator *this;
  undefined8 uVar1;
  long local_30;
  long local_28;
  
  this = (IGRangeAllocator *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGRangeAllocator *)0x0) {
    local_30 = *param_1;
    local_28 = param_1[1];
    uVar1 = initWithRange(this,&local_30,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGRangeAllocator *)0x0;
}



// IGRangeAllocator::initWithRange(IGAddressRange, unsigned long long)

undefined8 __thiscall
IGRangeAllocator::initWithRange(IGRangeAllocator *this,long *param_1,undefined8 param_2)

{
  char cVar1;
  undefined8 uVar2;
  
  uVar2 = 0;
  cVar1 = (**(code **)(__got::vtable + 0x138))(this,param_1[1] + *param_1 + -1,param_2,0,0);
  if (cVar1 != '\0') {
    if ((*param_1 != 0) &&
       (cVar1 = (**(code **)(*(long *)this + 0x158))(this,0,*param_1 + -1), cVar1 == '\0')) {
      return 0;
    }
    uVar2 = 1;
  }
  return uVar2;
}



// IGRangeAllocator::free()

void IGRangeAllocator::free(void *param_1)

{
                    // WARNING: Could not recover jumptable at 0x00011a16. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))();
  return;
}



// IGRangeAllocator::MetaClass::~MetaClass()

void __thiscall IGRangeAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGRangeAllocator_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGRangeAllocator::gMetaClass,"IGRangeAllocator",
             (OSMetaClass *)__got::gMetaClass,0x30);
  IGRangeAllocator::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGRangeAllocator::gMetaClass);
  return;
}



// IGFence::MetaClass::MetaClass()

void __thiscall IGFence::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGFence",(OSMetaClass *)__got::gMetaClass,0x40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFence::MetaClass::~MetaClass()

void __thiscall IGFence::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGFence::IGFence(OSMetaClass const*)

void __thiscall IGFence::IGFence(IGFence *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGFence;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  return;
}



// IGFence::IGFence(OSMetaClass const*)

void __thiscall IGFence::IGFence(IGFence *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGFence;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  return;
}



// IGFence::~IGFence()

void __thiscall IGFence::~IGFence(IGFence *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGFence::~IGFence()

void __thiscall IGFence::~IGFence(IGFence *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGFence::~IGFence()

void __thiscall IGFence::~IGFence(IGFence *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGFence_ktv,this,0x40);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFence::operator delete(void*, unsigned long)

void __cdecl IGFence::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGFence_ktv,param_1,param_2);
  return;
}



// IGFence::getMetaClass() const

undefined8 * IGFence::getMetaClass(void)

{
  return &gMetaClass;
}



// IGFence::MetaClass::MetaClass()

void __thiscall IGFence::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGFence",(OSMetaClass *)__got::gMetaClass,0x40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFence::MetaClass::alloc() const

OSObject * IGFence::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGFence_ktv,0x40);
  OSObject::OSObject(this,(OSMetaClass *)&IGFence::gMetaClass);
  *(undefined ***)this = &__const::~IGFence;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGFence::operator new(unsigned long)

void * __thiscall IGFence::operator_new(IGFence *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGFence_ktv,this);
  return pvVar1;
}



// IGFence::IGFence()

void __thiscall IGFence::IGFence(IGFence *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFence;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGFence::IGFence()

void __thiscall IGFence::IGFence(IGFence *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFence;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFence::withOptions(IGFenceAllocator*, unsigned long, IGAddressRange const&, unsigned long,
// GFX3DSTATE_TILEMODE)

IGFence * __cdecl
IGFence::withOptions(long param_1,undefined8 param_2,undefined8 *param_3,long param_4,int param_5)

{
  char cVar1;
  IGFence *this;
  
  this = (IGFence *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGFence *)0x0) {
    cVar1 = initWithOptions(this,param_1,param_2,param_3,param_4,param_5);
    if (cVar1 == '\0') {
      this = (IGFence *)0x0;
    }
  }
  return this;
}



// IGFence::initWithOptions(IGFenceAllocator*, unsigned long, IGAddressRange const&, unsigned long,
// GFX3DSTATE_TILEMODE)

char __thiscall
IGFence::initWithOptions
          (IGFence *this,long param_1,undefined8 param_2,undefined8 *param_3,long param_4,
          int param_5)

{
  undefined8 uVar1;
  undefined8 uVar2;
  IntelAccelerator *this_00;
  long lVar3;
  uint uVar4;
  char cVar5;
  
  cVar5 = (**(code **)(__got::vtable + 0x98))();
  if (cVar5 != '\0') {
    *(long *)(this + 0x10) = param_1;
    *(undefined8 *)(this + 0x18) = param_2;
    uVar1 = *param_3;
    *(undefined8 *)(this + 0x20) = uVar1;
    uVar2 = param_3[1];
    *(undefined8 *)(this + 0x28) = uVar2;
    *(long *)(this + 0x30) = param_4;
    *(int *)(this + 0x38) = param_5;
    uVar4 = (uint)uVar1;
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(param_1 + 0x10),1,4);
    this_00 = *(IntelAccelerator **)(*(long *)(this + 0x10) + 0x10);
    lVar3 = *(long *)(this_00 + 0x1270);
    *(uint *)(lVar3 + (ulong)((int)param_2 * 8 + 0x100004)) =
         (uVar4 + (int)uVar2) - 1 & 0xfffff000 |
         (uint)((ulong)(param_4 * 0x2000000 + 0x3ff00000000) >> 0x20) & 0x3ff;
    *(uint *)(lVar3 + (ulong)((int)param_2 * 8 + 0x100000)) =
         (uVar4 & 0xfffff000) + (uint)(param_5 != 2) * 2 + 1;
    IntelAccelerator::SafeForceWake(this_00,0,4);
  }
  return cVar5;
}



// IGFence::free()

void __thiscall IGFence::free(IGFence *this,void *param_1)

{
  ulong *puVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  long lVar6;
  IntelAccelerator *this_00;
  long lVar7;
  
  iVar2 = *(int *)(this + 0x18);
  iVar3 = *(int *)(this + 0x38);
  uVar4 = *(uint *)(this + 0x20);
  iVar5 = *(int *)(this + 0x28);
  lVar6 = *(long *)(this + 0x30);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(*(long *)(this + 0x10) + 0x10),1,4);
  this_00 = *(IntelAccelerator **)(*(long *)(this + 0x10) + 0x10);
  lVar7 = *(long *)(this_00 + 0x1270);
  *(uint *)(lVar7 + (ulong)(iVar2 * 8 + 0x100004)) =
       (uVar4 + iVar5) - 1 & 0xfffff000 |
       (uint)((ulong)(lVar6 * 0x2000000 + 0x3ff00000000) >> 0x20) & 0x3ff;
  *(uint *)(lVar7 + (ulong)(iVar2 * 8 + 0x100000)) = (uVar4 & 0xfffff000) + (uint)(iVar3 != 2) * 2;
  IntelAccelerator::SafeForceWake(this_00,0,4);
  puVar1 = (ulong *)(*(long *)(this + 0x10) + 0x40 + (*(ulong *)(this + 0x18) >> 6) * 8);
  *puVar1 = *puVar1 | 1L << ((byte)*(ulong *)(this + 0x18) & 0x3f);
                    // WARNING: Could not recover jumptable at 0x00011eac. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGFenceAllocator::deallocate(unsigned long)

void __thiscall IGFenceAllocator::deallocate(IGFenceAllocator *this,ulong param_1)

{
  *(ulong *)(this + (param_1 >> 6) * 8 + 0x40) =
       *(ulong *)(this + (param_1 >> 6) * 8 + 0x40) | 1L << ((byte)param_1 & 0x3f);
  return;
}



// IGFenceAllocator::MetaClass::MetaClass()

void __thiscall IGFenceAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGFenceAllocator",(OSMetaClass *)__got::gMetaClass,0x80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFenceAllocator::MetaClass::~MetaClass()

void __thiscall IGFenceAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGFenceAllocator::IGFenceAllocator(OSMetaClass const*)

void __thiscall IGFenceAllocator::IGFenceAllocator(IGFenceAllocator *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGFenceAllocator;
  *(undefined8 *)(this + 0x40) = 0;
  return;
}



// IGFenceAllocator::IGFenceAllocator(OSMetaClass const*)

void __thiscall IGFenceAllocator::IGFenceAllocator(IGFenceAllocator *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGFenceAllocator;
  *(undefined8 *)(this + 0x40) = 0;
  return;
}



// IGFenceAllocator::~IGFenceAllocator()

void __thiscall IGFenceAllocator::~IGFenceAllocator(IGFenceAllocator *this)

{
  *(undefined ***)this = &__const::~IGFenceAllocator;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGFenceAllocator::~IGFenceAllocator()

void __thiscall IGFenceAllocator::~IGFenceAllocator(IGFenceAllocator *this)

{
  *(undefined ***)this = &__const::~IGFenceAllocator;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGFenceAllocator::~IGFenceAllocator()

void __thiscall IGFenceAllocator::~IGFenceAllocator(IGFenceAllocator *this)

{
  *(undefined ***)this = &__const::~IGFenceAllocator;
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGFenceAllocator_ktv,this,0x80);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFenceAllocator::operator delete(void*, unsigned long)

void __cdecl IGFenceAllocator::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGFenceAllocator_ktv,param_1,param_2);
  return;
}



// IGFenceAllocator::getMetaClass() const

undefined8 * IGFenceAllocator::getMetaClass(void)

{
  return &gMetaClass;
}



// IGFenceAllocator::MetaClass::MetaClass()

void __thiscall IGFenceAllocator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGFenceAllocator",(OSMetaClass *)__got::gMetaClass,0x80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFenceAllocator::MetaClass::alloc() const

OSObject * IGFenceAllocator::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGFenceAllocator_ktv,0x80);
  OSObject::OSObject(this,(OSMetaClass *)&IGFenceAllocator::gMetaClass);
  *(undefined ***)this = &__const::~IGFenceAllocator;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGFenceAllocator::operator new(unsigned long)

void * __thiscall IGFenceAllocator::operator_new(IGFenceAllocator *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGFenceAllocator_ktv,this);
  return pvVar1;
}



// IGFenceAllocator::IGFenceAllocator()

void __thiscall IGFenceAllocator::IGFenceAllocator(IGFenceAllocator *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFenceAllocator;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGFenceAllocator::IGFenceAllocator()

void __thiscall IGFenceAllocator::IGFenceAllocator(IGFenceAllocator *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFenceAllocator;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFenceAllocator::withOptions(IntelAccelerator*)

long __cdecl IGFenceAllocator::withOptions(undefined8 param_1)

{
  char cVar1;
  long lVar2;
  
  lVar2 = (**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if ((lVar2 != 0) && (cVar1 = (**(code **)(__got::vtable + 0x98))(lVar2), cVar1 != '\0')) {
    *(undefined8 *)(lVar2 + 0x10) = param_1;
    *(undefined4 *)(lVar2 + 0x40) = 0xfffffff8;
    return lVar2;
  }
  return 0;
}



// IGFenceAllocator::initWithOptions(IntelAccelerator*)

void __thiscall IGFenceAllocator::initWithOptions(IGFenceAllocator *this,undefined8 param_1)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 != '\0') {
    *(undefined8 *)(this + 0x10) = param_1;
    *(undefined4 *)(this + 0x40) = 0xfffffff8;
  }
  return;
}



// IGFenceAllocator::free()

void IGFenceAllocator::free(void *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0001216a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))();
  return;
}



// IGFenceAllocator::allocate(IGAddressRange const&, unsigned long, GFX3DSTATE_TILEMODE)

IGFence * __thiscall
IGFenceAllocator::allocate(IGFenceAllocator *this,undefined8 *param_1,long param_2,int param_3)

{
  ulong uVar1;
  ulong uVar2;
  char cVar3;
  IGFence *this_00;
  
  uVar1 = *(ulong *)(this + 0x40);
  if (uVar1 != 0) {
    uVar2 = 0;
    if (uVar1 != 0) {
      for (; (uVar1 >> uVar2 & 1) == 0; uVar2 = uVar2 + 1) {
      }
    }
    *(ulong *)(this + 0x40) = uVar1 & ~(1L << (uVar2 & 0x3f));
    this_00 = (IGFence *)(**(code **)(IGFence::gMetaClass + 0x88))(&IGFence::gMetaClass);
    if (this_00 == (IGFence *)0x0) {
      return (IGFence *)0x0;
    }
    cVar3 = IGFence::initWithOptions(this_00,(long)this,uVar2,param_1,param_2,param_3);
    if (cVar3 != '\0') {
      return this_00;
    }
  }
  return (IGFence *)0x0;
}



// IGFence::MetaClass::~MetaClass()

void __thiscall IGFence::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGFenceAllocator::MetaClass::~MetaClass()

void __thiscall IGFenceAllocator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGFence_cpp(void)

{
  undefined *puVar1;
  
  puVar1 = __got::gMetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGFence::gMetaClass,"IGFence",(OSMetaClass *)__got::gMetaClass,0x40);
  IGFence::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGFenceAllocator::gMetaClass,"IGFenceAllocator",(OSMetaClass *)puVar1,
             0x80);
  IGFenceAllocator::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGFenceAllocator::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGFence::gMetaClass);
  return;
}



// IGMappedBuffer::MetaClass::MetaClass()

void __thiscall IGMappedBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGMappedBuffer",(OSMetaClass *)__got::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGMappedBuffer::MetaClass::~MetaClass()

void __thiscall IGMappedBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGMappedBuffer::IGMappedBuffer(OSMetaClass const*)

void __thiscall IGMappedBuffer::IGMappedBuffer(IGMappedBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGMappedBuffer;
  return;
}



// IGMappedBuffer::IGMappedBuffer(OSMetaClass const*)

void __thiscall IGMappedBuffer::IGMappedBuffer(IGMappedBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGMappedBuffer;
  return;
}



// IGMappedBuffer::~IGMappedBuffer()

void __thiscall IGMappedBuffer::~IGMappedBuffer(IGMappedBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGMappedBuffer::~IGMappedBuffer()

void __thiscall IGMappedBuffer::~IGMappedBuffer(IGMappedBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGMappedBuffer::~IGMappedBuffer()

void __thiscall IGMappedBuffer::~IGMappedBuffer(IGMappedBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGMappedBuffer_ktv,this,0x38);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGMappedBuffer::operator delete(void*, unsigned long)

void __cdecl IGMappedBuffer::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGMappedBuffer_ktv,param_1,param_2);
  return;
}



// IGMappedBuffer::getMetaClass() const

undefined8 * IGMappedBuffer::getMetaClass(void)

{
  return &gMetaClass;
}



// IGMappedBuffer::MetaClass::MetaClass()

void __thiscall IGMappedBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGMappedBuffer",(OSMetaClass *)__got::gMetaClass,0x38);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGMappedBuffer::MetaClass::alloc() const

OSObject * IGMappedBuffer::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGMappedBuffer_ktv,0x38);
  OSObject::OSObject(this,(OSMetaClass *)&IGMappedBuffer::gMetaClass);
  *(undefined ***)this = &__const::~IGMappedBuffer;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGMappedBuffer::operator new(unsigned long)

void * __thiscall IGMappedBuffer::operator_new(IGMappedBuffer *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGMappedBuffer_ktv,this);
  return pvVar1;
}



// IGMappedBuffer::IGMappedBuffer()

void __thiscall IGMappedBuffer::IGMappedBuffer(IGMappedBuffer *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGMappedBuffer;
  OSMetaClass::instanceConstructed();
  return;
}



// IGMappedBuffer::IGMappedBuffer()

void __thiscall IGMappedBuffer::IGMappedBuffer(IGMappedBuffer *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGMappedBuffer;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGMappedBuffer::withOptions(IGAccelTask*, unsigned long, bool, unsigned int)

IGMappedBuffer * __cdecl
IGMappedBuffer::withOptions(long param_1,ulonglong param_2,undefined1 param_3,undefined4 param_4)

{
  IGMappedBuffer *this;
  ulong uVar1;
  
  this = (IGMappedBuffer *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGMappedBuffer *)0x0) {
    uVar1 = initWithOptions(this,param_1,param_2,param_3,param_4);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGMappedBuffer *)0x0;
}



// IGMappedBuffer::initWithOptions(IGAccelTask*, unsigned long, bool, unsigned int)

ulong __thiscall
IGMappedBuffer::initWithOptions
          (IGMappedBuffer *this,long param_1,ulonglong param_2,IGMappedBuffer param_3,
          undefined4 param_4)

{
  IOGraphicsAccelerator2 *pIVar1;
  task *ptVar2;
  char cVar3;
  uint uVar4;
  undefined4 uVar5;
  long *plVar6;
  long *plVar7;
  ulong uVar8;
  
  cVar3 = (**(code **)(__got::vtable + 0x98))();
  if (cVar3 != '\0') {
    pIVar1 = *(IOGraphicsAccelerator2 **)(param_1 + 0x10);
    ptVar2 = *(task **)__got::_kernel_task;
    uVar4 = (**(code **)(*(long *)this + 0x118))(this);
    uVar8 = 0;
    plVar6 = (long *)IOAccelSysMemory::withOptions
                               (pIVar1,ptVar2,(IOAccelShared2 *)0x0,(IOAccelResource2 *)0x0,uVar4,
                                param_2);
    if (plVar6 == (long *)0x0) goto LAB_000125d3;
    uVar5 = (**(code **)(*(long *)this + 0x120))(this);
    plVar7 = (long *)(**(code **)(*plVar6 + 0x138))(plVar6,param_1,uVar5);
    (**(code **)(*plVar6 + 0x28))(plVar6);
    if (plVar7 != (long *)0x0) {
      cVar3 = (**(code **)(*plVar7 + 0x138))(plVar7);
      if (cVar3 == '\0') {
        cVar3 = IOGraphicsAccelerator2::freeToPrepareMapping((IOAccelMemoryMap *)pIVar1);
        if (cVar3 == '\0') {
          (**(code **)(*plVar7 + 0x28))(plVar7);
          goto LAB_000125d0;
        }
      }
      *(long **)(this + 0x30) = plVar7;
      *(IOGraphicsAccelerator2 **)(this + 0x10) = pIVar1;
      *(long *)(this + 0x18) = param_1;
      *(ulonglong *)(this + 0x20) = param_2;
      this[0x28] = param_3;
      *(undefined4 *)(this + 0x2c) = param_4;
      fillIfRequested(this);
      uVar8 = CONCAT71((int7)((ulong)plVar7 >> 8),1);
      goto LAB_000125d3;
    }
  }
LAB_000125d0:
  uVar8 = 0;
LAB_000125d3:
  return uVar8 & 0xffffffff;
}



// IGMappedBuffer::cloneInTask(IGAccelTask*)

IGMappedBuffer * __thiscall IGMappedBuffer::cloneInTask(IGMappedBuffer *this,undefined8 param_1)

{
  IGMappedBuffer *this_00;
  ulong uVar1;
  
  this_00 = (IGMappedBuffer *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this_00 != (IGMappedBuffer *)0x0) {
    uVar1 = initWithOptions(this_00,(long *)this,param_1);
    if ((char)uVar1 != '\0') {
      return this_00;
    }
    (**(code **)(*(long *)this_00 + 0x28))(this_00);
  }
  return (IGMappedBuffer *)0x0;
}



// IGMappedBuffer::initWithOptions(IGMappedBuffer*, IGAccelTask*)

ulong __thiscall
IGMappedBuffer::initWithOptions(IGMappedBuffer *this,long *param_1,undefined8 param_2)

{
  long *plVar1;
  char cVar2;
  undefined4 uVar3;
  long *plVar4;
  ulong uVar5;
  
  cVar2 = (**(code **)(__got::vtable + 0x98))();
  if (cVar2 == '\0') {
LAB_000126e8:
    uVar5 = 0;
  }
  else {
    plVar1 = *(long **)(param_1[6] + 0x18);
    uVar3 = (**(code **)(*param_1 + 0x120))(param_1);
    plVar4 = (long *)(**(code **)(*plVar1 + 0x138))(plVar1,param_2,uVar3);
    *(long **)(this + 0x30) = plVar4;
    uVar5 = CONCAT71((int7)((ulong)plVar1 >> 8),1);
    if (plVar4 == (long *)0x0) goto LAB_000126eb;
    cVar2 = (**(code **)(*plVar4 + 0x138))(plVar4);
    if (cVar2 == '\0') {
      cVar2 = IOGraphicsAccelerator2::freeToPrepareMapping((IOAccelMemoryMap *)param_1[2]);
      if (cVar2 == '\0') {
        (**(code **)(**(long **)(this + 0x30) + 0x28))();
        goto LAB_000126e8;
      }
    }
    *(long *)(this + 0x10) = param_1[2];
    *(undefined8 *)(this + 0x18) = param_2;
    *(long *)(this + 0x20) = param_1[4];
    this[0x28] = *(IGMappedBuffer *)(param_1 + 5);
    *(undefined4 *)(this + 0x2c) = *(undefined4 *)((long)param_1 + 0x2c);
  }
LAB_000126eb:
  return uVar5 & 0xffffffff;
}



// IGMappedBuffer::fillIfRequested()

void __thiscall IGMappedBuffer::fillIfRequested(IGMappedBuffer *this)

{
  task *ptVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  
  if (this[0x28] != (IGMappedBuffer)0x0) {
    ptVar1 = *(task **)(*(long *)(this + 0x30) + 0x18);
    lVar3 = IOAccelSysMemory::lockForCPUAccess(ptVar1,(uint)*(undefined8 *)__got::_kernel_task);
    if (lVar3 != 0) {
      uVar2 = *(ulong *)(this + 0x20);
      if (uVar2 != 0) {
        uVar4 = 0;
        do {
          *(undefined4 *)(lVar3 + uVar4) = *(undefined4 *)(this + 0x2c);
          uVar4 = uVar4 + 4;
        } while (uVar4 < uVar2);
      }
      IOAccelSysMemory::unlockForCPUAccess(ptVar1);
      return;
    }
  }
  return;
}



// IGMappedBuffer::free()

void __thiscall IGMappedBuffer::free(IGMappedBuffer *this,void *param_1)

{
  if (*(long *)(this + 0x30) != 0) {
    IOAccelMemoryMap::finishEvent();
    (**(code **)(**(long **)(this + 0x30) + 0x140))();
    if (*(long **)(this + 0x30) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x30) + 0x28))();
    }
  }
  *(undefined8 *)(this + 0x30) = 0;
                    // WARNING: Could not recover jumptable at 0x000127b5. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGMappedBuffer::getMemoryOptions() const

undefined8 IGMappedBuffer::getMemoryOptions(void)

{
  return 0x23;
}



// IGMappedBuffer::getMappingOptions() const

undefined8 IGMappedBuffer::getMappingOptions(void)

{
  return 7;
}



// IGMappedBuffer::getGPUVirtualAddress() const

void __thiscall IGMappedBuffer::getGPUVirtualAddress(IGMappedBuffer *this)

{
                    // WARNING: Could not recover jumptable at 0x000127e0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0x30) + 0x128))();
  return;
}



// IGMappedBuffer::getMemory() const

undefined8 __thiscall IGMappedBuffer::getMemory(IGMappedBuffer *this)

{
  return *(undefined8 *)(*(long *)(this + 0x30) + 0x18);
}



// IGMappedBuffer::getMemoryDescriptor() const

undefined8 __thiscall IGMappedBuffer::getMemoryDescriptor(IGMappedBuffer *this)

{
  return *(undefined8 *)(*(long *)(*(long *)(this + 0x30) + 0x18) + 0xd0);
}



// IGMappedBuffer::getAccessEvent() const

long __thiscall IGMappedBuffer::getAccessEvent(IGMappedBuffer *this)

{
  return *(long *)(this + 0x30) + 0x38;
}



// IGMappedBuffer::testEvent()

void IGMappedBuffer::testEvent(void)

{
  IOAccelMemoryMap::testEvent();
  return;
}



// IGMappedBuffer::MetaClass::~MetaClass()

void __thiscall IGMappedBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGMappedBuffer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGMappedBuffer::gMetaClass,"IGMappedBuffer",
             (OSMetaClass *)__got::gMetaClass,0x38);
  IGMappedBuffer::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGMappedBuffer::gMetaClass);
  return;
}



// IGHardwarePageTable::MetaClass::MetaClass()

void __thiscall IGHardwarePageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePageTable",(OSMetaClass *)__got::gMetaClass,0x20);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePageTable::MetaClass::~MetaClass()

void __thiscall IGHardwarePageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwarePageTable::IGHardwarePageTable(OSMetaClass const*)

void __thiscall
IGHardwarePageTable::IGHardwarePageTable(IGHardwarePageTable *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwarePageTable;
  return;
}



// IGHardwarePageTable::~IGHardwarePageTable()

void __thiscall IGHardwarePageTable::~IGHardwarePageTable(IGHardwarePageTable *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwarePageTable::~IGHardwarePageTable()

void __thiscall IGHardwarePageTable::~IGHardwarePageTable(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGHardwarePageTable::~IGHardwarePageTable()

void __thiscall IGHardwarePageTable::~IGHardwarePageTable(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGHardwarePageTable::getMetaClass() const

undefined1 * IGHardwarePageTable::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwarePageTable::MetaClass::MetaClass()

void __thiscall IGHardwarePageTable::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwarePageTable",(OSMetaClass *)__got::gMetaClass,0x20);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwarePageTable::MetaClass::alloc() const

undefined8 IGHardwarePageTable::MetaClass::alloc(void)

{
  return 0;
}



// IGHardwarePageTable::operator new(unsigned long)

void * __thiscall IGHardwarePageTable::operator_new(IGHardwarePageTable *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwarePageTable_ktv,this);
  return pvVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwarePageTable::operator delete(void*, unsigned long)

void __cdecl IGHardwarePageTable::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwarePageTable_ktv,param_1,param_2);
  return;
}



// IGHardwarePageTable::initWithOptions(IntelAccelerator*, IGHardwarePageTable::Type)

void __thiscall
IGHardwarePageTable::initWithOptions
          (IGHardwarePageTable *this,undefined8 param_1,undefined4 param_2)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 != '\0') {
    *(undefined8 *)(this + 0x10) = param_1;
    *(undefined4 *)(this + 0x18) = param_2;
  }
  return;
}



// IGHardwarePageTable::free()

void IGHardwarePageTable::free(void *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0001299c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))();
  return;
}



// IGHardwarePageTable::attributeBits(IGAccelMemoryMap const*)

uint __thiscall IGHardwarePageTable::attributeBits(IGHardwarePageTable *this,long param_1)

{
  uint uVar1;
  
  uVar1 = (**(code **)(**(long **)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x128))
                    (*(long **)(&DAT_00001290 + *(long *)(this + 0x10)),
                     *(undefined4 *)(param_1 + 0x114));
  return *(uint *)(param_1 + 0x10) >> 8 & 2 | (uVar1 & 4) * 0x20 + (uVar1 & 3) * 8;
}



// IGHardwarePageTable::commitRange(IGAddressRange const&, IGAccelMemoryMap const*)

undefined4 __thiscall
IGHardwarePageTable::commitRange(IGHardwarePageTable *this,long *param_1,long param_2)

{
  ulong uVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  long lVar5;
  long *plVar6;
  long *plVar7;
  long *plVar8;
  long *local_b8;
  ulong local_b0;
  long *local_a8;
  ulong local_a0;
  ulong local_98;
  long *local_90;
  undefined8 local_88;
  ulong local_80;
  long *local_78;
  ulong local_70;
  long *local_68;
  long *local_60;
  ulong local_58;
  long *local_50;
  undefined8 local_48;
  ulong local_40;
  undefined4 local_34;
  
  if (*(long *)(param_2 + 0x18) == 0) {
    plVar6 = (long *)0x0;
  }
  else {
    plVar6 = *(long **)(*(long *)(param_2 + 0x18) + 0xd0);
  }
  uVar3 = (**(code **)(**(long **)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x128))
                    (*(long **)(&DAT_00001290 + *(long *)(this + 0x10)),
                     *(undefined4 *)(param_2 + 0x114));
  uVar3 = *(uint *)(param_2 + 0x10) >> 8 & 2 | (uVar3 & 4) * 0x20 + (uVar3 & 3) * 8;
  plVar8 = (long *)*param_1;
  local_68 = plVar6;
  if (*(char *)(param_2 + 0x11c) == '\0') {
    local_34 = *(undefined4 *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x88);
    local_78 = param_1;
    lVar5 = (**(code **)(*plVar6 + 0x1c8))(plVar6);
    local_70 = lVar5 + 0xfff;
    (**(code **)(*plVar6 + 0x20))(plVar6);
    lVar5 = (**(code **)(*plVar6 + 0x1c8))(plVar6);
    uVar4 = local_34;
    local_60 = (long *)(lVar5 + 0xfffU & 0xfffffffffffff000);
    local_58 = CONCAT44(local_58._4_4_,local_34);
    local_50 = (long *)0x0;
    (**(code **)(*plVar6 + 0x20))(plVar6);
    local_48 = (**(code **)(*plVar6 + 0x138))(plVar6,0,&local_40,uVar4);
    local_40 = local_40 + 0xfff & 0xfffffffffffff000;
    local_a8 = plVar6;
    lVar5 = (**(code **)(*plVar6 + 0x1c8))(plVar6);
    uVar1 = local_70;
    local_a0 = lVar5 + 0xfffU & 0xfffffffffffff000;
    local_98 = CONCAT44(local_98._4_4_,uVar4);
    local_90 = (long *)(local_70 & 0xfffffffffffff000);
    (**(code **)(*plVar6 + 0x20))(plVar6);
    if ((uVar1 & 0xfffffffffffff000) == 0) {
      local_88 = (**(code **)(*plVar6 + 0x138))(plVar6,0,&local_80,local_34);
      local_80 = local_80 + 0xfff & 0xfffffffffffff000;
    }
    else {
      local_80 = 0;
      local_88 = 0;
    }
    plVar7 = local_50;
    while( true ) {
      local_50 = plVar7;
      if ((local_68 == local_a8) && (local_50 == local_90)) {
        uVar4 = (undefined4)CONCAT71((int7)((ulong)&local_b8 >> 8),1);
        plVar7 = local_68;
        goto LAB_00012d49;
      }
      local_b0 = local_40;
      local_b8 = plVar8;
      cVar2 = (**(code **)(*(long *)this + 0x118))(this,&local_b8,local_48,uVar3);
      if (cVar2 == '\0') break;
      plVar8 = (long *)((long)plVar8 + local_40);
      local_50 = (long *)(local_40 + (long)local_50);
      plVar7 = local_60;
      if (local_50 < local_60) {
        local_48 = (**(code **)(*local_68 + 0x138))
                             (local_68,local_50,&local_40,local_58 & 0xffffffff);
        local_40 = local_40 + 0xfff & 0xfffffffffffff000;
        plVar7 = local_50;
      }
    }
    uVar4 = 0;
    plVar7 = local_a8;
LAB_00012d49:
    if (plVar7 != (long *)0x0) {
      (**(code **)(*plVar7 + 0x28))();
    }
    if (local_68 != (long *)0x0) {
      (**(code **)(*local_68 + 0x28))();
    }
    (**(code **)(*plVar6 + 0x28))(plVar6);
    plVar6 = (long *)(*local_78 + local_78[1] + -1);
    lVar5 = (long)plVar6 - (long)plVar8;
    if (plVar8 <= plVar6 && lVar5 != 0) {
      local_60 = (long *)(lVar5 + 1);
      local_68 = plVar8;
      (**(code **)(*(long *)this + 0x138))(this,&local_68,uVar3);
    }
  }
  else {
    local_a0 = (ulong)*(uint *)(param_2 + 0x120) << 0x20;
    local_98 = (ulong)*(uint *)(param_2 + 0x124);
    plVar7 = (long *)((ulong)(*(uint *)(param_2 + 0x124) - 1) * *(long *)__got::_page_size +
                     (long)plVar8);
    local_90 = (long *)((long)plVar8 + param_1[1]);
    if (plVar7 < (long *)((long)plVar8 + param_1[1])) {
      local_90 = plVar7;
    }
    local_58 = 0;
    uVar4 = *(undefined4 *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x88);
    local_a8 = param_1;
    lVar5 = (**(code **)(*plVar6 + 0x1c8))(plVar6);
    local_60 = (long *)(lVar5 + 0xfffU & 0xfffffffffffff000);
    local_58 = CONCAT44(local_58._4_4_,uVar4);
    local_50 = (long *)0x0;
    local_48 = 0;
    local_40 = 0;
    (**(code **)(*plVar6 + 0x20))(plVar6);
    uVar4 = (**(code **)(*(long *)this + 0x120))(this,&local_a8,&local_68,uVar3);
    if (local_68 != (long *)0x0) {
      (**(code **)(*local_68 + 0x28))();
    }
  }
  IntelAccelerator::flushHardwareAfterGttUpdate(*(IntelAccelerator **)(this + 0x10));
  return uVar4;
}



// IGHardwarePageTable::releaseRange(IGAddressRange const&)

undefined8 __thiscall
IGHardwarePageTable::releaseRange(IGHardwarePageTable *this,uintptr_t *param_1)

{
  undefined *puVar1;
  undefined *extraout_RAX;
  
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a000b9,param_1[1],*param_1,(param_1[1] + *param_1) - 1,
                    (ulong)*(uint *)(this + 0x18),0);
    }
  }
  (**(code **)(*(long *)this + 0x130))(this,param_1);
  puVar1 = (undefined *)
           IntelAccelerator::flushHardwareAfterGttUpdate(*(IntelAccelerator **)(this + 0x10));
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    puVar1 = __got::_kdebug_enable;
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a000ba,param_1[1],*param_1,(param_1[1] + *param_1) - 1,
                    (ulong)*(uint *)(this + 0x18),0);
      puVar1 = extraout_RAX;
    }
  }
  return CONCAT71((int7)((ulong)puVar1 >> 8),1);
}



// IGHardwarePageTable::updateRange(IGAddressRange const&, IGAccelMemoryMap const*)

ulong __thiscall
IGHardwarePageTable::updateRange(IGHardwarePageTable *this,uintptr_t *param_1,long param_2)

{
  uintptr_t arg1;
  uintptr_t *puVar1;
  undefined4 uVar2;
  char cVar3;
  uint uVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  ulong uVar8;
  uintptr_t uVar9;
  ulong uVar10;
  ulong local_a0;
  uintptr_t local_98;
  ulong local_90;
  uintptr_t *local_88;
  ulong local_80;
  long *local_78;
  ulong local_70;
  undefined4 local_68;
  ulong local_60;
  undefined8 local_58;
  ulong local_50;
  long *local_48;
  ulong local_40;
  undefined4 local_34;
  
  if (*(long *)(param_2 + 0x18) == 0) {
    local_48 = (long *)0x0;
  }
  else {
    local_48 = *(long **)(*(long *)(param_2 + 0x18) + 0xd0);
  }
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a000bd,param_1[1],*param_1,(param_1[1] + *param_1) - 1,
                  (ulong)*(uint *)(this + 0x18),0);
  }
  uVar4 = (**(code **)(**(long **)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x128))
                    (*(long **)(&DAT_00001290 + *(long *)(this + 0x10)),
                     *(undefined4 *)(param_2 + 0x114));
  plVar7 = local_48;
  local_40 = (ulong)(*(uint *)(param_2 + 0x10) >> 8 & 2);
  uVar9 = *param_1;
  local_34 = *(undefined4 *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x10)) + 0x88);
  local_88 = param_1;
  lVar5 = (**(code **)(*local_48 + 0x1c8))(local_48);
  local_80 = lVar5 + 0xfff;
  (**(code **)(*plVar7 + 0x20))(plVar7);
  local_78 = plVar7;
  lVar5 = (**(code **)(*plVar7 + 0x1c8))(plVar7);
  uVar2 = local_34;
  local_70 = lVar5 + 0xfffU & 0xfffffffffffff000;
  local_68 = local_34;
  local_60 = 0;
  (**(code **)(*plVar7 + 0x20))(plVar7);
  local_58 = (**(code **)(*plVar7 + 0x138))(plVar7,0,&local_50,uVar2);
  local_50 = local_50 + 0xfff & 0xfffffffffffff000;
  (**(code **)(*plVar7 + 0x1c8))(plVar7);
  uVar10 = local_80;
  uVar6 = local_80 & 0xfffffffffffff000;
  (**(code **)(*plVar7 + 0x20))(plVar7);
  if ((uVar10 & 0xfffffffffffff000) == 0) {
    (**(code **)(*plVar7 + 0x138))(plVar7,0,&local_a0,local_34);
    local_a0 = local_a0 + 0xfff & 0xfffffffffffff000;
  }
  else {
    local_a0 = 0;
  }
  uVar8 = (ulong)(uVar4 & 4) * 0x20 + (ulong)(uVar4 & 3) * 8 | local_40;
  uVar10 = local_60;
  while ((local_60 = uVar10, local_78 != plVar7 || (local_60 != uVar6))) {
    local_90 = local_50;
    local_98 = uVar9;
    cVar3 = (**(code **)(*(long *)this + 0x128))(this,&local_98,local_58,uVar8);
    if (cVar3 == '\0') {
      uVar10 = 0;
LAB_00013171:
      puVar1 = local_88;
      if (plVar7 != (long *)0x0) {
        (**(code **)(*plVar7 + 0x28))();
      }
      if (local_78 != (long *)0x0) {
        (**(code **)(*local_78 + 0x28))();
      }
      (**(code **)(*local_48 + 0x28))();
      IntelAccelerator::flushHardwareAfterGttUpdate(*(IntelAccelerator **)(this + 0x10));
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        uVar9 = *puVar1;
        arg1 = puVar1[1];
        _kernel_debug(0x85a000be,arg1,uVar9,(arg1 + uVar9) - 1,(ulong)*(uint *)(this + 0x18),0);
      }
      return uVar10 & 0xffffffff;
    }
    uVar9 = uVar9 + local_50;
    local_60 = local_50 + local_60;
    uVar10 = local_70;
    if (local_60 < local_70) {
      local_58 = (**(code **)(*local_78 + 0x138))(local_78,local_60,&local_50,local_68);
      local_50 = local_50 + 0xfff & 0xfffffffffffff000;
      uVar10 = local_60;
    }
  }
  uVar10 = CONCAT71((int7)((ulong)&local_98 >> 8),1);
  plVar7 = local_78;
  goto LAB_00013171;
}



// IGHardwarePageTable::MetaClass::~MetaClass()

void __thiscall IGHardwarePageTable::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwarePageTable_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwarePageTable::gMetaClass,"IGHardwarePageTable",
             (OSMetaClass *)__got::gMetaClass,0x20);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwarePageTable::gMetaClass);
  return;
}



// IGAccelEventMachine::MetaClass::MetaClass()

void __thiscall IGAccelEventMachine::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelEventMachine",(OSMetaClass *)__got::gMetaClass,0xdc0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelEventMachine::MetaClass::~MetaClass()

void __thiscall IGAccelEventMachine::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelEventMachine::IGAccelEventMachine(OSMetaClass const*)

void __thiscall
IGAccelEventMachine::IGAccelEventMachine(IGAccelEventMachine *this,OSMetaClass *param_1)

{
  IOAccelEventMachineFast2::IOAccelEventMachineFast2((IOAccelEventMachineFast2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  *(undefined8 *)(this + 0xd40) = 0;
  return;
}



// IGAccelEventMachine::IGAccelEventMachine(OSMetaClass const*)

void __thiscall
IGAccelEventMachine::IGAccelEventMachine(IGAccelEventMachine *this,OSMetaClass *param_1)

{
  IOAccelEventMachineFast2::IOAccelEventMachineFast2((IOAccelEventMachineFast2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  *(undefined8 *)(this + 0xd40) = 0;
  return;
}



// IGAccelEventMachine::~IGAccelEventMachine()

void __thiscall IGAccelEventMachine::~IGAccelEventMachine(IGAccelEventMachine *this)

{
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  IOAccelEventMachineFast2::~IOAccelEventMachineFast2((IOAccelEventMachineFast2 *)this);
  return;
}



// IGAccelEventMachine::~IGAccelEventMachine()

void __thiscall IGAccelEventMachine::~IGAccelEventMachine(IGAccelEventMachine *this)

{
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  IOAccelEventMachineFast2::~IOAccelEventMachineFast2((IOAccelEventMachineFast2 *)this);
  return;
}



// IGAccelEventMachine::~IGAccelEventMachine()

void __thiscall IGAccelEventMachine::~IGAccelEventMachine(IGAccelEventMachine *this)

{
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  IOAccelEventMachineFast2::~IOAccelEventMachineFast2((IOAccelEventMachineFast2 *)this);
  _OSObject_typed_operator_delete(&IGAccelEventMachine_ktv,this,0xdc0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelEventMachine::operator delete(void*, unsigned long)

void __cdecl IGAccelEventMachine::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelEventMachine_ktv,param_1,param_2);
  return;
}



// IGAccelEventMachine::getMetaClass() const

undefined8 * IGAccelEventMachine::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelEventMachine::MetaClass::MetaClass()

void __thiscall IGAccelEventMachine::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelEventMachine",(OSMetaClass *)__got::gMetaClass,0xdc0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelEventMachine::MetaClass::alloc() const

IOAccelEventMachineFast2 * IGAccelEventMachine::MetaClass::alloc(void)

{
  IOAccelEventMachineFast2 *this;
  
  this = (IOAccelEventMachineFast2 *)_OSObject_typed_operator_new(&IGAccelEventMachine_ktv,0xdc0);
  IOAccelEventMachineFast2::IOAccelEventMachineFast2
            (this,(OSMetaClass *)&IGAccelEventMachine::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  *(undefined8 *)(this + 0xd40) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelEventMachine::operator new(unsigned long)

void * __thiscall IGAccelEventMachine::operator_new(IGAccelEventMachine *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelEventMachine_ktv,this);
  return pvVar1;
}



// IGAccelEventMachine::IGAccelEventMachine()

void __thiscall IGAccelEventMachine::IGAccelEventMachine(IGAccelEventMachine *this)

{
  IOAccelEventMachineFast2::IOAccelEventMachineFast2
            ((IOAccelEventMachineFast2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  *(undefined8 *)(this + 0xd40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelEventMachine::IGAccelEventMachine()

void __thiscall IGAccelEventMachine::IGAccelEventMachine(IGAccelEventMachine *this)

{
  IOAccelEventMachineFast2::IOAccelEventMachineFast2
            ((IOAccelEventMachineFast2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelEventMachine;
  *(undefined8 *)(this + 0xd40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelEventMachine::init(IOGraphicsAccelerator2*, unsigned int, int)

bool __cdecl IGAccelEventMachine::init(OSObject *param_1)

{
  char cVar1;
  long lVar2;
  bool bVar3;
  
  bVar3 = false;
  *(undefined8 *)(param_1 + 0xd80) = 0;
  param_1[0xd88] = (OSObject)0x0;
  *(undefined8 *)(param_1 + 0xd90) = 0;
  *(undefined8 *)(param_1 + 0xd40) = 0;
  cVar1 = (**(code **)(__got::vtable + 0x128))();
  if (cVar1 != '\0') {
    lVar2 = IOInterruptEventSource::interruptEventSource
                      (param_1,handleSchedulerStampInterrupt,(IOService *)0x0,0);
    *(long *)(param_1 + 0xd30) = lVar2;
    bVar3 = lVar2 != 0;
  }
  return bVar3;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelEventMachine::handleSchedulerStampInterrupt(IOInterruptEventSource*, int)

void __cdecl IGAccelEventMachine::handleSchedulerStampInterrupt(long param_1)

{
  IntelAccelerator::signalStampUpdate
            (*(IntelAccelerator **)(param_1 + 0x10),(ulong *)(param_1 + 0xd40));
  return;
}



// IGAccelEventMachine::free()

void __thiscall IGAccelEventMachine::free(IGAccelEventMachine *this,void *param_1)

{
  long *plVar1;
  
  if (this[0xd88] != (IGAccelEventMachine)0x0) {
    plVar1 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar1 + 0x148))(plVar1,*(undefined8 *)(this + 0xd30));
  }
  if (*(long **)(this + 0xd30) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xd30) + 0x28))();
  }
  *(undefined8 *)(this + 0xd30) = 0;
                    // WARNING: Could not recover jumptable at 0x00013553. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelEventMachine::enableSchedulerEvents()

void __thiscall IGAccelEventMachine::enableSchedulerEvents(IGAccelEventMachine *this)

{
  long *plVar1;
  
  if (this[0xd88] == (IGAccelEventMachine)0x0) {
    plVar1 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar1 + 0x140))(plVar1,*(undefined8 *)(this + 0xd30));
    this[0xd88] = (IGAccelEventMachine)0x1;
  }
  return;
}



// IGAccelEventMachine::getStampOffset(int)

int __thiscall IGAccelEventMachine::getStampOffset(IGAccelEventMachine *this,int param_1)

{
  return param_1 << 6;
}



// IGAccelEventMachine::finishAllStamps(unsigned int)

int __thiscall IGAccelEventMachine::finishAllStamps(IGAccelEventMachine *this,uint param_1)

{
  long lVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  
  iVar2 = (**(code **)(__got::vtable + 0x168))();
  lVar1 = *(long *)(this + 0x10);
  IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar1 + 0x388) + 0x58),(ulong)param_1);
  if (param_1 < 0x66) {
    piVar4 = (int *)(lVar1 + (ulong)param_1 * 4 + 0x1a0);
    iVar3 = iVar2;
  }
  else {
    if (param_1 != 0x68) {
      return iVar2;
    }
    piVar4 = (int *)(lVar1 + 0x9dc);
    iVar3 = 1;
  }
  *piVar4 = *piVar4 + iVar3;
  return iVar2;
}



// IGAccelEventMachine::finishStamp(int, unsigned int)

int __thiscall
IGAccelEventMachine::finishStamp(IGAccelEventMachine *this,undefined8 param_2_00,uint param_2)

{
  long lVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  
  iVar2 = (**(code **)(__got::vtable + 0x160))();
  lVar1 = *(long *)(this + 0x10);
  IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar1 + 0x388) + 0x58),(ulong)param_2);
  if (param_2 < 0x66) {
    piVar4 = (int *)(lVar1 + (ulong)param_2 * 4 + 0x1a0);
    iVar3 = iVar2;
  }
  else {
    if (param_2 != 0x68) {
      return iVar2;
    }
    piVar4 = (int *)(lVar1 + 0x9dc);
    iVar3 = 1;
  }
  *piVar4 = *piVar4 + iVar3;
  return iVar2;
}



// IGAccelEventMachine::finishEvent(IOAccelEvent*, unsigned int)

int __thiscall
IGAccelEventMachine::finishEvent(IGAccelEventMachine *this,undefined8 param_2_00,uint param_2)

{
  long lVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  
  iVar2 = (**(code **)(__got::vtable + 0x198))();
  lVar1 = *(long *)(this + 0x10);
  IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar1 + 0x388) + 0x58),(ulong)param_2);
  if (param_2 < 0x66) {
    piVar4 = (int *)(lVar1 + (ulong)param_2 * 4 + 0x1a0);
    iVar3 = iVar2;
  }
  else {
    if (param_2 != 0x68) {
      return iVar2;
    }
    piVar4 = (int *)(lVar1 + 0x9dc);
    iVar3 = 1;
  }
  *piVar4 = *piVar4 + iVar3;
  return iVar2;
}



// IGAccelEventMachine::writeStamp(int, vendevtCommandRec*, unsigned int)

void __thiscall
IGAccelEventMachine::writeStamp
          (IGAccelEventMachine *this,undefined8 param_2_00,undefined4 *param_2,undefined4 param_3)

{
  undefined4 uVar1;
  
  uVar1 = (**(code **)(*(long *)this + 0x138))();
  *param_2 = uVar1;
  param_2[1] = param_3;
  return;
}



// IGAccelEventMachine::eventTimeout(int)

undefined8 __thiscall IGAccelEventMachine::eventTimeout(IGAccelEventMachine *this,uint param_1)

{
  byte bVar1;
  long lVar2;
  IGScheduler *pIVar3;
  char cVar4;
  int iVar5;
  undefined **ppuVar6;
  ulong uVar7;
  IntelAccelerator *pIVar8;
  uint uVar9;
  long local_48;
  long local_40;
  ulong local_38;
  
  lVar2 = *(long *)(this + 0x10);
  if (((int)param_1 < *(int *)(&DAT_000011d0 + lVar2)) ||
     (*(int *)(&DAT_000011d4 + lVar2) < (int)param_1)) {
    if ((*(ulong *)(&DAT_000011c0 + lVar2) & 0x20) == 0) {
      ppuVar6 = &IG_STAMP_INDEX_TO_HWCS_LUT;
      if ((*(ulong *)(&DAT_000011c0 + lVar2) & 0x18000) != 0) {
        ppuVar6 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
      }
      bVar1 = *(byte *)((long)ppuVar6 + (ulong)param_1);
      cVar4 = (**(code **)(**(long **)(&DAT_00001280 + lVar2) + 0x150))
                        (*(long **)(&DAT_00001280 + lVar2),bVar1);
      uVar9 = (uint)bVar1;
      if (cVar4 == '\0') {
        local_40 = 0;
        local_48 = 0;
        local_38 = 0;
        pIVar3 = *(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10));
        (**(code **)(*(long *)pIVar3 + 0x178))(pIVar3);
        IGScheduler::haltCommandStreamer(pIVar3,(uint)bVar1);
        (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x198))
                  (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),(uint)bVar1,&local_40,
                   &local_38,&local_48);
        if (local_48 != 0 || local_40 != 0) {
          if (*(uint *)(*(long *)(local_40 + 0xb0) + 0x20) == param_1) {
            pIVar8 = *(IntelAccelerator **)(this + 0x10);
            if (local_38 != 0) {
              uVar7 = 500000000000;
              if (((byte)pIVar8[0x11c0] & 0x20) == 0) {
                uVar7 = 5000000000;
              }
              if (local_38 < uVar7) {
                pIVar3 = *(IGScheduler **)(pIVar8 + 0x1280);
                IGScheduler::resumeCommandStreamer(pIVar3,uVar9);
                (**(code **)(*(long *)pIVar3 + 0x180))(pIVar3);
                pIVar8 = *(IntelAccelerator **)(this + 0x10);
                uVar9 = 10;
                goto LAB_000138b3;
              }
            }
          }
          else {
            pIVar8 = *(IntelAccelerator **)(this + 0x10);
            uVar7 = 500000000000;
            if (((byte)pIVar8[0x11c0] & 0x20) == 0) {
              uVar7 = 5000000000;
            }
            if (local_38 < uVar7) {
              pIVar3 = *(IGScheduler **)(pIVar8 + 0x1280);
              IGScheduler::resumeCommandStreamer(pIVar3,(uint)bVar1);
              (**(code **)(*(long *)pIVar3 + 0x180))(pIVar3);
              pIVar8 = *(IntelAccelerator **)(this + 0x10);
              uVar9 = 5;
              goto LAB_000138b3;
            }
          }
          IntelAccelerator::encodeDebugInfo(pIVar8,6);
          (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x188))
                    (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),uVar9);
          return *(undefined8 *)(local_40 + 0xb0);
        }
        pIVar3 = *(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10));
        IGScheduler::resumeCommandStreamer(pIVar3,uVar9);
        (**(code **)(*(long *)pIVar3 + 0x180))(pIVar3);
        pIVar8 = *(IntelAccelerator **)(this + 0x10);
        uVar9 = 4;
      }
      else {
        pIVar8 = *(IntelAccelerator **)(this + 0x10);
        uVar9 = 3;
      }
LAB_000138b3:
      IntelAccelerator::encodeDebugInfo(pIVar8,uVar9);
      return 0;
    }
    _kprintf("[IG3D] Received eventTimout from IOAF on index %u but ignoring because we\'re running in simulation\n"
             ,param_1);
    pIVar8 = *(IntelAccelerator **)(this + 0x10);
    uVar9 = 2;
  }
  else {
    _IOLog("[IGPU] display event timeout on index = %u\n",param_1);
    _kprintf("[IGPU] display event timeout on index = %u\n",param_1);
    pIVar8 = *(IntelAccelerator **)(this + 0x10);
    iVar5 = (**(code **)(*(long *)this + 0x208))(this,param_1);
    IntelAccelerator::signalDisplayStampUpdate(pIVar8,param_1,iVar5);
    pIVar8 = *(IntelAccelerator **)(this + 0x10);
    uVar9 = 1;
  }
  IntelAccelerator::encodeDebugInfo(pIVar8,uVar9);
  return 0;
}



// IGAccelEventMachine::prepareBarrier(vendevtBarrierRec*)

void IGAccelEventMachine::prepareBarrier(void)

{
  return;
}



// IGAccelEventMachine::writeBarrierElement(vendevtBarrierRec*, int, unsigned int)

void __thiscall
IGAccelEventMachine::writeBarrierElement
          (IGAccelEventMachine *this,long param_1,undefined8 param_2,undefined4 param_3)

{
                    // WARNING: Could not recover jumptable at 0x000139e2. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(param_1 + 0x130) + 0x120))(*(long **)(param_1 + 0x130),param_3);
  return;
}



// IGAccelEventMachine::completeBarrier(vendevtBarrierRec*)

undefined1 IGAccelEventMachine::completeBarrier(void)

{
  return 1;
}



// IGAccelEventMachine::enableStampInterrupt(int)

void __thiscall IGAccelEventMachine::enableStampInterrupt(IGAccelEventMachine *this,int param_1)

{
  enableStampInterrupt(this,param_1,0);
  return;
}



// IGAccelEventMachine::enableStampInterrupt(int, int)

void __thiscall
IGAccelEventMachine::enableStampInterrupt(IGAccelEventMachine *this,int param_1,int param_2)

{
  long lVar1;
  
  if (param_2 == 0) {
    *(long *)(this + 0xd90) = *(long *)(this + 0xd90) + 1;
  }
  lVar1 = *(long *)(this + 0x10);
  if ((param_1 < *(int *)(&DAT_000011d0 + lVar1)) || (*(int *)(&DAT_000011d4 + lVar1) < param_1)) {
    if (*(char *)(*(long *)(&DAT_00001278 + lVar1) + 0x7cc) != '\0') {
                    // WARNING: Could not recover jumptable at 0x00013a47. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(**(long **)(&DAT_00001280 + lVar1) + 0x1b0))();
      return;
    }
    *(ulong *)(this + ((ulong)(long)param_1 >> 6) * 8 + 0xd40) =
         *(ulong *)(this + ((ulong)(long)param_1 >> 6) * 8 + 0xd40) | 1L << ((byte)param_1 & 0x3f);
    lVar1 = *(long *)(this + 0xd80);
    *(long *)(this + 0xd80) = lVar1 + 1;
    if (lVar1 == 0) {
      (**(code **)(**(long **)(this + 0xd30) + 0x150))();
      IGScheduler::enablePeriodicEventTimerInterrupt
                (*(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10)),
                 *(undefined8 *)(this + 0xd30));
      return;
    }
  }
  return;
}



// IGAccelEventMachine::disableStampInterrupt(int)

void __thiscall IGAccelEventMachine::disableStampInterrupt(IGAccelEventMachine *this,int param_1)

{
  disableStampInterrupt(this,param_1,0);
  return;
}



// IGAccelEventMachine::disableStampInterrupt(int, int)

void __thiscall
IGAccelEventMachine::disableStampInterrupt(IGAccelEventMachine *this,int param_1,int param_2)

{
  long lVar1;
  ulong uVar2;
  
  if (param_2 == 0) {
    *(long *)(this + 0xd90) = *(long *)(this + 0xd90) + -1;
  }
  lVar1 = *(long *)(this + 0x10);
  if ((param_1 < *(int *)(&DAT_000011d0 + lVar1)) || (*(int *)(&DAT_000011d4 + lVar1) < param_1)) {
    uVar2 = (ulong)(long)param_1 >> 6;
    if ((*(ulong *)(this + uVar2 * 8 + 0xd40) >> ((long)param_1 & 0x3fU) & 1) == 0) {
      if (*(char *)(*(long *)(&DAT_00001278 + lVar1) + 0x7cc) != '\0') {
                    // WARNING: Could not recover jumptable at 0x00013b82. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(**(long **)(&DAT_00001280 + lVar1) + 0x1b8))
                  (*(long **)(&DAT_00001280 + lVar1),param_1);
        return;
      }
      _IOLog("[IGPU] [IGPU] Request to disable stamp interrupt for a stamp index (%d) that\'s already disabled!\n"
             ,param_1);
      _kprintf("[IGPU] [IGPU] Request to disable stamp interrupt for a stamp index (%d) that\'s already disabled!\n"
               ,param_1);
      return;
    }
    *(ulong *)(this + uVar2 * 8 + 0xd40) =
         *(ulong *)(this + uVar2 * 8 + 0xd40) & ~(1L << ((byte)param_1 & 0x3f));
    lVar1 = *(long *)(this + 0xd80);
    *(long *)(this + 0xd80) = lVar1 + -1;
    if (lVar1 == 1) {
      (**(code **)(**(long **)(this + 0xd30) + 0x158))();
      IGScheduler::disablePeriodicEventTimerInterrupt
                (*(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10)),
                 *(undefined8 *)(this + 0xd30));
      return;
    }
  }
  return;
}



// IGAccelEventMachine::testTransientStampInterrupts() const

bool __thiscall IGAccelEventMachine::testTransientStampInterrupts(IGAccelEventMachine *this)

{
  return *(long *)(this + 0xd90) == 0;
}



// IGAccelEventMachine::stampInterruptLockLock()

void __thiscall IGAccelEventMachine::stampInterruptLockLock(IGAccelEventMachine *this)

{
  _IOLockLock(*(undefined8 *)(this + 0x50));
  return;
}



// IGAccelEventMachine::stampInterruptLockUnlock()

void __thiscall IGAccelEventMachine::stampInterruptLockUnlock(IGAccelEventMachine *this)

{
  _IOLockUnlock(*(undefined8 *)(this + 0x50));
  return;
}



// IGAccelEventMachine::MetaClass::~MetaClass()

void __thiscall IGAccelEventMachine::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelEventMachine2::collectAllLiveEventIfNeeded()

void IOAccelEventMachine2::collectAllLiveEventIfNeeded(void)

{
  return;
}



void __GLOBAL__sub_I_IGAccelEventMachine_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelEventMachine::gMetaClass,"IGAccelEventMachine",
             (OSMetaClass *)__got::gMetaClass,0xdc0);
  IGAccelEventMachine::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelEventMachine::gMetaClass);
  return;
}



// IGAccelStatistics::MetaClass::MetaClass()

void __thiscall IGAccelStatistics::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelStatistics",(OSMetaClass *)__got::gMetaClass,0x150);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelStatistics::MetaClass::~MetaClass()

void __thiscall IGAccelStatistics::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelStatistics::IGAccelStatistics(OSMetaClass const*)

void __thiscall IGAccelStatistics::IGAccelStatistics(IGAccelStatistics *this,OSMetaClass *param_1)

{
  IOAccelStatistics2::IOAccelStatistics2((IOAccelStatistics2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelStatistics;
  this[0x140] = (IGAccelStatistics)0x0;
  *(undefined8 *)(this + 0x148) = 0;
  return;
}



// IGAccelStatistics::IGAccelStatistics(OSMetaClass const*)

void __thiscall IGAccelStatistics::IGAccelStatistics(IGAccelStatistics *this,OSMetaClass *param_1)

{
  IOAccelStatistics2::IOAccelStatistics2((IOAccelStatistics2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelStatistics;
  this[0x140] = (IGAccelStatistics)0x0;
  *(undefined8 *)(this + 0x148) = 0;
  return;
}



// IGAccelStatistics::~IGAccelStatistics()

void __thiscall IGAccelStatistics::~IGAccelStatistics(IGAccelStatistics *this)

{
  IOAccelStatistics2::~IOAccelStatistics2((IOAccelStatistics2 *)this);
  return;
}



// IGAccelStatistics::~IGAccelStatistics()

void __thiscall IGAccelStatistics::~IGAccelStatistics(IGAccelStatistics *this)

{
  IOAccelStatistics2::~IOAccelStatistics2((IOAccelStatistics2 *)this);
  return;
}



// IGAccelStatistics::~IGAccelStatistics()

void __thiscall IGAccelStatistics::~IGAccelStatistics(IGAccelStatistics *this)

{
  IOAccelStatistics2::~IOAccelStatistics2((IOAccelStatistics2 *)this);
  _OSObject_typed_operator_delete(&IGAccelStatistics_ktv,this,0x150);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelStatistics::operator delete(void*, unsigned long)

void __cdecl IGAccelStatistics::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelStatistics_ktv,param_1,param_2);
  return;
}



// IGAccelStatistics::getMetaClass() const

undefined8 * IGAccelStatistics::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelStatistics::MetaClass::MetaClass()

void __thiscall IGAccelStatistics::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelStatistics",(OSMetaClass *)__got::gMetaClass,0x150);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelStatistics::MetaClass::alloc() const

IOAccelStatistics2 * IGAccelStatistics::MetaClass::alloc(void)

{
  IOAccelStatistics2 *this;
  
  this = (IOAccelStatistics2 *)_OSObject_typed_operator_new(&IGAccelStatistics_ktv,0x150);
  IOAccelStatistics2::IOAccelStatistics2(this,(OSMetaClass *)&IGAccelStatistics::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelStatistics;
  this[0x140] = (IOAccelStatistics2)0x0;
  *(undefined8 *)(this + 0x148) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelStatistics::operator new(unsigned long)

void * __thiscall IGAccelStatistics::operator_new(IGAccelStatistics *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelStatistics_ktv,this);
  return pvVar1;
}



// IGAccelStatistics::IGAccelStatistics()

void __thiscall IGAccelStatistics::IGAccelStatistics(IGAccelStatistics *this)

{
  IOAccelStatistics2::IOAccelStatistics2((IOAccelStatistics2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelStatistics;
  this[0x140] = (IGAccelStatistics)0x0;
  *(undefined8 *)(this + 0x148) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelStatistics::IGAccelStatistics()

void __thiscall IGAccelStatistics::IGAccelStatistics(IGAccelStatistics *this)

{
  IOAccelStatistics2::IOAccelStatistics2((IOAccelStatistics2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelStatistics;
  this[0x140] = (IGAccelStatistics)0x0;
  *(undefined8 *)(this + 0x148) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelStatistics::init(IOGraphicsAccelerator2*)

void __thiscall IGAccelStatistics::init(IGAccelStatistics *this,undefined8 param_1)

{
  *(undefined8 *)(this + 0x148) = param_1;
  (**(code **)(__got::vtable + 0x128))();
  ___bzero(this + 0x68,0xd8);
  return;
}



// IGAccelStatistics::setupIOReporters()

void IGAccelStatistics::setupIOReporters(void)

{
                    // WARNING: Could not recover jumptable at 0x00013e90. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x140))();
  return;
}



// IGAccelStatistics::setupChannels()

void __thiscall IGAccelStatistics::setupChannels(IGAccelStatistics *this)

{
  IOAccelStatistics2::addChannel((char *)this,0x8947f);
  IOAccelStatistics2::addChannel((char *)this,0x89490);
                    // WARNING: Could not recover jumptable at 0x00013ed4. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x148))(this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelStatistics::configureReport(IOReportChannelList*, unsigned int, void*, void*)

void __cdecl IGAccelStatistics::configureReport(long param_1,uint *param_2,uint param_3)

{
  uint uVar1;
  long lVar2;
  
  if ((param_3 < 2) && (uVar1 = *param_2, (ulong)uVar1 != 0)) {
    lVar2 = 0;
    do {
      if ((*(ulong *)((long)param_2 + lVar2 + 8) & 0xfffffffffffffffe) == 4000) {
        *(bool *)(param_1 + 0x140) = param_3 == 1;
      }
      lVar2 = lVar2 + 0x10;
    } while ((ulong)uVar1 << 4 != lVar2);
  }
                    // WARNING: Could not recover jumptable at 0x00013f22. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x150))();
  return;
}



// IGAccelStatistics::updateReport(IOReportChannelList*, unsigned int, void*, void*)

void __thiscall
IGAccelStatistics::updateReport
          (IGAccelStatistics *this,undefined8 param_1,undefined4 param_2,undefined8 param_3,
          undefined8 param_4)

{
  uint64_t uVar1;
  
  if (((this[0x140] != (IGAccelStatistics)0x0) && (*(long *)(this + 0x148) != 0)) &&
     ((*(uint *)(*(long *)(this + 0x148) + 0xc78) & 0x12) == 2)) {
    uVar1 = _mach_absolute_time();
    if (*(long *)(this + 0x148) != 0) {
      IGTelemetryManager::calcGlobalUsage
                (*(IGTelemetryManager **)(*(long *)(this + 0x148) + 0xf18),uVar1);
    }
    IOAccelStatistics2::setChannelValue((ulonglong)this,4000);
    IOAccelStatistics2::setChannelValue((ulonglong)this,0xfa1);
  }
                    // WARNING: Could not recover jumptable at 0x00013fd5. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x158))(this,param_1,param_2,param_3,param_4);
  return;
}



// IGAccelStatistics::writePerformanceStats(OSDictionary*, bool)

void __thiscall
IGAccelStatistics::writePerformanceStats(IGAccelStatistics *this,long *param_1,char param_2)

{
  IGAccelStatistics IVar1;
  IGTelemetryManager *this_00;
  long lVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  long lVar8;
  int param3;
  long lVar9;
  uint uVar10;
  long lVar11;
  ulong local_68;
  char local_58 [32];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_58[0x18] = '\0';
  local_58[0x19] = '\0';
  local_58[0x1a] = '\0';
  local_58[0x1b] = '\0';
  local_58[0x1c] = '\0';
  local_58[0x1d] = '\0';
  local_58[0x10] = '\0';
  local_58[0x11] = '\0';
  local_58[0x12] = '\0';
  local_58[0x13] = '\0';
  local_58[0x14] = '\0';
  local_58[0x15] = '\0';
  local_58[0x16] = '\0';
  local_58[0x17] = '\0';
  local_58[8] = '\0';
  local_58[9] = '\0';
  local_58[10] = '\0';
  local_58[0xb] = '\0';
  local_58[0xc] = '\0';
  local_58[0xd] = '\0';
  local_58[0xe] = '\0';
  local_58[0xf] = '\0';
  local_58[0] = '\0';
  local_58[1] = '\0';
  local_58[2] = '\0';
  local_58[3] = '\0';
  local_58[4] = '\0';
  local_58[5] = '\0';
  local_58[6] = '\0';
  local_58[7] = '\0';
  (**(code **)(__got::vtable + 0x130))();
  if ((*(byte *)(*(long *)(this + 0x10) + 0xc78) & 2) == 0) {
    param3 = 0;
    do {
      _snprintf(local_58,0x1e,"Device Unit %d Utilization %%",param3);
      IOAccelStatistics2::addNumber(param_1,0,local_58);
      _snprintf(local_58,0x1e,"DeviceUnit %d Max Frame Util %%",param3);
      IOAccelStatistics2::addNumber(param_1,0,local_58);
      param3 = param3 + 1;
    } while (param3 != 5);
    uVar10 = 0;
    uVar7 = 0;
  }
  else {
    if ((param_2 == '\0') ||
       (this_00 = *(IGTelemetryManager **)(*(long *)(this + 0x10) + 0xf18),
       this_00 == (IGTelemetryManager *)0x0)) goto LAB_00014261;
    IGTelemetryManager::getStatisticsGlobalUsage(this_00,(undefined8 *)(this + 0x68));
    IVar1 = this[0x10d];
    lVar8 = 0x1d4;
    lVar9 = 0;
    local_68 = 0;
    lVar11 = 0;
    do {
      lVar2 = *(long *)(this + lVar9 * 8 + 0x68);
      lVar3 = *(long *)(this + lVar9 * 8 + 0xb8);
      uVar6 = *(long *)(this + lVar9 * 8 + 0x90) - *(long *)(this + lVar9 * 8 + 0xe0);
      if (uVar6 == 0) {
        uVar5 = 0;
      }
      else {
        uVar5 = (ulong)((lVar2 - lVar3) * 100) / uVar6;
        if (local_68 <= uVar6) {
          local_68 = uVar6;
        }
      }
      *(ulong *)(this + lVar9 * 8 + 0x110) = uVar5;
      _snprintf(local_58,0x1e,"Device Unit %d Utilization %%",(int)lVar9);
      IOAccelStatistics2::addNumber(param_1,*(uint *)(this + lVar9 * 8 + 0x110),local_58);
      if (_graphicsTracePointEnable != 0) {
        _snprintf(local_58,0x1e,"DeviceUnit %d Max Frame Util %%",(int)lVar9);
        if ((*(long *)(this + 0x10) != 0) &&
           (lVar4 = *(long *)(*(long *)(this + 0x10) + 0xe10), lVar4 != 0)) {
          IOAccelStatistics2::addNumber(param_1,*(uint *)(lVar4 + lVar8),local_58);
          *(undefined4 *)(lVar4 + lVar8) = 0;
        }
      }
      lVar11 = lVar11 + (lVar2 - lVar3);
      lVar9 = lVar9 + 1;
      lVar8 = lVar8 + 0x70;
    } while (lVar9 != 5);
    if ((local_68 == 0) || (*(uint *)(this + 0x108) == 0)) goto LAB_00014261;
    local_68 = (ulong)(lVar11 * 100) / local_68;
    uVar6 = 100;
    if (local_68 < 100) {
      uVar6 = local_68;
    }
    uVar10 = (uint)uVar6;
    uVar6 = (ulong)((((uint)(byte)IVar1 * 0x32) / 3) * uVar10) / (ulong)*(uint *)(this + 0x108);
    *(ulong *)(this + 0x138) = uVar6;
    uVar7 = (uint)uVar6;
  }
  IOAccelStatistics2::addNumber(param_1,uVar7,"Device Utilization %");
  IOAccelStatistics2::addNumber(param_1,uVar10,"Device Utilization % at cur p-state");
LAB_00014261:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IOAccelStatistics2::addNumber(OSDictionary*, unsigned int, char const*)

void __cdecl IOAccelStatistics2::addNumber(long *param_1,uint param_2,undefined8 param_3)

{
  long *plVar1;
  
  plVar1 = (long *)OSNumber::withNumber((ulong)param_2,0x20);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*param_1 + 0x1d0))(param_1,param_3,plVar1);
                    // WARNING: Could not recover jumptable at 0x000142cc. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*plVar1 + 0x28))(plVar1);
    return;
  }
  return;
}



// IGAccelStatistics::MetaClass::~MetaClass()

void __thiscall IGAccelStatistics::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelStatistics_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelStatistics::gMetaClass,"IGAccelStatistics",
             (OSMetaClass *)__got::gMetaClass,0x150);
  IGAccelStatistics::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelStatistics::gMetaClass);
  return;
}



// IGGarbageCollector::MetaClass::MetaClass()

void __thiscall IGGarbageCollector::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGGarbageCollector",(OSMetaClass *)__got::gMetaClass,0x50);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGarbageCollector::MetaClass::~MetaClass()

void __thiscall IGGarbageCollector::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGGarbageCollector::IGGarbageCollector(OSMetaClass const*)

void __thiscall
IGGarbageCollector::IGGarbageCollector(IGGarbageCollector *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGGarbageCollector;
  return;
}



// IGGarbageCollector::IGGarbageCollector(OSMetaClass const*)

void __thiscall
IGGarbageCollector::IGGarbageCollector(IGGarbageCollector *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGGarbageCollector;
  return;
}



// IGGarbageCollector::~IGGarbageCollector()

void __thiscall IGGarbageCollector::~IGGarbageCollector(IGGarbageCollector *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGGarbageCollector::~IGGarbageCollector()

void __thiscall IGGarbageCollector::~IGGarbageCollector(IGGarbageCollector *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGGarbageCollector::~IGGarbageCollector()

void __thiscall IGGarbageCollector::~IGGarbageCollector(IGGarbageCollector *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGGarbageCollector_ktv,this,0x50);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGarbageCollector::operator delete(void*, unsigned long)

void __cdecl IGGarbageCollector::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGGarbageCollector_ktv,param_1,param_2);
  return;
}



// IGGarbageCollector::getMetaClass() const

undefined8 * IGGarbageCollector::getMetaClass(void)

{
  return &gMetaClass;
}



// IGGarbageCollector::MetaClass::MetaClass()

void __thiscall IGGarbageCollector::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGGarbageCollector",(OSMetaClass *)__got::gMetaClass,0x50);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGarbageCollector::MetaClass::alloc() const

OSObject * IGGarbageCollector::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGGarbageCollector_ktv,0x50);
  OSObject::OSObject(this,(OSMetaClass *)&IGGarbageCollector::gMetaClass);
  *(undefined ***)this = &__const::~IGGarbageCollector;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGGarbageCollector::operator new(unsigned long)

void * __thiscall IGGarbageCollector::operator_new(IGGarbageCollector *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGGarbageCollector_ktv,this);
  return pvVar1;
}



// IGGarbageCollector::IGGarbageCollector()

void __thiscall IGGarbageCollector::IGGarbageCollector(IGGarbageCollector *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGGarbageCollector;
  OSMetaClass::instanceConstructed();
  return;
}



// IGGarbageCollector::IGGarbageCollector()

void __thiscall IGGarbageCollector::IGGarbageCollector(IGGarbageCollector *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGGarbageCollector;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGarbageCollector::garbageCollector(IOGraphicsAccelerator2*)

IGGarbageCollector * __cdecl IGGarbageCollector::garbageCollector(undefined8 param_1)

{
  IGGarbageCollector *this;
  undefined8 uVar1;
  
  this = (IGGarbageCollector *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGGarbageCollector *)0x0) {
    uVar1 = init(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGGarbageCollector *)0x0;
}



// IGGarbageCollector::init(IOGraphicsAccelerator2*)

undefined8 __thiscall IGGarbageCollector::init(IGGarbageCollector *this,undefined8 param_1)

{
  char cVar1;
  undefined8 uVar2;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if ((cVar1 != '\0') && (cVar1 = (**(code **)(*(long *)this + 0x118))(this), cVar1 != '\0')) {
    *(undefined8 *)(this + 0x10) = param_1;
    *(undefined8 *)(this + 0x40) = 0;
    *(IGGarbageCollector **)(this + 0x48) = this + 0x40;
    cVar1 = (**(code **)(*(long *)this + 0x120))(this);
    if (cVar1 != '\0') {
      uVar2 = setTimeout(this,1,1000000000);
      return CONCAT71((int7)((ulong)uVar2 >> 8),1);
    }
    (**(code **)(*(long *)this + 0x90))(this);
  }
  return 0;
}



// IGGarbageCollector::setTimeout(unsigned int, int)

void __thiscall IGGarbageCollector::setTimeout(IGGarbageCollector *this,int param_1,int param_2)

{
  (**(code **)(*(long *)this + 0x138))();
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + 1;
  if (this[0x30] != (IGGarbageCollector)0x0) {
    (**(code **)(**(long **)(this + 0x20) + 0x218))();
    this[0x30] = (IGGarbageCollector)0x0;
  }
  _nanoseconds_to_absolutetime(param_2 * param_1,this + 0x28);
  if ((0 < *(int *)(this + 0x38)) && (this[0x30] == (IGGarbageCollector)0x0)) {
    this[0x30] = (IGGarbageCollector)0x1;
    (**(code **)(**(long **)(this + 0x20) + 0x1e8))
              (*(long **)(this + 0x20),*(undefined8 *)(this + 0x28));
  }
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + -1;
                    // WARNING: Could not recover jumptable at 0x00014632. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))(this);
  return;
}



// IGGarbageCollector::lock()

void __thiscall IGGarbageCollector::lock(IGGarbageCollector *this)

{
  (**(code **)(*(long *)this + 0x138))();
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + 1;
  return;
}



// IGGarbageCollector::cancel()

void __thiscall IGGarbageCollector::cancel(IGGarbageCollector *this)

{
  if (this[0x30] != (IGGarbageCollector)0x0) {
    (**(code **)(**(long **)(this + 0x20) + 0x218))();
    this[0x30] = (IGGarbageCollector)0x0;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGarbageCollector::schedule()

void __cdecl IGGarbageCollector::schedule(long param_1,undefined8 param_2,undefined8 param_3)

{
  code *UNRECOVERED_JUMPTABLE;
  
  if ((0 < *(int *)(param_1 + 0x38)) && (*(char *)(param_1 + 0x30) == '\0')) {
    *(undefined1 *)(param_1 + 0x30) = 1;
    UNRECOVERED_JUMPTABLE = *(code **)(**(long **)(param_1 + 0x20) + 0x1e8);
                    // WARNING: Could not recover jumptable at 0x000146a8. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)
              (*(long **)(param_1 + 0x20),*(undefined8 *)(param_1 + 0x28),param_3,
               UNRECOVERED_JUMPTABLE);
    return;
  }
  return;
}



// IGGarbageCollector::unlock()

void __thiscall IGGarbageCollector::unlock(IGGarbageCollector *this)

{
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + -1;
                    // WARNING: Could not recover jumptable at 0x000146b5. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))();
  return;
}



// IGGarbageCollector::enable()

void __thiscall IGGarbageCollector::enable(IGGarbageCollector *this)

{
  int iVar1;
  
  (**(code **)(*(long *)this + 0x138))();
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + 1;
  iVar1 = *(int *)(this + 0x38);
  *(int *)(this + 0x38) = iVar1 + 1;
  if (iVar1 == 0) {
    (**(code **)(**(long **)(this + 0x18) + 0x150))();
    (**(code **)(**(long **)(this + 0x20) + 0x150))();
    if ((0 < *(int *)(this + 0x38)) && (this[0x30] == (IGGarbageCollector)0x0)) {
      this[0x30] = (IGGarbageCollector)0x1;
      (**(code **)(**(long **)(this + 0x20) + 0x1e8))
                (*(long **)(this + 0x20),*(undefined8 *)(this + 0x28));
    }
  }
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + -1;
                    // WARNING: Could not recover jumptable at 0x000146ed. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))(this);
  return;
}



// IGGarbageCollector::disable()

void __thiscall IGGarbageCollector::disable(IGGarbageCollector *this)

{
  int iVar1;
  int iVar2;
  
  (**(code **)(*(long *)this + 0x138))();
  iVar2 = *(int *)(this + 0x34);
  iVar1 = *(int *)(this + 0x38);
  *(int *)(this + 0x34) = iVar2 + 1;
  *(int *)(this + 0x38) = iVar1 + -1;
  if (iVar1 == 1) {
    if (this[0x30] != (IGGarbageCollector)0x0) {
      (**(code **)(**(long **)(this + 0x20) + 0x218))();
      this[0x30] = (IGGarbageCollector)0x0;
    }
    (**(code **)(**(long **)(this + 0x18) + 0x158))();
    (**(code **)(**(long **)(this + 0x20) + 0x158))();
    iVar2 = *(int *)(this + 0x34) + -1;
  }
  *(int *)(this + 0x34) = iVar2;
                    // WARNING: Could not recover jumptable at 0x0001479e. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))(this);
  return;
}



// IGGarbageCollector::add(IGGCQueueEntry*)

void __thiscall IGGarbageCollector::add(IGGarbageCollector *this,long param_1)

{
  long *plVar1;
  int iVar2;
  
  (**(code **)(*(long *)this + 0x138))();
  iVar2 = *(int *)(this + 0x34);
  *(int *)(this + 0x34) = iVar2 + 1;
  *(undefined8 *)(param_1 + 8) = 0;
  plVar1 = *(long **)(this + 0x48);
  *(long **)(param_1 + 0x10) = plVar1;
  *plVar1 = param_1;
  *(long *)(this + 0x48) = param_1 + 8;
  if ((0 < *(int *)(this + 0x38)) && (this[0x30] == (IGGarbageCollector)0x0)) {
    this[0x30] = (IGGarbageCollector)0x1;
    (**(code **)(**(long **)(this + 0x20) + 0x1e8))
              (*(long **)(this + 0x20),*(undefined8 *)(this + 0x28));
    iVar2 = *(int *)(this + 0x34) + -1;
  }
  *(int *)(this + 0x34) = iVar2;
                    // WARNING: Could not recover jumptable at 0x00014811. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))(this);
  return;
}



// IGGarbageCollector::remove(IGGCQueueEntry*)

int __thiscall IGGarbageCollector::remove(IGGarbageCollector *this,char *param_1)

{
  long lVar1;
  int iVar2;
  long *plVar3;
  char *pcVar4;
  
  (**(code **)(*(long *)this + 0x138))();
  iVar2 = *(int *)(this + 0x34);
  *(int *)(this + 0x34) = iVar2 + 1;
  lVar1 = *(long *)(param_1 + 8);
  if (lVar1 == 0) {
    plVar3 = *(long **)(param_1 + 0x10);
    if ((char *)*plVar3 == param_1) {
      *(long **)(this + 0x48) = plVar3;
LAB_0001486c:
      *plVar3 = lVar1;
      *(int *)(this + 0x34) = iVar2;
                    // WARNING: Could not recover jumptable at 0x0001487d. Too many branches
                    // WARNING: Treating indirect jump as call
      iVar2 = (**(code **)(*(long *)this + 0x148))(this);
      return iVar2;
    }
  }
  else {
    if (*(char **)(lVar1 + 0x10) != param_1 + 8) {
      pcVar4 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
      goto LAB_00014893;
    }
    if ((char *)**(long **)(param_1 + 0x10) == param_1) {
      *(long **)(lVar1 + 0x10) = *(long **)(param_1 + 0x10);
      plVar3 = *(long **)(param_1 + 0x10);
      goto LAB_0001486c;
    }
  }
  pcVar4 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00014893:
                    // WARNING: Subroutine does not return
  _panic(pcVar4,param_1,0xa1,"IGGarbageCollector.cpp",0xa1);
}



// IGGarbageCollector::initLock()

undefined1 IGGarbageCollector::initLock(void)

{
  return 1;
}



// IGGarbageCollector::initInterruptEventSources()

undefined8 __thiscall IGGarbageCollector::initInterruptEventSources(IGGarbageCollector *this)

{
  long lVar1;
  long *plVar2;
  undefined8 uVar3;
  
  lVar1 = IOTimerEventSource::timerEventSource((OSObject *)this,handleTimerInterrupt);
  *(long *)(this + 0x20) = lVar1;
  if (lVar1 == 0) {
    uVar3 = 0;
  }
  else {
    plVar2 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar2 + 0x140))(plVar2,*(undefined8 *)(this + 0x20));
    uVar3 = 0;
    lVar1 = IOInterruptEventSource::interruptEventSource
                      ((OSObject *)this,handleSecondaryInterrupt,(IOService *)0x0,0);
    *(long *)(this + 0x18) = lVar1;
    if (lVar1 != 0) {
      plVar2 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
      (**(code **)(*plVar2 + 0x140))(plVar2,*(undefined8 *)(this + 0x18));
      uVar3 = 1;
    }
  }
  return uVar3;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGarbageCollector::handleTimerInterrupt(IOTimerEventSource*)

void __cdecl IGGarbageCollector::handleTimerInterrupt(long *param_1)

{
  (**(code **)(*param_1 + 0x138))();
  *(undefined1 *)(param_1 + 6) = 0;
  (**(code **)(*param_1 + 0x148))(param_1);
                    // WARNING: Could not recover jumptable at 0x0001497c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)param_1[3] + 0x1e0))((long *)param_1[3],0,0,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGarbageCollector::handleSecondaryInterrupt(IOInterruptEventSource*, int)

void __cdecl IGGarbageCollector::handleSecondaryInterrupt(long *param_1)

{
  long *plVar1;
  undefined8 *puVar2;
  
  plVar1 = (long *)param_1[2];
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  (**(code **)(*param_1 + 0x138))(param_1);
  *(int *)((long)param_1 + 0x34) = *(int *)((long)param_1 + 0x34) + 1;
  if ((0 < (int)param_1[7]) && (puVar2 = (undefined8 *)param_1[8], puVar2 != (undefined8 *)0x0)) {
    do {
      plVar1 = (long *)*puVar2;
      puVar2 = (undefined8 *)puVar2[1];
      (**(code **)(*plVar1 + 0x28))();
    } while (puVar2 != (undefined8 *)0x0);
    if (((param_1[8] != 0) && (0 < (int)param_1[7])) && ((char)param_1[6] == '\0')) {
      *(undefined1 *)(param_1 + 6) = 1;
      (**(code **)(*(long *)param_1[4] + 0x1e8))((long *)param_1[4],param_1[5]);
    }
  }
  *(int *)((long)param_1 + 0x34) = *(int *)((long)param_1 + 0x34) + -1;
  (**(code **)(*param_1 + 0x148))(param_1);
  plVar1 = (long *)param_1[2];
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return;
}



// IGGarbageCollector::free()

void __thiscall IGGarbageCollector::free(IGGarbageCollector *this,void *param_1)

{
  drain(this);
  (**(code **)(*(long *)this + 0x128))(this);
  (**(code **)(*(long *)this + 0x130))(this);
                    // WARNING: Could not recover jumptable at 0x00014aa4. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGGarbageCollector::drain()

void __thiscall IGGarbageCollector::drain(IGGarbageCollector *this)

{
  long *plVar1;
  undefined8 *puVar2;
  uint uVar3;
  
  (**(code **)(*(long *)this + 0x138))();
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + 1;
  if (this[0x30] != (IGGarbageCollector)0x0) {
    (**(code **)(**(long **)(this + 0x20) + 0x218))();
    this[0x30] = (IGGarbageCollector)0x0;
  }
  puVar2 = *(undefined8 **)(this + 0x40);
  if (puVar2 != (undefined8 *)0x0) {
    uVar3 = 0;
    do {
      do {
        plVar1 = (long *)*puVar2;
        puVar2 = (undefined8 *)puVar2[1];
        (**(code **)(*plVar1 + 0x28))();
      } while (puVar2 != (undefined8 *)0x0);
      puVar2 = *(undefined8 **)(this + 0x40);
      if ((puVar2 == (undefined8 *)0x0) || (9999 < uVar3)) goto LAB_00014b4d;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      uVar3 = uVar3 + 1;
      puVar2 = *(undefined8 **)(this + 0x40);
    } while (puVar2 != (undefined8 *)0x0);
  }
LAB_00014b52:
  *(int *)(this + 0x34) = *(int *)(this + 0x34) + -1;
                    // WARNING: Could not recover jumptable at 0x00014b63. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x148))(this);
  return;
LAB_00014b4d:
  while (puVar2 != (undefined8 *)0x0) {
    (**(code **)(*(long *)*puVar2 + 0x118))();
    puVar2 = *(undefined8 **)(this + 0x40);
  }
  goto LAB_00014b52;
}



// IGGarbageCollector::freeInterruptEventSources()

void __thiscall IGGarbageCollector::freeInterruptEventSources(IGGarbageCollector *this)

{
  long *plVar1;
  
  if (*(long *)(this + 0x20) != 0) {
    plVar1 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar1 + 0x148))(plVar1,*(undefined8 *)(this + 0x20));
    (**(code **)(**(long **)(this + 0x20) + 0x28))();
    *(undefined8 *)(this + 0x20) = 0;
  }
  if (*(long *)(this + 0x18) != 0) {
    plVar1 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar1 + 0x148))(plVar1,*(undefined8 *)(this + 0x18));
    (**(code **)(**(long **)(this + 0x18) + 0x28))();
    *(undefined8 *)(this + 0x18) = 0;
  }
  return;
}



// IGGarbageCollector::freeLock()

void IGGarbageCollector::freeLock(void)

{
  return;
}



// IGGarbageCollector::tryLock()

void __thiscall IGGarbageCollector::tryLock(IGGarbageCollector *this)

{
  byte bVar1;
  
  bVar1 = (**(code **)(*(long *)this + 0x140))();
  *(uint *)(this + 0x34) = *(int *)(this + 0x34) + (uint)bVar1;
  return;
}



// IGGarbageCollector::lockLock()

void IGGarbageCollector::lockLock(void)

{
  return;
}



// IGGarbageCollector::lockTryLock()

undefined1 IGGarbageCollector::lockTryLock(void)

{
  return 1;
}



// IGGarbageCollector::lockUnlock()

void IGGarbageCollector::lockUnlock(void)

{
  return;
}



// IGGarbageCollector::collect()

bool __thiscall IGGarbageCollector::collect(IGGarbageCollector *this)

{
  long *plVar1;
  undefined8 *puVar2;
  bool bVar3;
  
  puVar2 = *(undefined8 **)(this + 0x40);
  if (puVar2 == (undefined8 *)0x0) {
    bVar3 = true;
  }
  else {
    do {
      plVar1 = (long *)*puVar2;
      puVar2 = (undefined8 *)puVar2[1];
      (**(code **)(*plVar1 + 0x28))();
    } while (puVar2 != (undefined8 *)0x0);
    bVar3 = *(long *)(this + 0x40) == 0;
  }
  return bVar3;
}



// IGGarbageCollector::forceCollect()

void __thiscall IGGarbageCollector::forceCollect(IGGarbageCollector *this)

{
  undefined8 *puVar1;
  
  puVar1 = *(undefined8 **)(this + 0x40);
  while (puVar1 != (undefined8 *)0x0) {
    (**(code **)(*(long *)*puVar1 + 0x118))();
    puVar1 = *(undefined8 **)(this + 0x40);
  }
  return;
}



// IGGarbageCollector::MetaClass::~MetaClass()

void __thiscall IGGarbageCollector::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGGarbageCollector_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGGarbageCollector::gMetaClass,"IGGarbageCollector",
             (OSMetaClass *)__got::gMetaClass,0x50);
  IGGarbageCollector::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGGarbageCollector::gMetaClass);
  return;
}



// IGAccelShared::MetaClass::MetaClass()

void __thiscall IGAccelShared::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelShared",(OSMetaClass *)__got::gMetaClass,0x178);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelShared::MetaClass::~MetaClass()

void __thiscall IGAccelShared::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelShared::IGAccelShared(OSMetaClass const*)

void __thiscall IGAccelShared::IGAccelShared(IGAccelShared *this,OSMetaClass *param_1)

{
  IOAccelShared2::IOAccelShared2((IOAccelShared2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelShared;
  return;
}



// IGAccelShared::IGAccelShared(OSMetaClass const*)

void __thiscall IGAccelShared::IGAccelShared(IGAccelShared *this,OSMetaClass *param_1)

{
  IOAccelShared2::IOAccelShared2((IOAccelShared2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelShared;
  return;
}



// IGAccelShared::~IGAccelShared()

void __thiscall IGAccelShared::~IGAccelShared(IGAccelShared *this)

{
  IOAccelShared2::~IOAccelShared2((IOAccelShared2 *)this);
  return;
}



// IGAccelShared::~IGAccelShared()

void __thiscall IGAccelShared::~IGAccelShared(IGAccelShared *this)

{
  IOAccelShared2::~IOAccelShared2((IOAccelShared2 *)this);
  return;
}



// IGAccelShared::~IGAccelShared()

void __thiscall IGAccelShared::~IGAccelShared(IGAccelShared *this)

{
  IOAccelShared2::~IOAccelShared2((IOAccelShared2 *)this);
  _OSObject_typed_operator_delete(&IGAccelShared_ktv,this,0x178);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelShared::operator delete(void*, unsigned long)

void __cdecl IGAccelShared::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelShared_ktv,param_1,param_2);
  return;
}



// IGAccelShared::getMetaClass() const

undefined1 * IGAccelShared::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelShared::MetaClass::MetaClass()

void __thiscall IGAccelShared::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelShared",(OSMetaClass *)__got::gMetaClass,0x178);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelShared::MetaClass::alloc() const

IOAccelShared2 * IGAccelShared::MetaClass::alloc(void)

{
  IOAccelShared2 *this;
  
  this = (IOAccelShared2 *)_OSObject_typed_operator_new(&IGAccelShared_ktv,0x178);
  IOAccelShared2::IOAccelShared2(this,(OSMetaClass *)&IGAccelShared::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelShared;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelShared::operator new(unsigned long)

void * __thiscall IGAccelShared::operator_new(IGAccelShared *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelShared_ktv,this);
  return pvVar1;
}



// IGAccelShared::IGAccelShared()

void __thiscall IGAccelShared::IGAccelShared(IGAccelShared *this)

{
  IOAccelShared2::IOAccelShared2((IOAccelShared2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelShared;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelShared::IGAccelShared()

void __thiscall IGAccelShared::IGAccelShared(IGAccelShared *this)

{
  IOAccelShared2::IOAccelShared2((IOAccelShared2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelShared;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelShared::init(IOGraphicsAccelerator2*, task*)

void __cdecl IGAccelShared::init(long param_1)

{
  long lVar1;
  undefined8 uVar2;
  char cVar3;
  
  cVar3 = (**(code **)(__got::vtable + 0x128))();
  if (cVar3 != '\0') {
    lVar1 = *(long *)(param_1 + 0x78);
    uVar2 = *(undefined8 *)(&DAT_00001108 + lVar1);
    *(undefined8 *)(param_1 + 0x138) = *(undefined8 *)(&DAT_00001100 + lVar1);
    *(undefined8 *)(param_1 + 0x140) = uVar2;
    *(undefined8 *)(param_1 + 0x148) = *(undefined8 *)(&DAT_00001110 + lVar1);
    *(undefined8 *)(param_1 + 0x150) = *(undefined8 *)(&DAT_00001118 + lVar1);
    *(undefined8 *)(param_1 + 0x158) = *(undefined8 *)(&DAT_00001120 + lVar1);
    *(undefined8 *)(param_1 + 0x160) = *(undefined8 *)(&DAT_00001128 + lVar1);
    *(undefined8 *)(param_1 + 0x168) = *(undefined8 *)(&DAT_00001130 + lVar1);
    *(undefined8 *)(param_1 + 0x170) = *(undefined8 *)(&DAT_00001138 + lVar1);
  }
  return;
}



// IGAccelShared::setDeviceSettingsUserPreferences(IntelSkuFeatureTableExRec*)

void __thiscall IGAccelShared::setDeviceSettingsUserPreferences(IGAccelShared *this,long param_1)

{
  long *plVar1;
  long lVar2;
  undefined8 uVar3;
  long *local_48;
  long *local_40;
  IGAccelShared *local_38;
  
  plVar1 = *(long **)(this + 0x78);
  local_48 = plVar1 + 0x210;
  local_40 = plVar1 + 0x218;
  local_38 = this + 0x138;
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  lVar2 = *(long *)(this + 0x78);
  *(undefined8 *)(&DAT_000010f8 + lVar2) = *(undefined8 *)(param_1 + 0x78);
  *(undefined8 *)(&DAT_000010f0 + lVar2) = *(undefined8 *)(param_1 + 0x70);
  *(undefined8 *)(&DAT_000010e8 + lVar2) = *(undefined8 *)(param_1 + 0x68);
  *(undefined8 *)(&DAT_000010e0 + lVar2) = *(undefined8 *)(param_1 + 0x60);
  *(undefined8 *)(&DAT_000010d8 + lVar2) = *(undefined8 *)(param_1 + 0x58);
  *(undefined8 *)(&DAT_000010d0 + lVar2) = *(undefined8 *)(param_1 + 0x50);
  uVar3 = *(undefined8 *)(param_1 + 0x40);
  *(undefined8 *)(&DAT_000010c8 + lVar2) = *(undefined8 *)(param_1 + 0x48);
  *(undefined8 *)(&DAT_000010c0 + lVar2) = uVar3;
  *(undefined8 *)(this + 0x170) = *(undefined8 *)(param_1 + 0xb8);
  *(undefined8 *)(this + 0x168) = *(undefined8 *)(param_1 + 0xb0);
  *(undefined8 *)(this + 0x160) = *(undefined8 *)(param_1 + 0xa8);
  *(undefined8 *)(this + 0x158) = *(undefined8 *)(param_1 + 0xa0);
  *(undefined8 *)(this + 0x150) = *(undefined8 *)(param_1 + 0x98);
  *(undefined8 *)(this + 0x148) = *(undefined8 *)(param_1 + 0x90);
  uVar3 = *(undefined8 *)(param_1 + 0x80);
  *(undefined8 *)(this + 0x140) = *(undefined8 *)(param_1 + 0x88);
  *(undefined8 *)(this + 0x138) = uVar3;
  intelApplyDeviceSettingsRules((long)&local_48);
  plVar1 = *(long **)(this + 0x78);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return;
}



// intelCreateStaticDeviceSettingsDictionary()

undefined8 intelCreateStaticDeviceSettingsDictionary(void)

{
  bool bVar1;
  undefined8 uVar2;
  bool bVar3;
  long lVar4;
  OSObject *local_48 [2];
  OSSymbol *local_38 [2];
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  local_38[0] = (OSSymbol *)OSSymbol::withCStringNoCopy("_kIntelStaticExFtrForceDisableEDRAM");
  local_38[1] = (OSSymbol *)
                OSSymbol::withCStringNoCopy("_kIntelStaticExFtrCacheDisplaySurfacesInEDRAM");
  lVar4 = 0;
  local_48[0] = (OSObject *)OSNumber::withNumber(0,0x10);
  local_48[1] = (OSObject *)OSNumber::withNumber(1,0x10);
  uVar2 = OSDictionary::withObjects(local_48,local_38,2,0);
  bVar1 = true;
  do {
    bVar3 = bVar1;
    (**(code **)(*(long *)local_38[lVar4] + 0x28))();
    (**(code **)(*(long *)local_48[lVar4] + 0x28))();
    lVar4 = 1;
    bVar1 = false;
  } while (bVar3);
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// intelCreateGlobalDeviceSettingsDictionary()

undefined8 intelCreateGlobalDeviceSettingsDictionary(void)

{
  undefined8 uVar1;
  OSObject *local_38;
  OSSymbol *local_30;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  local_30 = (OSSymbol *)OSSymbol::withCStringNoCopy("_kIntelGlobalExFtrPanicOnGPUHang");
  local_38 = (OSObject *)OSNumber::withNumber(0,0x10);
  uVar1 = OSDictionary::withObjects(&local_38,&local_30,1,0);
  (**(code **)(*(long *)local_30 + 0x28))();
  (**(code **)(*(long *)local_38 + 0x28))();
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return uVar1;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// intelCreateSharedDeviceSettingsDictionary()

undefined8 intelCreateSharedDeviceSettingsDictionary(void)

{
  bool bVar1;
  undefined8 uVar2;
  bool bVar3;
  long lVar4;
  OSObject *local_48 [2];
  OSSymbol *local_38 [2];
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  local_38[0] = (OSSymbol *)OSSymbol::withCStringNoCopy("_kIntelSharedExFtrPoshEnable");
  local_38[1] = (OSSymbol *)OSSymbol::withCStringNoCopy("_kIntelSharedExFtrPtbrEnable");
  lVar4 = 0;
  local_48[0] = (OSObject *)OSNumber::withNumber(0,0x10);
  local_48[1] = (OSObject *)OSNumber::withNumber(1,0x10);
  uVar2 = OSDictionary::withObjects(local_48,local_38,2,0);
  bVar1 = true;
  do {
    bVar3 = bVar1;
    (**(code **)(*(long *)local_38[lVar4] + 0x28))();
    (**(code **)(*(long *)local_48[lVar4] + 0x28))();
    lVar4 = 1;
    bVar1 = false;
  } while (bVar3);
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelShared::MetaClass::~MetaClass()

void __thiscall IGAccelShared::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGAccelShared_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelShared::gMetaClass,"IGAccelShared",
             (OSMetaClass *)__got::gMetaClass,0x178);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelShared::gMetaClass);
  return;
}



// IGWorkQueueAk::MetaClass::MetaClass()

void __thiscall IGWorkQueueAk::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGWorkQueueAk",(OSMetaClass *)&IGGCObject::gMetaClass,0x50);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGWorkQueueAk::MetaClass::~MetaClass()

void __thiscall IGWorkQueueAk::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGWorkQueueAk::IGWorkQueueAk(OSMetaClass const*)

void __thiscall IGWorkQueueAk::IGWorkQueueAk(IGWorkQueueAk *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined ***)this = &__const::~IGWorkQueueAk;
  return;
}



// IGWorkQueueAk::IGWorkQueueAk(OSMetaClass const*)

void __thiscall IGWorkQueueAk::IGWorkQueueAk(IGWorkQueueAk *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined ***)this = &__const::~IGWorkQueueAk;
  return;
}



// IGWorkQueueAk::~IGWorkQueueAk()

void __thiscall IGWorkQueueAk::~IGWorkQueueAk(IGWorkQueueAk *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGWorkQueueAk::~IGWorkQueueAk()

void __thiscall IGWorkQueueAk::~IGWorkQueueAk(IGWorkQueueAk *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGWorkQueueAk::~IGWorkQueueAk()

void __thiscall IGWorkQueueAk::~IGWorkQueueAk(IGWorkQueueAk *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGWorkQueueAk_ktv,this,0x50);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGWorkQueueAk::operator delete(void*, unsigned long)

void __cdecl IGWorkQueueAk::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGWorkQueueAk_ktv,param_1,param_2);
  return;
}



// IGWorkQueueAk::getMetaClass() const

undefined8 * IGWorkQueueAk::getMetaClass(void)

{
  return &gMetaClass;
}



// IGWorkQueueAk::MetaClass::MetaClass()

void __thiscall IGWorkQueueAk::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGWorkQueueAk",(OSMetaClass *)&IGGCObject::gMetaClass,0x50);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGWorkQueueAk::MetaClass::alloc() const

IGGCObject * IGWorkQueueAk::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGWorkQueueAk_ktv,0x50);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGWorkQueueAk::gMetaClass);
  *(undefined ***)this = &__const::~IGWorkQueueAk;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGWorkQueueAk::operator new(unsigned long)

void * __thiscall IGWorkQueueAk::operator_new(IGWorkQueueAk *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGWorkQueueAk_ktv,this);
  return pvVar1;
}



// IGWorkQueueAk::IGWorkQueueAk()

void __thiscall IGWorkQueueAk::IGWorkQueueAk(IGWorkQueueAk *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGWorkQueueAk;
  OSMetaClass::instanceConstructed();
  return;
}



// IGWorkQueueAk::IGWorkQueueAk()

void __thiscall IGWorkQueueAk::IGWorkQueueAk(IGWorkQueueAk *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGWorkQueueAk;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGWorkQueueAk::withStorageResource(IGSharedMappedBuffer*, IntelAccelerator*, IGGuC*)

IGGCObject * __cdecl
IGWorkQueueAk::withStorageResource(IGGCObject *param_1,long param_2,undefined8 param_3)

{
  undefined4 uVar1;
  IGGCObject *this;
  long lVar2;
  IGGCObject *pIVar3;
  
  this = (IGGCObject *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this == (IGGCObject *)0x0) {
    pIVar3 = (IGGCObject *)0x0;
  }
  else {
    *(IGGCObject **)(this + 0x38) = param_1;
    *(long *)(this + 0x40) = param_2;
    *(undefined8 *)(this + 0x48) = param_3;
    uVar1 = IGGCObject::init(this,*(long **)(&DAT_00001288 + param_2));
    if ((char)uVar1 == '\0') {
      lVar2 = 5;
      pIVar3 = (IGGCObject *)0x0;
    }
    else {
      *(IGGCObject **)(this + 0x38) = param_1;
      lVar2 = 4;
      pIVar3 = this;
      this = param_1;
    }
    (**(code **)(*(long *)this + lVar2 * 8))(this);
  }
  return pIVar3;
}



// IGWorkQueueAk::initWithStorageResource(IGSharedMappedBuffer*, IntelAccelerator*, IGGuC*)

undefined4 __thiscall
IGWorkQueueAk::initWithStorageResource
          (IGWorkQueueAk *this,long *param_1,long param_2,undefined8 param_3)

{
  undefined4 uVar1;
  
  *(long **)(this + 0x38) = param_1;
  *(long *)(this + 0x40) = param_2;
  *(undefined8 *)(this + 0x48) = param_3;
  uVar1 = IGGCObject::init((IGGCObject *)this,*(long **)(&DAT_00001288 + param_2));
  if ((char)uVar1 != '\0') {
    *(long **)(this + 0x38) = param_1;
    (**(code **)(*param_1 + 0x20))(param_1);
  }
  return uVar1;
}



// IGWorkQueueAk::free()

void __thiscall IGWorkQueueAk::free(IGWorkQueueAk *this,void *param_1)

{
  if (*(long **)(this + 0x38) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x38) + 0x28))();
    *(undefined8 *)(this + 0x38) = 0;
  }
  IGGuC::invalidateTLB(*(IGGuC **)(this + 0x48));
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  IGGCObject::free((IGGCObject *)this,param_1);
  return;
}



// IGWorkQueueAk::check() const

void __thiscall IGWorkQueueAk::check(IGWorkQueueAk *this)

{
  long *plVar1;
  code *UNRECOVERED_JUMPTABLE;
  long lVar2;
  undefined8 extraout_RDX;
  
  plVar1 = *(long **)(*(long *)(this + 0x40) + 0x380);
  lVar2 = IGMappedBuffer::getAccessEvent(*(IGMappedBuffer **)(this + 0x38));
  UNRECOVERED_JUMPTABLE = *(code **)(*plVar1 + 0x180);
                    // WARNING: Could not recover jumptable at 0x00015653. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)(plVar1,lVar2,extraout_RDX,UNRECOVERED_JUMPTABLE);
  return;
}



// IGWorkQueueAk::MetaClass::~MetaClass()

void __thiscall IGWorkQueueAk::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGWorkQueueAk_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGWorkQueueAk::gMetaClass,"IGWorkQueueAk",
             (OSMetaClass *)&IGGCObject::gMetaClass,0x50);
  IGWorkQueueAk::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGWorkQueueAk::gMetaClass);
  return;
}



// IGFlushNotifyInterruptEventSource::MetaClass::MetaClass()

void __thiscall IGFlushNotifyInterruptEventSource::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGFlushNotifyInterruptEventSource",
             (OSMetaClass *)__got::gMetaClass,0x70);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFlushNotifyInterruptEventSource::MetaClass::~MetaClass()

void __thiscall IGFlushNotifyInterruptEventSource::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource(OSMetaClass const*)

void __thiscall
IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this,OSMetaClass *param_1)

{
  IOInterruptEventSource::IOInterruptEventSource((IOInterruptEventSource *)this,param_1);
  *(undefined ***)this = &__const::~IGFlushNotifyInterruptEventSource;
  return;
}



// IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource(OSMetaClass const*)

void __thiscall
IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this,OSMetaClass *param_1)

{
  IOInterruptEventSource::IOInterruptEventSource((IOInterruptEventSource *)this,param_1);
  *(undefined ***)this = &__const::~IGFlushNotifyInterruptEventSource;
  return;
}



// IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource()

void __thiscall
IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this)

{
  IOInterruptEventSource::~IOInterruptEventSource((IOInterruptEventSource *)this);
  return;
}



// IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource()

void __thiscall
IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this)

{
  IOInterruptEventSource::~IOInterruptEventSource((IOInterruptEventSource *)this);
  return;
}



// IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource()

void __thiscall
IGFlushNotifyInterruptEventSource::~IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this)

{
  IOInterruptEventSource::~IOInterruptEventSource((IOInterruptEventSource *)this);
  _OSObject_typed_operator_delete(&IGFlushNotifyInterruptEventSource_ktv,this,0x70);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFlushNotifyInterruptEventSource::operator delete(void*, unsigned long)

void __cdecl
IGFlushNotifyInterruptEventSource::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGFlushNotifyInterruptEventSource_ktv,param_1,param_2);
  return;
}



// IGFlushNotifyInterruptEventSource::getMetaClass() const

undefined8 * IGFlushNotifyInterruptEventSource::getMetaClass(void)

{
  return &gMetaClass;
}



// IGFlushNotifyInterruptEventSource::MetaClass::MetaClass()

void __thiscall IGFlushNotifyInterruptEventSource::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGFlushNotifyInterruptEventSource",
             (OSMetaClass *)__got::gMetaClass,0x70);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGFlushNotifyInterruptEventSource::MetaClass::alloc() const

IOInterruptEventSource * IGFlushNotifyInterruptEventSource::MetaClass::alloc(void)

{
  IOInterruptEventSource *this;
  
  this = (IOInterruptEventSource *)
         _OSObject_typed_operator_new(&IGFlushNotifyInterruptEventSource_ktv,0x70);
  IOInterruptEventSource::IOInterruptEventSource
            (this,(OSMetaClass *)&IGFlushNotifyInterruptEventSource::gMetaClass);
  *(undefined ***)this = &__const::~IGFlushNotifyInterruptEventSource;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGFlushNotifyInterruptEventSource::operator new(unsigned long)

void * __thiscall
IGFlushNotifyInterruptEventSource::operator_new(IGFlushNotifyInterruptEventSource *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGFlushNotifyInterruptEventSource_ktv,this);
  return pvVar1;
}



// IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource()

void __thiscall
IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this)

{
  IOInterruptEventSource::IOInterruptEventSource
            ((IOInterruptEventSource *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFlushNotifyInterruptEventSource;
  OSMetaClass::instanceConstructed();
  return;
}



// IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource()

void __thiscall
IGFlushNotifyInterruptEventSource::IGFlushNotifyInterruptEventSource
          (IGFlushNotifyInterruptEventSource *this)

{
  IOInterruptEventSource::IOInterruptEventSource
            ((IOInterruptEventSource *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGFlushNotifyInterruptEventSource;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGFlushNotifyInterruptEventSource::withOptions(IGScheduler*, void (*)(OSObject*,
// IOInterruptEventSource*, int), IGHwCsType)

long __cdecl
IGFlushNotifyInterruptEventSource::withOptions
          (undefined8 param_1,undefined8 param_2,undefined1 param_3)

{
  char cVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = (**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (lVar2 == 0) {
    lVar3 = 0;
  }
  else {
    cVar1 = (**(code **)(__got::vtable + 0x1c8))(lVar2,param_1,param_2,0,0);
    lVar3 = 0;
    if (cVar1 != '\0') {
      *(undefined1 *)(lVar2 + 0x68) = param_3;
      lVar3 = lVar2;
    }
  }
  return lVar3;
}



// IGFlushNotifyInterruptEventSource::initWithOptions(IGScheduler*, void (*)(OSObject*,
// IOInterruptEventSource*, int), IGHwCsType)

void __thiscall
IGFlushNotifyInterruptEventSource::initWithOptions
          (IGFlushNotifyInterruptEventSource *this,undefined8 param_1,undefined8 param_2,
          IGFlushNotifyInterruptEventSource param_3)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x1c8))();
  if (cVar1 != '\0') {
    this[0x68] = param_3;
  }
  return;
}



// IGFlushNotifyInterruptEventSource::MetaClass::~MetaClass()

void __thiscall IGFlushNotifyInterruptEventSource::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGFlushNotifyInterruptEventSource_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGFlushNotifyInterruptEventSource::gMetaClass,
             "IGFlushNotifyInterruptEventSource",(OSMetaClass *)__got::gMetaClass,0x70);
  IGFlushNotifyInterruptEventSource::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGFlushNotifyInterruptEventSource::gMetaClass);
  return;
}



// IGGuC::MetaClass::MetaClass()

void __thiscall IGGuC::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGGuC",(OSMetaClass *)&IGScheduler::gMetaClass,0x80b40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGuC::MetaClass::~MetaClass()

void __thiscall IGGuC::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGGuC::IGGuC(OSMetaClass const*)

void __thiscall IGGuC::IGGuC(IGGuC *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGGuC;
  lVar1 = 0;
  do {
    *(undefined8 *)(this + lVar1 + 0x808c0) = 0;
    lVar1 = lVar1 + 0x40;
  } while (lVar1 != 0x140);
  return;
}



// IGGuC::IGGuC(OSMetaClass const*)

void __thiscall IGGuC::IGGuC(IGGuC *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGGuC;
  lVar1 = -0x140;
  do {
    *(undefined8 *)(this + lVar1 + 0x80a00) = 0;
    lVar1 = lVar1 + 0x40;
  } while (lVar1 != 0);
  return;
}



// IGGuC::~IGGuC()

void __thiscall IGGuC::~IGGuC(IGGuC *this)

{
  *(undefined ***)this = &__const::~IGGuC;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGGuC::~IGGuC()

void __thiscall IGGuC::~IGGuC(IGGuC *this)

{
  *(undefined ***)this = &__const::~IGGuC;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGGuC::~IGGuC()

void __thiscall IGGuC::~IGGuC(IGGuC *this)

{
  *(undefined ***)this = &__const::~IGGuC;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  _OSObject_typed_operator_delete(&IGGuC_ktv,this,0x80b40);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::operator delete(void*, unsigned long)

void __cdecl IGGuC::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGGuC_ktv,param_1,param_2);
  return;
}



// IGGuC::getMetaClass() const

undefined8 * IGGuC::getMetaClass(void)

{
  return &gMetaClass;
}



// IGGuC::MetaClass::MetaClass()

void __thiscall IGGuC::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGGuC",(OSMetaClass *)&IGScheduler::gMetaClass,0x80b40);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGGuC::MetaClass::alloc() const

IGGuC * IGGuC::MetaClass::alloc(void)

{
  IGGuC *this;
  
  this = (IGGuC *)_OSObject_typed_operator_new(&IGGuC_ktv,0x80b40);
  IGGuC(this);
  return this;
}



// IGGuC::operator new(unsigned long)

void * __thiscall IGGuC::operator_new(IGGuC *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGGuC_ktv,this);
  return pvVar1;
}



// IGGuC::IGGuC()

void __thiscall IGGuC::IGGuC(IGGuC *this)

{
  IGGuC(this);
  return;
}



// IGGuC::IGGuC()

void __thiscall IGGuC::IGGuC(IGGuC *this)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGGuC;
  lVar1 = 0;
  do {
    *(undefined8 *)(this + lVar1 + 0x808c0) = 0;
    lVar1 = lVar1 + 0x40;
  } while (lVar1 != 0x140);
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::withAccelerator(IOGraphicsAccelerator2*)

IGGuC * __cdecl IGGuC::withAccelerator(long param_1)

{
  IGGuC *this;
  undefined8 uVar1;
  
  this = (IGGuC *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGGuC *)0x0) {
    uVar1 = initWithOptions(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGGuC *)0x0;
}



// IGGuC::initWithOptions(IOGraphicsAccelerator2*)

undefined8 __thiscall IGGuC::initWithOptions(IGGuC *this,long param_1)

{
  undefined *puVar1;
  undefined8 uVar2;
  long lVar3;
  long *plVar4;
  ulong uVar5;
  IGSharedMappedBuffer *pIVar6;
  long lVar7;
  ulong uVar8;
  long lVar9;
  ulong uVar10;
  undefined4 uVar11;
  IntelAccelerator *pIVar12;
  
  puVar1 = __got::_page_size;
  uVar2 = IGScheduler::initWithOptions
                    ((IGScheduler *)this,7,*(undefined8 *)__got::_page_size,param_1);
  if ((char)uVar2 == '\0') {
    pIVar12 = *(IntelAccelerator **)(this + 0x10);
    uVar11 = 0x400;
    goto LAB_00016203;
  }
  lVar3 = IOWorkLoop::workLoop();
  *(long *)(this + 0x458) = lVar3;
  if (lVar3 == 0) {
    pIVar12 = *(IntelAccelerator **)(this + 0x10);
    uVar11 = 0x401;
    goto LAB_00016203;
  }
  lVar3 = _IOLockAlloc();
  *(long *)(this + 0x460) = lVar3;
  if (lVar3 == 0) {
    pIVar12 = *(IntelAccelerator **)(this + 0x10);
    uVar11 = 0x402;
    goto LAB_00016203;
  }
  lVar3 = _IOLockAlloc();
  *(long *)(this + 0x468) = lVar3;
  if (lVar3 == 0) {
    pIVar12 = *(IntelAccelerator **)(this + 0x10);
    uVar11 = 0x403;
    goto LAB_00016203;
  }
  plVar4 = (long *)_IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  *plVar4 = 0;
  plVar4[1] = 0;
  plVar4[2] = 0;
  lVar3 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                     0x200);
  if (lVar3 == 0) {
    lVar3 = *plVar4;
    *(long **)(this + 0x6d8) = plVar4;
    if (lVar3 != 0) goto LAB_00015d01;
  }
  else {
    lVar7 = plVar4[2];
    if (lVar7 != 0) {
      lVar9 = *plVar4;
      if (lVar9 != 0) {
        lVar7 = 0;
        do {
          *(undefined8 *)(lVar3 + lVar7 * 8) = *(undefined8 *)(plVar4[2] + lVar7 * 8);
          lVar7 = lVar7 + 1;
        } while (lVar9 != lVar7);
        lVar7 = plVar4[2];
      }
      lVar9 = plVar4[1] << 3;
      if (lVar9 < 0) {
        lVar9 = -0x8000000000000000;
      }
      if ((ulong)plVar4[1] >> 0x3d != 0) {
        lVar9 = -0x8000000000000000;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGWorkQueueAk**,unsigned_long)::
                          kalloc_type_view_29,lVar7,lVar9);
    }
    plVar4[2] = lVar3;
    lVar3 = 0x40;
    plVar4[1] = 0x40;
    *plVar4 = 0x40;
    *(long **)(this + 0x6d8) = plVar4;
LAB_00015d01:
    lVar7 = 0;
    do {
      *(undefined8 *)(plVar4[2] + lVar7 * 8) = 0;
      lVar7 = lVar7 + 1;
    } while (lVar3 != lVar7);
  }
  ___bzero(this + 0x6e0,0x80000);
  ___bzero(this + 0x806e0,0x100);
  *(undefined4 *)(this + 0x807e0) = 0xffffffff;
  *(undefined4 *)(this + 0x490) = 0;
  this[0x80808] = (IGGuC)0x0;
  *(undefined4 *)(this + 0x5c8) = 0;
  *(undefined2 *)(this + 0x470) = 0;
  ___bzero(this + 0x5cc,0x100);
  uVar5 = *(ulong *)(&DAT_00001340 + *(long *)(this + 0x10));
  if (uVar5 != 0) {
    uVar8 = 0;
    if (uVar5 != 0) {
      for (; (uVar5 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
      }
    }
    do {
      *(undefined4 *)(this + uVar8 * 4 + 0x807e4) = 0x41;
      if (3 < uVar8) break;
      uVar10 = -2L << ((byte)uVar8 & 0x3f) & uVar5;
      uVar8 = 0;
      if (uVar10 != 0) {
        for (; (uVar10 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
        }
      }
    } while (uVar10 != 0);
  }
  lVar3 = 0x201fe;
  do {
    *(undefined4 *)(this + lVar3 * 4) = 0x41;
    lVar3 = lVar3 + 1;
  } while (lVar3 != 0x20202);
  lVar3 = IOInterruptEventSource::interruptEventSource
                    ((OSObject *)this,handleGucToHostInterruptSecondary,(IOService *)0x0,0);
  *(long *)(this + 0x80850) = lVar3;
  if (lVar3 == 0) {
    pIVar12 = *(IntelAccelerator **)(this + 0x10);
    uVar11 = 0x405;
  }
  else {
    (**(code **)(**(long **)(this + 0x458) + 0x140))(*(long **)(this + 0x458),lVar3);
    (**(code **)(**(long **)(this + 0x80850) + 0x150))();
    lVar3 = IOInterruptEventSource::interruptEventSource
                      ((OSObject *)this,handleRetireWorkItemsInterruptSecondary,(IOService *)0x0,0);
    *(long *)(this + 0x80858) = lVar3;
    if (lVar3 == 0) {
      pIVar12 = *(IntelAccelerator **)(this + 0x10);
      uVar11 = 0x406;
    }
    else {
      (**(code **)(**(long **)(this + 0x458) + 0x140))(*(long **)(this + 0x458),lVar3);
      (**(code **)(**(long **)(this + 0x80858) + 0x150))();
      lVar3 = *(long *)(this + 0x10);
      uVar5 = *(ulong *)(&DAT_00001340 + lVar3);
      if (uVar5 != 0) {
        uVar8 = 0;
        if (uVar5 != 0) {
          for (; (uVar5 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
          }
        }
        do {
          lVar7 = IGFlushNotifyInterruptEventSource::withOptions
                            (this,handleFlushNotifyInterruptSecondary,(byte)uVar8);
          *(long *)(this + uVar8 * 8 + 0x80860) = lVar7;
          if (lVar7 == 0) {
            pIVar12 = *(IntelAccelerator **)(this + 0x10);
            uVar11 = 0x407;
            goto LAB_00016203;
          }
          (**(code **)(**(long **)(this + 0x458) + 0x140))(*(long **)(this + 0x458),lVar7);
          (**(code **)(**(long **)(this + uVar8 * 8 + 0x80860) + 0x150))();
          if (3 < uVar8) break;
          uVar5 = -2L << ((byte)uVar8 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar3);
          uVar8 = 0;
          if (uVar5 != 0) {
            for (; (uVar5 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
            }
          }
        } while (uVar5 != 0);
        lVar3 = *(long *)(this + 0x10);
      }
      pIVar6 = IGSharedMappedBuffer::withOptions(*(long *)(lVar3 + 0x150),*(ulonglong *)puVar1,2,0);
      *(IGSharedMappedBuffer **)(this + 0x5c0) = pIVar6;
      if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
        pIVar12 = *(IntelAccelerator **)(this + 0x10);
        uVar11 = 0x408;
      }
      else {
        pIVar6 = IGSharedMappedBuffer::withOptions
                           (*(long *)(*(long *)(this + 0x10) + 0x150),*(long *)puVar1 * 3,2,0);
        *(IGSharedMappedBuffer **)(this + 0x6d0) = pIVar6;
        if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
          pIVar12 = *(IntelAccelerator **)(this + 0x10);
          uVar11 = 0x409;
        }
        else {
          pIVar6 = IGSharedMappedBuffer::withOptions
                             (*(long *)(*(long *)(this + 0x10) + 0x150),*(ulonglong *)puVar1,2,0);
          *(IGSharedMappedBuffer **)(this + 0x80810) = pIVar6;
          if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
            pIVar12 = *(IntelAccelerator **)(this + 0x10);
            uVar11 = 0x40a;
          }
          else {
            uVar2 = IGSharedMappedBuffer::getVirtualAddress(pIVar6);
            *(undefined8 *)(this + 0x478) = uVar2;
            pIVar6 = IGSharedMappedBuffer::withOptions
                               (*(long *)(*(long *)(this + 0x10) + 0x150),*(long *)puVar1 << 9,2,0);
            *(IGSharedMappedBuffer **)(this + 0x80818) = pIVar6;
            if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
              pIVar12 = *(IntelAccelerator **)(this + 0x10);
              uVar11 = 0x40b;
            }
            else {
              pIVar6 = IGSharedMappedBuffer::withOptions
                                 (*(long *)(*(long *)(this + 0x10) + 0x150),*(long *)puVar1 << 9,2,0
                                 );
              *(IGSharedMappedBuffer **)(this + 0x80820) = pIVar6;
              if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
                pIVar12 = *(IntelAccelerator **)(this + 0x10);
                uVar11 = 0x40c;
              }
              else {
                pIVar6 = IGSharedMappedBuffer::withOptions
                                   (*(long *)(*(long *)(this + 0x10) + 0x150),*(long *)puVar1 << 2,2
                                    ,0);
                *(IGSharedMappedBuffer **)(this + 0x80828) = pIVar6;
                if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
                  pIVar12 = *(IntelAccelerator **)(this + 0x10);
                  uVar11 = 0x40d;
                }
                else {
                  pIVar6 = IGSharedMappedBuffer::withOptions
                                     (*(long *)(*(long *)(this + 0x10) + 0x150),*(long *)puVar1 << 3
                                      ,2,0);
                  *(IGSharedMappedBuffer **)(this + 0x80830) = pIVar6;
                  if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
                    pIVar12 = *(IntelAccelerator **)(this + 0x10);
                    uVar11 = 0x40e;
                  }
                  else {
                    pIVar6 = IGSharedMappedBuffer::withOptions
                                       (*(long *)(*(long *)(this + 0x10) + 0x150),
                                        *(long *)puVar1 << 2,2,0);
                    *(IGSharedMappedBuffer **)(this + 0x80838) = pIVar6;
                    if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
                      pIVar12 = *(IntelAccelerator **)(this + 0x10);
                      uVar11 = 0x40f;
                    }
                    else {
                      pIVar6 = IGSharedMappedBuffer::withOptions
                                         (*(long *)(*(long *)(this + 0x10) + 0x150),
                                          *(long *)puVar1 * 0x4c,2,0);
                      *(IGSharedMappedBuffer **)(this + 0x80840) = pIVar6;
                      pIVar12 = *(IntelAccelerator **)(this + 0x10);
                      if (pIVar6 == (IGSharedMappedBuffer *)0x0) {
                        uVar11 = 0x410;
                      }
                      else {
                        IGInterruptBridge::requestEnableCallback
                                  (*(IGInterruptBridge **)(pIVar12 + 0x1278),(long *)this,
                                   registerForInterrupts);
                        *(undefined8 *)(this + 0x808b0) = 0;
                        *(undefined8 *)(this + 0x808a8) = 0;
                        *(undefined8 *)(this + 0x808a0) = 0;
                        *(undefined8 *)(this + 0x80898) = 0;
                        *(undefined8 *)(this + 0x80890) = 0;
                        *(undefined8 *)(this + 0x80b00) = 0;
                        *(undefined8 *)(this + 0x80b08) = 0;
                        *(undefined8 *)(this + 0x80b10) = 0;
                        *(undefined8 *)(this + 0x80b18) = 0;
                        *(undefined8 *)(this + 0x80b20) = 0;
                        ___bzero(this + 0x80a00,0x100);
                        lVar3 = *(long *)(this + 0x10);
                        uVar5 = *(ulong *)(&DAT_00001340 + lVar3);
                        if (uVar5 != 0) {
                          uVar8 = 0;
                          if (uVar5 != 0) {
                            for (; (uVar5 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
                            }
                          }
                          do {
                            *(undefined8 *)(this + uVar8 * 0x40 + 0x808c0) = 0;
                            if (3 < uVar8) break;
                            uVar5 = -2L << ((byte)uVar8 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar3);
                            uVar8 = 0;
                            if (uVar5 != 0) {
                              for (; (uVar5 >> uVar8 & 1) == 0; uVar8 = uVar8 + 1) {
                              }
                            }
                          } while (uVar5 != 0);
                        }
                        lVar3 = _IOLockAlloc();
                        *(long *)(this + 0x80888) = lVar3;
                        pIVar12 = *(IntelAccelerator **)(this + 0x10);
                        if (lVar3 != 0) {
                          IntelAccelerator::SafeForceWake(pIVar12,1,7);
                          pIVar12 = *(IntelAccelerator **)(this + 0x10);
                          *(undefined4 *)(*(long *)(pIVar12 + 0x1270) + 0x20d4) = 0x80008000;
                          uVar2 = IntelAccelerator::SafeForceWake(pIVar12,0,7);
                          return CONCAT71((int7)((ulong)uVar2 >> 8),1);
                        }
                        uVar11 = 0x411;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
LAB_00016203:
  IntelAccelerator::encodeFailureStack(pIVar12,uVar11);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::canLoadFirmware(IOGraphicsAccelerator2*)

ulong __cdecl IGGuC::canLoadFirmware(IntelAccelerator *param_1)

{
  uint uVar1;
  long lVar2;
  bool bVar3;
  long lVar4;
  undefined8 unaff_R12;
  undefined *puVar5;
  int iVar6;
  char *fmt;
  
  if (((byte)param_1[0x11c0] & 0x20) == 0) {
    IntelAccelerator::SafeForceWake(param_1,1,7);
    if ((~*(uint *)(*(long *)(param_1 + 0x1270) + 0xc068) & 3) != 0) {
      uVar1 = *(uint *)(*(long *)(param_1 + 0x1270) + 0xa008);
      changeFrequencyWait((long)param_1,0x3018000);
      bVar3 = writeRegAndPoll((long)param_1,0x941c,8,0x941c,8,0);
      fmt = "[IGPU] IG:canLoadFirmware: Failed to reset firmware controller\n";
      if (bVar3) {
        bVar3 = writeRegAndPoll((long)param_1,0xc0f8,2,0xc0f4,1,1);
        if (bVar3) {
          if ((~*(uint *)(*(long *)(param_1 + 0x1270) + 0x90e0) & 3) == 0) {
            bVar3 = writeRegAndPoll((long)param_1,0x941c,8,0x941c,8,0);
            if (bVar3) {
              bVar3 = writeRegAndPoll((long)param_1,0xc0f8,0,0xc0f4,1,1);
              if (bVar3) {
                iVar6 = -0x5dc;
                fmt = "[IGPU] IG:canLoadFirmware: Failed to get full signature injected\n";
                do {
                  lVar2 = *(long *)(param_1 + 0x1270);
                  if (*(int *)(lVar2 + 0xc0f4) == 0x1ff) {
                    lVar4 = 0;
                    fmt = "[IGPU] IG:canLoadFirmware: Injected signature is all 0\'s\n";
                    goto LAB_000163c3;
                  }
                  _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
                  _thread_block(0);
                  iVar6 = iVar6 + 1;
                } while (iVar6 != 0);
              }
              else {
                fmt = "[IGPU] IG:canLoadFirmware: Failed to get signature injected\n";
              }
            }
          }
          else {
            fmt = "[IGPU] IG:canLoadFirmware: WOPCM not enabled\n";
          }
        }
        else {
          fmt = "[IGPU] IG:canLoadFirmware: Failed to wakeup ME\n";
        }
      }
      goto LAB_00016450;
    }
    IntelAccelerator::SafeForceWake(param_1,0,7);
  }
  else {
    fCanUseSpringboard = 0;
  }
  puVar5 = (undefined *)CONCAT71((int7)((ulong)unaff_R12 >> 8),1);
  goto LAB_00016481;
  while (lVar4 = lVar4 + 4, lVar4 != 0x20) {
LAB_000163c3:
    if (*(int *)(lVar2 + 0xc0d0 + lVar4) != 0) {
      if (lVar4 != 0x20) {
        lVar4 = 0;
        goto LAB_000163e8;
      }
      break;
    }
  }
LAB_00016450:
  puVar5 = (undefined *)0x0;
  _IOLog(fmt);
  _kprintf(fmt);
  goto LAB_00016467;
  while (lVar4 = lVar4 + 4, lVar4 != 0x20) {
LAB_000163e8:
    if (*(int *)(lVar2 + 0xc0d0 + lVar4) != *(int *)((long)&kSpringboardHash + lVar4)) {
      _IOLog("[IGPU] IG:canLoadFirmware: Signature isn\'t SB sig, disallowing Springboard\n");
      _kprintf("[IGPU] IG:canLoadFirmware: Signature isn\'t SB sig, disallowing Springboard\n");
      fCanUseSpringboard = 0;
      break;
    }
  }
  bVar3 = writeRegAndPoll((long)param_1,0x941c,8,0x941c,8,0);
  puVar5 = &DAT_00137201;
  if (!bVar3) {
    fmt = 
    "[IGPU] IG:canLoadFirmware: Failed to reset firmware controller after signature injection\n";
    goto LAB_00016450;
  }
LAB_00016467:
  changeFrequencyWait((long)param_1,(ulong)uVar1);
  IntelAccelerator::SafeForceWake(param_1,0,7);
LAB_00016481:
  return (ulong)puVar5 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// changeFrequencyWait(IntelAccelerator*, unsigned int)

void __cdecl changeFrequencyWait(long param_1,ulong param_2)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  
  if (((&DAT_000011c0)[param_1] & 0x20) == 0) {
    lVar2 = *(long *)(&DAT_00001270 + param_1);
    *(int *)(lVar2 + 0xa008) = (int)param_2;
    uVar3 = (uint)(param_2 >> 0x17) & 0x1ff;
    if ((*(uint *)((long)&nlist_00145948.n_strx + lVar2) >> 0xb & 0x1ff) != uVar3) {
      iVar4 = -0x1f;
      do {
        iVar4 = iVar4 + 1;
        if (iVar4 == 0) {
          _IOLog("[IGPU] IG: warning: changeFrequencyWait did not complete!\n");
          _kprintf("[IGPU] IG: warning: changeFrequencyWait did not complete!\n");
          return;
        }
        uVar1 = *(uint *)((long)&nlist_00145948.n_strx + *(long *)(&DAT_00001270 + param_1));
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,5,1000);
        _thread_block(0);
      } while ((uVar1 >> 0xb & 0x1ff) != uVar3);
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::writeRegAndPoll(IntelAccelerator*, unsigned int, unsigned int, unsigned int, unsigned int,
// unsigned int, char const*)

bool __cdecl
IGGuC::writeRegAndPoll
          (long param_1,ulong param_2,undefined4 param_3,uint param_4,uint param_5,uint param_6)

{
  int iVar1;
  uint uVar2;
  
  *(undefined4 *)(*(long *)(&DAT_00001270 + param_1) + (param_2 & 0xffffffff)) = param_3;
  iVar1 = -0x5dc;
  do {
    uVar2 = *(uint *)(*(long *)(&DAT_00001270 + param_1) + (ulong)param_4) & param_5;
    if (uVar2 == param_6) break;
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
    _thread_block(0);
    iVar1 = iVar1 + 1;
  } while (iVar1 != 0);
  return uVar2 == param_6;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleGucToHostInterruptSecondary(IOInterruptEventSource*, int)

void __cdecl IGGuC::handleGucToHostInterruptSecondary(IGGuC *param_1)

{
  uint uVar1;
  
  IntelAccelerator::encodeDebugInfo(*(IntelAccelerator **)(param_1 + 0x10),7);
  uVar1 = IntelAccelerator::SafeReadRegister32
                    (*(IntelAccelerator **)(param_1 + 0x10),(undefined *)0xc1bc);
  if ((uVar1 & 8) == 0) {
    if ((uVar1 & 4) != 0) {
      reportAssertionFailure(param_1);
    }
    if ((uVar1 & 0x20) != 0) {
      logPrintf(param_1);
    }
    if ((uVar1 & 0x40) != 0) {
      logProcess(param_1);
    }
    if ((uVar1 & 2) != 0) {
      handleGucToHostInterruptSecondary((long)param_1);
    }
  }
  else {
    handleGucToHostInterruptSecondary((undefined8 *)(param_1 + 0x10),param_1);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleRetireWorkItemsInterruptSecondary(IOInterruptEventSource*, int)

void __cdecl IGGuC::handleRetireWorkItemsInterruptSecondary(IGGuC *param_1)

{
  processRetiredWorkQueueItems(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleFlushNotifyInterruptSecondary(IOInterruptEventSource*, int)

void __cdecl IGGuC::handleFlushNotifyInterruptSecondary(long param_1,long param_2)

{
  IntelAccelerator *this;
  uint uVar1;
  long lVar2;
  ulong uVar3;
  ulong *puVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  ulong local_c0 [13];
  long local_58;
  
  puVar4 = local_c0;
  local_58 = *(long *)__got::___stack_chk_guard;
  this = *(IntelAccelerator **)(param_1 + 0x10);
  if (((byte)this[0x11c4] & 0x80) == 0) {
    puVar4 = (ulong *)(param_1 + (ulong)(byte)(&kIGHwCsDesc)
                                              [(ulong)*(byte *)(param_2 + 0x68) * 0x79] * 0x40 +
                      0x808c0);
  }
  else {
    lVar2 = (ulong)*(byte *)(param_2 + 0x68) * 0x79;
    uVar3 = (ulong)*(int *)(&DAT_00121bd1 + lVar2);
    local_c0[0] = 0;
    uVar5 = (long)*(int *)(&DAT_00121bc9 + lVar2);
    do {
      uVar1 = (uint)uVar5 & 0x3f;
      uVar6 = 0x40 - (ulong)uVar1;
      if (uVar3 < uVar6) {
        uVar6 = uVar3;
      }
      lVar2 = uVar6 + uVar1;
      uVar7 = ~(-1L << ((byte)lVar2 & 0x3f));
      if (lVar2 == 0x40) {
        uVar7 = 0xffffffffffffffff;
      }
      local_c0[uVar5 >> 6] = local_c0[uVar5 >> 6] | (uVar7 >> (sbyte)uVar1) << (sbyte)uVar1;
      uVar3 = uVar3 - uVar6;
      uVar5 = uVar6 + uVar5;
    } while (uVar3 != 0);
  }
  IntelAccelerator::signalStampUpdate(this,puVar4);
  if (*(long *)__got::___stack_chk_guard != local_58) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGGuC::initSharedMappedBuffer(IGSharedMappedBuffer**, unsigned long)

bool __thiscall IGGuC::initSharedMappedBuffer(IGGuC *this,undefined8 *param_1,long param_2)

{
  IGSharedMappedBuffer *pIVar1;
  
  pIVar1 = IGSharedMappedBuffer::withOptions
                     (*(long *)(*(long *)(this + 0x10) + 0x150),param_2 * *(long *)__got::_page_size
                      ,2,0);
  *param_1 = pIVar1;
  return pIVar1 != (IGSharedMappedBuffer *)0x0;
}



// IGGuC::registerForInterrupts()

void __thiscall IGGuC::registerForInterrupts(IGGuC *this)

{
  int iVar1;
  IGInterruptBridge *this_00;
  long lVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  
  this_00 = *(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10));
  IGInterruptBridge::registerForInterruptType
            (this_00,0x69676968,handleGucToHostInterrupt,this,0,(undefined8 *)(this + 0x80848));
  lVar2 = *(long *)(this + 0x10);
  uVar4 = *(ulong *)(&DAT_00001340 + lVar2);
  if (uVar4 != 0) {
    uVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
      }
    }
    do {
      lVar3 = uVar5 * 0x79;
      iVar1 = *(int *)(&DAT_00121bdd + lVar3);
      IGInterruptBridge::registerForInterruptType
                (this_00,*(int *)(&DAT_00121bd9 + lVar3),handleHardwareFlushNotifyInterrupt,this,
                 &kIGHwCsDesc + lVar3,(undefined8 *)(this + uVar5 * 8 + 0x80890));
      IGInterruptBridge::registerForInterruptType
                (this_00,iVar1,handleHardwareErrorInterrupt,this,&kIGHwCsDesc + lVar3,
                 (undefined8 *)(this + uVar5 * 8 + 0x80b00));
      if (3 < uVar5) {
        return;
      }
      uVar4 = -2L << ((byte)uVar5 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar2);
      uVar5 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
        }
      }
    } while (uVar4 != 0);
  }
  return;
}



// IGGuC::free()

void __thiscall IGGuC::free(IGGuC *this,void *param_1)

{
  ulong uVar1;
  long lVar2;
  void *pvVar3;
  void *pvVar4;
  ulong uVar5;
  
  IntelAccelerator::transferOwnership(*(long *)(this + 0x10),*(IGMappedBuffer **)(this + 0x6d0));
  IntelAccelerator::transferOwnership(*(long *)(this + 0x10),*(IGMappedBuffer **)(this + 0x5c0));
  this[0x471] = (IGGuC)0x0;
  if (*(long *)(this + 0x80848) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(long *)(this + 0x80848));
    *(undefined8 *)(this + 0x80848) = 0;
  }
  lVar2 = *(long *)(this + 0x10);
  uVar1 = *(ulong *)(&DAT_00001340 + lVar2);
  if (uVar1 != 0) {
    uVar5 = 0;
    if (uVar1 != 0) {
      for (; (uVar1 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
      }
    }
    do {
      if (*(long *)(this + uVar5 * 8 + 0x80890) != 0) {
        IGInterruptBridge::unregisterInterrupt
                  (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                   *(long *)(this + uVar5 * 8 + 0x80890));
        *(undefined8 *)(this + uVar5 * 8 + 0x80890) = 0;
      }
      if (*(long *)(this + uVar5 * 8 + 0x80b00) != 0) {
        IGInterruptBridge::unregisterInterrupt
                  (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                   *(long *)(this + uVar5 * 8 + 0x80b00));
        *(undefined8 *)(this + uVar5 * 8 + 0x80b00) = 0;
      }
      if (*(long *)(this + uVar5 * 8 + 0x80860) != 0) {
        (**(code **)(**(long **)(this + 0x458) + 0x148))();
        (**(code **)(**(long **)(this + uVar5 * 8 + 0x80860) + 0x28))();
        *(undefined8 *)(this + uVar5 * 8 + 0x80860) = 0;
      }
      if (3 < uVar5) break;
      uVar1 = -2L << ((byte)uVar5 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar2);
      uVar5 = 0;
      if (uVar1 != 0) {
        for (; (uVar1 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
        }
      }
    } while (uVar1 != 0);
  }
  if (*(long *)(this + 0x80888) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x80888) = 0;
  }
  if (*(long *)(this + 0x80858) != 0) {
    (**(code **)(**(long **)(this + 0x458) + 0x148))();
    (**(code **)(**(long **)(this + 0x80858) + 0x28))();
    *(undefined8 *)(this + 0x80858) = 0;
  }
  pvVar3 = *(void **)(this + 0x80850);
  if (pvVar3 != (void *)0x0) {
    (**(code **)(**(long **)(this + 0x458) + 0x148))();
    (**(code **)(**(long **)(this + 0x80850) + 0x28))();
    *(undefined8 *)(this + 0x80850) = 0;
  }
  if (*(long **)(this + 0x80840) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80840) + 0x28))();
  }
  *(undefined8 *)(this + 0x80840) = 0;
  if (*(long **)(this + 0x80838) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80838) + 0x28))();
  }
  *(undefined8 *)(this + 0x80838) = 0;
  if (*(long **)(this + 0x80818) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80818) + 0x28))();
  }
  *(undefined8 *)(this + 0x80818) = 0;
  if (*(long **)(this + 0x80830) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80830) + 0x28))();
  }
  *(undefined8 *)(this + 0x80830) = 0;
  if (*(long **)(this + 0x80820) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80820) + 0x28))();
  }
  *(undefined8 *)(this + 0x80820) = 0;
  if (*(long **)(this + 0x80828) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80828) + 0x28))();
  }
  *(undefined8 *)(this + 0x80828) = 0;
  if (*(long **)(this + 0x80810) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80810) + 0x28))();
  }
  *(undefined8 *)(this + 0x80810) = 0;
  if (*(long **)(this + 0x6d0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x6d0) + 0x28))();
  }
  *(undefined8 *)(this + 0x6d0) = 0;
  if (*(long **)(this + 0x5c0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x5c0) + 0x28))();
  }
  *(undefined8 *)(this + 0x5c0) = 0;
  pvVar4 = *(void **)(this + 0x6d8);
  if (pvVar4 != (void *)0x0) {
    if (*(long *)((long)pvVar4 + 0x10) != 0) {
      lVar2 = *(ulong *)((long)pvVar4 + 8) << 3;
      if (lVar2 < 0) {
        lVar2 = -0x8000000000000000;
      }
      if (*(ulong *)((long)pvVar4 + 8) >> 0x3d != 0) {
        lVar2 = -0x8000000000000000;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGWorkQueueAk**,unsigned_long)::
                          kalloc_type_view_29,*(long *)((long)pvVar4 + 0x10),lVar2);
    }
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19);
    *(undefined8 *)(this + 0x6d8) = 0;
    pvVar3 = pvVar4;
  }
  if (*(long *)(this + 0x460) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x460) = 0;
  }
  if (*(long *)(this + 0x468) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x468) = 0;
  }
  if (*(long **)(this + 0x458) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x458) + 0x28))();
  }
  *(undefined8 *)(this + 0x458) = 0;
  IGScheduler::free((IGScheduler *)this,pvVar3);
  return;
}



// IGGuC::initSharedPrivateData(IGHardwareContext*)

void __thiscall IGGuC::initSharedPrivateData(IGGuC *this,long param_1)

{
  ulong *puVar1;
  long lVar2;
  
  puVar1 = (ulong *)IGSharedMappedBuffer::getVirtualAddress
                              (*(IGSharedMappedBuffer **)(param_1 + 0xa0));
  *puVar1 = (ulong)*(uint *)(param_1 + 0x7c);
  lVar2 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(param_1 + 0x98));
  puVar1[2] = lVar2 + 0x1000;
  puVar1[1] = *(ulong *)(param_1 + 0x89);
  *(undefined4 *)(puVar1 + 3) = *(undefined4 *)(*(long *)(param_1 + 0xb0) + 0x20);
  *(undefined1 *)((long)puVar1 + 0x2c) = *(undefined1 *)(param_1 + 0x78);
  *(byte *)((long)puVar1 + 0x2d) =
       *(byte *)((long)puVar1 + 0x2d) & 0xfe |
       (byte)(*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x1a) & 1;
  invalidateTLB(this);
  return;
}



// IGGuC::invalidateTLB() const

void __thiscall IGGuC::invalidateTLB(IGGuC *this)

{
  IntelAccelerator *this_00;
  long lVar1;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar1 = *(long *)(this_00 + 0x1270);
  *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar1 + 6) = 1;
  do {
  } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar1 + 6) & 1) != 0);
  IntelAccelerator::SafeForceWake(this_00,0,4);
  return;
}



// IGGuC::updateSharedPrivateData(IGHardwareContext*)

void __thiscall IGGuC::updateSharedPrivateData(IGGuC *this,long param_1)

{
  long lVar1;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_1 + 0xa0));
  *(undefined4 *)(lVar1 + 0x18) = *(undefined4 *)(*(long *)(param_1 + 0xb0) + 0x20);
  *(undefined1 *)(lVar1 + 0x2c) = *(undefined1 *)(param_1 + 0x78);
  invalidateTLB(this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::cleanupSharedPrivateData(IGHardwareContext*)

void __cdecl IGGuC::cleanupSharedPrivateData(IGGuC *param_1)

{
  invalidateTLB(param_1);
  return;
}



// IGGuC::loadFirmware()

ulong __thiscall IGGuC::loadFirmware(IGGuC *this)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  ulong unaff_R12;
  
  lVar2 = *(long *)(this + 0x10);
  uVar1 = *(uint *)(*(long *)(&DAT_00001270 + lVar2) + 0xa008);
  changeFrequencyWait(lVar2,0x3018000);
  uVar3 = IntelAccelerator::SafeReadRegister32
                    (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc000);
  if ((uVar3 & 0xc0000000) == 0x80000000) {
    this[0x471] = (IGGuC)0x1;
  }
  else {
    unaff_R12 = 0;
    uVar4 = loadBinary(this,0);
    if ((char)uVar4 == '\0') goto LAB_00016d74;
  }
  changeFrequencyWait(lVar2,(ulong)uVar1);
  unaff_R12 = CONCAT71((int7)(unaff_R12 >> 8),1);
LAB_00016d74:
  return unaff_R12 & 0xffffffff;
}



// IGGuC::isAuthenticated()

undefined4 __thiscall IGGuC::isAuthenticated(IGGuC *this)

{
  uint uVar1;
  
  uVar1 = IntelAccelerator::SafeReadRegister32
                    (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc000);
  return CONCAT31((int3)((uVar1 & 0xc0000000) >> 8),(uVar1 & 0xc0000000) == 0x80000000);
}



// IGGuC::loadBinary(bool)

ulong __thiscall IGGuC::loadBinary(IGGuC *this,uint param_1)

{
  IGGuC *pIVar1;
  code *pcVar2;
  undefined *puVar3;
  bool bVar4;
  int iVar5;
  uint uVar6;
  undefined4 uVar7;
  uint uVar8;
  undefined8 uVar9;
  void *pvVar10;
  IGSharedMappedBuffer *pIVar11;
  IGSharedMappedBuffer *pIVar12;
  long lVar13;
  ulong uVar14;
  undefined4 *puVar15;
  long lVar16;
  undefined4 uVar17;
  ulong uVar18;
  IGMappedBuffer *pIVar19;
  char *pcVar20;
  uint param2;
  ulong local_118 [2];
  undefined4 local_108;
  uint uStack_104;
  undefined8 local_100;
  ulong local_f8;
  ulong local_f0;
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  ulong local_98;
  ulong local_90;
  undefined4 *local_88;
  undefined4 *local_80;
  IGSharedMappedBuffer *local_78;
  undefined8 local_70;
  IGSharedMappedBuffer *local_68;
  IGSharedMappedBuffer *local_60;
  undefined4 *local_58;
  IGSharedMappedBuffer *local_50;
  int local_48;
  uint local_44;
  uint local_40;
  uint local_3c;
  uint local_38;
  uint local_34;
  
  pIVar1 = this + 0x10;
  local_a0 = 0;
  local_a8 = 0;
  local_b0 = 0;
  local_b8 = 0;
  local_c0 = 0;
  local_c8 = 0;
  local_d0 = 0;
  local_d8 = 0;
  local_e0 = 0;
  local_e8 = 0;
  local_f0 = 0;
  local_f8 = 0;
  local_100 = 0;
  _local_108 = 0;
  local_118[1] = 0;
  local_118[0] = 0;
  pcVar2 = *(code **)(*(long *)(*(long *)(this + 0x10) + 0xdf8) + 0x48);
  local_34 = param_1;
  uVar9 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80838));
  iVar5 = (*pcVar2)(uVar9,local_118);
  if (iVar5 != 0) {
    local_118[0] = local_118[0] & 0x3fffffffffff | 0x884400000000001;
    _local_108 = CONCAT44((*(uint *)(&DAT_00001154 + *(long *)pIVar1) & 0xff) << 8 |
                          uStack_104 & 0xffff00f8 | *(uint *)(&DAT_00001150 + *(long *)pIVar1) & 7,
                          local_108);
    local_f8 = local_f8 & 0xfffffffffffff00f | 0x500;
    local_f0 = local_f0 & 0xfffffffffffff00f | 0x3c0;
    local_e8 = CONCAT44(local_e8._4_4_,40000);
  }
  pvVar10 = (void *)IGSharedMappedBuffer::getVirtualAddress
                              (*(IGSharedMappedBuffer **)(this + 0x80838));
  _memcpy(pvVar10,local_118,0x80);
  if ((char)local_34 == '\0') {
    initGucCtrl(this,*(uint **)(this + 0x478));
  }
  puVar3 = __got::_page_shift;
  pIVar11 = IGSharedMappedBuffer::withOptions
                      (*(long *)(*(long *)pIVar1 + 0x150),
                       (0x10000UL >> (*__got::_page_shift & 0x3f)) * *(long *)__got::_page_size,2,0)
  ;
  if (pIVar11 == (IGSharedMappedBuffer *)0x0) {
    if ((char)local_34 != '\0') {
      loadBinary();
      return 0;
    }
    uVar14 = 0;
    goto LAB_00017912;
  }
  pvVar10 = (void *)IGSharedMappedBuffer::getVirtualAddress(pIVar11);
  _memcpy(pvVar10,&DAT_0009aab0,0xf500);
  local_58 = (undefined4 *)IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)pIVar11);
  if (fCanUseSpringboard == '\0') {
    local_70 = 0;
    local_60 = (IGSharedMappedBuffer *)0x0;
    local_88 = (undefined4 *)0x0;
    local_68 = (IGSharedMappedBuffer *)0x0;
    local_50 = pIVar11;
LAB_000170a6:
    uVar14 = (ulong)_guc_public_key_bin_len;
    pIVar11 = IGSharedMappedBuffer::withOptions
                        (*(long *)(*(long *)pIVar1 + 0x150),
                         ((uVar14 + 0xfff & 0xfffffffffffff000) >> (*puVar3 & 0x3f)) *
                         *(long *)__got::_page_size,2,0);
    if (pIVar11 == (IGSharedMappedBuffer *)0x0) {
      if ((char)local_34 != '\0') {
        loadBinary();
        return 0;
      }
      uVar14 = 0;
      pIVar11 = local_50;
    }
    else {
      pvVar10 = (void *)IGSharedMappedBuffer::getVirtualAddress(pIVar11);
      _memcpy(pvVar10,&_guc_public_key_bin,uVar14);
      local_78 = pIVar11;
      local_80 = (undefined4 *)IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)pIVar11);
LAB_00017118:
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)pIVar1,1,7);
      lVar16 = *(long *)(&DAT_00001270 + *(long *)pIVar1);
      if (((*(ushort *)(&DAT_000011c0 + *(long *)pIVar1) & 0x1020) == 0) &&
         ((short)*(uint *)(lVar16 + 0xa188) == 0)) {
                    // WARNING: Subroutine does not return
        _panic("\"GT should be out of RC6, but FORCEWAKE_MULTITHREADED register [15:0] = 0, full register = 0x%x\\n\" @%s:%d"
               ,(ulong)*(uint *)(lVar16 + 0xa188),"IGGuC.cpp",0x6be);
      }
      local_44 = *(uint *)(lVar16 + 0xc068) & 3;
      local_38 = *(uint *)(lVar16 + 0xa008);
      *(undefined4 *)(this + 0x490) = 0;
      uVar6 = 0x32;
      local_48 = 0;
      local_3c = 0;
      uVar8 = 0;
      do {
        lVar16 = *(long *)pIVar1;
        if ((((&DAT_000011c0)[lVar16] & 0x20) == 0) && (local_44 != 3)) {
          LogGuCLoadRetry(this,"Begin Gfx firmware load process",(uVar8 - uVar6) + 0x32);
          bVar4 = writeRegAndPoll(*(long *)(this + 0x10),0x941c,8,0x941c,8,0);
          if (bVar4) {
            bVar4 = writeRegAndPoll(*(long *)pIVar1,0xc0f8,2,0xc0f4,1,1);
            if (bVar4) {
              bVar4 = writeRegAndPoll(*(long *)pIVar1,0x941c,8,0x941c,8,0);
              if (bVar4) {
                lVar16 = *(long *)pIVar1;
                goto LAB_0001723c;
              }
              _IOLog("[IGPU] Failed to reset the graphics firmware.\n");
              _kprintf("[IGPU] Failed to reset the graphics firmware.\n");
              if (uVar6 - 1 == 0) {
                changeFrequencyWait(*(long *)pIVar1,(ulong)local_38);
                if ((char)local_34 != '\0') {
                  loadBinary(this);
                  return 0;
                }
                goto LAB_000178c6;
              }
              iVar5 = 0x33 - uVar6;
              pcVar20 = "Failed to reset the Gfx firmware";
              uVar6 = uVar6 - 1;
            }
            else {
              _IOLog("[IGPU] Failed to wake the ME.\n");
              _kprintf("[IGPU] Failed to wake the ME.\n");
              if (uVar6 - 1 == 0) {
                loadBinary((long *)pIVar1,(ulong)local_38,this,local_34 & 0xff);
                return 0;
              }
              iVar5 = 0x33 - uVar6;
              pcVar20 = "Failed to wake the ME";
              uVar6 = uVar6 - 1;
            }
          }
          else {
            _IOLog("[IGPU] Failed to reset the graphics firmware.\n");
            _kprintf("[IGPU] Failed to reset the graphics firmware.\n");
            if (uVar6 - 1 == 0) {
              changeFrequencyWait(*(long *)pIVar1,(ulong)local_38);
              if ((char)local_34 != '\0') {
                loadBinary(this);
                return 0;
              }
              goto LAB_000178c6;
            }
            iVar5 = 0x33 - uVar6;
            pcVar20 = "Failed to reset the Gfx firmware!";
            uVar6 = uVar6 - 1;
          }
LAB_000176ab:
          LogGuCLoadRetry(this,pcVar20,iVar5);
        }
        else {
LAB_0001723c:
          local_40 = uVar6;
          IntelAccelerator::transferOwnership(lVar16,*(IGMappedBuffer **)(this + 0x5c0));
          pIVar19 = *(IGMappedBuffer **)(this + 0x6d0);
          IntelAccelerator::transferOwnership(*(long *)(this + 0x10),pIVar19);
          lVar16 = *(long *)(this + 0x10);
          uVar14 = *(ulong *)(&DAT_00001340 + lVar16);
          if (uVar14 != 0) {
            uVar18 = 0;
            if (uVar14 != 0) {
              for (; (uVar14 >> uVar18 & 1) == 0; uVar18 = uVar18 + 1) {
              }
            }
            do {
              lVar13 = IGSharedMappedBuffer::getVirtualAddress
                                 (*(IGSharedMappedBuffer **)(this + 0x5c0));
              *(undefined8 *)(uVar18 * 0x40 + lVar13) = 1;
              if (3 < uVar18) break;
              uVar14 = -2L << ((byte)uVar18 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar16);
              uVar18 = 0;
              if (uVar14 != 0) {
                for (; (uVar14 >> uVar18 & 1) == 0; uVar18 = uVar18 + 1) {
                }
              }
            } while (uVar14 != 0);
            lVar16 = *(long *)pIVar1;
          }
          if ((((&DAT_000011c0)[lVar16] & 0x20) == 0) && (local_44 != 3)) {
            pIVar19 = (IGMappedBuffer *)0xc0f8;
            bVar4 = writeRegAndPoll(lVar16,0xc0f8,0,0xc0f4,1,1);
            if (!bVar4) {
              _IOLog("[IGPU] Failed to get public key hash injected\n");
              _kprintf("[IGPU] Failed to get public key hash injected\n");
              if (local_40 - 1 != 0) {
                iVar5 = 0x33 - local_40;
                pcVar20 = "Failed to get public key hash injected";
                uVar6 = local_40 - 1;
                goto LAB_000176ab;
              }
              changeFrequencyWait(*(long *)pIVar1,(ulong)local_38);
              if ((char)local_34 != '\0') {
                loadBinary(this);
                return 0;
              }
LAB_000178c6:
              uVar14 = 0;
              IntelAccelerator::SafeForceWake(*(IntelAccelerator **)pIVar1,0,7);
              goto LAB_000178d8;
            }
            iVar5 = -0x5dc;
            do {
              lVar16 = *(long *)pIVar1;
              lVar13 = *(long *)(&DAT_00001270 + lVar16);
              uVar8 = *(uint *)(lVar13 + 0xc0f4);
              if (uVar8 == 0x1ff) {
                if ((local_3c & 1) != 0) {
                  *(int *)(this + 0x490) = local_48;
                  local_3c = 0;
                }
                goto LAB_0001747e;
              }
              pIVar19 = (IGMappedBuffer *)0x0;
              _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000);
              _thread_block(0);
              iVar5 = iVar5 + 1;
            } while (iVar5 != 0);
            lVar16 = 0;
            do {
              lVar16 = lVar16 + 4;
            } while (lVar16 != 0x20);
            changeFrequencyWait(*(long *)pIVar1,(ulong)local_38);
            iVar5 = *(int *)(this + 0x490);
            if ((local_3c & 1) == 0) {
              *(undefined4 *)(this + 0x490) = 1;
              local_3c = (uint)CONCAT71((int7)((ulong)lVar16 >> 8),1);
              uVar6 = 1;
              local_48 = iVar5;
            }
            else {
              uVar6 = iVar5 + 1;
              *(uint *)(this + 0x490) = uVar6;
              if (0x32 < uVar6) {
                if ((char)local_34 != '\0') {
                  loadBinary(this,uVar8);
                  return 0;
                }
                goto LAB_000178c6;
              }
            }
            _IOLog("[IGPU] Hash data from ME never returned, status = %x, doing retry #%d\n",uVar8,
                   uVar6);
            _kprintf("[IGPU] Hash data from ME never returned, status = %x, doing retry #%d\n",uVar8
                     ,*(int *)(this + 0x490));
            uVar6 = local_40;
          }
          else {
            lVar13 = *(long *)(&DAT_00001270 + lVar16);
LAB_0001747e:
            *(undefined4 *)(lVar13 + 0x1984) = 1;
            *(undefined4 *)(&DAT_0013816c + lVar13) = 1;
            *(undefined4 *)(lVar13 + 0x9424) = 0x10;
            uVar14 = *(ulong *)(lVar16 + 0xfce);
            if ((int)uVar14 < 0) {
              *(undefined4 *)(lVar13 + 0x9024) = 0xcb;
              uVar14 = *(ulong *)(lVar16 + 0xfce);
            }
            if ((uVar14 >> 0x20 & 1) != 0) {
              *(undefined4 *)(lVar13 + 0xa000) = 0x30fff;
              *(undefined4 *)(lVar13 + 0xa178) = 500;
              uVar14 = *(ulong *)(lVar16 + 0xfce);
            }
            *(uint *)(lVar13 + 0xc064) = (uint)(uVar14 >> 0x12) & 0x8000 ^ 0x8617;
            *(undefined4 *)(lVar13 + 0xa178) = 0x1ff;
            uVar7 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80810));
            *(undefined4 *)(*(long *)(&DAT_00001270 + lVar16) + 0xc184) = uVar7;
            if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) == 0) {
              puVar15 = &DAT_000aabf0;
              if (fCanUseSpringboard == '\0') {
                puVar15 = (undefined4 *)&__KmGuCBinary;
              }
              lVar16 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
              lVar13 = 0;
              do {
                pIVar19 = (IGMappedBuffer *)(ulong)*(uint *)((long)puVar15 + lVar13);
                *(uint *)(lVar16 + 0xc200 + lVar13) = *(uint *)((long)puVar15 + lVar13);
                lVar13 = lVar13 + 4;
              } while (lVar13 != 0x100);
            }
            local_90 = 0;
            local_98 = 0;
            checkWOPCMSettings(this,pIVar19,&local_98);
            lVar16 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
            *(uint *)(lVar16 + 0xc340) = (uint)local_98 | 1;
            *(uint *)(lVar16 + 0xc050) = (int)(local_90 / *(ulong *)__got::_page_size) << 0xc | 1;
            invalidateTLB(this);
            if (fCanUseSpringboard == '\0') {
              if (((&DAT_000011c0)[*(long *)pIVar1] & 0x20) == 0) {
                uVar7 = 0x22000;
                uVar6 = 1;
                puVar15 = local_80;
                uVar8 = _guc_public_key_bin_len;
                goto LAB_000175fb;
              }
LAB_0001760a:
              lVar16 = *(long *)(&DAT_00001270 + *(long *)pIVar1);
              *(undefined4 *)(lVar16 + 0xc180) = 1;
              if (fCanUseSpringboard == '\0') {
                uVar17 = 0x2000;
                uVar7 = 0xf500;
                puVar15 = local_58;
              }
              else {
                *(int *)(lVar16 + 0xc1b8) = (int)local_70;
                uVar17 = 0x80000;
                uVar7 = 0xc40;
                puVar15 = local_88;
              }
              uVar14 = dmaHostToGuC(this,puVar15,uVar17,uVar7,0,'\x01');
              if ((char)uVar14 != '\0') break;
            }
            else {
              uVar7 = 0x2000;
              uVar6 = 2;
              puVar15 = local_58;
              uVar8 = 0xf500;
LAB_000175fb:
              uVar14 = dmaHostToGuC(this,puVar15,uVar7,uVar8,uVar6,'\x01');
              if ((char)uVar14 != '\0') goto LAB_0001760a;
            }
            uVar6 = 0x32;
          }
        }
        uVar8 = *(uint *)(this + 0x490);
      } while (uVar8 < 0x33);
      actionResponseWait(this);
      local_44 = *(uint *)(*(long *)(*(IntelAccelerator **)(this + 0x10) + 0x1270) + 0xc000);
      local_58 = (undefined4 *)CONCAT44(local_58._4_4_,local_44);
      local_44 = local_44 & 0xff00;
      if (local_44 == 0xf000) {
        this[0x471] = (IGGuC)0x1;
      }
      uVar8 = IntelAccelerator::SafeReadRegister32
                        (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc1a4);
      local_40 = uVar8 >> 0x18;
      param2 = uVar8 >> 8 & 0xff;
      uVar6 = uVar8 >> 0x10 & 0xff;
      _IOLog("[IGPU] Graphics Firmware Version: %d.%d.%d.%d\n",uVar8 & 0xff,param2,uVar6,local_40);
      _kprintf("[IGPU] Graphics Firmware Version: %d.%d.%d.%d\n",uVar8 & 0xff,param2,uVar6,local_40)
      ;
      changeFrequencyWait(*(long *)pIVar1,(ulong)local_38);
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)pIVar1,0,7);
      if (local_44 == 0xf000) {
        (**(code **)(*(long *)(*(long *)pIVar1 + 0xdf8) + 0x58))();
        uVar14 = CONCAT71((int7)((ulong)this >> 8),1);
      }
      else {
        uVar8 = (uint)local_58;
        _IOLog("[IGPU] Failed to load graphics firmware binary, STATUS = 0x%08X\n",
               (ulong)local_58 & 0xffffffff);
        _kprintf("[IGPU] Failed to load graphics firmware binary, STATUS = 0x%08X\n",uVar8);
        if ((char)local_34 != '\0') {
          loadBinary(this,uVar8);
          return 0;
        }
        (**(code **)(*(long *)(*(long *)pIVar1 + 0xdf8) + 0x50))();
        uVar14 = 0;
      }
LAB_000178d8:
      pIVar11 = local_50;
      if (local_78 != (IGSharedMappedBuffer *)0x0) {
        (**(code **)(*(long *)local_78 + 0x28))();
      }
    }
    if (local_60 != (IGSharedMappedBuffer *)0x0) {
      (**(code **)(*(long *)local_60 + 0x28))();
    }
    if (local_68 != (IGSharedMappedBuffer *)0x0) {
LAB_00017903:
      (**(code **)(*(long *)local_68 + 0x28))();
    }
  }
  else {
    pIVar12 = IGSharedMappedBuffer::withOptions
                        (*(long *)(*(long *)pIVar1 + 0x150),
                         (0x1000UL >> (*puVar3 & 0x3f)) * *(long *)__got::_page_size,2,0);
    if (pIVar12 != (IGSharedMappedBuffer *)0x0) {
      pvVar10 = (void *)IGSharedMappedBuffer::getVirtualAddress(pIVar12);
      _memcpy(pvVar10,&__KmGen11SBBinary,0xc40);
      local_68 = pIVar12;
      local_88 = (undefined4 *)IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)pIVar12);
      if (fCanUseSpringboard == '\0') {
        local_70 = 0;
        local_60 = (IGSharedMappedBuffer *)0x0;
        local_50 = pIVar11;
        goto LAB_000170a6;
      }
      pIVar12 = IGSharedMappedBuffer::withOptions
                          (*(long *)(*(long *)pIVar1 + 0x150),
                           (0x1000UL >> (*puVar3 & 0x3f)) * *(long *)__got::_page_size,2,0);
      if (pIVar12 != (IGSharedMappedBuffer *)0x0) {
        local_50 = pIVar11;
        pvVar10 = (void *)IGSharedMappedBuffer::getVirtualAddress(pIVar12);
        _memcpy(pvVar10,&__KmGuCSBBinarySig,0x100);
        local_60 = pIVar12;
        local_70 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)pIVar12);
        local_78 = (IGSharedMappedBuffer *)0x0;
        local_80 = (undefined4 *)0x0;
        if (fCanUseSpringboard == '\0') goto LAB_000170a6;
        goto LAB_00017118;
      }
      if ((char)local_34 != '\0') {
        loadBinary();
        return 0;
      }
      uVar14 = 0;
      goto LAB_00017903;
    }
    if ((char)local_34 != '\0') {
      loadBinary();
      return 0;
    }
    uVar14 = 0;
  }
  (**(code **)(*(long *)pIVar11 + 0x28))(pIVar11);
LAB_00017912:
  return uVar14 & 0xffffffff;
}



// IGGuC::enableOption(unsigned int)

void __thiscall IGGuC::enableOption(IGGuC *this,uint param_1)

{
  uint *puVar1;
  
  if (((param_1 & 4) != 0) && ((*(uint *)(*(long *)(this + 0x478) + 0x18) & 8) == 0)) {
    puVar1 = (uint *)(*(long *)(this + 0x478) + 0x18);
    *puVar1 = *puVar1 | 8;
  }
  IGScheduler::enableOption((IGScheduler *)this,param_1);
  return;
}



// IGGuC::disableOption(unsigned int)

void __thiscall IGGuC::disableOption(IGGuC *this,uint param_1)

{
  uint *puVar1;
  
  if (((param_1 & 4) != 0) && ((*(uint *)(*(long *)(this + 0x478) + 0x18) & 8) != 0)) {
    puVar1 = (uint *)(*(long *)(this + 0x478) + 0x18);
    *puVar1 = *puVar1 & 0xfffffff7;
  }
  IGScheduler::disableOption((IGScheduler *)this,param_1);
  return;
}



// IGGuC::systemWillSleep()

void __thiscall IGGuC::systemWillSleep(IGGuC *this)

{
  ulong uVar1;
  char local_58 [64];
  
  IGScheduler::systemWillSleep((IGScheduler *)this);
  local_58[0] = '\x02';
  local_58[1] = '\0';
  local_58[2] = '\0';
  local_58[3] = '\0';
  local_58[4] = '\0';
  local_58[5] = '\0';
  local_58[6] = '\0';
  local_58[7] = '\0';
  local_58[8] = '\0';
  local_58[9] = '\0';
  local_58[10] = '\0';
  local_58[0xb] = '\0';
  local_58[0xc] = '\0';
  local_58[0xd] = '\0';
  local_58[0xe] = '\0';
  local_58[0xf] = '\0';
  local_58[0x10] = '\0';
  local_58[0x11] = '\0';
  local_58[0x12] = '\0';
  local_58[0x13] = '\0';
  local_58[0x14] = '\0';
  local_58[0x15] = '\0';
  local_58[0x16] = '\0';
  local_58[0x17] = '\0';
  local_58[0x18] = '\0';
  local_58[0x19] = '\0';
  local_58[0x1a] = '\0';
  local_58[0x1b] = '\0';
  local_58[0x1c] = '\0';
  local_58[0x1d] = '\0';
  local_58[0x1e] = '\0';
  local_58[0x1f] = '\0';
  local_58[0x20] = '\0';
  local_58[0x21] = '\0';
  local_58[0x22] = '\0';
  local_58[0x23] = '\0';
  local_58[0x24] = '\0';
  local_58[0x25] = '\0';
  local_58[0x26] = '\0';
  local_58[0x27] = '\0';
  local_58[0x28] = '\0';
  local_58[0x29] = '\0';
  local_58[0x2a] = '\0';
  local_58[0x2b] = '\0';
  local_58[0x2c] = '\0';
  local_58[0x2d] = '\0';
  local_58[0x2e] = '\0';
  local_58[0x2f] = '\0';
  local_58[0x30] = '\0';
  local_58[0x31] = '\0';
  local_58[0x32] = '\0';
  local_58[0x33] = '\0';
  local_58[0x34] = '\0';
  local_58[0x35] = '\0';
  local_58[0x36] = '\0';
  local_58[0x37] = '\0';
  local_58[0x38] = '\0';
  local_58[0x39] = '\0';
  local_58[0x3a] = '\0';
  local_58[0x3b] = '\0';
  _IOLockLock(*(undefined8 *)(this + 0x468));
  uVar1 = sendHostToGucMessage(this,local_58,0x60000,0);
  if ((char)uVar1 == '\0') {
    _IOLog("[IGPU] Failed to send action for systemWillSleep.\n");
    _kprintf("[IGPU] Failed to send action for systemWillSleep.\n");
  }
  this[0x471] = (IGGuC)0x0;
  _IOLockUnlock(*(undefined8 *)(this + 0x468));
  return;
}



// IGGuC::sendHostToGucMessage(IGHostToGucMessage const*, unsigned int, void ( block_pointer)())

ulong __thiscall IGGuC::sendHostToGucMessage(IGGuC *this,char *param_1,uint param_2,long param_3)

{
  char *pcVar1;
  IGGuC IVar2;
  IntelAccelerator *this_00;
  long lVar3;
  undefined8 unaff_R15;
  
  IntelAccelerator::dpsmKickTimer(*(IntelAccelerator **)(this + 0x10));
  if ((param_2 >> 0x11 & 1) == 0) {
    _IOLockLock(*(undefined8 *)(this + 0x468));
  }
  IVar2 = this[0x471];
  if (IVar2 == (IGGuC)0x0) {
    _IOLog(
          "[IGPU] Request to send Host -> Gfx firmware message when the firmware channel is not active!\n"
          );
    _kprintf(
            "[IGPU] Request to send Host -> Gfx firmware message when the firmware channel is not active!\n"
            );
  }
  else {
    if (this[0x470] != (IGGuC)0x0) {
      waitForHostToGucActionResponse(this,(char *)0x0,param_2,"sendHostToGucMessage");
    }
    if (param_3 != 0) {
      (**(code **)(param_3 + 0x10))(param_3);
    }
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
    this_00 = *(IntelAccelerator **)(this + 0x10);
    lVar3 = *(long *)(this_00 + 0x1270);
    *(undefined4 *)(lVar3 + 0xc180) = *(undefined4 *)param_1;
    pcVar1 = "__ZNK15IGAccelResource23fillSurfaceStateAuxInfoEPKNS_17ResourceInfoEntryER22SGfxRenderSurfaceState6Intent"
             + lVar3 + 0x5c;
    pcVar1[0] = '\x01';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    IntelAccelerator::SafeForceWake(this_00,0,4);
    this[0x470] = (IGGuC)0x1;
    if ((param_2 >> 0x12 & 1) != 0) {
      waitForHostToGucActionResponse(this,param_1,param_2,"sendHostToGucMessage");
    }
  }
  if ((param_2 >> 0x11 & 1) == 0) {
    _IOLockUnlock(*(undefined8 *)(this + 0x468));
  }
  return CONCAT71((int7)((ulong)unaff_R15 >> 8),IVar2) & 0xffffffff;
}



// IGGuC::systemDidWake()

void __thiscall IGGuC::systemDidWake(IGGuC *this)

{
  IGGuC *pIVar1;
  uint uVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  int param1;
  char *fmt;
  IGGuC *pIVar6;
  char local_b8 [64];
  char local_78 [2];
  undefined2 local_76;
  undefined8 local_74;
  undefined8 local_6c;
  undefined8 local_64;
  undefined8 local_5c;
  undefined8 local_54;
  undefined8 local_4c;
  undefined8 local_44;
  IGGuC *local_38;
  
  IGScheduler::systemDidWake();
  uVar2 = IntelAccelerator::SafeReadRegister32
                    (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc000);
  if ((uVar2 & 0xc0000000) != 0x80000000) {
    uVar2 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa008);
    changeFrequencyWait(*(long *)(this + 0x10),0x3018000);
    uVar3 = loadBinary(this,1);
    if ((char)uVar3 == '\0') {
      systemDidWake(this);
      return;
    }
    *(undefined4 *)(this + 0x5c8) = 0;
    changeFrequencyWait(*(long *)(this + 0x10),(ulong)uVar2);
  }
  IntelAccelerator::SafeWriteRegister32(*(IntelAccelerator **)(this + 0x10),(undefined *)0xc180,0);
  local_38 = this;
  if (this[0x470] != (IGGuC)0x0) {
    _IOLog("[IGPU] A message did not receive a response when firmware went to sleep!\n");
    _kprintf("[IGPU] A message did not receive a response when firmware went to sleep!\n");
    local_38[0x470] = (IGGuC)0x0;
  }
  pIVar6 = local_38;
  IGInterruptBridge::systemDidWake
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(local_38 + 0x10)));
  pIVar6[0x471] = (IGGuC)0x1;
  local_b8[0] = '\x03';
  local_b8[1] = '\0';
  local_b8[2] = '\0';
  local_b8[3] = '\0';
  local_b8[4] = '\0';
  local_b8[5] = '\0';
  local_b8[6] = '\0';
  local_b8[7] = '\0';
  local_b8[8] = '\0';
  local_b8[9] = '\0';
  local_b8[10] = '\0';
  local_b8[0xb] = '\0';
  local_b8[0xc] = '\0';
  local_b8[0xd] = '\0';
  local_b8[0xe] = '\0';
  local_b8[0xf] = '\0';
  local_b8[0x10] = '\0';
  local_b8[0x11] = '\0';
  local_b8[0x12] = '\0';
  local_b8[0x13] = '\0';
  local_b8[0x14] = '\0';
  local_b8[0x15] = '\0';
  local_b8[0x16] = '\0';
  local_b8[0x17] = '\0';
  local_b8[0x18] = '\0';
  local_b8[0x19] = '\0';
  local_b8[0x1a] = '\0';
  local_b8[0x1b] = '\0';
  local_b8[0x1c] = '\0';
  local_b8[0x1d] = '\0';
  local_b8[0x1e] = '\0';
  local_b8[0x1f] = '\0';
  local_b8[0x20] = '\0';
  local_b8[0x21] = '\0';
  local_b8[0x22] = '\0';
  local_b8[0x23] = '\0';
  local_b8[0x24] = '\0';
  local_b8[0x25] = '\0';
  local_b8[0x26] = '\0';
  local_b8[0x27] = '\0';
  local_b8[0x28] = '\0';
  local_b8[0x29] = '\0';
  local_b8[0x2a] = '\0';
  local_b8[0x2b] = '\0';
  local_b8[0x2c] = '\0';
  local_b8[0x2d] = '\0';
  local_b8[0x2e] = '\0';
  local_b8[0x2f] = '\0';
  local_b8[0x30] = '\0';
  local_b8[0x31] = '\0';
  local_b8[0x32] = '\0';
  local_b8[0x33] = '\0';
  local_b8[0x34] = '\0';
  local_b8[0x35] = '\0';
  local_b8[0x36] = '\0';
  local_b8[0x37] = '\0';
  local_b8[0x38] = '\0';
  local_b8[0x39] = '\0';
  local_b8[0x3a] = '\0';
  local_b8[0x3b] = '\0';
  uVar3 = sendHostToGucMessage(pIVar6,local_b8,0x40000,0);
  if ((char)uVar3 == '\0') {
    systemDidWake(local_38);
  }
  else {
    lVar5 = 0x5cc;
    uVar3 = 0;
    pIVar6 = local_38;
    do {
      pIVar1 = pIVar6 + lVar5;
      param1 = (int)uVar3;
      if (*(int *)(pIVar6 + lVar5) < 1) {
        if (*(int *)(pIVar6 + lVar5) < 0) {
          _IOLog("[IGPU] Send pending unbind-work-queue %d notice to firmware, bind count %d.\n",
                 uVar3);
          _kprintf("[IGPU] Send pending unbind-work-queue %d notice to firmware, bind count %d.\n",
                   param1,*(uint *)pIVar1);
          local_78[0] = '\x06';
          local_78[1] = '\0';
          local_44 = 0;
          local_4c = 0;
          local_54 = 0;
          local_5c = 0;
          local_64 = 0;
          local_6c = 0;
          local_74 = 0;
          local_76 = (short)uVar3;
          uVar4 = sendHostToGucMessage(pIVar6,local_78,0x40000,0);
          if ((char)uVar4 == '\0') {
            uVar2 = *(uint *)pIVar1;
            fmt = 
            "[IGPU] Failed to send pending unbind-work-queue %d notice to firmware, bind count %d.\n"
            ;
            goto LAB_00017db5;
          }
          _OSIncrementAtomic(pIVar1);
          pIVar6 = local_38;
        }
      }
      else {
        _IOLog("[IGPU] Send pending bind-work-queue %d notice to firmware, bind count %d.\n",uVar3);
        _kprintf("[IGPU] Send pending bind-work-queue %d notice to firmware, bind count %d.\n",
                 param1,*(uint *)pIVar1);
        local_78[0] = '\x05';
        local_78[1] = '\0';
        local_44 = 0;
        local_4c = 0;
        local_54 = 0;
        local_5c = 0;
        local_64 = 0;
        local_6c = 0;
        local_74 = 0;
        local_76 = (short)uVar3;
        uVar4 = sendHostToGucMessage(pIVar6,local_78,0x40000,0);
        if ((char)uVar4 == '\0') {
          uVar2 = *(uint *)pIVar1;
          fmt = 
          "[IGPU] Failed to send pending bind-work-queue %d notice to firmware, bind count %d.\n";
LAB_00017db5:
          _IOLog(fmt,uVar3,uVar2);
          _kprintf(fmt,uVar3,(ulong)*(uint *)pIVar1);
          pIVar6 = local_38;
        }
        else {
          _OSDecrementAtomic(pIVar1);
          pIVar6 = local_38;
        }
      }
      uVar3 = (ulong)(param1 + 1);
      lVar5 = lVar5 + 4;
    } while (lVar5 != 0x6cc);
  }
  return;
}



// IGGuC::dumpGuCPanicDebugInfo(char const*, unsigned int)

void __thiscall IGGuC::dumpGuCPanicDebugInfo(IGGuC *this,char *param_1,uint param_2)

{
  IGGuC *pIVar1;
  uint uVar2;
  char cVar3;
  long lVar4;
  char *pcVar5;
  int param1;
  long param1_00;
  char *param1_01;
  
  _IOLog("[IGPU] -------------------------------------------------------\n");
  _kprintf("[IGPU] -------------------------------------------------------\n");
  _IOLog("[IGPU] We\'re going to panic with : %s\n",param_1);
  _kprintf("[IGPU] We\'re going to panic with : %s\n",param_1);
  _IOLog("[IGPU] -------------------------------------------------------\n");
  _kprintf("[IGPU] -------------------------------------------------------\n");
  _IOLog("[IGPU] Dumping information that may help root-cause the issue:\n\n");
  _kprintf("[IGPU] Dumping information that may help root-cause the issue:\n\n");
  pIVar1 = this + 0x10;
  uVar2 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa188);
  _IOLog("[IGPU] ForceWake Multithreaded (0x%x) = 0x%x\n",0x130044,uVar2);
  _kprintf("[IGPU] ForceWake Multithreaded (0x%x) = 0x%x\n",0x130044,uVar2);
  if ((short)uVar2 == 0) {
    _IOLog("[IGPU]  --> GT should be out of RC6, but FORCEWAKE_MULTITHREADED register [15:0] = 0, full register = 0x%x\n"
           ,uVar2);
    _kprintf("[IGPU]  --> GT should be out of RC6, but FORCEWAKE_MULTITHREADED register [15:0] = 0, full register = 0x%x\n"
             ,uVar2);
  }
  param1 = 7;
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)pIVar1,1,7);
  lVar4 = *(long *)(&DAT_00001270 + *(long *)pIVar1);
  if ((short)*(undefined4 *)(lVar4 + 0xa188) == 0) {
    _IOLog("[IGPU]  --> ForceWake reference count must be off!\n");
    _kprintf("[IGPU]  --> ForceWake reference count must be off!\n");
    lVar4 = *(long *)(&DAT_00001270 + *(long *)pIVar1);
  }
  uVar2 = *(uint *)(lVar4 + 0xc0b0);
  _IOLog("[IGPU] ================ Gfx Firmware REGISTER DUMP ================\n");
  _kprintf("[IGPU] ================ Gfx Firmware REGISTER DUMP ================\n");
  _IOLog("[IGPU] \n  Gfx Firmware Registers:\n");
  _kprintf("[IGPU] \n  Gfx Firmware Registers:\n");
  _IOLog("[IGPU]                DRBMISC1 = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0x1984));
  _kprintf("[IGPU]                DRBMISC1 = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0x1984));
  _IOLog("[IGPU]           DOORBELL_CTRL = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc510));
  _kprintf("[IGPU]           DOORBELL_CTRL = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc510));
  lVar4 = 0xc514;
  do {
    _IOLog("[IGPU]     Firmware   DB_ISR_%d = 0x%08X\n",param1,
           *(undefined4 *)(lVar4 + *(long *)(&DAT_00001270 + *(long *)pIVar1)));
    _kprintf("[IGPU]     Firmware   DB_ISR_%d = 0x%08X\n",param1,
             *(uint *)(lVar4 + *(long *)(&DAT_00001270 + *(long *)pIVar1)));
    lVar4 = lVar4 + 4;
    param1 = param1 + -1;
  } while (lVar4 != 0xc534);
  _IOLog("[IGPU]            Firmware EIP = 0x%08X\n",uVar2);
  _kprintf("[IGPU]            Firmware EIP = 0x%08X\n",uVar2);
  _IOLog("[IGPU]    Firmware EIP_COUNTER = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc0b4));
  _kprintf("[IGPU]    Firmware EIP_COUNTER = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc0b4));
  _IOLog("[IGPU]           Firmware IDLE = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc028));
  _kprintf("[IGPU]           Firmware IDLE = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc028));
  _IOLog("[IGPU]      Firmware NT_DEBUG1 = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a0));
  _kprintf("[IGPU]      Firmware NT_DEBUG1 = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a0));
  _IOLog("[IGPU]      Firmware NT_DEBUG2 = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a4));
  _kprintf("[IGPU]      Firmware NT_DEBUG2 = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a4));
  _IOLog("[IGPU]      Firmware NT_DEBUG3 = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a8));
  _kprintf("[IGPU]      Firmware NT_DEBUG3 = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc5a8));
  _IOLog("[IGPU]   Firmware HW_FATAL_ERR = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc598));
  _kprintf("[IGPU]   Firmware HW_FATAL_ERR = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc598));
  _IOLog("[IGPU]  Firmware HW_NOTIFY_ERR = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc59c));
  _kprintf("[IGPU]  Firmware HW_NOTIFY_ERR = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc59c));
  _IOLog("[IGPU]         Firmware STATUS = 0x%08X\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc000));
  _kprintf("[IGPU]         Firmware STATUS = 0x%08X\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)pIVar1) + 0xc000));
  lVar4 = 0xc180;
  param1_00 = 0;
  do {
    _IOLog("[IGPU] Firmware SCRATCH_REGISTER_%02ld = 0x%08X\n",param1_00,
           *(undefined4 *)(lVar4 + *(long *)(&DAT_00001270 + *(long *)pIVar1)));
    _kprintf("[IGPU] Firmware SCRATCH_REGISTER_%02ld = 0x%08X\n",param1_00,
             *(uint *)(lVar4 + *(long *)(&DAT_00001270 + *(long *)pIVar1)));
    param1_00 = param1_00 + 1;
    lVar4 = lVar4 + 4;
  } while (lVar4 != 0xc1c0);
  lVar4 = 0;
  do {
    if (uVar2 == *(uint *)((long)&__KmGuCHltInstructionLocations + lVar4)) {
      _IOLog("[IGPU] Gfx firmware is halted (*eip = hlt; may not be hung)!\n");
      _kprintf("[IGPU] Gfx firmware is halted (*eip = hlt; may not be hung)!\n");
      break;
    }
    lVar4 = lVar4 + 4;
  } while (lVar4 != 0xc);
  if ((param_2 >> 0x14 & 1) == 0) {
    cVar3 = (**(code **)(*(long *)this + 0x158))(this,param_2);
    param1_01 = "NOT HUNG";
    pcVar5 = "NOT HUNG";
    if (cVar3 != '\0') {
      pcVar5 = "HUNG";
    }
    _IOLog("[IGPU] Gfx Firmware is %s\n",pcVar5);
    cVar3 = (**(code **)(*(long *)this + 0x158))(this,param_2);
    if (cVar3 != '\0') {
      param1_01 = "HUNG";
    }
    _kprintf("[IGPU] Gfx Firmware is %s\n",param1_01);
  }
  _IOLog("[IGPU] ===================================================\n");
  _kprintf("[IGPU] ===================================================\n");
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)pIVar1,0,7);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleGucToHostInterrupt(OSObject*, void*)

void __cdecl IGGuC::handleGucToHostInterrupt(OSMetaClassBase *param_1)

{
  long lVar1;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
                    // WARNING: Could not recover jumptable at 0x000183b8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(lVar1 + 0x80850) + 0x1e0))(*(long **)(lVar1 + 0x80850),0,0,0);
  return;
}



// IGGuC::reportAssertionFailure()

void __thiscall IGGuC::reportAssertionFailure(IGGuC *this)

{
  long lVar1;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
  *(undefined4 *)(lVar1 + 0x2180) = *(undefined4 *)(lVar1 + 0x21c0);
  return;
}



// IGGuC::logPrintf()

void __thiscall IGGuC::logPrintf(IGGuC *this)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  uint uVar5;
  uint uVar6;
  
  uVar6 = *(uint *)(*(long *)(this + 0x478) + 0x2c);
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
  uVar2 = *(uint *)(lVar3 + 0x2100);
  uVar1 = *(uint *)(lVar3 + 0x2140);
  if (uVar2 != uVar1) {
    uVar6 = (uVar6 & 0xff) << 0xe;
    do {
      lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80820));
      uVar2 = (*(int *)(lVar4 + (ulong)uVar2) + 7U & 0xfffffffc) + uVar2;
      uVar5 = uVar6;
      if (uVar2 < uVar6) {
        uVar5 = 0;
      }
      uVar2 = uVar2 - uVar5;
    } while (uVar2 != uVar1);
    *(uint *)(lVar3 + 0x2100) = uVar1;
  }
  return;
}



// IGGuC::logProcess()

void __thiscall IGGuC::logProcess(IGGuC *this)

{
  uint uVar1;
  int iVar2;
  uint32_t debugid;
  long lVar3;
  long lVar4;
  uintptr_t arg1;
  long lVar5;
  
  uVar1 = *(uint *)(*(long *)(this + 0x478) + 4);
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
  iVar2 = *(int *)(lVar3 + 0x20c0);
  if ((*(int *)(lVar3 + 0x2080) != iVar2) && (*(int *)(lVar3 + 0x2080) != iVar2)) {
    do {
      lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80818));
      lVar5 = (ulong)*(uint *)(lVar3 + 0x2080) * 0x40;
      arg1 = IGAccelTraceStreamManager::RawGpuToCpuNsec
                       ((IGAccelTraceStreamManager *)(*(long *)(this + 0x10) + 0xe18),
                        *(ulong *)(lVar5 + lVar4));
      debugid = *(uint32_t *)(lVar5 + 8 + lVar4);
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug(debugid,arg1,(ulong)*(uint *)(lVar4 + 0xc + lVar5),
                        (ulong)*(uint *)(lVar4 + 0x10 + lVar5),
                        (ulong)*(uint *)(lVar4 + 0x14 + lVar5),0);
        }
      }
      *(uint *)(lVar3 + 0x2080) = *(int *)(lVar3 + 0x2080) + 1U & (uVar1 & 0xff) * 0x100 - 1;
    } while (*(int *)(lVar3 + 0x2080) != iVar2);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleHardwareFlushNotifyInterrupt(OSObject*, void*)

void __cdecl IGGuC::handleHardwareFlushNotifyInterrupt(OSMetaClassBase *param_1,byte *param_2)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  
  lVar3 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  lVar1 = *(long *)(lVar3 + 0x10);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00039,(ulong)*param_2,0,0,0,0);
    }
  }
  plVar2 = *(long **)(lVar3 + 0x80860 + (ulong)*param_2 * 8);
  if (((&DAT_000011c5)[lVar1] & 1) == 0) {
    (**(code **)(*plVar2 + 0x1e0))(plVar2,0,0);
  }
  else {
    handleFlushNotifyInterruptSecondary(lVar3,(long)plVar2);
  }
  (**(code **)(**(long **)(lVar3 + 0x80858) + 0x1e0))(*(long **)(lVar3 + 0x80858),0,0);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0003a,(ulong)*param_2,0,0,0,0);
      return;
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleHardwareErrorInterrupt(OSObject*, void*)

void __cdecl IGGuC::handleHardwareErrorInterrupt(OSMetaClassBase *param_1,long param_2)

{
  long lVar1;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  *(undefined4 *)
   (*(long *)(&DAT_00001270 + *(long *)(lVar1 + 0x10)) + (ulong)*(uint *)(param_2 + 0x41)) =
       *(undefined4 *)
        (*(long *)(&DAT_00001270 + *(long *)(lVar1 + 0x10)) + (ulong)*(uint *)(param_2 + 0x41));
  return;
}



// IGGuC::processRetiredWorkQueueItems()

void __thiscall IGGuC::processRetiredWorkQueueItems(IGGuC *this)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  long lVar5;
  undefined **ppuVar6;
  uint *puVar7;
  ulong arg2;
  uint uVar8;
  
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
  puVar7 = (uint *)(lVar4 + 0x2200);
  if (puVar7 != (uint *)0x0) {
    uVar8 = *puVar7;
    uVar2 = *(uint *)(lVar4 + 0x2240);
    lVar4 = IGAccelTask::getStamps(*(IGAccelTask **)(*(long *)(this + 0x10) + 0x150));
    uVar3 = uVar8;
    for (; uVar8 != uVar2; uVar8 = uVar8 + 1 & 0x1ff) {
      lVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80830));
      arg2 = (ulong)*(uint *)(lVar5 + 0x10 + (ulong)uVar8 * 0x40);
      if (_graphicsTracePointEnable != 0) {
        ppuVar6 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
        if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) {
          ppuVar6 = &IG_STAMP_INDEX_TO_HWCS_LUT;
        }
        bVar1 = *(byte *)((long)ppuVar6 + arg2);
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug(0x85a00034,(ulong)bVar1,arg2,(ulong)*(uint *)(arg2 * 0x40 + lVar4),0,0);
        }
      }
      processRetiredMetaData(this,arg2,lVar5 + (ulong)uVar8 * 0x40);
      uVar3 = uVar2;
    }
    *puVar7 = uVar3;
  }
  return;
}



// IGGuC::initGucCtrl(IGGucCtrl volatile*)

void __thiscall IGGuC::initGucCtrl(IGGuC *this,uint *param_1)

{
  long lVar1;
  undefined *puVar2;
  uint uVar3;
  long *plVar4;
  ulong uVar5;
  undefined8 uVar6;
  ulong uVar7;
  ulong uVar8;
  undefined8 local_38;
  
  *param_1 = *param_1 & 0xffffff80 | *(uint *)(&DAT_00001150 + *(long *)(this + 0x10)) & 0x7f;
  *param_1 = *param_1 & 0xffffe07f | 0x600;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80818));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  puVar2 = __got::_page_size;
  param_1[1] = param_1[1] & 0xffffff00 | (uint)(uVar5 / *(ulong *)__got::_page_size) >> 2 & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80818));
  param_1[1] = param_1[1] & 0xfff | uVar3 & 0xfffff000;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80828));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  param_1[2] = param_1[2] & 0xffffff00 | (uint)(uVar5 / *(ulong *)puVar2) >> 2 & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80828));
  param_1[2] = param_1[2] & 0xfff | uVar3 & 0xfffff000;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80838));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  param_1[3] = param_1[3] & 0xffffff00 | (uint)(uVar5 / *(ulong *)puVar2) >> 2 & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80838));
  param_1[3] = param_1[3] & 0xfff | uVar3 & 0xfffff000;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80840));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  param_1[4] = param_1[4] & 0xffffff00 | (uint)(uVar5 / *(ulong *)puVar2) >> 2 & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80840));
  param_1[4] = param_1[4] & 0xfff | uVar3 & 0xfffff000;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor
                             (*(IGMappedBuffer **)
                               (*(long *)(*(long *)(this + 0x10) + 0x150) + 0x280));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  param_1[5] = param_1[5] & 0xffffff00 | (uint)(uVar5 / *(ulong *)puVar2) & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress
                    (*(IGMappedBuffer **)(*(long *)(*(long *)(this + 0x10) + 0x150) + 0x280));
  param_1[5] = param_1[5] & 0xfff | uVar3 & 0xfffff000;
  param_1[6] = param_1[6] & 0xfffffffe |
               (uint)((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0x8000);
  param_1[6] = param_1[6] & 0xfffffffd |
               *(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x19 & 2;
  param_1[6] = param_1[6] & 0xffffffdf |
               (uint)(*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x1f) & 0x20;
  uVar3 = 0;
  if (((&DAT_000011c3)[*(long *)(this + 0x10)] & 0x40) != 0) {
    uVar3 = *(int *)(this + 0xc) * 2 & 8;
  }
  param_1[6] = param_1[6] & 0xfffffff7 | uVar3;
  param_1[6] = param_1[6] & 0xffffff7f |
               (uint)(*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x1e) & 0x80;
  param_1[6] = param_1[6] & 0xffffffbf | *(uint *)(&DAT_000011c4 + *(long *)(this + 0x10)) & 0x40;
  param_1[7] = param_1[7] & 0xfffffffe |
               (uint)((ulong)*(undefined8 *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x29) & 1;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x6d0));
  param_1[8] = param_1[8] & 0xfff | uVar3 & 0xfffff000;
  local_38 = 0;
  plVar4 = (long *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0x5c0));
  uVar6 = (**(code **)(*plVar4 + 0x158))(plVar4,0,&local_38);
  *(undefined8 *)(param_1 + 9) = uVar6;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80820));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  puVar2 = __got::_page_size;
  param_1[0xb] = param_1[0xb] & 0xffffff00 | (uint)(uVar5 / *(ulong *)__got::_page_size) >> 2 & 0xff
  ;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80820));
  param_1[0xb] = param_1[0xb] & 0xfff | uVar3 & 0xfffff000;
  plVar4 = (long *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 0x80830));
  uVar5 = (**(code **)(*plVar4 + 0x1c8))(plVar4);
  param_1[0xc] = param_1[0xc] & 0xffffff00 | (uint)(uVar5 / *(ulong *)puVar2) >> 2 & 0xff;
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x80830));
  param_1[0xc] = param_1[0xc] & 0xfff | uVar3 & 0xfffff000;
  param_1[0xd] = 0x180;
  lVar1 = *(long *)(this + 0x10);
  *(undefined2 *)(param_1 + 0xe) = *(undefined2 *)(&DAT_000011c8 + lVar1);
  *(undefined2 *)((long)param_1 + 0x3a) = *(undefined2 *)(&DAT_000011ca + lVar1);
  param_1[0xf] = 0;
  uVar5 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar5 != 0) {
    uVar7 = 0;
    if (uVar5 != 0) {
      for (; (uVar5 >> uVar7 & 1) == 0; uVar7 = uVar7 + 1) {
      }
    }
    do {
      param_1[0xf] = param_1[0xf] | 1 << ((byte)uVar7 & 0x1f);
      if (3 < uVar7) break;
      uVar8 = -2L << ((byte)uVar7 & 0x3f) & uVar5;
      uVar7 = 0;
      if (uVar8 != 0) {
        for (; (uVar8 >> uVar7 & 1) == 0; uVar7 = uVar7 + 1) {
        }
      }
    } while (uVar8 != 0);
  }
  param_1[6] = param_1[6] & 0xfffffffb;
  param_1[0x15] =
       param_1[0x15] & 0xfffffffe |
       (uint)((ulong)*(undefined8 *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x2a) & 1;
  return;
}



// IGGuC::dmaHostToGuC(unsigned long long, unsigned int, unsigned int, IGGuC::IGGucDmaType, bool)

ulong __thiscall
IGGuC::dmaHostToGuC(IGGuC *this,undefined4 *param_1,undefined4 param_2,undefined4 param_3,
                   uint param_4,char param_5)

{
  uint param2;
  long lVar1;
  byte bVar2;
  undefined4 uVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  undefined8 uVar7;
  int iVar8;
  undefined4 uVar9;
  bool bVar10;
  
  if (4 < param_4) {
                    // WARNING: Subroutine does not return
    _panic("\"Bad DMA type (%d) given when trying to DMA firmware pieces\" @%s:%d",(ulong)param_4,
           "IGGuC.cpp",0x527);
  }
  uVar9 = 0xffff0011;
  bVar10 = false;
  uVar6 = (ulong)param_4;
  uVar3 = 0xffff0001;
  switch(uVar6) {
  case 1:
    uVar9 = 0xffff0021;
    break;
  case 2:
    uVar9 = 0xffff0061;
    break;
  case 3:
    dmaHostToGuC();
    return 0;
  case 4:
    goto switchD_00018c9e_caseD_4;
  }
  changeFrequencyWait(*(long *)(this + 0x10),0x3000000);
  bVar10 = true;
  uVar3 = uVar9;
switchD_00018c9e_caseD_4:
  lVar4 = *(long *)(this + 0x10);
  lVar1 = *(long *)(&DAT_00001270 + lVar4);
  if (((&DAT_000011c0)[lVar4] & 0x20) != 0) {
    *(undefined4 *)(lVar1 + 0xc068) = 3;
  }
  *(undefined4 *)(lVar1 + 0xc310) = param_3;
  *(int *)(lVar1 + 0xc300) = (int)param_1;
  *(uint *)(lVar1 + 0xc304) = (uint)((ulong)param_1 >> 0x20) & 0xffff;
  *(undefined4 *)(lVar1 + 0xc308) = param_2;
  *(undefined4 *)(lVar1 + 0xc30c) = 0x70000;
  *(undefined4 *)(lVar1 + 0xc314) = uVar3;
  if (bVar10) {
    uVar7 = 200;
    if (((&DAT_000011c0)[lVar4] & 0x20) != 0) {
      uVar7 = 1000;
    }
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,uVar7,1000);
    _thread_block(0);
    if ((*(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) +
                  (ulong)*(uint *)(&fCSSHeaderPollReg + uVar6 * 4)) & 1) != 0) {
      changeFrequencyWait(*(long *)(this + 0x10),0x18000000);
    }
  }
  if (param_5 == '\0') {
    lVar4 = *(long *)(this + 0x10);
    uVar5 = *(ulong *)(&DAT_000011c0 + lVar4);
    if ((uVar5 & 0x20) == 0) {
LAB_00018dea:
      if ((uVar5 & 0x20) == 0) {
        if ((bVar10) &&
           ((*(uint *)(*(long *)(&DAT_00001270 + lVar4) +
                      (ulong)*(uint *)(&fCSSHeaderPollReg + uVar6 * 4)) & 1) == 0)) {
          iVar8 = *(int *)(this + 0x490);
          *(uint *)(this + 0x490) = iVar8 + 1U;
          if (0x32 < iVar8 + 1U) {
            dmaHostToGuC(this);
            return 0;
          }
          uVar6 = 0;
          _IOLog("[IGPU]  Graphics firmware failed to load due to HW bug.  Doing retry #%d\n");
          _kprintf("[IGPU]  Graphics firmware failed to load due to HW bug.  Doing retry #%d\n",
                   *(int *)(this + 0x490));
          goto LAB_00018eec;
        }
      }
      else {
        *(undefined4 *)(this + 0x490) = 0x33;
      }
      param2 = *(uint *)(*(long *)(&DAT_00001270 + lVar4) + 0xc010);
      uVar6 = CONCAT71((int7)((ulong)param_1 >> 8),1);
      if (param_4 == 2) {
        bVar2 = (byte)param2 >> 2;
LAB_00018e9f:
        bVar10 = (bool)(bVar2 & 1);
      }
      else {
        if (param_4 == 1) {
          bVar2 = (byte)param2 >> 1;
          goto LAB_00018e9f;
        }
        if (param_4 != 0) goto LAB_00018eec;
        bVar10 = (~param2 & 0x80000001) == 0;
      }
      if (bVar10 == false) {
        iVar8 = *(int *)(this + 0x490);
        *(uint *)(this + 0x490) = iVar8 + 1U;
        if (0x32 < iVar8 + 1U) {
          dmaHostToGuC(this);
          return 0;
        }
        uVar6 = 0;
        _IOLog("[IGPU] Graphics firmware failed dma host to firmware boot hash check for type %d, value = 0x%x.  Doing retry #%d\n"
               ,param_4,param2);
        _kprintf("[IGPU] Graphics firmware failed dma host to firmware boot hash check for type %d, value = 0x%x.  Doing retry #%d\n"
                 ,param_4,param2,*(int *)(this + 0x490));
      }
      goto LAB_00018eec;
    }
  }
  iVar8 = -15000;
  param_1 = &gl_assert_wait_timeout_event;
  do {
    lVar4 = *(long *)(this + 0x10);
    if ((*(uint *)(*(long *)(&DAT_00001270 + lVar4) + 0xc314) & 1) == 0) {
      uVar5 = *(ulong *)(&DAT_000011c0 + lVar4);
      goto LAB_00018dea;
    }
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
    _thread_block(0);
    iVar8 = iVar8 + 1;
  } while (iVar8 != 0);
  *(undefined4 *)(this + 0x490) = 0x33;
  uVar6 = 0;
LAB_00018eec:
  return uVar6 & 0xffffffff;
}



// IGGuC::checkWOPCMSettings(unsigned long, IOVirtualRange&)

void __thiscall IGGuC::checkWOPCMSettings(IGGuC *this,undefined8 param_2_00,ulong *param_2)

{
  uint uVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  uint uVar5;
  ulong uVar6;
  uint uVar7;
  ulong uVar8;
  ulong uVar9;
  
  uVar4 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0x90e0);
  uVar5 = 0x100000 << ((byte)(uVar4 >> 7) & 3);
  uVar4 = uVar4 & 0xfffffffffff00000;
  uVar8 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xd48);
  uVar9 = uVar8 & 0xfffffffffffff000;
  if ((uVar8 & 1) == 0) {
    _IOLog("[IGPU] RC6 Ctx Base register not locked by BIOS.\n");
    _kprintf("[IGPU] RC6 Ctx Base register not locked by BIOS.\n");
  }
  uVar8 = (ulong)uVar5;
  if ((uVar9 < uVar4 || uVar9 - uVar4 == 0) || (uVar6 = uVar9 - uVar4, uVar4 + uVar8 <= uVar9)) {
    _IOLog("[IGPU] Skipping RC6 Ctx Base, it is not in WOPCM range.\n");
    _kprintf("[IGPU] Skipping RC6 Ctx Base, it is not in WOPCM range.\n");
    uVar6 = uVar8;
  }
  uVar9 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xdc8);
  if ((uVar9 & 1) != 0) {
    uVar3 = uVar9 & 0xffffffffffffffc0;
    if ((uVar4 <= uVar3 && uVar3 - uVar4 != 0) && (uVar2 = uVar3 - uVar4, uVar3 < uVar4 + uVar8))
    goto LAB_0001904c;
  }
  uVar2 = uVar8;
  if ((uVar9 & 1) != 0) {
    _IOLog("[IGPU] Skipping MDRB Ctx Base, it is not in WOPCM range.\n");
    _kprintf("[IGPU] Skipping MDRB Ctx Base, it is not in WOPCM range.\n");
  }
LAB_0001904c:
  uVar7 = uVar5;
  uVar1 = (uint)uVar2;
  if (uVar2 <= uVar6) {
    uVar7 = (uint)uVar6;
    uVar1 = uVar5;
  }
  *param_2 = (ulong)(uVar5 >> 1);
  param_2[1] = (ulong)(((uint)uVar6 - uVar1) + uVar5 + ((uint)uVar2 - uVar7)) - (ulong)(uVar5 >> 1);
  return;
}



// IGGuC::LogGuCLoadRetry(char const*, unsigned int)

void __thiscall IGGuC::LogGuCLoadRetry(IGGuC *this,char *param_1,int param_2)

{
  _IOLog("[IGPU] %s\n");
  _kprintf("[IGPU] %s\n",param_1);
  _IOLog("[IGPU]    ForceWake Multithread = 0x%x\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa188));
  _kprintf("[IGPU]    ForceWake Multithread = 0x%x\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa188));
  _IOLog("[IGPU]    CONFIG0 (0xD00)       = 0x%x\n",
         *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xd00));
  _kprintf("[IGPU]    CONFIG0 (0xD00)       = 0x%x\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xd00));
  _IOLog("[IGPU]    GT_THREAD_STATUS      = 0x%x\n",
         *(undefined4 *)(&DAT_0013805c + *(long *)(&DAT_00001270 + *(long *)(this + 0x10))));
  _kprintf("[IGPU]    GT_THREAD_STATUS      = 0x%x\n",
           *(uint *)(&DAT_0013805c + *(long *)(&DAT_00001270 + *(long *)(this + 0x10))));
  _IOLog("[IGPU]    Doing retry #%d\n",param_2);
  _kprintf("[IGPU]    Doing retry #%d\n",param_2);
  return;
}



// IGGuC::IGGuCSharedObject::IGGuCSharedObject(IGGuC*, unsigned long)

void __thiscall
IGGuC::IGGuCSharedObject::IGGuCSharedObject
          (IGGuCSharedObject *this,undefined8 param_1,undefined8 param_2)

{
  *(undefined8 *)(this + 0x10) = param_1;
  *(undefined8 *)(this + 0x18) = param_2;
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  return;
}



// IGGuC::actionResponseWait()

ulong __thiscall IGGuC::actionResponseWait(IGGuC *this)

{
  uint uVar1;
  uint uVar2;
  undefined4 extraout_var;
  ulong uVar3;
  bool bVar4;
  
  uVar1 = IntelAccelerator::SafeReadRegister32
                    (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc180);
  uVar3 = CONCAT71((int7)(CONCAT44(extraout_var,uVar1) >> 8),1);
  if ((uVar1 & 0x80) == 0) {
    uVar1 = 0;
    do {
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
      _thread_block(0);
      uVar2 = IntelAccelerator::SafeReadRegister32
                        (*(IntelAccelerator **)(this + 0x10),(undefined *)0xc180);
      if ((uVar2 & 0x80) != 0) break;
      bVar4 = uVar1 < 0x5db;
      uVar1 = uVar1 + 1;
    } while (bVar4);
    uVar3 = (ulong)((uVar2 & 0xff) >> 7);
  }
  return uVar3;
}



// IGGuC::IGGuCSharedObject::~IGGuCSharedObject()

void __thiscall IGGuC::IGGuCSharedObject::~IGGuCSharedObject(IGGuCSharedObject *this)

{
  if (*(long **)this != (long *)0x0) {
    (**(code **)(**(long **)this + 0x28))();
  }
  *(undefined8 *)this = 0;
  return;
}



// IGGuC::updateCredits()

ulong __thiscall IGGuC::updateCredits(IGGuC *this)

{
  long lVar1;
  char *param1;
  undefined *puVar2;
  undefined8 unaff_RBX;
  long lVar3;
  uint *puVar4;
  ulong uVar5;
  undefined *param3;
  bool bVar6;
  
  bVar6 = true;
  puVar4 = &DAT_000aae80;
  lVar3 = 0;
  uVar5 = 0;
  do {
    puVar2 = ___idvarGetParam(*puVar4);
    if ((0 < (long)puVar2) &&
       (lVar1 = *(long *)(this + 0x478),
       puVar2 != (undefined *)(ulong)(*(uint *)(lVar1 + 0x18) >> 8 & 0x3f))) {
      param3 = *(undefined **)((long)&DAT_000aae10 + lVar3);
      if ((long)puVar2 < (long)*(undefined **)((long)&DAT_000aae10 + lVar3)) {
        param3 = puVar2;
      }
      if ((long)param3 <= (long)*(undefined **)((long)&DAT_000aadf0 + lVar3)) {
        param3 = *(undefined **)((long)&DAT_000aadf0 + lVar3);
      }
      if (param3 != (undefined *)(ulong)(*(uint *)(lVar1 + 0x18) >> 8 & 0x3f)) {
        param1 = *(char **)((long)&PTR_s_High_00121dd0 + lVar3);
        _IOLog("[IGPU] schedPriCredits%s %d -> %lld\n",param1,*(uint *)(lVar1 + 0x18) >> 8 & 0x3f,
               param3);
        _kprintf("[IGPU] schedPriCredits%s %d -> %lld\n",param1,
                 *(uint *)(*(long *)(this + 0x478) + 0x18) >> 8 & 0x3f,(longlong)param3);
        *(uint *)(*(long *)(this + 0x478) + 0x18) =
             *(uint *)(*(long *)(this + 0x478) + 0x18) & 0xffffc0ff | ((uint)param3 & 0x3f) << 8;
        *(uint *)(*(long *)(this + 0x478) + 0x18) = *(uint *)(*(long *)(this + 0x478) + 0x18) | 0x10
        ;
        goto LAB_00019361;
      }
    }
    bVar6 = uVar5 < 3;
    uVar5 = uVar5 + 1;
    lVar3 = lVar3 + 8;
    puVar4 = puVar4 + 1;
    if (uVar5 == 4) {
LAB_00019361:
      return CONCAT71((int7)((ulong)unaff_RBX >> 8),bVar6) & 0xffffffff;
    }
  } while( true );
}



// IGGuC::updateOptions()

ulong __thiscall IGGuC::updateOptions(IGGuC *this)

{
  int iVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  undefined8 unaff_R14;
  bool bVar5;
  
  puVar2 = ___idvarGetParam(0x20);
  bVar5 = (bool)(((byte)this[0xc] & 4) >> 2);
  if ((puVar2 != (undefined *)0x0) != bVar5) {
    (**(code **)(*(long *)this + 0x238 + (ulong)(puVar2 == (undefined *)0x0) * 8))(this,4);
  }
  puVar3 = ___idvarGetParam(0x21);
  iVar4 = -1;
  if (0 < (int)puVar3) {
    iVar4 = (int)puVar3;
  }
  iVar1 = *(int *)(this + 0x230);
  if (iVar4 != iVar1) {
    *(int *)(this + 0x230) = iVar4;
  }
  return CONCAT71((int7)((ulong)unaff_R14 >> 8),puVar2 != (undefined *)0x0 ^ bVar5 | iVar4 != iVar1)
         & 0xffffffff;
}



// IGGuC::updateThermalStallConfigs(unsigned int, unsigned int)

void __thiscall IGGuC::updateThermalStallConfigs(IGGuC *this,undefined4 param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  char local_60 [64];
  
  _IOLockLock(*(undefined8 *)(this + 0x460));
  if (((&DAT_000011c5)[*(long *)(this + 0x10)] & 4) == 0) {
    return;
  }
  switch(param_1) {
  case 0x35:
    puVar1 = (undefined4 *)(*(long *)(this + 0x478) + 0x40);
    break;
  case 0x36:
    puVar1 = (undefined4 *)(*(long *)(this + 0x478) + 0x44);
    break;
  case 0x37:
    puVar1 = (undefined4 *)(*(long *)(this + 0x478) + 0x48);
    break;
  case 0x38:
    puVar1 = (undefined4 *)(*(long *)(this + 0x478) + 0x4c);
    break;
  case 0x39:
    puVar1 = (undefined4 *)(*(long *)(this + 0x478) + 0x50);
    break;
  default:
    goto switchD_00019447_default;
  }
  *puVar1 = param_2;
switchD_00019447_default:
  local_60[0] = '\x11';
  local_60[1] = '\0';
  local_60[2] = '\0';
  local_60[3] = '\0';
  local_60[4] = '\0';
  local_60[5] = '\0';
  local_60[6] = '\0';
  local_60[7] = '\0';
  local_60[8] = '\0';
  local_60[9] = '\0';
  local_60[10] = '\0';
  local_60[0xb] = '\0';
  local_60[0xc] = '\0';
  local_60[0xd] = '\0';
  local_60[0xe] = '\0';
  local_60[0xf] = '\0';
  local_60[0x10] = '\0';
  local_60[0x11] = '\0';
  local_60[0x12] = '\0';
  local_60[0x13] = '\0';
  local_60[0x14] = '\0';
  local_60[0x15] = '\0';
  local_60[0x16] = '\0';
  local_60[0x17] = '\0';
  local_60[0x18] = '\0';
  local_60[0x19] = '\0';
  local_60[0x1a] = '\0';
  local_60[0x1b] = '\0';
  local_60[0x1c] = '\0';
  local_60[0x1d] = '\0';
  local_60[0x1e] = '\0';
  local_60[0x1f] = '\0';
  local_60[0x20] = '\0';
  local_60[0x21] = '\0';
  local_60[0x22] = '\0';
  local_60[0x23] = '\0';
  local_60[0x24] = '\0';
  local_60[0x25] = '\0';
  local_60[0x26] = '\0';
  local_60[0x27] = '\0';
  local_60[0x28] = '\0';
  local_60[0x29] = '\0';
  local_60[0x2a] = '\0';
  local_60[0x2b] = '\0';
  local_60[0x2c] = '\0';
  local_60[0x2d] = '\0';
  local_60[0x2e] = '\0';
  local_60[0x2f] = '\0';
  local_60[0x30] = '\0';
  local_60[0x31] = '\0';
  local_60[0x32] = '\0';
  local_60[0x33] = '\0';
  local_60[0x34] = '\0';
  local_60[0x35] = '\0';
  local_60[0x36] = '\0';
  local_60[0x37] = '\0';
  local_60[0x38] = '\0';
  local_60[0x39] = '\0';
  local_60[0x3a] = '\0';
  local_60[0x3b] = '\0';
  sendHostToGucMessage(this,local_60,0,0);
  _IOLockUnlock(*(undefined8 *)(this + 0x460));
  return;
}



// IGGuC::updateThermalStallStats(ThermalStallStats*)

void __thiscall IGGuC::updateThermalStallStats(IGGuC *this,undefined8 *param_1)

{
  long lVar1;
  
  if ((param_1 != (undefined8 *)0x0) &&
     ((*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x40000000000) != 0)) {
    lVar1 = *(long *)(this + 0x478);
    param_1[1] = *(undefined8 *)(lVar1 + 0x288);
    param_1[2] = *(undefined8 *)(lVar1 + 0x290);
    *param_1 = *(undefined8 *)(lVar1 + 0x280);
    param_1[3] = (ulong)*(uint *)(lVar1 + 0x298);
    param_1[4] = (ulong)*(uint *)(lVar1 + 0x2a0);
    *(undefined4 *)(param_1 + 5) = *(undefined4 *)(lVar1 + 0x2a8);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::bind(IGHardwareContext*, int, unsigned char)

int __cdecl IGGuC::bind(int param_1,sockaddr *param_2,socklen_t param_3)

{
  short *psVar1;
  short sVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  int iVar7;
  long lVar8;
  undefined8 uVar9;
  IGSharedMappedBuffer *this;
  ulong uVar10;
  undefined4 in_register_0000003c;
  sockaddr *this_00;
  long lVar11;
  char *pcVar12;
  socklen_t param2;
  long lVar13;
  char local_88 [2];
  undefined2 local_86;
  undefined8 local_84;
  undefined8 local_7c;
  undefined8 local_74;
  undefined8 local_6c;
  undefined8 local_64;
  undefined8 local_5c;
  undefined8 local_54;
  IGGCObject *local_48;
  sockaddr *local_40;
  socklen_t local_34;
  
  this_00 = (sockaddr *)CONCAT44(in_register_0000003c,param_1);
  local_40 = param_2;
  lVar8 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this_00 + 0x6d));
  lVar13 = (long)(int)param_3;
  lVar11 = lVar13 * 0x80;
  uVar9._0_1_ = this_00[0x46].sa_len;
  uVar9._1_1_ = this_00[0x46].sa_family;
  uVar9._2_1_ = this_00[0x46].sa_data[0];
  uVar9._3_1_ = this_00[0x46].sa_data[1];
  uVar9._4_1_ = this_00[0x46].sa_data[2];
  uVar9._5_1_ = this_00[0x46].sa_data[3];
  uVar9._6_1_ = this_00[0x46].sa_data[4];
  uVar9._7_1_ = this_00[0x46].sa_data[5];
  _IOLockLock(uVar9);
  sVar2 = *(short *)(lVar8 + 0x4c + lVar11);
  *(short *)(lVar8 + 0x4c + lVar11) = sVar2 + 1;
  if (sVar2 == 0) {
    local_34 = param_3;
    this = IGSharedMappedBuffer::withOptions
                     (*(long *)(*(long *)(this_00 + 1) + 0x150),*(long *)__got::_page_size << 3,2,0)
    ;
    if (this == (IGSharedMappedBuffer *)0x0) {
      psVar1 = (short *)(lVar11 + 0x4c + lVar8);
      *psVar1 = *psVar1 + -1;
    }
    else {
      lVar4._0_1_ = this_00[1].sa_len;
      lVar4._1_1_ = this_00[1].sa_family;
      lVar4._2_1_ = this_00[1].sa_data[0];
      lVar4._3_1_ = this_00[1].sa_data[1];
      lVar4._4_1_ = this_00[1].sa_data[2];
      lVar4._5_1_ = this_00[1].sa_data[3];
      lVar4._6_1_ = this_00[1].sa_data[4];
      lVar4._7_1_ = this_00[1].sa_data[5];
      IntelAccelerator::transferOwnership(lVar4,(IGMappedBuffer *)this);
      lVar5._0_1_ = this_00[1].sa_len;
      lVar5._1_1_ = this_00[1].sa_family;
      lVar5._2_1_ = this_00[1].sa_data[0];
      lVar5._3_1_ = this_00[1].sa_data[1];
      lVar5._4_1_ = this_00[1].sa_data[2];
      lVar5._5_1_ = this_00[1].sa_data[3];
      lVar5._6_1_ = this_00[1].sa_data[4];
      lVar5._7_1_ = this_00[1].sa_data[5];
      local_48 = IGWorkQueueAk::withStorageResource((IGGCObject *)this,lVar5,this_00);
      if (local_48 != (IGGCObject *)0x0) {
        (**(code **)(*(long *)this + 0x28))(this);
        *(IGGCObject **)(*(long *)(*(long *)(this_00[0x6d].sa_data + 6) + 0x10) + lVar13 * 8) =
             local_48;
        uVar9 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this);
        *(undefined8 *)(lVar11 + 0x44 + lVar8) = uVar9;
        pcVar12 = this_00[0x5c].sa_data + lVar13 * 4 + 10;
        IntelAccelerator::addTrackingRecord
                  (*(IntelAccelerator **)(this_00 + 1),2,param_3,*(int *)pcVar12,
                   (int)*(undefined8 *)(lVar11 + 0x44 + lVar8),
                   *(undefined8 *)(local_40[8].sa_data + 7));
        invalidateTLB((IGGuC *)this_00);
        param2 = local_34;
        if (*(int *)pcVar12 < 0) {
          local_40 = this_00;
          _IOLog("[IGPU] Prior unbind failure UkRefCount %d for work queue %d, bind count %d.\n",
                 (int)*(short *)(lVar11 + 0xc + lVar8),local_34);
          _kprintf("[IGPU] Prior unbind failure UkRefCount %d for work queue %d, bind count %d.\n",
                   (int)*(short *)(lVar11 + 0xc + lVar8),param2,*(int *)pcVar12);
          this_00 = local_40;
          local_88[0] = '\x06';
          local_88[1] = '\0';
          local_86 = (undefined2)param2;
          local_84 = 0;
          local_7c = 0;
          local_74 = 0;
          local_6c = 0;
          local_64 = 0;
          local_5c = 0;
          local_54 = 0;
          uVar10 = sendHostToGucMessage((IGGuC *)local_40,local_88,0x40000,0);
          if ((char)uVar10 == '\0') {
            _IOLog("[IGPU] Failed to send unbind-work-queue %d notice to firmware during bind recovery, bind count %d.\n"
                   ,local_34,*(int *)pcVar12);
            param2 = local_34;
            _kprintf("[IGPU] Failed to send unbind-work-queue %d notice to firmware during bind recovery, bind count %d.\n"
                     ,local_34,*(int *)pcVar12);
          }
          else {
            _OSIncrementAtomic(pcVar12);
          }
        }
        local_88[0] = '\x05';
        local_88[1] = '\0';
        local_86 = (undefined2)param2;
        local_84 = 0;
        local_7c = 0;
        local_74 = 0;
        local_6c = 0;
        local_64 = 0;
        local_5c = 0;
        local_54 = 0;
        uVar10 = sendHostToGucMessage((IGGuC *)this_00,local_88,0x40000,0);
        if ((char)uVar10 == '\0') {
          _IOLog("[IGPU] Failed to send bind-work-queue %d notice to firmware, bind count %d, retry later.\n"
                 ,param2,*(int *)pcVar12);
          _kprintf("[IGPU] Failed to send bind-work-queue %d notice to firmware, bind count %d, retry later.\n"
                   ,param2,*(int *)pcVar12);
          _OSIncrementAtomic(pcVar12);
        }
        goto LAB_000195a7;
      }
      psVar1 = (short *)(lVar11 + 0x4c + lVar8);
      *psVar1 = *psVar1 + -1;
      (**(code **)(*(long *)this + 0x28))(this);
    }
    uVar6._0_1_ = this_00[0x46].sa_len;
    uVar6._1_1_ = this_00[0x46].sa_family;
    uVar6._2_1_ = this_00[0x46].sa_data[0];
    uVar6._3_1_ = this_00[0x46].sa_data[1];
    uVar6._4_1_ = this_00[0x46].sa_data[2];
    uVar6._5_1_ = this_00[0x46].sa_data[3];
    uVar6._6_1_ = this_00[0x46].sa_data[4];
    uVar6._7_1_ = this_00[0x46].sa_data[5];
    _IOLockUnlock(uVar6);
    iVar7 = 0;
  }
  else {
LAB_000195a7:
    uVar3._0_1_ = this_00[0x46].sa_len;
    uVar3._1_1_ = this_00[0x46].sa_family;
    uVar3._2_1_ = this_00[0x46].sa_data[0];
    uVar3._3_1_ = this_00[0x46].sa_data[1];
    uVar3._4_1_ = this_00[0x46].sa_data[2];
    uVar3._5_1_ = this_00[0x46].sa_data[3];
    uVar3._6_1_ = this_00[0x46].sa_data[4];
    uVar3._7_1_ = this_00[0x46].sa_data[5];
    uVar9 = _IOLockUnlock(uVar3);
    iVar7 = (int)CONCAT71((int7)((ulong)uVar9 >> 8),1);
  }
  return iVar7;
}



// IGGuC::rebind(IGHardwareContext*, unsigned char)

undefined4 __thiscall IGGuC::rebind(void *this,IGHardwareContext *param_2,IGHardwareContext param_3)

{
  undefined4 uVar1;
  ulong uVar2;
  
  if (((((*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) & 0x18000) != 0x8000) &&
       (param_2[0x78] != param_3)) && (param_2[0x6c] == (IGHardwareContext)0x0)) &&
     (uVar2 = IGHardwareContext::waitForIdle(param_2), (char)uVar2 != '\0')) {
    (**(code **)(*(long *)this + 0x1d8))(this,param_2);
    uVar1 = IGAccelTask::getRCSStampIndex(*(IGAccelTask **)(param_2 + 0x58),(uint)(byte)param_3);
    (**(code **)(*(long *)this + 0x1c8))(this,param_2,uVar1,param_3);
    return uVar1;
  }
  return *(undefined4 *)(*(long *)(param_2 + 0xb0) + 0x20);
}



// IGGuC::unbind(IGHardwareContext*)

void __thiscall IGGuC::unbind(IGGuC *this,long param_1)

{
  short sVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  int iVar5;
  long lVar6;
  IGGuC *pIVar7;
  char local_78 [2];
  undefined2 local_76;
  undefined8 local_74;
  undefined8 local_6c;
  undefined8 local_64;
  undefined8 local_5c;
  undefined8 local_54;
  undefined8 local_4c;
  undefined8 local_44;
  ulong local_38;
  
  if (*(long *)(param_1 + 0xb0) != 0) {
    iVar5 = *(int *)(*(long *)(param_1 + 0xb0) + 0x20);
    lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
    local_38 = (ulong)iVar5;
    lVar6 = local_38 * 0x80;
    _IOLockLock(*(undefined8 *)(this + 0x460));
    uVar2 = local_38;
    sVar1 = *(short *)(lVar3 + 0x4c + lVar6);
    *(short *)(lVar3 + 0x4c + lVar6) = sVar1 + -1;
    iVar5 = (int)local_38;
    IntelAccelerator::addTrackingRecord
              (*(IntelAccelerator **)(this + 0x10),3,iVar5,(int)sVar1,
               (int)*(undefined8 *)(lVar3 + 0x44 + lVar6),*(undefined8 *)(param_1 + 0x89));
    if (sVar1 == 1) {
      local_78[0] = '\x06';
      local_78[1] = '\0';
      local_76 = (undefined2)uVar2;
      local_74 = 0;
      local_6c = 0;
      local_64 = 0;
      local_5c = 0;
      local_54 = 0;
      local_4c = 0;
      local_44 = 0;
      uVar4 = sendHostToGucMessage(this,local_78,0x40000,0);
      if ((char)uVar4 == '\0') {
        pIVar7 = this + uVar2 * 4 + 0x5cc;
        _IOLog("[IGPU] Failed to send unbind-work-queue %d notice to firmware, bind count %d, retry later.\n"
               ,uVar2 & 0xffffffff,*(int *)pIVar7);
        _kprintf("[IGPU] Failed to send unbind-work-queue %d notice to firmware, bind count %d, retry later.\n"
                 ,iVar5,*(int *)pIVar7);
        _OSDecrementAtomic(pIVar7);
      }
      IntelAccelerator::transferOwnership
                (*(long *)(this + 0x10),
                 *(IGMappedBuffer **)
                  (*(long *)(*(long *)(*(long *)(this + 0x6d8) + 0x10) + uVar2 * 8) + 0x38));
      (**(code **)(**(long **)(*(long *)(*(long *)(this + 0x6d8) + 0x10) + uVar2 * 8) + 0x28))();
      *(undefined8 *)(*(long *)(*(long *)(this + 0x6d8) + 0x10) + uVar2 * 8) = 0;
    }
    _IOLockUnlock(*(undefined8 *)(this + 0x460));
  }
  return;
}



// IGGuC::signalDisplayStampUpdate(int)

void __thiscall IGGuC::signalDisplayStampUpdate(IGGuC *this,undefined2 param_1)

{
  char local_48 [2];
  undefined2 local_46;
  undefined8 local_44;
  undefined8 local_3c;
  undefined8 local_34;
  undefined8 local_2c;
  undefined8 local_24;
  undefined8 local_1c;
  undefined8 local_14;
  
  local_48[0] = '\x12';
  local_48[1] = '\0';
  local_44 = 0;
  local_3c = 0;
  local_34 = 0;
  local_2c = 0;
  local_24 = 0;
  local_1c = 0;
  local_14 = 0;
  local_46 = param_1;
  sendHostToGucMessage(this,local_48,0,0);
  return;
}



// IGGuC::getNextStampIndex(IGHwCsType, unsigned char)

void __thiscall IGGuC::getNextStampIndex(IGGuC *this,byte param_1,ulong param_2)

{
  int iVar1;
  ulong uVar2;
  
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    IGScheduler::getNextStampIndex(this,(int)param_1);
    return;
  }
  if (param_1 == 0) {
    uVar2 = param_2 & 0xff;
    iVar1 = *(int *)(this + uVar2 * 4 + 0x807f8);
    *(int *)(this + uVar2 * 4 + 0x807f8) = iVar1 + 1;
    if (*(int *)(&DAT_000aae90 + uVar2 * 4) <= iVar1) {
      *(undefined4 *)(this + uVar2 * 4 + 0x807f8) = *(undefined4 *)(&DAT_000aaea0 + uVar2 * 4);
    }
  }
  else {
    uVar2 = (ulong)param_1;
    iVar1 = *(int *)(this + uVar2 * 4 + 0x807e4);
    *(int *)(this + uVar2 * 4 + 0x807e4) = iVar1 + 1;
    if (*(int *)(&DAT_00121bcd + uVar2 * 0x79) <= iVar1) {
      *(undefined4 *)(this + uVar2 * 4 + 0x807e4) = *(undefined4 *)(&DAT_00121bc9 + uVar2 * 0x79);
    }
  }
  return;
}



// IGGuC::waitForWorkQueueSpace(unsigned int*, unsigned int*, int, IGUkWorkQueueDesc volatile*)

ulong __thiscall
IGGuC::waitForWorkQueueSpace(IGGuC *this,uint *param_1,uint *param_2,int param_3,uint *param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  undefined8 unaff_R12;
  ulong uVar5;
  long lVar6;
  
  uVar3 = param_4[0x10];
  *param_1 = uVar3;
  uVar1 = uVar3 + 1 & 0x1ff;
  *param_2 = uVar1;
  lVar6 = (long)param_3;
  uVar3 = *(uint *)(this + lVar6 * 4 + 0x4bc);
  uVar5 = CONCAT71((int7)((ulong)unaff_R12 >> 8),1);
  if (uVar1 == uVar3) {
    uVar3 = *param_4;
    *(uint *)(this + lVar6 * 4 + 0x4bc) = uVar3;
    if (*param_2 == uVar3) {
      iVar4 = 1000000;
      uVar5 = 0;
      do {
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
        _thread_block(0);
        uVar3 = *param_4;
        *(uint *)(this + lVar6 * 4 + 0x4bc) = uVar3;
        if (*param_2 != uVar3) goto LAB_00019bac;
        iVar4 = iVar4 + -1;
        uVar5 = (ulong)(iVar4 == 0);
      } while (iVar4 != 0);
      _IOLog("[IGPU] Work queue at index %d is not draining! Head:0x%x\n",param_3);
      _kprintf("[IGPU] Work queue at index %d is not draining! Head:0x%x\n",param_3,
               *(uint *)(this + lVar6 * 4 + 0x4bc));
      uVar3 = *(uint *)(this + lVar6 * 4 + 0x4bc);
LAB_00019bac:
      uVar5 = uVar5 ^ 1;
    }
  }
  uVar1 = *param_1;
  if (uVar1 != uVar3) {
    uVar2 = uVar1 + 0x200;
    if (uVar3 < uVar1) {
      uVar2 = uVar1;
    }
    if (0x100 < uVar2 - uVar3) {
      *(uint *)(this + lVar6 * 4 + 0x4bc) = *param_4;
    }
  }
  return uVar5 & 0xffffffff;
}



// IGGuC::waitForHostToGucActionResponse(IGHostToGucMessage const*, unsigned int, char const*)

bool __thiscall
IGGuC::waitForHostToGucActionResponse(IGGuC *this,char *param_1,uint param_2,undefined8 param_3)

{
  ulong uVar1;
  bool bVar2;
  
  uVar1 = actionResponseWait(this);
  bVar2 = (char)uVar1 == '\0';
  if (bVar2) {
    waitForHostToGucActionResponse(this,param_1,param_2,param_3);
  }
  else {
    this[0x470] = (IGGuC)0x0;
  }
  return !bVar2;
}



// IGGuC::getMetaIndex(int, IGHardwareContext*, bool)

void __thiscall IGGuC::getMetaIndex(IGGuC *this,int param_1,long param_2,char param_3)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  bool bVar6;
  
  lVar3 = *(long *)(*(long *)(param_2 + 0xb0) + 0xe8);
  if ((lVar3 == 0) || (lVar5 = *(long *)(lVar3 + 0x20), lVar5 == 0)) {
    lVar5 = 0;
  }
  else {
    _OSIncrementAtomic();
  }
  if (_graphicsTracePointEnable == 0) {
    bVar6 = false;
    lVar2 = 0;
  }
  else {
    bVar6 = *(int *)(*(long *)(this + 0x10) + 0xe48) != 0;
    lVar2 = 0;
    if (bVar6) {
      lVar2 = lVar3;
    }
  }
  lVar3 = (long)param_1;
  lVar4 = (ulong)*(uint *)(this + lVar3 * 4 + 0x806e0) * 0x10;
  if (((*(long *)(this + lVar4 + 0x6e0 + lVar3 * 0x2000) != lVar5) ||
      (*(long *)(this + lVar4 + 0x6e8 + lVar3 * 0x2000) != lVar2)) ||
     ((bVar6 && ((*(int *)(this + 0x807e0) != param_1 || (param_3 != '\0')))))) {
    uVar1 = *(uint *)(this + lVar3 * 4 + 0x806e0) + 1 & 0x1ff;
    *(uint *)(this + lVar3 * 4 + 0x806e0) = uVar1;
    lVar4 = (ulong)uVar1 * 0x10;
    *(long *)(this + lVar4 + 0x6e0 + lVar3 * 0x2000) = lVar5;
    *(long *)(this + lVar4 + 0x6e8 + lVar3 * 0x2000) = lVar2;
    *(int *)(this + 0x807e0) = param_1;
  }
  return;
}



// IGGuC::processRetiredMetaData(unsigned int, IGUkWorkItem*)

void __thiscall IGGuC::processRetiredMetaData(IGGuC *this,ulong param_2_00,long param_2)

{
  long *plVar1;
  byte bVar2;
  long lVar3;
  ulong uVar4;
  long lVar5;
  
  lVar3 = *(long *)(this + 0x10);
  if (((&DAT_000011c0)[lVar3] & 0x20) == 0) {
    lVar5 = (ulong)*(uint *)(param_2 + 0x1c) * 0x10;
    if (*(long *)(this + lVar5 + 0x6e0 + (param_2_00 & 0xffffffff) * 0x2000) != 0) {
      uVar4 = ((ulong)*(uint *)(param_2 + 0x34) * 10000) / _g_timestampFreqPerDenominator;
      bVar2 = *(byte *)(param_2 + 0x15);
      plVar1 = (long *)(*(long *)(this + lVar5 + 0x6e0 + (param_2_00 & 0xffffffff) * 0x2000) + 0x10
                       + (ulong)bVar2 * 8);
      *plVar1 = *plVar1 + uVar4;
      plVar1 = (long *)(*(long *)(lVar3 + 0xe10) + 400 + (ulong)bVar2 * 0x70);
      *plVar1 = *plVar1 + uVar4;
      _OSAddAtomic64(-(ulong)*(uint *)(param_2 + 0x18));
    }
    if (*(IGTelemetryUsage **)(this + lVar5 + 0x6e8 + (param_2_00 & 0xffffffff) * 0x2000) !=
        (IGTelemetryUsage *)0x0) {
      IGTelemetryUsage::checkForCompletedSamples
                (*(IGTelemetryUsage **)(this + lVar5 + 0x6e8 + (param_2_00 & 0xffffffff) * 0x2000),0
                 ,*(long *)(param_2 + 0x24),*(long *)(param_2 + 0x2c));
      return;
    }
  }
  return;
}



// IGGuC::push(IGHardwareContext*, unsigned int, unsigned int, bool, bool)

ulong __thiscall
IGGuC::push(IGGuC *this,long param_1,undefined4 param_2,undefined4 param_3,uint param_4,uint param_5
           )

{
  uint param1;
  IGSharedMappedBuffer *this_00;
  long *plVar1;
  IGGuC *pIVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  uint *puVar7;
  undefined4 local_e0;
  undefined8 local_dc;
  undefined8 local_d4;
  undefined8 local_cc;
  undefined8 local_c4;
  undefined8 local_bc;
  undefined8 local_b4;
  undefined8 local_ac;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined4 local_7c;
  uint local_78;
  uint local_74;
  uint local_70;
  undefined4 local_6c;
  undefined4 local_68;
  uint local_64;
  undefined4 local_60;
  IGGuC *local_58;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_40;
  undefined4 local_38;
  
  local_90 = 0;
  local_48 = 0;
  local_4c = 0;
  local_40 = 0;
  local_38 = 0;
  local_88 = 0;
  local_a0 = 0;
  local_98 = 0;
  local_7c = 0;
  local_60 = 0;
  param1 = *(uint *)(*(long *)(param_1 + 0xb0) + 0x20);
  lVar6 = (long)(int)param1;
  local_70 = param_5;
  local_6c = param_3;
  local_68 = param_2;
  local_64 = param_4;
  if (0 < *(int *)(this + lVar6 * 4 + 0x5cc)) {
    _IOLog("[IGPU] Send prior bind-work-queue %d notice to firmware, bind count %d.\n",param1);
    local_58 = this + lVar6 * 4 + 0x5cc;
    _kprintf("[IGPU] Send prior bind-work-queue %d notice to firmware, bind count %d.\n",param1,
             *(int *)(this + lVar6 * 4 + 0x5cc));
    local_e0 = CONCAT22((short)param1,5);
    local_dc = 0;
    local_d4 = 0;
    local_cc = 0;
    local_c4 = 0;
    local_bc = 0;
    local_b4 = 0;
    local_ac = 0;
    uVar3 = sendHostToGucMessage(this,(char *)&local_e0,0x40000,0);
    pIVar2 = local_58;
    if ((char)uVar3 == '\0') {
      uVar3 = 0;
      _IOLog("[IGPU] Failed again to send bind-work-queue %d notice to firmware, bind count %d.\n",
             param1,*(int *)local_58);
      _kprintf("[IGPU] Failed again to send bind-work-queue %d notice to firmware, bind count %d.\n"
               ,param1,*(int *)pIVar2);
      goto LAB_0001a0a2;
    }
    _OSDecrementAtomic(local_58);
  }
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
  puVar7 = (uint *)(lVar6 * 0x80 + lVar4);
  this_00 = *(IGSharedMappedBuffer **)(param_1 + 0xa0);
  local_58 = (IGGuC *)IGSharedMappedBuffer::getVirtualAddress(this_00);
  local_90 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
  local_48 = local_68;
  local_4c = local_6c;
  local_40 = *(undefined4 *)(*(long *)(*(long *)(param_1 + 0xb0) + 0x130) + 0x44);
  local_e0 = (*(byte *)(param_1 + 0x78) & 0x1f) * 0x10000 +
             ((uint)*(byte *)(param_1 + 0x6c) << 8 | (local_70 & 0xff) * 4 + (local_64 & 0xff) * 2)
             + 1;
  local_88 = getMetaIndex(this,param1,param_1,(char)local_70);
  local_38 = 1;
  *(int *)((long)local_58 + 0x40) = *(int *)((long)local_58 + 0x40) + 1;
  *(ulong *)(param_1 + 0xb8) = (*(ulong *)(param_1 + 0xb8) & 0x7fffffffffffffff) + 1;
  local_78 = 0;
  local_74 = 0;
  uVar3 = waitForWorkQueueSpace(this,&local_78,&local_74,param1,puVar7);
  if ((char)uVar3 == '\0') {
    push((ulong *)(param_1 + 0xb8),(ulong)param1);
    return 0;
  }
  lVar6 = *(long *)(*(long *)(*(long *)(this + 0x6d8) + 0x10) + lVar6 * 8);
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(lVar6 + 0x38));
  lVar5 = (ulong)local_78 * 0x40;
  *(undefined8 *)(lVar5 + lVar4) = local_90;
  *(undefined4 *)(lVar5 + 8 + lVar4) = local_48;
  *(undefined4 *)(lVar5 + 0xc + lVar4) = local_4c;
  *(undefined4 *)(lVar5 + 0x10 + lVar4) = local_40;
  *(int *)(lVar5 + 0x14 + lVar4) = local_e0;
  *(undefined8 *)(lVar5 + 0x1c + lVar4) = local_88;
  *(undefined8 *)(lVar5 + 0x24 + lVar4) = local_a0;
  *(undefined8 *)(lVar5 + 0x2c + lVar4) = local_98;
  *(undefined4 *)(lVar5 + 0x18 + lVar4) = local_38;
  *(undefined4 *)(lVar5 + 0x34 + lVar4) = local_7c;
  *(undefined4 *)(lVar5 + 0x38 + lVar4) = local_60;
  plVar1 = *(long **)(*(long *)(this + 0x10) + 0x380);
  lVar4 = IGMappedBuffer::getAccessEvent(*(IGMappedBuffer **)(lVar6 + 0x38));
  (**(code **)(*plVar1 + 0x1d0))(plVar1,param1,lVar4);
  puVar7[0x10] = local_74;
  ringDoorbell(this,(ulong)local_e0._1_1_);
  uVar3 = CONCAT71((int7)((ulong)lVar6 >> 8),1);
LAB_0001a0a2:
  return uVar3 & 0xffffffff;
}



// IGGuC::ringDoorbell(IGHwCsType)

void __thiscall IGGuC::ringDoorbell(IGGuC *this,ulong param_1)

{
  undefined8 uVar1;
  char cVar2;
  long lVar3;
  ulong arg1;
  uint uVar4;
  ulong uVar5;
  uint uVar6;
  undefined8 *puVar7;
  bool bVar8;
  
  arg1 = param_1 & 0xffffffff;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00219,arg1,0,0,0,0);
    }
  }
  _OSIncrementAtomic(this + 0x5c8);
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x5c0));
  puVar7 = (undefined8 *)(arg1 * 0x40 + lVar3);
  IntelAccelerator::dpsmKickTimer(*(IntelAccelerator **)(this + 0x10));
  uVar6 = 0;
  do {
    uVar1 = *puVar7;
    uVar4 = (int)((ulong)uVar1 >> 0x20) + 1;
    uVar5 = (ulong)uVar4;
    if (uVar4 == 0) {
      uVar5 = 1;
    }
    cVar2 = _OSCompareAndSwap64(uVar1,uVar5 << 0x20 | 1,puVar7);
  } while ((cVar2 == '\0') && (bVar8 = uVar6 < 999, uVar6 = uVar6 + 1, bVar8));
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0021a,arg1,0,0,0,0);
      return;
    }
  }
  return;
}



// IGGuC::ringAllDoorbells()

void __thiscall IGGuC::ringAllDoorbells(IGGuC *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(this + 0x10);
  uVar2 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar2 != 0) {
    uVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
      }
    }
    do {
      ringDoorbell(this,uVar3 & 0xff);
      if (3 < uVar3) {
        return;
      }
      uVar2 = -2L << ((byte)uVar3 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
      uVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
        }
      }
    } while (uVar2 != 0);
  }
  return;
}



// IGGuC::isGpuIdle() const

ulong __thiscall IGGuC::isGpuIdle(IGGuC *this)

{
  int iVar1;
  int iVar2;
  long lVar3;
  byte bVar4;
  undefined8 unaff_RBX;
  undefined7 uVar6;
  ulong uVar5;
  bool bVar7;
  
  iVar1 = *(int *)(this + 0x5c8);
  lVar3 = *(long *)(this + 0x478);
  iVar2 = *(int *)(lVar3 + 0x240);
  if (*(int *)(lVar3 + 0x1c0) == 0) {
    bVar7 = *(int *)(lVar3 + 0x200) == 0;
    uVar6 = (undefined7)((ulong)unaff_RBX >> 8);
  }
  else {
    bVar7 = false;
    uVar6 = 0;
  }
  bVar4 = (**(code **)(**(long **)(*(long *)(this + 0x10) + 0x380) + 0x170))();
  if (iVar1 == iVar2) {
    uVar5 = CONCAT71(uVar6,bVar7 & bVar4);
  }
  else {
    uVar5 = 0;
  }
  return uVar5 & 0xffffffff;
}



// IGGuC::isContextIdle(IGHardwareContext const*) const

undefined4 __thiscall IGGuC::isContextIdle(IGGuC *this,long param_1)

{
  undefined4 uVar1;
  undefined8 *puVar2;
  
  puVar2 = (undefined8 *)
           IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_1 + 0xa0));
  if (((*(int *)(puVar2 + 8) == *(int *)(puVar2 + 4)) && (*(int *)(puVar2 + 5) == 0)) &&
     (*(int *)((long)puVar2 + 0x24) == 0)) {
    uVar1 = (**(code **)(**(long **)(*(long *)(this + 0x10) + 0x380) + 400))
                      (*(long **)(*(long *)(this + 0x10) + 0x380),*(long *)(param_1 + 0xb0) + 0x138)
    ;
  }
  else {
    uVar1 = 0;
  }
  if (*(int *)((long)puVar2 + 0x1c) != 0) {
    _IOLog("[IGPU] Encountered %d bad work queue items for context %lld on channel %d\n",
           *(int *)((long)puVar2 + 0x1c),*puVar2,*(undefined4 *)(puVar2 + 3));
  }
  return uVar1;
}



// IGGuC::waitForGpuIdle()

void __thiscall IGGuC::waitForGpuIdle(IGGuC *this)

{
  ulong uVar1;
  char local_50 [64];
  
  IGAccelEventMachine::finishAllStamps
            (*(IGAccelEventMachine **)(*(long *)(this + 0x10) + 0x380),0x2b);
  local_50[0] = '\b';
  local_50[1] = '\0';
  local_50[2] = '\0';
  local_50[3] = '\0';
  local_50[4] = '\0';
  local_50[5] = '\0';
  local_50[6] = '\0';
  local_50[7] = '\0';
  local_50[8] = '\0';
  local_50[9] = '\0';
  local_50[10] = '\0';
  local_50[0xb] = '\0';
  local_50[0xc] = '\0';
  local_50[0xd] = '\0';
  local_50[0xe] = '\0';
  local_50[0xf] = '\0';
  local_50[0x10] = '\0';
  local_50[0x11] = '\0';
  local_50[0x12] = '\0';
  local_50[0x13] = '\0';
  local_50[0x14] = '\0';
  local_50[0x15] = '\0';
  local_50[0x16] = '\0';
  local_50[0x17] = '\0';
  local_50[0x18] = '\0';
  local_50[0x19] = '\0';
  local_50[0x1a] = '\0';
  local_50[0x1b] = '\0';
  local_50[0x1c] = '\0';
  local_50[0x1d] = '\0';
  local_50[0x1e] = '\0';
  local_50[0x1f] = '\0';
  local_50[0x20] = '\0';
  local_50[0x21] = '\0';
  local_50[0x22] = '\0';
  local_50[0x23] = '\0';
  local_50[0x24] = '\0';
  local_50[0x25] = '\0';
  local_50[0x26] = '\0';
  local_50[0x27] = '\0';
  local_50[0x28] = '\0';
  local_50[0x29] = '\0';
  local_50[0x2a] = '\0';
  local_50[0x2b] = '\0';
  local_50[0x2c] = '\0';
  local_50[0x2d] = '\0';
  local_50[0x2e] = '\0';
  local_50[0x2f] = '\0';
  local_50[0x30] = '\0';
  local_50[0x31] = '\0';
  local_50[0x32] = '\0';
  local_50[0x33] = '\0';
  local_50[0x34] = '\0';
  local_50[0x35] = '\0';
  local_50[0x36] = '\0';
  local_50[0x37] = '\0';
  local_50[0x38] = '\0';
  local_50[0x39] = '\0';
  local_50[0x3a] = '\0';
  local_50[0x3b] = '\0';
  uVar1 = sendHostToGucMessage(this,local_50,0x40000,0);
  if ((char)uVar1 == '\0') {
    _IOLog("[IGPU] Failed to send wait-for-idle request to firmware\n");
    _kprintf("[IGPU] Failed to send wait-for-idle request to firmware\n");
  }
  return;
}



// IGGuC::ping(unsigned int)

void __thiscall IGGuC::ping(IGGuC *this,uint param_1)

{
  ulong uVar1;
  char local_50 [64];
  
  if ((param_1 >> 0x13 & 1) == 0) {
    local_50[0] = '\t';
    local_50[1] = '\0';
    local_50[2] = '\0';
    local_50[3] = '\0';
    local_50[4] = '\0';
    local_50[5] = '\0';
    local_50[6] = '\0';
    local_50[7] = '\0';
    local_50[8] = '\0';
    local_50[9] = '\0';
    local_50[10] = '\0';
    local_50[0xb] = '\0';
    local_50[0xc] = '\0';
    local_50[0xd] = '\0';
    local_50[0xe] = '\0';
    local_50[0xf] = '\0';
    local_50[0x10] = '\0';
    local_50[0x11] = '\0';
    local_50[0x12] = '\0';
    local_50[0x13] = '\0';
    local_50[0x14] = '\0';
    local_50[0x15] = '\0';
    local_50[0x16] = '\0';
    local_50[0x17] = '\0';
    local_50[0x18] = '\0';
    local_50[0x19] = '\0';
    local_50[0x1a] = '\0';
    local_50[0x1b] = '\0';
    local_50[0x1c] = '\0';
    local_50[0x1d] = '\0';
    local_50[0x1e] = '\0';
    local_50[0x1f] = '\0';
    local_50[0x20] = '\0';
    local_50[0x21] = '\0';
    local_50[0x22] = '\0';
    local_50[0x23] = '\0';
    local_50[0x24] = '\0';
    local_50[0x25] = '\0';
    local_50[0x26] = '\0';
    local_50[0x27] = '\0';
    local_50[0x28] = '\0';
    local_50[0x29] = '\0';
    local_50[0x2a] = '\0';
    local_50[0x2b] = '\0';
    local_50[0x2c] = '\0';
    local_50[0x2d] = '\0';
    local_50[0x2e] = '\0';
    local_50[0x2f] = '\0';
    local_50[0x30] = '\0';
    local_50[0x31] = '\0';
    local_50[0x32] = '\0';
    local_50[0x33] = '\0';
    local_50[0x34] = '\0';
    local_50[0x35] = '\0';
    local_50[0x36] = '\0';
    local_50[0x37] = '\0';
    local_50[0x38] = '\0';
    local_50[0x39] = '\0';
    local_50[0x3a] = '\0';
    local_50[0x3b] = '\0';
    uVar1 = sendHostToGucMessage(this,local_50,param_1 | 0xc0000,0);
    if ((char)uVar1 == '\0') {
      _IOLog("[IGPU] Failed to send ping request to firmware\n");
      _kprintf("[IGPU] Failed to send ping request to firmware\n");
    }
  }
  return;
}



// IGGuC::setThermalAttribute(unsigned int)

void __thiscall IGGuC::setThermalAttribute(IGGuC *this,uint param_1)

{
  uintptr_t arg1;
  
  if (_graphicsTracePointEnable == 0) {
    arg1 = (uintptr_t)(int)((param_1 >> 8 & 0xff) - 1);
  }
  else {
    arg1 = (uintptr_t)(int)((param_1 >> 8 & 0xff) - 1);
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001b8,arg1,(ulong)(param_1 & 0xff),0,0,0);
    }
  }
  *(uint *)(this + arg1 * 4 + 0x480) = param_1 & 0xff;
  return;
}



// IGGuC::enableInterrupts()

void __thiscall IGGuC::enableInterrupts(IGGuC *this)

{
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),0x69676968);
  enableErrorInterrupts(this);
  return;
}



// IGGuC::enableErrorInterrupts()

void __thiscall IGGuC::enableErrorInterrupts(IGGuC *this)

{
  uint uVar1;
  long lVar2;
  IntelAccelerator *this_00;
  long lVar3;
  ulong uVar4;
  long lVar5;
  ulong uVar6;
  
  lVar2 = *(long *)(this + 0x10);
  uVar4 = *(ulong *)(&DAT_00001340 + lVar2);
  if (uVar4 != 0) {
    uVar6 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> uVar6 & 1) == 0; uVar6 = uVar6 + 1) {
      }
    }
    do {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
      this_00 = *(IntelAccelerator **)(this + 0x10);
      lVar5 = uVar6 * 0x79;
      uVar1 = *(uint *)(&DAT_00121bb5 + lVar5);
      lVar3 = *(long *)(this_00 + 0x1270);
      *(undefined4 *)(lVar3 + (ulong)*(uint *)(&DAT_00121bb1 + lVar5)) = 0xffffffff;
      *(undefined4 *)((ulong)uVar1 + lVar3) = 0xfffffffa;
      IntelAccelerator::SafeForceWake(this_00,0,7);
      IGInterruptBridge::enableInterrupt
                (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                 *(int *)(&DAT_00121bdd + lVar5));
      if (3 < uVar6) {
        return;
      }
      uVar4 = -2L << ((byte)uVar6 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar2);
      uVar6 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> uVar6 & 1) == 0; uVar6 = uVar6 + 1) {
        }
      }
    } while (uVar4 != 0);
  }
  return;
}



// IGGuC::disableInterrupts()

void __thiscall IGGuC::disableInterrupts(IGGuC *this)

{
  IGInterruptBridge::disableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),0x69676968);
  disableErrorInterrupts(this);
  return;
}



// IGGuC::disableErrorInterrupts()

void __thiscall IGGuC::disableErrorInterrupts(IGGuC *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(this + 0x10);
  uVar2 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar2 != 0) {
    uVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
      }
    }
    do {
      IGInterruptBridge::disableInterrupt
                (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                 *(int *)(&DAT_00121bdd + uVar3 * 0x79));
      if (3 < uVar3) {
        return;
      }
      uVar2 = -2L << ((byte)uVar3 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
      uVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
        }
      }
    } while (uVar2 != 0);
  }
  return;
}



// IGGuC::setPerfLogLevel(unsigned long long)

void __thiscall IGGuC::setPerfLogLevel(IGGuC *this,undefined2 param_1)

{
  char local_48 [2];
  undefined2 local_46;
  undefined8 local_44;
  undefined8 local_3c;
  undefined8 local_34;
  undefined8 local_2c;
  undefined8 local_24;
  undefined8 local_1c;
  undefined8 local_14;
  
  local_48[0] = '\v';
  local_48[1] = '\0';
  local_44 = 0;
  local_3c = 0;
  local_34 = 0;
  local_2c = 0;
  local_24 = 0;
  local_1c = 0;
  local_14 = 0;
  local_46 = param_1;
  sendHostToGucMessage(this,local_48,0,0);
  return;
}



// IGGuC::updateKnobs()

void __thiscall IGGuC::updateKnobs(IGGuC *this)

{
  ulong uVar1;
  char local_50 [64];
  
  _IOLockLock(*(undefined8 *)(this + 0x460));
  uVar1 = updateCredits(this);
  if ((char)uVar1 == '\0') {
    uVar1 = updateOptions(this);
    if ((char)uVar1 == '\0') goto LAB_0001a6cc;
  }
  local_50[0] = '\x11';
  local_50[1] = '\0';
  local_50[2] = '\0';
  local_50[3] = '\0';
  local_50[4] = '\0';
  local_50[5] = '\0';
  local_50[6] = '\0';
  local_50[7] = '\0';
  local_50[8] = '\0';
  local_50[9] = '\0';
  local_50[10] = '\0';
  local_50[0xb] = '\0';
  local_50[0xc] = '\0';
  local_50[0xd] = '\0';
  local_50[0xe] = '\0';
  local_50[0xf] = '\0';
  local_50[0x10] = '\0';
  local_50[0x11] = '\0';
  local_50[0x12] = '\0';
  local_50[0x13] = '\0';
  local_50[0x14] = '\0';
  local_50[0x15] = '\0';
  local_50[0x16] = '\0';
  local_50[0x17] = '\0';
  local_50[0x18] = '\0';
  local_50[0x19] = '\0';
  local_50[0x1a] = '\0';
  local_50[0x1b] = '\0';
  local_50[0x1c] = '\0';
  local_50[0x1d] = '\0';
  local_50[0x1e] = '\0';
  local_50[0x1f] = '\0';
  local_50[0x20] = '\0';
  local_50[0x21] = '\0';
  local_50[0x22] = '\0';
  local_50[0x23] = '\0';
  local_50[0x24] = '\0';
  local_50[0x25] = '\0';
  local_50[0x26] = '\0';
  local_50[0x27] = '\0';
  local_50[0x28] = '\0';
  local_50[0x29] = '\0';
  local_50[0x2a] = '\0';
  local_50[0x2b] = '\0';
  local_50[0x2c] = '\0';
  local_50[0x2d] = '\0';
  local_50[0x2e] = '\0';
  local_50[0x2f] = '\0';
  local_50[0x30] = '\0';
  local_50[0x31] = '\0';
  local_50[0x32] = '\0';
  local_50[0x33] = '\0';
  local_50[0x34] = '\0';
  local_50[0x35] = '\0';
  local_50[0x36] = '\0';
  local_50[0x37] = '\0';
  local_50[0x38] = '\0';
  local_50[0x39] = '\0';
  local_50[0x3a] = '\0';
  local_50[0x3b] = '\0';
  sendHostToGucMessage(this,local_50,0,0);
LAB_0001a6cc:
  _IOLockUnlock(*(undefined8 *)(this + 0x460));
  return;
}



// IGGuC::setPmAttributes(void const*)

undefined8 __thiscall IGGuC::setPmAttributes(IGGuC *this,undefined8 param_1)

{
  ulong uVar1;
  undefined8 uVar2;
  char local_80 [64];
  undefined *local_40;
  undefined8 local_38;
  code *local_30;
  undefined *local_28;
  IGGuC *local_20;
  undefined8 local_18;
  
  local_80[0] = '\a';
  local_80[1] = '\0';
  local_80[2] = '\0';
  local_80[3] = '\0';
  local_80[4] = '\0';
  local_80[5] = '\0';
  local_80[6] = '\0';
  local_80[7] = '\0';
  local_80[8] = '\0';
  local_80[9] = '\0';
  local_80[10] = '\0';
  local_80[0xb] = '\0';
  local_80[0xc] = '\0';
  local_80[0xd] = '\0';
  local_80[0xe] = '\0';
  local_80[0xf] = '\0';
  local_80[0x10] = '\0';
  local_80[0x11] = '\0';
  local_80[0x12] = '\0';
  local_80[0x13] = '\0';
  local_80[0x14] = '\0';
  local_80[0x15] = '\0';
  local_80[0x16] = '\0';
  local_80[0x17] = '\0';
  local_80[0x18] = '\0';
  local_80[0x19] = '\0';
  local_80[0x1a] = '\0';
  local_80[0x1b] = '\0';
  local_80[0x1c] = '\0';
  local_80[0x1d] = '\0';
  local_80[0x1e] = '\0';
  local_80[0x1f] = '\0';
  local_80[0x20] = '\0';
  local_80[0x21] = '\0';
  local_80[0x22] = '\0';
  local_80[0x23] = '\0';
  local_80[0x24] = '\0';
  local_80[0x25] = '\0';
  local_80[0x26] = '\0';
  local_80[0x27] = '\0';
  local_80[0x28] = '\0';
  local_80[0x29] = '\0';
  local_80[0x2a] = '\0';
  local_80[0x2b] = '\0';
  local_80[0x2c] = '\0';
  local_80[0x2d] = '\0';
  local_80[0x2e] = '\0';
  local_80[0x2f] = '\0';
  local_80[0x30] = '\0';
  local_80[0x31] = '\0';
  local_80[0x32] = '\0';
  local_80[0x33] = '\0';
  local_80[0x34] = '\0';
  local_80[0x35] = '\0';
  local_80[0x36] = '\0';
  local_80[0x37] = '\0';
  local_80[0x38] = '\0';
  local_80[0x39] = '\0';
  local_80[0x3a] = '\0';
  local_80[0x3b] = '\0';
  local_40 = __got::__NSConcreteStackBlock;
  local_38 = 0x40000000;
  local_30 = ____ZN5IGGuC15setPmAttributesEPKv_block_invoke;
  local_28 = &___block_descriptor_tmp;
  local_20 = this;
  local_18 = param_1;
  uVar1 = sendHostToGucMessage(this,local_80,0,(long)&local_40);
  uVar2 = 0xe00002d6;
  if ((char)uVar1 != '\0') {
    uVar2 = 0;
  }
  return uVar2;
}



void ____ZN5IGGuC15setPmAttributesEPKv_block_invoke(long param_1)

{
  void *pvVar1;
  void *pvVar2;
  
  pvVar1 = *(void **)(param_1 + 0x28);
  pvVar2 = (void *)IGSharedMappedBuffer::getVirtualAddress
                             (*(IGSharedMappedBuffer **)(*(long *)(param_1 + 0x20) + 0x80838));
  _memcpy(pvVar2,pvVar1,0x80);
  return;
}



// IGGuC::getPmUtilizationSnapshot()

undefined8 __thiscall IGGuC::getPmUtilizationSnapshot(IGGuC *this)

{
  ulong uVar1;
  undefined8 uVar2;
  char local_50 [64];
  
  local_50[0] = '\x04';
  local_50[1] = '\0';
  local_50[2] = '\0';
  local_50[3] = '\0';
  local_50[4] = '\0';
  local_50[5] = '\0';
  local_50[6] = '\0';
  local_50[7] = '\0';
  local_50[8] = '\0';
  local_50[9] = '\0';
  local_50[10] = '\0';
  local_50[0xb] = '\0';
  local_50[0xc] = '\0';
  local_50[0xd] = '\0';
  local_50[0xe] = '\0';
  local_50[0xf] = '\0';
  local_50[0x10] = '\0';
  local_50[0x11] = '\0';
  local_50[0x12] = '\0';
  local_50[0x13] = '\0';
  local_50[0x14] = '\0';
  local_50[0x15] = '\0';
  local_50[0x16] = '\0';
  local_50[0x17] = '\0';
  local_50[0x18] = '\0';
  local_50[0x19] = '\0';
  local_50[0x1a] = '\0';
  local_50[0x1b] = '\0';
  local_50[0x1c] = '\0';
  local_50[0x1d] = '\0';
  local_50[0x1e] = '\0';
  local_50[0x1f] = '\0';
  local_50[0x20] = '\0';
  local_50[0x21] = '\0';
  local_50[0x22] = '\0';
  local_50[0x23] = '\0';
  local_50[0x24] = '\0';
  local_50[0x25] = '\0';
  local_50[0x26] = '\0';
  local_50[0x27] = '\0';
  local_50[0x28] = '\0';
  local_50[0x29] = '\0';
  local_50[0x2a] = '\0';
  local_50[0x2b] = '\0';
  local_50[0x2c] = '\0';
  local_50[0x2d] = '\0';
  local_50[0x2e] = '\0';
  local_50[0x2f] = '\0';
  local_50[0x30] = '\0';
  local_50[0x31] = '\0';
  local_50[0x32] = '\0';
  local_50[0x33] = '\0';
  local_50[0x34] = '\0';
  local_50[0x35] = '\0';
  local_50[0x36] = '\0';
  local_50[0x37] = '\0';
  local_50[0x38] = '\0';
  local_50[0x39] = '\0';
  local_50[0x3a] = '\0';
  local_50[0x3b] = '\0';
  uVar1 = sendHostToGucMessage(this,local_50,0x40000,0);
  uVar2 = 0xe00002d6;
  if ((char)uVar1 != '\0') {
    uVar2 = 0;
  }
  return uVar2;
}



// IGGuC::prepareGPUReset(IGHwCsType)

undefined4 __thiscall IGGuC::prepareGPUReset(IGGuC *this,undefined2 param_1)

{
  ulong uVar1;
  char local_50 [2];
  undefined2 local_4e;
  undefined8 local_4c;
  undefined8 local_44;
  undefined8 local_3c;
  undefined8 local_34;
  undefined8 local_2c;
  undefined8 local_24;
  undefined8 local_1c;
  
  local_50[0] = '\f';
  local_50[1] = '\0';
  local_4c = 0;
  local_44 = 0;
  local_3c = 0;
  local_34 = 0;
  local_2c = 0;
  local_24 = 0;
  local_1c = 0;
  local_4e = param_1;
  uVar1 = sendHostToGucMessage(this,local_50,0x40000,0);
  if ((char)uVar1 == '\0') {
    dumpGuCPanicDebugInfo(this,"Firmware communication error: action = GPU reset Prepare.\n",0);
  }
  return *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc188);
}



// IGGuC::getActiveContexts(IGHwCsType, IGHardwareContext**, unsigned long long*,
// IGHardwareContext**)

void __thiscall
IGGuC::getActiveContexts(IGGuC *this,undefined2 param_1,long *param_2,ulong *param_3,long *param_4)

{
  int iVar1;
  int iVar2;
  long lVar3;
  ulong uVar4;
  long lVar5;
  char local_90 [2];
  undefined2 local_8e;
  undefined8 local_8c;
  undefined8 local_84;
  undefined8 local_7c;
  undefined8 local_74;
  undefined8 local_6c;
  undefined8 local_64;
  undefined8 local_5c;
  long *local_50;
  ulong *local_48;
  long *local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  local_50 = param_4;
  local_48 = param_3;
  local_40 = param_2;
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  local_90[0] = '\x13';
  local_90[1] = '\0';
  local_8c = 0;
  local_84 = 0;
  local_7c = 0;
  local_74 = 0;
  local_6c = 0;
  local_64 = 0;
  local_5c = 0;
  local_8e = param_1;
  uVar4 = sendHostToGucMessage(this,local_90,0x40000,0);
  if ((char)uVar4 == '\0') {
    dumpGuCPanicDebugInfo(this,"Firmware communication error: action = Get Active Context.\n",0);
  }
  lVar5 = *(long *)(*(IntelAccelerator **)(this + 0x10) + 0x1270);
  iVar1 = *(int *)(lVar5 + 0xc184);
  local_34 = *(undefined4 *)(lVar5 + 0xc188);
  lVar3 = *(long *)(lVar5 + 0xc18c);
  iVar2 = *(int *)(lVar5 + 0xc194);
  local_38 = *(undefined4 *)(lVar5 + 0xc198);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
  if (iVar1 == 0) {
    *local_40 = 0;
    uVar4 = 0;
  }
  else {
    lVar5 = IntelAccelerator::findHardwareContext(*(long *)(this + 0x10),iVar1);
    *local_40 = lVar5;
    uVar4 = (ulong)(lVar3 * 0xfa) / 3;
  }
  *local_48 = uVar4;
  if (iVar2 == 0) {
    lVar5 = 0;
  }
  else {
    lVar5 = IntelAccelerator::findHardwareContext(*(long *)(this + 0x10),iVar2);
  }
  *local_50 = lVar5;
  return;
}



// IGGuC::processGPUReset(IGHwCsType, IGHardwareContext*)

void __thiscall
IGGuC::processGPUReset
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined4 param_10,IGHardwareContext *param_11,undefined8 param_12,char *param_13,
          char *param_14)

{
  int iVar1;
  uint uVar2;
  IGGuC *this_00;
  long lVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long lVar7;
  uint uVar8;
  undefined8 extraout_XMM0_Qa;
  char local_a0 [2];
  ushort local_9e;
  undefined8 local_9c;
  undefined8 local_94;
  undefined8 local_8c;
  undefined8 local_84;
  undefined8 local_7c;
  undefined8 local_74;
  undefined8 local_6c;
  IGMappedBuffer *local_60;
  long local_58;
  IGHardwareRingBuffer *local_50;
  IGHardwareContext *local_48;
  IGGuC *local_40;
  undefined4 local_34;
  
  iVar1 = *(int *)(*(long *)(param_11 + 0xb0) + 0x20);
  local_34 = param_10;
  IGHardwareContext::beginReset(param_11);
  local_50 = *(IGHardwareRingBuffer **)(*(long *)(param_11 + 0xb0) + 0x130);
  IGHardwareRingBuffer::resetRing(local_50);
  local_40 = this;
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)((long)this + 0x6d0));
  lVar7 = (long)iVar1 * 0x80;
  local_60 = *(IGMappedBuffer **)(param_11 + 0xa0);
  uVar8 = *(uint *)(lVar3 + lVar7);
  uVar2 = *(uint *)(lVar3 + 0x40 + lVar7);
  local_48 = param_11;
  if (uVar8 != uVar2) {
    local_58 = *(long *)(*(long *)(*(long *)(local_40 + 0x6d8) + 0x10) + (long)iVar1 * 8);
    do {
      lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(local_58 + 0x38));
      lVar3 = *(long *)(lVar4 + (ulong)uVar8 * 0x40);
      lVar5 = IGMappedBuffer::getGPUVirtualAddress(local_60);
      if (lVar3 == lVar5) {
        lVar4 = lVar4 + (ulong)uVar8 * 0x40;
        if ((*(uint *)(lVar4 + 0x14) & 2) == 0) {
          *(uint *)(lVar4 + 0x14) = *(uint *)(lVar4 + 0x14) | 0x10;
        }
        else {
          *(undefined4 *)(lVar4 + 0xc) = 0;
          IGHardwareRingBuffer::resubmitStampToRing
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     local_50,*(undefined4 *)(lVar4 + 0x10),(uint *)(lVar4 + 8),lVar7,param_13,
                     param_14);
        }
      }
      uVar8 = uVar8 + 1 & 0x1ff;
    } while (uVar8 != uVar2);
  }
  IGHardwareContext::endReset(local_48);
  this_00 = local_40;
  local_a0[0] = '\r';
  local_a0[1] = '\0';
  local_9e = (ushort)(byte)local_34;
  local_9c = 0;
  local_94 = 0;
  local_8c = 0;
  local_84 = 0;
  local_7c = 0;
  local_74 = 0;
  local_6c = 0;
  uVar6 = sendHostToGucMessage(local_40,local_a0,0x40000,0);
  if ((char)uVar6 == '\0') {
    dumpGuCPanicDebugInfo(this_00,"Firmware communication error: action = GPU reset complete.\n",0);
  }
  return;
}



// IGGuC::dumpStatus(char*, int)

ulong __thiscall
IGGuC::dumpStatus(undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
                 undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
                 void *this,long param_10,int param_11,undefined8 param_12,ulong param_13,
                 ulong param_14)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint *puVar4;
  ulong uVar5;
  long lVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  uint uVar9;
  void *pvVar10;
  ulong uVar11;
  ulong uVar12;
  long lVar13;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 extraout_XMM0_Qa_06;
  char local_a0 [64];
  ulong local_60;
  ulong local_58;
  void *local_50;
  long local_48;
  uint *local_40;
  int local_34;
  
  local_48 = param_10;
  local_34 = param_11;
  puVar4 = (uint *)IGSharedMappedBuffer::getVirtualAddress
                             (*(IGSharedMappedBuffer **)((long)this + 0x80840));
  ___bzero(puVar4,0x4000);
  local_a0[0] = '\n';
  local_a0[1] = '\0';
  local_a0[2] = '\0';
  local_a0[3] = '\0';
  local_a0[4] = '\0';
  local_a0[5] = '\0';
  local_a0[6] = '\0';
  local_a0[7] = '\0';
  local_a0[8] = '\0';
  local_a0[9] = '\0';
  local_a0[10] = '\0';
  local_a0[0xb] = '\0';
  local_a0[0xc] = '\0';
  local_a0[0xd] = '\0';
  local_a0[0xe] = '\0';
  local_a0[0xf] = '\0';
  local_a0[0x10] = '\0';
  local_a0[0x11] = '\0';
  local_a0[0x12] = '\0';
  local_a0[0x13] = '\0';
  local_a0[0x14] = '\0';
  local_a0[0x15] = '\0';
  local_a0[0x16] = '\0';
  local_a0[0x17] = '\0';
  local_a0[0x18] = '\0';
  local_a0[0x19] = '\0';
  local_a0[0x1a] = '\0';
  local_a0[0x1b] = '\0';
  local_a0[0x1c] = '\0';
  local_a0[0x1d] = '\0';
  local_a0[0x1e] = '\0';
  local_a0[0x1f] = '\0';
  local_a0[0x20] = '\0';
  local_a0[0x21] = '\0';
  local_a0[0x22] = '\0';
  local_a0[0x23] = '\0';
  local_a0[0x24] = '\0';
  local_a0[0x25] = '\0';
  local_a0[0x26] = '\0';
  local_a0[0x27] = '\0';
  local_a0[0x28] = '\0';
  local_a0[0x29] = '\0';
  local_a0[0x2a] = '\0';
  local_a0[0x2b] = '\0';
  local_a0[0x2c] = '\0';
  local_a0[0x2d] = '\0';
  local_a0[0x2e] = '\0';
  local_a0[0x2f] = '\0';
  local_a0[0x30] = '\0';
  local_a0[0x31] = '\0';
  local_a0[0x32] = '\0';
  local_a0[0x33] = '\0';
  local_40 = (uint *)0x0;
  local_a0[0x34] = '\0';
  local_a0[0x35] = '\0';
  local_a0[0x36] = '\0';
  local_a0[0x37] = '\0';
  local_a0[0x38] = '\0';
  local_a0[0x39] = '\0';
  local_a0[0x3a] = '\0';
  local_a0[0x3b] = '\0';
  uVar12 = 0;
  uVar5 = sendHostToGucMessage(this,local_a0,0x40000,0);
  if ((char)uVar5 != '\0') {
    local_40 = puVar4;
    iVar2 = utilAddTextToBuffer(extraout_XMM0_Qa,param_2_00,param_3,param_4,param_5,param_6,param_7,
                                param_8,&local_48,&local_34,"  Submitted Execlists:\n",uVar12,
                                param_13,param_14);
    lVar13 = *(long *)((long)this + 0x10);
    uVar5 = *(ulong *)(&DAT_00001340 + lVar13);
    uVar7 = extraout_XMM0_Qa_00;
    local_50 = this;
    if (uVar5 != 0) {
      uVar11 = 0;
      if (uVar5 != 0) {
        for (; (uVar5 >> uVar11 & 1) == 0; uVar11 = uVar11 + 1) {
        }
      }
      do {
        lVar6 = uVar11 * 0x79;
        if ((*local_40 & *(uint *)(&DAT_00121b71 + lVar6)) == 0) {
          param_13 = (ulong)local_40[uVar11 * 6 + 6];
          uVar12 = *(ulong *)((long)&PTR_s_RCS_00121b75 + lVar6);
          if (local_40[uVar11 * 6 + 6] == 0) {
            iVar3 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,
                                        param_8,&local_48,&local_34,"%8s: [0/0]\n",uVar12,0,param_14
                                       );
            uVar7 = extraout_XMM0_Qa_03;
          }
          else {
            iVar3 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,
                                        param_8,&local_48,&local_34,"%8s: [0], [%u]\n",uVar12,
                                        param_13,param_14);
            uVar7 = extraout_XMM0_Qa_02;
          }
        }
        else {
          uVar12 = *(ulong *)((long)&PTR_s_RCS_00121b75 + lVar6);
          param_13 = (ulong)local_40[uVar11 * 6 + 5];
          param_14 = (ulong)local_40[uVar11 * 6 + 6];
          iVar3 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,
                                      param_8,&local_48,&local_34,"%8s: ctxt ID[%u] | ctxt ID[%u]\n"
                                      ,uVar12,param_13,param_14);
          uVar7 = extraout_XMM0_Qa_01;
        }
        iVar2 = iVar2 + iVar3;
        if (3 < uVar11) break;
        uVar12 = uVar11 & 0xffffffff;
        uVar5 = -2L << ((byte)uVar12 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar13);
        uVar11 = 0;
        if (uVar5 != 0) {
          for (; (uVar5 >> uVar11 & 1) == 0; uVar11 = uVar11 + 1) {
          }
        }
      } while (uVar5 != 0);
    }
    iVar3 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                                &local_48,&local_34,"\n  Blocked Channels:\n",uVar12,param_13,
                                param_14);
    iVar3 = iVar3 + iVar2;
    uVar5 = 0;
    puVar4 = local_40;
    uVar7 = extraout_XMM0_Qa_04;
    do {
      uVar9 = puVar4[uVar5 + 1];
      local_58 = uVar5;
      if (uVar9 != 0) {
        local_60 = CONCAT44(local_60._4_4_,(int)uVar5 << 5);
        do {
          uVar1 = 0;
          if (uVar9 != 0) {
            for (; (uVar9 >> uVar1 & 1) == 0; uVar1 = uVar1 + 1) {
            }
          }
          lVar13 = (long)(int)(uVar1 | (uint)local_60) * 0x1d;
          param_13 = *(ulong *)((long)puVar4 + lVar13 + 0x8c);
          param_14 = (ulong)*(uint *)((long)puVar4 + lVar13 + 0x94);
          iVar2 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,
                                      param_8,&local_48,&local_34,
                                      "    [%3d]: ctx_desc 0x%016llx (tail 0x%08x, stamp 0x%08x), waiting for stamp 0x%08x on channel %d\n"
                                      ,(long)(int)(uVar1 | (uint)local_60),param_13,param_14,
                                      (ulong)*(uint *)((long)puVar4 + lVar13 + 0x98),
                                      (ulong)*(uint *)((long)puVar4 + lVar13 + 0xa0),
                                      (ulong)*(uint *)((long)puVar4 + lVar13 + 0x9c));
          iVar3 = iVar3 + iVar2;
          uVar12 = (ulong)uVar1;
          uVar9 = uVar9 ^ 1 << ((byte)uVar1 & 0x1f);
          puVar4 = local_40;
          uVar7 = extraout_XMM0_Qa_05;
        } while (uVar9 != 0);
      }
      uVar5 = local_58 + 1;
    } while (uVar5 != 4);
    iVar2 = utilAddTextToBuffer(uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                                &local_48,&local_34,"\n  Work Queue Descriptors:\n",uVar12,param_13,
                                param_14);
    local_40 = (uint *)(ulong)(uint)(iVar2 + iVar3);
    lVar13 = 0;
    uVar12 = 0;
    pvVar10 = local_50;
    do {
      lVar6 = IGSharedMappedBuffer::getVirtualAddress
                        (*(IGSharedMappedBuffer **)((long)pvVar10 + 0x6d0));
      if (*(short *)(lVar6 + 0x4c + lVar13) != 0) {
        uVar9 = *(uint *)(lVar13 + lVar6);
        uVar1 = *(uint *)(lVar13 + 0x40 + lVar6);
        local_60 = (ulong)(uint)(int)*(short *)(lVar13 + 0x4c + lVar6);
        local_58 = (ulong)(uint)(int)*(short *)(lVar13 + 0xc + lVar6);
        uVar7 = IGSharedMappedBuffer::getVirtualAddress
                          (*(IGSharedMappedBuffer **)
                            (*(long *)(*(long *)(*(long *)((long)pvVar10 + 0x6d8) + 0x10) +
                                      uVar12 * 8) + 0x38));
        uVar8 = IGMappedBuffer::getGPUVirtualAddress
                          (*(IGMappedBuffer **)
                            (*(long *)(*(long *)(*(long *)((long)local_50 + 0x6d8) + 0x10) +
                                      uVar12 * 8) + 0x38));
        pvVar10 = local_50;
        iVar2 = utilAddTextToBuffer(extraout_XMM0_Qa_06,param_2_00,param_3,param_4,param_5,param_6,
                                    param_7,param_8,&local_48,&local_34,
                                    "    [%3d]: head 0x%x, tail 0x%x, refcount_a %u, refcount_u %u, storage_va 0x%llx, storage_ga 0x%llx\n"
                                    ,uVar12 & 0xffffffff,(ulong)uVar9,(ulong)uVar1,local_60,local_58
                                    ,uVar7,uVar8);
        local_40 = (uint *)(ulong)(uint)((int)local_40 + iVar2);
      }
      uVar12 = uVar12 + 1;
      lVar13 = lVar13 + 0x80;
    } while (uVar12 != 0x40);
  }
  return (ulong)local_40;
}



// WARNING: Unknown calling convention: __cdecl
// utilAddTextToBuffer(char*&, int&, char const*, ...)

void __cdecl
utilAddTextToBuffer(undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,
                   undefined8 param_4,undefined8 param_5,undefined8 param_6,undefined8 param_7,
                   undefined8 param_8,long *param_9,int *param_10,char *param_11,undefined8 param_12
                   ,undefined8 param_13,undefined8 param_14,...)

{
  int iVar1;
  char in_AL;
  uint uVar2;
  undefined1 local_e8 [24];
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_a8;
  undefined8 local_98;
  undefined8 local_88;
  undefined8 local_78;
  undefined8 local_68;
  undefined8 local_58;
  undefined8 local_48;
  undefined8 local_38;
  undefined1 *local_30;
  undefined1 *local_28;
  long local_20;
  
  local_28 = local_e8;
  if (in_AL != '\0') {
    local_b8 = param_1_00;
    local_a8 = param_2_00;
    local_98 = param_3_00;
    local_88 = param_4;
    local_78 = param_5;
    local_68 = param_6;
    local_58 = param_7;
    local_48 = param_8;
  }
  local_20 = *(long *)__got::___stack_chk_guard;
  local_38 = 0x3000000018;
  local_30 = &stack0x00000008;
  local_d0 = param_12;
  local_c8 = param_13;
  local_c0 = param_14;
  uVar2 = _vsnprintf((char *)*param_9,(long)*param_10,param_11,&local_38);
  if ((-1 < (int)uVar2) && (iVar1 = *param_10, (int)uVar2 <= iVar1)) {
    *param_9 = *param_9 + (ulong)uVar2;
    *param_10 = iVar1 - uVar2;
  }
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGGuC::isHung(unsigned int)

undefined * __thiscall IGGuC::isHung(IGGuC *this,uint param_1)

{
  IGGuC *this_00;
  int iVar1;
  int iVar2;
  long lVar3;
  IntelAccelerator *this_01;
  uint uVar4;
  undefined *puVar5;
  bool bVar6;
  
  this_00 = this + 0x10;
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  iVar1 = *(int *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc0b0);
  iVar2 = *(int *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc0b4);
  ping(this,param_1);
  if ((*(int *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc0b0) == iVar1) &&
     (*(int *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xc0b4) == iVar2)) {
    uVar4 = 0;
    do {
      lVar3 = *(long *)(&DAT_00001270 + *(long *)this_00);
      if (((*(uint *)(lVar3 + 0xc028) & 1) == 0) && (*(int *)(lVar3 + 0xc0b0) == iVar1)) {
        bVar6 = *(int *)(lVar3 + 0xc0b4) == iVar2;
      }
      else {
        bVar6 = false;
      }
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,0x32,1000);
      _thread_block(0);
    } while ((uVar4 < 9) && (uVar4 = uVar4 + 1, bVar6));
    if (bVar6) {
      this_01 = *(IntelAccelerator **)this_00;
      puVar5 = &DAT_00137201;
      if ((param_1 >> 0x10 & 1) != 0) {
        isHung(this_00,(ulong)*(uint *)(*(long *)(this_01 + 0x1270) + 0xc0b0));
        return (undefined *)0x0;
      }
      goto LAB_0001b000;
    }
  }
  this_01 = *(IntelAccelerator **)this_00;
  puVar5 = (undefined *)0x0;
LAB_0001b000:
  IntelAccelerator::SafeForceWake(this_01,0,7);
  return puVar5;
}



// IGGuC::pause()

int __thiscall IGGuC::pause(IGGuC *this)

{
  int iVar1;
  int extraout_EAX;
  char local_50 [64];
  ulong uVar2;
  
  this[0x80808] = (IGGuC)0x1;
  local_50[0] = '\x0e';
  local_50[1] = '\0';
  local_50[2] = '\0';
  local_50[3] = '\0';
  local_50[4] = '\0';
  local_50[5] = '\0';
  local_50[6] = '\0';
  local_50[7] = '\0';
  local_50[8] = '\0';
  local_50[9] = '\0';
  local_50[10] = '\0';
  local_50[0xb] = '\0';
  local_50[0xc] = '\0';
  local_50[0xd] = '\0';
  local_50[0xe] = '\0';
  local_50[0xf] = '\0';
  local_50[0x10] = '\0';
  local_50[0x11] = '\0';
  local_50[0x12] = '\0';
  local_50[0x13] = '\0';
  local_50[0x14] = '\0';
  local_50[0x15] = '\0';
  local_50[0x16] = '\0';
  local_50[0x17] = '\0';
  local_50[0x18] = '\0';
  local_50[0x19] = '\0';
  local_50[0x1a] = '\0';
  local_50[0x1b] = '\0';
  local_50[0x1c] = '\0';
  local_50[0x1d] = '\0';
  local_50[0x1e] = '\0';
  local_50[0x1f] = '\0';
  local_50[0x20] = '\0';
  local_50[0x21] = '\0';
  local_50[0x22] = '\0';
  local_50[0x23] = '\0';
  local_50[0x24] = '\0';
  local_50[0x25] = '\0';
  local_50[0x26] = '\0';
  local_50[0x27] = '\0';
  local_50[0x28] = '\0';
  local_50[0x29] = '\0';
  local_50[0x2a] = '\0';
  local_50[0x2b] = '\0';
  local_50[0x2c] = '\0';
  local_50[0x2d] = '\0';
  local_50[0x2e] = '\0';
  local_50[0x2f] = '\0';
  local_50[0x30] = '\0';
  local_50[0x31] = '\0';
  local_50[0x32] = '\0';
  local_50[0x33] = '\0';
  local_50[0x34] = '\0';
  local_50[0x35] = '\0';
  local_50[0x36] = '\0';
  local_50[0x37] = '\0';
  local_50[0x38] = '\0';
  local_50[0x39] = '\0';
  local_50[0x3a] = '\0';
  local_50[0x3b] = '\0';
  uVar2 = sendHostToGucMessage(this,local_50,0x40000,0);
  iVar1 = (int)uVar2;
  if ((char)uVar2 == '\0') {
    _IOLog("[IGPU] Failed to send pause request to Gfx firmware.\n");
    _kprintf("[IGPU] Failed to send pause request to Gfx firmware.\n");
    iVar1 = extraout_EAX;
  }
  return iVar1;
}



// IGGuC::resume()

void __thiscall IGGuC::resume(IGGuC *this)

{
  ulong uVar1;
  char local_50 [64];
  
  this[0x80808] = (IGGuC)0x0;
  local_50[0] = '\x0f';
  local_50[1] = '\0';
  local_50[2] = '\0';
  local_50[3] = '\0';
  local_50[4] = '\0';
  local_50[5] = '\0';
  local_50[6] = '\0';
  local_50[7] = '\0';
  local_50[8] = '\0';
  local_50[9] = '\0';
  local_50[10] = '\0';
  local_50[0xb] = '\0';
  local_50[0xc] = '\0';
  local_50[0xd] = '\0';
  local_50[0xe] = '\0';
  local_50[0xf] = '\0';
  local_50[0x10] = '\0';
  local_50[0x11] = '\0';
  local_50[0x12] = '\0';
  local_50[0x13] = '\0';
  local_50[0x14] = '\0';
  local_50[0x15] = '\0';
  local_50[0x16] = '\0';
  local_50[0x17] = '\0';
  local_50[0x18] = '\0';
  local_50[0x19] = '\0';
  local_50[0x1a] = '\0';
  local_50[0x1b] = '\0';
  local_50[0x1c] = '\0';
  local_50[0x1d] = '\0';
  local_50[0x1e] = '\0';
  local_50[0x1f] = '\0';
  local_50[0x20] = '\0';
  local_50[0x21] = '\0';
  local_50[0x22] = '\0';
  local_50[0x23] = '\0';
  local_50[0x24] = '\0';
  local_50[0x25] = '\0';
  local_50[0x26] = '\0';
  local_50[0x27] = '\0';
  local_50[0x28] = '\0';
  local_50[0x29] = '\0';
  local_50[0x2a] = '\0';
  local_50[0x2b] = '\0';
  local_50[0x2c] = '\0';
  local_50[0x2d] = '\0';
  local_50[0x2e] = '\0';
  local_50[0x2f] = '\0';
  local_50[0x30] = '\0';
  local_50[0x31] = '\0';
  local_50[0x32] = '\0';
  local_50[0x33] = '\0';
  local_50[0x34] = '\0';
  local_50[0x35] = '\0';
  local_50[0x36] = '\0';
  local_50[0x37] = '\0';
  local_50[0x38] = '\0';
  local_50[0x39] = '\0';
  local_50[0x3a] = '\0';
  local_50[0x3b] = '\0';
  uVar1 = sendHostToGucMessage(this,local_50,0x40000,0);
  if ((char)uVar1 == '\0') {
    _IOLog("[IGPU] Failed to send resume request to Gfx firmware.\n");
    _kprintf("[IGPU] Failed to send resume request to Gfx firmware.\n");
  }
  return;
}



// IGGuC::enableStampInterrupt(int)

void __thiscall IGGuC::enableStampInterrupt(IGGuC *this,uint param_1)

{
  byte bVar1;
  int iVar2;
  long lVar3;
  undefined **ppuVar4;
  IGGuC *pIVar5;
  ulong uVar6;
  
  lVar3 = *(long *)(this + 0x10);
  if ((*(int *)(&DAT_000011d0 + lVar3) <= (int)param_1) &&
     ((int)param_1 <= *(int *)(&DAT_000011d4 + lVar3))) {
    return;
  }
  ppuVar4 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + lVar3) & 0x18000) != 0) {
    ppuVar4 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  bVar1 = *(byte *)((long)ppuVar4 + (ulong)param_1);
  _IOLockLock(*(undefined8 *)(this + 0x80888));
  uVar6 = (ulong)(int)param_1;
  iVar2 = *(int *)(this + uVar6 * 4 + 0x80a00);
  *(int *)(this + uVar6 * 4 + 0x80a00) = iVar2 + 1;
  if (iVar2 == 0) {
    pIVar5 = this + (ulong)bVar1 * 0x40 + 0x808c0;
    if (*(long *)pIVar5 == 0) {
      IGInterruptBridge::enableInterrupt
                (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                 *(int *)(&DAT_00121bd9 + (ulong)bVar1 * 0x79));
    }
    *(ulong *)(pIVar5 + (uVar6 >> 6) * 8) =
         *(ulong *)(pIVar5 + (uVar6 >> 6) * 8) | 1L << ((byte)param_1 & 0x3f);
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x80888));
  return;
}



// IGGuC::disableStampInterrupt(int)

void __thiscall IGGuC::disableStampInterrupt(IGGuC *this,uint param_1)

{
  byte bVar1;
  int iVar2;
  byte bVar3;
  long lVar4;
  ulong uVar5;
  undefined **ppuVar6;
  
  lVar4 = *(long *)(this + 0x10);
  if ((*(int *)(&DAT_000011d0 + lVar4) <= (int)param_1) &&
     ((int)param_1 <= *(int *)(&DAT_000011d4 + lVar4))) {
    return;
  }
  ppuVar6 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + lVar4) & 0x18000) != 0) {
    ppuVar6 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  bVar1 = *(byte *)((long)ppuVar6 + (ulong)param_1);
  _IOLockLock(*(undefined8 *)(this + 0x80888));
  uVar5 = (ulong)(int)param_1;
  iVar2 = *(int *)(this + uVar5 * 4 + 0x80a00);
  *(int *)(this + uVar5 * 4 + 0x80a00) = iVar2 + -1;
  if ((iVar2 == 1) &&
     (lVar4 = (ulong)bVar1 * 0x40, bVar3 = (byte)param_1 & 0x3f,
     *(ulong *)(this + (uVar5 >> 6) * 8 + lVar4 + 0x808c0) =
          *(ulong *)(this + (uVar5 >> 6) * 8 + lVar4 + 0x808c0) &
          (-2L << bVar3 | 0xfffffffffffffffeU >> 0x40 - bVar3),
     *(long *)(this + lVar4 + 0x808c0) == 0)) {
    IGInterruptBridge::disableInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(int *)(&DAT_00121bd9 + (ulong)bVar1 * 0x79));
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x80888));
  return;
}



// IGGuC::isStampInterruptEnabled(int)

bool __thiscall IGGuC::isStampInterruptEnabled(IGGuC *this,uint param_1)

{
  byte bVar1;
  long lVar2;
  undefined **ppuVar3;
  bool bVar4;
  
  lVar2 = *(long *)(this + 0x10);
  if (((int)param_1 < *(int *)(&DAT_000011d0 + lVar2)) ||
     (*(int *)(&DAT_000011d4 + lVar2) < (int)param_1)) {
    ppuVar3 = &IG_STAMP_INDEX_TO_HWCS_LUT;
    if ((*(uint *)(&DAT_000011c0 + lVar2) & 0x18000) != 0) {
      ppuVar3 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
    }
    bVar1 = *(byte *)((long)ppuVar3 + (ulong)param_1);
    _IOLockLock(*(undefined8 *)(this + 0x80888));
    bVar4 = (*(ulong *)(this + ((ulong)(long)(int)param_1 >> 6) * 8 + (ulong)bVar1 * 0x40 + 0x808c0)
             >> ((long)(int)param_1 & 0x3fU) & 1) != 0;
    _IOLockUnlock(*(undefined8 *)(this + 0x80888));
  }
  else {
    bVar4 = false;
  }
  return bVar4;
}



// IGGuC::checkForProgress(IGHwCsType)

bool __thiscall IGGuC::checkForProgress(IGGuC *this,ulong param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  int *piVar5;
  long lVar6;
  uint64_t uVar7;
  uint64_t uVar8;
  ulong uVar9;
  long lVar10;
  
  if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) == 0) {
    piVar5 = (int *)IGSharedMappedBuffer::getVirtualAddress
                              (*(IGSharedMappedBuffer **)(this + 0x6d0));
    if (piVar5[0x10] == *piVar5) {
      uVar9 = 0xffffffffffffffff;
      lVar10 = 0x80;
      do {
        if (uVar9 == 2) goto LAB_0001b3d4;
        lVar6 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x6d0));
        piVar1 = (int *)(lVar6 + 0x40 + lVar10);
        uVar9 = uVar9 + 1;
        piVar5 = (int *)(lVar6 + lVar10);
        lVar10 = lVar10 + 0x80;
      } while (*piVar1 == *piVar5);
      if (2 < uVar9) {
LAB_0001b3d4:
        lVar10 = (param_1 & 0xff) * 0x40;
        iVar2 = *(int *)(*(long *)(this + 0x478) + 0x80 + lVar10);
        uVar7 = _mach_absolute_time();
        do {
          if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) == 0) {
            ringAllDoorbells(this);
          }
          _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
          _thread_block(0);
          iVar3 = *(int *)(*(long *)(this + 0x478) + 0x80 + lVar10);
        } while ((iVar2 == iVar3) && (uVar8 = _mach_absolute_time(), uVar8 < uVar7 + 10000000000));
        return iVar2 != iVar3;
      }
    }
    bVar4 = false;
  }
  else {
    _kprintf("[IG3D] checkForProgress on CS: %u but just returning true we\'re running in simulation\n"
             ,(uint)param_1 & 0xff);
    bVar4 = true;
  }
  return bVar4;
}



// IGGuC::validHucKernelsLoaded()

undefined8 IGGuC::validHucKernelsLoaded(void)

{
  return 0;
}



// IGGuC::getNumHucKernels()

undefined8 IGGuC::getNumHucKernels(void)

{
  return 0;
}



// IGGuC::getHucKernelDMEMInfo(unsigned int, unsigned int&, unsigned int&)

undefined8 __thiscall
IGGuC::getHucKernelDMEMInfo
          (IGGuC *this,undefined8 param_2_00,undefined4 *param_2,undefined4 *param_3)

{
  *param_2 = 0;
  *param_3 = 0;
  return 0;
}



// IGGuC::IGGuCSharedObject::IGGuCSharedObject(IGGuC*, unsigned long)

void __thiscall
IGGuC::IGGuCSharedObject::IGGuCSharedObject
          (IGGuCSharedObject *this,undefined8 param_1,undefined8 param_2)

{
  *(undefined8 *)(this + 0x10) = param_1;
  *(undefined8 *)(this + 0x18) = param_2;
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  return;
}



// IGGuC::IGGuCSharedObject::~IGGuCSharedObject()

void __thiscall IGGuC::IGGuCSharedObject::~IGGuCSharedObject(IGGuCSharedObject *this)

{
  if (*(long **)this != (long *)0x0) {
    (**(code **)(**(long **)this + 0x28))();
  }
  *(undefined8 *)this = 0;
  return;
}



// IGGuC::MetaClass::~MetaClass()

void __thiscall IGGuC::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGGuC::getWorkLoop() const

undefined8 __thiscall IGGuC::getWorkLoop(IGGuC *this)

{
  return *(undefined8 *)(this + 0x458);
}



void __GLOBAL__sub_I_IGGuC_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGGuC::gMetaClass,"IGGuC",(OSMetaClass *)&IGScheduler::gMetaClass,
             0x80b40);
  IGGuC::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGGuC::gMetaClass);
  return;
}



// IGScheduler4::MetaClass::MetaClass()

void __thiscall IGScheduler4::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGScheduler4",(OSMetaClass *)&IGScheduler::gMetaClass,0x490);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler4::MetaClass::~MetaClass()

void __thiscall IGScheduler4::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGScheduler4::IGScheduler4(OSMetaClass const*)

void __thiscall IGScheduler4::IGScheduler4(IGScheduler4 *this,OSMetaClass *param_1)

{
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGScheduler4;
  return;
}



// IGScheduler4::IGScheduler4(OSMetaClass const*)

void __thiscall IGScheduler4::IGScheduler4(IGScheduler4 *this,OSMetaClass *param_1)

{
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGScheduler4;
  return;
}



// IGScheduler4::~IGScheduler4()

void __thiscall IGScheduler4::~IGScheduler4(IGScheduler4 *this)

{
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGScheduler4::~IGScheduler4()

void __thiscall IGScheduler4::~IGScheduler4(IGScheduler4 *this)

{
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGScheduler4::~IGScheduler4()

void __thiscall IGScheduler4::~IGScheduler4(IGScheduler4 *this)

{
  IGScheduler::~IGScheduler((IGScheduler *)this);
  _OSObject_typed_operator_delete(&IGScheduler4_ktv,this,0x490);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::operator delete(void*, unsigned long)

void __cdecl IGScheduler4::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGScheduler4_ktv,param_1,param_2);
  return;
}



// IGScheduler4::getMetaClass() const

undefined8 * IGScheduler4::getMetaClass(void)

{
  return &gMetaClass;
}



// IGScheduler4::MetaClass::MetaClass()

void __thiscall IGScheduler4::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGScheduler4",(OSMetaClass *)&IGScheduler::gMetaClass,0x490);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler4::MetaClass::alloc() const

IGScheduler * IGScheduler4::MetaClass::alloc(void)

{
  IGScheduler *this;
  
  this = (IGScheduler *)_OSObject_typed_operator_new(&IGScheduler4_ktv,0x490);
  IGScheduler::IGScheduler(this,(OSMetaClass *)&IGScheduler4::gMetaClass);
  *(undefined ***)this = &__const::~IGScheduler4;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGScheduler4::operator new(unsigned long)

void * __thiscall IGScheduler4::operator_new(IGScheduler4 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGScheduler4_ktv,this);
  return pvVar1;
}



// IGScheduler4::IGScheduler4()

void __thiscall IGScheduler4::IGScheduler4(IGScheduler4 *this)

{
  IGScheduler::IGScheduler((IGScheduler *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGScheduler4;
  OSMetaClass::instanceConstructed();
  return;
}



// IGScheduler4::IGScheduler4()

void __thiscall IGScheduler4::IGScheduler4(IGScheduler4 *this)

{
  IGScheduler::IGScheduler((IGScheduler *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGScheduler4;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::withAccelerator(IOGraphicsAccelerator2*)

IGScheduler4 * __cdecl IGScheduler4::withAccelerator(long param_1)

{
  IGScheduler4 *this;
  ulong uVar1;
  
  this = (IGScheduler4 *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGScheduler4 *)0x0) {
    uVar1 = initWithAccelerator(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGScheduler4 *)0x0;
}



// IGScheduler4::initWithAccelerator(IOGraphicsAccelerator2*)

ulong __thiscall IGScheduler4::initWithAccelerator(IGScheduler4 *this,long param_1)

{
  long lVar1;
  undefined8 uVar2;
  IGHardwareCommandStreamer4 *pIVar3;
  ulong uVar4;
  undefined8 unaff_R14;
  ulong uVar5;
  ulong uVar6;
  
  uVar2 = IGScheduler::initWithOptions((IGScheduler *)this,0x11,0x1000,param_1);
  if ((char)uVar2 == '\0') {
LAB_0001b7c5:
    uVar5 = 0;
  }
  else {
    *(undefined8 *)(this + 0x488) = 0;
    lVar1 = *(long *)(this + 0x10);
    uVar4 = *(ulong *)(&DAT_00001340 + lVar1);
    uVar5 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
    if (uVar4 != 0) {
      uVar6 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> uVar6 & 1) == 0; uVar6 = uVar6 + 1) {
        }
      }
      do {
        pIVar3 = IGHardwareCommandStreamer4::hardwareCommandStreamer
                           (*(undefined8 *)(this + 0x10),0,this,uVar6 & 0xff);
        *(IGHardwareCommandStreamer4 **)(this + uVar6 * 8 + 0x458) = pIVar3;
        if (pIVar3 == (IGHardwareCommandStreamer4 *)0x0) {
          (**(code **)(*(long *)this + 0x90))(this);
          goto LAB_0001b7c5;
        }
        if (3 < uVar6) break;
        uVar4 = -2L << ((byte)uVar6 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
        uVar6 = 0;
        if (uVar4 != 0) {
          for (; (uVar4 >> uVar6 & 1) == 0; uVar6 = uVar6 + 1) {
          }
        }
      } while (uVar4 != 0);
    }
  }
  return uVar5 & 0xffffffff;
}



// IGScheduler4::isGpuIdle() const

void __thiscall IGScheduler4::isGpuIdle(IGScheduler4 *this)

{
  IGHardwareGuC::isGuCIdle(*(IGHardwareGuC **)(this + 0x480));
  return;
}



// IGScheduler4::waitForGpuIdle()

void __thiscall IGScheduler4::waitForGpuIdle(IGScheduler4 *this)

{
  char cVar1;
  uint uVar2;
  bool bVar3;
  
  IGAccelEventMachine::finishAllStamps
            (*(IGAccelEventMachine **)(*(long *)(this + 0x10) + 0x380),0x2b);
  cVar1 = (**(code **)(*(long *)this + 0x160))(this);
  if (cVar1 == '\0') {
    uVar2 = 0;
    do {
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      cVar1 = (**(code **)(*(long *)this + 0x160))(this);
      if (cVar1 != '\0') {
        return;
      }
      bVar3 = uVar2 < 24999;
      uVar2 = uVar2 + 1;
    } while (bVar3);
  }
  return;
}



// IGScheduler4::resetCommandStreamersOnWake()

void IGScheduler4::resetCommandStreamersOnWake(void)

{
  return;
}



// IGScheduler4::checkForProgress(IGHwCsType)

undefined1 IGScheduler4::checkForProgress(void)

{
  return 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::systemWillSleep()

void __cdecl IGScheduler4::systemWillSleep(IGScheduler *param_1)

{
  IGScheduler::systemWillSleep(param_1);
  return;
}



// IGScheduler4::systemDidWake()

void IGScheduler4::systemDidWake(void)

{
  IGScheduler::systemDidWake();
  return;
}



// IGScheduler4::prepareGPUReset(IGHwCsType)

void IGScheduler4::prepareGPUReset(void)

{
  return;
}



// IGScheduler4::processGPUReset(IGHwCsType, IGHardwareContext*)

void IGScheduler4::processGPUReset(void)

{
  return;
}



// IGScheduler4::getActiveContexts(IGHwCsType, IGHardwareContext**, unsigned long long*,
// IGHardwareContext**)

void __thiscall
IGScheduler4::getActiveContexts
          (IGScheduler4 *this,undefined8 param_2_00,undefined8 *param_2,undefined8 *param_3,
          undefined8 *param_4)

{
  *param_2 = 0;
  *param_3 = 0;
  *param_4 = 0;
  return;
}



// IGScheduler4::dumpStatus(char*, int)

undefined8 IGScheduler4::dumpStatus(void)

{
  return 0;
}



// IGScheduler4::enableInterrupts()

void __thiscall IGScheduler4::enableInterrupts(IGScheduler4 *this)

{
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),0x69676968);
  enableErrorInterrupts(this);
  return;
}



// IGScheduler4::enableErrorInterrupts()

void __thiscall IGScheduler4::enableErrorInterrupts(IGScheduler4 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(this + 0x10);
  uVar2 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar2 != 0) {
    uVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
      }
    }
    do {
      IGHardwareCommandStreamer4::enableErrorInterrupt
                (*(IGHardwareCommandStreamer4 **)(this + uVar3 * 8 + 0x458));
      if (3 < uVar3) {
        return;
      }
      uVar2 = -2L << ((byte)uVar3 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
      uVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
        }
      }
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler4::disableInterrupts()

void __thiscall IGScheduler4::disableInterrupts(IGScheduler4 *this)

{
  IGInterruptBridge::disableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),0x69676968);
  disableErrorInterrupts(this);
  return;
}



// IGScheduler4::disableErrorInterrupts()

void __thiscall IGScheduler4::disableErrorInterrupts(IGScheduler4 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(this + 0x10);
  uVar2 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar2 != 0) {
    uVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
      }
    }
    do {
      IGHardwareCommandStreamer4::disableErrorInterrupt
                (*(IGHardwareCommandStreamer4 **)(this + uVar3 * 8 + 0x458));
      if (3 < uVar3) {
        return;
      }
      uVar2 = -2L << ((byte)uVar3 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
      uVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
        }
      }
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler4::enableStampInterrupt(int)

void __thiscall IGScheduler4::enableStampInterrupt(IGScheduler4 *this,uint param_1)

{
  undefined **ppuVar1;
  
  ppuVar1 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar1 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer4 **)
       (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0x458) !=
      (IGHardwareCommandStreamer4 *)0x0) {
    IGHardwareCommandStreamer4::enableStampInterrupt
              (*(IGHardwareCommandStreamer4 **)
                (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0x458),param_1);
    return;
  }
  return;
}



// IGScheduler4::disableStampInterrupt(int)

void __thiscall IGScheduler4::disableStampInterrupt(IGScheduler4 *this,uint param_1)

{
  undefined **ppuVar1;
  
  ppuVar1 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar1 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer4 **)
       (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0x458) !=
      (IGHardwareCommandStreamer4 *)0x0) {
    IGHardwareCommandStreamer4::disableStampInterrupt
              (*(IGHardwareCommandStreamer4 **)
                (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0x458),param_1);
    return;
  }
  return;
}



// IGScheduler4::isStampInterruptEnabled(int)

ulong __thiscall IGScheduler4::isStampInterruptEnabled(IGScheduler4 *this,uint param_1)

{
  ulong uVar1;
  undefined **ppuVar2;
  
  ppuVar2 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar2 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer4 **)
       (this + (ulong)*(byte *)((long)ppuVar2 + (ulong)param_1) * 8 + 0x458) !=
      (IGHardwareCommandStreamer4 *)0x0) {
    uVar1 = IGHardwareCommandStreamer4::isStampInterruptEnabled
                      (*(IGHardwareCommandStreamer4 **)
                        (this + (ulong)*(byte *)((long)ppuVar2 + (ulong)param_1) * 8 + 0x458),
                       param_1);
    return uVar1;
  }
  return 0;
}



// IGScheduler4::pause()

int IGScheduler4::pause(void)

{
  int iVar1;
  
  iVar1 = IGHardwareGuC::pauseScheduler();
  return iVar1;
}



// IGScheduler4::resume()

void IGScheduler4::resume(void)

{
  IGHardwareGuC::resumeScheduler();
  return;
}



// IGScheduler4::rebind(IGHardwareContext*, unsigned char)

undefined8 IGScheduler4::rebind(void)

{
  return 0xffffffff;
}



// IGScheduler4::unbind(IGHardwareContext*)

void IGScheduler4::unbind(void)

{
  return;
}



// IGScheduler4::signalDisplayStampUpdate(int)

void IGScheduler4::signalDisplayStampUpdate(void)

{
  return;
}



// IGScheduler4::getKmdContext(unsigned int)

undefined4 __thiscall IGScheduler4::getKmdContext(IGScheduler4 *this,uint param_1)

{
  undefined4 uVar1;
  
  uVar1 = 0x400;
  if (param_1 < *(uint *)(*(long *)(this + 0x480) + 0x28)) {
    uVar1 = *(undefined4 *)(*(long *)(*(long *)(this + 0x480) + 0x30) + (ulong)param_1 * 4);
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::push(IGHardwareContext*, unsigned int, unsigned int, bool, bool)

void __cdecl IGScheduler4::push(long param_1,long param_2,uint param_3)

{
  uint uVar1;
  IGHardwareGuC *this;
  uint uVar2;
  uint uVar3;
  
  uVar1 = *(uint *)(*(long *)(param_2 + 0xb0) + 0x20);
  uVar2 = 0;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(param_1 + 0x10)) & 0x18000) != 0x8000) {
    uVar2 = uVar1;
  }
  this = *(IGHardwareGuC **)(param_1 + 0x480);
  uVar3 = 0x400;
  if (uVar2 < *(uint *)(this + 0x28)) {
    uVar3 = *(uint *)(*(long *)(this + 0x30) + (ulong)uVar2 * 4);
  }
  IGHardwareGuC::submitWorkItem
            (this,uVar3,(uint *)(param_2 + 0x89),(uint)*(byte *)(param_2 + 0x6c),uVar1,
             *(undefined4 *)(*(long *)(*(long *)(param_2 + 0xb0) + 0x130) + 0x44),param_3);
  return;
}



// IGScheduler4::logRingSetEnabled(bool)

ulong __thiscall IGScheduler4::logRingSetEnabled(IGScheduler4 *this,int param_1)

{
  undefined1 uVar1;
  long lVar2;
  undefined7 extraout_var;
  ulong uVar3;
  
  lVar2 = *(long *)(this + 0x488);
  if (param_1 == 0) {
LAB_0001bb8b:
    if (lVar2 == 0) {
      uVar3 = 0;
      goto LAB_0001bbb9;
    }
  }
  else if (lVar2 == 0) {
    lVar2 = _IOLockAlloc();
    *(long *)(this + 0x488) = lVar2;
    goto LAB_0001bb8b;
  }
  _IOLockLock();
  uVar1 = IGHardwareGuC::logRingSetEnabled(*(IGHardwareGuC **)(this + 0x480),(char)param_1);
  uVar3 = CONCAT71(extraout_var,uVar1) & 0xffffffff;
  _IOLockUnlock(*(undefined8 *)(this + 0x488));
LAB_0001bbb9:
  if (((char)param_1 == '\0') && (*(long *)(this + 0x488) != 0)) {
    _IOLockFree();
    *(undefined8 *)(this + 0x488) = 0;
  }
  return uVar3;
}



// IGScheduler4::logRingRead(void*, unsigned int)

int __thiscall IGScheduler4::logRingRead(IGScheduler4 *this,void *param_1,int param_2)

{
  int iVar1;
  
  if (*(long *)(this + 0x488) == 0) {
    iVar1 = 0;
  }
  else {
    _IOLockLock();
    iVar1 = IGHardwareGuC::logRingRead(*(IGHardwareGuC **)(this + 0x480),param_1,param_2);
    _IOLockUnlock(*(undefined8 *)(this + 0x488));
  }
  return iVar1;
}



// IGScheduler4::free()

void __thiscall IGScheduler4::free(IGScheduler4 *this,void *param_1)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  if (*(long **)(this + 0x480) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x480) + 0x28))();
  }
  *(undefined8 *)(this + 0x480) = 0;
  lVar1 = *(long *)(this + 0x10);
  uVar2 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar2 != 0) {
    uVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
      }
    }
    do {
      if (*(long **)(this + uVar3 * 8 + 0x458) != (long *)0x0) {
        (**(code **)(**(long **)(this + uVar3 * 8 + 0x458) + 0x28))();
      }
      *(undefined8 *)(this + uVar3 * 8 + 0x458) = 0;
      if (3 < uVar3) break;
      uVar2 = -2L << ((byte)uVar3 & 0x3f) & *(ulong *)(&DAT_00001340 + lVar1);
      uVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> uVar3 & 1) == 0; uVar3 = uVar3 + 1) {
        }
      }
    } while (uVar2 != 0);
  }
  IGScheduler::free((IGScheduler *)this,param_1);
  return;
}



// IGScheduler4::loadFirmware()

undefined8 __thiscall IGScheduler4::loadFirmware(IGScheduler4 *this)

{
  IGHardwareGuC *in_RAX;
  
  if (*(long *)(this + 0x480) == 0) {
    in_RAX = IGHardwareGuC::withOptions(*(long *)(this + 0x10));
    *(IGHardwareGuC **)(this + 0x480) = in_RAX;
    if (in_RAX == (IGHardwareGuC *)0x0) {
      return 0;
    }
  }
  return CONCAT71((int7)((ulong)in_RAX >> 8),1);
}



// IGScheduler4::canLoadFirmware(IOGraphicsAccelerator2*)

undefined1 IGScheduler4::canLoadFirmware(void)

{
  return 1;
}



// IGScheduler4::isContextIdle(IGHardwareContext const*) const

void __thiscall IGScheduler4::isContextIdle(IGScheduler4 *this,long param_1)

{
  IGHardwareGuC::isKmdContextIdle(*(IGHardwareGuC **)(this + 0x480),(uint *)(param_1 + 0x89));
  return;
}



// IGScheduler4::setPmAttributes(void const*)

undefined8 __thiscall IGScheduler4::setPmAttributes(IGScheduler4 *this,long param_1)

{
  int iVar1;
  IntelAccelerator *this_00;
  char cVar2;
  undefined8 uVar3;
  
  uVar3 = 0xe00002c7;
  if ((*(byte *)(param_1 + 1) & 2) != 0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
    iVar1 = (*(uint *)(param_1 + 0x34) >> 0x1f |
            *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa210) & 0xfffffffc) +
            (*(int *)(param_1 + 0x38) >> 0x1f) * -2;
    cVar2 = IGHardwareGuC::requestGucToResampleCpgEnableRegister
                      (*(IGHardwareGuC **)(this + 0x480),iVar1);
    this_00 = *(IntelAccelerator **)(this + 0x10);
    uVar3 = 0xe00002bc;
    if (cVar2 != '\0') {
      *(int *)(*(long *)(this_00 + 0x1270) + 0xa210) = iVar1;
      uVar3 = 0;
    }
    IntelAccelerator::SafeForceWake(this_00,0,7);
  }
  return uVar3;
}



// IGScheduler4::MetaClass::~MetaClass()

void __thiscall IGScheduler4::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGScheduler4::initSharedPrivateData(IGHardwareContext*)

void __thiscall IGScheduler4::initSharedPrivateData(IGScheduler4 *this,long param_1)

{
  IGHardwareGuC::AttachContextDescToGucContext
            (*(IGHardwareGuC **)(this + 0x480),(uint *)(param_1 + 0x89));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::updateSharedPrivateData(IGHardwareContext*)

void __cdecl IGScheduler4::updateSharedPrivateData(long param_1)

{
  IGHardwareGuC::invalidateTLB(*(IGHardwareGuC **)(param_1 + 0x480));
  return;
}



// IGScheduler4::cleanupSharedPrivateData(IGHardwareContext*)

void __thiscall IGScheduler4::cleanupSharedPrivateData(IGScheduler4 *this,long param_1)

{
  IGHardwareGuC::invalidateTLB(*(IGHardwareGuC **)(this + 0x480));
  IGHardwareGuC::DetachContextDescFromGucContext
            (*(IGHardwareGuC **)(this + 0x480),(uint *)(param_1 + 0x89));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler4::getNextStampIndex(IGHwCsType, unsigned char)

void __cdecl IGScheduler4::getNextStampIndex(undefined8 param_1,undefined4 param_2)

{
  IGScheduler::getNextStampIndex(param_1,param_2);
  return;
}



// IGScheduler4::isHung(unsigned int)

undefined8 IGScheduler4::isHung(void)

{
  return 0;
}



// IGScheduler4::bind(IGHardwareContext*, int, unsigned char)

int IGScheduler4::bind(int param_1,sockaddr *param_2,socklen_t param_3)

{
  undefined4 in_EAX;
  
  return CONCAT31((int3)((uint)in_EAX >> 8),1);
}



// IGScheduler4::getPmUtilizationSnapshot()

undefined8 IGScheduler4::getPmUtilizationSnapshot(void)

{
  return 0xe00002c7;
}



// IGScheduler4::setThermalAttribute(unsigned int)

void IGScheduler4::setThermalAttribute(void)

{
  return;
}



// IGScheduler4::setPerfLogLevel(unsigned long long)

void IGScheduler4::setPerfLogLevel(void)

{
  return;
}



// IGScheduler4::updateThermalStallConfigs(unsigned int, unsigned int)

void IGScheduler4::updateThermalStallConfigs(void)

{
  return;
}



// IGScheduler4::updateThermalStallStats(ThermalStallStats*)

void IGScheduler4::updateThermalStallStats(void)

{
  return;
}



void __GLOBAL__sub_I_IGScheduler_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGScheduler4::gMetaClass,"IGScheduler4",
             (OSMetaClass *)&IGScheduler::gMetaClass,0x490);
  IGScheduler4::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGScheduler4::gMetaClass);
  return;
}



// IGHardwareGuCWorkQueue::MetaClass::MetaClass()

void __thiscall IGHardwareGuCWorkQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuCWorkQueue",(OSMetaClass *)__got::gMetaClass,0x48);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuCWorkQueue::MetaClass::~MetaClass()

void __thiscall IGHardwareGuCWorkQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(OSMetaClass const*)

void __thiscall
IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuCWorkQueue;
  return;
}



// IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(OSMetaClass const*)

void __thiscall
IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuCWorkQueue;
  return;
}



// IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue()

void __thiscall IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue()

void __thiscall IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue()

void __thiscall IGHardwareGuCWorkQueue::~IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareGuCWorkQueue_ktv,this,0x48);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuCWorkQueue::operator delete(void*, unsigned long)

void __cdecl IGHardwareGuCWorkQueue::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareGuCWorkQueue_ktv,param_1,param_2);
  return;
}



// IGHardwareGuCWorkQueue::getMetaClass() const

undefined8 * IGHardwareGuCWorkQueue::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareGuCWorkQueue::MetaClass::MetaClass()

void __thiscall IGHardwareGuCWorkQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuCWorkQueue",(OSMetaClass *)__got::gMetaClass,0x48);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuCWorkQueue::MetaClass::alloc() const

OSObject * IGHardwareGuCWorkQueue::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGHardwareGuCWorkQueue_ktv,0x48);
  OSObject::OSObject(this,(OSMetaClass *)&IGHardwareGuCWorkQueue::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGuCWorkQueue;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareGuCWorkQueue::operator new(unsigned long)

void * __thiscall IGHardwareGuCWorkQueue::operator_new(IGHardwareGuCWorkQueue *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareGuCWorkQueue_ktv,this);
  return pvVar1;
}



// IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue()

void __thiscall IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGuCWorkQueue;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue()

void __thiscall IGHardwareGuCWorkQueue::IGHardwareGuCWorkQueue(IGHardwareGuCWorkQueue *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGuCWorkQueue;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuCWorkQueue::withOptions(IOGraphicsAccelerator2*, unsigned int,
// UK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC*)

IGHardwareGuCWorkQueue * __cdecl
IGHardwareGuCWorkQueue::withOptions(long *param_1,undefined4 param_2,long param_3)

{
  IGHardwareGuCWorkQueue *this;
  undefined8 uVar1;
  
  this = (IGHardwareGuCWorkQueue *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwareGuCWorkQueue *)0x0) {
    uVar1 = initWithAccelerator(this,param_1,param_2,param_3);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwareGuCWorkQueue *)0x0;
}



// IGHardwareGuCWorkQueue::initWithAccelerator(IOGraphicsAccelerator2*, unsigned int,
// UK_GEN11_SCHED_PROCESS_DESCRIPTOR_REC*)

undefined8 __thiscall
IGHardwareGuCWorkQueue::initWithAccelerator
          (IGHardwareGuCWorkQueue *this,long *param_1,undefined4 param_2,long param_3)

{
  long lVar1;
  IGSharedMappedBuffer *this_00;
  undefined8 uVar2;
  
  *(long **)(this + 0x10) = param_1;
  (**(code **)(*param_1 + 0x20))(param_1);
  *(undefined4 *)(this + 0x18) = param_2;
  lVar1 = _IOLockAlloc();
  *(long *)(this + 0x20) = lVar1;
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    _IOLockLock(lVar1);
    uVar2 = 0;
    this_00 = IGSharedMappedBuffer::withOptions(param_1[0x2a],0x2000,0,0);
    *(IGSharedMappedBuffer **)(this + 0x30) = this_00;
    if (this_00 != (IGSharedMappedBuffer *)0x0) {
      uVar2 = IGSharedMappedBuffer::getVirtualAddress(this_00);
      *(undefined8 *)(param_3 + 0x18) = uVar2;
      *(undefined8 *)(param_3 + 0x20) = 0x100002000;
      lVar1 = *(long *)(this + 0x10);
      if (((&DAT_000011c0)[lVar1] & 0x20) != 0) {
        IntelAccelerator::transferOwnership(lVar1,*(IGMappedBuffer **)(this + 0x30));
        lVar1 = *(long *)(this + 0x10);
      }
      lVar1 = *(long *)(&DAT_00001270 + lVar1);
      *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar1 + 6) = 1;
      do {
      } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar1 + 6) & 1) != 0);
      *(long *)(this + 0x38) = param_3;
      *(undefined4 *)(this + 0x40) = 0;
      _IOLockUnlock(*(undefined8 *)(this + 0x20));
      uVar2 = 1;
    }
  }
  return uVar2;
}



// IGHardwareGuCWorkQueue::lockQueue()

void __thiscall IGHardwareGuCWorkQueue::lockQueue(IGHardwareGuCWorkQueue *this)

{
  _IOLockLock(*(undefined8 *)(this + 0x20));
  return;
}



// IGHardwareGuCWorkQueue::unlockQueue()

void __thiscall IGHardwareGuCWorkQueue::unlockQueue(IGHardwareGuCWorkQueue *this)

{
  _IOLockUnlock(*(undefined8 *)(this + 0x20));
  return;
}



// IGHardwareGuCWorkQueue::free()

void __thiscall IGHardwareGuCWorkQueue::free(IGHardwareGuCWorkQueue *this,void *param_1)

{
  long lVar1;
  IGMappedBuffer *pIVar2;
  
  pIVar2 = *(IGMappedBuffer **)(this + 0x30);
  if (pIVar2 != (IGMappedBuffer *)0x0) {
    if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) != 0) {
      IntelAccelerator::transferOwnership(*(long *)(this + 0x10),pIVar2);
      pIVar2 = *(IGMappedBuffer **)(this + 0x30);
    }
    (**(code **)(*(long *)pIVar2 + 0x28))(pIVar2);
    *(undefined8 *)(this + 0x30) = 0;
    lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar1 + 6) = 1;
    do {
    } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar1 + 6) & 1) != 0);
  }
  if (*(long *)(this + 0x20) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x20) = 0;
  }
  return;
}



// IGHardwareGuCWorkQueue::calculateFreeSpace()

int __thiscall IGHardwareGuCWorkQueue::calculateFreeSpace(IGHardwareGuCWorkQueue *this)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  
  lVar2 = *(long *)(this + 0x38);
  uVar1 = *(uint *)(this + 0x28);
  if (*(uint *)(lVar2 + 0xc) < uVar1) {
    iVar3 = (*(int *)(lVar2 + 0x20) - uVar1) + *(int *)(lVar2 + 0xc);
  }
  else if (uVar1 < *(uint *)(lVar2 + 0xc)) {
    iVar3 = *(int *)(lVar2 + 0xc) - uVar1;
  }
  else {
    iVar3 = *(int *)(lVar2 + 0x20);
  }
  return iVar3;
}



// IGHardwareGuCWorkQueue::allocItem(bool*)

uint __thiscall IGHardwareGuCWorkQueue::allocItem(IGHardwareGuCWorkQueue *this,undefined1 *param_1)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  
  _IOLockLock(*(undefined8 *)(this + 0x20));
  lVar2 = *(long *)(this + 0x38);
  uVar1 = *(uint *)(this + 0x28);
  if (*(uint *)(lVar2 + 0xc) < uVar1) {
    uVar3 = (*(int *)(lVar2 + 0x20) - uVar1) + *(int *)(lVar2 + 0xc);
  }
  else if (uVar1 < *(uint *)(lVar2 + 0xc)) {
    uVar3 = *(int *)(lVar2 + 0xc) - uVar1;
  }
  else {
    uVar3 = *(uint *)(lVar2 + 0x20);
  }
  uVar4 = 0x2000;
  if (0xf < uVar3) {
    uVar3 = uVar1 + 0x10;
    if (*(uint *)(lVar2 + 0x20) <= uVar3) {
      if (param_1 != (undefined1 *)0x0) {
        *param_1 = 1;
      }
      uVar3 = uVar3 - *(int *)(lVar2 + 0x20);
    }
    *(uint *)(this + 0x28) = uVar3;
    uVar4 = uVar1;
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x20));
  return uVar4;
}



// IGHardwareGuCWorkQueue::addItem(SGfxContextDescriptor const&, IGHwCsType, unsigned int,
// UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC&)

uint __thiscall
IGHardwareGuCWorkQueue::addItem
          (IGHardwareGuCWorkQueue *this,uint *param_1,byte param_2,uint param_3,uint *param_4)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  long lVar6;
  int iVar7;
  undefined1 local_39;
  byte local_38 [8];
  
  local_38[0] = 0;
  IGHardwareGuC::getTargetEngineWIForHwCsType(param_2,local_38);
  local_39 = 0;
  iVar7 = -10;
  do {
    uVar3 = allocItem(this,&local_39);
    if (uVar3 != 0x2000) {
      param_4[3] = 0;
      param_4[1] = 0;
      param_4[2] = 0;
      *param_4 = (uint)local_38[0] << 8 | 0x30003;
      param_4[1] = *param_1;
      uVar4 = param_1[1] >> 5 & 0x7ff;
      param_4[2] = uVar4;
      param_4[2] = (param_3 & 0x3ff8) << 0xf | param_1[1] >> 0xc & 0x1f800 | uVar4;
      lVar1 = *(long *)(this + 0x38);
      puVar5 = (uint *)((ulong)uVar3 + *(long *)(lVar1 + 0x18));
      lVar2 = *(long *)(lVar1 + 0x18);
      lVar6 = 0;
      do {
        *puVar5 = param_4[lVar6];
        puVar5 = puVar5 + 1;
        if ((uint *)(lVar2 + 0x2000) <= puVar5) {
          puVar5 = *(uint **)(lVar1 + 0x18);
        }
        lVar6 = lVar6 + 1;
      } while ((int)lVar6 != 4);
      return uVar3;
    }
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
    _thread_block(0);
    iVar7 = iVar7 + 1;
  } while (iVar7 != 0);
  addItem();
  return 0;
}



// IGHardwareGuCWorkQueue::flush()

undefined8 __thiscall IGHardwareGuCWorkQueue::flush(IGHardwareGuCWorkQueue *this)

{
  int *piVar1;
  char cVar2;
  ulong uVar3;
  uint uVar4;
  undefined8 uVar5;
  
  piVar1 = *(int **)(*(long *)(this + 0x38) + 4);
  _IOLockLock(*(undefined8 *)(this + 0x20));
  *(undefined4 *)(*(long *)(this + 0x38) + 0x10) = *(undefined4 *)(this + 0x28);
  uVar3 = (ulong)*(uint *)(this + 0x40);
  uVar4 = *(uint *)(this + 0x40) + 1;
  if (uVar4 == 0) {
    uVar4 = 1;
  }
  do {
    cVar2 = _OSCompareAndSwap64(uVar3 << 0x20 | 1,(ulong)uVar4 << 0x20 | 1,piVar1);
    if (cVar2 != '\0') {
      *(uint *)(this + 0x40) = uVar4;
      uVar5 = 0;
LAB_0001c4ac:
      _IOLockUnlock(*(undefined8 *)(this + 0x20));
      return uVar5;
    }
    if (*piVar1 == 0) {
      uVar5 = 1;
      goto LAB_0001c4ac;
    }
    uVar3 = (ulong)(uint)piVar1[1];
    uVar4 = *(int *)(this + 0x40) + 1U;
    if (*(int *)(this + 0x40) + 1U == 0) {
      uVar4 = 1;
    }
  } while( true );
}



// IGHardwareGuCWorkQueue::isEmpty()

undefined8 __thiscall IGHardwareGuCWorkQueue::isEmpty(IGHardwareGuCWorkQueue *this)

{
  long lVar1;
  undefined8 uVar2;
  
  lVar1 = *(long *)(this + 0x38);
  if (*(int *)(lVar1 + 0x10) == *(int *)(this + 0x28)) {
    uVar2 = CONCAT71((int7)((ulong)lVar1 >> 8),*(int *)(lVar1 + 0xc) == *(int *)(lVar1 + 0x10));
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



// IGHardwareGuCWorkQueue::debugDump()

void IGHardwareGuCWorkQueue::debugDump(void)

{
  return;
}



// IGHardwareGuCWorkQueue::MetaClass::~MetaClass()

void __thiscall IGHardwareGuCWorkQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwareGuCWorkQueue_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareGuCWorkQueue::gMetaClass,"IGHardwareGuCWorkQueue",
             (OSMetaClass *)__got::gMetaClass,0x48);
  IGHardwareGuCWorkQueue::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareGuCWorkQueue::gMetaClass);
  return;
}



// IGHardwareCommandStreamer4::MetaClass::MetaClass()

void __thiscall IGHardwareCommandStreamer4::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareCommandStreamer4",(OSMetaClass *)__got::gMetaClass,0x1c0
            );
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareCommandStreamer4::MetaClass::~MetaClass()

void __thiscall IGHardwareCommandStreamer4::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareCommandStreamer4::IGHardwareCommandStreamer4(OSMetaClass const*)

void __thiscall
IGHardwareCommandStreamer4::IGHardwareCommandStreamer4
          (IGHardwareCommandStreamer4 *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  *(undefined8 *)(this + 0x40) = 0;
  return;
}



// IGHardwareCommandStreamer4::IGHardwareCommandStreamer4(OSMetaClass const*)

void __thiscall
IGHardwareCommandStreamer4::IGHardwareCommandStreamer4
          (IGHardwareCommandStreamer4 *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  *(undefined8 *)(this + 0x40) = 0;
  return;
}



// IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4()

void __thiscall
IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4(IGHardwareCommandStreamer4 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4()

void __thiscall
IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4(IGHardwareCommandStreamer4 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4()

void __thiscall
IGHardwareCommandStreamer4::~IGHardwareCommandStreamer4(IGHardwareCommandStreamer4 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareCommandStreamer4_ktv,this,0x1c0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer4::operator delete(void*, unsigned long)

void __cdecl IGHardwareCommandStreamer4::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareCommandStreamer4_ktv,param_1,param_2);
  return;
}



// IGHardwareCommandStreamer4::getMetaClass() const

undefined8 * IGHardwareCommandStreamer4::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareCommandStreamer4::MetaClass::MetaClass()

void __thiscall IGHardwareCommandStreamer4::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareCommandStreamer4",(OSMetaClass *)__got::gMetaClass,0x1c0
            );
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareCommandStreamer4::MetaClass::alloc() const

OSObject * IGHardwareCommandStreamer4::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGHardwareCommandStreamer4_ktv,0x1c0);
  OSObject::OSObject(this,(OSMetaClass *)&IGHardwareCommandStreamer4::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareCommandStreamer4::operator new(unsigned long)

void * __thiscall IGHardwareCommandStreamer4::operator_new(IGHardwareCommandStreamer4 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareCommandStreamer4_ktv,this);
  return pvVar1;
}



// IGHardwareCommandStreamer4::IGHardwareCommandStreamer4()

void __thiscall
IGHardwareCommandStreamer4::IGHardwareCommandStreamer4(IGHardwareCommandStreamer4 *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareCommandStreamer4::IGHardwareCommandStreamer4()

void __thiscall
IGHardwareCommandStreamer4::IGHardwareCommandStreamer4(IGHardwareCommandStreamer4 *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer4;
  *(undefined8 *)(this + 0x40) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer4::hardwareCommandStreamer(IOGraphicsAccelerator2*, IOWorkLoop*,
// IGScheduler4*, IGHwCsType)

IGHardwareCommandStreamer4 * __cdecl
IGHardwareCommandStreamer4::hardwareCommandStreamer
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4)

{
  IGHardwareCommandStreamer4 *this;
  undefined8 uVar1;
  undefined1 auVar2 [16];
  
  uVar1 = param_4;
  auVar2 = (**(code **)(gMetaClass + 0x88))(&gMetaClass);
  this = auVar2._0_8_;
  if (this != (IGHardwareCommandStreamer4 *)0x0) {
    uVar1 = init(this,param_1,auVar2._8_8_,uVar1,(uint)param_4 & 0xff);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwareCommandStreamer4 *)0x0;
}



// IGHardwareCommandStreamer4::init(IOGraphicsAccelerator2*, IOWorkLoop*, IGScheduler4*, IGHwCsType)

undefined8 __thiscall
IGHardwareCommandStreamer4::init
          (IGHardwareCommandStreamer4 *this,undefined8 param_1,undefined8 param_2,
          undefined8 param_4_00,uint param_4)

{
  char cVar1;
  long *plVar2;
  undefined8 uVar3;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 == '\0') {
    uVar3 = 0;
  }
  else {
    *(undefined8 *)(this + 0x10) = param_1;
    *(undefined1 **)(this + 0x188) = &kIGHwCsDesc + (ulong)(param_4 & 0xff) * 0x79;
    uVar3 = 0;
    plVar2 = IGSpinLock::withOptions(0x48574353,0);
    *(long **)(this + 0x180) = plVar2;
    if (plVar2 != (long *)0x0) {
      IGInterruptBridge::requestEnableCallback
                (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),(long *)this,
                 registerForInterrupts);
      uVar3 = 1;
    }
  }
  return uVar3;
}



// IGHardwareCommandStreamer4::registerForInterrupts()

void __thiscall IGHardwareCommandStreamer4::registerForInterrupts(IGHardwareCommandStreamer4 *this)

{
  IGInterruptBridge::registerForInterruptType
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x188) + 0x69),handleHardwareUserInterrupt,this,0,
             (undefined8 *)(this + 0x18));
  return;
}



// IGHardwareCommandStreamer4::free()

void __thiscall IGHardwareCommandStreamer4::free(IGHardwareCommandStreamer4 *this,void *param_1)

{
  long *plVar1;
  
  if (*(long *)(this + 0x18) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(long *)(this + 0x18));
  }
  plVar1 = *(long **)(this + 0x180);
  if (plVar1 != (long *)0x0) {
    if (*plVar1 != 0) {
      _lck_spin_free(*plVar1,IGSpinLock::fGlobalLockGroup);
    }
    if (plVar1[1] != 0) {
      _lck_attr_free();
    }
    _IOFreeTypeImpl(IGSpinLock::operator_delete,plVar1);
  }
  *(undefined8 *)(this + 0x180) = 0;
                    // WARNING: Could not recover jumptable at 0x0001c8d8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGHardwareCommandStreamer4::enableContextSwitchInterrupt()

void __thiscall
IGHardwareCommandStreamer4::enableContextSwitchInterrupt(IGHardwareCommandStreamer4 *this)

{
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x188) + 0x65));
  return;
}



// IGHardwareCommandStreamer4::disableContextSwitchInterrupt()

void IGHardwareCommandStreamer4::disableContextSwitchInterrupt(void)

{
  return;
}



// IGHardwareCommandStreamer4::enableErrorInterrupt()

void __thiscall IGHardwareCommandStreamer4::enableErrorInterrupt(IGHardwareCommandStreamer4 *this)

{
  IntelAccelerator *this_00;
  long lVar1;
  long lVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar1 = *(long *)(this + 0x188);
  lVar2 = *(long *)(this_00 + 0x1270);
  *(undefined4 *)(lVar2 + (ulong)*(uint *)(lVar1 + 0x41)) = 0xffffffff;
  *(undefined4 *)((ulong)*(uint *)(lVar1 + 0x45) + lVar2) = 0xfffffffa;
  IntelAccelerator::SafeForceWake(this_00,0,7);
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x188) + 0x6d));
  return;
}



// IGHardwareCommandStreamer4::disableErrorInterrupt()

void __thiscall IGHardwareCommandStreamer4::disableErrorInterrupt(IGHardwareCommandStreamer4 *this)

{
  IGInterruptBridge::disableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x188) + 0x6d));
  return;
}



// IGHardwareCommandStreamer4::enableStampInterrupt(int)

void __thiscall
IGHardwareCommandStreamer4::enableStampInterrupt(IGHardwareCommandStreamer4 *this,int param_1)

{
  int iVar1;
  undefined8 *puVar2;
  ulong uVar3;
  
  puVar2 = *(undefined8 **)(this + 0x180);
  _lck_spin_lock(*puVar2);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 1,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  uVar3 = (ulong)param_1;
  iVar1 = *(int *)(this + uVar3 * 4 + 0x80);
  *(int *)(this + uVar3 * 4 + 0x80) = iVar1 + 1;
  if ((iVar1 == 0) && (*(long *)(this + 0x40) == 0)) {
    *(ulong *)(this + (uVar3 >> 6) * 8 + 0x40) =
         *(ulong *)(this + (uVar3 >> 6) * 8 + 0x40) | 1L << ((byte)param_1 & 0x3f);
    IGInterruptBridge::enableInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(int *)(*(long *)(this + 0x188) + 0x69));
  }
  puVar2 = *(undefined8 **)(this + 0x180);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 2,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar2);
  return;
}



// IGHardwareCommandStreamer4::disableStampInterrupt(int)

void __thiscall
IGHardwareCommandStreamer4::disableStampInterrupt(IGHardwareCommandStreamer4 *this,int param_1)

{
  int iVar1;
  undefined8 *puVar2;
  byte bVar3;
  ulong uVar4;
  
  puVar2 = *(undefined8 **)(this + 0x180);
  _lck_spin_lock(*puVar2);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 1,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  uVar4 = (ulong)param_1;
  iVar1 = *(int *)(this + uVar4 * 4 + 0x80);
  *(int *)(this + uVar4 * 4 + 0x80) = iVar1 + -1;
  if ((iVar1 == 1) &&
     (bVar3 = (byte)param_1 & 0x3f,
     *(ulong *)(this + (uVar4 >> 6) * 8 + 0x40) =
          *(ulong *)(this + (uVar4 >> 6) * 8 + 0x40) &
          (-2L << bVar3 | 0xfffffffffffffffeU >> 0x40 - bVar3), *(long *)(this + 0x40) == 0)) {
    IGInterruptBridge::disableInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(int *)(*(long *)(this + 0x188) + 0x69));
  }
  puVar2 = *(undefined8 **)(this + 0x180);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 2,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar2);
  return;
}



// IGHardwareCommandStreamer4::isStampInterruptEnabled(int)

ulong __thiscall
IGHardwareCommandStreamer4::isStampInterruptEnabled(IGHardwareCommandStreamer4 *this,int param_1)

{
  undefined8 *puVar1;
  ulong uVar2;
  
  puVar1 = *(undefined8 **)(this + 0x180);
  _lck_spin_lock(*puVar1);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 1,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  uVar2 = *(ulong *)(this + ((ulong)(long)param_1 >> 6) * 8 + 0x40);
  puVar1 = *(undefined8 **)(this + 0x180);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 2,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar1);
  return CONCAT71((int7)((ulong)this >> 8),(uVar2 >> ((long)param_1 & 0x3fU) & 1) != 0) & 0xffffffff
  ;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer4::handleHardwareUserInterrupt(OSObject*, void*)

void __cdecl IGHardwareCommandStreamer4::handleHardwareUserInterrupt(OSMetaClassBase *param_1)

{
  long lVar1;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00038,(ulong)**(byte **)(lVar1 + 0x188),0,0,0,0);
    }
  }
  IntelAccelerator::signalStampUpdate(*(IntelAccelerator **)(lVar1 + 0x10),(ulong *)(lVar1 + 0x40));
  return;
}



// IGHardwareCommandStreamer4::setGTFrequencyMMIO(unsigned int)

void __thiscall
IGHardwareCommandStreamer4::setGTFrequencyMMIO(IGHardwareCommandStreamer4 *this,undefined4 param_1)

{
  undefined8 local_38;
  long local_30;
  
  local_38 = 0;
  local_30 = 0;
  _clock_get_uptime(&local_38);
  _absolutetime_to_nanoseconds(local_38,&local_30);
  if (0x32 < (ulong)(local_30 - *(long *)(this + 400))) {
    *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa008) = param_1;
    *(long *)(this + 400) = local_30;
  }
  return;
}



// IGHardwareCommandStreamer4::MetaClass::~MetaClass()

void __thiscall IGHardwareCommandStreamer4::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGHardwareCommandStreamer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareCommandStreamer4::gMetaClass,"IGHardwareCommandStreamer4",
             (OSMetaClass *)__got::gMetaClass,0x1c0);
  IGHardwareCommandStreamer4::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareCommandStreamer4::gMetaClass);
  return;
}



// IGHardwareGuCCTBuffer::MetaClass::MetaClass()

void __thiscall IGHardwareGuCCTBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuCCTBuffer",(OSMetaClass *)__got::gMetaClass,0xa8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuCCTBuffer::MetaClass::~MetaClass()

void __thiscall IGHardwareGuCCTBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(OSMetaClass const*)

void __thiscall
IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  *(undefined8 *)(this + 0x90) = 0;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x90),4);
  return;
}



// IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(OSMetaClass const*)

void __thiscall
IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  *(undefined8 *)(this + 0x90) = 0;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x90),4);
  return;
}



// IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer()

void __thiscall IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x90));
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 3;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3d != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                        deallocate(IGHardwareGuCCTBuffer::CommandTransportRequest**,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer()

void __thiscall IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x90));
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer()

void __thiscall IGHardwareGuCCTBuffer::~IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x90));
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareGuCCTBuffer_ktv,this,0xa8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuCCTBuffer::operator delete(void*, unsigned long)

void __cdecl IGHardwareGuCCTBuffer::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareGuCCTBuffer_ktv,param_1,param_2);
  return;
}



// IGHardwareGuCCTBuffer::getMetaClass() const

undefined8 * IGHardwareGuCCTBuffer::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareGuCCTBuffer::MetaClass::MetaClass()

void __thiscall IGHardwareGuCCTBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuCCTBuffer",(OSMetaClass *)__got::gMetaClass,0xa8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuCCTBuffer::MetaClass::alloc() const

IGHardwareGuCCTBuffer * IGHardwareGuCCTBuffer::MetaClass::alloc(void)

{
  IGHardwareGuCCTBuffer *this;
  
  this = (IGHardwareGuCCTBuffer *)_OSObject_typed_operator_new(&IGHardwareGuCCTBuffer_ktv,0xa8);
  IGHardwareGuCCTBuffer(this);
  return this;
}



// IGHardwareGuCCTBuffer::operator new(unsigned long)

void * __thiscall IGHardwareGuCCTBuffer::operator_new(IGHardwareGuCCTBuffer *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareGuCCTBuffer_ktv,this);
  return pvVar1;
}



// IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer()

void __thiscall IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this)

{
  IGHardwareGuCCTBuffer(this);
  return;
}



// IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer()

void __thiscall IGHardwareGuCCTBuffer::IGHardwareGuCCTBuffer(IGHardwareGuCCTBuffer *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGuCCTBuffer;
  *(undefined8 *)(this + 0x90) = 0;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x90),4);
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuCCTBuffer::withOptions(IOGraphicsAccelerator2*)

IGHardwareGuCCTBuffer * __cdecl IGHardwareGuCCTBuffer::withOptions(long *param_1)

{
  IGHardwareGuCCTBuffer *this;
  undefined8 uVar1;
  
  this = (IGHardwareGuCCTBuffer *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwareGuCCTBuffer *)0x0) {
    uVar1 = initWithAccelerator(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwareGuCCTBuffer *)0x0;
}



// IGHardwareGuCCTBuffer::initWithAccelerator(IOGraphicsAccelerator2*)

undefined8 __thiscall
IGHardwareGuCCTBuffer::initWithAccelerator(IGHardwareGuCCTBuffer *this,long *param_1)

{
  long lVar1;
  IGSharedMappedBuffer *pIVar2;
  
  *(long **)(this + 0x10) = param_1;
  (**(code **)(*param_1 + 0x20))(param_1);
  *(undefined8 *)(this + 0x90) = 0;
  lVar1 = _IOLockAlloc();
  *(long *)(this + 0x18) = lVar1;
  if (lVar1 != 0) {
    lVar1 = _IOLockAlloc();
    *(long *)(this + 0x20) = lVar1;
    if (lVar1 != 0) {
      _IOLockLock();
      _IOLockLock(*(undefined8 *)(this + 0x20));
      pIVar2 = IGSharedMappedBuffer::withOptions(param_1[0x2a],*(ulonglong *)__got::_page_size,0,0);
      *(IGSharedMappedBuffer **)(this + 0x40) = pIVar2;
      if (pIVar2 == (IGSharedMappedBuffer *)0x0) {
        return 0;
      }
      *(undefined8 *)(this + 0x38) = 0;
      ctChannelInit(this);
      lVar1 = *(long *)(this + 0x10);
      if (((&DAT_000011c0)[lVar1] & 0x20) != 0) {
        IntelAccelerator::transferOwnership(lVar1,*(IGMappedBuffer **)(this + 0x40));
        lVar1 = *(long *)(this + 0x10);
      }
      lVar1 = *(long *)(&DAT_00001270 + lVar1);
      *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar1 + 6) = 1;
      do {
      } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar1 + 6) & 1) != 0);
      _IOLockUnlock(*(undefined8 *)(this + 0x20));
      _IOLockUnlock(*(undefined8 *)(this + 0x18));
      return 1;
    }
    _IOLockFree(*(undefined8 *)(this + 0x18));
  }
  return 0;
}



// IGHardwareGuCCTBuffer::lockQueue(UK_GEN11_CMD_TRANSPORT_BUFFER_TYPE)

void __thiscall IGHardwareGuCCTBuffer::lockQueue(IGHardwareGuCCTBuffer *this,uint param_1)

{
  _IOLockLock(*(undefined8 *)(this + (ulong)param_1 * 8 + 0x18));
  return;
}



// IGHardwareGuCCTBuffer::ctChannelInit()

void __thiscall IGHardwareGuCCTBuffer::ctChannelInit(IGHardwareGuCCTBuffer *this)

{
  int *piVar1;
  int iVar2;
  long lVar3;
  uint uVar4;
  uint uVar5;
  ulong uVar6;
  IGHardwareGuCCTBuffer *pIVar7;
  long lVar8;
  
  pIVar7 = this + 0x48;
  *(undefined4 *)(this + 0x88) = *(undefined4 *)(this + 0x38);
  uVar6 = *(ulong *)__got::_page_size;
  lVar8 = 0;
  do {
    uVar4 = (int)(uVar6 >> 2) * (int)lVar8;
    uVar5 = (int)(uVar6 >> 1) + uVar4;
    lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x40));
    *(ulong *)pIVar7 = lVar3 + (ulong)uVar4;
    lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x40));
    *(ulong *)(pIVar7 + 8) = lVar3 + (ulong)uVar5;
    piVar1 = *(int **)pIVar7;
    iVar2 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x40));
    piVar1[1] = 0;
    piVar1[2] = 0;
    piVar1[3] = 0;
    piVar1[4] = 0;
    piVar1[5] = 0;
    piVar1[6] = 0;
    piVar1[7] = 0;
    piVar1[8] = 0;
    piVar1[9] = 0;
    piVar1[10] = 0;
    piVar1[0xb] = 0;
    piVar1[0xc] = 0;
    piVar1[0xd] = 0;
    piVar1[0xe] = 0;
    piVar1[0xf] = 0;
    *piVar1 = iVar2 + uVar5;
    uVar6 = *(ulong *)__got::_page_size;
    piVar1[3] = (int)(uVar6 >> 2);
    piVar1[9] = *(int *)(this + 0x38);
    lVar8 = lVar8 + 1;
    pIVar7 = pIVar7 + 0x10;
  } while (lVar8 != 4);
  return;
}



// IGHardwareGuCCTBuffer::unlockQueue(UK_GEN11_CMD_TRANSPORT_BUFFER_TYPE)

void __thiscall IGHardwareGuCCTBuffer::unlockQueue(IGHardwareGuCCTBuffer *this,uint param_1)

{
  _IOLockUnlock(*(undefined8 *)(this + (ulong)param_1 * 8 + 0x18));
  return;
}



// IGHardwareGuCCTBuffer::free()

void __thiscall IGHardwareGuCCTBuffer::free(IGHardwareGuCCTBuffer *this,void *param_1)

{
  IGMappedBuffer *pIVar1;
  long lVar2;
  
  *(undefined8 *)(this + 0x90) = 0;
  pIVar1 = *(IGMappedBuffer **)(this + 0x40);
  if (pIVar1 != (IGMappedBuffer *)0x0) {
    if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) != 0) {
      IntelAccelerator::transferOwnership(*(long *)(this + 0x10),pIVar1);
      pIVar1 = *(IGMappedBuffer **)(this + 0x40);
    }
    (**(code **)(*(long *)pIVar1 + 0x28))(pIVar1);
    *(undefined8 *)(this + 0x40) = 0;
    lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar2 + 6) = 1;
    do {
    } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar2 + 6) & 1) != 0);
  }
  lVar2 = 0;
  do {
    if (*(long *)(this + lVar2 * 8 + 0x18) != 0) {
      _IOLockFree();
      *(undefined8 *)(this + lVar2 * 8 + 0x18) = 0;
    }
    lVar2 = lVar2 + 1;
  } while (lVar2 != 4);
                    // WARNING: Could not recover jumptable at 0x0001d388. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0x10) + 0x28))();
  return;
}



// IGHardwareGuCCTBuffer::hostToGuCAction(unsigned int const*, unsigned int, int, unsigned int*,
// bool)

bool __thiscall
IGHardwareGuCCTBuffer::hostToGuCAction
          (IGHardwareGuCCTBuffer *this,int *param_1,uint param_2,int param_3,uint *param_4,
          byte param_5)

{
  IGVector<> *this_00;
  char *pcVar1;
  uint uVar2;
  uint uVar3;
  undefined8 uVar4;
  byte bVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  long lVar9;
  ulong uVar10;
  IGHardwareGuCCTBuffer *pIVar11;
  uint uVar12;
  int iVar13;
  uint uVar14;
  ulong uVar15;
  undefined8 local_48;
  uint *local_40;
  IGHardwareGuCCTBuffer *local_38;
  
  local_40 = param_4;
  _IOLockLock(*(undefined8 *)(this + 0x18));
  lVar9 = *(long *)(this + 0x48);
  lVar7 = *(long *)(this + 0x50);
  local_48 = 0;
  uVar12 = *(uint *)(lVar9 + 0x10) >> 2;
  uVar14 = *(uint *)(lVar9 + 0x14) >> 2;
  uVar8 = *(uint *)(lVar9 + 0xc) >> 2;
  local_38 = this;
  uVar3 = _OSIncrementAtomic(this + 0x3c);
  uVar2 = 0;
  if (uVar14 < uVar12) {
    uVar2 = uVar8;
  }
  if (uVar8 <= ((uVar14 + param_2 + 1) - uVar12) + uVar2) {
    _IOLockUnlock(*(undefined8 *)(local_38 + 0x18));
    return false;
  }
  bVar5 = *param_1 != 0x10 & param_5;
  *(uint *)(lVar7 + (ulong)uVar14 * 4) =
       *param_1 * 0x10000 + ((uint)bVar5 << 10 | param_2 & 0x1f) + 0x100;
  uVar15 = (ulong)(uVar14 + 1) % (ulong)uVar8;
  *(uint *)(lVar7 + uVar15 * 4) = uVar3;
  uVar15 = (ulong)((int)uVar15 + 1) % (ulong)uVar8;
  iVar13 = (int)uVar15;
  if (1 < param_2) {
    uVar10 = 1;
    do {
      *(int *)(lVar7 + uVar15 * 4) = param_1[uVar10];
      uVar10 = uVar10 + 1;
      uVar15 = (ulong)((int)uVar15 + 1) % (ulong)uVar8;
      iVar13 = (int)uVar15;
    } while (param_2 != uVar10);
  }
  if (bVar5 == 0) {
    *(int *)(lVar9 + 0x14) = iVar13 << 2;
    pcVar1 = "__ZNK15IGAccelResource23fillSurfaceStateAuxInfoEPKNS_17ResourceInfoEntryER22SGfxRenderSurfaceState6Intent"
             + *(long *)(&DAT_00001270 + *(long *)(local_38 + 0x10)) + 0x5c;
    pcVar1[0] = '\0';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    do {
      if (*(uint *)(lVar9 + 0x1c) == uVar3) {
        if (param_3 < 1) goto LAB_0001d6ab;
        param_3 = param_3 + -1;
      }
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
      _thread_block(0);
    } while( true );
  }
  local_48 = (ulong)uVar3 | 0xdeadbeef00000000;
  this_00 = (IGVector<> *)(local_38 + 0x90);
  lVar7 = *(long *)(local_38 + 0x90);
  if (lVar7 == *(long *)(local_38 + 0x98)) {
    uVar4 = IGVector<>::grow(this_00,lVar7 * 2);
    if ((char)uVar4 == '\0') goto LAB_0001d501;
    lVar7 = *(long *)this_00;
  }
  *(long *)(local_38 + 0x90) = lVar7 + 1;
  *(undefined8 **)(*(long *)(local_38 + 0xa0) + lVar7 * 8) = &local_48;
LAB_0001d501:
  *(int *)(lVar9 + 0x14) = iVar13 << 2;
  pcVar1 = "__ZNK15IGAccelResource23fillSurfaceStateAuxInfoEPKNS_17ResourceInfoEntryER22SGfxRenderSurfaceState6Intent"
           + *(long *)(&DAT_00001270 + *(long *)(local_38 + 0x10)) + 0x5c;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  do {
    uVar14 = local_48._4_4_;
    if (local_48._4_4_ != 0xdeadbeef) {
      if (param_3 < 1) goto LAB_0001d5c9;
      param_3 = param_3 + -1;
    }
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
    _thread_block(0);
  } while( true );
LAB_0001d6ab:
  uVar14 = *(uint *)(lVar9 + 0x20);
  pIVar11 = local_38;
  goto LAB_0001d6b7;
LAB_0001d5c9:
  pIVar11 = local_38;
  if (*(long *)this_00 != 0) {
    uVar10 = *(long *)this_00 - 1;
    *(ulong *)(local_38 + 0x90) = uVar10;
    uVar15 = *(ulong *)(local_38 + 0x98);
    if (uVar10 < uVar15 >> 2) {
      lVar9 = (uVar15 >> 1) * 8;
      if (lVar9 < 0) {
        lVar9 = -0x8000000000000000;
      }
      if (uVar15 >> 0x3e != 0) {
        lVar9 = -0x8000000000000000;
      }
      lVar9 = _IOMallocTypeVarImpl
                        (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                         lVar9);
      pIVar11 = local_38;
      if (lVar9 != 0) {
        lVar7 = *(long *)this_00;
        if (lVar7 != 0) {
          lVar6 = 0;
          do {
            *(undefined8 *)(lVar9 + lVar6 * 8) =
                 *(undefined8 *)(*(long *)(local_38 + 0xa0) + lVar6 * 8);
            lVar6 = lVar6 + 1;
          } while (lVar7 != lVar6);
        }
        lVar7 = *(ulong *)(local_38 + 0x98) << 3;
        if (lVar7 < 0) {
          lVar7 = -0x8000000000000000;
        }
        if (*(ulong *)(local_38 + 0x98) >> 0x3d != 0) {
          lVar7 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHardwareGuCCTBuffer::CommandTransportRequest**,unsigned_long)
                            ::kalloc_type_view_29,*(undefined8 *)(local_38 + 0xa0),lVar7);
        *(long *)(pIVar11 + 0xa0) = lVar9;
        *(ulong *)(pIVar11 + 0x98) = uVar15 >> 1;
      }
    }
  }
LAB_0001d6b7:
  if (local_40 != (uint *)0x0) {
    *local_40 = uVar14;
  }
  _IOLockUnlock(*(undefined8 *)(pIVar11 + 0x18));
  return (uVar14 & 0xf000ffff) == 0xf0000000;
}



// IGHardwareGuCCTBuffer::gucToHostAction(unsigned int*)

ulong __thiscall IGHardwareGuCCTBuffer::gucToHostAction(IGHardwareGuCCTBuffer *this,long param_1)

{
  long lVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  uint uVar5;
  uint uVar6;
  long lVar7;
  
  _IOLockLock(*(undefined8 *)(this + 0x20));
  lVar1 = *(long *)(this + 0x58);
  uVar5 = *(uint *)(lVar1 + 0x10) >> 2;
  uVar4 = (ulong)uVar5;
  iVar3 = (*(uint *)(lVar1 + 0x14) >> 2) - uVar5;
  if (iVar3 != 0) {
    lVar2 = *(long *)(this + 0x60);
    uVar5 = *(uint *)(lVar1 + 0xc) >> 2;
    uVar6 = *(uint *)(lVar2 + uVar4 * 4) & 0x1f;
    if (uVar6 < (iVar3 >> 0x1f & uVar5) + iVar3) {
      lVar7 = 0;
      do {
        *(undefined4 *)(param_1 + lVar7 * 4) = *(undefined4 *)(lVar2 + uVar4 * 4);
        uVar4 = (ulong)((int)uVar4 + 1) % (ulong)uVar5;
        lVar7 = lVar7 + 1;
      } while ((ulong)uVar6 + 1 != lVar7);
      *(int *)(lVar1 + 0x10) = (int)uVar4 << 2;
      uVar4 = CONCAT71((int7)((ulong)param_1 >> 8),1);
      goto LAB_0001d766;
    }
  }
  uVar4 = 0;
LAB_0001d766:
  _IOLockUnlock(*(undefined8 *)(this + 0x20));
  return uVar4 & 0xffffffff;
}



// IGHardwareGuCCTBuffer::handleSoftwareGuCToHostInterrupt()

int __thiscall IGHardwareGuCCTBuffer::handleSoftwareGuCToHostInterrupt(IGHardwareGuCCTBuffer *this)

{
  int *piVar1;
  ulong uVar2;
  int iVar3;
  long lVar4;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  local_70 = 0;
  local_78 = 0;
  local_80 = 0;
  local_88 = 0;
  local_90 = 0;
  local_98 = 0;
  local_a0 = 0;
  local_a8 = 0;
  uVar2 = gucToHostAction(this,(long)&local_a8);
  iVar3 = 0;
  if ((char)uVar2 != '\0') {
    if (((uint)local_a8 >> 8 & 1) == 0) {
      if ((uint)local_a8 < 0x10000) {
        iVar3 = local_a8._4_4_;
      }
    }
    else {
      iVar3 = 0;
      if (*(long *)(this + 0x90) != 0) {
        lVar4 = 0;
        do {
          piVar1 = *(int **)(*(long *)(this + 0xa0) + lVar4 * 8);
          if (local_a8._4_4_ == *piVar1) {
            piVar1[1] = (int)local_a0;
            break;
          }
          lVar4 = lVar4 + 1;
        } while (*(long *)(this + 0x90) != lVar4);
        iVar3 = 0;
      }
    }
  }
  if (*(long *)__got::___stack_chk_guard != local_20) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return iVar3;
}



// IGHardwareGuCCTBuffer::MetaClass::~MetaClass()

void __thiscall IGHardwareGuCCTBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGVector<IGHardwareGuCCTBuffer::CommandTransportRequest*,
// IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IGHardwareGuCCTBuffer::CommandTransportRequest**,unsigned_long)
                                    ::kalloc_type_view_29,lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



void __GLOBAL__sub_I_IGHardwareGuCCTBuffer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareGuCCTBuffer::gMetaClass,"IGHardwareGuCCTBuffer",
             (OSMetaClass *)__got::gMetaClass,0xa8);
  IGHardwareGuCCTBuffer::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareGuCCTBuffer::gMetaClass);
  return;
}



// IGHardwareGuC::MetaClass::MetaClass()

void __thiscall IGHardwareGuC::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuC",(OSMetaClass *)__got::gMetaClass,0x9a0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuC::MetaClass::~MetaClass()

void __thiscall IGHardwareGuC::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareGuC::IGHardwareGuC(OSMetaClass const*)

void __thiscall IGHardwareGuC::IGHardwareGuC(IGHardwareGuC *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x978));
  return;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::IGHashTable()

void __thiscall IGHashTable<>::IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  long lVar1;
  undefined8 *puVar2;
  
  *(undefined ***)this = &__const::~IGHashTable;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  this[0x20] = (IGHashTable<>)0x1;
  this_00 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_00,0x10);
  *(IGVector<> **)(this + 8) = this_00;
  if ((this_00 != (IGVector<> *)0x0) && (lVar1 = *(long *)(this_00 + 8), lVar1 != 0)) {
    puVar2 = *(undefined8 **)(this_00 + 0x10);
    do {
      *puVar2 = 0;
      puVar2[1] = puVar2;
      puVar2[2] = 0;
      puVar2 = puVar2 + 3;
      lVar1 = lVar1 + -1;
    } while (lVar1 != 0);
  }
  return;
}



// IGHardwareGuC::IGHardwareGuC(OSMetaClass const*)

void __thiscall IGHardwareGuC::IGHardwareGuC(IGHardwareGuC *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x978));
  return;
}



// IGHardwareGuC::~IGHardwareGuC()

void __thiscall IGHardwareGuC::~IGHardwareGuC(IGHardwareGuC *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x978));
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareGuC::~IGHardwareGuC()

void __thiscall IGHardwareGuC::~IGHardwareGuC(IGHardwareGuC *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x978));
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareGuC::~IGHardwareGuC()

void __thiscall IGHardwareGuC::~IGHardwareGuC(IGHardwareGuC *this)

{
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x978));
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareGuC_ktv,this,0x9a0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::operator delete(void*, unsigned long)

void __cdecl IGHardwareGuC::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareGuC_ktv,param_1,param_2);
  return;
}



// IGHardwareGuC::getMetaClass() const

undefined8 * IGHardwareGuC::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareGuC::MetaClass::MetaClass()

void __thiscall IGHardwareGuC::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareGuC",(OSMetaClass *)__got::gMetaClass,0x9a0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareGuC::MetaClass::alloc() const

IGHardwareGuC * IGHardwareGuC::MetaClass::alloc(void)

{
  IGHardwareGuC *this;
  
  this = (IGHardwareGuC *)_OSObject_typed_operator_new(&IGHardwareGuC_ktv,0x9a0);
  IGHardwareGuC(this);
  return this;
}



// IGHardwareGuC::operator new(unsigned long)

void * __thiscall IGHardwareGuC::operator_new(IGHardwareGuC *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareGuC_ktv,this);
  return pvVar1;
}



// IGHardwareGuC::IGHardwareGuC()

void __thiscall IGHardwareGuC::IGHardwareGuC(IGHardwareGuC *this)

{
  IGHardwareGuC(this);
  return;
}



// IGHardwareGuC::IGHardwareGuC()

void __thiscall IGHardwareGuC::IGHardwareGuC(IGHardwareGuC *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareGuC;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x978));
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::getEngineClassForHwCsType(IGHwCsType)

undefined4 __cdecl IGHardwareGuC::getEngineClassForHwCsType(byte param_1)

{
  undefined4 uVar1;
  
  uVar1 = 5;
  if (param_1 < 4) {
    uVar1 = *(undefined4 *)(&DAT_0010be00 + (long)(char)param_1 * 4);
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::getTargetEngineWIForHwCsType(IGHwCsType, UK_GEN11_TARGET_ENGINE_REC&)

void __cdecl IGHardwareGuC::getTargetEngineWIForHwCsType(byte param_1,undefined1 *param_2)

{
  undefined1 uVar1;
  
  uVar1 = 5;
  if (param_1 < 4) {
    uVar1 = (char)(0x2030100 >> (param_1 * '\b' & 0x1f));
  }
  *param_2 = uVar1;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::withOptions(IntelAccelerator*)

IGHardwareGuC * __cdecl IGHardwareGuC::withOptions(long param_1)

{
  IGHardwareGuC *this;
  ulong uVar1;
  
  this = (IGHardwareGuC *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGHardwareGuC *)0x0) {
    uVar1 = initWithOptions(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGHardwareGuC *)0x0;
}



// IGHardwareGuC::initWithOptions(IntelAccelerator*)

ulong __thiscall IGHardwareGuC::initWithOptions(IGHardwareGuC *this,long param_1)

{
  bool bVar1;
  uint uVar2;
  undefined8 uVar3;
  void *pvVar4;
  long lVar5;
  IGHardwareGuCCTBuffer *pIVar6;
  ulong uVar7;
  ulong uVar8;
  int iVar9;
  ulong uVar10;
  
  this[0x960] = (IGHardwareGuC)0x0;
  *(undefined8 *)(this + 0x968) = 0;
  *(undefined8 *)(this + 0x940) = 0;
  *(undefined8 *)(this + 0x938) = 0;
  uVar3 = IOWorkLoop::workLoop();
  *(undefined8 *)(this + 0x948) = uVar3;
  *(long *)(this + 0x38) = param_1;
  iVar9 = 0x40;
  if ((*(uint *)(&DAT_000011c0 + param_1) & 0x18000) == 0x8000) {
    iVar9 = 1;
  }
  *(int *)(this + 0x28) = iVar9;
  pvVar4 = operator_new__((ulong)(uint)(iVar9 << 2));
  *(void **)(this + 0x30) = pvVar4;
  uVar2 = *(uint *)(this + 0x28);
  if ((ulong)uVar2 != 0) {
    uVar8 = 0;
    do {
      *(undefined4 *)((long)pvVar4 + uVar8 * 4) = 0x400;
      uVar8 = uVar8 + 1;
    } while (uVar2 != uVar8);
  }
  bVar1 = initWorkItemHistory(this,0x100);
  if (bVar1) {
    lVar5 = 0x37;
    do {
      *(undefined4 *)(this + lVar5 * 4) = 0xffffffff;
      *(undefined4 *)(this + lVar5 * 4 + 0x20) = 0;
      lVar5 = lVar5 + 1;
    } while (lVar5 != 0x3f);
    *(undefined8 *)(this + 0x124) = 0x300000003;
    *(undefined8 *)(this + 0x11c) = 0x300000003;
    *(undefined4 *)(this + 0xd8) = 0;
    pIVar6 = IGHardwareGuCCTBuffer::withOptions(*(long **)(this + 0x38));
    *(IGHardwareGuCCTBuffer **)(this + 0x958) = pIVar6;
    bVar1 = initInterrupts(this);
    if (bVar1) {
      uVar3 = _IOLockAlloc();
      *(undefined8 *)(this + 0x40) = uVar3;
      uVar3 = _IOLockAlloc();
      *(undefined8 *)(this + 0x950) = uVar3;
    }
    bVar1 = loadGuCBinary(this);
    if (bVar1) {
      if ((*(long *)(this + 0x958) != 0) &&
         (uVar3 = registerCommandTransportBuffers(this), (char)uVar3 == '\0')) {
        if (*(long **)(this + 0x958) != (long *)0x0) {
          (**(code **)(**(long **)(this + 0x958) + 0x28))();
        }
        *(undefined8 *)(this + 0x958) = 0;
      }
      (**(code **)(*(long *)(*(long *)(this + 0x38) + 0xdf8) + 0x58))();
      uVar8 = CONCAT71((int7)((ulong)param_1 >> 8),1);
      if (*(int *)(this + 0x28) != 0) {
        uVar10 = 0;
        do {
          uVar2 = createUkContext(this,uVar10,2);
          if (uVar2 == 0x400) goto LAB_0001de20;
          uVar7 = (ulong)*(uint *)(this + 0x28);
          if (uVar10 < uVar7) {
            *(uint *)(*(long *)(this + 0x30) + uVar10 * 4) = uVar2;
            uVar7 = (ulong)*(uint *)(this + 0x28);
          }
          uVar10 = uVar10 + 1;
        } while (uVar10 < uVar7);
      }
      goto LAB_0001de3d;
    }
  }
LAB_0001de20:
  (**(code **)(*(long *)(*(long *)(this + 0x38) + 0xdf8) + 0x50))();
  (**(code **)(*(long *)this + 0x90))(this);
  uVar8 = 0;
LAB_0001de3d:
  return uVar8 & 0xffffffff;
}



// IGHardwareGuC::initWorkItemHistory(unsigned int)

bool __thiscall IGHardwareGuC::initWorkItemHistory(IGHardwareGuC *this,ulong param_1)

{
  IGSharedMappedBuffer *this_00;
  undefined8 uVar1;
  ulong uVar2;
  
  uVar2 = (param_1 & 0xffffffff) * 0x2c + 0xfff & 0xfffffffffffff000;
  *(undefined8 *)(this + 0x18) = 0;
  *(int *)(this + 0x20) = (int)(uVar2 / 0x2c);
  *(undefined4 *)(this + 0x24) = 0;
  this_00 = IGSharedMappedBuffer::withOptions(*(long *)(*(long *)(this + 0x38) + 0x150),uVar2,0,0);
  *(IGSharedMappedBuffer **)(this + 0x10) = this_00;
  if (this_00 != (IGSharedMappedBuffer *)0x0) {
    uVar1 = IGSharedMappedBuffer::getVirtualAddress(this_00);
    *(undefined8 *)(this + 0x18) = uVar1;
  }
  return this_00 != (IGSharedMappedBuffer *)0x0;
}



// IGHardwareGuC::initDoorbells()

void __thiscall IGHardwareGuC::initDoorbells(IGHardwareGuC *this)

{
  long lVar1;
  
  lVar1 = -8;
  do {
    *(undefined4 *)(this + lVar1 * 4 + 0xfc) = 0xffffffff;
    *(undefined4 *)(this + lVar1 * 4 + 0x11c) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0);
  *(undefined8 *)(this + 0x124) = 0x300000003;
  *(undefined8 *)(this + 0x11c) = 0x300000003;
  *(undefined4 *)(this + 0xd8) = 0;
  return;
}



// IGHardwareGuC::initInterrupts()

bool __thiscall IGHardwareGuC::initInterrupts(IGHardwareGuC *this)

{
  long lVar1;
  
  lVar1 = IOInterruptEventSource::interruptEventSource
                    ((OSObject *)this,handleSoftwareGuCToHostInterrupt,(IOService *)0x0,0);
  *(long *)(this + 0x940) = lVar1;
  if (lVar1 != 0) {
    (**(code **)(**(long **)(this + 0x948) + 0x140))(*(long **)(this + 0x948),lVar1);
    (**(code **)(**(long **)(this + 0x940) + 0x150))();
    IGInterruptBridge::requestEnableCallback
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x38)),(long *)this,
               registerForInterrupts);
  }
  return lVar1 != 0;
}



// IGHardwareGuC::loadGuCBinary()

bool __thiscall IGHardwareGuC::loadGuCBinary(IGHardwareGuC *this)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  ulong uVar4;
  IGSharedMappedBuffer *this_00;
  void *pvVar5;
  undefined8 uVar6;
  uint uVar7;
  long lVar8;
  int iVar9;
  bool bVar10;
  ulong local_48;
  ulong local_40;
  undefined8 local_38;
  
  uVar4 = initSchedControl(this);
  if ((char)uVar4 == '\0') {
    bVar10 = false;
  }
  else {
    this_00 = IGSharedMappedBuffer::withOptions
                        (*(long *)(*(long *)(this + 0x38) + 0x150),0x61000,2,0);
    if (this_00 != (IGSharedMappedBuffer *)0x0) {
      pvVar5 = (void *)IGSharedMappedBuffer::getVirtualAddress(this_00);
      _memcpy(pvVar5,&__KmGen11ICLGuCBinary,0x60400);
      uVar6 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
      local_38 = uVar6;
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x38),1,7);
      lVar2 = *(long *)(this + 0x38);
      lVar3 = *(long *)(&DAT_00001270 + lVar2);
      *(undefined4 *)(lVar3 + 0x1984) = 1;
      *(undefined4 *)(&DAT_0013816c + lVar3) = 1;
      *(undefined4 *)(lVar3 + 0x9424) = 0x10;
      uVar4 = *(ulong *)(lVar2 + 0xfce);
      if ((int)uVar4 < 0) {
        *(undefined4 *)(lVar3 + 0x9024) = 0xcb;
        uVar4 = *(ulong *)(lVar2 + 0xfce);
      }
      if ((uVar4 >> 0x20 & 1) != 0) {
        *(undefined4 *)(lVar3 + 0xa000) = 0x30fff;
        *(undefined4 *)(lVar3 + 0xa178) = 500;
        uVar4 = *(ulong *)(lVar2 + 0xfce);
      }
      *(uint *)(lVar3 + 0xc064) = (uint)(uVar4 >> 0x12) & 0x8000 ^ 0x208617;
      *(undefined4 *)(lVar3 + 0xa178) = 0x1ff;
      lVar8 = 0;
      do {
        *(undefined4 *)(lVar3 + 0xc184 + lVar8) = *(undefined4 *)(this + lVar8 + 0x8c);
        lVar8 = lVar8 + 4;
      } while (lVar8 != 0x18);
      lVar8 = 0;
      do {
        *(undefined4 *)(lVar3 + 0xc200 + lVar8) = *(undefined4 *)((long)&DAT_0010b300 + lVar8);
        lVar8 = lVar8 + 4;
      } while (lVar8 != 0x100);
      *(undefined4 *)(lVar3 + 0xc310) = 0x60400;
      *(int *)(lVar3 + 0xc300) = (int)local_38;
      *(uint *)(lVar3 + 0xc304) = (uint)((ulong)uVar6 >> 0x20) & 0xffff;
      *(undefined4 *)(lVar3 + 0xc308) = 0x2000;
      *(undefined4 *)(lVar3 + 0xc30c) = 0x70000;
      if (((&DAT_000011c0)[lVar2] & 0x20) != 0) {
        *(undefined4 *)(lVar3 + 0xc068) = 3;
      }
      local_40 = 0;
      local_48 = 0;
      checkWOPCMSettings(this,0x100,&local_48);
      lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
      *(uint *)(lVar2 + 0xc340) = (uint)local_48 | 1;
      *(uint *)(lVar2 + 0xc050) = (int)(local_40 / *(ulong *)__got::_page_size) << 0xc | 1;
      lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
      *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar2 + 6) = 1;
      do {
      } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar2 + 6) & 1) != 0);
      *(undefined4 *)(lVar2 + 0xc314) = 0xffff0011;
      iVar9 = -0xf;
      do {
        uVar1 = *(uint *)(*(long *)(*(IntelAccelerator **)(this + 0x38) + 0x1270) + 0xc000);
        uVar7 = uVar1 >> 8 & 0xff;
        if (uVar7 == 0xf0) {
          IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x38),0,7);
          (**(code **)(*(long *)this_00 + 0x28))(this_00);
          goto LAB_0001e238;
        }
        if (((uVar1 & 0xfe) == 0xa0) || (uVar7 == 0x60)) break;
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
        _thread_block(0);
        iVar9 = iVar9 + 1;
      } while (iVar9 != 0);
                    // WARNING: Subroutine does not return
      _panic("\"GUC Binary Load Failure\" @%s:%d","IGHardwareGuC.cpp",0x2b9);
    }
LAB_0001e238:
    bVar10 = this_00 != (IGSharedMappedBuffer *)0x0;
  }
  return bVar10;
}



// IGHardwareGuC::registerCommandTransportBuffers()

undefined8 __thiscall IGHardwareGuC::registerCommandTransportBuffers(IGHardwareGuC *this)

{
  undefined4 uVar1;
  undefined8 uVar2;
  undefined4 local_38;
  int local_34;
  undefined8 local_30;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  local_34 = IGMappedBuffer::getGPUVirtualAddress
                       (*(IGMappedBuffer **)(*(long *)(this + 0x958) + 0x40));
  local_34 = (int)(*(ulong *)__got::_page_size >> 2) + local_34;
  local_38 = 0x4505;
  local_30 = 0x100000040;
  uVar2 = 0;
  uVar1 = mmioHostToGuCAction(this,&local_38,4,0xf,(uint *)0x0);
  if ((char)uVar1 != '\0') {
    local_34 = IGMappedBuffer::getGPUVirtualAddress
                         (*(IGMappedBuffer **)(*(long *)(this + 0x958) + 0x40));
    local_38 = 0x4505;
    local_30 = 0x40;
    uVar1 = mmioHostToGuCAction(this,&local_38,4,0xf,(uint *)0x0);
    uVar2 = 1;
    if ((char)uVar1 == '\0') {
      deregisterCommandTransportBuffers(this);
      uVar2 = 0;
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareGuC::createUkContext(unsigned long long, UK_GEN11_CONTEXT_PRIORITY)

uint __thiscall IGHardwareGuC::createUkContext(IGHardwareGuC *this,undefined8 param_1,int param_2)

{
  undefined4 *puVar1;
  undefined8 *puVar2;
  int iVar3;
  ulong uVar4;
  long lVar5;
  IGSharedMappedBuffer *this_00;
  long *plVar6;
  long lVar7;
  long lVar8;
  IGHardwareGuCWorkQueue *pIVar9;
  undefined4 uVar10;
  uint uVar11;
  undefined8 local_60;
  IGSharedMappedBuffer *local_58;
  undefined8 local_50;
  long local_48;
  long local_40;
  uint local_34;
  ulong uVar12;
  
  uVar11 = 0x400;
  if (param_2 < 4) {
    uVar4 = allocContext(this,param_1,'\x01');
    local_34 = (uint)uVar4;
    if (local_34 != 0x400) {
      lVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
      uVar4 = uVar4 & 0xffffffff;
      local_50 = 0;
      lVar5 = uVar4 * 0x5b00 + lVar5;
      if (*(uint *)(this + 0x80) <= local_34) {
        lVar5 = 0;
      }
      *(int *)(lVar5 + 0x5a70) = param_2;
      *(uint *)(lVar5 + 8) = local_34;
      *(undefined4 *)(lVar5 + 0x24) = 0x100;
      *(uint *)(lVar5 + 0x5a6c) = *(uint *)(lVar5 + 0x5a6c) & 0xffffffe1 | 10;
      local_40 = *(long *)(this + 0x50);
      this_00 = IGSharedMappedBuffer::withOptions
                          (*(long *)(*(long *)(this + 0x38) + 0x150),*(ulonglong *)__got::_page_size
                           ,2,0);
      if (this_00 != (IGSharedMappedBuffer *)0x0) {
        local_48 = uVar4 * 3;
        *(IGSharedMappedBuffer **)(local_40 + 8 + uVar4 * 0x18) = this_00;
        uVar11 = *(int *)(this + 0xd8) * 0x40;
        uVar12 = (ulong)uVar11;
        *(uint *)(this + 0xd8) = *(int *)(this + 0xd8) + 1U & 0x3f;
        local_60 = 0;
        plVar6 = (long *)IGMappedBuffer::getMemory((IGMappedBuffer *)this_00);
        lVar7 = (**(code **)(*plVar6 + 0x158))(plVar6,0,&local_60);
        lVar8 = IGSharedMappedBuffer::getVirtualAddress(this_00);
        *(ulong *)(local_40 + 0x10 + local_48 * 8) = lVar8 + uVar12;
        iVar3 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
        *(uint *)(lVar5 + 0x18) = iVar3 + uVar11;
        *(ulong *)(lVar5 + 0x1c) = lVar7 + uVar12;
        uVar4 = *(ulong *)__got::_page_size >> 1 & 0xffffffff;
        if (*(ulong *)__got::_page_size >> 1 <= uVar12) {
          uVar4 = 0;
        }
        lVar7 = IGSharedMappedBuffer::getVirtualAddress(this_00);
        puVar1 = (undefined4 *)(uVar4 + lVar7);
        local_58 = this_00;
        iVar3 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
        *(int *)(lVar5 + 0x5a7c) = iVar3 + (int)uVar4;
        pIVar9 = IGHardwareGuCWorkQueue::withOptions(*(long **)(this + 0x38),local_34,(long)puVar1);
        if (*(IGMappedBuffer **)(pIVar9 + 0x30) != (IGMappedBuffer *)0x0) {
          local_50 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(pIVar9 + 0x30));
        }
        puVar2 = (undefined8 *)(local_40 + local_48 * 8);
        *(int *)(lVar5 + 0x5a80) = (int)local_50;
        if (*(long *)(pIVar9 + 0x38) == 0) {
          uVar10 = 0;
        }
        else {
          uVar10 = *(undefined4 *)(*(long *)(pIVar9 + 0x38) + 0x20);
        }
        *(undefined4 *)(lVar5 + 0x5a84) = uVar10;
        *puVar2 = pIVar9;
        *(undefined8 *)(puVar1 + 1) = puVar2[2];
        *puVar1 = *(undefined4 *)(lVar5 + 8);
        puVar1[10] = *(undefined4 *)(lVar5 + 0x5a70);
        uVar11 = local_34;
        if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
          IntelAccelerator::transferOwnership(*(long *)(this + 0x38),(IGMappedBuffer *)local_58);
          uVar11 = local_34;
        }
      }
    }
  }
  return uVar11;
}



// IGHardwareGuC::initEngine(unsigned int, IGHwCsType)

void IGHardwareGuC::initEngine(void)

{
  return;
}



// IGHardwareGuC::free()

void __thiscall IGHardwareGuC::free(IGHardwareGuC *this,void *param_1)

{
  if (*(void **)(this + 0x968) != (void *)0x0) {
    this[0x960] = (IGHardwareGuC)0x0;
    operator_delete__(*(void **)(this + 0x968));
    *(undefined8 *)(this + 0x968) = 0;
  }
  if (*(long *)(this + 0x958) != 0) {
    deregisterCommandTransportBuffers(this);
  }
  if (*(void **)(this + 0x30) != (void *)0x0) {
    operator_delete__(*(void **)(this + 0x30));
  }
  if (*(long *)(this + 0x938) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x38)),
               *(long *)(this + 0x938));
    *(undefined8 *)(this + 0x938) = 0;
  }
  if (*(long *)(this + 0x940) != 0) {
    (**(code **)(**(long **)(this + 0x948) + 0x148))();
    (**(code **)(**(long **)(this + 0x940) + 0x28))();
    *(undefined8 *)(this + 0x940) = 0;
  }
  if (*(long **)(this + 0x948) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x948) + 0x28))();
  }
  *(undefined8 *)(this + 0x948) = 0;
  if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
    IntelAccelerator::transferOwnership(*(long *)(this + 0x38),*(IGMappedBuffer **)(this + 0x60));
  }
  if (*(long **)(this + 0x60) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x60) + 0x28))();
  }
  *(undefined8 *)(this + 0x60) = 0;
  if (*(long *)(this + 0x78) != 0) {
    IOAccelSysMemory::unlockForCPUAccess(*(task **)(this + 0x70));
    *(undefined8 *)(this + 0x78) = 0;
  }
  if (*(long *)(this + 0x40) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x40) = 0;
  }
  if (*(long *)(this + 0x950) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x950) = 0;
  }
  if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
    IntelAccelerator::transferOwnership(*(long *)(this + 0x38),*(IGMappedBuffer **)(this + 0x68));
  }
  if (*(long **)(this + 0x958) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x958) + 0x28))();
  }
  *(undefined8 *)(this + 0x958) = 0;
  if (*(long **)(this + 0x70) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x70) + 0x28))();
  }
  *(undefined8 *)(this + 0x70) = 0;
  if (*(long **)(this + 0x68) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x68) + 0x28))();
  }
  *(undefined8 *)(this + 0x68) = 0;
  if (*(long **)(this + 0x930) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x930) + 0x28))();
  }
  *(undefined8 *)(this + 0x930) = 0;
  *(undefined8 *)(this + 0x38) = 0;
                    // WARNING: Could not recover jumptable at 0x0001e731. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGHardwareGuC::deregisterCommandTransportBuffers()

void __thiscall IGHardwareGuC::deregisterCommandTransportBuffers(IGHardwareGuC *this)

{
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  if (*(long *)(this + 0x958) != 0) {
    local_30 = *(undefined4 *)(*(long *)(this + 0x958) + 0x38);
    local_34 = 0x4506;
    local_2c = 0;
    mmioHostToGuCAction(this,&local_34,3,0xf,(uint *)0x0);
    local_30 = *(undefined4 *)(*(long *)(this + 0x958) + 0x38);
    local_34 = 0x4506;
    local_2c = 1;
    mmioHostToGuCAction(this,&local_34,3,0xf,(uint *)0x0);
  }
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareGuC::checkWOPCMSettings(unsigned long, IOVirtualRange&)

void __thiscall
IGHardwareGuC::checkWOPCMSettings(IGHardwareGuC *this,undefined8 param_2_00,ulong *param_2)

{
  uint uVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  uint uVar5;
  ulong uVar6;
  uint uVar7;
  ulong uVar8;
  ulong uVar9;
  
  uVar4 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0x90e0);
  uVar5 = 0x100000 << ((byte)(uVar4 >> 7) & 3);
  uVar4 = uVar4 & 0xfffffffffff00000;
  uVar8 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0xd48);
  uVar9 = uVar8 & 0xfffffffffffff000;
  if ((uVar8 & 1) == 0) {
    _IOLog("[IGPU] RC6 Ctx Base register not locked by BIOS.\n");
    _kprintf("[IGPU] RC6 Ctx Base register not locked by BIOS.\n");
  }
  uVar8 = (ulong)uVar5;
  if ((uVar9 < uVar4 || uVar9 - uVar4 == 0) || (uVar6 = uVar9 - uVar4, uVar4 + uVar8 <= uVar9)) {
    _IOLog("[IGPU] Skipping RC6 Ctx Base, it is not in WOPCM range.\n");
    _kprintf("[IGPU] Skipping RC6 Ctx Base, it is not in WOPCM range.\n");
    uVar6 = uVar8;
  }
  uVar9 = *(ulong *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0xdc8);
  if ((uVar9 & 1) != 0) {
    uVar3 = uVar9 & 0xffffffffffffffc0;
    if ((uVar4 <= uVar3 && uVar3 - uVar4 != 0) && (uVar2 = uVar3 - uVar4, uVar3 < uVar4 + uVar8))
    goto LAB_0001e8e6;
  }
  uVar2 = uVar8;
  if ((uVar9 & 1) != 0) {
    _IOLog("[IGPU] Skipping MDRB Ctx Base, it is not in WOPCM range.\n");
    _kprintf("[IGPU] Skipping MDRB Ctx Base, it is not in WOPCM range.\n");
  }
LAB_0001e8e6:
  uVar7 = uVar5;
  uVar1 = (uint)uVar2;
  if (uVar2 <= uVar6) {
    uVar7 = (uint)uVar6;
    uVar1 = uVar5;
  }
  *param_2 = (ulong)(uVar5 >> 1);
  param_2[1] = (ulong)(((uint)uVar6 - uVar1) + uVar5 + ((uint)uVar2 - uVar7)) - (ulong)(uVar5 >> 1);
  return;
}



// IGHardwareGuC::initSchedControl()

ulong __thiscall IGHardwareGuC::initSchedControl(IGHardwareGuC *this)

{
  bool bVar1;
  undefined7 extraout_var;
  
  *(undefined8 *)(this + 0x9c) = 0;
  *(undefined8 *)(this + 0x94) = 0;
  *(undefined8 *)(this + 0x8c) = 0;
  bVar1 = setupContextPool(this,0x400);
  if (bVar1) {
    if (((&DAT_00001002)[*(long *)(this + 0x38)] & 0x20) != 0) {
      this[0x94] = (IGHardwareGuC)((byte)this[0x94] | 4);
    }
    *(uint *)(this + 0x98) = *(uint *)(this + 0x98) & 0xffffffc8 | 0x10;
    setupLogBuffers(this,0,7,7,0);
    setupAdditionalDataStructs(this);
  }
  return CONCAT71(extraout_var,bVar1) & 0xffffffff;
}



// IGHardwareGuC::invalidateTLB()

void __thiscall IGHardwareGuC::invalidateTLB(IGHardwareGuC *this)

{
  long lVar1;
  
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
  *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar1 + 6) = 1;
  do {
  } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar1 + 6) & 1) != 0);
  return;
}



// IGHardwareGuC::setupContextPool(int)

bool __thiscall IGHardwareGuC::setupContextPool(IGHardwareGuC *this,uint param_1)

{
  undefined1 auVar1 [16];
  IGSharedMappedBuffer *this_00;
  ulong uVar2;
  void *pvVar3;
  uint uVar4;
  ulong uVar5;
  
  uVar4 = param_1 * 0x5b00 + 0xfff & 0xfffff000;
  *(uint *)(this + 0x48) = uVar4;
  this_00 = IGSharedMappedBuffer::withOptions
                      (*(long *)(*(long *)(this + 0x38) + 0x150),(ulong)uVar4,2,0);
  *(IGSharedMappedBuffer **)(this + 0x68) = this_00;
  if (this_00 != (IGSharedMappedBuffer *)0x0) {
    *(uint *)(this + 0x80) = param_1;
    *(undefined4 *)(this + 0x84) = 0;
    *(uint *)(this + 0x8c) = *(uint *)(this + 0x8c) & 0xfffff000 | param_1 >> 4 & 0xfff;
    uVar4 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
    *(uint *)(this + 0x8c) = *(uint *)(this + 0x8c) & 0xfff | uVar4 & 0xfffff000;
    auVar1._8_8_ = 0;
    auVar1._0_8_ = (long)(int)param_1;
    uVar2 = SUB168(auVar1 * ZEXT816(0x18),0);
    uVar5 = 0xffffffffffffffff;
    if (SUB168(auVar1 * ZEXT816(0x18),8) == 0) {
      uVar5 = uVar2;
    }
    pvVar3 = operator_new__(uVar5);
    *(void **)(this + 0x50) = pvVar3;
    ___bzero(pvVar3,uVar2);
    if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
      IntelAccelerator::transferOwnership(*(long *)(this + 0x38),*(IGMappedBuffer **)(this + 0x68));
    }
  }
  return this_00 != (IGSharedMappedBuffer *)0x0;
}



// IGHardwareGuC::setupLogBuffers(unsigned int, int, int, int)

undefined8 __thiscall
IGHardwareGuC::setupLogBuffers
          (IGHardwareGuC *this,uint param_1,uint param_2,uint param_3,uint param_4)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  IGSharedMappedBuffer *pIVar5;
  task *ptVar6;
  undefined8 uVar7;
  void *pvVar8;
  
  *(uint *)(this + 0x90) =
       (param_2 & 7) << 9 | (param_3 & 7) << 6 | (param_4 & 3) << 4 |
       *(uint *)(this + 0x90) & 0xfffff004 | (param_1 & 1) << 3;
  this[0x9c] = (IGHardwareGuC)((byte)this[0x9c] & 0x80);
  iVar2 = (param_4 & 3) + (param_2 & 7) + (param_3 & 7) + 3;
  iVar3 = iVar2 * *(int *)__got::_page_size;
  if ((param_1 & 1) != 0) {
    iVar3 = iVar2 * 0x100000;
  }
  uVar4 = iVar3 + 0x1fffU & 0xfffff000;
  *(uint *)(this + 0x58) = uVar4;
  uVar7 = 0;
  pIVar5 = IGSharedMappedBuffer::withOptions
                     (*(long *)(*(long *)(this + 0x38) + 0x150),(ulong)uVar4,2,0);
  *(IGSharedMappedBuffer **)(this + 0x60) = pIVar5;
  puVar1 = __got::_kernel_task;
  if (pIVar5 != (IGSharedMappedBuffer *)0x0) {
    uVar7 = 0;
    ptVar6 = (task *)IOAccelSysMemory::withOptions
                               (*(IOGraphicsAccelerator2 **)(this + 0x38),
                                *(task **)__got::_kernel_task,(IOAccelShared2 *)0x0,
                                (IOAccelResource2 *)0x0,3,(ulong)*(uint *)(this + 0x58));
    *(task **)(this + 0x70) = ptVar6;
    if (ptVar6 != (task *)0x0) {
      uVar7 = IOAccelSysMemory::lockForCPUAccess(ptVar6,(uint)*(undefined8 *)puVar1);
      *(undefined8 *)(this + 0x78) = uVar7;
      if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
        IntelAccelerator::transferOwnership
                  (*(long *)(this + 0x38),*(IGMappedBuffer **)(this + 0x60));
      }
      uVar4 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x60));
      *(uint *)(this + 0x90) = (uVar4 & 0xfffff000) + (*(uint *)(this + 0x90) & 0xffe) + 1;
      uVar7 = 1;
      if (*(long *)(this + 0x968) == 0) {
        uVar4 = (*(uint *)(this + 0x58) >> 1) + *(uint *)(this + 0x58) * 3;
        *(uint *)(this + 0x964) = uVar4;
        pvVar8 = operator_new__((ulong)uVar4);
        *(void **)(this + 0x968) = pvVar8;
        *(undefined8 *)(this + 0x970) = 0;
      }
    }
  }
  return uVar7;
}



// IGHardwareGuC::setupAdditionalDataStructs()

bool __thiscall IGHardwareGuC::setupAdditionalDataStructs(IGHardwareGuC *this)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  IGSharedMappedBuffer *this_00;
  int *piVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  long lVar8;
  uint *puVar9;
  ulong uVar10;
  byte *pbVar11;
  uint *puVar12;
  
  lVar8 = *(long *)__got::_page_size;
  this_00 = IGSharedMappedBuffer::withOptions
                      (*(long *)(*(long *)(this + 0x38) + 0x150),
                       (ulong)((int)(lVar8 * 10) + 0x1129bU & 0xfffff000),2,0);
  *(IGSharedMappedBuffer **)(this + 0x930) = this_00;
  if (this_00 != (IGSharedMappedBuffer *)0x0) {
    uVar7 = lVar8 * 10 & 0xffffffff;
    piVar4 = (int *)IGSharedMappedBuffer::getVirtualAddress(this_00);
    uVar5 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x930));
    piVar4[0x20] = 1;
    piVar4[0x21] = 1;
    piVar4[0x22] = 1;
    piVar4[0x23] = 1;
    uVar6 = 0;
    piVar4[0x24] = 0;
    piVar4[0x25] = 0;
    piVar4[0x26] = 0;
    piVar4[0x27] = 0;
    iVar3 = (int)uVar5;
    piVar4[3] = iVar3 + 0x80;
    puVar12 = (uint *)(piVar4 + 0x32);
    do {
      if ((uVar6 & 0xfffffffc) == 0) {
        uVar1 = *(uint *)((long)&DAT_0010be10 + ((long)(uVar6 << 0x20) >> 0x1e));
        uVar10 = (ulong)uVar1;
        iVar2 = piVar4[uVar6 * 0xc20 + 0xf1];
        pbVar11 = (byte *)(*(long *)((long)&__const::rcsRegisters + ((long)(uVar6 << 0x20) >> 0x1d))
                          + 8);
        puVar9 = puVar12;
        do {
          *puVar9 = *puVar9 & 0xfffffffe | (uint)*pbVar11;
          puVar9[-2] = *(uint *)(pbVar11 + -8);
          pbVar11 = pbVar11 + 0x24;
          puVar9 = puVar9 + 3;
          uVar10 = uVar10 - 1;
        } while (uVar10 != 0);
        piVar4[uVar6 * 0xc20 + 0xf1] = uVar1 + iVar2;
      }
      uVar6 = uVar6 + 1;
      puVar12 = puVar12 + 0xc20;
    } while (uVar6 != 4);
    *piVar4 = iVar3 + 0xc0;
    piVar4[1] = iVar3 + 0xf4c8;
    *(undefined4 *)((long)piVar4 + uVar7 + 0xf4c8) = 1;
    *(undefined4 *)((long)piVar4 + uVar7 + 0xf504) = 2;
    *(int *)((long)piVar4 + uVar7 + 0xf500) = iVar3 + (int)(uVar7 + 0x101e4);
    piVar4[4] = (int)(uVar7 + 0xf4c8) + iVar3;
    ___bzero((long)piVar4 + uVar7 + 0x101e4,0xb8);
    iVar3 = piVar4[3];
    lVar8 = 0;
    do {
      piVar4[lVar8 + 6] = iVar3;
      lVar8 = lVar8 + 1;
    } while (lVar8 != 5);
    *(uint *)(this + 0xa0) = *(uint *)(this + 0xa0) & 0xffc00001 | (uint)(uVar5 >> 0xb) & 0x3ffffe;
  }
  return this_00 != (IGSharedMappedBuffer *)0x0;
}



// IGHardwareGuC::logRingInit(unsigned long)

void __thiscall IGHardwareGuC::logRingInit(IGHardwareGuC *this,uint param_1)

{
  void *pvVar1;
  
  if (*(long *)(this + 0x968) == 0) {
    *(uint *)(this + 0x964) = param_1;
    pvVar1 = operator_new__((ulong)param_1);
    *(void **)(this + 0x968) = pvVar1;
    *(undefined8 *)(this + 0x970) = 0;
  }
  return;
}



// IGHardwareGuC::getGuCContextInfo(unsigned int)

long __thiscall IGHardwareGuC::getGuCContextInfo(IGHardwareGuC *this,uint param_1)

{
  return (ulong)param_1 * 0x18 + *(long *)(this + 0x50);
}



// IGHardwareGuC::allocContextId(unsigned long long, bool)

ulong __thiscall
IGHardwareGuC::allocContextId(IGHardwareGuC *this,undefined8 param_2_00,char param_2)

{
  byte bVar1;
  uint uVar2;
  long lVar3;
  uint uVar4;
  byte *pbVar5;
  long lVar6;
  ulong uVar7;
  
  uVar7 = 0x400;
  if ((*(int *)(this + 0x84) != *(int *)(this + 0x80)) && (*(int *)(this + 0x88) != 0x400)) {
    lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
    uVar2 = *(uint *)(this + 0x88);
    uVar7 = (ulong)uVar2;
    lVar6 = uVar7 * 0x5b00;
    if (param_2 != '\0') {
      ___bzero(lVar3 + lVar6,0x5b00);
    }
    *(int *)(this + 0x84) = *(int *)(this + 0x84) + 1;
    pbVar5 = (byte *)(lVar3 + 0x5a6c + lVar6);
    *pbVar5 = *pbVar5 | 1;
    if (*(uint *)(this + 0x84) != *(uint *)(this + 0x80)) {
      uVar4 = *(uint *)(this + 0x88);
      pbVar5 = (byte *)(lVar3 + lVar6 + 0xb56c);
      do {
        uVar4 = uVar4 + 1;
        *(uint *)(this + 0x88) = uVar4;
        if (uVar4 == uVar2) goto LAB_0001ef5d;
        if (*(uint *)(this + 0x80) <= uVar4) {
          *(undefined4 *)(this + 0x88) = 0;
          uVar4 = 0;
        }
        bVar1 = *pbVar5;
        pbVar5 = pbVar5 + 0x5b00;
      } while ((bVar1 & 1) != 0);
      if (uVar4 != uVar2) {
        return uVar7;
      }
    }
LAB_0001ef5d:
    *(undefined4 *)(this + 0x88) = 0x400;
  }
  return uVar7;
}



// IGHardwareGuC::allocContext(unsigned long long, bool)

ulong __thiscall IGHardwareGuC::allocContext(IGHardwareGuC *this,undefined8 param_1,char param_2)

{
  ulong uVar1;
  
  _IOLockLock(*(undefined8 *)(this + 0x40));
  uVar1 = allocContextId(this,param_1,param_2);
  _IOLockUnlock(*(undefined8 *)(this + 0x40));
  return uVar1 & 0xffffffff;
}



// IGHardwareGuC::releaseContextId(unsigned int)

void __thiscall IGHardwareGuC::releaseContextId(IGHardwareGuC *this,uint param_1)

{
  byte *pbVar1;
  long lVar2;
  ulong uVar3;
  
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  uVar3 = (ulong)param_1;
  pbVar1 = (byte *)(lVar2 + 0x5a6c + uVar3 * 0x5b00);
  *pbVar1 = *pbVar1 & 0xfe;
  lVar2 = *(long *)(this + 0x50);
  *(undefined8 *)(lVar2 + uVar3 * 0x18) = 0;
  *(undefined8 *)(lVar2 + 8 + uVar3 * 0x18) = 0;
  _OSDecrementAtomic(this + 0x84);
  return;
}



// IGHardwareGuC::releaseContext(unsigned int)

void __thiscall IGHardwareGuC::releaseContext(IGHardwareGuC *this,uint param_1)

{
  _IOLockLock(*(undefined8 *)(this + 0x40));
  releaseContextId(this,param_1);
  _IOLockUnlock(*(undefined8 *)(this + 0x40));
  return;
}



// IGHardwareGuC::getContextCpuAddress(unsigned int)

long __thiscall IGHardwareGuC::getContextCpuAddress(IGHardwareGuC *this,uint param_1)

{
  long lVar1;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  lVar1 = lVar1 + (ulong)param_1 * 0x5b00;
  if (*(uint *)(this + 0x80) <= param_1) {
    lVar1 = 0;
  }
  return lVar1;
}



// IGHardwareGuC::getContextGttAddress(unsigned int)

long __thiscall IGHardwareGuC::getContextGttAddress(IGHardwareGuC *this,uint param_1)

{
  long lVar1;
  
  if (param_1 < *(uint *)(this + 0x80)) {
    lVar1 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x68));
    lVar1 = (ulong)param_1 * 0x5b00 + lVar1;
  }
  else {
    lVar1 = 0;
  }
  return lVar1;
}



// IGHardwareGuC::dumpStatus(char*, int)

undefined8 IGHardwareGuC::dumpStatus(void)

{
  return 0;
}



// IGHardwareGuC::dumpWorkItemHistory()

void IGHardwareGuC::dumpWorkItemHistory(void)

{
  return;
}



// IGHardwareGuC::dumpLogBuffers()

void IGHardwareGuC::dumpLogBuffers(void)

{
  return;
}



// IGHardwareGuC::dumpContextInfo(unsigned int)

void IGHardwareGuC::dumpContextInfo(void)

{
  return;
}



// IGHardwareGuC::acquireDoorbell(UK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC*, bool)

ulong __thiscall IGHardwareGuC::acquireDoorbell(IGHardwareGuC *this,long param_1,char param_2)

{
  int *piVar1;
  char cVar2;
  uint uVar3;
  ulong uVar4;
  ulong uVar5;
  uint uVar6;
  uint uVar7;
  ushort local_42;
  int local_40;
  undefined4 uStack_3c;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  piVar1 = *(int **)(*(long *)(this + 0x50) + 0x10 + (ulong)*(uint *)(param_1 + 8) * 0x18);
  if (*piVar1 == 0) {
    uVar3 = allocDoorbellId(this,*(uint *)(param_1 + 0x5a70));
    uVar7 = uVar3 & 0xffff;
    if (uVar7 == 0x100) {
      local_42 = stealDoorbellId(this,*(uint *)(param_1 + 0x5a70));
      uVar7 = (uint)local_42;
      releaseDoorbell(this,*(long *)(this + (ulong)local_42 * 8 + 0x130));
      uVar6 = 1 << ((byte)local_42 & 0x1f);
      uVar4 = (ulong)(local_42 >> 5);
      *(uint *)(this + uVar4 * 4 + 0xdc) = *(uint *)(this + uVar4 * 4 + 0xdc) | uVar6;
      uVar5 = 0x100;
      if (local_42 == 0x100) goto LAB_0001f1f5;
    }
    else {
      uVar4 = (ulong)(uVar7 >> 5);
      uVar6 = 1 << ((byte)uVar7 & 0x1f);
      local_42 = (ushort)uVar3;
    }
    if (param_2 == '\0') {
      *(uint *)(this + uVar4 * 4 + 0xfc) = *(uint *)(this + uVar4 * 4 + 0xfc) & ~uVar6;
    }
    else {
      *(uint *)(this + uVar4 * 4 + 0xfc) = *(uint *)(this + uVar4 * 4 + 0xfc) | uVar6;
    }
    *(uint *)(param_1 + 0x24) = uVar7;
    piVar1[0] = 1;
    piVar1[1] = 0;
    if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
      *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0x2030) =
           *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0x2030);
    }
    _local_40 = CONCAT44(*(undefined4 *)(param_1 + 8),0x10);
    cVar2 = hostToGuCAction(this,&local_40,2,0xf,(uint *)0x0);
    if (cVar2 == '\0') {
      *piVar1 = 0;
    }
    uVar5 = (ulong)local_42;
    *(long *)(this + uVar5 * 8 + 0x130) = param_1;
  }
  else {
    uVar5 = (ulong)*(ushort *)(param_1 + 0x24);
  }
LAB_0001f1f5:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar5;
}



// IGHardwareGuC::allocDoorbellId(UK_GEN11_CONTEXT_PRIORITY)

uint __thiscall IGHardwareGuC::allocDoorbellId(IGHardwareGuC *this,uint param_1)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  ulong uVar4;
  int iVar5;
  uint uVar6;
  
  uVar3 = 0x100;
  if (param_1 < 4) {
    uVar4 = *(ulong *)(&DAT_0010bdc0 + (long)(int)param_1 * 8);
    iVar5 = (int)uVar4 * -0x20 + 1;
    do {
      uVar1 = *(uint *)(this + uVar4 * 4 + 0xdc);
      iVar2 = 0;
      if (uVar1 != 0) {
        for (; (uVar1 >> iVar2 & 1) == 0; iVar2 = iVar2 + 1) {
        }
      }
      if ((uVar1 != 0) && (uVar6 = iVar2 + 1, uVar6 < 0x20)) {
        uVar3 = uVar6 - iVar5;
        *(uint *)(this + (uVar4 & 0xffffffff) * 4 + 0xdc) =
             uVar1 & ~(1 << ((byte)((char)uVar6 - 1) & 0x1f));
        break;
      }
      uVar4 = uVar4 + 1;
      iVar5 = iVar5 + -0x20;
    } while (*(ulong *)(&DAT_0010bde0 + (long)(int)param_1 * 8) != uVar4);
  }
  return uVar3 & 0xffff;
}



// IGHardwareGuC::stealDoorbellId(UK_GEN11_CONTEXT_PRIORITY)

undefined2 __thiscall IGHardwareGuC::stealDoorbellId(IGHardwareGuC *this,uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  if (param_1 < 4) {
    uVar2 = *(uint *)(this + (ulong)param_1 * 4 + 0x11c);
    do {
      uVar2 = uVar2 + 1;
      if ((*(int *)(&DAT_0010be30 + (long)(int)param_1 * 4) -
          *(int *)(&DAT_0010be20 + (long)(int)param_1 * 4)) * 0x20 + 0x20U <= uVar2) {
        uVar2 = 0;
      }
      uVar1 = uVar2 + *(int *)(&DAT_0010be20 + (long)(int)param_1 * 4);
      if ((*(uint *)(this + (ulong)(uVar1 >> 5 & 0x7ff) * 4 + 0xfc) >> (uVar1 & 0x1f) & 1) == 0) {
        *(uint *)(this + (ulong)param_1 * 4 + 0x11c) = uVar2;
        return (short)uVar1;
      }
    } while (uVar2 != *(uint *)(this + (ulong)param_1 * 4 + 0x11c));
  }
  return 0x100;
}



// IGHardwareGuC::releaseDoorbell(UK_GEN11_GUC_CONTEXT_DESCRIPTOR_REC*)

void __thiscall IGHardwareGuC::releaseDoorbell(IGHardwareGuC *this,long param_1)

{
  uint *puVar1;
  uint uVar2;
  long lVar3;
  byte bVar4;
  ulong uVar5;
  int local_38;
  undefined4 uStack_34;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  uVar2 = *(uint *)(param_1 + 0x24);
  uVar5 = (ulong)uVar2 & 0xffff;
  **(undefined4 **)(*(long *)(this + 0x50) + 0x10 + (ulong)*(uint *)(param_1 + 8) * 0x18) = 0;
  lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
  puVar1 = (uint *)(lVar3 + 0x1000 + uVar5 * 8);
  *puVar1 = *puVar1 & 0xfffffffe;
  *(undefined4 *)(&DAT_00001004 + uVar5 * 8 + lVar3) = 0;
  *(undefined4 *)(lVar3 + 0x1000 + uVar5 * 8) = 0;
  _local_38 = CONCAT44(*(undefined4 *)(param_1 + 8),0x20);
  hostToGuCAction(this,&local_38,2,0xf,(uint *)0x0);
  if ((uVar2 & 0xff00) == 0) {
    uVar5 = (ulong)(uVar2 >> 3 & 0x1ffc);
    *(uint *)(this + uVar5 + 0xdc) = *(uint *)(this + uVar5 + 0xdc) | 1 << ((byte)uVar2 & 0x1f);
    bVar4 = (byte)uVar2 & 0x1f;
    *(uint *)(this + uVar5 + 0xfc) =
         *(uint *)(this + uVar5 + 0xfc) & (-2 << bVar4 | 0xfffffffeU >> 0x20 - bVar4);
  }
  *(undefined8 *)(this + (ulong)(uVar2 & 0xffff) * 8 + 0x130) = 0;
  *(undefined4 *)(param_1 + 0x24) = 0x100;
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareGuC::setDoorbellUsage(unsigned short, bool)

void __thiscall IGHardwareGuC::setDoorbellUsage(IGHardwareGuC *this,uint param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = 1 << ((byte)param_1 & 0x1f);
  if (param_2 == 0) {
    *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xdc) =
         *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xdc) & ~uVar1;
  }
  else {
    *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xdc) =
         *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xdc) | uVar1;
  }
  return;
}



// IGHardwareGuC::setDoorbellPinning(unsigned short, bool)

void __thiscall IGHardwareGuC::setDoorbellPinning(IGHardwareGuC *this,uint param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = 1 << ((byte)param_1 & 0x1f);
  if (param_2 == 0) {
    *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xfc) =
         *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xfc) & ~uVar1;
  }
  else {
    *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xfc) =
         *(uint *)(this + (ulong)(param_1 >> 5) * 4 + 0xfc) | uVar1;
  }
  return;
}



// IGHardwareGuC::hostToGuCAction(unsigned int const*, unsigned int, int, unsigned int*)

void __thiscall
IGHardwareGuC::hostToGuCAction
          (IGHardwareGuC *this,int *param_1,uint param_2,int param_3,uint *param_4)

{
  if (*(IGHardwareGuCCTBuffer **)(this + 0x958) != (IGHardwareGuCCTBuffer *)0x0) {
    IGHardwareGuCCTBuffer::hostToGuCAction
              (*(IGHardwareGuCCTBuffer **)(this + 0x958),param_1,param_2,param_3,param_4,0);
    return;
  }
  mmioHostToGuCAction(this,param_1,param_2,param_3,param_4);
  return;
}



// IGHardwareGuC::releaseDoorbellId(unsigned short)

void __thiscall IGHardwareGuC::releaseDoorbellId(IGHardwareGuC *this,uint param_1)

{
  byte bVar1;
  ulong uVar2;
  
  if (param_1 < 0x100) {
    uVar2 = (ulong)(param_1 >> 3 & 0x1ffc);
    *(uint *)(this + uVar2 + 0xdc) = *(uint *)(this + uVar2 + 0xdc) | 1 << ((byte)param_1 & 0x1f);
    bVar1 = (byte)param_1 & 0x1f;
    *(uint *)(this + uVar2 + 0xfc) =
         *(uint *)(this + uVar2 + 0xfc) & (-2 << bVar1 | 0xfffffffeU >> 0x20 - bVar1);
  }
  return;
}



// IGHardwareGuC::reacquireDoorbell(unsigned int)

ulong __thiscall IGHardwareGuC::reacquireDoorbell(IGHardwareGuC *this,uint param_1)

{
  long lVar1;
  ulong uVar2;
  int iVar3;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  lVar1 = (ulong)param_1 * 0x5b00 + lVar1;
  if (*(uint *)(this + 0x80) <= param_1) {
    lVar1 = 0;
  }
  iVar3 = -0xf;
  do {
    uVar2 = acquireDoorbell(this,lVar1,'\0');
    uVar2 = uVar2 & 0xffff;
    if ((int)uVar2 != 0x100) {
      return uVar2;
    }
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
    _thread_block(0);
    iVar3 = iVar3 + 1;
  } while (iVar3 != 0);
  return uVar2;
}



// IGHardwareGuC::getDoorbellRangeForPriority(UK_GEN11_CONTEXT_PRIORITY, int&, int&)

bool __thiscall
IGHardwareGuC::getDoorbellRangeForPriority
          (undefined8 param_1_00,uint param_2,undefined4 *param_3,undefined4 *param_4)

{
  undefined4 uVar1;
  
  if (param_2 < 4) {
    uVar1 = *(undefined4 *)(&DAT_0010be30 + (long)(int)param_2 * 4);
    *param_3 = *(undefined4 *)(&DAT_0010be20 + (long)(int)param_2 * 4);
    *param_4 = uVar1;
  }
  return param_2 < 4;
}



// IGHardwareGuC::allocUkDoorbell(unsigned int, bool)

undefined8 __thiscall IGHardwareGuC::allocUkDoorbell(IGHardwareGuC *this,uint param_1,char param_2)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  long lVar4;
  
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  uVar1 = *(uint *)(this + 0x80);
  lVar4 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
  *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar4 + 6) = 1;
  do {
  } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar4 + 6) & 1) != 0);
  lVar4 = 0;
  if (param_1 < uVar1) {
    lVar4 = lVar2 + (ulong)param_1 * 0x5b00;
  }
  uVar3 = acquireDoorbell(this,lVar4,param_2);
  return CONCAT71((int7)((uVar3 & 0xffff) >> 8),(int)(uVar3 & 0xffff) != 0x100);
}



// IGHardwareGuC::releaseUkContext(unsigned int)

void __thiscall IGHardwareGuC::releaseUkContext(IGHardwareGuC *this,uint param_1)

{
  long *plVar1;
  ulong uVar2;
  char cVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  
  uVar2 = (ulong)param_1;
  uVar4 = isContextIdle(this,param_1);
  cVar3 = (char)uVar4;
  while (cVar3 == '\0') {
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
    _thread_block(0);
    uVar4 = isContextIdle(this,param_1);
    cVar3 = (char)uVar4;
  }
  lVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  lVar6 = 0;
  if (param_1 < *(uint *)(this + 0x80)) {
    lVar6 = uVar2 * 0x5b00 + lVar5;
  }
  if (*(int *)(lVar6 + 0x24) != 0x100) {
    releaseDoorbell(this,lVar6);
  }
  lVar6 = *(long *)(this + 0x50);
  plVar1 = (long *)(lVar6 + uVar2 * 0x18);
  plVar7 = (long *)*plVar1;
  if (plVar7 != (long *)0x0) {
    (**(code **)(*plVar7 + 0x28))();
  }
  *plVar1 = 0;
  if (((&DAT_000011c0)[*(long *)(this + 0x38)] & 0x20) != 0) {
    IntelAccelerator::transferOwnership
              (*(long *)(this + 0x38),*(IGMappedBuffer **)(lVar6 + 8 + uVar2 * 0x18));
  }
  plVar7 = (long *)(lVar6 + uVar2 * 0x18 + 8);
  plVar1 = (long *)*plVar7;
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x28))();
  }
  *plVar7 = 0;
  *(undefined8 *)(lVar6 + 0x10 + uVar2 * 0x18) = 0;
  lVar6 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
  *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar6 + 6) = 1;
  do {
  } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar6 + 6) & 1) != 0);
  releaseContext(this,param_1);
  return;
}



// IGHardwareGuC::isContextIdle(unsigned int)

undefined8 __thiscall IGHardwareGuC::isContextIdle(IGHardwareGuC *this,uint param_1)

{
  uint uVar1;
  IGHardwareGuCWorkQueue *this_00;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  
  this_00 = *(IGHardwareGuCWorkQueue **)(*(long *)(this + 0x50) + (ulong)param_1 * 0x18);
  if (this_00 == (IGHardwareGuCWorkQueue *)0x0) {
    uVar3 = CONCAT71((int7)((ulong)*(long *)(this + 0x50) >> 8),1);
  }
  else {
    lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
    uVar1 = *(uint *)(this + 0x80);
    uVar3 = IGHardwareGuCWorkQueue::isEmpty(this_00);
    if ((char)uVar3 == '\0') {
      uVar3 = 0;
    }
    else {
      lVar4 = 0;
      if (param_1 < uVar1) {
        lVar4 = lVar2 + (ulong)param_1 * 0x5b00;
      }
      uVar3 = CONCAT71((int7)((ulong)lVar4 >> 8),*(int *)(lVar4 + 0x5a78) == 0);
    }
  }
  return uVar3;
}



// IGHardwareGuC::submitWorkItem(unsigned int, SGfxContextDescriptor const&, IGHwCsType, unsigned
// int, unsigned int, unsigned int)

undefined8 __thiscall
IGHardwareGuC::submitWorkItem
          (IGHardwareGuC *this,uint param_1,uint *param_2,uint param_3,undefined4 param_4,
          undefined4 param_5,uint param_6)

{
  IGHardwareGuCWorkQueue *this_00;
  uint uVar1;
  undefined8 uVar2;
  undefined4 *puVar3;
  ulong uVar4;
  int iVar5;
  uint uVar6;
  uint local_58 [5];
  uint local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined8 local_38;
  
  this_00 = *(IGHardwareGuCWorkQueue **)(*(long *)(this + 0x50) + (ulong)param_1 * 0x18);
  local_58[2] = 0;
  local_58[3] = 0;
  local_58[0] = 0;
  local_58[1] = 0;
  local_38 = (ulong)*param_2;
  local_58[4] = *param_2 >> 0xc;
  local_44 = param_3;
  local_40 = param_5;
  local_3c = param_4;
  uVar2 = IGHashTable<>::contains((IGHashTable<> *)(this + 0x978),local_58 + 4);
  if ((char)uVar2 != '\0') {
    local_58[4] = *param_2 >> 0xc;
    puVar3 = (undefined4 *)IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x978),local_58 + 4);
    local_38 = CONCAT44(*puVar3,(uint)local_38);
  }
  uVar6 = local_44 & 0xff;
  uVar1 = IGHardwareGuCWorkQueue::addItem(this_00,(uint *)&local_38,(byte)local_44,param_6,local_58)
  ;
  if (uVar1 != 0x2000) {
    recordWorkItem(this,param_1,uVar6,local_3c,local_40,param_6,uVar1,(undefined8 *)local_58);
    iVar5 = -1000000;
    do {
      uVar2 = IGHardwareGuCWorkQueue::flush(this_00);
      if ((int)uVar2 != 1) {
        if ((int)uVar2 != 0) {
          return 0;
        }
        return 1;
      }
      uVar4 = reacquireDoorbell(this,param_1);
      if (((uint)uVar4 & 0xffff) == 0x100) {
        return 0;
      }
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      iVar5 = iVar5 + 1;
    } while (iVar5 != 0);
  }
  return 0;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::contains(unsigned int const&) const

undefined8 __thiscall IGHashTable<>::contains(IGHashTable<> *this,void *param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  undefined8 uVar4;
  void *pvVar5;
  
  lVar1 = *(long *)(this + 8);
  if (lVar1 != 0) {
    uVar2 = slotIndex(this,(long)param_1);
    pvVar5 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
    if (pvVar5 != (void *)0x0) {
      do {
        iVar3 = _memcmp(pvVar5,param_1,4);
        uVar4 = CONCAT71((int7)(CONCAT44(extraout_var_00,iVar3) >> 8),iVar3 == 0);
        if (iVar3 == 0) {
          return uVar4;
        }
        pvVar5 = *(void **)((long)pvVar5 + 8);
      } while (pvVar5 != (void *)0x0);
      return uVar4;
    }
  }
  return 0;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::operator[](unsigned int const&)

long __thiscall IGHashTable<>::operator[](IGHashTable<> *this,void *param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  void *pvVar4;
  
  lVar1 = *(long *)(this + 8);
  uVar2 = slotIndex(this,(long)param_1);
  for (pvVar4 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
      pvVar4 != (void *)0x0; pvVar4 = *(void **)((long)pvVar4 + 8)) {
    iVar3 = _memcmp(pvVar4,param_1,4);
    if (iVar3 == 0) goto LAB_0001f97a;
  }
  pvVar4 = (void *)0x0;
LAB_0001f97a:
  return (long)pvVar4 + 4;
}



// IGHardwareGuC::recordWorkItem(unsigned int, IGHwCsType, unsigned int, unsigned int, unsigned int,
// unsigned int, UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC*)

void __thiscall
IGHardwareGuC::recordWorkItem
          (IGHardwareGuC *this,undefined4 param_1,undefined4 param_2,undefined4 param_3,
          undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined8 *param_7)

{
  uint uVar1;
  ulong uVar2;
  undefined4 *puVar3;
  undefined8 uVar4;
  undefined8 local_48;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  
  local_3c = param_3;
  local_38 = param_4;
  local_34 = param_5;
  uVar2 = _OSIncrementAtomic(this + 0x24);
  uVar1 = *(uint *)(this + 0x20);
  local_48 = 0;
  local_40 = 0;
  _clock_get_system_microtime(&local_48,&local_40);
  puVar3 = (undefined4 *)(*(long *)(this + 0x18) + ((uVar2 & 0xffffffff) % (ulong)uVar1) * 0x2c);
  *puVar3 = local_40;
  puVar3[1] = param_1;
  puVar3[2] = param_2;
  puVar3[5] = local_34;
  puVar3[4] = local_38;
  puVar3[3] = local_3c;
  puVar3[6] = param_6;
  if (param_7 == (undefined8 *)0x0) {
    uVar4 = 0;
    *(undefined8 *)(puVar3 + 9) = 0;
  }
  else {
    uVar4 = *param_7;
    *(undefined8 *)(puVar3 + 9) = param_7[1];
  }
  *(undefined8 *)(puVar3 + 7) = uVar4;
  return;
}



// IGHardwareGuC::AttachContextDescToGucContext(SGfxContextDescriptor const&)

undefined8 __thiscall
IGHardwareGuC::AttachContextDescToGucContext(IGHardwareGuC *this,uint *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined8 in_RAX;
  long lVar4;
  undefined8 uVar5;
  uint uVar6;
  long lVar7;
  ulong uVar8;
  ulong *puVar9;
  ulong uVar10;
  uint *puVar11;
  uint local_38;
  uint local_34;
  
  local_34 = (uint)((ulong)in_RAX >> 0x20);
  uVar1 = param_1[1];
  uVar10 = (ulong)(uVar1 >> 0x1d);
  puVar11 = param_1;
  _IOLockLock(*(undefined8 *)(this + 0x40));
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  uVar6 = *(uint *)(this + 0x80);
  if ((ulong)uVar6 == 0) {
    uVar8 = 0;
LAB_0001faaf:
    if ((uint)uVar8 == uVar6) goto LAB_0001fab3;
    lVar4 = lVar4 + (uVar8 & 0xffffffff) * 0x5b00;
  }
  else {
    puVar11 = (uint *)(lVar4 + 0x5a6c);
    uVar8 = 0;
    do {
      if (((*puVar11 & 1) != 0) && (*(long *)(puVar11 + uVar10 * 3 + -0x11) != -1))
      goto LAB_0001faaf;
      uVar8 = uVar8 + 1;
      puVar11 = puVar11 + 0x16c0;
    } while (uVar6 != uVar8);
LAB_0001fab3:
    uVar8 = allocContextId(this,puVar11,'\x01');
    uVar6 = (uint)uVar8;
    if (uVar6 == 0x400) goto LAB_0001fb76;
    lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
    lVar4 = (uVar8 & 0xffffffff) * 0x5b00 + lVar4;
    lVar7 = 0;
    if (uVar6 < *(uint *)(this + 0x80)) {
      lVar7 = lVar4;
    }
    *(undefined4 *)(lVar7 + 0x5a70) = 2;
    *(uint *)(lVar7 + 8) = uVar6;
    *(undefined4 *)(lVar7 + 0x24) = 0x100;
    *(uint *)(lVar7 + 0x5a6c) = *(uint *)(lVar7 + 0x5a6c) & 0xffffffe1 | 8;
  }
  puVar9 = (ulong *)(lVar4 + uVar10 * 0xc + 0x5a28);
  uVar8 = *puVar9;
  puVar11 = (uint *)(uVar10 * 0x1200 + lVar4 + 0x2c);
  uVar6 = 0;
  uVar10 = 0;
  do {
    if ((uVar8 >> (uVar10 & 0x3f) & 1) == 0) {
      *puVar9 = uVar8 | 1L << (uVar10 & 0x3f);
      *(int *)(lVar4 + 0x5a64) = *(int *)(lVar4 + 0x5a64) + 1;
      uVar2 = param_1[1];
      uVar3 = *(uint *)(lVar4 + 8);
      puVar11[-1] = *param_1 & 0xfffff000 | 1;
      *puVar11 = uVar6 | uVar1 & 0xe0000000 | uVar2 & 0x3f001f | (uVar3 & 0x7ff) << 5;
      lVar4 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
      *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar4 + 6) = 1;
      do {
      } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar4 + 6) & 1) != 0);
      _IOLockUnlock(*(undefined8 *)(this + 0x40));
      _local_38 = CONCAT44(local_34,*param_1 >> 0xc);
      IGHashTable<>::contains((IGHashTable<> *)(this + 0x978),&local_38);
      _local_38 = CONCAT44(*param_1 >> 0xc,local_38);
      uVar5 = IGHashTable<>::add((IGHashTable<> *)(this + 0x978),&local_34,puVar11);
      return CONCAT71((int7)((ulong)uVar5 >> 8),1);
    }
    uVar10 = uVar10 + 1;
    puVar11 = puVar11 + 0x12;
    uVar6 = uVar6 + 0x800000;
  } while (uVar10 != 0x40);
LAB_0001fb76:
  _IOLockUnlock(*(undefined8 *)(this + 0x40));
  return 0;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::add(unsigned int const&, unsigned int const&)

void __thiscall IGHashTable<>::add(IGHashTable<> *this,undefined4 *param_1,undefined4 *param_2)

{
  ulong uVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  undefined4 extraout_var;
  undefined4 *puVar8;
  
  if (*(long *)(this + 8) != 0) {
    uVar1 = *(ulong *)(*(long *)(this + 8) + 8);
    if ((((uVar1 < 0x4000) && (this[0x20] != (IGHashTable<>)0x0)) &&
        (uVar2 = *(ulong *)(this + 0x10), uVar2 != 0)) &&
       ((0x32 < ((uVar2 - *(long *)(this + 0x18)) * 100) / uVar2 &&
        (0x19 < (ulong)(*(long *)(this + 0x18) * 100) / uVar1)))) {
      resizeAndRehash(this,uVar1 * 2);
    }
    uVar7 = slotIndex(this,(long)param_1);
    puVar8 = (undefined4 *)
             _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
    if (puVar8 != (undefined4 *)0x0) {
      *puVar8 = *param_1;
      puVar8[1] = *param_2;
      *(undefined8 *)(puVar8 + 2) = 0;
      lVar6 = CONCAT44(extraout_var,uVar7) * 0x18;
      puVar3 = *(undefined8 **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + lVar6);
      *(undefined8 **)(puVar8 + 4) = puVar3;
      *puVar3 = puVar8;
      lVar4 = *(long *)(*(long *)(this + 8) + 0x10);
      *(undefined4 **)(lVar4 + 8 + lVar6) = puVar8 + 2;
      lVar5 = *(long *)(lVar4 + 0x10 + lVar6);
      *(long *)(lVar4 + 0x10 + lVar6) = lVar5 + 1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) + (ulong)(lVar5 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
    }
  }
  return;
}



// IGHardwareGuC::DetachContextDescFromGucContext(SGfxContextDescriptor const&)

void __thiscall IGHardwareGuC::DetachContextDescFromGucContext(IGHardwareGuC *this,uint *param_1)

{
  IGHashTable<> *pIVar1;
  int *piVar2;
  void *pvVar3;
  IGHardwareGuC *pIVar4;
  uint uVar5;
  int iVar6;
  undefined8 uVar7;
  uint *puVar8;
  long lVar9;
  undefined4 extraout_var;
  ulong *puVar10;
  long *plVar11;
  long lVar12;
  void *pvVar13;
  char *pcVar14;
  ulong uVar15;
  uint uVar16;
  uint uVar18;
  uint local_58;
  uint local_54;
  IGHashTable<> *local_50;
  uint *local_48;
  uint local_3c;
  IGHardwareGuC *local_38;
  ulong uVar17;
  
  pIVar1 = (IGHashTable<> *)(this + 0x978);
  local_58 = *param_1 >> 0xc;
  uVar7 = IGHashTable<>::contains(pIVar1,&local_58);
  if ((char)uVar7 == '\0') {
    return;
  }
  local_54 = *param_1 >> 0xc;
  local_50 = pIVar1;
  local_48 = param_1;
  puVar8 = (uint *)IGHashTable<>::operator[](pIVar1,&local_54);
  uVar5 = *puVar8;
  uVar18 = uVar5 >> 5 & 0x7ff;
  uVar16 = uVar5 >> 0x17 & 0x3f;
  uVar17 = (ulong)uVar16;
  uVar15 = (ulong)(uVar5 >> 0x1d);
  local_38 = this;
  lVar9 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  lVar12 = 0;
  if (uVar18 < *(uint *)(local_38 + 0x80)) {
    lVar12 = (ulong)uVar18 * 0x5b00 + lVar9;
  }
  _IOLockLock();
  pIVar4 = local_38;
  if ((*(ulong *)(lVar12 + 0x5a28 + uVar15 * 0xc) >> ((ulong)(uVar5 >> 0x17) & 0x3f) & 1) != 0) {
    puVar10 = (ulong *)(lVar12 + uVar15 * 0xc + 0x5a28);
    lVar9 = uVar15 * 0x1200 + lVar12;
    *(undefined8 *)(lVar9 + 0x68 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x60 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x58 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x50 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x48 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x40 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x38 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x30 + uVar17 * 0x48) = 0;
    *(undefined8 *)(lVar9 + 0x28 + uVar17 * 0x48) = 0;
    *puVar10 = *puVar10 & ~(1L << (sbyte)uVar16);
    piVar2 = (int *)(lVar12 + 0x5a64);
    *piVar2 = *piVar2 + -1;
    if ((*piVar2 == 0) && ((*(byte *)(lVar12 + 0x5a6c) & 6) == 0)) {
      releaseContextId(local_38,uVar18);
    }
    lVar12 = *(long *)(&DAT_00001270 + *(long *)(pIVar4 + 0x38));
    *(undefined4 *)(IGHashTable<>::~IGHashTable + lVar12 + 6) = 1;
    do {
    } while ((*(uint *)(IGHashTable<>::~IGHashTable + lVar12 + 6) & 1) != 0);
  }
  _IOLockUnlock(*(undefined8 *)(pIVar4 + 0x40));
  pIVar1 = local_50;
  local_3c = *local_48 >> 0xc;
  lVar12 = *(long *)(pIVar4 + 0x980);
  if (lVar12 == 0) {
    return;
  }
  uVar5 = IGHashTable<>::slotIndex(local_50,(long)&local_3c);
  lVar9 = CONCAT44(extraout_var,uVar5);
  pvVar3 = *(void **)(*(long *)(lVar12 + 0x10) + lVar9 * 0x18);
  do {
    pvVar13 = pvVar3;
    if (pvVar13 == (void *)0x0) {
      return;
    }
    pvVar3 = *(void **)((long)pvVar13 + 8);
    iVar6 = _memcmp(pvVar13,&local_3c,4);
    pIVar4 = local_38;
  } while (iVar6 != 0);
  lVar12 = *(long *)((long)pvVar13 + 8);
  if (lVar12 == 0) {
    plVar11 = *(long **)((long)pvVar13 + 0x10);
    if ((void *)*plVar11 == pvVar13) {
      *(long **)(*(long *)(*(long *)(local_38 + 0x980) + 0x10) + 8 + lVar9 * 0x18) = plVar11;
LAB_0001ff45:
      *plVar11 = lVar12;
      _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                       kalloc_type_view_19,pvVar13);
      plVar11 = (long *)(*(long *)(*(long *)(pIVar4 + 0x980) + 0x10) + 0x10 + lVar9 * 0x18);
      *plVar11 = *plVar11 + -1;
      *(ulong *)(pIVar4 + 0x990) = *(long *)(pIVar4 + 0x990) - (ulong)(*plVar11 == 0);
      *(long *)(pIVar4 + 0x988) = *(long *)(pIVar4 + 0x988) + -1;
      IGHashTable<>::shrinkIfNeeded(pIVar1);
      return;
    }
  }
  else {
    if (*(long *)(lVar12 + 0x10) != (long)pvVar13 + 8) {
      pcVar14 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
      goto LAB_0001ffa1;
    }
    if ((void *)**(long **)((long)pvVar13 + 0x10) == pvVar13) {
      *(long **)(lVar12 + 0x10) = *(long **)((long)pvVar13 + 0x10);
      plVar11 = *(long **)((long)pvVar13 + 0x10);
      goto LAB_0001ff45;
    }
  }
  pcVar14 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0001ffa1:
                    // WARNING: Subroutine does not return
  _panic(pcVar14,pvVar13,0x312,"IGHash.h",0x312);
}



// IGHardwareGuC::inSubmitQueue(IGHwCsType, SCHED_CONTEXT_ENGINE_PRESENCE_STRUCT volatile*)

undefined8 __thiscall IGHardwareGuC::inSubmitQueue(undefined8 param_1_00,byte param_2,uint *param_3)

{
  if (param_2 < 4) {
    return CONCAT71((char)param_2 >> 7,
                    (*(uint *)(&DAT_0010be40 + (long)(char)param_2 * 4) & *param_3) != 0);
  }
  return 0;
}



// IGHardwareGuC::isGuCIdle()

undefined8 __thiscall IGHardwareGuC::isGuCIdle(IGHardwareGuC *this)

{
  undefined8 in_RAX;
  undefined8 uVar1;
  ulong uVar2;
  
  if (*(int *)(this + 0x28) == 0) {
    uVar1 = CONCAT71((int7)((ulong)in_RAX >> 8),1);
  }
  else {
    uVar2 = 0;
    do {
      uVar1 = isContextIdle(this,*(uint *)(*(long *)(this + 0x30) + uVar2 * 4));
      if ((char)uVar1 == '\0') {
        return uVar1;
      }
      uVar2 = uVar2 + 1;
    } while (uVar2 < *(uint *)(this + 0x28));
  }
  return uVar1;
}



// IGHardwareGuC::isKmdContextIdle(SGfxContextDescriptor const&)

undefined8 __thiscall IGHardwareGuC::isKmdContextIdle(IGHardwareGuC *this,uint *param_1)

{
  uint uVar1;
  undefined8 in_RAX;
  long lVar2;
  undefined8 uVar3;
  uint *puVar4;
  uint local_28;
  uint local_24;
  
  local_24 = (uint)((ulong)in_RAX >> 0x20);
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x68));
  _local_28 = CONCAT44(local_24,*param_1 >> 0xc);
  uVar3 = IGHashTable<>::contains((IGHashTable<> *)(this + 0x978),&local_28);
  if ((char)uVar3 == '\0') {
    uVar3 = 0;
  }
  else {
    _local_28 = CONCAT44(*param_1 >> 0xc,local_28);
    puVar4 = (uint *)IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x978),&local_24);
    uVar1 = *puVar4;
    lVar2 = (ulong)(uVar1 >> 0x1d) * 0x1200 + lVar2 + (ulong)(uVar1 >> 5 & 0x7ff) * 0x5b00;
    uVar3 = CONCAT71((int7)((ulong)lVar2 >> 8),
                     *(int *)(lVar2 + 0x50 + (ulong)(uVar1 >> 0x17 & 0x3f) * 0x48) == 0);
  }
  return uVar3;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::handleSoftwareGuCToHostInterrupt(IOInterruptEventSource*, int)

void __cdecl IGHardwareGuC::handleSoftwareGuCToHostInterrupt(IGHardwareGuC *param_1)

{
  uint uVar1;
  long lVar2;
  void *pvVar3;
  uint local_30 [3];
  undefined4 uStack_24;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  if (*(IGHardwareGuCCTBuffer **)(param_1 + 0x958) == (IGHardwareGuCCTBuffer *)0x0) {
    uVar1 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 0x38)) + 0xc1bc);
  }
  else {
    uVar1 = IGHardwareGuCCTBuffer::handleSoftwareGuCToHostInterrupt
                      (*(IGHardwareGuCCTBuffer **)(param_1 + 0x958));
  }
  if ((uVar1 & 8) != 0) {
    lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_1 + 0x60));
    stack0xffffffffffffffd8 = CONCAT44(*(undefined4 *)(lVar2 + 0x2c),*(undefined4 *)(lVar2 + 0xc));
    pvVar3 = (void *)IGSharedMappedBuffer::getVirtualAddress
                               (*(IGSharedMappedBuffer **)(param_1 + 0x60));
    logRingWrite(param_1,pvVar3,*(uint *)(param_1 + 0x58));
    *(uint *)(lVar2 + 8) = local_30[2];
    *(byte *)(lVar2 + 0x18) = *(byte *)(lVar2 + 0x18) & 0xfe;
    *(undefined4 *)(lVar2 + 0x28) = uStack_24;
    *(byte *)(lVar2 + 0x38) = *(byte *)(lVar2 + 0x38) & 0xfe;
    local_30[0] = 0;
    local_30[1] = 0x30;
    hostToGuCAction(param_1,(int *)(local_30 + 1),1,0xf,local_30);
  }
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareGuC::registerForInterrupts()

void __thiscall IGHardwareGuC::registerForInterrupts(IGHardwareGuC *this)

{
  IGInterruptBridge::registerForInterruptType
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x38)),0x69676968,
             handleHardwareGuCToHostInterrupt,this,0,(undefined8 *)(this + 0x938));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareGuC::handleHardwareGuCToHostInterrupt(OSObject*, void*)

void __cdecl IGHardwareGuC::handleHardwareGuCToHostInterrupt(OSMetaClassBase *param_1)

{
  long lVar1;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
                    // WARNING: Could not recover jumptable at 0x000201e4. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(lVar1 + 0x940) + 0x1d8))(*(long **)(lVar1 + 0x940),0,0,0);
  return;
}



// IGHardwareGuC::handleTimerInterrupt(IOTimerEventSource*)

void IGHardwareGuC::handleTimerInterrupt(void)

{
  return;
}



// IGHardwareGuC::logRingWrite(void const*, unsigned int)

bool __thiscall IGHardwareGuC::logRingWrite(IGHardwareGuC *this,void *param_1,uint param_2)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  
  lVar2 = *(long *)(this + 0x968);
  if ((lVar2 == 0) || (this[0x960] == (IGHardwareGuC)0x0)) {
    bVar6 = false;
  }
  else {
    uVar1 = *(uint *)(this + 0x974);
    uVar5 = ~uVar1 + *(int *)(this + 0x970);
    if ((int)uVar5 < 0) {
      uVar5 = uVar5 + *(int *)(this + 0x964);
    }
    if (param_2 <= uVar5) {
      if (uVar1 + param_2 < *(uint *)(this + 0x964)) {
        _memmove((void *)(lVar2 + (ulong)uVar1),param_1,(ulong)param_2);
        uVar3 = *(int *)(this + 0x974) + param_2;
      }
      else {
        uVar4 = *(uint *)(this + 0x964) - uVar1;
        uVar3 = param_2 - uVar4;
        _memmove((void *)(lVar2 + (ulong)uVar1),param_1,(ulong)uVar4);
        _memmove(*(void **)(this + 0x968),(void *)((long)param_1 + (ulong)uVar4),(ulong)uVar3);
      }
      *(uint *)(this + 0x974) = uVar3;
    }
    bVar6 = param_2 <= uVar5;
  }
  return bVar6;
}



// IGHardwareGuC::mmioHostToGuCAction(unsigned int const*, unsigned int, int, unsigned int*)

undefined4 __thiscall
IGHardwareGuC::mmioHostToGuCAction
          (IGHardwareGuC *this,undefined4 *param_1,uint param_2,int param_3,uint *param_4)

{
  char *pcVar1;
  undefined4 uVar2;
  long lVar3;
  uint uVar4;
  long lVar5;
  bool bVar6;
  
  uVar2 = *param_1;
  _IOLockLock(*(undefined8 *)(this + 0x950));
  lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x38));
  *(undefined4 *)(lVar3 + 0xc180) = uVar2;
  if (1 < param_2) {
    lVar5 = 0;
    do {
      *(undefined4 *)(lVar3 + 0xc184 + lVar5) = *(undefined4 *)((long)param_1 + lVar5 + 4);
      lVar5 = lVar5 + 4;
    } while ((ulong)param_2 * 4 + -4 != lVar5);
  }
  pcVar1 = "__ZNK15IGAccelResource23fillSurfaceStateAuxInfoEPKNS_17ResourceInfoEntryER22SGfxRenderSurfaceState6Intent"
           + lVar3 + 0x5c;
  pcVar1[0] = '\x01';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  uVar4 = *(uint *)(lVar3 + 0xc180);
  if ((uVar4 < 0xf0000000) && (-1 < param_3)) {
    do {
      bVar6 = param_3 != 0;
      param_3 = param_3 + -1;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,1000,1000);
      _thread_block(0);
      uVar4 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x38)) + 0xc180);
      if (0xefffffff < uVar4) break;
    } while (bVar6);
  }
  if (param_4 != (uint *)0x0) {
    *param_4 = uVar4;
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x950));
  return CONCAT31((int3)((uint)uVar2 >> 8),(uVar4 & 0xf000ffff) == 0xf0000000);
}



// IGHardwareGuC::pauseScheduler()

void IGHardwareGuC::pauseScheduler(void)

{
  return;
}



// IGHardwareGuC::resumeScheduler()

void IGHardwareGuC::resumeScheduler(void)

{
  return;
}



// IGHardwareGuC::logRingAvailable()

int __thiscall IGHardwareGuC::logRingAvailable(IGHardwareGuC *this)

{
  int iVar1;
  
  if (*(long *)(this + 0x968) == 0) {
    iVar1 = 0;
  }
  else {
    iVar1 = ~*(uint *)(this + 0x974) + *(int *)(this + 0x970);
    if (iVar1 < 0) {
      iVar1 = iVar1 + *(int *)(this + 0x964);
    }
  }
  return iVar1;
}



// IGHardwareGuC::logRingSetEnabled(bool)

IGHardwareGuC __thiscall IGHardwareGuC::logRingSetEnabled(IGHardwareGuC *this,IGHardwareGuC param_1)

{
  IGHardwareGuC IVar1;
  
  IVar1 = this[0x960];
  this[0x960] = param_1;
  return IVar1;
}



// IGHardwareGuC::logRingRead(void*, unsigned int)

int __thiscall IGHardwareGuC::logRingRead(IGHardwareGuC *this,void *param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  
  iVar1 = 0;
  if ((*(long *)(this + 0x968) != 0) && (this[0x960] != (IGHardwareGuC)0x0)) {
    uVar2 = *(uint *)(this + 0x970);
    uVar3 = *(uint *)(this + 0x974);
    if (uVar3 < uVar2) {
      uVar3 = uVar3 + *(int *)(this + 0x964);
    }
    uVar4 = param_2 + uVar2;
    if (uVar3 <= param_2 + uVar2) {
      uVar4 = uVar3;
    }
    iVar5 = uVar4 - uVar2;
    if (iVar5 != 0) {
      if (*(uint *)(this + 0x964) < uVar4) {
        uVar4 = *(uint *)(this + 0x964) - uVar2;
        if (param_1 != (void *)0x0) {
          _memmove(param_1,(void *)(*(long *)(this + 0x968) + (ulong)uVar2),(ulong)uVar4);
        }
        param_1 = (void *)((long)param_1 + (ulong)uVar4);
        *(undefined4 *)(this + 0x970) = 0;
        uVar4 = iVar5 - uVar4;
        uVar2 = 0;
      }
      if (param_1 != (void *)0x0) {
        _memmove(param_1,(void *)((ulong)uVar2 + *(long *)(this + 0x968)),(ulong)(uVar4 - uVar2));
      }
      uVar2 = 0;
      if (uVar4 != *(uint *)(this + 0x964)) {
        uVar2 = uVar4;
      }
      *(uint *)(this + 0x970) = uVar2;
      iVar1 = iVar5;
    }
  }
  return iVar1;
}



// IGHardwareGuC::requestGucToResampleCpgEnableRegister(unsigned int)

void __thiscall
IGHardwareGuC::requestGucToResampleCpgEnableRegister(IGHardwareGuC *this,undefined4 param_1)

{
  int local_18;
  undefined4 uStack_14;
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  _local_18 = CONCAT44(param_1,0x3005);
  hostToGuCAction(this,&local_18,2,0xf,(uint *)0x0);
  if (*(long *)__got::___stack_chk_guard == local_10) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareGuC::MetaClass::~MetaClass()

void __thiscall IGHardwareGuC::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  IGVector<> *this_00;
  long lVar3;
  long lVar4;
  char *pcVar5;
  ulong uVar6;
  
  *(undefined ***)this = &__const::~IGHashTable;
  lVar3 = *(long *)(this + 8);
  if ((lVar3 != 0) && (*(long *)(lVar3 + 8) != 0)) {
    lVar4 = *(long *)(lVar3 + 0x10);
    uVar6 = 0;
    do {
      lVar1 = *(long *)(lVar4 + uVar6 * 0x18);
      if (lVar1 != 0) {
        for (lVar3 = *(long *)(lVar1 + 8); lVar3 != 0; lVar3 = *(long *)(lVar3 + 8)) {
          if (*(long *)(lVar3 + 0x10) != lVar1 + 8) {
            pcVar5 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_0002068b;
          }
          if (**(long **)(lVar1 + 0x10) != lVar1) goto LAB_00020684;
          *(long **)(lVar3 + 0x10) = *(long **)(lVar1 + 0x10);
          **(long **)(lVar1 + 0x10) = lVar3;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar3;
        }
        plVar2 = *(long **)(lVar1 + 0x10);
        if (*plVar2 != lVar1) {
LAB_00020684:
          pcVar5 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0002068b:
                    // WARNING: Subroutine does not return
          _panic(pcVar5,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar6 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        lVar3 = *(long *)(this + 8);
        lVar4 = *(long *)(lVar3 + 0x10);
      }
      *(undefined8 *)(lVar4 + 0x10 + uVar6 * 0x18) = 0;
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ulong *)(lVar3 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  shrinkIfNeeded(this);
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 != (IGVector<> *)0x0) {
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
    return;
  }
  return;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// IGVector<IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __thiscall IGVector<>::IGVector(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  if (param_1 != 0) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x18),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x18),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x18;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x18) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      *(ulong *)this = param_1;
    }
  }
  return;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::slotIndex(unsigned int const&) const

uint __thiscall IGHashTable<>::slotIndex(IGHashTable<> *this,long param_1)

{
  ulong uVar1;
  byte bVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  ulong uVar6;
  ulong uVar7;
  
  uVar3 = 0xffffffffffffffc5;
  lVar5 = 0;
  do {
    uVar7 = (ulong)*(byte *)(param_1 + lVar5);
    uVar6 = uVar7 * 0x7fffffffffffffe7;
    uVar1 = uVar6 >> 0x38 | (uVar6 & 0xff000000000000) >> 0x28 | (uVar6 & 0xff0000000000) >> 0x18;
    uVar4 = POPCOUNT(uVar6) << 0x3f |
            uVar1 | (uVar6 & 0xff00000000) >> 8 | (uVar6 & 0xff000000) << 8 |
            (uVar6 & 0xff0000) << 0x18 | (uVar6 & 0xff00) << 0x28 | uVar6 << 0x38;
    uVar3 = uVar4 >> 3 ^ uVar7 * 0x3800000000000000 ^ uVar7 * -0xc800000 ^ uVar4 >> 0x25 ^
            ((((uVar6 >> 0x38) << 0x39 | uVar6 >> 0x25) + (uVar1 << 0x2f ^ uVar6 >> 0xb)) -
            (uVar4 >> 0x15 ^ uVar7 * 800)) + (-uVar4 >> 0xb ^ uVar7 * -0x320000000000 ^ uVar3);
    lVar5 = lVar5 + 1;
  } while (lVar5 != 4);
  lVar5 = 0;
  if (*(ulong *)(*(long *)(this + 8) + 8) != 0) {
    for (; (*(ulong *)(*(long *)(this + 8) + 8) >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
    }
  }
  bVar2 = (byte)lVar5;
  return ((uint)uVar3 ^ (uint)(uVar3 >> (bVar2 & 0x3f)) ^ (int)(uVar3 >> (-bVar2 & 0x3f)) * 0x3df) &
         ~(-1 << (bVar2 & 0x1f));
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::shrinkIfNeeded()

void __thiscall IGHashTable<>::shrinkIfNeeded(IGHashTable<> *this)

{
  ulong uVar1;
  
  if ((this[0x20] != (IGHashTable<>)0x0) && (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) {
    if ((((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 < 0xc) &&
       ((ulong)(*(long *)(this + 0x18) * 100) / *(ulong *)(*(long *)(this + 8) + 8) < 0xc)) {
      resizeAndRehash(this,*(ulong *)(*(long *)(this + 8) + 8) >> 1);
      return;
    }
  }
  return;
}



// IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::resizeAndRehash(unsigned long)

bool __thiscall IGHashTable<>::resizeAndRehash(IGHashTable<> *this,ulong param_1)

{
  IGVector<> *this_00;
  long lVar1;
  IGVector<> *this_01;
  long lVar2;
  undefined8 *puVar3;
  ulong uVar4;
  long *plVar5;
  char *pcVar6;
  undefined4 *puVar7;
  ulong uVar8;
  long lVar9;
  
  this_00 = *(IGVector<> **)(this + 8);
  this_01 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_01,param_1);
  *(IGVector<> **)(this + 8) = this_01;
  if (this_01 != (IGVector<> *)0x0) {
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    lVar2 = *(long *)(this_01 + 8);
    if (lVar2 != 0) {
      puVar3 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar3 = 0;
        puVar3[1] = puVar3;
        puVar3[2] = 0;
        puVar3 = puVar3 + 3;
        lVar2 = lVar2 + -1;
      } while (lVar2 != 0);
    }
    lVar2 = *(long *)this_00;
    if (lVar2 != 0) {
      lVar9 = 0;
      do {
        for (puVar7 = *(undefined4 **)(*(long *)(this_00 + 0x10) + lVar9 * 0x18);
            puVar7 != (undefined4 *)0x0; puVar7 = *(undefined4 **)(puVar7 + 2)) {
          add(this,puVar7,puVar7 + 1);
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != lVar2);
    }
    uVar4 = *(ulong *)(this_00 + 8);
    if (uVar4 != 0) {
      lVar2 = *(long *)(this_00 + 0x10);
      uVar8 = 0;
      do {
        lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
        if (lVar9 != 0) {
          do {
            lVar1 = *(long *)(lVar9 + 8);
            if (lVar1 == 0) {
              plVar5 = *(long **)(lVar9 + 0x10);
              if (*plVar5 != lVar9) {
LAB_00020a6c:
                pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00020a7c:
                    // WARNING: Subroutine does not return
                _panic(pcVar6,lVar9,0x230,"IGHash.h",0x230);
              }
              *(long **)(lVar2 + 8 + uVar8 * 0x18) = plVar5;
            }
            else {
              if (*(long *)(lVar1 + 0x10) != lVar9 + 8) {
                pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
                goto LAB_00020a7c;
              }
              if (**(long **)(lVar9 + 0x10) != lVar9) goto LAB_00020a6c;
              *(long **)(lVar1 + 0x10) = *(long **)(lVar9 + 0x10);
              plVar5 = *(long **)(lVar9 + 0x10);
            }
            *plVar5 = lVar1;
            _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                             kalloc_type_view_19);
            lVar2 = *(long *)(this_00 + 0x10);
            lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
          } while (lVar9 != 0);
          uVar4 = *(ulong *)(this_00 + 8);
        }
        uVar8 = uVar8 + 1;
      } while (uVar8 < uVar4);
    }
    *(undefined8 *)this_00 = 0;
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
  }
  return this_01 != (IGVector<> *)0x0;
}



// IGVector<IGHashTable<unsigned int, unsigned int, IGHashTraits<unsigned int>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



void __GLOBAL__sub_I_IGHardwareGuC_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareGuC::gMetaClass,"IGHardwareGuC",
             (OSMetaClass *)__got::gMetaClass,0x9a0);
  IGHardwareGuC::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareGuC::gMetaClass);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// intelLong_sysctl(sysctl_oid*, void*, int, sysctl_req*)

undefined4 __cdecl intelLong_sysctl(undefined8 param_1,long param_2,undefined8 param_3,long param_4)

{
  undefined *puVar1;
  undefined4 uVar2;
  long lVar3;
  undefined *puVar4;
  
  lVar3 = param_2 + -0x132f20 >> 3;
  if (param_2 + -0x132f20 < 0x248) {
    puVar4 = (&g_kdctl)[lVar3];
  }
  else {
    puVar4 = (undefined *)0x0;
  }
  uVar2 = _sysctl_handle_long();
  if (*(long *)(param_4 + 0x30) == 0) {
    ___idvarGetParam((uint)lVar3);
  }
  else {
    puVar1 = (&g_kdctl)[lVar3];
    (&g_kdctl)[lVar3] = puVar4;
    ___idvarSetParamLocked((uint)lVar3,puVar1,0);
  }
  return uVar2;
}



uint ___idvarGetOriginOfControl(uint param_1)

{
  return (param_1 < 0x49) - 1 | 1;
}



void ___idvarSetParam(uint param_1,undefined *param_2)

{
  ___idvarSetParamLocked(param_1,param_2,0);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined * ___idvarSetParamLocked(uint param_1,undefined *param_2,undefined4 param_3)

{
  long *plVar1;
  long *plVar2;
  int iVar3;
  uint64_t uVar4;
  uintptr_t arg1;
  undefined8 *puVar5;
  long lVar6;
  int extraout_EDX;
  char cVar7;
  uint uVar8;
  undefined *arg2;
  ulong uVar9;
  undefined *puVar10;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  ulong local_78;
  undefined8 local_70;
  undefined8 local_68;
  ulong local_60;
  uint local_54;
  ulong *local_50;
  undefined *local_48;
  undefined *local_40;
  undefined4 local_34;
  
  if (0x48 < param_1) {
    return (undefined *)0x0;
  }
  uVar9 = (ulong)param_1;
  arg2 = (&g_kdctl)[uVar9];
  if ((((0x2a < param_1) || ((0x60000000003U >> (uVar9 & 0x3f) & 1) == 0)) &&
      ((&g_kdctl)[uVar9] = param_2, param_1 == 0x30)) &&
     ((_graphicsTracePointEnable != 0 &&
      (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)))) {
    _kernel_debug(0x85a00014,(uintptr_t)param_2,(uintptr_t)arg2,0,0,0);
  }
  if (9 < DAT_00132f30) {
    return arg2;
  }
  plVar1 = (long *)(&l_accelerators)[DAT_00132f30];
  if (plVar1 == (long *)0x0) {
    return arg2;
  }
  local_54 = param_1 - 0x1c;
  local_60 = uVar9;
  if (local_54 < 6) {
    (**(code **)(*(long *)plVar1[0x250] + 0x208))();
    local_50 = (ulong *)(plVar1 + 0x238);
  }
  else {
    local_50 = (ulong *)(plVar1 + 0x238);
    if ((param_1 - 0x35 < 5) && ((plVar1[0x238] & 0x40000000000U) != 0)) {
      (**(code **)(*(long *)plVar1[0x250] + 0x218))
                ((long *)plVar1[0x250],param_1,(ulong)param_2 & 0xffffffff);
    }
  }
  switch(param_1) {
  case 6:
  case 7:
  case 0xf:
    break;
  case 8:
  case 9:
  case 0xc:
  case 0xd:
  case 0xe:
    goto switchD_00020d20_caseD_8;
  case 10:
    IGTelemetryManager::setupOnlyOA_ENABLE((IGTelemetryManager *)plVar1[0x1e3],(int)param_2);
    return arg2;
  case 0xb:
    if ((*local_50 & 0x10000000) != 0) {
      _DAT_00132f78 = 0;
    }
    break;
  default:
    if (0x3a < param_1) {
      return arg2;
    }
    if ((0x4001a8000000000U >> (local_60 & 0x3f) & 1) == 0) {
      return arg2;
    }
  }
  local_48 = arg2;
  local_40 = param_2;
  uVar4 = _mach_absolute_time();
  local_34 = param_3;
  if ((char)param_3 == '\0') {
    uVar9 = uVar4 + 1000000000;
    do {
      iVar3 = _IOLockTryLock(plVar1[0x11]);
      if (iVar3 == 0) {
        if (*(int *)__got::___ktrace_kernel_enabled != 0) {
          arg1 = IORegistryEntry::getRegistryEntryID();
          _kernel_debug(0x8512001c,arg1,0,0,0,0);
        }
      }
      else {
        IOGraphicsAccelerator2::lock_busy();
        (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
      }
      uVar4 = _mach_absolute_time();
      if (uVar9 < uVar4) {
        uVar4 = _mach_absolute_time();
        uVar9 = uVar4 + 1000000000;
      }
    } while (iVar3 == 0);
  }
  arg2 = local_48;
  cVar7 = (char)local_34;
  if ((int)param_1 < 0x27) {
    if (param_1 == 6) {
      IGAccelTraceStreamManager::ktraceStateChanged
                ((IGAccelTraceStreamManager *)(plVar1 + 0x1c3),1,(long)local_40);
      arg2 = local_48;
      goto LAB_00020f4a;
    }
    if (param_1 != 7) {
LAB_00021029:
      if ((param_1 == 0x2c) && (arg2 != local_40)) {
        (**(code **)(*(long *)plVar1[0x70] + 0x158))();
        *(long *)(plVar1[0x1e3] + 0x260) = *(long *)(plVar1[0x1e3] + 0x260) + 1;
      }
      else {
        if (param_1 == 0xf) {
          uVar4 = _mach_absolute_time();
          _DAT_00132fa0 = _DAT_00132fa0 + 1;
          _DAT_00132fb0 = uVar4;
          _DAT_00132fa8 =
               IGTelemetryManager::calcGlobalUsage((IGTelemetryManager *)plVar1[0x1e3],uVar4);
          puVar5 = (undefined8 *)(plVar1[0x1c2] + 400);
          lVar6 = 0;
          do {
            (&DAT_00132fb8)[lVar6] = *puVar5;
            lVar6 = lVar6 + 1;
            puVar5 = puVar5 + 0xe;
          } while (lVar6 != 5);
          lVar6 = 0;
          do {
            (&DAT_00132fd8)[lVar6] = uVar4;
            lVar6 = lVar6 + 1;
          } while (lVar6 != 5);
        }
        if ((param_1 != 0x3a) || ((*local_50 & 0x40000000000) == 0)) {
          cVar7 = (char)local_34;
          if (local_54 < 4) {
            (**(code **)(*(long *)plVar1[0x250] + 0x208))();
          }
          goto LAB_00020f4d;
        }
        _DAT_00133100 = _mach_absolute_time();
        _DAT_001330f8 = _DAT_001330f8 + 1;
        _DAT_00133138 =
             (ulong)(*(uint *)((long)&nlist_00145ee8.n_value + plVar1[0x24e]) & 0xffff) * 0x32 >> 8;
        local_68 = 0;
        local_70 = 0;
        local_78 = 0;
        local_80 = 0;
        local_88 = 0;
        local_90 = 0;
        local_98 = 0;
        local_a0 = 0;
        (**(code **)(*(long *)plVar1[0x250] + 0x220))((long *)plVar1[0x250],&local_a0);
        _DAT_00133108 = local_a0;
        _DAT_00133110 = local_98;
        _DAT_00133118 = local_90;
        _DAT_00133120 = local_88;
        _DAT_00133128 = local_80;
        _DAT_00133130 = local_78 & 0xffffffff;
      }
      goto LAB_00020f4a;
    }
    if ((local_40 == (undefined *)0x0) || ((int)plVar1[0x1e4] != 0)) {
      if ((local_40 == (undefined *)0x0) &&
         (((int)plVar1[0x1e4] != 0 && (*(undefined4 *)(plVar1 + 0x1e4) = 0, (int)plVar1[0x194] != 0)
          ))) {
        uVar8 = 0;
        do {
          plVar2 = (long *)plVar1[0x70];
          _IOLockLock(plVar2[10]);
          iVar3 = *(int *)(plVar2[9] + (long)(int)uVar8 * 4);
          *(int *)(plVar2[9] + (long)(int)uVar8 * 4) = iVar3 + -1;
          if (iVar3 == 1) {
            (**(code **)(*plVar2 + 0x248))(plVar2,uVar8);
          }
          _IOLockUnlock(plVar2[10]);
          uVar8 = uVar8 + 1;
        } while (uVar8 < *(uint *)(plVar1 + 0x194));
        goto LAB_00021029;
      }
    }
    else {
      *(undefined4 *)(plVar1 + 0x1e4) = 1;
      if ((int)plVar1[0x194] != 0) {
        uVar8 = 0;
        do {
          plVar2 = (long *)plVar1[0x70];
          _IOLockLock(plVar2[10]);
          iVar3 = *(int *)(plVar2[9] + (long)(int)uVar8 * 4);
          *(int *)(plVar2[9] + (long)(int)uVar8 * 4) = iVar3 + 1;
          if (iVar3 == 0) {
            (**(code **)(*plVar2 + 0x240))(plVar2,uVar8);
          }
          _IOLockUnlock(plVar2[10]);
          uVar8 = uVar8 + 1;
        } while (uVar8 < *(uint *)(plVar1 + 0x194));
        goto LAB_00021029;
      }
    }
  }
  else {
    if (param_1 == 0x27) {
      (**(code **)(*(long *)plVar1[0x250] + 0x200))((long *)plVar1[0x250],local_40);
      arg2 = local_48;
    }
    else {
      if (param_1 != 0x29) {
        if (param_1 == 0x2b) {
          puVar10 = local_40;
          if ((*local_50 & 0x10000000) != 0) {
            (&g_kdctl)[local_60] = (undefined *)0x0;
            puVar10 = (undefined *)0x0;
          }
          if (local_48 != puVar10) {
            (**(code **)(*(long *)plVar1[0x70] + 0x158))();
            *(long *)(plVar1[0x1e3] + 0x260) = *(long *)(plVar1[0x1e3] + 0x260) + 1;
          }
          if (puVar10 == (undefined *)0x0) {
            if (arg2 != (undefined *)0x0) {
              iVar3 = 0;
              IGTelemetryManager::setSysctlRefCount((IGTelemetryManager *)plVar1[0x1e3],0);
              IGTelemetryManager::telemetryRelease
                        ((IGTelemetryManager *)plVar1[0x1e3],iVar3,extraout_EDX);
            }
          }
          else if (arg2 == (undefined *)0x0) {
            IGTelemetryManager::setSysctlRefCount((IGTelemetryManager *)plVar1[0x1e3],1);
            IGTelemetryManager::telemetryRetain((IGTelemetryManager *)plVar1[0x1e3]);
          }
          iVar3 = IGTelemetryManager::printDashboard((IGTelemetryManager *)plVar1[0x1e3]);
          _kprintf("    end sysctl telemetryMode ref=%d\n",iVar3);
          goto LAB_00020f4d;
        }
        goto LAB_00021029;
      }
      IGTelemetryManager::printDashboard((IGTelemetryManager *)plVar1[0x1e3]);
      arg2 = local_48;
    }
LAB_00020f4a:
    cVar7 = (char)local_34;
  }
LAB_00020f4d:
  if (cVar7 == '\0') {
    (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar1[0x11]);
  }
switchD_00020d20_caseD_8:
  return arg2;
}



// IOGraphicsAccelerator2::acceleratorUnlock()

void __thiscall IOGraphicsAccelerator2::acceleratorUnlock(IOGraphicsAccelerator2 *this)

{
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined * ___idvarGetParam(uint param_1)

{
  long lVar1;
  
  if (param_1 < 0x49) {
    if ((((param_1 < 0x21) && ((0x100006000U >> ((ulong)param_1 & 0x3f) & 1) != 0)) &&
        (DAT_00132f30 < 10)) && (lVar1 = (&l_accelerators)[DAT_00132f30], lVar1 != 0)) {
      if (param_1 == 0x20) {
        if (DAT_00133020 == 0xffffffffffffffff) {
          if ((*(byte *)(*(long *)(&DAT_00001280 + lVar1) + 0xc) & 4) == 0) {
            DAT_00133020 = 0;
          }
          else {
            DAT_00133020 = (ulong)(*(uint *)(&DAT_000011c0 + lVar1) >> 0x1e & 1);
          }
        }
      }
      else if (param_1 == 0xe) {
        _DAT_00132f90 = *(undefined8 *)(*(long *)(lVar1 + 0xe10) + 0x18);
      }
      else if (param_1 == 0xd) {
        _DAT_00132f88 = *(undefined8 *)(*(long *)(lVar1 + 0xe10) + 0x10);
      }
    }
    return (&g_kdctl)[param_1];
  }
  return (undefined *)0x0;
}



// IntelAccelerator::MetaClass::MetaClass()

void __thiscall IntelAccelerator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IntelAccelerator",(OSMetaClass *)__got::gMetaClass,0x3740);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IntelAccelerator::MetaClass::~MetaClass()

void __thiscall IntelAccelerator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IntelAccelerator::IntelAccelerator(OSMetaClass const*)

void __thiscall IntelAccelerator::IntelAccelerator(IntelAccelerator *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IOGraphicsAccelerator2::IOGraphicsAccelerator2((IOGraphicsAccelerator2 *)this,param_1);
  *(undefined ***)this = &__const::~IntelAccelerator;
  lVar1 = 0;
  *(undefined8 *)(this + 0xe00) = 0;
  *(undefined8 *)(this + 0xe08) = 0;
  *(undefined8 *)(this + 0xe10) = 0;
  IGAccelTraceStreamManager::IGAccelTraceStreamManager((IGAccelTraceStreamManager *)(this + 0xe18));
  *(undefined8 *)(this + 0x12d8) = 0;
  *(undefined8 *)(this + 0x12e0) = 0;
  *(undefined8 *)(this + 0x12e8) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12d8),4);
  *(undefined8 *)(this + 0x12f0) = 0;
  *(undefined8 *)(this + 0x12f8) = 0;
  *(undefined8 *)(this + 0x1300) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12f0),4);
  *(undefined8 *)(this + 0x1340) = 0;
  *(undefined8 *)(this + 0x1380) = 0;
  *(undefined4 *)(this + 0x2d78) = 0;
  do {
    *(undefined4 *)(this + lVar1 + 0x2e58) = 0;
    lVar1 = lVar1 + 0x110;
  } while (lVar1 != 0x550);
  *(undefined4 *)(this + 0x3310) = 0;
  *(undefined4 *)(this + 0x3714) = 0;
  return;
}



// IGAccelTraceStreamManager::IGAccelTraceStreamManager()

void __thiscall
IGAccelTraceStreamManager::IGAccelTraceStreamManager(IGAccelTraceStreamManager *this)

{
  long lVar1;
  
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  *(undefined8 *)(this + 0xd8) = 0x3ff0000000000000;
  *(undefined8 *)(this + 0xe0) = 0;
  *(undefined8 *)this = 0;
  *(undefined4 *)(this + 0x30) = 0;
  *(undefined8 *)(this + 0xa8) = 1;
  lVar1 = 1;
  do {
    *(undefined8 *)(this + lVar1 * 8) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 6);
  *(undefined8 *)(this + 0x38) = 1;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0xa0) = 1;
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  return;
}



// IntelAccelerator::IntelAccelerator(OSMetaClass const*)

void __thiscall IntelAccelerator::IntelAccelerator(IntelAccelerator *this,OSMetaClass *param_1)

{
  IntelAccelerator(this,param_1);
  return;
}



// IntelAccelerator::~IntelAccelerator()

void __thiscall IntelAccelerator::~IntelAccelerator(IntelAccelerator *this,int param_1)

{
  int extraout_EDX;
  
  *(undefined ***)this = &__const::~IntelAccelerator;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12f0));
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12d8));
  IGAccelTraceStreamManager::shutdown
            ((IGAccelTraceStreamManager *)(this + 0xe18),param_1,extraout_EDX);
  if (*(long **)(this + 0xe08) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xe08) + 0x28))();
  }
  *(undefined8 *)(this + 0xe08) = 0;
  *(undefined8 *)(this + 0xe10) = 0;
  IOGraphicsAccelerator2::~IOGraphicsAccelerator2((IOGraphicsAccelerator2 *)this);
  return;
}



// IGVector<resetRegisterInfo, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x24) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x24) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGVector<unsigned int, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 2;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3e != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(unsigned_int*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IntelAccelerator::~IntelAccelerator()

void __thiscall IntelAccelerator::~IntelAccelerator(IntelAccelerator *this,int param_1)

{
  int extraout_EDX;
  
  *(undefined ***)this = &__const::~IntelAccelerator;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12f0));
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12d8));
  IGAccelTraceStreamManager::shutdown
            ((IGAccelTraceStreamManager *)(this + 0xe18),param_1,extraout_EDX);
  if (*(long **)(this + 0xe08) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xe08) + 0x28))();
  }
  *(undefined8 *)(this + 0xe08) = 0;
  *(undefined8 *)(this + 0xe10) = 0;
  IOGraphicsAccelerator2::~IOGraphicsAccelerator2((IOGraphicsAccelerator2 *)this);
  return;
}



// IntelAccelerator::~IntelAccelerator()

void __thiscall IntelAccelerator::~IntelAccelerator(IntelAccelerator *this,int param_1)

{
  ~IntelAccelerator(this,param_1);
  _OSObject_typed_operator_delete(&IntelAccelerator_ktv,this,0x3740);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::operator delete(void*, unsigned long)

void __cdecl IntelAccelerator::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IntelAccelerator_ktv,param_1,param_2);
  return;
}



// IntelAccelerator::getMetaClass() const

undefined1 * IntelAccelerator::getMetaClass(void)

{
  return &gMetaClass;
}



// IntelAccelerator::MetaClass::MetaClass()

void __thiscall IntelAccelerator::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IntelAccelerator",(OSMetaClass *)__got::gMetaClass,0x3740);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IntelAccelerator::MetaClass::alloc() const

IntelAccelerator * IntelAccelerator::MetaClass::alloc(void)

{
  IntelAccelerator *this;
  
  this = (IntelAccelerator *)_OSObject_typed_operator_new(&IntelAccelerator_ktv,0x3740);
  IntelAccelerator(this);
  return this;
}



// IntelAccelerator::operator new(unsigned long)

void * __thiscall IntelAccelerator::operator_new(IntelAccelerator *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IntelAccelerator_ktv,this);
  return pvVar1;
}



// IntelAccelerator::IntelAccelerator()

void __thiscall IntelAccelerator::IntelAccelerator(IntelAccelerator *this)

{
  IntelAccelerator(this);
  return;
}



// IntelAccelerator::IntelAccelerator()

void __thiscall IntelAccelerator::IntelAccelerator(IntelAccelerator *this)

{
  long lVar1;
  
  IOGraphicsAccelerator2::IOGraphicsAccelerator2
            ((IOGraphicsAccelerator2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IntelAccelerator;
  lVar1 = 0;
  *(undefined8 *)(this + 0xe00) = 0;
  *(undefined8 *)(this + 0xe08) = 0;
  *(undefined8 *)(this + 0xe10) = 0;
  IGAccelTraceStreamManager::IGAccelTraceStreamManager((IGAccelTraceStreamManager *)(this + 0xe18));
  *(undefined8 *)(this + 0x12d8) = 0;
  *(undefined8 *)(this + 0x12e0) = 0;
  *(undefined8 *)(this + 0x12e8) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12d8),4);
  *(undefined8 *)(this + 0x12f0) = 0;
  *(undefined8 *)(this + 0x12f8) = 0;
  *(undefined8 *)(this + 0x1300) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12f0),4);
  *(undefined8 *)(this + 0x1340) = 0;
  *(undefined8 *)(this + 0x1380) = 0;
  *(undefined4 *)(this + 0x2d78) = 0;
  do {
    *(undefined4 *)(this + lVar1 + 0x2e58) = 0;
    lVar1 = lVar1 + 0x110;
  } while (lVar1 != 0x550);
  *(undefined4 *)(this + 0x3310) = 0;
  *(undefined4 *)(this + 0x3714) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Removing unreachable block (ram,0x00021a73)
// WARNING: Removing unreachable block (ram,0x00021af3)
// WARNING: Removing unreachable block (ram,0x00021a36)
// IntelAccelerator::probe(IOService*, int*)

IntelAccelerator * __thiscall
IntelAccelerator::probe(IntelAccelerator *this,OSMetaClassBase *param_1,undefined8 param_2)

{
  IntelAccelerator IVar1;
  uint *puVar2;
  byte bVar3;
  undefined1 uVar4;
  undefined1 uVar5;
  byte bVar6;
  boolean_t bVar7;
  undefined4 uVar8;
  long lVar9;
  long *plVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  int iVar14;
  undefined4 local_50;
  undefined4 local_4c;
  ulong local_48;
  uint local_3c;
  uint local_38;
  uint local_34;
  
  local_50 = 0;
  bVar7 = _PE_parse_boot_argn("-noig",&local_50,4);
  if (bVar7 == 0) {
    lVar9 = (**(code **)(__got::vtable + 0x5c8))(this,param_1,param_2);
    if (lVar9 == 0) {
      _IOLog("[IGPU] %s: probe failed!\n",
             "virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)");
      _kprintf("[IGPU] %s: probe failed!\n",
               "virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)");
      uVar8 = 0x102;
    }
    else {
      plVar10 = (long *)OSMetaClassBase::safeMetaCast(param_1,*(OSMetaClass **)__got::metaClass);
      if (plVar10 != (long *)0x0) {
        uVar8 = IOPCIDevice::extendedConfigRead32((ulonglong)plVar10);
        *(undefined4 *)(this + 0x1148) = uVar8;
        *(undefined4 *)(this + 0x114c) = 0;
        bVar3 = IOPCIDevice::extendedConfigRead8((ulonglong)plVar10);
        *(uint *)(this + 0x1140) = (uint)bVar3;
        bVar3 = IOPCIDevice::extendedConfigRead8((ulonglong)plVar10);
        *(uint *)(this + 0x1144) = (uint)bVar3;
        if (((*(uint *)(this + 0x1140) < 3) && (*(int *)(this + 0x1148) != -0xfd7f7a)) &&
           (*(int *)(this + 0x1148) != -0xfa7f7a)) {
          local_4c = 0;
          bVar7 = _PE_parse_boot_argn("-allow3d",&local_4c,4);
          if (bVar7 == 0) {
            _kprintf("[IGPU] Failing probe (-allow3d is NOT set in boot-arg)!\n");
            _IOLog("[IGPU] Failing probe (-allow3d is NOT set in boot-arg)!\n");
            uVar8 = 0x223;
            goto LAB_00021816;
          }
        }
        rdmsr(0x35);
        local_3c = *(uint *)(this + 0x1148);
        IVar1 = this[0x1140];
        local_38 = (uint)(byte)this[0x114c];
        local_34 = (uint)(byte)this[0x1144];
        bVar3 = (**(code **)(*plVar10 + 0x8e8))(plVar10);
        local_48 = (ulong)bVar3;
        uVar4 = (**(code **)(*plVar10 + 0x8f0))(plVar10);
        uVar5 = (**(code **)(*plVar10 + 0x8f8))(plVar10);
        iVar14 = 0;
        _IOLog("[IGPU] %s: Found device with ID 0x%08x, revision 0x%x, PCH id 0x%x, PCH rev 0x%x at PCI %u:%u:%u\n"
               ,"virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)",local_3c,IVar1,
               local_38,local_34,local_48,uVar4,uVar5);
        local_3c = *(uint *)(this + 0x1148);
        IVar1 = this[0x1140];
        local_38 = (uint)(byte)this[0x114c];
        local_34 = (uint)(byte)this[0x1144];
        bVar3 = (**(code **)(*plVar10 + 0x8e8))(plVar10);
        local_48 = (ulong)bVar3;
        bVar3 = (**(code **)(*plVar10 + 0x8f0))(plVar10);
        bVar6 = (**(code **)(*plVar10 + 0x8f8))(plVar10);
        _kprintf("[IGPU] %s: Found device with ID 0x%08x, revision 0x%x, PCH id 0x%x, PCH rev 0x%x at PCI %u:%u:%u\n"
                 ,"virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)",local_3c,
                 (uint)(byte)IVar1,local_38,local_34,(uint)local_48,(uint)bVar3,(uint)bVar6);
        uVar13 = 0xffffffff;
        iVar12 = -1;
        do {
          puVar2 = (uint *)cpuid_Deterministic_Cache_Parameters_info(4);
          uVar11 = *puVar2 & 0x1f;
          if ((uVar11 == 1) || (uVar11 == 3)) {
            uVar11 = *puVar2 >> 5 & 7;
            if ((int)uVar13 < (int)uVar11) {
              uVar13 = uVar11;
              iVar12 = iVar14;
            }
          }
          else if (uVar11 == 0) {
            if (-1 < iVar12) {
              cpuid_Deterministic_Cache_Parameters_info(4);
            }
            break;
          }
          iVar14 = iVar14 + 1;
        } while (iVar14 != 5);
        cpuid_Version_info(1);
        return this;
      }
      _IOLog("[IGPU] %s: No device!\n",
             "virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)");
      _kprintf("[IGPU] %s: No device!\n",
               "virtual IOService *IntelAccelerator::probe(IOService *, SInt32 *)");
      uVar8 = 0x103;
    }
  }
  else {
    _IOLog("[IGPU] Failing probe (-noig is set in boot-arg)!\n");
    _kprintf("[IGPU] Failing probe (-noig is set in boot-arg)!\n");
    uVar8 = 0x101;
  }
LAB_00021816:
  encodeFailureStack(this,uVar8);
  return (IntelAccelerator *)0x0;
}



// IntelAccelerator::encodeFailureStack(IGFailureReason)

void __thiscall IntelAccelerator::encodeFailureStack(IntelAccelerator *this,undefined4 param_1)

{
  IntelAccelerator *pIVar1;
  uint uVar2;
  int iVar3;
  OSDictionary *pOVar4;
  long *plVar5;
  ulong uVar6;
  uint uVar7;
  IntelAccelerator *param0;
  
  if ((ulong)*(uint *)(this + 0x3310) < 8) {
    *(undefined4 *)(this + (ulong)*(uint *)(this + 0x3310) * 4 + 0x32f0) = param_1;
    iVar3 = *(int *)(this + 0x3310);
    *(uint *)(this + 0x3310) = iVar3 + 1U;
    uVar2 = *(uint *)(this + 0x3714);
    uVar7 = 0x3ff - uVar2;
    if (0 < (int)uVar7) {
      pIVar1 = this + 0x3314;
      iVar3 = _snprintf((char *)(pIVar1 + uVar2),(ulong)uVar7," %x",iVar3 + 1U);
      *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar3;
      uVar7 = uVar7 - iVar3;
      if ((0 < (int)uVar7) && (*(int *)(this + 0x3310) != 0)) {
        param0 = pIVar1 + uVar2 + iVar3;
        uVar6 = 0;
        do {
          iVar3 = _snprintf((char *)param0,(ulong)uVar7," [%x]",*(uint *)(this + uVar6 * 4 + 0x32f0)
                           );
          *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar3;
          uVar7 = uVar7 - iVar3;
          if ((int)uVar7 < 1) break;
          param0 = param0 + iVar3;
          uVar6 = uVar6 + 1;
        } while (uVar6 < *(uint *)(this + 0x3310));
      }
      pOVar4 = (OSDictionary *)IOService::nameMatching("IOResources",(OSDictionary *)0x0);
      if (pOVar4 != (OSDictionary *)0x0) {
        plVar5 = (long *)IOService::copyMatchingService(pOVar4);
        if (plVar5 != (long *)0x0) {
          (**(code **)(*plVar5 + 0x270))(plVar5,"Triage",pIVar1);
          (**(code **)(*plVar5 + 0x28))(plVar5);
        }
                    // WARNING: Could not recover jumptable at 0x00021c4f. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(*(long *)pOVar4 + 0x28))(pOVar4);
        return;
      }
    }
  }
  return;
}



// IntelAccelerator::free()

void __thiscall IntelAccelerator::free(IntelAccelerator *this,void *param_1)

{
  unregisterWithFramebufferController(this);
                    // WARNING: Could not recover jumptable at 0x00021c80. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IntelAccelerator::unregisterWithFramebufferController()

void __thiscall IntelAccelerator::unregisterWithFramebufferController(IntelAccelerator *this)

{
  OSDictionary *pOVar1;
  long *plVar2;
  long *plVar3;
  undefined4 uVar4;
  
  if (this[0x12b4] == (IntelAccelerator)0x0) {
    return;
  }
  pOVar1 = (OSDictionary *)
           IOService::serviceMatching("AppleIntelFramebufferController",(OSDictionary *)0x0);
  if (pOVar1 == (OSDictionary *)0x0) {
    uVar4 = 0x221;
  }
  else {
    plVar2 = (long *)IOService::getMatchingServices(pOVar1);
    if (plVar2 != (long *)0x0) {
      plVar3 = (long *)(**(code **)(*plVar2 + 0x128))(plVar2);
      if (plVar3 != (long *)0x0) {
        this[0x12b4] = (IntelAccelerator)0x0;
        (**(code **)(*plVar3 + 0x6b8))(plVar3,_fSymFBCLASSUnregisterAccelerator,0,0,0,0,0);
      }
      (**(code **)(*plVar2 + 0x28))(plVar2);
                    // WARNING: Could not recover jumptable at 0x00021d1e. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(long *)pOVar1 + 0x28))(pOVar1);
      return;
    }
    (**(code **)(*(long *)pOVar1 + 0x28))(pOVar1);
    uVar4 = 0x222;
  }
  encodeFailureStack(this,uVar4);
  return;
}



// IntelAccelerator::initLog()

void __thiscall IntelAccelerator::initLog(IntelAccelerator *this)

{
  OSDictionary *pOVar1;
  long *plVar2;
  
  ___bzero(this + 0x3314);
  pOVar1 = (OSDictionary *)IOService::nameMatching("IOResources",(OSDictionary *)0x0);
  if (pOVar1 != (OSDictionary *)0x0) {
    plVar2 = (long *)IOService::copyMatchingService(pOVar1);
    if (plVar2 != (long *)0x0) {
      (**(code **)(*plVar2 + 0x270))(plVar2,"Triage",this + 0x3314);
      (**(code **)(*plVar2 + 0x28))(plVar2);
    }
                    // WARNING: Could not recover jumptable at 0x00021dcc. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(long *)pOVar1 + 0x28))(pOVar1);
    return;
  }
  return;
}



// IntelAccelerator::appendLog(unsigned char)

void __thiscall IntelAccelerator::appendLog(IntelAccelerator *this,byte param_1)

{
  uint uVar1;
  int iVar2;
  OSDictionary *pOVar3;
  long *plVar4;
  
  if (*(int *)(this + 0x3310) == 0) {
    uVar1 = 0x3ff - *(uint *)(this + 0x3714);
    if (0 < (int)uVar1) {
      iVar2 = _snprintf((char *)(this + 0x3314 + *(uint *)(this + 0x3714)),(ulong)uVar1,"%02x",
                        (uint)param_1);
      *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar2;
      pOVar3 = (OSDictionary *)IOService::nameMatching("IOResources",(OSDictionary *)0x0);
      if (pOVar3 != (OSDictionary *)0x0) {
        plVar4 = (long *)IOService::copyMatchingService(pOVar3);
        if (plVar4 != (long *)0x0) {
          (**(code **)(*plVar4 + 0x270))(plVar4,"Triage",this + 0x3314);
          (**(code **)(*plVar4 + 0x28))(plVar4);
        }
                    // WARNING: Could not recover jumptable at 0x00021e89. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(*(long *)pOVar3 + 0x28))(pOVar3);
        return;
      }
    }
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// IntelAccelerator::start(IOService*)

undefined8 __thiscall
IntelAccelerator::start
          (undefined8 param_1,double param_2,ulong param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,undefined8 param_10)

{
  char cVar1;
  bool bVar2;
  uint uVar3;
  long *plVar4;
  long lVar5;
  undefined8 uVar6;
  ulong uVar7;
  IGGarbageCollector *pIVar8;
  IGGuC *pIVar9;
  undefined4 uVar10;
  char *param1;
  char *pcVar11;
  int local_13c;
  char local_138 [264];
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  *(undefined1 *)((long)this + 0x3718) = 1;
  *(undefined8 *)((long)this + 0x1290) = 0;
  *(undefined8 *)((long)this + 0x1270) = 0;
  *(undefined8 *)((long)this + 0x1278) = 0;
  *(undefined8 *)((long)this + 0x1280) = 0;
  *(undefined8 *)((long)this + 0x1298) = 0;
  *(undefined8 *)((long)this + 0x12a0) = 0;
  *(undefined8 *)((long)this + 0x13f8) = 0;
  *(undefined8 *)((long)this + 0x1400) = 0;
  *(undefined4 *)((long)this + 0x1408) = 0;
  *(undefined8 *)((long)this + 0x1380) = 0;
  initLog(this);
  IGSpinLock::initialize();
  plVar4 = IGSpinLock::withOptions(0x53465720,0);
  *(long **)((long)this + 0x1468) = plVar4;
  *(undefined8 *)((long)this + 0x1258) = 0;
  *(undefined **)((long)this + 0x1260) = &DAT_00001258 + (long)this;
  lVar5 = 0x4ae;
  do {
    *(undefined4 *)((long)this + lVar5 * 4) = 0;
    lVar5 = lVar5 + 1;
  } while (lVar5 != 0x4b1);
  *(undefined1 *)((long)this + 0x12c4) = 0;
  *(undefined8 *)((long)this + 0x1448) = 0;
  *(undefined8 *)((long)this + 0x11c0) = 0;
  *(undefined8 *)((long)this + 0x11c8) = 0;
  *(undefined8 *)((long)this + 0x13c0) = 0;
  *(undefined4 *)((long)this + 0x13c8) = 0;
  *(undefined8 *)((long)this + 0x1410) = 0;
  *(undefined8 *)((long)this + 0x1418) = 0;
  *(undefined8 *)((long)this + 0x1420) = 0;
  *(undefined8 *)((long)this + 0x1428) = 0;
  *(undefined8 *)((long)this + 0x1430) = 0;
  ___bzero((long)this + 0x1478,0x100);
  *(undefined8 *)((long)this + 0xdd8) = 0x200000008;
  *(undefined1 *)((long)this + 0xf35) = 0;
  *(undefined8 *)((long)this + 0x12d8) = 0;
  g_kdctl = (undefined *)0x77777010;
  _DAT_00132f28 = 0x49;
  _DAT_00132f78 = 0x1f;
  _DAT_00133050 = 0xffffffffffffffff;
  _DAT_00133048 = 0xffffffffffffffff;
  _DAT_00133040 = 0xffffffffffffffff;
  _DAT_00133038 = 0xffffffffffffffff;
  _DAT_00133000 = 0xffffffffffffffff;
  _DAT_00133008 = 0xffffffffffffffff;
  _DAT_00133010 = 0xffffffffffffffff;
  _DAT_00133018 = 0xffffffffffffffff;
  appendLog(this,1);
  appendLog(this,2);
  setInSimulator(this);
  *(undefined4 *)((long)this + 0x1470) = 2;
  *(byte *)((long)this + 0x1340) = *(byte *)((long)this + 0x1340) | 0x1f;
  uVar6 = registerWithFramebufferController(this);
  if ((char)uVar6 == '\0') {
    uVar10 = 0x200;
  }
  else {
    appendLog(this,3);
    if (((*(byte *)((long)this + 0x11c0) & 0x20) == 0) && (*(char *)((long)this + 0x12b4) == '\0'))
    {
      *(undefined4 *)((long)this + 0x1470) = 3;
    }
    InitIclLpWaTable((byte *)((long)this + 0xf36),&DAT_00001010 + (long)this,
                     (ulong)*(uint *)((long)this + 0x1148),(uint)*(ushort *)((long)this + 0x1140));
    appendLog(this,4);
    cVar1 = (**(code **)(__got::vtable + 0x5d0))(this,param_10);
    if (cVar1 != '\0') {
      appendLog(this,5);
      setInEmulator(this);
      _OSIncrementAtomic((long)this + 0x90);
      _IOLockLock(*(undefined8 *)((long)this + 0x88));
      _OSDecrementAtomic((long)this + 0x90);
      IOGraphicsAccelerator2::lock_busy();
      (**(code **)(*(long *)this + 0x850))(this,"",0);
      appendLog(this,6);
      uVar7 = IGMemoryManager::registerEvents(*(IGMemoryManager **)((long)this + 0x1290));
      if ((char)uVar7 == '\0') {
        uVar10 = 0x205;
      }
      else {
        appendLog(this,7);
        IGAccelEventMachine::enableSchedulerEvents(*(IGAccelEventMachine **)((long)this + 0x380));
        ___bzero(local_138,0x100);
        pcVar11 = "[IGPU] Scheduler: Multiple channel indexes per command streamer\n";
        if ((*(uint *)((long)this + 0x11c0) & 0x18000) == 0x8000) {
          pcVar11 = "[IGPU] Scheduler: Single channel index per command streamer\n";
        }
        _IOLog(pcVar11);
        _kprintf(pcVar11);
        pcVar11 = "MMIO";
        if ((*(byte *)((long)this + 0x11c0) & 0x80) == 0) {
          pcVar11 = "HWS";
        }
        _snprintf(local_138,0x100,pcVar11);
        _IOLog("[IGPU] Scheduler: Process CSB using %s.\n",local_138);
        _kprintf("[IGPU] Scheduler: Process CSB using %s.\n",local_138);
        param1 = "enabled";
        pcVar11 = "enabled";
        if ((*(uint *)((long)this + 0x11c0) >> 0xe & 1) == 0) {
          pcVar11 = "disabled";
        }
        _IOLog("[IGPU] Scheduler: PM notify %s\n",pcVar11);
        if ((*(uint *)((long)this + 0x11c0) >> 0xe & 1) == 0) {
          param1 = "disabled";
        }
        _kprintf("[IGPU] Scheduler: PM notify %s\n",param1);
        uVar3 = (uint)*(undefined8 *)((long)this + 0x11c0);
        if ((uVar3 >> 8 & 1) == 0) {
          _IOLog("[IGPU] Graphics Address: GGTT, Single Address Space\n");
          _kprintf("[IGPU] Graphics Address: GGTT, Single Address Space\n");
          if ((*(byte *)((long)this + 0x11c1) & 2) != 0) {
            _IOLog("[IGPU] Forcing Single Address Space as required by GGTT\n");
            _kprintf("[IGPU] Forcing Single Address Space as required by GGTT\n");
            *(byte *)((long)this + 0x11c1) = *(byte *)((long)this + 0x11c1) & 0xfd;
          }
        }
        else {
          if ((uVar3 >> 9 & 1) == 0) {
            pcVar11 = "[IGPU] Graphics Address: PPGTT, Single Address Space\n";
          }
          else {
            pcVar11 = "[IGPU] Graphics Address: PPGTT, Separate Address Space\n";
          }
          _IOLog(pcVar11);
          _kprintf(pcVar11);
        }
        pcVar11 = "[IGPU] MultiForceWake Enabled: Using 3D Driver\n";
        if ((*(uint *)((long)this + 0x11c0) >> 0xb & 1) == 0) {
          pcVar11 = "[IGPU] MultiForceWake Disabled: Using 2D Driver\n";
        }
        _IOLog(pcVar11);
        _kprintf(pcVar11);
        _IOLog("[IGPU] POSH Disabled\n");
        _kprintf("[IGPU] POSH Disabled\n");
        _IOLog("[IGPU] Render Compression Enabled.\n");
        _kprintf("[IGPU] Render Compression Enabled.\n");
        pcVar11 = "[IGPU] Render Compression for IOSurface is Enabled.\n";
        if ((*(uint *)((long)this + 0x11c0) >> 0x15 & 1) == 0) {
          pcVar11 = "[IGPU] Render Compression for IOSurface is Disabled.\n";
        }
        _IOLog(pcVar11);
        _kprintf(pcVar11);
        uVar7 = initInterruptBridge(this);
        uVar10 = 0x206;
        if ((char)uVar7 != '\0') {
          *(undefined4 *)((long)this + 0xf20) = 0;
          appendLog(this,8);
          pIVar8 = IGGarbageCollector::garbageCollector(this);
          *(IGGarbageCollector **)((long)this + 0x1288) = pIVar8;
          if (pIVar8 == (IGGarbageCollector *)0x0) {
            uVar10 = 0x207;
          }
          else {
            appendLog(this,9);
            cVar1 = IGScheduler::schedulerType((byte)(*(uint *)((long)this + 0x11c0) >> 0x16) & 7);
            if (cVar1 == '\x02') {
              pIVar9 = IGScheduler::create((long)this);
              *(IGGuC **)((long)this + 0x1280) = pIVar9;
              if (pIVar9 != (IGGuC *)0x0) goto LAB_00022411;
LAB_0002286a:
              uVar10 = 0x211;
            }
            else {
LAB_00022411:
              appendLog(this,10);
              cVar1 = IGAccelStatsMemory::init((IGAccelStatsMemory *)((long)this + 0xe00),this);
              uVar10 = 0x208;
              if (cVar1 != '\0') {
                appendLog(this,0xb);
                uVar6 = telemetryCreateManager(this,1);
                uVar10 = 0x209;
                if ((char)uVar6 != '\0') {
                  appendLog(this,0xc);
                  uVar7 = initHardwareStatusPageMemory(this);
                  uVar10 = 0x20f;
                  if ((char)uVar7 != '\0') {
                    appendLog(this,0xd);
                    appendLog(this,0xe);
                    bVar2 = initIndirectContextBatchBuffer(this);
                    uVar10 = 0x21e;
                    if (bVar2) {
                      appendLog(this,0xf);
                      plVar4 = *(long **)((long)this + 0x380);
                      uVar6 = IGAccelTask::getStamps(*(IGAccelTask **)((long)this + 0x150));
                      (**(code **)(*plVar4 + 0x130))(plVar4,uVar6);
                      cVar1 = IGScheduler::schedulerType
                                        ((byte)(*(uint *)((long)this + 0x11c0) >> 0x16) & 7);
                      if (cVar1 != '\x02') {
                        pIVar9 = IGScheduler::create((long)this);
                        *(IGGuC **)((long)this + 0x1280) = pIVar9;
                        if (pIVar9 == (IGGuC *)0x0) goto LAB_0002286a;
                      }
                      appendLog(this,0x10);
                      *(undefined8 *)((long)this + 0x1438) = 0x1000000000;
                      lVar5 = _IOLockAlloc();
                      *(long *)((long)this + 0x1440) = lVar5;
                      if (lVar5 == 0) {
                        uVar10 = 0x212;
                      }
                      else {
                        appendLog(this,0x11);
                        lVar5 = _IOLockAlloc();
                        *(long *)((long)this + 0x1448) = lVar5;
                        if (lVar5 == 0) {
                          uVar10 = 0x213;
                        }
                        else {
                          appendLog(this,0x12);
                          if ((*(byte *)((long)this + 0x11c0) & 0x20) != 0) {
                            setAsyncSliceCount(this,(*(uint *)((long)this + 0xdd8) & 0xff) << 8 |
                                                    (*(uint *)((long)this + 0x12d0) & 0xff) << 0x10
                                                    | (uint)*(byte *)((long)this + 0x12cc));
                          }
                          uVar6 = appendLog(this,0x13);
                          uVar7 = startGraphicsEngine(uVar6,param_2,param_3,param_4,param_5,param_6,
                                                      param_7,param_8,this);
                          if ((char)uVar7 == '\0') {
                            _IOLog("[IGPU] Failed to start graphics engine\n");
                            _kprintf("[IGPU] Failed to start graphics engine\n");
                            uVar10 = 0x214;
                          }
                          else {
                            appendLog(this,0x14);
                            if ((*(byte *)((long)this + 0x11c1) & 0x20) == 0) {
                              (*(code *)**(undefined8 **)((long)this + 0xdf8))();
                            }
                            appendLog(this,0x15);
                            IGAccelTraceStreamManager::init
                                      ((IGAccelTraceStreamManager *)((long)this + 0xe18),(long)this)
                            ;
                            appendLog(this,0x16);
                            cVar1 = blockFenceCreateManager(this);
                            uVar10 = 0x21f;
                            if (cVar1 != '\0') {
                              appendLog(this,0x17);
                              pcVar11 = IGScheduler::schedulerName
                                                  ((byte)(*(uint *)((long)this + 0x11c0) >> 0x16) &
                                                   7);
                              _IOLog("[IGPU] Graphics accelerator is using scheduler: %s\n",pcVar11)
                              ;
                              pcVar11 = IGScheduler::schedulerName
                                                  ((byte)(*(uint *)((long)this + 0x11c0) >> 0x16) &
                                                   7);
                              _kprintf("[IGPU] Graphics accelerator is using scheduler: %s\n",
                                       pcVar11);
                              IOGraphicsAccelerator2::acceleratorUnlock(this);
                              appendLog(this,0x18);
                              *(undefined4 *)(*(long *)((long)this + 0xe10) + 8) =
                                   *(undefined4 *)((long)this + 0x1154);
                              if (*(int *)((long)this + 0x12b0) == 0) {
                                (**(code **)(*(long *)this + 0x2a0))(this,"MetalPluginName");
                              }
                              *(undefined8 *)((long)this + 0x1458) = 0;
                              *(undefined4 *)((long)this + 0x1450) = 1;
                              local_13c = 0;
                              (**(code **)(*(long *)((long)this + 0xdf8) + 0x38))(&local_13c);
                              if (local_13c < 0) {
                                lVar5 = IOTimerEventSource::timerEventSource(this,dpsmIdleTimer);
                                *(long *)((long)this + 0x1458) = lVar5;
                                if (lVar5 == 0) {
                                  uVar10 = 0x215;
                                  goto LAB_000222c0;
                                }
                                plVar4 = (long *)(**(code **)(**(long **)((long)this + 0x1280) +
                                                             0x228))();
                                (**(code **)(*plVar4 + 0x140))
                                          (plVar4,*(undefined8 *)((long)this + 0x1458));
                                (**(code **)(**(long **)((long)this + 0x1458) + 0x150))();
                                (**(code **)(**(long **)((long)this + 0x1458) + 0x218))();
                                *(byte *)((long)this + 0x11c1) = *(byte *)((long)this + 0x11c1) | 4;
                              }
                              appendLog(this,0x19);
                              *(undefined8 *)((long)this + 0x1460) = 0;
                              *(undefined8 *)((long)this + 0xde8) = 0;
                              *(undefined8 *)((long)this + 0xdf0) = 0;
                              *(undefined1 *)((long)this + 0xde0) = 0;
                              lVar5 = IOTimerEventSource::timerEventSource
                                                (this,transcodeActiveTimerFired);
                              *(long *)((long)this + 0x1460) = lVar5;
                              if (lVar5 != 0) {
                                appendLog(this,0x1a);
                                plVar4 = (long *)(**(code **)(*(long *)this + 0x688))(this);
                                (**(code **)(*plVar4 + 0x140))
                                          (plVar4,*(undefined8 *)((long)this + 0x1460));
                                (**(code **)(**(long **)((long)this + 0x1460) + 0x150))();
                                (**(code **)(**(long **)((long)this + 0x1460) + 0x218))();
                                (**(code **)(*(long *)this + 0x5b0))(this,0);
                                appendLog(this,0x1b);
                                initSysctl(this);
                                *(undefined1 *)((long)this + 0x1474) = 0;
                                *(undefined2 *)((long)this + 0xf24) = 0;
                                *(undefined1 *)((long)this + 0xf26) = 0;
                                *(undefined1 *)((long)this + 0xf2c) = 0;
                                *(undefined4 *)((long)this + 0xf28) = 0;
                                *(undefined4 *)((long)this + 0xf30) = 0;
                                *(undefined1 *)((long)this + 0xf34) = 0;
                                *(undefined8 *)((long)this + 0xeb8) = 0;
                                *(undefined8 *)((long)this + 0x12a8) = 2;
                                appendLog(this,0x1c);
                                uVar6 = 1;
                                goto LAB_000228b1;
                              }
                              uVar10 = 0x220;
                              goto LAB_000222c0;
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      encodeFailureStack(this,uVar10);
      uVar6 = 0;
      (**(code **)(*(long *)this + 0x858))(this,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(*(undefined8 *)((long)this + 0x88));
      (**(code **)(*(long *)this + 0x5c8))(this,0);
      goto LAB_000228b1;
    }
    uVar10 = 0x203;
  }
LAB_000222c0:
  encodeFailureStack(this,uVar10);
  uVar6 = 0;
LAB_000228b1:
  if (*(long *)__got::___stack_chk_guard != local_30) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar6;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// IntelAccelerator::initIdVars()

void IntelAccelerator::initIdVars(void)

{
  g_kdctl = (undefined *)0x77777010;
  _DAT_00132f28 = 0x49;
  _DAT_00132f78 = 0x1f;
  _DAT_00133050 = 0xffffffffffffffff;
  _DAT_00133048 = 0xffffffffffffffff;
  _DAT_00133040 = 0xffffffffffffffff;
  _DAT_00133038 = 0xffffffffffffffff;
  _DAT_00133000 = 0xffffffffffffffff;
  _DAT_00133008 = 0xffffffffffffffff;
  _DAT_00133010 = 0xffffffffffffffff;
  _DAT_00133018 = 0xffffffffffffffff;
  return;
}



// IntelAccelerator::initializeLogging()

void IntelAccelerator::initializeLogging(void)

{
  return;
}



// IntelAccelerator::setInSimulator()

undefined8 __thiscall IntelAccelerator::setInSimulator(IntelAccelerator *this)

{
  int iVar1;
  undefined8 uVar2;
  ulong uVar3;
  char *pcVar4;
  char *param1;
  
  iVar1 = *(int *)(this + 0x1148);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffffffffdf |
       (ulong)(iVar1 == -0xfa7f7a || iVar1 == -0xfd7f7a) << 5;
  param1 = "Si";
  pcVar4 = "Si";
  if (iVar1 == -0xfa7f7a || iVar1 == -0xfd7f7a) {
    pcVar4 = "Pre-Si";
  }
  _IOLog("[IGPU] Detecting Pre-Si/Si Mode ... [%s]\n",pcVar4);
  if (((byte)this[0x11c0] & 0x20) != 0) {
    param1 = "Pre-Si";
  }
  uVar2 = _kprintf("[IGPU] Detecting Pre-Si/Si Mode ... [%s]\n",param1);
  uVar3 = CONCAT71((int7)((ulong)uVar2 >> 8),this[0x11c0]) & 0xffffffffffffff20;
  return CONCAT71((int7)(uVar3 >> 8),(byte)uVar3 >> 5);
}



// IntelAccelerator::registerWithFramebufferController()

undefined8 __thiscall IntelAccelerator::registerWithFramebufferController(IntelAccelerator *this)

{
  bool bVar1;
  int iVar2;
  undefined4 uVar3;
  OSDictionary *pOVar4;
  long *plVar5;
  undefined7 extraout_var;
  undefined8 uVar6;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  code *local_78;
  code *local_70;
  code *local_68;
  code *local_60;
  undefined8 local_58;
  undefined8 local_50;
  code *local_48;
  code *local_40;
  code *local_38;
  
  local_38 = (code *)0x0;
  local_40 = (code *)0x0;
  local_48 = (code *)0x0;
  local_50 = 0;
  local_58 = 0;
  local_60 = (code *)0x0;
  local_68 = (code *)0x0;
  local_70 = (code *)0x0;
  local_78 = (code *)0x0;
  *(undefined4 *)(this + 0x12b0) = 4;
  *(undefined8 *)(this + 0x13d0) = 0;
  *(undefined8 *)(this + 0x13d8) = 0;
  *(undefined8 *)(this + 0x13e0) = 0;
  *(undefined8 *)(this + 0x13e8) = 0;
  *(undefined8 *)(this + 0x13f0) = 0;
  pOVar4 = (OSDictionary *)
           IOService::serviceMatching("AppleIntelFramebufferController",(OSDictionary *)0x0);
  if (pOVar4 == (OSDictionary *)0x0) {
    uVar3 = 0x221;
  }
  else {
    local_90 = 0;
    local_88 = 0;
    local_80 = 0;
    _clock_get_uptime(&local_80);
    _absolutetime_to_nanoseconds(local_80,&local_90);
    plVar5 = (long *)IOService::waitForMatchingService(pOVar4,30000000000);
    _clock_get_uptime(&local_80);
    _absolutetime_to_nanoseconds(local_80,&local_88);
    (**(code **)(*(long *)pOVar4 + 0x28))(pOVar4);
    if (plVar5 == (long *)0x0) {
      this[0x12b4] = (IntelAccelerator)0x0;
      _IOLog("[IGPU] %s\n","Could not register with IOFB! Working standalone (IONDRVSupport)");
      *(undefined4 *)(this + 0x13c4) = 0x18000000;
      bVar1 = initLocalCallbackSupport(this);
      if (bVar1) {
        return CONCAT71(extraout_var,1);
      }
      uVar3 = 0x225;
    }
    else {
      iVar2 = (**(code **)(*plVar5 + 0x6b8))
                        (plVar5,_fSymFBCLASSGetRC6HandlingFunc,0,this,this + 0xdf8,0,0);
      if ((iVar2 == 0) && (*(long *)(this + 0xdf8) != 0)) {
        local_78 = _PAVPCommandCallback;
        local_70 = _PAVPCommandCallbackRecovery;
        local_68 = _DisplaySleepCallback;
        local_60 = _FlipCounterCallback;
        local_48 = _PMSetParamsCallback;
        local_40 = _PMGetUtilizationSnapshotCallback;
        local_38 = _ProcessNonDisplayInterruptsCallback;
        (**(code **)(*plVar5 + 0x6b8))
                  (plVar5,_fSymFBCLASSRegisterAccelerator,0,this,&local_78,this + 0x13c0,
                   this + 0x13d0);
        uVar3 = utilGetProperty<int>(plVar5,"NumFrameBuffer",0);
        *(undefined4 *)(this + 0x12b0) = uVar3;
        uVar6 = (**(code **)(*plVar5 + 0x28))(plVar5);
        this[0x12b4] = (IntelAccelerator)0x1;
        return CONCAT71((int7)((ulong)uVar6 >> 8),1);
      }
      uVar3 = 0x224;
    }
  }
  encodeFailureStack(this,uVar3);
  return 0;
}



// IntelAccelerator::initHardwareWorkarounds()

undefined8 __thiscall IntelAccelerator::initHardwareWorkarounds(IntelAccelerator *this)

{
  undefined8 uVar1;
  
  uVar1 = InitIclLpWaTable((byte *)(this + 0xf36),this + 0x1010,(ulong)*(uint *)(this + 0x1148),
                           (uint)*(ushort *)(this + 0x1140));
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IntelAccelerator::setInEmulator()

undefined8 __thiscall IntelAccelerator::setInEmulator(IntelAccelerator *this)

{
  uint uVar1;
  ulonglong uVar2;
  undefined8 uVar3;
  ulong uVar4;
  char *pcVar5;
  char *param1;
  bool bVar6;
  
  uVar2 = OSMetaClassBase::safeMetaCast
                    (*(OSMetaClassBase **)(this + 0x368),*(OSMetaClass **)__got::metaClass);
  IOPCIDevice::extendedConfigWrite32(uVar2,0xf8);
  uVar1 = IOPCIDevice::extendedConfigRead32(uVar2);
  bVar6 = (~uVar1 & 0xa0000000) == 0;
  param1 = "True";
  pcVar5 = "False";
  if (bVar6) {
    pcVar5 = "True";
  }
  *(ulong *)(this + 0x11c0) = (ulong)bVar6 << 6 | *(ulong *)(this + 0x11c0) & 0xffffffffffffffbf;
  _IOLog("[IGPU] Detecting Emulator Mode ... [%s]\n",pcVar5);
  if (((byte)this[0x11c0] & 0x40) == 0) {
    param1 = "False";
  }
  uVar3 = _kprintf("[IGPU] Detecting Emulator Mode ... [%s]\n",param1);
  uVar4 = CONCAT71((int7)((ulong)uVar3 >> 8),this[0x11c0]) & 0xffffffffffffff40;
  return CONCAT71((int7)(uVar4 >> 8),(byte)uVar4 >> 6);
}



// IOGraphicsAccelerator2::acceleratorLock()

void __thiscall IOGraphicsAccelerator2::acceleratorLock(IOGraphicsAccelerator2 *this)

{
  _OSIncrementAtomic(this + 0x90);
  _IOLockLock(*(undefined8 *)(this + 0x88));
  _OSDecrementAtomic(this + 0x90);
  IOGraphicsAccelerator2::lock_busy();
                    // WARNING: Could not recover jumptable at 0x00022d9d. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x850))(this,"",0);
  return;
}



// IntelAccelerator::initInterruptBridge()

ulong __thiscall IntelAccelerator::initInterruptBridge(IntelAccelerator *this)

{
  OSDictionary *pOVar1;
  long *plVar2;
  long *plVar3;
  IGInterruptBridge *pIVar4;
  ulong uVar5;
  undefined4 uVar6;
  
  if (this[0x12b4] == (IntelAccelerator)0x0) {
    plVar3 = (long *)0x0;
LAB_00022e12:
    pIVar4 = IGInterruptBridge::interruptBridge(this,(long)plVar3);
    *(IGInterruptBridge **)(this + 0x1278) = pIVar4;
    if (pIVar4 != (IGInterruptBridge *)0x0) {
      uVar5 = CONCAT71((int7)((ulong)this >> 8),1);
      if (plVar3 != (long *)0x0) {
        (**(code **)(*plVar3 + 0x28))(plVar3);
      }
      goto LAB_00022e67;
    }
    uVar6 = 0x206;
  }
  else {
    pOVar1 = (OSDictionary *)
             IOService::serviceMatching("AppleIntelFramebufferController",(OSDictionary *)0x0);
    if (pOVar1 == (OSDictionary *)0x0) {
      uVar6 = 0x221;
    }
    else {
      plVar2 = (long *)IOService::getMatchingServices(pOVar1);
      if (plVar2 != (long *)0x0) {
        plVar3 = (long *)(**(code **)(*plVar2 + 0x128))(plVar2);
        if (plVar3 != (long *)0x0) {
          (**(code **)(*plVar3 + 0x20))(plVar3);
        }
        (**(code **)(*plVar2 + 0x28))(plVar2);
        (**(code **)(*(long *)pOVar1 + 0x28))(pOVar1);
        goto LAB_00022e12;
      }
      (**(code **)(*(long *)pOVar1 + 0x28))(pOVar1);
      uVar6 = 0x222;
    }
  }
  encodeFailureStack(this,uVar6);
  uVar5 = 0;
LAB_00022e67:
  return uVar5 & 0xffffffff;
}



// IntelAccelerator::telemetryCreateManager(unsigned int)

undefined8 __thiscall
IntelAccelerator::telemetryCreateManager(IntelAccelerator *this,undefined4 param_1)

{
  IGTelemetryManager *this_00;
  long lVar1;
  IGVector<> *this_01;
  uint64_t uVar2;
  IGTelemetryUsage *pIVar3;
  undefined8 uVar4;
  undefined8 *puVar5;
  
  if (*(long *)(this + 0xf18) == 0) {
    this_00 = (IGTelemetryManager *)_IOMallocTypeImpl(IGTelemetryManager::operator_new);
    *(undefined ***)this_00 = &__const::~IGTelemetryManager;
    this_00[8] = (IGTelemetryManager)0x0;
    lVar1 = 0x18;
    do {
      *(undefined8 *)(this_00 + lVar1) = 0;
      lVar1 = lVar1 + 8;
    } while (lVar1 != 0x218);
    *(undefined8 *)(this_00 + 0x268) = 0;
    *(undefined4 *)(this_00 + 0x27c) = 0;
    *(undefined8 *)(this_00 + 0x288) = 0;
    *(undefined8 *)(this_00 + 0x2a8) = 0;
    *(undefined4 *)(this_00 + 0x2b0) = 0;
    *(undefined8 *)(this_00 + 0x2b8) = 0;
    *(undefined8 *)(this_00 + 0x2c0) = 0;
    *(undefined4 *)(this_00 + 0x2c8) = 0;
    *(undefined4 *)(this_00 + 0x330) = 0xffffffc0;
    *(undefined8 *)(this_00 + 0x2d8) = 0;
    *(undefined8 *)(this_00 + 0x2e0) = 0;
    *(undefined8 *)(this_00 + 0x2e8) = 0;
    *(undefined8 *)(this_00 + 0x2f0) = 0;
    *(undefined8 *)(this_00 + 0x2f8) = 0;
    *(undefined8 *)(this_00 + 0x300) = 0;
    *(undefined8 *)(this_00 + 0x308) = 0;
    *(undefined8 *)(this_00 + 0x310) = 0;
    *(undefined4 *)(this_00 + 0x328) = 0;
    *(undefined8 *)(this_00 + 800) = 0;
    *(undefined8 *)(this_00 + 0x318) = 0;
    *(undefined ***)(this_00 + 0x340) = &__const::~IGHashTable;
    *(undefined8 *)(this_00 + 0x350) = 0;
    *(undefined8 *)(this_00 + 0x358) = 0;
    this_00[0x360] = (IGTelemetryManager)0x1;
    this_01 = (IGVector<> *)
              _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
    IGVector<>::IGVector(this_01,0x10);
    *(IGVector<> **)(this_00 + 0x348) = this_01;
    if ((this_01 != (IGVector<> *)0x0) && (lVar1 = *(long *)(this_01 + 8), lVar1 != 0)) {
      puVar5 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar5 = 0;
        puVar5[1] = puVar5;
        puVar5[2] = 0;
        puVar5 = puVar5 + 3;
        lVar1 = lVar1 + -1;
      } while (lVar1 != 0);
    }
    *(undefined8 *)(this_00 + 0x368) = 0;
    *(undefined8 *)(this_00 + 600) = 0;
    *(undefined8 *)(this_00 + 0x260) = 0;
    *(undefined8 *)(this_00 + 0x270) = 0;
    *(undefined4 *)(this_00 + 0x278) = 0;
    *(undefined4 *)(this_00 + 0x280) = 0;
    *(undefined8 *)(this_00 + 0x288) = 0;
    *(undefined2 *)(this_00 + 0x290) = 0;
    *(undefined8 *)(this_00 + 0x298) = 0;
    *(undefined8 *)(this_00 + 0x240) = 0;
    *(undefined8 *)(this_00 + 0x248) = 0;
    *(undefined4 *)(this_00 + 0xc) = 0;
    uVar2 = _mach_absolute_time();
    *(uint64_t *)(this_00 + 0x218) = uVar2;
    *(undefined8 *)(this_00 + 0x230) = 1;
    *(undefined8 *)(this_00 + 0x238) = 0;
    *(undefined8 *)(this_00 + 0x2d0) = 0xfffffffffffffffe;
    this_00[0x338] = (IGTelemetryManager)0x0;
    *(IGTelemetryManager **)(this + 0xf18) = this_00;
    IGTelemetryManager::initWithAccelerator(this_00,this,param_1);
  }
  lVar1 = 0;
  do {
    pIVar3 = IGTelemetryUsage::withAcceleratorAndStampIndex((long)this,(int)lVar1);
    *(IGTelemetryUsage **)(*(long *)(this + 0xf18) + 0x18 + lVar1 * 8) = pIVar3;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x40);
  uVar4 = IGTelemetryManager::prepareTelemetry(*(IGTelemetryManager **)(this + 0xf18),1);
  return CONCAT71((int7)((ulong)uVar4 >> 8),1);
}



// IntelAccelerator::initHardwareStatusPageMemory()

ulong __thiscall IntelAccelerator::initHardwareStatusPageMemory(IntelAccelerator *this)

{
  IGSharedMappedBuffer *this_00;
  long lVar1;
  ulong uVar2;
  undefined8 unaff_RBX;
  ulong uVar3;
  ulong uVar4;
  
  uVar4 = *(ulong *)(this + 0x1340);
  uVar3 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
  if (uVar4 != 0) {
    lVar1 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
      }
    }
    do {
      uVar4 = lVar1 + 1;
      this_00 = IGSharedMappedBuffer::withOptions(*(long *)(this + 0x150),0x1000,3,0);
      if (this_00 == (IGSharedMappedBuffer *)0x0) {
        *(undefined8 *)(this + uVar4 * 8 + 0x1408) = 0;
        uVar3 = 0;
        break;
      }
      lVar1 = IGSharedMappedBuffer::getVirtualAddress(this_00);
      *(undefined4 *)(lVar1 + 0xbc) = 7;
      *(IGSharedMappedBuffer **)(this + uVar4 * 8 + 0x1408) = this_00;
      if (4 < uVar4) break;
      uVar2 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >> ((byte)uVar4 & 0x3f))
              << ((byte)uVar4 & 0x3f);
      lVar1 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
        }
      }
      lVar1 = (uVar4 & 0xffffffffffffffc0) + lVar1;
    } while (uVar2 != 0);
  }
  return uVar3 & 0xffffffff;
}



// IntelAccelerator::initPerContextBatchBuffer()

undefined1 IntelAccelerator::initPerContextBatchBuffer(void)

{
  return 1;
}



// IntelAccelerator::initIndirectContextBatchBuffer()

bool __thiscall IntelAccelerator::initIndirectContextBatchBuffer(IntelAccelerator *this)

{
  IGSharedMappedBuffer *this_00;
  undefined8 *puVar1;
  ulong uVar2;
  undefined8 *puVar3;
  bool bVar4;
  
  if (((*(uint *)(this + 0x1002) >> 0x1a & 1) != 0) ||
     (bVar4 = true, ((byte)this[0x11c2] & 0x10) == 0)) {
    this_00 = IGSharedMappedBuffer::withOptions
                        (*(long *)(this + 0x150),*(ulonglong *)__got::_page_size,2,0);
    *(IGSharedMappedBuffer **)(this + 0x1400) = this_00;
    if (this_00 != (IGSharedMappedBuffer *)0x0) {
      puVar1 = (undefined8 *)IGSharedMappedBuffer::getVirtualAddress(this_00);
      puVar3 = puVar1;
      if (((byte)this[0x11c2] & 0x10) != 0) {
        uVar2 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(this + 0x150));
        *puVar1 = 0x21f012400002;
        puVar1[1] = uVar2 & 0xfffffffffffffffc;
        puVar1[3] = 0;
        puVar1[4] = 0;
        puVar1[2] = 0x1010217a000004;
        *(undefined4 *)(puVar1 + 3) = 0;
        puVar1[6] = 0;
        puVar1[7] = 0;
        puVar1[5] = 0x80000007a000004;
        *(undefined4 *)(puVar1 + 6) = 0;
        puVar1[8] = 0x21f014c00002;
        puVar1[9] = uVar2 & 0xfffffffffffffffc;
        puVar3 = puVar1 + 10;
      }
      *(uint *)(this + 0x1408) =
           (int)((ulong)((long)puVar3 - (long)puVar1) >> 2) + 0x3fU & 0xffffffc0;
    }
    bVar4 = this_00 != (IGSharedMappedBuffer *)0x0;
  }
  return bVar4;
}



// IntelAccelerator::initVideoPerfCapability()

bool __thiscall IntelAccelerator::initVideoPerfCapability(IntelAccelerator *this)

{
  long lVar1;
  
  *(undefined8 *)(this + 0x1438) = 0x1000000000;
  lVar1 = _IOLockAlloc();
  *(long *)(this + 0x1440) = lVar1;
  return lVar1 != 0;
}



// IntelAccelerator::setAsyncSliceCount(IGSliceConfig)

void __thiscall IntelAccelerator::setAsyncSliceCount(IntelAccelerator *this,uint param_1)

{
  uint uVar1;
  
  uVar1 = 1;
  if ((char)param_1 != '\x01') {
    uVar1 = (uint)((char)param_1 == '\x02') * 2;
  }
  switch(param_1 >> 0x10 & 0xff) {
  case 1:
    uVar1 = uVar1 | 0x100;
    break;
  case 2:
    uVar1 = uVar1 | 0x200;
    break;
  case 3:
    uVar1 = uVar1 | 0x300;
    break;
  case 4:
    uVar1 = uVar1 | 0x400;
  }
  switch(param_1 >> 8 & 0xff) {
  case 2:
    uVar1 = uVar1 | 0x20;
    break;
  case 4:
    uVar1 = uVar1 | 0x40;
    break;
  case 6:
    uVar1 = uVar1 | 0x60;
    break;
  case 8:
    uVar1 = uVar1 | 0x80;
  }
  *(uint *)(this + 0x12c8) = param_1;
  SafeForceWake(this,1,4);
  *(uint *)(*(long *)(this + 0x1270) + 0xa204) = uVar1;
  SafeForceWake(this,0,4);
  return;
}



// IntelAccelerator::startGraphicsEngine()

ulong __thiscall
IntelAccelerator::startGraphicsEngine
          (undefined8 param_1,double param_2,ulong param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this)

{
  uint *puVar1;
  float fVar2;
  char cVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined8 uVar7;
  IGHardwareContext *pIVar8;
  IGHardwareContext *this_00;
  long lVar9;
  ulong *puVar10;
  uint uVar11;
  uint uVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined4 uVar13;
  char *pcVar14;
  char *in_R9;
  ulong uVar15;
  ulong uVar16;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 local_50;
  undefined4 local_48;
  uint *local_40;
  uint local_38;
  uint local_34;
  
  *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) | 0x20;
  SafeForceWake(this,1,7);
  *(undefined4 *)(*(long *)((long)this + 0x1270) + 0x7000) = 0x40000;
  initModeRegisters(this);
  initHardwareStatusPageRegisters(this);
  uVar11 = *(uint *)((long)this + 0x11c0) >> 0x1e & 0xfffffffe ^ 0x60002;
  lVar9 = *(long *)((long)this + 0x1270);
  *(undefined4 *)(lVar9 + 0x20ec) = 0x10001;
  *(uint *)(lVar9 + 0x20e4) = uVar11;
  *(undefined4 *)(lVar9 + 0x20e0) = 0x40004000;
  *(uint *)(lVar9 + 0x2580) = uVar11 | 0x10001;
  *(uint *)(lVar9 + 0x2214) = (uint)*(ushort *)((long)this + 0x11c8);
  local_40 = (uint *)((long)this + 0xfda);
  uVar15 = *(ulong *)((long)this + 0xff2);
  if (((uint)uVar15 >> 0x13 & 1) == 0) {
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
  }
  else {
    *(uint *)(lVar9 + 0xb004) = *(uint *)(lVar9 + 0xb004) & 0xffffff80 | 1;
    *(uint *)(lVar9 + 0xb404) = *(uint *)(lVar9 + 0xb404) & 0xfffff01f | 0x20;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x12 & 1) != 0) {
    *(uint *)(lVar9 + 0xb004) = *(uint *)(lVar9 + 0xb004) | 0xfc00000;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar15 >> 0x34 & 1) != 0) {
    *(uint *)(lVar9 + 0x7304) = *(uint *)(lVar9 + 0x7304) | 0x8000800;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  pcVar14 = (char *)((ulong)(uVar11 & 0x8000) | uVar15 & 0x80000000000);
  if (pcVar14 != (char *)0x0) {
    *(undefined4 *)(IGAccelTraceStreamManager::disableCollection + lVar9 + 6) = 0x200020;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar11 >> 0x16 & 1) != 0) {
    *(uint *)(lVar9 + 0xb114) = *(uint *)(lVar9 + 0xb114) | 0x10000000;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x14 & 1) != 0) {
    *(uint *)(lVar9 + 0xb118) = *(uint *)(lVar9 + 0xb118) | 0x40;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)((long)this + 0xffa);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar11 >> 0x13 & 1) != 0) {
    *(uint *)(IGVector<>::grow + lVar9 + 4) = *(uint *)(IGVector<>::grow + lVar9 + 4) | 0x80000000;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar16 >> 0x26 & 1) != 0) {
    *(uint *)(IGVector<>::grow + lVar9 + 4) = *(uint *)(IGVector<>::grow + lVar9 + 4) | 0x40000000;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x16 & 1) != 0) {
    *(uint *)(lVar9 + 0xb43c) = *(uint *)(lVar9 + 0xb43c) | 0x280;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x11 & 1) != 0) {
    *(uint *)(lVar9 + 0x4b80) = *(uint *)(lVar9 + 0x4b80) | 0x1001;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x1c & 1) != 0) {
    *(uint *)(lVar9 + 0x20d4) = *(uint *)(lVar9 + 0x20d4) | 0x800080;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if (((uint)uVar15 >> 0x17 & 1) != 0) {
    *(uint *)(lVar9 + 0xb0a0) = *(uint *)(lVar9 + 0xb0a0) | 0x700000;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar15 >> 0x2d & 1) != 0) {
    *(uint *)(lVar9 + 0x902c) = *(uint *)(lVar9 + 0x902c) & 0xfffffc07 | 0x240;
  }
  if ((*(uint *)((long)this + 0xf8a) >> 0xc & 1) != 0) {
    *(uint *)(lVar9 + 0x20a0) = *(uint *)(lVar9 + 0x20a0) & 0xffff7fff;
  }
  if ((*(uint *)((long)this + 0xf6a) >> 0x13 & 1) != 0) {
    *(uint *)(lVar9 + 0x7004) = *(uint *)(lVar9 + 0x7004) | 0x400040;
  }
  if (((*(ulong *)((long)this + 0xfc6) >> 0x34 & 1) != 0) ||
     ((*(ulong *)((long)this + 0xfea) & 0x100000000) != 0)) {
    uVar11 = *(uint *)(lVar9 + 0x4a08) | 0x2000200;
    if ((*(ulong *)((long)this + 0xfc6) >> 0x34 & 1) == 0) {
      uVar11 = *(uint *)(lVar9 + 0x4a08);
    }
    uVar5 = uVar11 | 0x4000400;
    if ((*(ulong *)((long)this + 0xfea) >> 0x20 & 1) == 0) {
      uVar5 = uVar11;
    }
    *(uint *)(lVar9 + 0x4a08) = uVar5;
  }
  if (((uint)*(undefined8 *)((long)this + 0xf96) >> 8 & 1) != 0) {
    *(uint *)(lVar9 + 0x4ab8) = *(uint *)(lVar9 + 0x4ab8) | 0x80000000;
  }
  if (((uint)*(undefined8 *)((long)this + 0xfa6) >> 0x1a & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x2090) = 0x60004;
  }
  *(undefined4 *)(lVar9 + 0x2090) = 0x200020;
  if ((*(uint *)((long)this + 0xffa) >> 8 & 1) != 0) {
    *(undefined4 *)(IGStolenMemoryDescriptor::free + lVar9 + 4) = 0x20002;
  }
  if ((*(byte *)((long)this + 0xfaa) & 4) != 0) {
    *(undefined4 *)(IGStolenMemoryDescriptor::free + lVar9 + 4) = 0x200020;
  }
  if ((*local_40 >> 0x1e & 1) != 0) {
    *(undefined4 *)(IGStolenMemoryDescriptor::free + lVar9 + 4) = 0x80008;
  }
  uVar15 = *(ulong *)((long)this + 0xfa6);
  if ((uVar15 >> 0x23 & 1) != 0) {
    *(undefined4 *)(IGStolenMemoryDescriptor::free + lVar9 + 4) = 0x2000200;
    uVar15 = *(ulong *)((long)this + 0xfa6);
  }
  uVar16 = *(ulong *)((long)this + 0xf96);
  if (((uVar15 >> 0x24 & 1) != 0) && (2 < *(uint *)((long)this + 0x1190))) {
    *(undefined4 *)(IGStolenMemoryDescriptor::free + lVar9 + 4) = 0x1000100;
    uVar16 = *(ulong *)((long)this + 0xf96);
  }
  if ((uVar16 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe4f4) = 0x1000100;
  }
  if ((*(uint *)((long)this + 0xff2) >> 0x15 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe4f4) = 0x20002;
  }
  if ((*(byte *)((long)this + 0xfaa) & 1) != 0) {
    uVar11 = *(uint *)(lVar9 + 0x9120);
    uVar5 = *(uint *)(lVar9 + 0xfdc);
    uVar4 = uVar11 >> 0x19 & 7;
    if (uVar4 < 8) {
      if ((0xaaU >> uVar4 & 1) == 0) {
        if ((0x44U >> uVar4 & 1) == 0) {
          if (uVar4 != 4) goto LAB_000237ba;
          uVar4 = uVar5 & 0x87ffffff | 0x10000000;
        }
        else {
          uVar4 = uVar5 & 0x87ffffff | 0x8000000;
        }
      }
      else {
        uVar4 = uVar5 & 0x87ffffff;
      }
    }
    else {
LAB_000237ba:
      encodeFailureStack(this,0x226);
      uVar4 = uVar5;
    }
    uVar12 = uVar4;
    if (*(int *)((long)this + 0x1190) == 1) {
      uVar12 = (uVar4 & 0xf8ffffff) + 0x1000000;
      if ((uVar11 & 0xe00000) != 0x200000) {
        uVar12 = uVar4 & 0xf8ffffff;
      }
    }
    lVar9 = *(long *)((long)this + 0x1270);
    if ((uVar12 | 0x80000000) == uVar5) {
      *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::MetaClass + lVar9 + 4) =
           *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::MetaClass + lVar9 + 4) & 0xff0fffff
           | 0x800000;
    }
    else {
      *(uint *)(lVar9 + 0xfdc) = uVar12 | 0x80000000;
      *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::MetaClass + lVar9 + 4) =
           *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::MetaClass + lVar9 + 4) & 0xff0fffff
           | 0x800000;
      *(uint *)(lVar9 + 0xfdc) = uVar5;
    }
  }
  if ((*(ulong *)((long)this + 0xf62) >> 0x34 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x7010) = 0x20002000;
  }
  if ((*local_40 >> 0x18 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe194) = 0x100010;
  }
  if (((uint)*(undefined8 *)((long)this + 0xfa6) >> 0x19 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe184) = 0x20002;
  }
  uVar15 = *(ulong *)((long)this + 0xf8e);
  uVar16 = *(ulong *)((long)this + 0xf96);
  if ((uVar15 >> 0x35 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe184) = 0x100010;
    uVar15 = *(ulong *)((long)this + 0xf8e);
    uVar16 = *(ulong *)((long)this + 0xf96);
  }
  if ((uVar15 >> 0x38 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x4ab8) = 0x1000000;
    uVar15 = *(ulong *)((long)this + 0xf8e);
    uVar16 = *(ulong *)((long)this + 0xf96);
  }
  if ((uVar15 >> 0x3c & 1) != 0) {
    *(undefined4 *)(IGAccelTraceStreamManager::turnOn + lVar9 + 2) = 0x1000100;
    uVar15 = *(ulong *)((long)this + 0xf8e);
    uVar16 = *(ulong *)((long)this + 0xf96);
  }
  if ((uVar15 >> 0x3a & 1) != 0) {
    *(undefined4 *)(IGAccelTraceStreamManager::turnOn + lVar9 + 2) = 0x10001;
    uVar16 = *(ulong *)((long)this + 0xf96);
  }
  if ((uVar16 & 0x10) != 0) {
    *(uint *)(lVar9 + 0x94d4) = *(uint *)(lVar9 + 0x94d4) | 0x400;
  }
  if ((*(uint *)((long)this + 0x100a) >> 0xc & 1) != 0) {
    *(uint *)(lVar9 + 0x94d4) = *(uint *)(lVar9 + 0x94d4) | 0x30000;
  }
  if (((uint)*(undefined8 *)((long)this + 0xffa) >> 0x15 & 1) != 0) {
    *(uint *)(lVar9 + 0x9524) = *(uint *)(lVar9 + 0x9524) | 0x10000;
  }
  uVar15 = *(ulong *)((long)this + 0xfa6);
  if (((uint)uVar15 >> 0x1d & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xb120) = 0x2400;
    *(undefined4 *)(lVar9 + 0xb120) = 0xffffe7ff;
    uVar15 = *(ulong *)((long)this + 0xfa6);
  }
  if ((uVar15 >> 0x29 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x83a4) = 0xffff0020;
  }
  uVar15 = *(ulong *)((long)this + 0xfe2);
  if ((uVar15 >> 0x20 & 1) == 0) {
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)local_40;
  }
  else {
    *(undefined4 *)(lVar9 + 0xe188) = 0x80008;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)local_40;
    uVar15 = *(ulong *)((long)this + 0xfe2);
  }
  if ((uVar15 >> 0x26 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe180) = 0x20002000;
    uVar16 = *(ulong *)((long)this + 0x1002);
    uVar11 = (uint)*(undefined8 *)local_40;
    uVar15 = *(ulong *)((long)this + 0xfe2);
  }
  iVar6 = (int)uVar15;
  if ((uVar11 >> 0xf & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xb100) = 0x784000;
    uVar16 = *(ulong *)((long)this + 0x1002);
    iVar6 = (int)*(undefined8 *)((long)this + 0xfe2);
  }
  if (iVar6 < 0) {
    *(uint *)(lVar9 + 0xb11c) = *(uint *)(lVar9 + 0xb11c) | 4;
    uVar16 = *(ulong *)((long)this + 0x1002);
  }
  if ((uVar16 >> 0x22 & 1) != 0) {
    *(uint *)(lVar9 + 0x9434) = *(uint *)(lVar9 + 0x9434) | 0x100;
    uVar16 = *(ulong *)((long)this + 0x1002);
  }
  if ((uVar16 >> 0x23 & 1) != 0) {
    *(uint *)(lVar9 + 0x9434) = *(uint *)(lVar9 + 0x9434) | 8;
  }
  if ((*(byte *)((long)this + 0xfac) & 2) != 0) {
    *(undefined4 *)(lVar9 + 0x9434) = 0x20000000;
  }
  if ((*(ulong *)((long)this + 0x1002) >> 0x20 & 1) != 0) {
    *(uint *)(lVar9 + 0x94e4) = *(uint *)(lVar9 + 0x94e4) | 0x20;
  }
  uVar15 = *(ulong *)((long)this + 0xff2);
  if (((uint)*(undefined8 *)((long)this + 0xffa) >> 0x18 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x2050) = 0x90809080;
    uVar15 = *(ulong *)((long)this + 0xff2);
  }
  if ((uVar15 >> 0x33 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0x7308) = 0x8000800;
  }
  if ((*(byte *)((long)this + 0xf93) & 2) != 0) {
    *(undefined4 *)(lVar9 + 0xb120) = 0xfffffffd;
  }
  if ((*(byte *)((long)this + 0xf36) & 4) != 0) {
    *(undefined4 *)(lVar9 + 0x4dd4) = 0x67f1427f;
  }
  if ((*(ulong *)((long)this + 0xffa) >> 0x2b & 1) != 0) {
    *(uint *)(lVar9 + 0x9560) = *(uint *)(lVar9 + 0x9560) | 8;
  }
  if ((*(uint *)((long)this + 0x100a) >> 0x10 & 1) != 0) {
    *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::~MetaClass + lVar9 + 6) =
         *(uint *)(IGHardwarePerProcessPageTable64::MetaClass::~MetaClass + lVar9 + 6) & 0xfff7ffff;
  }
  *(undefined4 *)(lVar9 + 0x20d8) = 0x100010;
  uVar15 = *(ulong *)((long)this + 0xfb2);
  if ((uVar15 >> 0x33 & 1) != 0) {
    *(uint *)(lVar9 + 0x42080) = *(uint *)(lVar9 + 0x42080) | 0x8000;
    uVar15 = *(ulong *)((long)this + 0xfb2);
  }
  if ((uVar15 >> 0x32 & 1) != 0) {
    *(uint *)(IGAccelTraceStreamManager::turnOn + lVar9 + 2) =
         *(uint *)(IGAccelTraceStreamManager::turnOn + lVar9 + 2) | 0x20002000;
    *(uint *)(lVar9 + 0xe194) = *(uint *)(lVar9 + 0xe194) | 0x1000100;
    *(uint *)(lVar9 + 0x4ddc) = *(uint *)(lVar9 + 0x4ddc) | 0x88000000;
    uVar15 = *(ulong *)((long)this + 0xfb2);
  }
  if ((uVar15 >> 0x35 & 1) != 0) {
    *(uint *)(lVar9 + 0x4ab0) = *(uint *)(lVar9 + 0x4ab0) | 0x40000;
    uVar15 = *(ulong *)((long)this + 0xfb2);
  }
  if ((uVar15 >> 0x36 & 1) != 0) {
    *(undefined4 *)(lVar9 + 0xe194) = 0x20002;
  }
  if ((*(uint *)((long)this + 0x100a) >> 0xf & 1) != 0) {
    *(uint *)(lVar9 + 0x20a0) = *(uint *)(lVar9 + 0x20a0) | 0x80000;
  }
  if (*(long *)((long)this + 0xffa) < 0) {
    *(uint *)(lVar9 + 0xe18c) = *(uint *)(lVar9 + 0xe18c) | 0x200020;
  }
  uVar11 = utilGetProperty<>(this,"SamplerDataFetchThrottle",0);
  uVar5 = utilGetProperty<>(this,"SamplerPipeThrottle",0);
  local_34 = utilGetProperty<>(this,"PixelBackendThrottle",0);
  local_38 = utilGetProperty<>(this,"EUThrottle",0);
  if (uVar11 != 0) {
    uVar4 = 7;
    if (uVar11 < 7) {
      uVar4 = uVar11;
    }
    param_2 = 100.0;
    fVar2 = 100.0 / (float)(int)(uVar4 + 1);
    *(uint *)(*(long *)((long)this + 0x1270) + 0xe184) = uVar4 << 0xd | 0xe0000000;
    uVar15 = (ulong)fVar2;
    param_3 = (ulong)(uint)(float)(uVar15 & 0xffffffff);
    uVar16 = (ulong)((fVar2 - (float)(uVar15 & 0xffffffff)) * 100.0);
    _IOLog("[IGPU] Sampler Data Fetch Throttling: %u.%u%% stall\n",uVar15 & 0xffffffff,
           uVar16 & 0xffffffff);
    _kprintf("[IGPU] Sampler Data Fetch Throttling: %u.%u%% stall\n",(uint)uVar15,(uint)uVar16);
  }
  if (uVar5 != 0) {
    uVar11 = 7;
    if (uVar5 < 7) {
      uVar11 = uVar5;
    }
    param_2 = 100.0;
    fVar2 = 100.0 / (float)(int)(uVar11 + 1);
    *(uint *)(*(long *)((long)this + 0x1270) + 0xe184) = uVar11 << 10 | 0x1c000000;
    uVar15 = (ulong)fVar2;
    param_3 = (ulong)(uint)(float)(uVar15 & 0xffffffff);
    uVar16 = (ulong)((fVar2 - (float)(uVar15 & 0xffffffff)) * 100.0);
    _IOLog("[IGPU] Sampler Pipe Throttling: %u.%u%% stall\n",uVar15 & 0xffffffff,uVar16 & 0xffffffff
          );
    _kprintf("[IGPU] Sampler Pipe Throttling: %u.%u%% stall\n",(uint)uVar15,(uint)uVar16);
  }
  if (local_34 != 0) {
    uVar11 = 2;
    if (local_34 < 2) {
      uVar11 = local_34;
    }
    *(uint *)(IGAccelTraceStreamManager::turnOn + *(long *)((long)this + 0x1270) + 2) =
         uVar11 << 0xe | 0xc0000000;
    uVar11 = uVar11 * 100 + 100 >> 2;
    _IOLog("[IGPU] Pixel Backed Throttling: %u%% stall\n",uVar11);
    _kprintf("[IGPU] Pixel Backed Throttling: %u%% stall\n",uVar11);
  }
  if (local_38 != 0) {
    uVar11 = 7;
    if (local_38 < 7) {
      uVar11 = local_38;
    }
    fVar2 = (8.0 - (float)(int)uVar11) * 100.0 * 0.125;
    *(uint *)(IGStolenMemoryDescriptor::free + *(long *)((long)this + 0x1270) + 4) =
         uVar11 * 4 | 0x1c0000;
    uVar15 = (ulong)fVar2;
    param_3 = (ulong)(uint)(float)(uVar15 & 0xffffffff);
    param_2 = (double)(fVar2 - (float)(uVar15 & 0xffffffff)) * 100.0;
    uVar16 = (ulong)param_2;
    _IOLog("[IGPU] EU Throttling: %u.%u%% Instruction Issue\n",uVar15 & 0xffffffff,
           uVar16 & 0xffffffff);
    _kprintf("[IGPU] EU Throttling: %u.%u%% Instruction Issue\n",(uint)uVar15,(uint)uVar16);
  }
  puVar1 = (uint *)(*(long *)((long)this + 0x1270) + 0xe18c);
  *puVar1 = *puVar1 | 0x80008000;
  (**(code **)(**(long **)((long)this + 0x1290) + 0x120))();
  cVar3 = IGScheduler::schedulerType((byte)(*(uint *)((long)this + 0x11c0) >> 0x16) & 7);
  if ((cVar3 == '\x02') &&
     (uVar7 = IGScheduler::initFirmware(*(IGScheduler **)((long)this + 0x1280)), (int)uVar7 != 0)) {
    _IOLog("[IGPU] Failed to initialize graphics firmware.\n");
    _kprintf("[IGPU] Failed to initialize graphics firmware.\n");
    *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) & 0xdf;
    uVar13 = 0x227;
  }
  else {
    IGInterruptBridge::enable(*(IGInterruptBridge **)((long)this + 0x1278));
    IOGraphicsAccelerator2::enableAccelerator();
    (**(code **)(**(long **)((long)this + 0x380) + 0x140))
              (*(long **)((long)this + 0x380),&DAT_000011d8 + (long)this);
    (**(code **)(**(long **)((long)this + 0x380) + 0x140))
              (*(long **)((long)this + 0x380),&DAT_00001218 + (long)this);
    iVar6 = utilGetProperty<>(this,"DisableBA",0);
    if (iVar6 == 1) {
      *(undefined4 *)(*(long *)((long)this + 0x1270) + 0x5588) = 0x40004000;
    }
    if (*(long *)((long)this + 0x1298) != 0) {
LAB_00023ec9:
      if (((*(byte *)((long)this + 0x1340) & 2) != 0) && (*(long *)((long)this + 0x12a0) == 0)) {
        local_48 = 0;
        local_50 = 0x100010001;
        pIVar8 = IGHardwareContext::withOptions(*(long *)((long)this + 0x150),&local_50,2);
        *(IGHardwareContext **)((long)this + 0x12a0) = pIVar8;
        if (pIVar8 == (IGHardwareContext *)0x0) {
          *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) & 0xdf;
          SafeForceWake(this,0,7);
          uVar13 = 0x21c;
          goto LAB_0002423e;
        }
      }
      populateResetRegisterList(this);
      uVar7 = SafeForceWake(this,0,7);
      PAVPCommandCallback(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,3,0,
                          (undefined8 *)0x0,'\0');
      IGGarbageCollector::enable(*(IGGarbageCollector **)((long)this + 0x1288));
      *(undefined4 *)((long)this + 0x11a4) = *(undefined4 *)((long)this + 0x1470);
      *(byte *)((long)this + 0x11b8) =
           *(byte *)((long)this + 0x11b8) & 0xfe | *(byte *)(*(long *)((long)this + 0x1290) + 0x20);
      IGAccelTraceStreamManager::enableCollection
                ((IGAccelTraceStreamManager *)((long)this + 0xe18),0);
      *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) & 0xdf;
      uVar15 = CONCAT71((int7)((ulong)((long)this + 0xe18) >> 8),1);
      goto LAB_00024243;
    }
    lVar9 = *(long *)((long)this + 0x1270);
    uVar7 = 0;
    *(undefined4 *)(lVar9 + 0x23a8) = 0;
    *(undefined4 *)(lVar9 + 0x223a8) = 0;
    *(undefined4 *)(lVar9 + 0x1c03a8) = 0;
    *(undefined4 *)(lVar9 + 0x1d03a8) = 0;
    *(undefined4 *)(lVar9 + 0x1c83a8) = 0;
    pIVar8 = IGHardwareContext::withOptions
                       (*(long *)((long)this + 0x150),
                        (undefined8 *)&g_cInitGfxHwCtxParamsForGraphics,2);
    if (pIVar8 == (IGHardwareContext *)0x0) {
      *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) & 0xdf;
      SafeForceWake(this,0,7);
      uVar13 = 0x216;
    }
    else {
      this_00 = IGHardwareContext::withOptions
                          (*(long *)((long)this + 0x150),
                           (undefined8 *)&g_cInitGfxHwCtxParamsForGraphics,2);
      if (this_00 != (IGHardwareContext *)0x0) {
        local_50 = 0xe5f411000001;
        local_48 = 0x100010;
        IGHardwareRingBuffer::waitForSpace
                  (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(*(long *)(pIVar8 + 0xb0) + 0x130),3,extraout_RDX,uVar7,pcVar14,in_R9);
        IGHardwareRingBuffer::writeBuffer
                  (*(IGHardwareRingBuffer **)(*(long *)(pIVar8 + 0xb0) + 0x130),(long)&local_50,3);
        if ((local_40[10] >> 0x11 & 1) != 0) {
          local_50 = 0x730411000001;
          local_48 = 0xc000c0;
          IGHardwareRingBuffer::waitForSpace
                    (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     *(void **)(*(long *)(pIVar8 + 0xb0) + 0x130),3,extraout_RDX_00,uVar7,pcVar14,
                     in_R9);
          IGHardwareRingBuffer::writeBuffer
                    (*(IGHardwareRingBuffer **)(*(long *)(pIVar8 + 0xb0) + 0x130),(long)&local_50,3)
          ;
        }
        uVar7 = (**(code **)(**(long **)(pIVar8 + 0xb0) + 0x148))();
        IGAccelFIFOChannel::submitStampCommand
                  (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(pIVar8 + 0xb0));
        uVar7 = (**(code **)(**(long **)(this_00 + 0xb0) + 0x148))();
        IGAccelFIFOChannel::submitStampCommand
                  (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(this_00 + 0xb0));
        uVar7 = (**(code **)(**(long **)(pIVar8 + 0xb0) + 0x148))();
        IGAccelFIFOChannel::submitStampCommand
                  (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(pIVar8 + 0xb0));
        IGHardwareContext::notifyComplete(this_00,*(long *)((long)this + 0x150) + 0x20);
        IGAccelEventMachine::finishAllStamps(*(IGAccelEventMachine **)((long)this + 0x380),0x2b);
        IGHardwareContext::copyContextImage((long)pIVar8,(long *)((long)this + 0x1298));
        lVar9 = (**(code **)(**(long **)((long)this + 0x1298) + 0x2e0))();
        *(undefined8 *)(lVar9 + 0x286c) = 0x4000000781e0003;
        *(undefined8 *)(lVar9 + 0x2874) = 0;
        *(undefined4 *)(lVar9 + 0x287c) = 0;
        puVar10 = (ulong *)(lVar9 + 0x1728);
        uVar15 = 0;
        do {
          puVar10[3] = 0;
          puVar10[2] = 0;
          puVar10[1] = uVar15 >> 3;
          *puVar10 = uVar15 << 0x3d | 0x79180006;
          *(undefined4 *)(puVar10 + 3) = 0;
          puVar10 = puVar10 + 4;
          uVar11 = (int)uVar15 + 1;
          uVar15 = (ulong)uVar11;
        } while (uVar11 != 4);
        IGHardwareContext::notifyComplete(pIVar8,*(long *)((long)this + 0x150) + 0x20);
        (**(code **)(*(long *)pIVar8 + 0x28))(pIVar8);
        (**(code **)(*(long *)this_00 + 0x28))(this_00);
        goto LAB_00023ec9;
      }
      *(byte *)((long)this + 0xeb8) = *(byte *)((long)this + 0xeb8) & 0xdf;
      SafeForceWake(this,0,7);
      uVar13 = 0x21b;
    }
  }
LAB_0002423e:
  uVar15 = 0;
  encodeFailureStack(this,uVar13);
LAB_00024243:
  return uVar15 & 0xffffffff;
}



// IntelAccelerator::blockFenceCreateManager()

void __thiscall IntelAccelerator::blockFenceCreateManager(IntelAccelerator *this)

{
  IGBlockFenceManager *this_00;
  
  this_00 = *(IGBlockFenceManager **)(this + 0x1268);
  if (this_00 == (IGBlockFenceManager *)0x0) {
    this_00 = (IGBlockFenceManager *)_IOMallocTypeImpl(IGBlockFenceManager::operator_new);
    *(undefined ***)this_00 = &__const::~IGBlockFenceManager;
    *(undefined8 *)(this_00 + 0x10) = 0;
    *(undefined4 *)(this_00 + 0x30) = 0;
    *(undefined8 *)(this_00 + 0x28) = 0;
    *(undefined8 *)(this_00 + 0x20) = 0;
    *(undefined8 *)(this_00 + 0x18) = 0;
    *(IGBlockFenceManager **)(this + 0x1268) = this_00;
  }
  IGBlockFenceManager::initWithAccelerator(this_00,(long)this);
  return;
}



// IntelAccelerator::disableMetalForHeadlessIGPU()

void __thiscall IntelAccelerator::disableMetalForHeadlessIGPU(IntelAccelerator *this)

{
  if (*(int *)(this + 0x12b0) != 0) {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x000242d3. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x2a0))(this,"MetalPluginName");
  return;
}



// IntelAccelerator::dpsmIdleTimer()

void __thiscall IntelAccelerator::dpsmIdleTimer(IntelAccelerator *this)

{
  char cVar1;
  bool bVar2;
  
  IGAccelEventMachine::stampInterruptLockLock(*(IGAccelEventMachine **)(this + 0x380));
  _IOLockLock(*(undefined8 *)(this + 0x1448));
  cVar1 = (**(code **)(**(long **)(this + 0x1280) + 0x160))();
  if (cVar1 != '\0') {
    bVar2 = IGAccelEventMachine::testTransientStampInterrupts
                      (*(IGAccelEventMachine **)(this + 0x380));
    if (bVar2) {
      this[0x1450] = (IntelAccelerator)((byte)this[0x1450] | 1);
      (**(code **)(*(long *)(this + 0xdf8) + 0x38))();
      goto LAB_0002434d;
    }
  }
  (**(code **)(**(long **)(this + 0x1458) + 0x1d0))(*(long **)(this + 0x1458),10);
LAB_0002434d:
  _IOLockUnlock(*(undefined8 *)(this + 0x1448));
  IGAccelEventMachine::stampInterruptLockUnlock(*(IGAccelEventMachine **)(this + 0x380));
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// IntelAccelerator::initSysctl()

void __thiscall IntelAccelerator::initSysctl(IntelAccelerator *this)

{
  long lVar1;
  
  _sysctl_register_oid(&sysctl__debug_kDisplayVar);
  _sysctl_register_oid(&sysctl__debug_KernelPrintf);
  _sysctl_register_oid(&_sysctl__debug_intel);
  _sysctl_register_oid(&_sysctl__debug_intel_kdctlVersion);
  _sysctl_register_oid(&_sysctl__debug_intel_graphicsTracePointEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_IGInterruptControl);
  _sysctl_register_oid(&_sysctl__debug_intel_perfEventEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_dtraceEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_oaEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_gpuUsageEnables);
  _sysctl_register_oid(&_sysctl__debug_intel_gpuUsageEnablesCheck);
  _sysctl_register_oid(&_sysctl__debug_intel_flipCount);
  _sysctl_register_oid(&_sysctl__debug_intel_swapCount);
  _sysctl_register_oid(&_sysctl__debug_intel_ringTakeSample);
  _sysctl_register_oid(&_sysctl__debug_intel_ringOnSample);
  _sysctl_register_oid(&_sysctl__debug_intel_GlobalUsageTotal_Busy_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_GlobalUsageTotal_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_ringMainUsage);
  _sysctl_register_oid(&_sysctl__debug_intel_ringMediaUsage);
  _sysctl_register_oid(&_sysctl__debug_intel_ringBlitUsage);
  _sysctl_register_oid(&_sysctl__debug_intel_ringVEBoxUsage);
  _sysctl_register_oid(&_sysctl__debug_intel_ringMain_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_ringMedia_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_ringBlit_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_ringVEBox_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_mSecCalcGPUBusy);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriCreditsHigh);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriCreditsNormalHigh);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriCreditsNormal);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriCreditsLow);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriPreemption);
  _sysctl_register_oid(&_sysctl__debug_intel_schedPriElevatePID);
  _sysctl_register_oid(&_sysctl__debug_intel_schedEnableThrottleOverride);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThrottleLowPriByVal);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThrottleNormalPriByVal);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThrottleNormalHighPriByVal);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThrottleHighPriByVal);
  _sysctl_register_oid(&_sysctl__debug_intel_graphicsFirmwareTracePointEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryUsageReportmSec);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryVersion);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryConfig);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryMode);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetrySampleLocations);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryStartFrame);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryStopFrame);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryNumFrame);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryTestCase);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetrySpot1);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryStatPasses);
  _sysctl_register_oid(&_sysctl__debug_intel_telemetryAltConfig);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallFeatureEnable);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallQoSTimeoutUSMin);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallQoSTimeoutUSMax);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallQoSCreditsMax);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallInterruptWatermarkLow);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallInterruptWatermarkHigh);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallTakeSample);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallOnSample);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallTotal_nSec);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallTotalThermalStallTime_uSec);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallQoSActiveTime_uSec);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallRC6Time_uSec);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallIntEnableCount);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallQoSTimerCount);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallInvalidTransitionCount);
  _sysctl_register_oid(&_sysctl__debug_intel_schedThermalStallRPeFreq);
  _sysctl_register_oid(&_sysctl__debug_intel_temp0);
  _sysctl_register_oid(&_sysctl__debug_intel_temp1);
  _sysctl_register_oid(&_sysctl__debug_intel_temp2);
  _sysctl_register_oid(&_sysctl__debug_intel_temp3);
  _sysctl_register_oid(&_sysctl__debug_intel_temp4);
  if (((byte)this[0x11c3] & 0x10) != 0) {
    _DAT_00132f78 = 0;
  }
  lVar1 = _OSAddAtomic64(1,&l_nAccelerators);
  if (lVar1 < 10) {
    (&l_accelerators)[lVar1] = this;
    if (DAT_00132f70 != 0) {
      IGTelemetryManager::setupOnlyOA_ENABLE
                (*(IGTelemetryManager **)(this + 0xf18),(int)DAT_00132f70);
    }
    _DAT_001330c0 = (ulong)((uint)((ulong)*(undefined8 *)(this + 0x11c0) >> 0x2a) & 1);
  }
  else {
    l_nAccelerators = 9;
  }
  return;
}



// IntelAccelerator::stop(IOService*)

void __thiscall IntelAccelerator::stop(IntelAccelerator *this,long param_1)

{
  IGAccelTraceStreamManager *this_00;
  long lVar1;
  long *plVar2;
  ulong uVar3;
  int extraout_EDX;
  int extraout_EDX_00;
  int iVar4;
  ulong uVar5;
  
  lVar1 = 0;
  do {
    if (*(IntelAccelerator **)((long)&l_accelerators + lVar1) == this) {
      *(undefined8 *)((long)&l_accelerators + lVar1) = 0;
    }
    lVar1 = lVar1 + 8;
  } while (lVar1 != 0x50);
  IGAccelEventMachine::finishAllStamps(*(IGAccelEventMachine **)(this + 0x380),0x2b);
  _OSIncrementAtomic(this + 0x90);
  _IOLockLock(*(undefined8 *)(this + 0x88));
  _OSDecrementAtomic(this + 0x90);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*(long *)this + 0x850))(this,"",0);
  this_00 = (IGAccelTraceStreamManager *)(this + 0xe18);
  iVar4 = 0;
  IGAccelTraceStreamManager::disableCollection(this_00,0);
  stopGraphicsEngine(this);
  IGAccelTraceStreamManager::shutdown(this_00,iVar4,extraout_EDX);
  unregisterSysctl();
  IGAccelTraceStreamManager::shutdown(this_00,iVar4,extraout_EDX_00);
  if (*(long **)(this + 0xf18) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xf18) + 8))();
    *(undefined8 *)(this + 0xf18) = 0;
  }
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  if (*(IGHardwareContext **)(this + 0x12a0) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete
              (*(IGHardwareContext **)(this + 0x12a0),*(long *)(this + 0x150) + 0x20);
    if (*(long **)(this + 0x12a0) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x12a0) + 0x28))();
    }
    *(undefined8 *)(this + 0x12a0) = 0;
  }
  if (*(long **)(this + 0x1458) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1458) + 0x158))();
    plVar2 = (long *)(**(code **)(**(long **)(this + 0x1280) + 0x228))();
    (**(code **)(*plVar2 + 0x148))(plVar2,*(undefined8 *)(this + 0x1458));
    if (*(long **)(this + 0x1458) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x1458) + 0x28))();
    }
    *(undefined8 *)(this + 0x1458) = 0;
  }
  if (*(long **)(this + 0x1460) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1460) + 0x158))();
    plVar2 = (long *)(**(code **)(**(long **)(this + 0x1280) + 0x228))();
    (**(code **)(*plVar2 + 0x148))(plVar2,*(undefined8 *)(this + 0x1460));
    (**(code **)(**(long **)(this + 0x1460) + 0x28))();
    *(undefined8 *)(this + 0x1460) = 0;
  }
  if (*(long *)(this + 0x1448) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x1448) = 0;
  }
  if (*(long **)(this + 0x1288) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1288) + 0x28))();
  }
  *(undefined8 *)(this + 0x1288) = 0;
  if ((*(uint *)(this + 0x11c0) & 0x1c00000) == 0x1400000) {
    if (*(long **)(this + 0x1280) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x1280) + 0x28))();
    }
    *(undefined8 *)(this + 0x1280) = 0;
  }
  if (*(long **)(this + 0x1278) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1278) + 0x28))();
  }
  *(undefined8 *)(this + 0x1278) = 0;
  if (*(long **)(this + 0x1298) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1298) + 0x28))();
  }
  *(undefined8 *)(this + 0x1298) = 0;
  uVar5 = *(ulong *)(this + 0x1340);
  if (uVar5 != 0) {
    lVar1 = 0;
    if (uVar5 != 0) {
      for (; (uVar5 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
      }
    }
    do {
      uVar5 = lVar1 + 1;
      if (*(long **)(this + uVar5 * 8 + 0x1408) != (long *)0x0) {
        (**(code **)(**(long **)(this + uVar5 * 8 + 0x1408) + 0x28))();
      }
      *(undefined8 *)(this + uVar5 * 8 + 0x1408) = 0;
      if (4 < uVar5) break;
      uVar3 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar5 >> 6) * 8)) >> ((byte)uVar5 & 0x3f))
              << ((byte)uVar5 & 0x3f);
      lVar1 = 0;
      if (uVar3 != 0) {
        for (; (uVar3 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
        }
      }
      lVar1 = (uVar5 & 0xffffffffffffffc0) + lVar1;
    } while (uVar3 != 0);
  }
  if (*(long **)(this + 0x13f8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x13f8) + 0x28))();
  }
  *(undefined8 *)(this + 0x13f8) = 0;
  if (*(long **)(this + 0x1400) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1400) + 0x28))();
  }
  *(undefined8 *)(this + 0x1400) = 0;
  *(undefined4 *)(this + 0x1408) = 0;
  if (*(long **)(this + 0x1290) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1290) + 0x28))();
  }
  *(undefined8 *)(this + 0x1290) = 0;
  if (param_1 != 0) {
    (**(code **)(__got::vtable + 0x5d8))(this,param_1);
  }
  IGAccelTask::stop();
  if ((this[0x12b4] == (IntelAccelerator)0x0) && (*(long *)(this + 0xdf8) != 0)) {
    *(undefined8 *)(this + 0xdf8) = 0;
    _IOFreeTypeImpl(&cleanLocalCallbackSupport()::kalloc_type_view_8687);
  }
  if (*(long **)(this + 0x1268) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1268) + 8))();
    *(undefined8 *)(this + 0x1268) = 0;
  }
  if (*(long *)(this + 0x1440) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x1440) = 0;
  }
  plVar2 = *(long **)(this + 0x1468);
  if (plVar2 != (long *)0x0) {
    if (*plVar2 != 0) {
      _lck_spin_free(*plVar2,IGSpinLock::fGlobalLockGroup);
    }
    if (plVar2[1] != 0) {
      _lck_attr_free();
    }
    _IOFreeTypeImpl(IGSpinLock::operator_delete,plVar2);
  }
  *(undefined8 *)(this + 0x1468) = 0;
  IGSpinLock::cleanup();
  return;
}



// IntelAccelerator::stopGraphicsEngine()

undefined8 __thiscall IntelAccelerator::stopGraphicsEngine(IntelAccelerator *this)

{
  int iVar1;
  uintptr_t arg1;
  undefined8 uVar2;
  
  this[0xeb8] = (IntelAccelerator)((byte)this[0xeb8] | 0x40);
  iVar1 = _IOLockTryLock(*(undefined8 *)(this + 0x88));
  if (iVar1 == 0) {
    if (*(int *)__got::___ktrace_kernel_enabled != 0) {
      arg1 = IORegistryEntry::getRegistryEntryID();
      _kernel_debug(0x8512001c,arg1,0,0,0,0);
    }
    if (*(long **)(this + 0x1458) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x1458) + 0x218))();
    }
    *(undefined4 *)(this + 0x1450) = 1;
    if (*(long **)(this + 0x1280) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x1280) + 0x170))();
    }
    if (*(IGGarbageCollector **)(this + 0x1288) != (IGGarbageCollector *)0x0) {
      IGGarbageCollector::disable(*(IGGarbageCollector **)(this + 0x1288));
    }
    IGInterruptBridge::disable(*(IGInterruptBridge **)(this + 0x1278));
    uVar2 = IOGraphicsAccelerator2::disableAccelerator();
    this[0xeb8] = (IntelAccelerator)((byte)this[0xeb8] & 0xbf);
    uVar2 = CONCAT71((int7)((ulong)uVar2 >> 8),1);
  }
  else {
    stopGraphicsEngine(this);
    uVar2 = 0;
  }
  return uVar2;
}



// IntelAccelerator::unregisterSysctl()

void IntelAccelerator::unregisterSysctl(void)

{
  if (DAT_00131950 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_kdctlVersion);
  }
  DAT_00131950 = 0xffffffff;
  if (DAT_001319a0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_graphicsTracePointEnable);
  }
  DAT_001319a0 = 0xffffffff;
  if (DAT_001319f0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_IGInterruptControl);
  }
  DAT_001319f0 = 0xffffffff;
  if (DAT_00131a40 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_perfEventEnable);
  }
  DAT_00131a40 = 0xffffffff;
  if (DAT_00131a90 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_dtraceEnable);
  }
  DAT_00131a90 = 0xffffffff;
  if (DAT_00131ae0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_oaEnable);
  }
  DAT_00131ae0 = 0xffffffff;
  if (DAT_00131b30 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_gpuUsageEnables);
  }
  DAT_00131b30 = 0xffffffff;
  if (DAT_00131b80 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_gpuUsageEnablesCheck);
  }
  DAT_00131b80 = 0xffffffff;
  if (DAT_00131bd0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_flipCount);
  }
  DAT_00131bd0 = 0xffffffff;
  if (DAT_00131c20 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_swapCount);
  }
  DAT_00131c20 = 0xffffffff;
  if (DAT_00131c70 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringTakeSample);
  }
  DAT_00131c70 = 0xffffffff;
  if (DAT_00131cc0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringOnSample);
  }
  DAT_00131cc0 = 0xffffffff;
  if (DAT_00131d10 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_GlobalUsageTotal_Busy_nSec);
  }
  DAT_00131d10 = 0xffffffff;
  if (DAT_00131d60 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_GlobalUsageTotal_nSec);
  }
  DAT_00131d60 = 0xffffffff;
  if (DAT_00131db0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringMainUsage);
  }
  DAT_00131db0 = 0xffffffff;
  if (DAT_00131e00 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringMediaUsage);
  }
  DAT_00131e00 = 0xffffffff;
  if (DAT_00131e50 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringBlitUsage);
  }
  DAT_00131e50 = 0xffffffff;
  if (DAT_00131ea0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringVEBoxUsage);
  }
  DAT_00131ea0 = 0xffffffff;
  if (DAT_00131ef0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringMain_nSec);
  }
  DAT_00131ef0 = 0xffffffff;
  if (DAT_00131f40 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringMedia_nSec);
  }
  DAT_00131f40 = 0xffffffff;
  if (DAT_00131f90 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringBlit_nSec);
  }
  DAT_00131f90 = 0xffffffff;
  if (DAT_00131fe0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_ringVEBox_nSec);
  }
  DAT_00131fe0 = 0xffffffff;
  if (DAT_00132030 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_mSecCalcGPUBusy);
  }
  DAT_00132030 = 0xffffffff;
  if (DAT_00132080 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriCreditsHigh);
  }
  DAT_00132080 = 0xffffffff;
  if (DAT_001320d0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriCreditsNormalHigh);
  }
  DAT_001320d0 = 0xffffffff;
  if (DAT_00132120 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriCreditsNormal);
  }
  DAT_00132120 = 0xffffffff;
  if (DAT_00132170 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriCreditsLow);
  }
  DAT_00132170 = 0xffffffff;
  if (DAT_001321c0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriPreemption);
  }
  DAT_001321c0 = 0xffffffff;
  if (DAT_00132210 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedPriElevatePID);
  }
  DAT_00132210 = 0xffffffff;
  if (DAT_00132260 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedEnableThrottleOverride);
  }
  DAT_00132260 = 0xffffffff;
  if (DAT_001322b0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThrottleLowPriByVal);
  }
  DAT_001322b0 = 0xffffffff;
  if (DAT_00132300 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThrottleNormalPriByVal);
  }
  DAT_00132300 = 0xffffffff;
  if (DAT_00132350 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThrottleNormalHighPriByVal);
  }
  DAT_00132350 = 0xffffffff;
  if (DAT_001323a0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThrottleHighPriByVal);
  }
  DAT_001323a0 = 0xffffffff;
  if (DAT_001323f0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_graphicsFirmwareTracePointEnable);
  }
  DAT_001323f0 = 0xffffffff;
  if (DAT_00132440 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryUsageReportmSec);
  }
  DAT_00132440 = 0xffffffff;
  if (DAT_00132490 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryVersion);
  }
  DAT_00132490 = 0xffffffff;
  if (DAT_001324e0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryConfig);
  }
  DAT_001324e0 = 0xffffffff;
  if (DAT_00132530 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryMode);
  }
  DAT_00132530 = 0xffffffff;
  if (DAT_00132580 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetrySampleLocations);
  }
  DAT_00132580 = 0xffffffff;
  if (DAT_001325d0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryStartFrame);
  }
  DAT_001325d0 = 0xffffffff;
  if (DAT_00132620 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryStopFrame);
  }
  DAT_00132620 = 0xffffffff;
  if (DAT_00132670 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryNumFrame);
  }
  DAT_00132670 = 0xffffffff;
  if (DAT_001326c0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryTestCase);
  }
  DAT_001326c0 = 0xffffffff;
  if (DAT_00132710 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetrySpot1);
  }
  DAT_00132710 = 0xffffffff;
  if (DAT_00132760 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryStatPasses);
  }
  DAT_00132760 = 0xffffffff;
  if (DAT_001327b0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_telemetryAltConfig);
  }
  DAT_001327b0 = 0xffffffff;
  if (DAT_00132800 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallFeatureEnable);
  }
  DAT_00132800 = 0xffffffff;
  if (DAT_00132850 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallQoSTimeoutUSMin);
  }
  DAT_00132850 = 0xffffffff;
  if (DAT_001328a0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallQoSTimeoutUSMax);
  }
  DAT_001328a0 = 0xffffffff;
  if (DAT_001328f0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallQoSCreditsMax);
  }
  DAT_001328f0 = 0xffffffff;
  if (DAT_00132940 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallInterruptWatermarkLow);
  }
  DAT_00132940 = 0xffffffff;
  if (DAT_00132990 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallInterruptWatermarkHigh);
  }
  DAT_00132990 = 0xffffffff;
  if (DAT_001329e0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallTakeSample);
  }
  DAT_001329e0 = 0xffffffff;
  if (DAT_00132a30 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallOnSample);
  }
  DAT_00132a30 = 0xffffffff;
  if (DAT_00132a80 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallTotal_nSec);
  }
  DAT_00132a80 = 0xffffffff;
  if (DAT_00132ad0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallTotalThermalStallTime_uSec);
  }
  DAT_00132ad0 = 0xffffffff;
  if (DAT_00132b20 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallQoSActiveTime_uSec);
  }
  DAT_00132b20 = 0xffffffff;
  if (DAT_00132b70 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallRC6Time_uSec);
  }
  DAT_00132b70 = 0xffffffff;
  if (DAT_00132bc0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallIntEnableCount);
  }
  DAT_00132bc0 = 0xffffffff;
  if (DAT_00132c10 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallQoSTimerCount);
  }
  DAT_00132c10 = 0xffffffff;
  if (DAT_00132c60 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallInvalidTransitionCount);
  }
  DAT_00132c60 = 0xffffffff;
  if (DAT_00132cb0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_schedThermalStallRPeFreq);
  }
  DAT_00132cb0 = 0xffffffff;
  if (DAT_00132d00 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_temp0);
  }
  DAT_00132d00 = 0xffffffff;
  if (DAT_00132d50 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_temp1);
  }
  DAT_00132d50 = 0xffffffff;
  if (DAT_00132da0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_temp2);
  }
  DAT_00132da0 = 0xffffffff;
  if (DAT_00132df0 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_temp3);
  }
  DAT_00132df0 = 0xffffffff;
  if (DAT_00132e40 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel_temp4);
  }
  DAT_00132e40 = 0xffffffff;
  if (DAT_00131900 != -1) {
    _sysctl_unregister_oid(&_sysctl__debug_intel);
  }
  DAT_00131900 = 0xffffffff;
  if (DAT_00132ee0 != -1) {
    _sysctl_unregister_oid(&sysctl__debug_KernelPrintf);
  }
  DAT_00132ee0 = 0xffffffff;
  if (DAT_00132e90 != -1) {
    _sysctl_unregister_oid(&sysctl__debug_kDisplayVar);
  }
  DAT_00132e90 = 0xffffffff;
  return;
}



// IntelAccelerator::telemetryDeleteManager()

void __thiscall IntelAccelerator::telemetryDeleteManager(IntelAccelerator *this)

{
  if (*(long **)(this + 0xf18) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xf18) + 8))();
    *(undefined8 *)(this + 0xf18) = 0;
  }
  return;
}



// IntelAccelerator::cleanLocalCallbackSupport()

void __thiscall IntelAccelerator::cleanLocalCallbackSupport(IntelAccelerator *this)

{
  if (*(long *)(this + 0xdf8) != 0) {
    *(undefined8 *)(this + 0xdf8) = 0;
    _IOFreeTypeImpl(&cleanLocalCallbackSupport()::kalloc_type_view_8687);
    return;
  }
  return;
}



// IntelAccelerator::blockFenceDeleteManager()

void __thiscall IntelAccelerator::blockFenceDeleteManager(IntelAccelerator *this)

{
  if (*(long **)(this + 0x1268) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1268) + 8))();
    *(undefined8 *)(this + 0x1268) = 0;
  }
  return;
}



// IntelAccelerator::freeVideoPerfCapability()

void __thiscall IntelAccelerator::freeVideoPerfCapability(IntelAccelerator *this)

{
  if (*(long *)(this + 0x1440) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x1440) = 0;
  }
  return;
}



// IntelAccelerator::cleanupLogging()

void IntelAccelerator::cleanupLogging(void)

{
  return;
}



// IntelAccelerator::dpsmKickTimer()

void __thiscall IntelAccelerator::dpsmKickTimer(IntelAccelerator *this)

{
  if (((byte)this[0x11c1] & 4) != 0) {
    _IOLockLock(*(undefined8 *)(this + 0x1448));
    if ((*(uint *)(this + 0x1450) & 1) != 0) {
      *(uint *)(this + 0x1450) = *(uint *)(this + 0x1450) & 0xfffffffe;
      (**(code **)(*(long *)(this + 0xdf8) + 0x38))();
      (**(code **)(**(long **)(this + 0x1458) + 0x218))();
      (**(code **)(**(long **)(this + 0x1458) + 0x1d0))(*(long **)(this + 0x1458),0x1e);
    }
    _IOLockUnlock(*(undefined8 *)(this + 0x1448));
  }
  return;
}



// IntelAccelerator::dpsmIsIdle()

byte __thiscall IntelAccelerator::dpsmIsIdle(IntelAccelerator *this)

{
  return (byte)this[0x1450] & 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::requestProbe(unsigned int)

int __cdecl IntelAccelerator::requestProbe(IntelAccelerator *param_1)

{
  int iVar1;
  uint uVar2;
  long *plVar3;
  uint uVar4;
  
  iVar1 = (**(code **)(__got::vtable + 0x738))();
  if (iVar1 == 0) {
    iVar1 = IOAccelDisplayMachine::getFramebufferCount();
    if (iVar1 != 0) {
      uVar4 = 0;
      do {
        plVar3 = (long *)IOAccelDisplayMachine::getIOFramebuffer
                                   ((uint)*(undefined8 *)(param_1 + 0x378));
        if (plVar3 != (long *)0x0) {
          (**(code **)(*plVar3 + 0x6b8))(plVar3,_fSymFBCLASSRegisterAccelerator,0,param_1,0,0,0);
        }
        uVar4 = uVar4 + 1;
        uVar2 = IOAccelDisplayMachine::getFramebufferCount();
      } while (uVar4 < uVar2);
    }
    IGAccelDisplayMachine::probeDisplayPipes((uint)*(undefined8 *)(param_1 + 0x378));
    IGInterruptBridge::enable(*(IGInterruptBridge **)(param_1 + 0x1278));
    iVar1 = 0;
  }
  else {
    encodeFailureStack(param_1,0x100);
  }
  return iVar1;
}



// IntelAccelerator::getStampMemory(unsigned int*)

void __thiscall IntelAccelerator::getStampMemory(IntelAccelerator *this,undefined4 *param_1)

{
  *param_1 = 0;
  IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(*(long *)(this + 0x150) + 0x280));
  return;
}



// IntelAccelerator::getGlobalHardwareStatusPage(IGHwCsType)

undefined8 __thiscall
IntelAccelerator::getGlobalHardwareStatusPage(IntelAccelerator *this,uint param_1)

{
  undefined8 uVar1;
  
  if ((*(ulong *)(this + (long)(&DAT_00001340 + (ulong)(param_1 >> 6) * 8)) >>
       ((ulong)param_1 & 0x3f) & 1) == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = *(undefined8 *)(this + (ulong)param_1 * 8 + 0x1410);
  }
  return uVar1;
}



// IntelAccelerator::populateAccelConfig(IOAccelConfig*)

void __thiscall IntelAccelerator::populateAccelConfig(IntelAccelerator *this,undefined8 *param_1)

{
  ushort uVar1;
  char cVar2;
  undefined2 uVar3;
  uint uVar4;
  undefined4 uVar5;
  boolean_t bVar6;
  undefined4 uVar7;
  ulong uVar8;
  ushort uVar9;
  uint uVar10;
  undefined4 uVar11;
  ushort uVar12;
  uint uVar13;
  int iVar14;
  char *pcVar15;
  char *pcVar16;
  bool bVar17;
  undefined4 local_13c;
  char local_138 [256];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  populateDeviceSettings(this);
  if ((this[0x12b4] == (IntelAccelerator)0x0) || ((*(ulong *)(this + 0x11c0) & 0x20) != 0)) {
    uVar8 = *(ulong *)(this + 0x11c0) & 0xfffffffffffffffe;
  }
  else {
    uVar4 = utilGetProperty<int>((long *)this,"PageFlip",1);
    uVar8 = *(ulong *)(this + 0x11c0) & 0xfffffffffffffffe | (ulong)(uVar4 & 1);
  }
  *(ulong *)(this + 0x11c0) = uVar8;
  uVar4 = utilGetProperty<>((long *)this,"CsbProcModeSelect",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffffffff7f | (ulong)((uVar4 & 1) << 7);
  uVar4 = utilGetProperty<>((long *)this,"MultiForceWakeSelect",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffff7ff | (ulong)((uVar4 & 1) << 0xb);
  uVar4 = utilGetProperty<>((long *)this,"PPGTT",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffffeff | (ulong)((uVar4 & 1) << 8);
  uVar4 = utilGetProperty<>((long *)this,"SeparateAddressSpace",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffffdff | (ulong)((uVar4 & 1) << 9);
  uVar4 = utilGetProperty<>((long *)this,"SchedPmNotifyEnable",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffffffbfff | (ulong)((uVar4 & 1) << 0xe);
  uVar4 = utilGetProperty<>((long *)this,"SingleChannelIndex",2);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffe7fff | (ulong)((uVar4 & 3) << 0xf);
  uVar4 = utilGetProperty<>((long *)this,"PanicOnGPUHang",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffdffff | (ulong)((uVar4 & 1) << 0x11);
  uVar4 = utilGetProperty<>((long *)this,"NewUtilizationAlgorithmEnable",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffffbffff | (ulong)((uVar4 & 1) << 0x12);
  uVar4 = utilGetProperty<>((long *)this,"MetalCoalesce",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffff7ffff | (ulong)((uVar4 & 1) << 0x13);
  uVar4 = utilGetProperty<>((long *)this,"AllowIOSurfaceRenderCompression",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffffdfffff | (ulong)((uVar4 & 1) << 0x15);
  uVar4 = utilGetProperty<>((long *)this,"SchedulerFallbackOnFirmwareFail",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffdffffff | (ulong)((uVar4 & 1) << 0x19);
  uVar4 = utilGetProperty<>((long *)this,"DisableTailCoalescing",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffbffffff | (ulong)((uVar4 & 1) << 0x1a);
  uVar4 = utilGetProperty<>((long *)this,"DisablePageFaultHandling",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffefffffffff | (ulong)(uVar4 & 1) << 0x24;
  uVar4 = utilGetProperty<>((long *)this,"SemaphoreWaitPoll",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffdfffffff | (ulong)((uVar4 & 1) << 0x1d);
  uVar4 = utilGetProperty<>((long *)this,"HwCtxCacheUpdate",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffffefffff | (ulong)((uVar4 & 1) << 0x14);
  uVar4 = utilGetProperty<>((long *)this,"TelemetryDisable",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffffffefffffff | (ulong)((uVar4 & 1) << 0x1c);
  uVar5 = utilGetProperty<>((long *)this,"RingSizeKB",0x20);
  *(undefined4 *)(this + 0x11cc) = uVar5;
  uVar4 = utilGetProperty<>((long *)this,"EnablePlaneRotation",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffdffffffff | (ulong)(uVar4 & 1) << 0x21;
  uVar4 = utilGetProperty<>((long *)this,"WaitForComplete",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffbffffffff | (ulong)(uVar4 & 1) << 0x22;
  uVar4 = utilGetProperty<>((long *)this,"SignalStampRange",1);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xffffff7fffffffff | (ulong)(uVar4 & 1) << 0x27;
  uVar4 = utilGetProperty<>((long *)this,"SignalStampsPrimary",0);
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffc9fffffffff | (ulong)(uVar4 & 1) << 0x28 | 0x6000000000;
  iVar14 = *(int *)(this + 0x11cc);
  if ((0x1fc < iVar14 - 4U) || (1 < (uint)POPCOUNT(iVar14))) {
    _IOLog("[IGPU] Ring Size has to be a power of 2, > 4 KB, < 512 KB (requested %u KB)\n");
    _kprintf("[IGPU] Ring Size has to be a power of 2, > 4 KB, < 512 KB (requested %u KB)\n",
             *(uint *)(this + 0x11cc));
    *(undefined4 *)(this + 0x11cc) = 0x20;
    iVar14 = 0x20;
  }
  _IOLog("[IGPU] Ring Size: %u KB\n",iVar14);
  _kprintf("[IGPU] Ring Size: %u KB\n",*(uint *)(this + 0x11cc));
  if (((byte)this[0x11c4] & 2) != 0) {
    _IOLog("[IGPU] Enabling Plane Rotation!\n");
    _kprintf("[IGPU] Enabling Plane Rotation!\n");
  }
  local_13c = 0;
  bVar6 = _PE_parse_boot_argn("-disablegfxpreemption",&local_13c,4);
  if (bVar6 == 0) {
    uVar4 = utilGetProperty<>((long *)this,"EnablePreemption",1);
    *(ulong *)(this + 0x11c0) =
         *(ulong *)(this + 0x11c0) & 0xffffffffbfffffff | (ulong)((uVar4 & 1) << 0x1e);
    uVar5 = utilGetProperty<>((long *)this,"PreemptionDelayIntervalUS",400);
    *(short *)(this + 0x11c8) = (short)uVar5;
    uVar5 = utilGetProperty<>((long *)this,"PreemptionTimerIntervalUS",2000);
    uVar3 = (undefined2)uVar5;
    uVar8 = *(ulong *)(this + 0x11c0);
  }
  else {
    _IOLog("[IGPU] Graphics preemption disabled via NVRAM\n");
    _kprintf("[IGPU] Graphics preemption disabled via NVRAM\n");
    uVar8 = *(ulong *)(this + 0x11c0) & 0xffffffffbfffffff;
    *(ulong *)(this + 0x11c0) = uVar8;
    *(undefined2 *)(this + 0x11c8) = 400;
    uVar3 = 2000;
  }
  *(undefined2 *)(this + 0x11ca) = uVar3;
  if ((uVar8 & 0x20) != 0) {
    _IOLog("[IGPU] Graphics preemption disabled for simulation\n");
    _kprintf("[IGPU] Graphics preemption disabled for simulation\n");
    uVar8 = *(ulong *)(this + 0x11c0) & 0xffffffffbfffffff;
    *(ulong *)(this + 0x11c0) = uVar8;
    *(undefined4 *)(this + 0x11c8) = 0x7d00190;
  }
  if (((uint)uVar8 >> 0x1e & 1) == 0) {
    _IOLog("[IGPU] Graphics Scheduler Preemption Disabled!\n");
    _kprintf("[IGPU] Graphics Scheduler Preemption Disabled!\n");
  }
  else {
    _IOLog("[IGPU] Graphics Scheduler Preemption Enabled!\n");
    _kprintf("[IGPU] Graphics Scheduler Preemption Enabled!\n");
    uVar1 = *(ushort *)(this + 0x11c8);
    uVar12 = uVar1;
    if (15999 < uVar1) {
      uVar12 = 16000;
    }
    uVar9 = 100;
    if (100 < uVar12) {
      uVar9 = uVar12;
    }
    *(ushort *)(this + 0x11c8) = uVar9;
    if (uVar1 != uVar9) {
      _IOLog("[IGPU] Constraining preemption delay interval in the range [%u,%u] us\n",100,16000);
      _kprintf("[IGPU] Constraining preemption delay interval in the range [%u,%u] us\n",100,16000);
      uVar1 = *(ushort *)(this + 0x11c8);
    }
    _IOLog("[IGPU] Setting preemptionDelayIntervalUS to %d microseconds\n",uVar1);
    _kprintf("[IGPU] Setting preemptionDelayIntervalUS to %d microseconds\n",
             (uint)*(ushort *)(this + 0x11c8));
    uVar1 = *(ushort *)(this + 0x11ca);
    uVar12 = 16000;
    if (uVar1 < 16000) {
      uVar12 = uVar1;
    }
    uVar9 = 1000;
    if (1000 < uVar12) {
      uVar9 = uVar12;
    }
    *(ushort *)(this + 0x11ca) = uVar9;
    if (uVar1 != uVar9) {
      _IOLog("[IGPU] Constraining preemption timer interval in the range [%u,%u] us\n",1000,16000);
      _kprintf("[IGPU] Constraining preemption timer interval in the range [%u,%u] us\n",1000,16000)
      ;
      uVar1 = *(ushort *)(this + 0x11ca);
    }
    _IOLog("[IGPU] Setting preemptionTimerIntervalUS to %d microseconds\n",uVar1);
    _kprintf("[IGPU] Setting preemptionTimerIntervalUS to %d microseconds\n",
             (uint)*(ushort *)(this + 0x11ca));
  }
  pcVar15 = "[IGPU] Will fallback to host-side scheduling if graphics firmware fails to load\n";
  if ((*(uint *)(this + 0x11c0) >> 0x19 & 1) == 0) {
    pcVar15 = 
    "[IGPU] Will NOT fallback to host-side scheduling if graphics firmware fails to load\n";
  }
  _IOLog(pcVar15);
  _kprintf(pcVar15);
  pcVar15 = "[IGPU] Scheduler Tail Coalescing Disabled!\n";
  if ((*(uint *)(this + 0x11c0) >> 0x1a & 1) == 0) {
    pcVar15 = "[IGPU] Scheduler Tail Coalescing Enabled.\n";
  }
  _IOLog(pcVar15);
  _kprintf(pcVar15);
  pcVar15 = "[IGPU] Scheduler Page Fault Handling Disabled!\n";
  if ((*(ulong *)(this + 0x11c0) >> 0x24 & 1) == 0) {
    pcVar15 = "[IGPU] Scheduler Page Fault Handling Enabled.\n";
  }
  _IOLog(pcVar15);
  _kprintf(pcVar15);
  pcVar15 = "[IGPU] Scheduler Single Channel Index Enabled\n";
  if ((*(uint *)(this + 0x11c0) & 0x18000) == 0) {
    pcVar15 = "[IGPU] Scheduler Single Channel Index Disabled\n";
  }
  _IOLog(pcVar15);
  _kprintf(pcVar15);
  pcVar15 = "[IGPU] Scheduler Channel Wait For Complete Enabled\n";
  if ((*(ulong *)(this + 0x11c0) >> 0x22 & 1) == 0) {
    pcVar15 = "[IGPU] Scheduler Channel Wait For Complete Disabled\n";
  }
  _IOLog(pcVar15);
  _kprintf(pcVar15);
  ___bzero(local_138,0x100);
  pcVar15 = "MMIO";
  if (((byte)this[0x11c0] & 0x80) == 0) {
    pcVar15 = "HWS";
  }
  _snprintf(local_138,0x100,pcVar15);
  _IOLog("[IGPU] Scheduler: Process CSB using %s.\n",local_138);
  _kprintf("[IGPU] Scheduler: Process CSB using %s.\n",local_138);
  pcVar16 = "enabled";
  pcVar15 = "enabled";
  if ((*(uint *)(this + 0x11c0) >> 0xe & 1) == 0) {
    pcVar15 = "disabled";
  }
  _IOLog("[IGPU] Scheduler: PM notify %s\n",pcVar15);
  if ((*(uint *)(this + 0x11c0) >> 0xe & 1) == 0) {
    pcVar16 = "disabled";
  }
  _kprintf("[IGPU] Scheduler: PM notify %s\n",pcVar16);
  uVar4 = utilGetProperty<>((long *)this,"GraphicsSchedulerSelect",0);
  if ((5 < uVar4) || ((0x39U >> (uVar4 & 0x1f) & 1) == 0)) {
                    // WARNING: Subroutine does not return
    _panic("\"Unsupported GraphicsSchedulerSelect=%u\\n\" @%s:%d",(ulong)uVar4,
           "IntelAccelerator.cpp",0x902);
  }
  *(ulong *)(this + 0x11c0) =
       *(ulong *)(this + 0x11c0) & 0xfffffffffe3fffff |
       *(ulong *)(&DAT_0010bf90 + (long)(int)uVar4 * 8);
  local_138[0] = '\0';
  local_138[1] = '\0';
  local_138[2] = '\0';
  local_138[3] = '\0';
  bVar6 = _PE_parse_boot_argn("-disablegfxfirmware",local_138,4);
  if (bVar6 == 0) {
    uVar8 = *(ulong *)(this + 0x11c0);
  }
  else {
    _IOLog("[IGPU] Graphics firmware disabled via NVRAM\n");
    _kprintf("[IGPU] Graphics firmware disabled via NVRAM\n");
    uVar8 = *(ulong *)(this + 0x11c0) & 0xfffffffffe3fffff | 0x1400000;
    *(ulong *)(this + 0x11c0) = uVar8;
  }
  uVar13 = (uint)(uVar8 >> 0x16) & 7;
  pcVar15 = IGScheduler::schedulerName((char)uVar13);
  pcVar16 = "[IGPU] Selected %s Scheduler\n";
  if (uVar4 == uVar13) {
    pcVar16 = "[IGPU] Forced to use %s Scheduler\n";
  }
  _IOLog(pcVar16,pcVar15);
  pcVar15 = IGScheduler::schedulerName((byte)(*(uint *)(this + 0x11c0) >> 0x16) & 7);
  _kprintf(pcVar16,pcVar15);
  if (((((uint)*(undefined8 *)(this + 0x11c0) >> 0x19 & 1) != 0) &&
      (cVar2 = IGScheduler::schedulerType((byte)((uint)*(undefined8 *)(this + 0x11c0) >> 0x16) & 7),
      cVar2 == '\x02')) && (uVar8 = IGScheduler::canLoadFirmware(this), (char)uVar8 == '\0')) {
    *(ulong *)(this + 0x11c0) = *(ulong *)(this + 0x11c0) & 0xfffffffffe3fffff | 0x1400000;
    _IOLog("[IGPU] *****************************************************************************\n")
    ;
    _kprintf(
            "[IGPU] *****************************************************************************\n"
            );
    pcVar15 = IGScheduler::schedulerName((byte)(*(uint *)(this + 0x11c0) >> 0x16) & 7);
    _IOLog("[IGPU] Failed to initialize graphics firmware.  Falling back to %s Scheduler\n",pcVar15)
    ;
    pcVar15 = IGScheduler::schedulerName((byte)(*(uint *)(this + 0x11c0) >> 0x16) & 7);
    _kprintf("[IGPU] Failed to initialize graphics firmware.  Falling back to %s Scheduler\n",
             pcVar15);
    _IOLog("[IGPU] *****************************************************************************\n")
    ;
    _kprintf(
            "[IGPU] *****************************************************************************\n"
            );
  }
  uVar8 = *(ulong *)(this + 0x11c0);
  if (((uint)uVar8 & 0x1c00000) == 0x1000000) {
    _IOLog("[IGPU] [RefFirmware] Forcing SingleChannelIndex=1\n");
    _kprintf("[IGPU] [RefFirmware] Forcing SingleChannelIndex=1\n");
    *(ulong *)(this + 0x11c0) = *(ulong *)(this + 0x11c0) & 0xfffffffffffe7fff | 0x8000;
    _IOLog("[IGPU] [RefFirmware] Forcing RingSize=16KB\n");
    _kprintf("[IGPU] [RefFirmware] Forcing RingSize=16KB\n");
    *(undefined4 *)(this + 0x11cc) = 0x10;
    uVar8 = *(ulong *)(this + 0x11c0);
  }
  if ((uVar8 & 0x20) != 0) {
    *(ulong *)(this + 0x11c0) = uVar8 & 0xffffffffdffe27ff | 0x9000;
  }
  iVar14 = *(int *)(this + 0x1148);
  if (iVar14 < -0x75a37f7a) {
    if ((iVar14 != -0x75af7f7a) && (iVar14 != -0x75ae7f7a)) goto LAB_000262bd;
  }
  else if ((iVar14 != -0x75a27f7a) && (iVar14 != -0x75a37f7a)) goto LAB_000262bd;
  local_138[0] = '\0';
  local_138[1] = '\0';
  local_138[2] = '\0';
  local_138[3] = '\0';
  bVar6 = _PE_parse_boot_argn("-disabledutycycle",local_138,4);
  if (bVar6 == 0) {
    this[0x11c5] = (IntelAccelerator)((byte)this[0x11c5] | 4);
  }
LAB_000262bd:
  *param_1 = "IntelAccelerator";
  uVar4 = *(uint *)(param_1 + 1);
  uVar13 = *(uint *)((long)param_1 + 100);
  uVar10 = uVar4 | 0x4f240140;
  *(uint *)(param_1 + 1) = uVar10;
  uVar4 = uVar4 | 0x4f240340;
  if ((*(uint *)(this + 0x11c0) >> 9 & 1) == 0) {
    uVar4 = uVar10;
  }
  *(uint *)(param_1 + 1) = uVar4 | 0x80000400;
  *(uint *)((long)param_1 + 100) = uVar13 | 4;
  if (((byte)this[0x11c2] & 8) != 0) {
    *(uint *)((long)param_1 + 100) = uVar13 | 5;
  }
  *(uint *)(param_1 + 1) = uVar4 | 0x80004400;
  *(undefined4 *)((long)param_1 + 0xc) = 0xb;
  iVar14 = (*(uint *)(this + 0x11c0) & 1) * 4 + 0xb;
  *(int *)((long)param_1 + 0xc) = iVar14;
  (**(code **)(*(long *)this + 0x280))(this,"AccelCaps",iVar14,0x20);
  *(undefined4 *)(param_1 + 2) = 0;
  bVar17 = (*(uint *)(this + 0x11c0) & 0x18000) != 0;
  uVar5 = 9;
  if (!bVar17) {
    uVar5 = 0x40;
  }
  uVar7 = 0x3c;
  if (bVar17) {
    uVar7 = 5;
  }
  uVar11 = 8;
  if (!bVar17) {
    uVar11 = 0x3f;
  }
  *(undefined4 *)(param_1 + 3) = uVar5;
  *(undefined4 *)(this + 0x11d0) = uVar7;
  *(undefined4 *)(this + 0x11d4) = uVar11;
  param_1[5] = 0x100000004;
  param_1[4] = *(undefined8 *)(*(long *)(this + 0x1290) + 0x30);
  *(undefined4 *)(param_1 + 7) = 0x200000;
  *(undefined1 *)((long)param_1 + 0x45) = 0;
  param_1[10] = 0x2000000000003;
  param_1[6] = 0x20000040004000;
  param_1[9] = 0xf;
  param_1[0xb] = 0x28;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(undefined1 *)((long)param_1 + 0x47) = 1;
  uVar5 = 500;
  if (((byte)this[0x11c0] & 0x20) == 0) {
    uVar5 = 5;
  }
  *(undefined4 *)(param_1 + 0xd) = uVar5;
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IntelAccelerator::populateDeviceSettings(IOAccelConfig*)

void __thiscall IntelAccelerator::populateDeviceSettings(IntelAccelerator *this)

{
  ___bzero(this + 0x1080,0xc0);
  intelPopulateStaticDeviceSettings((ulong *)(this + 0x1080));
  intelPopulateGlobalDeviceSettings((byte *)(this + 0x10c0));
  intelPopulateSharedDeviceSettings((ulong *)(this + 0x1100));
  applyDeviceSettingsUserPreferences((long *)this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// int utilGetProperty<int>(IORegistryEntry*, char const*, int)

undefined4 __cdecl utilGetProperty<int>(long *param_1,undefined8 param_2,undefined4 param_3)

{
  uint uVar1;
  OSMetaClassBase *pOVar2;
  OSMetaClass *pOVar3;
  long *plVar4;
  void *pvVar5;
  char *pcVar6;
  undefined4 local_2c;
  
  pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))();
  local_2c = param_3;
  if (pOVar2 == (OSMetaClassBase *)0x0) {
    pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))(param_1,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 == (long *)0x0) ||
       (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar2 == (OSMetaClassBase *)0x0)) goto LAB_000265a8;
  }
  pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
  if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
    local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
  }
  else {
    pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
    if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
      pvVar5 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
      uVar1 = (**(code **)(*plVar4 + 0x140))(plVar4);
      if (4 < uVar1) {
        utilGetProperty<int>();
        return 0;
      }
      _memcpy(&local_2c,pvVar5,(ulong)uVar1);
    }
  }
LAB_000265a8:
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar4 != (long *)0x0) &&
      (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,param_2),
      pOVar2 != (OSMetaClassBase *)0x0)) &&
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass),
     plVar4 != (long *)0x0)) {
    pcVar6 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar6,0x20);
    if (plVar4 != (long *)0x0) {
      local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
  }
  return local_2c;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// unsigned int utilGetProperty<unsigned int>(IORegistryEntry*, char const*, unsigned int)

undefined4 __cdecl utilGetProperty<>(long *param_1,undefined8 param_2,undefined4 param_3)

{
  uint uVar1;
  OSMetaClassBase *pOVar2;
  OSMetaClass *pOVar3;
  long *plVar4;
  void *pvVar5;
  char *pcVar6;
  undefined4 local_2c;
  
  pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))();
  local_2c = param_3;
  if (pOVar2 == (OSMetaClassBase *)0x0) {
    pOVar2 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))(param_1,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 == (long *)0x0) ||
       (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar2 == (OSMetaClassBase *)0x0)) goto LAB_00026741;
  }
  pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
  if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
    local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
  }
  else {
    pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
    if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
      pvVar5 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
      uVar1 = (**(code **)(*plVar4 + 0x140))(plVar4);
      if (4 < uVar1) {
        utilGetProperty<>();
        return 0;
      }
      _memcpy(&local_2c,pvVar5,(ulong)uVar1);
    }
  }
LAB_00026741:
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar4 != (long *)0x0) &&
      (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,param_2),
      pOVar2 != (OSMetaClassBase *)0x0)) &&
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass),
     plVar4 != (long *)0x0)) {
    pcVar6 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar6,0x20);
    if (plVar4 != (long *)0x0) {
      local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
  }
  return local_2c;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::applyDeviceSettingsUserPreferences(IOAccelConfig*)

void __cdecl IntelAccelerator::applyDeviceSettingsUserPreferences(long *param_1)

{
  OSMetaClassBase *pOVar1;
  long *plVar2;
  long *plVar3;
  long *local_40;
  long *local_38;
  long *local_30;
  
  pOVar1 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x2b8))(param_1,"DeviceSettings");
  if (pOVar1 != (OSMetaClassBase *)0x0) {
    plVar2 = (long *)OSMetaClassBase::safeMetaCast(pOVar1,*(OSMetaClass **)__got::metaClass);
    if (plVar2 != (long *)0x0) {
      plVar3 = (long *)intelCreateStaticDeviceSettingsDictionary();
      applyDeviceSettingsUserPreferencesImpl(plVar2);
      (**(code **)(*plVar3 + 0x28))(plVar3);
      plVar3 = (long *)intelCreateGlobalDeviceSettingsDictionary();
      applyDeviceSettingsUserPreferencesImpl(plVar2);
      (**(code **)(*plVar3 + 0x28))(plVar3);
      plVar3 = (long *)intelCreateSharedDeviceSettingsDictionary();
      applyDeviceSettingsUserPreferencesImpl(plVar2);
      (**(code **)(*plVar3 + 0x28))(plVar3);
    }
    local_40 = param_1 + 0x210;
    local_38 = param_1 + 0x218;
    local_30 = param_1 + 0x220;
    intelApplyDeviceSettingsRules((long)&local_40);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// applyDeviceSettingsUserPreferencesImpl(OSDictionary const*, char const*, OSDictionary const*,
// unsigned long long*, IOAccelConfig*)

void __cdecl applyDeviceSettingsUserPreferencesImpl(long *param_1)

{
  OSMetaClassBase *pOVar1;
  _func_bool_OSSymbol_ptr_OSObject_ptr *p_Var2;
  
  pOVar1 = (OSMetaClassBase *)(**(code **)(*param_1 + 0x208))();
  if (pOVar1 != (OSMetaClassBase *)0x0) {
    p_Var2 = (_func_bool_OSSymbol_ptr_OSObject_ptr *)
             OSMetaClassBase::safeMetaCast(pOVar1,*(OSMetaClass **)__got::metaClass);
    if (p_Var2 != (_func_bool_OSSymbol_ptr_OSObject_ptr *)0x0) {
      OSDictionary::iterateObjects(p_Var2);
    }
  }
  return;
}



// IntelAccelerator::calcMaxGPUPhysicalMemoryBytes(unsigned long long)

void __thiscall
IntelAccelerator::calcMaxGPUPhysicalMemoryBytes(IntelAccelerator *this,ulong param_1)

{
  ulong uVar1;
  ulong uVar2;
  
  uVar2 = param_1 >> 1 & 0xfffffffffffff000;
  uVar1 = 0x1c0000000;
  if (uVar2 < 0x1c0000000) {
    uVar1 = uVar2;
  }
  *(ulong *)(*(long *)(this + 0x1290) + 0x28) = uVar1;
  return;
}



// IntelAccelerator::getMaxSingleSysMemorySize()

undefined8 IntelAccelerator::getMaxSingleSysMemorySize(void)

{
  return 0x80000000;
}



// IntelAccelerator::getMaxResourceSize()

void __thiscall IntelAccelerator::getMaxResourceSize(IntelAccelerator *this)

{
                    // WARNING: Could not recover jumptable at 0x0002699a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x988))();
  return;
}



// IntelAccelerator::totalTextureMemory()

ulong __thiscall IntelAccelerator::totalTextureMemory(IntelAccelerator *this)

{
  return (ulong)(*(long *)(*(long *)(this + 0x1290) + 0x28) * 3) >> 2 & 0xfffffffffffff000;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::configureDevice(IOPCIDevice*)

bool __cdecl IntelAccelerator::configureDevice(IntelAccelerator *param_1)

{
  long lVar1;
  
  lVar1 = IGMemoryManager::withAccelerator((long *)param_1);
  *(long *)(param_1 + 0x1290) = lVar1;
  if (lVar1 != 0) {
    *(undefined8 *)(param_1 + 0x1270) = *(undefined8 *)(lVar1 + 0x18);
    getGPUInfo(param_1);
  }
  return lVar1 != 0;
}



// IntelAccelerator::initMemoryManager()

bool __thiscall IntelAccelerator::initMemoryManager(IntelAccelerator *this)

{
  long lVar1;
  
  lVar1 = IGMemoryManager::withAccelerator((long *)this);
  *(long *)(this + 0x1290) = lVar1;
  return lVar1 != 0;
}



// IntelAccelerator::getGPUInfo()

void __thiscall IntelAccelerator::getGPUInfo(IntelAccelerator *this)

{
  uint param2;
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  long lVar5;
  byte bVar6;
  uint uVar7;
  ulong uVar8;
  ulong uVar9;
  ulong uVar10;
  int iVar11;
  uint param1;
  uint uVar12;
  char *fmt;
  uint uVar13;
  char *fmt_00;
  
  iVar11 = 1;
  SafeForceWake(this,1,5);
  lVar5 = *(long *)(this + 0x1270);
  uVar7 = *(uint *)((long)&nlist_00145998.n_strx + lVar5);
  uVar12 = *(uint *)(lVar5 + 0x9138);
  param2 = *(uint *)(lVar5 + 0x913c);
  uVar1 = *(uint *)(lVar5 + 0x9134);
  uVar13 = *(uint *)(lVar5 + 0x9120);
  uVar2 = *(uint *)(lVar5 + 0x9140);
  param1 = ~uVar2 & 0xf00ff;
  uVar3 = *(uint *)(lVar5 + 0xd00);
  SafeForceWake(this,0,5);
  uVar13 = uVar13 >> 0x1c;
  *(uint *)(this + 0x1150) = uVar13;
  _IOLog("[IGPU] HWCAPS - GPU Sku: %u\n",uVar13);
  _kprintf("[IGPU] HWCAPS - GPU Sku: %u\n",*(uint *)(this + 0x1150));
  uVar13 = POPCOUNT(~uVar2 & 0xff);
  _IOLog("[IGPU] HWCAPS - VEDBOXEnableFuses:0x%x  VEBox units enabled:%u   VDBox units enabled:%u\n"
         ,param1,POPCOUNT(param1 >> 8),uVar13);
  _kprintf("[IGPU] HWCAPS - VEDBOXEnableFuses:0x%x  VEBox units enabled:%u   VDBox units enabled:%u\n"
           ,param1,POPCOUNT(param1 >> 8),uVar13);
  uVar8 = *(ulong *)(this + 0x1340);
  if (uVar8 != 0) {
    uVar9 = 0;
    if (uVar8 != 0) {
      for (; (uVar8 >> uVar9 & 1) == 0; uVar9 = uVar9 + 1) {
      }
    }
    do {
      uVar8 = uVar9 + 1;
      if (((uVar9 & 0xfffffffffffffffd) != 0) &&
         ((*(uint *)(&DAT_00123931 + uVar9 * 0x79) & param1) == 0)) {
        bVar6 = (&kIGHwCsDesc)[uVar9 * 0x79] & 0x3f;
        *(ulong *)(this + (long)(&DAT_00001340 +
                                (ulong)((byte)(&kIGHwCsDesc)[uVar9 * 0x79] >> 6) * 8)) =
             *(ulong *)(this + (long)(&DAT_00001340 +
                                     (ulong)((byte)(&kIGHwCsDesc)[uVar9 * 0x79] >> 6) * 8)) &
             (-2L << bVar6 | 0xfffffffffffffffeU >> 0x40 - bVar6);
      }
      if (4 < uVar8) break;
      uVar10 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar8 >> 6) * 8)) >> ((byte)uVar8 & 0x3f))
               << ((byte)uVar8 & 0x3f);
      lVar5 = 0;
      if (uVar10 != 0) {
        for (; (uVar10 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
        }
      }
      uVar9 = (uVar8 & 0xffffffffffffffc0) + lVar5;
    } while (uVar10 != 0);
  }
  if (*(int *)(this + 0x1140) != 0) {
    uVar13 = 0;
    iVar11 = 0;
    do {
      iVar11 = iVar11 + (uint)((uVar12 >> (uVar13 & 0x1f) & 1) != 0);
      uVar13 = uVar13 + 1;
    } while (uVar13 != 8);
  }
  *(int *)(this + 0x1190) = iVar11;
  _IOLog("[IGPU] HWCAPS - NumSlices:%d      SliceCountFuse:0x%x\n",iVar11,uVar12);
  _kprintf("[IGPU] HWCAPS - NumSlices:%d      SliceCountFuse:0x%x\n",*(int *)(this + 0x1190),uVar12)
  ;
  *(int *)(this + 0x1188) = POPCOUNT(~param2);
  *(uint *)(this + 0x118c) = param2;
  _IOLog("[IGPU] HWCAPS - NumSubSlices:%u   SubSliceCountFuse:0x%x\n",POPCOUNT(~param2),param2);
  _kprintf("[IGPU] HWCAPS - NumSubSlices:%u   SubSliceCountFuse:0x%x\n",*(uint *)(this + 0x1188),
           param2);
  uVar12 = POPCOUNT(uVar1 & 0xff);
  iVar11 = 8 - uVar12;
  *(int *)(this + 0x11a0) = iVar11;
  *(int *)(this + 0x1154) = *(int *)(this + 0x1188) * iVar11;
  _IOLog("[IGPU] HWCAPS - MaxEUPerSubSlice:%u   EUDisableFuses:0x%x  ExecutionUnitCount:%u\n",iVar11
         ,uVar12);
  _kprintf("[IGPU] HWCAPS - MaxEUPerSubSlice:%u   EUDisableFuses:0x%x  ExecutionUnitCount:%u\n",
           *(uint *)(this + 0x11a0),uVar12,*(uint *)(this + 0x1154));
  *(uint *)(this + 0x1180) = (uVar7 & 0xff) * 0x32;
  *(uint *)(this + 0x1184) = (uVar7 >> 0x10 & 0xff) * 0x32;
  this[0x11c0] = (IntelAccelerator)((byte)this[0x11c0] & 0xf7);
  iVar11 = *(int *)(this + 0x1188);
  iVar4 = *(int *)(this + 0x1190);
  *(int *)(this + 0x12cc) = iVar4;
  *(int *)(this + 0x12d0) = iVar11;
  if (iVar4 == 2) {
    if (iVar11 != 8) goto switchD_00026d14_caseD_2;
    *(undefined4 *)(this + 0x1198) = 8;
    if (*(int *)(this + 0x1150) == 1) {
      fmt = "[IGPU] HWCAPS - GPU Sku: ICL GT2 HP\n";
      goto LAB_00026eaa;
    }
    fmt_00 = 
    "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 2 Slices x 8 SubSlice configuration!\n";
    _IOLog(
          "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 2 Slices x 8 SubSlice configuration!\n"
          );
    fmt = "[IGPU] HWCAPS - GPU Sku: ICL GT2 HP\n";
    uVar7 = 1;
  }
  else {
    if (iVar4 != 1) {
switchD_00026d14_caseD_2:
      getGPUInfo();
      return;
    }
    switch(iVar11) {
    case 1:
      *(undefined4 *)(this + 0x1198) = 6;
      if (*(int *)(this + 0x1150) == 0xf) {
        fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x1x8 LP\n";
        goto LAB_00026eaa;
      }
      fmt_00 = 
      "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 1 SubSlice configuration!\n";
      _IOLog(
            "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 1 SubSlice configuration!\n"
            );
      fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x1x8 LP\n";
      uVar7 = 0xf;
      break;
    default:
      goto switchD_00026d14_caseD_2;
    case 4:
      *(undefined4 *)(this + 0x1198) = 6;
      if (*(int *)(this + 0x1150) == 0xb) {
        fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x4x8 LP\n";
        goto LAB_00026eaa;
      }
      fmt_00 = 
      "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 4 SubSlice configuration!\n";
      _IOLog(
            "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 4 SubSlice configuration!\n"
            );
      fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x4x8 LP\n";
      uVar7 = 0xb;
      break;
    case 6:
      *(undefined4 *)(this + 0x1198) = 6;
      if (*(int *)(this + 0x1150) == 9) {
        fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x6x8 LP\n";
        goto LAB_00026eaa;
      }
      fmt_00 = 
      "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 6 SubSlice configuration!\n";
      _IOLog(
            "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 6 SubSlice configuration!\n"
            );
      fmt = "[IGPU] HWCAPS - GPU Sku: ICL 1x6x8 LP\n";
      uVar7 = 9;
      break;
    case 8:
      *(undefined4 *)(this + 0x1198) = 8;
      if (*(int *)(this + 0x1150) == 8) {
        fmt = "[IGPU] HWCAPS - GPU Sku: ICL GT2 LP\n";
        goto LAB_00026eaa;
      }
      fmt_00 = 
      "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 8 SubSlice configuration!\n";
      _IOLog(
            "[IGPU] HWCAPS - ERROR: GPU Sku (%u) is invalid for 1 Slice x 8 SubSlice configuration!\n"
            );
      fmt = "[IGPU] HWCAPS - GPU Sku: ICL GT2 LP\n";
      uVar7 = 8;
    }
  }
  _kprintf(fmt_00,(ulong)*(uint *)(this + 0x1150));
  _IOLog("[IGPU] HWCAPS - TEMP HACK: Forcing GPU Sku to %u\n",uVar7);
  _kprintf("[IGPU] HWCAPS - TEMP HACK: Forcing GPU Sku to %u\n",uVar7);
  *(uint *)(this + 0x1150) = uVar7;
LAB_00026eaa:
  _IOLog(fmt);
  _kprintf(fmt);
  uVar12 = uVar3 >> 3 & 7;
  uVar7 = 24000000;
  if (uVar12 < 4) {
    uVar7 = *(uint *)(&DAT_0010bfc0 + (ulong)uVar12 * 4);
  }
  uVar7 = uVar7 >> ((byte)~(byte)uVar3 >> 1 & 3);
  _g_timestampFreqPerDenominator = (ulong)(uVar7 >> 5) / 0xc35;
  *(uint *)(this + 0x11bc) = uVar7;
  _IOLog("[IGPU] HWCAPS - L3BankCount: %u\n",*(undefined4 *)(this + 0x1198));
  _kprintf("[IGPU] HWCAPS - L3BankCount: %u\n",*(uint *)(this + 0x1198));
  uVar8 = initHardwareCaps(this);
  if ((char)uVar8 != '\0') {
    return;
  }
  _IOLog("[IGPU] HWCAPS initHardwareCapsFailed fNumSubSlices: %d.\n",*(undefined4 *)(this + 0x1188))
  ;
  _kprintf("[IGPU] HWCAPS initHardwareCapsFailed fNumSubSlices: %d.\n",*(int *)(this + 0x1188));
  return;
}



// IntelAccelerator::teardownDevice(IOPCIDevice*)

void IntelAccelerator::teardownDevice(void)

{
  return;
}



// IntelAccelerator::systemWillSleep()

void __thiscall IntelAccelerator::systemWillSleep(IntelAccelerator *this)

{
  IGAccelTraceStreamManager::disableCollection((IGAccelTraceStreamManager *)(this + 0xe18),1);
  (**(code **)(**(long **)(this + 0x1280) + 0x118))();
  IGStolenMemoryPool::purge(*(IGStolenMemoryPool **)(*(long *)(this + 0x1290) + 0x78));
  (**(code **)(__got::vtable + 0x9e8))(this);
  IGInterruptBridge::systemWillSleep(*(IGInterruptBridge **)(this + 0x1278));
  this[0x3718] = (IntelAccelerator)0x0;
  return;
}



// IntelAccelerator::systemDidWake()

void __thiscall IntelAccelerator::systemDidWake(IntelAccelerator *this)

{
  long lVar1;
  
  lVar1 = 0x4ae;
  do {
    *(undefined4 *)(this + lVar1 * 4) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x4b1);
  IGInterruptBridge::systemDidWake(*(IGInterruptBridge **)(this + 0x1278));
  (**(code **)(**(long **)(this + 0x1280) + 0x120))();
  IGAccelTraceStreamManager::enableCollection((IGAccelTraceStreamManager *)(this + 0xe18),2);
                    // WARNING: Could not recover jumptable at 0x0002706b. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f0))(this);
  return;
}



// IntelAccelerator::systemWillChangeSpeed()

void IntelAccelerator::systemWillChangeSpeed(void)

{
                    // WARNING: Could not recover jumptable at 0x0002707e. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f8))();
  return;
}



// IntelAccelerator::systemDidChangeSpeed()

void IntelAccelerator::systemDidChangeSpeed(void)

{
                    // WARNING: Could not recover jumptable at 0x00027090. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa00))();
  return;
}



// IntelAccelerator::newMemoryManager()

void IntelAccelerator::newMemoryManager(void)

{
                    // WARNING: Could not recover jumptable at 0x000270a8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IntelICLMemoryManager::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newEventMachine()

void IntelAccelerator::newEventMachine(void)

{
                    // WARNING: Could not recover jumptable at 0x000270c0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelEventMachine::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newDisplayMachine()

void IntelAccelerator::newDisplayMachine(void)

{
                    // WARNING: Could not recover jumptable at 0x000270d8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelDisplayMachine::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newDisplayPipe()

void IntelAccelerator::newDisplayPipe(void)

{
                    // WARNING: Could not recover jumptable at 0x000270f0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelDisplayPipe::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newSharedUserClient()

void IntelAccelerator::newSharedUserClient(void)

{
                    // WARNING: Could not recover jumptable at 0x00027108. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelSharedUserClient::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newDevice()

void IntelAccelerator::newDevice(void)

{
                    // WARNING: Could not recover jumptable at 0x00027120. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelDevice::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newGLContext()

void IntelAccelerator::newGLContext(void)

{
                    // WARNING: Could not recover jumptable at 0x00027138. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelGLContext::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newCLContext()

void IntelAccelerator::newCLContext(void)

{
                    // WARNING: Could not recover jumptable at 0x00027150. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelCLContext::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newSurface()

void IntelAccelerator::newSurface(void)

{
                    // WARNING: Could not recover jumptable at 0x00027168. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelSurface::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::new2DContext()

void IntelAccelerator::new2DContext(void)

{
                    // WARNING: Could not recover jumptable at 0x00027180. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccel2DContext::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newVideoContext()

undefined8 IntelAccelerator::newVideoContext(void)

{
  return 0;
}



// IntelAccelerator::newContext(unsigned int)

void __thiscall IntelAccelerator::newContext(IntelAccelerator *this,int param_1)

{
  undefined **ppuVar1;
  
  if (param_1 == 0x102) {
    ppuVar1 = &IGAccelVideoContextVEBox::metaClass;
  }
  else if (param_1 == 0x101) {
    ppuVar1 = &IGAccelVideoContextMedia::metaClass;
  }
  else {
    if (param_1 != 0x100) {
                    // WARNING: Could not recover jumptable at 0x000271d8. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(__got::vtable + 0xa68))();
      return;
    }
    ppuVar1 = &IGAccelVideoContextMain::metaClass;
  }
                    // WARNING: Could not recover jumptable at 0x000271ca. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)*ppuVar1 + 0x88))();
  return;
}



// IntelAccelerator::newSysMemory()

void IntelAccelerator::newSysMemory(void)

{
                    // WARNING: Could not recover jumptable at 0x000271f0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelSysMemory::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newResource()

void IntelAccelerator::newResource(void)

{
                    // WARNING: Could not recover jumptable at 0x00027208. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelResource::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newStatistics()

void IntelAccelerator::newStatistics(void)

{
                    // WARNING: Could not recover jumptable at 0x00027220. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelStatistics::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newMemoryMap()

void IntelAccelerator::newMemoryMap(void)

{
                    // WARNING: Could not recover jumptable at 0x00027238. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelMemoryMap::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newVidMemory()

undefined8 IntelAccelerator::newVidMemory(void)

{
  return 0;
}



// IntelAccelerator::newCommandQueue()

void IntelAccelerator::newCommandQueue(void)

{
                    // WARNING: Could not recover jumptable at 0x00027258. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelCommandQueue::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newCommandDescriptor()

void IntelAccelerator::newCommandDescriptor(void)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)_IOMallocTypeImpl(IGAccelCommandDescriptor::operator_new);
  *puVar1 = &__const::init;
  return;
}



// IntelAccelerator::deleteCommandDescriptor(IOAccelCommandDescriptor*)

void __thiscall IntelAccelerator::deleteCommandDescriptor(IntelAccelerator *this,long *param_1)

{
  if (param_1 != (long *)0x0) {
                    // WARNING: Could not recover jumptable at 0x0002728a. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*param_1 + 0x10))(param_1);
    return;
  }
  return;
}



// IntelAccelerator::newBlockFence()

void IntelAccelerator::newBlockFence(void)

{
                    // WARNING: Could not recover jumptable at 0x000272a2. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(IGAccelBlockFence::gMetaClass + 0x88))();
  return;
}



// IntelAccelerator::newCLHardwareContext(IGAccelTask*)

void __thiscall IntelAccelerator::newCLHardwareContext(IntelAccelerator *this,long param_1)

{
  IGHardwareContext::withOptions(param_1,(undefined8 *)&g_cInitGfxHwCtxParamsForCompute,2);
  return;
}



// IntelAccelerator::SafeForceWake(bool, unsigned int)

void __thiscall IntelAccelerator::SafeForceWake(IntelAccelerator *this,byte param_1,uint param_2)

{
  undefined8 *puVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  
  if ((param_2 == 0) || ((*(ulong *)(this + 0x11c0) & 0x1000) != 0)) {
    return;
  }
  if (((uint)*(ulong *)(this + 0x11c0) >> 0xb & 1) == 0) {
                    // WARNING: Could not recover jumptable at 0x00027314. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(long *)(this + 0xdf8) + 8))(param_1,param_2);
    return;
  }
  puVar1 = *(undefined8 **)(this + 0x1468);
  _lck_spin_lock(*puVar1);
  if (((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 1,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
  }
  if ((param_2 & 1) == 0) {
    uVar4 = 0;
    if ((param_2 & 2) != 0) {
      iVar2 = *(int *)(this + 0x12bc);
      uVar4 = 0;
      if (param_1 == 0) {
LAB_00027441:
        *(int *)(this + 0x12bc) = iVar2 + -1;
        uVar3 = 0;
        if (iVar2 == 1) goto LAB_0002744d;
      }
      else {
LAB_00027547:
        *(int *)(this + 0x12bc) = iVar2 + 1;
        uVar3 = 0;
        if (iVar2 < 1) {
LAB_0002744d:
          uVar3 = 2;
        }
      }
      uVar4 = uVar4 | uVar3;
    }
    if ((param_2 & 4) != 0) {
      iVar2 = *(int *)(this + 0x12c0);
      if (param_1 == 0) goto LAB_00027470;
LAB_00027526:
      *(int *)(this + 0x12c0) = iVar2 + 1;
      uVar3 = 0;
      if (iVar2 < 1) goto LAB_0002747c;
LAB_00027481:
      uVar4 = uVar4 | uVar3;
    }
    if (uVar4 == 0) goto LAB_0002749b;
    uVar4 = uVar4 & param_2;
  }
  else {
    iVar2 = *(int *)(this + 0x12b8);
    if (param_1 == 0) {
      *(int *)(this + 0x12b8) = iVar2 + -1;
      if (iVar2 == 1) {
        uVar4 = 1;
        if ((param_2 & 2) != 0) {
LAB_00027434:
          iVar2 = *(int *)(this + 0x12bc);
          goto LAB_00027441;
        }
        uVar4 = 1;
        if ((param_2 & 4) == 0) goto LAB_0002748a;
      }
      else {
        uVar4 = 0;
        if ((param_2 & 2) != 0) goto LAB_00027434;
        uVar4 = 0;
        if ((param_2 & 4) == 0) goto LAB_0002749b;
      }
      iVar2 = *(int *)(this + 0x12c0);
LAB_00027470:
      *(int *)(this + 0x12c0) = iVar2 + -1;
      uVar3 = 0;
      if (iVar2 == 1) {
LAB_0002747c:
        uVar3 = 4;
      }
      goto LAB_00027481;
    }
    *(int *)(this + 0x12b8) = iVar2 + 1;
    if (0 < iVar2) {
      uVar4 = 0;
      if ((param_2 & 2) != 0) goto LAB_0002753a;
      uVar4 = 0;
      if ((param_2 & 4) == 0) goto LAB_0002749b;
LAB_00027519:
      iVar2 = *(int *)(this + 0x12c0);
      goto LAB_00027526;
    }
    uVar4 = 1;
    if ((param_2 & 2) != 0) {
LAB_0002753a:
      iVar2 = *(int *)(this + 0x12bc);
      goto LAB_00027547;
    }
    uVar4 = 1;
    if ((param_2 & 4) != 0) goto LAB_00027519;
  }
LAB_0002748a:
  SafeForceWakeMultithreaded(this,(uint)param_1,uVar4,1);
LAB_0002749b:
  puVar1 = *(undefined8 **)(this + 0x1468);
  if (((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 2,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
  }
  _lck_spin_unlock(*puVar1);
  return;
}



// IntelAccelerator::initModeRegisters()

void __thiscall IntelAccelerator::initModeRegisters(IntelAccelerator *this)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  
  uVar2 = *(ulong *)(this + 0x1340);
  if (uVar2 != 0) {
    lVar3 = 0;
    if (uVar2 != 0) {
      for (; (uVar2 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
      }
    }
    lVar1 = *(long *)(this + 0x1270);
    do {
      uVar2 = lVar3 + 1;
      *(undefined4 *)
       (lVar1 + (ulong)*(uint *)((long)&__const::_RESERVEDOSMetaClass1 + uVar2 * 0x79)) = 0x80000;
      if (4 < uVar2) break;
      uVar4 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar2 >> 6) * 8)) >> ((byte)uVar2 & 0x3f))
              << ((byte)uVar2 & 0x3f);
      lVar3 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
        }
      }
      lVar3 = (uVar2 & 0xffffffffffffffc0) + lVar3;
    } while (uVar4 != 0);
  }
  if (((byte)this[0x11c1] & 1) != 0) {
    lVar3 = *(long *)(this + 0x1270);
    *(undefined4 *)(lVar3 + 0x24d0) = 0xe100;
    *(undefined4 *)(lVar3 + 0x24d4) = 0x7010;
    *(undefined4 *)(lVar3 + 0x24d8) = 0x7034;
    *(undefined4 *)(lVar3 + 0x24dc) = 0x7008;
    *(undefined4 *)(lVar3 + 0x24e0) = 0x2580;
    if (((byte)this[0xf93] & 8) != 0) {
      *(undefined4 *)(lVar3 + 0x24ec) = 0xe18c;
    }
    *(undefined4 *)(lVar3 + 0x24f4) = 0x731c;
    if ((*(ulong *)(this + 0x1002) >> 0x29 & 1) != 0) {
      *(undefined4 *)(lVar3 + 0x24f8) = 0x10002351;
      *(undefined4 *)(lVar3 + 0x24fc) = 0x10002341;
      *(undefined4 *)(lVar3 + 0x2010) = 0x10000d8e;
      *(undefined4 *)(lVar3 + 0x2014) = 0x10002910;
      *(undefined4 *)(lVar3 + 0x2018) = 0x1000a01c;
      *(undefined4 *)(lVar3 + 0x201c) = 0x10002b10;
    }
  }
  return;
}



// IntelAccelerator::initHardwareStatusPageRegisters()

void __thiscall IntelAccelerator::initHardwareStatusPageRegisters(IntelAccelerator *this)

{
  uint uVar1;
  undefined4 uVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  
  uVar4 = *(ulong *)(this + 0x1340);
  if (uVar4 != 0) {
    lVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
      }
    }
    do {
      uVar4 = lVar5 + 1;
      uVar1 = *(uint *)(&DAT_00123915 + lVar5 * 0x79);
      uVar2 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + uVar4 * 8 + 0x1408));
      *(undefined4 *)(*(long *)(this + 0x1270) + (ulong)uVar1) = uVar2;
      if (4 < uVar4) {
        return;
      }
      uVar3 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >> ((byte)uVar4 & 0x3f))
              << ((byte)uVar4 & 0x3f);
      lVar5 = 0;
      if (uVar3 != 0) {
        for (; (uVar3 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
        }
      }
      lVar5 = (uVar4 & 0xffffffffffffffc0) + lVar5;
    } while (uVar3 != 0);
  }
  return;
}



// IntelAccelerator::populateResetRegisterList()

void __thiscall IntelAccelerator::populateResetRegisterList(IntelAccelerator *this)

{
  IGVector<> *this_00;
  undefined4 uVar1;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  undefined4 local_28;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  this_00 = (IGVector<> *)(this + 0x12f0);
  *(undefined8 *)(this + 0x12f0) = 0;
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x2080);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_COMMAND_RCS_HWS_PGA",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_0002777f;
    }
  }
  else {
LAB_0002777f:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x2080);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x2134);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_RING_BUFFER_UHPTR",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027822;
    }
  }
  else {
LAB_00027822:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x2134);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x20c0);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_MAIN_INSTPM",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_000278c5;
    }
  }
  else {
LAB_000278c5:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x20c0);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x7000);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CACHE_MODE_0",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027968;
    }
  }
  else {
LAB_00027968:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x7000);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x7004);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CACHE_MODE_1",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027a0b;
    }
  }
  else {
LAB_00027a0b:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x7004);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)
           (IGAccelCLContext::telemetryMapOABufferMemory + *(long *)(this + 0x1270) + 4);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CONTROL_MI_MODE",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027aae;
    }
  }
  else {
LAB_00027aae:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x209c);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x2090);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CONTROL_3D_CHICKEN3",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027b51;
    }
  }
  else {
LAB_00027b51:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x2090);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x4090);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_COMMANDDBG_ECOCHK",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027bf4;
    }
  }
  else {
LAB_00027bf4:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x4090);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x20a0);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CONTROL_FF_MODE",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027c97;
    }
  }
  else {
LAB_00027c97:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x20a0);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x20e4);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_FF_SLICE_CS_CHICKEN2",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027d3a;
    }
  }
  else {
LAB_00027d3a:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x20e4);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x9430);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_SYSCONFIG_UCGCTL6",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027ddd;
    }
  }
  else {
LAB_00027ddd:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x9430);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x7010);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_COMMON_SLICE_CHICKEN1",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027e80;
    }
  }
  else {
LAB_00027e80:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x7010);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0xd08);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_RCPCONFIG",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027f23;
    }
  }
  else {
LAB_00027f23:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0xd08);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0xe194);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_HALF_SLICE_CHICKEN7",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00027fc6;
    }
  }
  else {
LAB_00027fc6:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0xe194);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0xb004);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_GARBCNTLREG",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00028069;
    }
  }
  else {
LAB_00028069:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0xb004);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x20ec);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CS_DEBUG_MODE1",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_0002810c;
    }
  }
  else {
LAB_0002810c:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x20ec);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x2580);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_CS_CHICKEN1",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_000281af;
    }
  }
  else {
LAB_000281af:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x2580);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x20e0);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_FF_SLICE_CS_CHICKEN1",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 != '\0') {
      lVar4 = *(long *)this_00;
      goto LAB_00028252;
    }
  }
  else {
LAB_00028252:
    *(long *)(this + 0x12f0) = lVar4 + 1;
    lVar2 = *(long *)(this + 0x1300);
    *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
    *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
    *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
    *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
    *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x20e0);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_28 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x1270) + 0x229c);
  _strlcpy((char *)((long)&local_40 + 2),"GFXREG_RCS_GFX_MODE",0x18);
  lVar4 = *(long *)(this + 0x12f0);
  if (lVar4 == *(long *)(this + 0x12f8)) {
    uVar3 = IGVector<>::grow(this_00,lVar4 * 2);
    if ((char)uVar3 == '\0') goto LAB_00028335;
    lVar4 = *(long *)this_00;
  }
  *(long *)(this + 0x12f0) = lVar4 + 1;
  lVar2 = *(long *)(this + 0x1300);
  *(undefined4 *)(lVar2 + 0x20 + lVar4 * 0x24) = local_28;
  *(undefined8 *)(lVar2 + 0x18 + lVar4 * 0x24) = local_30;
  *(undefined8 *)(lVar2 + 0x10 + lVar4 * 0x24) = local_38;
  *(undefined8 *)(lVar2 + 8 + lVar4 * 0x24) = local_40;
  *(ulong *)(lVar2 + lVar4 * 0x24) = CONCAT44(uVar1,0x229c);
LAB_00028335:
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IntelAccelerator::PAVPCommandCallback(PAVPSessionCommandID_t, unsigned int, unsigned int*, bool)

ulong __thiscall
IntelAccelerator::PAVPCommandCallback
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          int param_10,ulong param_11,undefined8 *param_12,char param_13)

{
  char cVar1;
  byte bVar2;
  int iVar3;
  uintptr_t arg1;
  long lVar4;
  undefined8 uVar5;
  int *piVar6;
  ulong uVar7;
  uint uVar8;
  ulong uVar9;
  bool bVar10;
  undefined8 uVar11;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 *local_90;
  undefined1 local_88;
  undefined1 uStack_87;
  undefined2 uStack_86;
  undefined4 uStack_84;
  undefined4 uStack_80;
  uint uStack_7c;
  undefined4 uStack_78;
  int iStack_74;
  undefined4 uStack_70;
  undefined4 local_6c;
  undefined4 local_68;
  uint local_64;
  ulong local_60;
  uint local_58;
  uint local_54;
  ulong local_50;
  undefined8 local_48;
  undefined4 local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  if (param_10 == 6) {
    if (param_13 == '\0') {
      *(undefined1 *)((long)this + 0x3718) = 1;
      uVar9 = 0;
      goto LAB_000286c6;
    }
    _OSIncrementAtomic((long)this + 0x90);
    _IOLockLock(*(undefined8 *)((long)this + 0x88));
    _OSDecrementAtomic((long)this + 0x90);
    IOGraphicsAccelerator2::lock_busy();
    uVar9 = 0;
    (**(code **)(*(long *)this + 0x850))(this,"",0);
    *(undefined1 *)((long)this + 0x3718) = 1;
    lVar4 = *(long *)this;
LAB_000286aa:
    (**(code **)(lVar4 + 0x858))(this,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(*(undefined8 *)((long)this + 0x88));
  }
  else {
    if (param_10 == 3) {
      SafeForceWake(this,1,2);
      PAVPCommandCallback(PAVPSessionCommandID_t,unsigned_int,unsigned_int*,bool)::fPavpEnabled =
           (~*(uint *)(&DAT_001082c0 + *(long *)((long)this + 0x1270)) & 6) == 0;
      SafeForceWake(this,0,2);
      if (PAVPCommandCallback(PAVPSessionCommandID_t,unsigned_int,unsigned_int*,bool)::fPavpEnabled
          != '\0') {
LAB_00028462:
        uVar9 = 0xe00002bc;
        local_90 = param_12;
        if ((*(byte *)((long)this + 0xc78) & 2) == 0) goto LAB_000286c6;
        local_54 = 0;
        local_40 = 0;
        local_48 = 0;
        local_50 = 0x413000003;
        local_98 = 0;
        local_a0 = 0;
        local_a8 = 0x4000000176090004;
        local_64 = (uint)param_11 & 0x80;
        uVar11 = 0;
        local_58 = 1 << ((byte)(local_64 >> 3) | (byte)param_11 & 0xf);
        if (param_13 == '\0') {
          iVar3 = _IOLockTryLock(*(undefined8 *)((long)this + 0x88));
          if (iVar3 == 0) {
            if (*(int *)__got::___ktrace_kernel_enabled != 0) {
              arg1 = IORegistryEntry::getRegistryEntryID();
              _kernel_debug(0x8512001c,arg1,0,0,0,0);
            }
            uVar9 = 0xe00002d8;
            if ((*(byte *)((long)this + 0xc78) & 2) == 0) goto LAB_000286c6;
            local_60 = local_60 & 0xffffffff00000000;
          }
          else {
            IOGraphicsAccelerator2::lock_busy();
            uVar11 = (**(code **)(*(long *)this + 0x850))(this,"",0);
            local_60 = CONCAT44(local_60._4_4_,(int)CONCAT71((int7)((ulong)uVar11 >> 8),1));
            uVar9 = 0xe00002d8;
            bVar2 = *(byte *)((long)this + 0xc78) & 2;
joined_r0x000285b7:
            if (bVar2 == 0) goto LAB_0002869d;
          }
LAB_0002865e:
          uVar11 = SafeForceWake(this,1,7);
          uVar8 = local_58;
          if (param_10 == 3) {
            (**(code **)(*(long *)((long)this + 0xdf8) + 0x20))(1);
LAB_00028685:
            uVar9 = 0;
          }
          else {
            if (param_10 == 4) {
              iVar3 = *(int *)(*(long *)((long)this + 0x1270) + 0x320fc);
              local_88 = (undefined1)iVar3;
              uStack_87 = (undefined1)((uint)iVar3 >> 8);
              uStack_86 = (undefined2)((uint)iVar3 >> 0x10);
              if (-1 < iVar3) {
                uVar8 = 0;
                do {
                  _IOSleep(10);
                  iVar3 = *(int *)(*(long *)((long)this + 0x1270) + 0x320fc);
                  local_88 = (undefined1)iVar3;
                  uStack_87 = (undefined1)((uint)iVar3 >> 8);
                  uStack_86 = (undefined2)((uint)iVar3 >> 0x10);
                  if (iVar3 < 0) break;
                  bVar10 = uVar8 < 199;
                  uVar8 = uVar8 + 1;
                } while (bVar10);
              }
              goto LAB_00028685;
            }
            uVar7 = param_11 & 0xff;
            if (param_10 - 1U < 2) {
              uVar9 = 0xe00002c2;
              if ((local_90 != (undefined8 *)0x0) && (param_13 != '\0')) {
                lVar4 = *(long *)((long)this + 0x1270);
                if (local_64 == 0) {
                  local_54 = *(uint *)(lVar4 + 0x32260);
                }
                else {
                  local_54 = *(uint *)(lVar4 + 0x32504) | *(uint *)(lVar4 + 0x3a504);
                }
                if ((local_54 & local_58) == 0) {
                  local_a0 = 0;
                  local_98 = 0;
                  appsPavpSessionMgmt(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                      ,this,0x2f,0,uVar7,&local_50,(int *)&local_a8,'\x01','\x01');
                }
                else {
                  if (param_10 == 1) {
                    piVar6 = (int *)&local_a8;
                    local_a0 = *local_90;
                    local_98 = local_90[1];
                    uVar5 = 1;
                  }
                  else {
                    uStack_87 = 0;
                    local_88 = 7;
                    uStack_86 = 0x760a;
                    uStack_84 = 3;
                    uStack_78 = *(undefined4 *)local_90;
                    lVar4 = local_90[1];
                    local_6c = *(undefined4 *)(local_90 + 2);
                    local_68 = *(undefined4 *)((long)local_90 + 0x14);
                    uStack_80 = (undefined4)lVar4;
                    uStack_7c = (uint)((ulong)lVar4 >> 0x20) & 0xffff;
                    uVar9 = lVar4 + 0x20U & 0xfffffffffff8;
                    uStack_70 = (undefined4)(uVar9 >> 0x20);
                    iStack_74 = (int)uVar9 + 6;
                    if (lVar4 == 0) {
                      uVar9 = 0xe00002bd;
                      goto LAB_00028688;
                    }
                    piVar6 = (int *)&local_88;
                    uVar5 = 2;
                  }
                  uVar9 = appsPavpSessionMgmt(uVar11,param_2,param_3,param_4,param_5,param_6,param_7
                                              ,param_8,this,0x2f,uVar5,uVar7,&local_50,piVar6,'\x01'
                                              ,'\x01');
                  uVar9 = uVar9 & 0xffffffff;
                  if (local_64 == 0) {
                    local_54 = *(uint *)(*(long *)((long)this + 0x1270) + 0x32260);
                  }
                  if ((local_54 & uVar8) != 0) goto LAB_00028688;
                  local_a0 = 0;
                  local_98 = 0;
                  appsPavpSessionMgmt(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,
                                      param_7,param_8,this,0x2f,0,uVar7,&local_50,(int *)&local_a8,
                                      '\x01','\x01');
                  (**(code **)(*(long *)((long)this + 0xdf8) + 0x10))(2);
                }
                uVar9 = 0xe00002bc;
              }
            }
            else {
              if ((*(uint *)(*(long *)((long)this + 0x1270) + 0x32260) & local_58) == 0) {
                uVar9 = 0;
              }
              else {
                local_a0 = 0;
                local_98 = 0;
                uVar9 = appsPavpSessionMgmt(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,
                                            param_8,this,0x2f,0,uVar7,&local_50,(int *)&local_a8,
                                            param_13,'\x01');
                uVar9 = uVar9 & 0xffffffff;
              }
              if (param_13 != '\0') {
                if (((uint)uVar7 < 0x10) &&
                   ((*(uint *)(*(long *)((long)this + 0x1270) + 0x32260) & 0xffff) == 0)) {
                  *(undefined4 *)(*(long *)((long)this + 0x1270) + 0x320f8) = 1;
                }
              }
            }
          }
LAB_00028688:
          SafeForceWake(this,0,7);
          if ((char)local_60 == '\0') goto LAB_000286c6;
        }
        else {
          local_60 = *(ulong *)(*(long *)((long)this + 0x12a0) + 0xb0);
          _OSIncrementAtomic((long)this + 0x90);
          _IOLockLock(*(undefined8 *)((long)this + 0x88));
          _OSDecrementAtomic((long)this + 0x90);
          IOGraphicsAccelerator2::lock_busy();
          (**(code **)(*(long *)this + 0x850))(this,"",0);
          uVar9 = 0xe00002d8;
          if ((*(byte *)((long)this + 0xc78) & 2) != 0) {
            if (param_10 == 0) {
              IGAccelEventMachine::finishAllStamps
                        (*(IGAccelEventMachine **)((long)this + 0x380),0x2b);
            }
            else {
              IGAccelEventMachine::finishStamp
                        (*(IGAccelEventMachine **)((long)this + 0x380),
                         (ulong)*(uint *)(local_60 + 0x20),0x2b);
            }
            cVar1 = (**(code **)(**(long **)((long)this + 0x1280) + 0x168))
                              (*(long **)((long)this + 0x1280),*(undefined8 *)((long)this + 0x12a0))
            ;
            local_60 = CONCAT44(local_60._4_4_,(int)CONCAT71((int7)((ulong)uVar11 >> 8),1));
            if (cVar1 == '\0') {
              _IOSleep(0x32);
              bVar2 = (**(code **)(**(long **)((long)this + 0x1280) + 0x168))
                                (*(long **)((long)this + 0x1280),
                                 *(undefined8 *)((long)this + 0x12a0));
              uVar9 = 0xe00002d6;
              goto joined_r0x000285b7;
            }
            goto LAB_0002865e;
          }
        }
LAB_0002869d:
        lVar4 = *(long *)this;
        goto LAB_000286aa;
      }
      (**(code **)(*(long *)((long)this + 0xdf8) + 0x20))(1);
    }
    else if (PAVPCommandCallback(PAVPSessionCommandID_t,unsigned_int,unsigned_int*,bool)::
             fPavpEnabled != '\0') goto LAB_00028462;
    uVar9 = 0xe00002c0;
  }
LAB_000286c6:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return uVar9;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IntelAccelerator::noopBuffer(unsigned int*)

undefined8 __thiscall IntelAccelerator::noopBuffer(IntelAccelerator *this,undefined4 *param_1)

{
  *param_1 = 0;
  return 1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::transferOwnership(IGSharedMappedBuffer const*, int)

void __cdecl IntelAccelerator::transferOwnership(long param_1,IGMappedBuffer *param_2)

{
  ulonglong uVar1;
  long *plVar2;
  ulong uVar3;
  ulong uVar4;
  
  if (((&DAT_000011c0)[param_1] & 0x20) != 0) {
    uVar1 = OSMetaClassBase::safeMetaCast
                      (*(OSMetaClassBase **)(param_1 + 0x368),*(OSMetaClass **)__got::metaClass);
    plVar2 = (long *)IGMappedBuffer::getMemory(param_2);
    uVar3 = (**(code **)(*plVar2 + 0x120))(plVar2);
    if (uVar3 != 0) {
      uVar4 = 0;
      do {
        (**(code **)(*plVar2 + 0x158))(plVar2,uVar4,0);
        IOPCIDevice::extendedConfigWrite32(uVar1,0xf8);
        IOPCIDevice::extendedConfigWrite32(uVar1,0xfc);
        IOPCIDevice::extendedConfigWrite32(uVar1,0xf8);
        IOPCIDevice::extendedConfigWrite32(uVar1,0xfc);
        IOPCIDevice::extendedConfigRead32(uVar1);
        IOPCIDevice::extendedConfigRead32(uVar1);
        uVar4 = uVar4 + *(long *)__got::_page_size;
      } while (uVar4 < uVar3);
    }
  }
  return;
}



// IntelAccelerator::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall
IntelAccelerator::describeDriverAllocations(IntelAccelerator *this,IOAccelMemory *param_1)

{
  char *pcVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  char local_d8 [160];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  (**(code **)(__got::vtable + 0xae8))();
  local_d8[0x98] = '\0';
  local_d8[0x99] = '\0';
  local_d8[0x9a] = '\0';
  local_d8[0x9b] = '\0';
  local_d8[0x9c] = '\0';
  local_d8[0x9d] = '\0';
  local_d8[0x9e] = '\0';
  local_d8[0x9f] = '\0';
  local_d8[0x90] = '\0';
  local_d8[0x91] = '\0';
  local_d8[0x92] = '\0';
  local_d8[0x93] = '\0';
  local_d8[0x94] = '\0';
  local_d8[0x95] = '\0';
  local_d8[0x96] = '\0';
  local_d8[0x97] = '\0';
  local_d8[0x88] = '\0';
  local_d8[0x89] = '\0';
  local_d8[0x8a] = '\0';
  local_d8[0x8b] = '\0';
  local_d8[0x8c] = '\0';
  local_d8[0x8d] = '\0';
  local_d8[0x8e] = '\0';
  local_d8[0x8f] = '\0';
  local_d8[0x80] = '\0';
  local_d8[0x81] = '\0';
  local_d8[0x82] = '\0';
  local_d8[0x83] = '\0';
  local_d8[0x84] = '\0';
  local_d8[0x85] = '\0';
  local_d8[0x86] = '\0';
  local_d8[0x87] = '\0';
  local_d8[0x78] = '\0';
  local_d8[0x79] = '\0';
  local_d8[0x7a] = '\0';
  local_d8[0x7b] = '\0';
  local_d8[0x7c] = '\0';
  local_d8[0x7d] = '\0';
  local_d8[0x7e] = '\0';
  local_d8[0x7f] = '\0';
  local_d8[0x70] = '\0';
  local_d8[0x71] = '\0';
  local_d8[0x72] = '\0';
  local_d8[0x73] = '\0';
  local_d8[0x74] = '\0';
  local_d8[0x75] = '\0';
  local_d8[0x76] = '\0';
  local_d8[0x77] = '\0';
  local_d8[0x68] = '\0';
  local_d8[0x69] = '\0';
  local_d8[0x6a] = '\0';
  local_d8[0x6b] = '\0';
  local_d8[0x6c] = '\0';
  local_d8[0x6d] = '\0';
  local_d8[0x6e] = '\0';
  local_d8[0x6f] = '\0';
  local_d8[0x60] = '\0';
  local_d8[0x61] = '\0';
  local_d8[0x62] = '\0';
  local_d8[99] = '\0';
  local_d8[100] = '\0';
  local_d8[0x65] = '\0';
  local_d8[0x66] = '\0';
  local_d8[0x67] = '\0';
  local_d8[0x58] = '\0';
  local_d8[0x59] = '\0';
  local_d8[0x5a] = '\0';
  local_d8[0x5b] = '\0';
  local_d8[0x5c] = '\0';
  local_d8[0x5d] = '\0';
  local_d8[0x5e] = '\0';
  local_d8[0x5f] = '\0';
  local_d8[0x50] = '\0';
  local_d8[0x51] = '\0';
  local_d8[0x52] = '\0';
  local_d8[0x53] = '\0';
  local_d8[0x54] = '\0';
  local_d8[0x55] = '\0';
  local_d8[0x56] = '\0';
  local_d8[0x57] = '\0';
  local_d8[0x48] = '\0';
  local_d8[0x49] = '\0';
  local_d8[0x4a] = '\0';
  local_d8[0x4b] = '\0';
  local_d8[0x4c] = '\0';
  local_d8[0x4d] = '\0';
  local_d8[0x4e] = '\0';
  local_d8[0x4f] = '\0';
  local_d8[0x40] = '\0';
  local_d8[0x41] = '\0';
  local_d8[0x42] = '\0';
  local_d8[0x43] = '\0';
  local_d8[0x44] = '\0';
  local_d8[0x45] = '\0';
  local_d8[0x46] = '\0';
  local_d8[0x47] = '\0';
  local_d8[0x38] = '\0';
  local_d8[0x39] = '\0';
  local_d8[0x3a] = '\0';
  local_d8[0x3b] = '\0';
  local_d8[0x3c] = '\0';
  local_d8[0x3d] = '\0';
  local_d8[0x3e] = '\0';
  local_d8[0x3f] = '\0';
  local_d8[0x30] = '\0';
  local_d8[0x31] = '\0';
  local_d8[0x32] = '\0';
  local_d8[0x33] = '\0';
  local_d8[0x34] = '\0';
  local_d8[0x35] = '\0';
  local_d8[0x36] = '\0';
  local_d8[0x37] = '\0';
  local_d8[0x28] = '\0';
  local_d8[0x29] = '\0';
  local_d8[0x2a] = '\0';
  local_d8[0x2b] = '\0';
  local_d8[0x2c] = '\0';
  local_d8[0x2d] = '\0';
  local_d8[0x2e] = '\0';
  local_d8[0x2f] = '\0';
  local_d8[0x20] = '\0';
  local_d8[0x21] = '\0';
  local_d8[0x22] = '\0';
  local_d8[0x23] = '\0';
  local_d8[0x24] = '\0';
  local_d8[0x25] = '\0';
  local_d8[0x26] = '\0';
  local_d8[0x27] = '\0';
  _snprintf(local_d8 + 0x20,0x80,"PAVP Media Context");
  IGHardwareContext::describeDriverAllocations(*(long *)(this + 0x12a0),param_1);
  IGHardwareRingBuffer::describeDriverAllocations();
  uVar4 = *(ulong *)(this + 0x1340);
  if (uVar4 != 0) {
    lVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
      }
    }
    do {
      uVar4 = lVar5 + 1;
      local_d8[0x18] = '\0';
      local_d8[0x19] = '\0';
      local_d8[0x1a] = '\0';
      local_d8[0x1b] = '\0';
      local_d8[0x1c] = '\0';
      local_d8[0x1d] = '\0';
      local_d8[0x1e] = '\0';
      local_d8[0x1f] = '\0';
      local_d8[0x10] = '\0';
      local_d8[0x11] = '\0';
      local_d8[0x12] = '\0';
      local_d8[0x13] = '\0';
      local_d8[0x14] = '\0';
      local_d8[0x15] = '\0';
      local_d8[0x16] = '\0';
      local_d8[0x17] = '\0';
      local_d8[8] = '\0';
      local_d8[9] = '\0';
      local_d8[10] = '\0';
      local_d8[0xb] = '\0';
      local_d8[0xc] = '\0';
      local_d8[0xd] = '\0';
      local_d8[0xe] = '\0';
      local_d8[0xf] = '\0';
      local_d8[0] = '0';
      local_d8[1] = '\0';
      local_d8[2] = '\0';
      local_d8[3] = '\0';
      local_d8[4] = '\0';
      local_d8[5] = '\0';
      local_d8[6] = '\0';
      local_d8[7] = '\0';
      _snprintf(local_d8,0x20,"%s HW Status Page\n",
                *(char **)((long)&PTR_s_RCS_001238e5 + lVar5 * 0x79));
      pcVar1 = (char *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + uVar4 * 8 + 0x1408));
      IOAccelAllocationInfo::addString(param_1,pcVar1);
      uVar2 = IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + uVar4 * 8 + 0x1408));
      IOAccelAllocationInfo::addPID(param_1,(int)uVar2);
      if (4 < uVar4) break;
      uVar3 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >> ((byte)uVar4 & 0x3f))
              << ((byte)uVar4 & 0x3f);
      lVar5 = 0;
      if (uVar3 != 0) {
        for (; (uVar3 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
        }
      }
      lVar5 = (uVar4 & 0xffffffffffffffc0) + lVar5;
    } while (uVar3 != 0);
  }
  IGMemoryManager::describeDriverAllocations();
  IGAccelDisplayMachine::describeDriverAllocations(*(long *)(this + 0x378),param_1);
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IntelAccelerator::initHardwareCaps()

ulong __thiscall IntelAccelerator::initHardwareCaps(IntelAccelerator *this)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined8 unaff_R14;
  ulong uVar5;
  
  switch(*(int *)(this + 0x1150)) {
  case 8:
    *(undefined8 *)(this + 0x115c) = 0x16c000000c0;
    *(undefined8 *)(this + 0x1164) = 0x16c000000e0;
    *(undefined4 *)(this + 0x116c) = 0xe0;
    *(undefined8 *)(this + 0x11a8) = 0x200000007;
    *(undefined8 *)(this + 0x11b0) = 0x1000000080;
    *(undefined4 *)(this + 0x1194) = 0xc00;
    break;
  case 9:
  case 0xb:
    *(undefined8 *)(this + 0x115c) = 0x16c000000c0;
    *(undefined8 *)(this + 0x1164) = 0x16c000000e0;
    *(undefined4 *)(this + 0x116c) = 0xe0;
    *(undefined8 *)(this + 0x11a8) = 0x200000007;
    *(undefined8 *)(this + 0x11b0) = 0x1000000080;
    *(undefined4 *)(this + 0x1194) = 0x900;
    break;
  case 10:
  case 0xc:
  case 0xd:
  case 0xe:
switchD_00028d27_caseD_a:
    uVar5 = 0;
    _IOLog("[IGPU] HWCAPS: invalid Gfx SKU: %d\n");
    _kprintf("[IGPU] HWCAPS: invalid Gfx SKU: %d\n",*(int *)(this + 0x1150));
    goto LAB_00028f62;
  case 0xf:
    *(undefined8 *)(this + 0x115c) = 0x16c000000c0;
    *(undefined8 *)(this + 0x1164) = 0x16c000000e0;
    *(undefined4 *)(this + 0x116c) = 0xe0;
    *(undefined8 *)(this + 0x11a8) = 0x200000007;
    *(undefined8 *)(this + 0x11b0) = 0x1000000080;
    *(undefined4 *)(this + 0x1194) = 0x900;
    *(undefined4 *)(this + 0x1178) = 4;
    uVar1 = *(uint *)(this + 0x1188);
    goto LAB_00028f15;
  default:
    if (*(int *)(this + 0x1150) != 1) goto switchD_00028d27_caseD_a;
    *(undefined8 *)(this + 0x115c) = 0x2d800000180;
    *(undefined8 *)(this + 0x1164) = 0x270000001b0;
    *(undefined4 *)(this + 0x116c) = 0x1b0;
    *(undefined8 *)(this + 0x11a8) = 0x100000007;
    *(undefined8 *)(this + 0x11b0) = 0x1000000040;
    *(undefined4 *)(this + 0x1194) = 0x800;
    *(undefined4 *)(this + 0x1178) = 8;
    uVar1 = *(uint *)(this + 0x1188);
    *(uint *)(this + 0x117c) = uVar1;
    this[0x11b8] = (IntelAccelerator)((byte)this[0x11b8] | 4);
    iVar2 = 1;
    iVar3 = 8;
    iVar4 = 0x40;
    goto LAB_00028f31;
  }
  *(undefined4 *)(this + 0x1178) = 4;
  uVar1 = *(uint *)(this + 0x1188) >> 1;
LAB_00028f15:
  *(uint *)(this + 0x117c) = uVar1;
  this[0x11b8] = (IntelAccelerator)((byte)this[0x11b8] & 0xfb);
  iVar2 = 2;
  iVar3 = 4;
  iVar4 = 0x80;
LAB_00028f31:
  *(uint *)(this + 0x1158) = iVar2 * uVar1;
  *(uint *)(this + 0x1174) = (iVar3 - uVar1) * iVar2;
  *(uint *)(this + 0x1170) = iVar4 * uVar1;
  *(int *)(this + 0x119c) = *(int *)(this + 0x1190) << 4;
  uVar5 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1);
LAB_00028f62:
  return uVar5 & 0xffffffff;
}



// IntelAccelerator::ktraceStateChanged()

void __thiscall IntelAccelerator::ktraceStateChanged(IntelAccelerator *this)

{
  _OSIncrementAtomic(this + 0x90);
  _IOLockLock(*(undefined8 *)(this + 0x88));
  _OSDecrementAtomic(this + 0x90);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*(long *)this + 0x850))(this,"",0);
  IGAccelTraceStreamManager::ktraceStateChanged((IGAccelTraceStreamManager *)(this + 0xe18),0,0);
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  return;
}



// IntelAccelerator::initLocalCallbackSupport()

bool __thiscall IntelAccelerator::initLocalCallbackSupport(IntelAccelerator *this)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)_IOMallocTypeImpl(&initLocalCallbackSupport()::kalloc_type_view_8656);
  *(undefined8 **)(this + 0xdf8) = puVar1;
  if (puVar1 != (undefined8 *)0x0) {
    *puVar1 = _enableCoarsePowerGating;
    puVar1[1] = _SafeForceWake;
    puVar1[2] = _PAVPSessionControl;
    puVar1[4] = _mediaKernelLoad;
    puVar1[5] = _mediaPrepareEncode;
    puVar1[6] = _clientNotify;
    puVar1[7] = _dpsmNotify;
    puVar1[8] = _pmNotify;
    puVar1[9] = _accelWillLoadGuC;
    puVar1[10] = _accelFailedToLoadGuC;
    puVar1[0xb] = _accelDidLoadGuC;
  }
  return puVar1 != (undefined8 *)0x0;
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::_PAVPCommandCallback(OSObject*, PAVPSessionCommandID_t, unsigned int, unsigned
// int*)

void __cdecl
IntelAccelerator::_PAVPCommandCallback
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *param_9,
          int param_10,ulong param_11,undefined8 *param_12)

{
  PAVPCommandCallback(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,param_11,param_12,'\x01');
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::_PAVPCommandCallbackRecovery(OSObject*, PAVPSessionCommandID_t, unsigned int,
// unsigned int*)

void __cdecl
IntelAccelerator::_PAVPCommandCallbackRecovery
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *param_9,
          int param_10,ulong param_11,undefined8 *param_12)

{
  PAVPCommandCallback(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,param_11,param_12,'\0');
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::_DisplaySleepCallback(OSObject*, DisplaySleepCmd_t, unsigned int, unsigned int)

void __cdecl
IntelAccelerator::_DisplaySleepCallback
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long *param_9,
          int param_10,int param_11,undefined8 param_12,char *param_13,char *param_14)

{
  DisplaySleepCallback
            (param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             param_11,param_12,param_13,param_14);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::_FlipCounterCallback(OSObject*, FlipCounterCmd_t, unsigned long long*)

undefined8 __cdecl
IntelAccelerator::_FlipCounterCallback(long param_1,int param_2,undefined8 *param_3)

{
  if (param_2 == 0) {
    *param_3 = *(undefined8 *)(*(long *)(param_1 + 0xe10) + 0x10);
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::_PMSetParamsCallback(OSObject*, void const*)

undefined8 __cdecl IntelAccelerator::_PMSetParamsCallback(long param_1)

{
  undefined8 uVar1;
  
  if (*(long **)(&DAT_00001280 + param_1) != (long *)0x0) {
                    // WARNING: Could not recover jumptable at 0x00029119. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (**(code **)(**(long **)(&DAT_00001280 + param_1) + 0x1e8))();
    return uVar1;
  }
  return 0xe00002d8;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::_PMGetUtilizationSnapshotCallback(OSObject*)

undefined8 __cdecl IntelAccelerator::_PMGetUtilizationSnapshotCallback(long param_1)

{
  undefined8 uVar1;
  
  if (*(long **)(&DAT_00001280 + param_1) != (long *)0x0) {
                    // WARNING: Could not recover jumptable at 0x00029136. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (**(code **)(**(long **)(&DAT_00001280 + param_1) + 0x1f0))();
    return uVar1;
  }
  return 0xe00002d8;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::_ProcessNonDisplayInterruptsCallback(OSObject*, unsigned long long*)

undefined8 __cdecl
IntelAccelerator::_ProcessNonDisplayInterruptsCallback(long param_1,ulong *param_2)

{
  IGInterruptBridge::processInterrupts(*(IGInterruptBridge **)(&DAT_00001278 + param_1),param_2);
  return 0;
}



// IntelAccelerator::sendTranscodeActive(unsigned int)

undefined4 __thiscall
IntelAccelerator::sendTranscodeActive(IntelAccelerator *this,undefined4 param_1)

{
  undefined4 uVar1;
  long lVar2;
  long *plVar3;
  undefined4 local_14;
  
  local_14 = param_1;
  lVar2 = IOAccelDisplayMachine::getDisplayPipe((uint)*(undefined8 *)(this + 0x378));
  uVar1 = 0xe00002d8;
  if (lVar2 != 0) {
    plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
    if (plVar3 != (long *)0x0) {
      uVar1 = (**(code **)(*plVar3 + 0x6b8))(plVar3,_fSymFBCLASSTranscodeActive,1,&local_14,0,0,0);
    }
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::setPowerState(unsigned long, IOService*)

undefined8 __cdecl
IntelAccelerator::setPowerState
          (undefined8 param_1,double param_2_00,ulong param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,IntelAccelerator *param_9,
          long param_10)

{
  undefined8 uVar1;
  
  if (param_10 == 2) {
    if (*(long *)(param_9 + 0x12a8) != 0) goto LAB_00029343;
    (**(code **)(*(long *)(param_9 + 0xdf8) + 0x30))(3,1);
    _OSIncrementAtomic(param_9 + 0x90);
    _IOLockLock(*(undefined8 *)(param_9 + 0x88));
    _OSDecrementAtomic(param_9 + 0x90);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*(long *)param_9 + 0x850))(param_9,"",0);
    (**(code **)(**(long **)(param_9 + 0x1280) + 0x120))();
    uVar1 = IGInterruptBridge::systemDidWake(*(IGInterruptBridge **)(param_9 + 0x1278));
    startGraphicsEngine(uVar1,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
    _IOLockWakeup_darwin14(*(undefined8 *)(param_9 + 0x88),param_9,0);
  }
  else {
    if ((param_10 != 0) || (*(long *)(param_9 + 0x12a8) == 0)) goto LAB_00029343;
    (**(code **)(*(long *)(param_9 + 0xdf8) + 0x30))(3,0);
    _OSIncrementAtomic(param_9 + 0x90);
    _IOLockLock(*(undefined8 *)(param_9 + 0x88));
    _OSDecrementAtomic(param_9 + 0x90);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*(long *)param_9 + 0x850))(param_9,"",0);
    (**(code **)(**(long **)(param_9 + 0x1280) + 0x118))();
    IGStolenMemoryPool::purge(*(IGStolenMemoryPool **)(*(long *)(param_9 + 0x1290) + 0x78));
    IGInterruptBridge::systemWillSleep(*(IGInterruptBridge **)(param_9 + 0x1278));
    stopGraphicsEngine(param_9);
    param_9[0x3718] = (IntelAccelerator)0x0;
  }
  (**(code **)(*(long *)param_9 + 0x858))(param_9,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(param_9 + 0x88));
LAB_00029343:
  *(long *)(param_9 + 0x12a8) = param_10;
  return 0;
}



// IntelAccelerator::signalStampUpdate(IGBitSet<64ul> const&)

void __thiscall IntelAccelerator::signalStampUpdate(IntelAccelerator *this,ulong *param_1)

{
  byte bVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  undefined **ppuVar5;
  ulong uVar6;
  ulong uVar7;
  ulong arg2;
  ulong local_c0 [18];
  
  local_c0[8] = *(ulong *)__got::___stack_chk_guard;
  lVar4 = IGAccelTask::getStamps(*(IGAccelTask **)(this + 0x150));
  local_c0[7] = 0;
  local_c0[6] = 0;
  local_c0[5] = 0;
  local_c0[4] = 0;
  local_c0[3] = 0;
  local_c0[2] = 0;
  local_c0[1] = 0;
  local_c0[0] = 0;
  uVar7 = *param_1;
  if (uVar7 != 0) {
    arg2 = 0;
    if (uVar7 != 0) {
      for (; (uVar7 >> arg2 & 1) == 0; arg2 = arg2 + 1) {
      }
    }
    do {
      uVar7 = arg2 + 1;
      ppuVar5 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
      if ((*(uint *)(this + 0x11c0) & 0x18000) == 0) {
        ppuVar5 = &IG_STAMP_INDEX_TO_HWCS_LUT;
      }
      uVar2 = *(uint *)(lVar4 + arg2 * 0x40);
      if (*(uint *)(this + uVar7 * 4 + 0x1474) != uVar2) {
        bVar1 = *(byte *)((long)ppuVar5 + arg2);
        *(uint *)(this + uVar7 * 4 + 0x1474) = uVar2;
        dtHookCompleteExecute();
        if (_graphicsTracePointEnable != 0) {
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            _kernel_debug(0x85a00034,(ulong)bVar1,arg2,(ulong)uVar2,0,0);
          }
        }
        (**(code **)(**(long **)(this + 0x380) + 0x228))
                  (*(long **)(this + 0x380),arg2 & 0xffffffff,(ulong)uVar2);
        local_c0[arg2 >> 6] = local_c0[arg2 >> 6] | 1L << ((byte)arg2 & 0x3f);
      }
      if (0x3f < uVar7) break;
      uVar6 = (param_1[uVar7 >> 6] >> ((byte)uVar7 & 0x3f)) << ((byte)uVar7 & 0x3f);
      lVar3 = 0;
      if (uVar6 != 0) {
        for (; (uVar6 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
        }
      }
      arg2 = (uVar7 & 0xffffffffffffffc0) + lVar3;
    } while (uVar6 != 0);
    if (local_c0[0] != 0) {
      IOGraphicsAccelerator2::signalStampsUpdated();
    }
  }
  if (*(long *)__got::___stack_chk_guard != local_c0[8]) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IntelAccelerator::signalDisplayStampUpdate(int, unsigned int)

void __thiscall
IntelAccelerator::signalDisplayStampUpdate(IntelAccelerator *this,int param_1,int param_2)

{
  long lVar1;
  long lVar2;
  
  lVar1 = IGAccelTask::getStamps(*(IGAccelTask **)(this + 0x150));
  lVar2 = (long)param_1;
  *(int *)(lVar1 + lVar2 * 0x40) = param_2;
  (**(code **)(**(long **)(this + 0x1280) + 0x1e0))(*(long **)(this + 0x1280),param_1);
  if (*(int *)(this + lVar2 * 4 + 0x1478) == param_2) {
    return;
  }
  *(int *)(this + lVar2 * 4 + 0x1478) = param_2;
  (**(code **)(**(long **)(this + 0x380) + 0x228))(*(long **)(this + 0x380),param_1,param_2);
  IOGraphicsAccelerator2::signalStampsUpdated();
  return;
}



// IntelAccelerator::getEUCount()

undefined4 __thiscall IntelAccelerator::getEUCount(IntelAccelerator *this)

{
  return *(undefined4 *)(this + 0x1154);
}



// IntelAccelerator::getSliceConfig()

undefined4 __thiscall IntelAccelerator::getSliceConfig(IntelAccelerator *this)

{
  return *(undefined4 *)(this + 0x12c8);
}



// IntelAccelerator::getPlatformID()

undefined4 __thiscall IntelAccelerator::getPlatformID(IntelAccelerator *this)

{
  return *(undefined4 *)(this + 0x13c8);
}



// IntelAccelerator::setSliceConfig(IGSliceConfig)

ulong __thiscall IntelAccelerator::setSliceConfig(IntelAccelerator *this,uint param_1)

{
  uint uVar1;
  byte bVar2;
  undefined8 unaff_RBX;
  ulong uVar3;
  uint uVar4;
  uint uVar5;
  
  if ((((byte)this[0x11c0] & 8) != 0) && (((byte)this[0xc78] & 2) != 0)) {
    bVar2 = (byte)(param_1 >> 8);
    uVar1 = *(uint *)(this + 0x12c8);
    uVar3 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
    if (uVar1 == param_1) goto LAB_00029686;
    uVar5 = uVar1 & 0xff;
    if ((param_1 & 0xff) != 0) {
      uVar5 = param_1 & 0xff;
    }
    if (uVar5 <= *(uint *)(this + 0x12cc)) {
      uVar4 = uVar1 >> 8 & 0xff;
      if (bVar2 != 0) {
        uVar4 = (uint)bVar2;
      }
      uVar4 = (uVar4 & 1) + uVar4;
      if ((uVar4 <= *(uint *)(this + 0xdd8)) && (*(uint *)(this + 0xddc) <= uVar4)) {
        uVar1 = param_1 & 0xff00ffff | uVar1 & 0xff0000;
        if ((param_1 & 0xff0000) != 0) {
          uVar1 = param_1;
        }
        if ((uVar1 >> 0x10 & 0xff) <= *(uint *)(this + 0x12d0)) {
          IOGraphicsAccelerator2::acceleratorLock((IOGraphicsAccelerator2 *)this);
          setAsyncSliceCount(this,(uVar4 & 0xff) << 8 | uVar1 & 0xffff0000 | uVar5);
          IOGraphicsAccelerator2::acceleratorUnlock((IOGraphicsAccelerator2 *)this);
          goto LAB_00029686;
        }
      }
    }
  }
  uVar3 = 0;
LAB_00029686:
  return uVar3 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::setThermal(unsigned int)

undefined8 __cdecl IntelAccelerator::setThermal(long param_1)

{
  if ((*(byte *)(param_1 + 0xc78) & 2) != 0) {
    (**(code **)(**(long **)(&DAT_00001280 + param_1) + 0x1f8))();
  }
  return 0;
}



// IntelAccelerator::appsPavpSessionMgmt(unsigned int, PAVPSessionCommandID_t, unsigned int,
// SGfxMIFlushDW*, void*, bool, bool)

undefined8 __thiscall
IntelAccelerator::appsPavpSessionMgmt
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          int param_10,undefined8 param_11,undefined8 param_12,ulong *param_13,int *param_14,
          char param_15,char param_16)

{
  long *this_00;
  bool bVar1;
  undefined4 uVar2;
  ulong uVar3;
  int iVar4;
  ulong *puVar5;
  int *piVar6;
  undefined8 uVar7;
  undefined4 local_b8;
  uint local_b4;
  undefined4 local_b0;
  ulong local_ac;
  ulong local_a4;
  undefined4 local_9c;
  undefined4 local_98;
  undefined8 local_94;
  undefined8 local_8c;
  undefined8 local_84;
  undefined8 local_7c;
  int local_74;
  undefined4 local_70;
  ulong local_6c;
  ulong local_64;
  undefined4 local_5c;
  undefined4 local_58;
  ulong local_54;
  ulong local_4c;
  undefined4 local_44;
  undefined4 local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_7c = 0;
  local_84 = 0;
  local_8c = 0;
  local_94 = 0;
  local_74 = 0;
  this_00 = *(long **)(*(long *)((long)this + 0x12a0) + 0xb0);
  puVar5 = param_13;
  piVar6 = param_14;
  bVar1 = IGHardwareRingBuffer::waitForSpace
                    (param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (void *)this_00[0x26],param_10 + 3,param_11,param_12,(char *)param_13,
                     (char *)param_14);
  if (bVar1) {
    local_b0 = 0x68000200;
    local_98 = 0x68000200;
    local_70 = 0x68000200;
    local_58 = 0x68000200;
    local_b8 = 0x4000000;
    local_b4 = (uint)param_12 & 0x8f | 0x7000000;
    uVar2 = (undefined4)param_13[1];
    local_9c = (undefined4)param_13[2];
    local_6c = (ulong)((uint)param_12 >> 1 & 0x40);
    local_ac = (*param_13 & 0xffffffffffbfffbf) + local_6c + 0x400000;
    *param_13 = local_ac;
    local_a4 = param_13[1];
    iVar4 = (int)param_11;
    if (iVar4 == 0) {
      *param_14 = (uint)*(ushort *)((long)param_14 + 2) << 0x10;
      *(byte *)((long)param_14 + 7) = *(byte *)((long)param_14 + 7) & 0x1f;
LAB_0002986b:
      local_84 = *(undefined8 *)(param_14 + 4);
      local_94 = *(undefined8 *)param_14;
      local_8c = *(undefined8 *)(param_14 + 2);
      uVar3 = *param_13;
      uVar2 = (undefined4)param_13[1];
    }
    else {
      if (iVar4 == 1) {
        param_14[1] = param_14[1] & 0x1ffffffeU | 0x40000001;
        goto LAB_0002986b;
      }
      if (iVar4 != 2) goto LAB_0002986b;
      local_74 = param_14[8];
      local_7c = *(undefined8 *)(param_14 + 6);
      local_84 = *(undefined8 *)(param_14 + 4);
      local_94 = *(undefined8 *)param_14;
      local_8c = *(undefined8 *)(param_14 + 2);
      uVar3 = local_ac;
    }
    local_6c = uVar3 & 0xffffffffffbfffbf | local_6c;
    *(undefined4 *)(param_13 + 1) = uVar2;
    *param_13 = local_6c;
    local_5c = (undefined4)param_13[2];
    local_64 = param_13[1];
    local_54 = *param_13;
    local_4c = param_13[1];
    local_44 = (undefined4)param_13[2];
    local_40 = 0x4000001;
    uVar7 = (**(code **)(*this_00 + 0x148))(this_00);
    IGAccelFIFOChannel::submitRingCommands
              (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,(long)&local_b8
               ,0x1f,7,(char *)puVar5,(char *)piVar6);
    uVar7 = 0;
    if ((param_15 != '\0') && (param_16 != '\0')) {
      IGAccelEventMachine::finishStamp
                (*(IGAccelEventMachine **)((long)this + 0x380),(ulong)*(uint *)(this_00 + 4),0x2b);
    }
  }
  else {
    uVar7 = 0xe00002be;
    if (param_15 == '\0') {
      appsPavpSessionMgmt();
      if (*(long *)__got::___stack_chk_guard == local_38) {
        return 0;
      }
      goto LAB_00029947;
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return uVar7;
  }
LAB_00029947:
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::DisplaySleepCallback(DisplaySleepCmd_t, unsigned int, unsigned int)

undefined8 __cdecl
IntelAccelerator::DisplaySleepCallback
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long *param_9,
          int param_10,int param_11,undefined8 param_12,char *param_13,char *param_14)

{
  long lVar1;
  IGHardwareExtendedContext *pIVar2;
  undefined8 uVar3;
  undefined8 extraout_XMM0_Qa;
  
  uVar3 = 0xe00002bc;
  if (param_11 != 0xffff) {
    _OSIncrementAtomic(param_9 + 0x12);
    _IOLockLock(param_9[0x11]);
    _OSDecrementAtomic(param_9 + 0x12);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*param_9 + 0x850))(param_9,"",0);
    lVar1 = IOAccelDisplayMachine::getDisplayPipe((uint)param_9[0x6f]);
    if (param_10 == 0) {
      IGAccelTraceStreamManager::gpuReadFullTimeTuple
                ((IGAccelTraceStreamManager *)(param_9 + 0x1c3),0,1);
      IGAccelDisplayMachine::probeDisplayPipes((uint)param_9[0x6f]);
      if (lVar1 != 0) {
        *(undefined4 *)(lVar1 + 0x64c0) = 1;
      }
      *(byte *)((long)param_9 + 0xebc) = *(byte *)((long)param_9 + 0xebc) & 0xf7;
      IGAccelTraceStreamManager::enableCollection((IGAccelTraceStreamManager *)(param_9 + 0x1c3),2);
    }
    else if (param_10 == 1) {
      if (param_9[0x25b] != 0) {
        if (_graphicsTracePointEnable != 0) {
          IGAccelTask::getBlit3DContext((IGAccelTask *)param_9[0x2a],'\x01');
          param_13 = (char *)0x0;
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            pIVar2 = IGAccelTask::getBlit3DContext((IGAccelTask *)param_9[0x2a],'\x01');
            param_13 = (char *)0x0;
            param_14 = (char *)0x0;
            _kernel_debug(0x85a00049,0,(ulong)(*(int *)(*(long *)(pIVar2 + 0xb0) + 0x178) + 1),0,0,0
                         );
          }
        }
        pIVar2 = IGAccelTask::getBlit3DContext((IGAccelTask *)param_9[0x2a],'\x01');
        (**(code **)(**(long **)(pIVar2 + 0xb0) + 0x148))();
        pIVar2 = IGAccelTask::getBlit3DContext((IGAccelTask *)param_9[0x2a],'\x01');
        IGAccelFIFOChannel::submitRingCommands
                  (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(pIVar2 + 0xb0),param_9[0x25d],*(uint *)(param_9 + 0x25b),0x3f,param_13
                   ,param_14);
        param_9[0x25b] = 0;
      }
      IGAccelTraceStreamManager::disableCollection((IGAccelTraceStreamManager *)(param_9 + 0x1c3),1)
      ;
      *(byte *)((long)param_9 + 0xebc) = *(byte *)((long)param_9 + 0xebc) | 8;
      IGAccelEventMachine::finishAllStamps((IGAccelEventMachine *)param_9[0x70],0x2b);
      if (lVar1 != 0) {
        *(undefined4 *)(lVar1 + 0x64c0) = 0;
      }
    }
    uVar3 = 0;
    (**(code **)(*param_9 + 0x858))(param_9,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(param_9[0x11]);
  }
  return uVar3;
}



// IntelAccelerator::FlipCounterCallback(FlipCounterCmd_t, unsigned long long*)

undefined8 __thiscall
IntelAccelerator::FlipCounterCallback(IntelAccelerator *this,int param_1,undefined8 *param_2)

{
  if (param_1 == 0) {
    *param_2 = *(undefined8 *)(*(long *)(this + 0xe10) + 0x10);
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::PMSetParamsCallback(void const*)

undefined8 __cdecl IntelAccelerator::PMSetParamsCallback(long param_1)

{
  undefined8 uVar1;
  
  if (*(long **)(&DAT_00001280 + param_1) != (long *)0x0) {
                    // WARNING: Could not recover jumptable at 0x00029baf. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (**(code **)(**(long **)(&DAT_00001280 + param_1) + 0x1e8))();
    return uVar1;
  }
  return 0xe00002d8;
}



// IntelAccelerator::PMGetUtilizationSnapshotCallback()

undefined8 __thiscall IntelAccelerator::PMGetUtilizationSnapshotCallback(IntelAccelerator *this)

{
  undefined8 uVar1;
  
  if (*(long **)(this + 0x1280) != (long *)0x0) {
                    // WARNING: Could not recover jumptable at 0x00029bcc. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (**(code **)(**(long **)(this + 0x1280) + 0x1f0))();
    return uVar1;
  }
  return 0xe00002d8;
}



// IntelAccelerator::updateVideoPerfCapability(unsigned int, unsigned int*)

undefined4 __thiscall
IntelAccelerator::updateVideoPerfCapability(IntelAccelerator *this,int param_1,int *param_2)

{
  bool bVar1;
  bool bVar2;
  long lVar3;
  undefined4 uVar4;
  
  _IOLockLock(*(undefined8 *)(this + 0x1440));
  if (param_1 == 0) {
    *(int *)(this + 0x1438) = *(int *)(this + 0x1438) + *param_2;
    *(int *)(this + 0x143c) = *(int *)(this + 0x143c) + param_2[1];
    uVar4 = 0;
  }
  else {
    lVar3 = 0;
    uVar4 = 0;
    bVar1 = true;
    do {
      bVar2 = bVar1;
      if (*(uint *)(this + lVar3 * 4 + 0x1438) < (uint)param_2[lVar3]) {
        uVar4 = 0xe00002be;
        goto LAB_00029c53;
      }
      lVar3 = 1;
      bVar1 = false;
    } while (bVar2);
    *(int *)(this + 0x1438) = *(int *)(this + 0x1438) - *param_2;
    *(int *)(this + 0x143c) = *(int *)(this + 0x143c) - param_2[1];
  }
LAB_00029c53:
  _IOLockUnlock(*(undefined8 *)(this + 0x1440));
  return uVar4;
}



// IntelAccelerator::callPlatformFunction(OSSymbol const*, bool, void*, void*, void*, void*)

int __thiscall
IntelAccelerator::callPlatformFunction
          (IntelAccelerator *this,long *param_1,undefined1 param_2,IntelAccelerator *param_3,
          ulong *param_4,uint *param_5,undefined8 param_6)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  ulong uVar4;
  undefined8 uVar5;
  ulong uVar6;
  
  if (param_1 == (long *)0x0) {
    return -0x1ffffd3e;
  }
  this[0xebc] = (IntelAccelerator)((byte)this[0xebc] | 4);
  pcVar3 = (char *)(**(code **)(*param_1 + 0x148))(param_1);
  iVar2 = _strncmp(pcVar3,"1sm",0x100);
  if (iVar2 == 0) {
    iVar2 = IGAccelDisplayMachine::startScaledMode(*(long *)(this + 0x378),(long)param_3);
  }
  else {
    iVar2 = _strncmp(pcVar3,"0sm",0x100);
    if (iVar2 == 0) {
      uVar5 = IGAccelDisplayMachine::stopScaledMode(*(long *)(this + 0x378),(long)param_3);
      iVar2 = (int)uVar5;
    }
    else {
      iVar2 = _strncmp(pcVar3,"allocscanmem",0x100);
      if (iVar2 == 0) {
        iVar2 = IGAccelDisplayMachine::allocateScanoutMemory
                          (*(IGAccelDisplayMachine **)(this + 0x378),(long)param_3,
                           (ulong)(uint)*param_4,*param_5);
      }
      else {
        iVar2 = _strncmp(pcVar3,"freescanmem",0x100);
        if (iVar2 == 0) {
          uVar5 = IGAccelDisplayMachine::deallocateScanoutMemory
                            (*(IGAccelDisplayMachine **)(this + 0x378),(long)param_3,
                             (ulong)(uint)*param_4,*param_5);
          iVar2 = (int)uVar5;
        }
        else {
          iVar2 = _strncmp(pcVar3,"logStampData",0x100);
          if (iVar2 == 0) {
            iVar2 = -0x1ffffd3e;
            if ((param_3 != (IntelAccelerator *)0x0) && (3 < *param_4)) {
              uVar6 = *param_4 >> 2;
              encodeDebugInfo(this,9);
              if (0x153 < uVar6) {
                uVar6 = 0x154;
              }
              iVar2 = 0;
              uVar4 = 0;
              do {
                *(undefined4 *)(param_3 + uVar4 * 4) = *(undefined4 *)(this + uVar4 * 4 + 0x2da0);
                uVar4 = uVar4 + 1;
              } while (uVar6 != uVar4);
            }
          }
          else {
            iVar2 = _strncmp(pcVar3,"tvinset",0x100);
            if (iVar2 == 0) {
              uVar5 = IGAccelDisplayMachine::updateTVInsets((uint)*(undefined8 *)(this + 0x378));
              iVar2 = (int)uVar5;
            }
            else {
              iVar2 = _strncmp(pcVar3,"updateDPFC",0x100);
              if (iVar2 == 0) {
                this[0x11c0] = (IntelAccelerator)((byte)this[0x11c0] | 2);
              }
              else {
                iVar2 = _strncmp(pcVar3,"setMirrorPrimary",0x100);
                if (iVar2 == 0) {
                  *(undefined4 *)(*(long *)(this + 0x378) + 0x188) = *(undefined4 *)param_3;
                }
                else {
                  iVar2 = _strncmp(pcVar3,"setSliceConfig",0x100);
                  if (iVar2 != 0) {
                    iVar2 = _strncmp(pcVar3,"getSliceConfig",0x100);
                    if (iVar2 == 0) {
                      iVar2 = *(int *)(this + 0x12c8);
                    }
                    else {
                      iVar2 = _strncmp(pcVar3,"getEUCount",0x100);
                      if (iVar2 == 0) {
                        iVar2 = *(int *)(this + 0x1154);
                      }
                      else {
                        iVar2 = _strncmp(pcVar3,"thermal",0x100);
                        if (iVar2 == 0) {
                          iVar2 = 0;
                          if (((byte)this[0xc78] & 2) != 0) {
                            (**(code **)(**(long **)(this + 0x1280) + 0x1f8))
                                      (*(long **)(this + 0x1280),*(undefined4 *)param_3);
                          }
                        }
                        else {
                          iVar2 = _strncmp(pcVar3,"renderCompression",0x100);
                          if (iVar2 == 0) {
                            this[0x1474] = *param_3;
                          }
                          else {
                            iVar2 = _strncmp(pcVar3,"EFITilingMode",0x100);
                            if (iVar2 != 0) {
                              iVar2 = _strncmp(pcVar3,"WSAAState",0x100);
                              if (iVar2 == 0) {
                                iVar1 = *(int *)param_3;
                                *(int *)(this + 0xf30) = iVar1;
                                iVar2 = 0;
                                if (iVar1 < 0) {
                                  this[0xf34] = (IntelAccelerator)0x1;
                                }
                              }
                              else {
                                iVar2 = (**(code **)(__got::vtable + 0x6c8))
                                                  (this,param_1,param_2,param_3,param_4,param_5,
                                                   param_6);
                              }
                              goto LAB_00029f4e;
                            }
                            *(uint *)(this + 0x1470) = *(int *)param_3 == 2 | 2;
                          }
                          iVar2 = 0;
                        }
                      }
                    }
                    goto LAB_00029f4e;
                  }
                  setSliceConfig(this,*(uint *)param_3);
                }
              }
              iVar2 = -0x1ffffd3e;
            }
          }
        }
      }
    }
  }
LAB_00029f4e:
  this[0xebc] = (IntelAccelerator)((byte)this[0xebc] & 0xfb);
  return iVar2;
}



// IntelAccelerator::encodeDebugInfo(IGTimeoutReason)

void __thiscall IntelAccelerator::encodeDebugInfo(IntelAccelerator *this,uint param_1)

{
  IntelAccelerator *pIVar1;
  uint uVar2;
  int iVar3;
  ulong uVar4;
  OSDictionary *pOVar5;
  long *plVar6;
  uint uVar7;
  ulong uVar8;
  long lVar9;
  IntelAccelerator *param0;
  
  gatherKeyGuCData(this);
  uVar8 = *(ulong *)(this + 0x1340);
  if (uVar8 != 0) {
    lVar9 = 0;
    if (uVar8 != 0) {
      for (; (uVar8 >> lVar9 & 1) == 0; lVar9 = lVar9 + 1) {
      }
    }
    do {
      uVar8 = lVar9 + 1;
      gatherKeyRingData(this,(int)uVar8 - 1U & 0xff);
      if (4 < uVar8) break;
      uVar4 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar8 >> 6) * 8)) >> ((byte)uVar8 & 0x3f))
              << ((byte)uVar8 & 0x3f);
      lVar9 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> lVar9 & 1) == 0; lVar9 = lVar9 + 1) {
        }
      }
      lVar9 = (uVar8 & 0xffffffffffffffc0) + lVar9;
    } while (uVar4 != 0);
  }
  uVar2 = *(uint *)(this + 0x3714);
  uVar7 = 0x3ff - uVar2;
  if (0 < (int)uVar7) {
    pIVar1 = this + 0x3314;
    iVar3 = _snprintf((char *)(pIVar1 + uVar2),(ulong)uVar7," [%x] %lx %lx",param_1,0x20,0x550);
    *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar3;
    uVar7 = uVar7 - iVar3;
    if (0 < (int)uVar7) {
      param0 = pIVar1 + uVar2 + iVar3;
      lVar9 = 0;
      do {
        iVar3 = _snprintf((char *)param0,(ulong)uVar7," %x",*(uint *)(this + lVar9 * 4 + 0x2d7c));
        *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar3;
        uVar7 = uVar7 - iVar3;
        if ((int)uVar7 < 1) goto LAB_0002a15a;
        param0 = param0 + iVar3;
        lVar9 = lVar9 + 1;
      } while (lVar9 != 8);
      lVar9 = 0;
      do {
        iVar3 = _snprintf((char *)param0,(ulong)uVar7," %x",*(uint *)(this + lVar9 * 4 + 0x2da0));
        *(int *)(this + 0x3714) = *(int *)(this + 0x3714) + iVar3;
        uVar7 = uVar7 - iVar3;
        if ((int)uVar7 < 1) break;
        param0 = param0 + iVar3;
        lVar9 = lVar9 + 1;
      } while (lVar9 != 0x154);
    }
LAB_0002a15a:
    pOVar5 = (OSDictionary *)IOService::nameMatching("IOResources",(OSDictionary *)0x0);
    if (pOVar5 != (OSDictionary *)0x0) {
      plVar6 = (long *)IOService::copyMatchingService(pOVar5);
      if (plVar6 != (long *)0x0) {
        (**(code **)(*plVar6 + 0x270))(plVar6,"Triage",pIVar1);
        (**(code **)(*plVar6 + 0x28))(plVar6);
      }
                    // WARNING: Could not recover jumptable at 0x0002a1b4. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(long *)pOVar5 + 0x28))(pOVar5);
      return;
    }
  }
  return;
}



// IntelAccelerator::submitBufferDebug(IOAccelCommandDescriptor*, IGHardwareRingBuffer*, unsigned
// int, unsigned int)

undefined8 IntelAccelerator::submitBufferDebug(void)

{
  return 1;
}



// IntelAccelerator::submitPendingWaitIfNeeded(IOAccelSurface*, IGAccelResource*, IGAccelTask*)

void __thiscall
IntelAccelerator::submitPendingWaitIfNeeded
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,long param_11,IGAccelTask *param_12,char *param_13,char *param_14)

{
  void *this_00;
  bool bVar1;
  IGHardwareExtendedContext *pIVar2;
  IGAccelTask *pIVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  if (param_10 != 0) {
    pIVar3 = param_12;
    bVar1 = IGAccelDisplayMachine::needsFlipWait
                      (*(IGAccelDisplayMachine **)((long)this + 0x378),param_11);
    if (bVar1) {
      this_00 = *(void **)((long)this + 0x378);
      pIVar2 = IGAccelTask::getBlit3DContext(param_12,'\x01');
      IGAccelDisplayMachine::generateFlipWait
                (extraout_XMM0_Qa,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                 this_00,*(long *)(pIVar2 + 0xb0),extraout_RDX,pIVar3,param_13,param_14);
      return;
    }
  }
  return;
}



// IntelAccelerator::synchronousCtxSwitch(unsigned int*, int)

undefined8 __thiscall
IntelAccelerator::synchronousCtxSwitch(IntelAccelerator *this,undefined8 *param_1,int param_2)

{
  *param_1 = 0x224411000001;
  *(uint *)(param_1 + 1) = (uint)(param_2 != 0) * 8 + 0x80000;
  return 3;
}



// IntelAccelerator::addSyncEvent(unsigned int*, unsigned long)

void __thiscall IntelAccelerator::addSyncEvent(IntelAccelerator *this,long param_1,long param_2)

{
  undefined8 uVar1;
  long lVar2;
  long lVar3;
  
  if (param_2 != 0) {
    lVar3 = 0;
    do {
      lVar2 = *(long *)(this + 0x12d8);
      if (lVar2 == *(long *)(this + 0x12e0)) {
        uVar1 = IGVector<>::grow((IGVector<> *)(this + 0x12d8),lVar2 * 2);
        if ((char)uVar1 != '\0') {
          lVar2 = *(long *)(this + 0x12d8);
          goto LAB_0002a297;
        }
      }
      else {
LAB_0002a297:
        *(long *)(this + 0x12d8) = lVar2 + 1;
        *(undefined4 *)(*(long *)(this + 0x12e8) + lVar2 * 4) = *(undefined4 *)(param_1 + lVar3 * 4)
        ;
      }
      lVar3 = lVar3 + 1;
    } while (param_2 != lVar3);
  }
  return;
}



// IntelAccelerator::clearSyncEvents()

void __thiscall IntelAccelerator::clearSyncEvents(IntelAccelerator *this)

{
  *(undefined8 *)(this + 0x12d8) = 0;
  return;
}



// IntelAccelerator::submitSyncEvents(bool, IGAccelTask*, IGHwCsType, bool)

undefined4 __thiscall
IntelAccelerator::submitSyncEvents
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined4 param_10,IGAccelTask *param_11,undefined8 param_12,char *param_13,
          char *param_14)

{
  long *this_00;
  IGHardwareRingBuffer *this_01;
  IGHardwareExtendedContext *pIVar1;
  long *plVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar3;
  char cVar4;
  uintptr_t arg1;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar6;
  undefined8 extraout_XMM0_Qa_00;
  uint local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  
  cVar4 = (char)param_12;
  if (*(long *)((long)this + 0x12d8) == 0) goto LAB_0002a493;
  local_34 = SUB84(param_13,0);
  uVar6 = param_12;
  pIVar1 = IGAccelTask::getBlit3DContext(param_11,'\x01');
  this_00 = *(long **)(pIVar1 + 0xb0);
  uVar5 = (**(code **)(*this_00 + 0x148))(this_00);
  local_3c = (undefined4)param_12;
  uVar3 = extraout_RDX;
  local_38 = param_10;
  if (cVar4 == '\x02') {
    if (_graphicsTracePointEnable != 0) {
      arg1 = 2;
LAB_0002a383:
      param_13 = (char *)((long)&MACH_HEADER.magic + 1);
      uVar6 = 0;
      uVar5 = dtHookTrace();
      uVar3 = extraout_RDX_00;
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        param_13 = (char *)((long)&MACH_HEADER.magic + 1);
        uVar6 = 0;
        param_14 = (char *)0x0;
        _kernel_debug(0x85a00048,arg1,(ulong)((int)this_00[0x2f] + 1),0,1,0);
        uVar3 = extraout_RDX_01;
        uVar5 = extraout_XMM0_Qa;
      }
    }
  }
  else if (_graphicsTracePointEnable != 0) {
    arg1 = 0;
    goto LAB_0002a383;
  }
  this_01 = (IGHardwareRingBuffer *)this_00[0x26];
  IGHardwareRingBuffer::waitForSpace
            (uVar5,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this_01,
             *(int *)((long)this + 0x12d8) + 1,uVar3,uVar6,param_13,param_14);
  local_40 = 0x4000000;
  IGHardwareRingBuffer::writeBuffer(this_01,(long)&local_40,1);
  IGHardwareRingBuffer::writeBuffer
            (this_01,*(long *)((long)this + 0x12e8),*(uint *)((long)this + 0x12d8));
  local_40 = local_40 | 1;
  IGHardwareRingBuffer::writeBuffer(this_01,(long)&local_40,1);
  uVar6 = (**(code **)(*(long *)this_01 + 0x138))(this_01);
  IGAccelFIFOChannel::submitStampCommand
            (uVar6,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this_00);
  cVar4 = (char)local_3c;
  param_10 = local_38;
  if ((char)local_34 != '\0') {
    plVar2 = this_00;
    if (cVar4 != '\0') {
      pIVar1 = IGAccelTask::getBlit2DContext(param_11,'\x01');
      plVar2 = *(long **)(pIVar1 + 0xb0);
    }
    param_10 = (**(code **)(**(long **)((long)this + 0x380) + 0x1c8))
                         (*(long **)((long)this + 0x380),this_00 + 0x27,&DAT_00001218 + (long)this,
                          (int)plVar2[4]);
  }
  *(undefined8 *)((long)this + 0x12d8) = 0;
LAB_0002a493:
  if (cVar4 == '\x02') {
    pIVar1 = IGAccelTask::getBlit2DContext(param_11,'\x01');
    (**(code **)(**(long **)(pIVar1 + 0xb0) + 0x148))();
    pIVar1 = IGAccelTask::getBlit2DContext(param_11,'\x01');
    IGAccelFIFOChannel::submitStampCommand
              (extraout_XMM0_Qa_00,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
               *(void **)(pIVar1 + 0xb0));
  }
  return param_10;
}



// IntelAccelerator::barrierForWaitEvents(bool, IGAccelFIFOChannel*)

void __thiscall
IntelAccelerator::barrierForWaitEvents(IntelAccelerator *this,int param_2_00,long param_2)

{
  char cVar1;
  
  if (param_2_00 == 0) {
    cVar1 = (**(code **)(**(long **)(this + 0x380) + 0x1f0))
                      (*(long **)(this + 0x380),0,this + 0x1218,param_2,
                       *(undefined4 *)(param_2 + 0x20));
    if (cVar1 == '\0') {
      IGAccelEventMachine::finishEvent(*(IGAccelEventMachine **)(this + 0x380),this + 0x1218,0x2b);
      return;
    }
  }
  return;
}



// IntelAccelerator::updateAccessEvents(IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>&,
// IGAccelFIFOChannel*)

void __thiscall
IntelAccelerator::updateAccessEvents(IntelAccelerator *this,long *param_1,long *param_2)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (lVar1 != 0) {
    lVar2 = 0;
    do {
      (**(code **)(*param_2 + 0x140))(param_2,*(undefined8 *)(param_1[2] + lVar2 * 8));
      lVar2 = lVar2 + 1;
    } while (lVar1 != lVar2);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IntelAccelerator::submitBlit(blit3d_params_t*, IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>
// const&, IGAccelTask*, bool)

ulong __cdecl
IntelAccelerator::submitBlit
          (undefined8 param_1,ulong param_2_00,ulong param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
          IntelAccelerator *param_9,long *param_10,ulong *param_11,IGAccelTask *param_12,
          undefined8 param_13,char *param_14)

{
  IntelAccelerator *pIVar1;
  long lVar2;
  IGAccelResource *this;
  ushort uVar3;
  byte bVar4;
  uint uVar5;
  IGHardwareExtendedContext *pIVar6;
  ulong uVar7;
  ulong uVar8;
  int iVar9;
  undefined8 uVar10;
  float *pfVar11;
  undefined8 unaff_RBX;
  long lVar12;
  ulong uVar13;
  dword *pdVar14;
  uintptr_t arg4;
  long lVar15;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar18;
  undefined8 uVar17;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  float fVar19;
  
  if (((byte)param_9[0xc78] & 2) != 0) {
    if (*param_11 == 0) {
LAB_0002a6d9:
      uVar7 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
      goto LAB_0002a6db;
    }
    if ((char)param_10[0x17] == '\0') {
      bVar4 = 0;
    }
    else {
      bVar4 = (byte)param_9[0x11c0] >> 1 & 1;
    }
    *(byte *)(param_10 + 0x17) = bVar4;
    (**(code **)(**(long **)(param_9 + 0x380) + 0x148))();
    if (((((*(byte *)((long)param_10 + 0x3d) & 1) == 0) &&
         ((*(byte *)((long)param_10 + 0x85) & 1) == 0)) && (param_10[4] == 0)) &&
       (param_10[0xd] == 0)) {
      pIVar1 = param_9 + 0xf36;
      uVar3 = *(ushort *)((long)param_10 + 0xa2) >> 3;
      if ((uVar3 & 3) - 1 < 2) {
        uVar7 = blit2d_fast_supported(param_10,param_11,(long)pIVar1);
        iVar9 = ((uint)uVar7 & 0xff) + 1;
      }
      else {
        if (((uVar3 & 3) != 0) ||
           (uVar17 = blit2d_supported((int *)param_10,(long *)param_11,(long)pIVar1),
           (char)uVar17 == '\0')) goto LAB_0002a60c;
        uVar17 = blit3d_supported(param_10,(long *)param_11);
        uVar7 = blit2d_fast_supported(param_10,param_11,(long)pIVar1);
        if ((char)uVar17 == '\0') {
          iVar9 = ((uint)uVar7 & 0xff) + 1;
        }
        else {
          iVar9 = 2;
          if ((char)uVar7 == '\0') {
            uVar7 = *param_11;
            if (uVar7 == 0) {
              uVar8 = 0;
            }
            else {
              pfVar11 = (float *)(param_11[2] + 0x1c);
              uVar8 = 0;
              do {
                param_2_00 = (ulong)(uint)(float)uVar8;
                fVar19 = pfVar11[-1] * *pfVar11 + (float)uVar8;
                uVar8 = (ulong)fVar19;
                fVar19 = fVar19 - 9.223372e+18;
                param_3_00 = (ulong)(uint)fVar19;
                uVar8 = (long)fVar19 & (long)uVar8 >> 0x3f | uVar8;
                pfVar11 = pfVar11 + 8;
                uVar7 = uVar7 - 1;
              } while (uVar7 != 0);
            }
            uVar8 = uVar8 * *(byte *)(param_10 + 0x14);
            iVar9 = 1;
            if ((0x51000 < uVar8 || (ulong)*(byte *)(param_10 + 0x14) != 0x10) && (0x20000 < uVar8))
            goto LAB_0002a60c;
          }
        }
      }
      pIVar6 = IGAccelTask::getBlit2DContext(param_12,'\x01');
      if (pIVar6 != (IGHardwareExtendedContext *)0x0) {
        pIVar6 = IGAccelTask::getBlit2DContext(param_12,'\x01');
        lVar2 = *(long *)(pIVar6 + 0xb0);
        uVar5 = *(uint *)(lVar2 + 0x20);
        lVar12 = param_10[0x18];
        if (lVar12 == 0) {
          bVar4 = 1;
          uVar16 = extraout_XMM0_Da;
          uVar18 = extraout_XMM0_Db;
        }
        else {
          lVar15 = 0;
          do {
            bVar4 = (**(code **)(**(long **)(param_9 + 0x380) + 0x1c8))
                              (*(long **)(param_9 + 0x380),
                               *(undefined8 *)(param_10[0x1a] + lVar15 * 8),param_9 + 0x1218);
            lVar15 = lVar15 + 1;
            uVar16 = extraout_XMM0_Da_00;
            uVar18 = extraout_XMM0_Db_00;
          } while (lVar12 != lVar15);
        }
        uVar17 = CONCAT44(uVar18,uVar16);
        if ((_graphicsTracePointEnable != 0) &&
           (uVar17 = dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
          param_14 = (char *)0x0;
          _kernel_debug(0x85a0fffc,8,(ulong)uVar5,0,0,0);
          uVar17 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
        }
        uVar10 = 2;
        pdVar14 = (dword *)((long)&MACH_HEADER.magic + 1);
        uVar5 = submitSyncEvents(uVar17,param_2_00,param_3_00,param_4,param_5,param_6,param_7,
                                 param_8,param_9,(uint)bVar4,param_12,2,
                                 (char *)((long)&MACH_HEADER.magic + 1),param_14);
        uVar17 = barrierForWaitEvents(param_9,uVar5 & 0xff,lVar2);
        configureBlitterTracking
                  (uVar17,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,param_9,
                   *(IGHardwareRingBuffer **)(lVar2 + 0x130),(char)param_10[0x17] != '\0',uVar10,
                   (char *)pdVar14,param_14);
        this = (IGAccelResource *)param_10[0x11];
        if (((this != (IGAccelResource *)0x0) &&
            (bVar4 = IGAccelResource::isDisplayableIOSurface(), bVar4 != 0)) &&
           (*(char *)(*(long *)(param_9 + 0x1290) + 0x21) == '\0')) {
          IGAccelResource::updateMappingCacheType(this,2);
        }
        pIVar6 = IGAccelTask::getBlit2DContext(param_12,'\x01');
        if (iVar9 == 2) {
          blt2d_fast_copy(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2_00,param_3_00,
                          param_4,param_5,param_6,param_7,param_8,(long)pIVar6,param_10,param_11,
                          (long)pIVar1);
        }
        else {
          blt2d_source_copy(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2_00,param_3_00,
                            param_4,param_5,param_6,param_7,param_8,(long)pIVar6,param_10,param_11,
                            (long)pIVar1,pdVar14,param_14);
        }
        uVar7 = CONCAT71((int7)((ulong)this >> 8),1);
        if (_graphicsTracePointEnable != 0) {
          for (uVar8 = *param_11; uVar8 != 0; uVar8 = uVar8 - 1) {
          }
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            uVar8 = *param_11;
            if (uVar8 == 0) {
              arg4 = 0;
            }
            else {
              pfVar11 = (float *)(param_11[2] + 0xc);
              lVar12 = 0;
              do {
                fVar19 = pfVar11[-1] * *pfVar11 * (float)*(byte *)(param_10 + 0x14);
                uVar13 = (ulong)fVar19;
                lVar12 = lVar12 + (((long)(fVar19 - 9.223372e+18) & (long)uVar13 >> 0x3f | uVar13)
                                  >> 10);
                pfVar11 = pfVar11 + 8;
                uVar8 = uVar8 - 1;
              } while (uVar8 != 0);
              arg4 = (uintptr_t)(int)lVar12;
            }
            _kernel_debug(0x85a00074,2,
                          (ulong)*(uint *)(*(long *)(*(long *)(lVar2 + 0x130) + 0x30) + 8 +
                                          (long)*(int *)(*(long *)(lVar2 + 0x130) + 0x38) * 0x40),
                          0x1ea7,arg4,0);
          }
        }
        goto LAB_0002a6db;
      }
    }
    else {
LAB_0002a60c:
      pIVar6 = IGAccelTask::getBlit3DContext(param_12,'\x01');
      if (pIVar6 != (IGHardwareExtendedContext *)0x0) {
        pIVar6 = IGAccelTask::getBlit3DContext(param_12,'\x01');
        lVar2 = *(long *)(pIVar6 + 0xb0);
        lVar12 = param_10[0x18];
        bVar4 = 1;
        if (lVar12 != 0) {
          lVar15 = 0;
          do {
            bVar4 = (**(code **)(**(long **)(param_9 + 0x380) + 0x1c8))
                              (*(long **)(param_9 + 0x380),
                               *(undefined8 *)(param_10[0x1a] + lVar15 * 8),param_9 + 0x1218);
            lVar15 = lVar15 + 1;
          } while (lVar12 != lVar15);
        }
        unaff_RBX = 0;
        uVar17 = barrierForWaitEvents(param_9,(uint)bVar4,lVar2);
        submitSyncEvents(uVar17,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                         param_9,(uint)bVar4,param_12,0,(char *)0x0,param_14);
        pIVar6 = IGAccelTask::getBlit3DContext(param_12,'\x01');
        blit3d_submit_commands((long)pIVar6,param_10,param_11);
        goto LAB_0002a6d9;
      }
    }
  }
  uVar7 = 0;
LAB_0002a6db:
  return uVar7 & 0xffffffff;
}



// IntelAccelerator::configureBlitterTracking(IGHardwareRingBuffer*, bool)

void __thiscall
IntelAccelerator::configureBlitterTracking
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          IGHardwareRingBuffer *param_10,char param_11,undefined8 param_12,char *param_13,
          char *param_14)

{
  int iVar1;
  ulong uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 local_28;
  undefined4 local_20;
  
  uVar2 = (ulong)*(uint6 *)((long)this + 0x100a);
  if ((*(uint6 *)((long)this + 0x100a) & 0x80000000000) == 0) {
    if (param_11 == '\0') {
      if (*(char *)((long)this + 0x12c4) != '\0') {
        iVar1 = (**(code **)(*(long *)param_10 + 0x128))(param_10);
        IGHardwareRingBuffer::waitForSpace
                  (extraout_XMM0_Qa_00,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,iVar1 + 3,extraout_RDX_00,uVar2,param_13,param_14);
        (**(code **)(*(long *)param_10 + 0x130))(param_10);
        local_28 = 0x221d011000001;
        local_20 = 0x80000;
        IGHardwareRingBuffer::writeBuffer(param_10,(long)&local_28,3);
        (**(code **)(*(long *)param_10 + 0x138))(param_10);
        *(undefined1 *)((long)this + 0x12c4) = 0;
      }
    }
    else if (*(char *)((long)this + 0x12c4) == '\0') {
      iVar1 = (**(code **)(*(long *)param_10 + 0x128))(param_10);
      IGHardwareRingBuffer::waitForSpace
                (extraout_XMM0_Qa,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,iVar1 + 3,extraout_RDX,uVar2,param_13,param_14);
      (**(code **)(*(long *)param_10 + 0x130))(param_10);
      local_28 = 0x221d011000001;
      local_20 = 0x80008;
      IGHardwareRingBuffer::writeBuffer(param_10,(long)&local_28,3);
      (**(code **)(*(long *)param_10 + 0x138))(param_10);
      *(undefined1 *)((long)this + 0x12c4) = 1;
    }
  }
  return;
}



// IntelAccelerator::submitFill(blit3d_params_t*, IGVector<_blit_rect, IGIOMallocAllocatorPolicy>
// const&, IGAccelTask*)

void __thiscall
IntelAccelerator::submitFill
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,ulong *param_11,IGAccelTask *param_12,undefined8 param_13,char *param_14)

{
  long lVar1;
  byte bVar2;
  uint uVar3;
  IGHardwareExtendedContext *pIVar4;
  ulong uVar5;
  undefined8 uVar6;
  float *pfVar7;
  long lVar8;
  ulong uVar9;
  char *pcVar10;
  uintptr_t arg4;
  long lVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar12;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  float fVar13;
  
  if (((*(byte *)((long)this + 0xc78) & 2) != 0) && (*param_11 != 0)) {
    pIVar4 = IGAccelTask::getBlit2DContext(param_12,'\x01');
    lVar1 = *(long *)(pIVar4 + 0xb0);
    uVar3 = *(uint *)(lVar1 + 0x20);
    if ((_graphicsTracePointEnable != 0) &&
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
      param_14 = (char *)0x0;
      _kernel_debug(0x85a0fffc,9,(ulong)uVar3,0,0,0);
    }
    uVar12 = (**(code **)(**(long **)((long)this + 0x380) + 0x148))
                       (*(long **)((long)this + 0x380),&DAT_00001218 + (long)this);
    lVar8 = *(long *)(param_10 + 0xc0);
    if (lVar8 == 0) {
      bVar2 = 1;
    }
    else {
      lVar11 = 0;
      do {
        bVar2 = (**(code **)(**(long **)((long)this + 0x380) + 0x1c8))
                          (*(long **)((long)this + 0x380),
                           *(undefined8 *)(*(long *)(param_10 + 0xd0) + lVar11 * 8),
                           &DAT_00001218 + (long)this,(ulong)uVar3);
        uVar12 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
        lVar11 = lVar11 + 1;
      } while (lVar8 != lVar11);
    }
    uVar6 = 2;
    pcVar10 = (char *)((long)&MACH_HEADER.magic + 1);
    uVar3 = submitSyncEvents(uVar12,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                             this,(uint)bVar2,param_12,2,(char *)((long)&MACH_HEADER.magic + 1),
                             param_14);
    uVar12 = barrierForWaitEvents(this,uVar3 & 0xff,lVar1);
    configureBlitterTracking
              (uVar12,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,this,
               *(IGHardwareRingBuffer **)(lVar1 + 0x130),*(char *)(param_10 + 0xb8) != '\0',uVar6,
               pcVar10,param_14);
    pIVar4 = IGAccelTask::getBlit2DContext(param_12,'\x01');
    blt2d_color_fill(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2_00,param_3_00,param_4
                     ,param_5,param_6,param_7,param_8,(long)pIVar4,param_10,param_11,
                     (long)this + 0xf36,pcVar10,param_14);
    if (_graphicsTracePointEnable != 0) {
      for (uVar5 = *param_11; uVar5 != 0; uVar5 = uVar5 - 1) {
      }
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        uVar5 = *param_11;
        if (uVar5 == 0) {
          arg4 = 0;
        }
        else {
          pfVar7 = (float *)(param_11[2] + 0xc);
          lVar8 = 0;
          do {
            fVar13 = pfVar7[-1] * *pfVar7 * (float)*(byte *)(param_10 + 0xa0);
            uVar9 = (ulong)fVar13;
            lVar8 = lVar8 + (((long)(fVar13 - 9.223372e+18) & (long)uVar9 >> 0x3f | uVar9) >> 10);
            pfVar7 = pfVar7 + 4;
            uVar5 = uVar5 - 1;
          } while (uVar5 != 0);
          arg4 = (uintptr_t)(int)lVar8;
        }
        _kernel_debug(0x85a00074,2,
                      (ulong)*(uint *)(*(long *)(*(long *)(lVar1 + 0x130) + 0x30) + 8 +
                                      (long)*(int *)(*(long *)(lVar1 + 0x130) + 0x38) * 0x40),0x1f0f
                      ,arg4,0);
        return;
      }
    }
  }
  return;
}



// IntelAccelerator::submitDepthResolve(depth_resolve_params_t*, IGAccelTask*)

void __thiscall
IntelAccelerator::submitDepthResolve(IntelAccelerator *this,long *param_1,IGAccelTask *param_2)

{
  uint *puVar1;
  long *plVar2;
  byte bVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((((byte)this[0xc78] & 2) != 0) &&
     (lVar4 = IGAccelTask::getDepthResolveContext(param_2,'\x01'), lVar4 != 0)) {
    puVar1 = *(uint **)(lVar4 + 0xd8);
    plVar2 = *(long **)(puVar1 + 8);
    lVar4 = IGAccelTask::getScratchGPUVirtualAddress(param_2);
    param_1[2] = lVar4;
    (**(code **)(**(long **)(this + 0x380) + 0x148))(*(long **)(this + 0x380),this + 0x1218);
    lVar4 = param_1[0x14];
    if (lVar4 == 0) {
      bVar3 = 1;
    }
    else {
      lVar6 = plVar2[4];
      lVar5 = 0;
      do {
        bVar3 = (**(code **)(**(long **)(this + 0x380) + 0x1c8))
                          (*(long **)(this + 0x380),*(undefined8 *)(param_1[0x16] + lVar5 * 8),
                           this + 0x1218,(int)lVar6);
        lVar5 = lVar5 + 1;
      } while (lVar4 != lVar5);
    }
    barrierForWaitEvents(this,(uint)bVar3,(long)plVar2);
    (**(code **)(*plVar2 + 0x148))(plVar2);
    lVar4 = param_1[0x17];
    if (lVar4 != 0) {
      lVar6 = 0;
      do {
        (**(code **)(*plVar2 + 0x140))(plVar2,*(undefined8 *)(param_1[0x19] + lVar6 * 8));
        lVar6 = lVar6 + 1;
      } while (lVar4 != lVar6);
    }
    resolve_main(puVar1,param_1);
    IOAccelCommandBufferPool2::submitBuffer();
    return;
  }
  return;
}



// IntelAccelerator::submitCCSResolve(IGAccelResource*, color_resolve_params_t*,
// IGVector<_blit_rect, IGIOMallocAllocatorPolicy> const&, IGAccelTask*)

void __thiscall
IntelAccelerator::submitCCSResolve
          (IntelAccelerator *this,IGAccelResource *param_1,long param_2,long *param_3,
          IGAccelTask *param_4)

{
  int iVar1;
  uint *puVar2;
  long *plVar3;
  byte bVar4;
  long lVar5;
  undefined8 uVar6;
  uintptr_t arg4;
  long lVar7;
  long lVar8;
  
  if ((((byte)this[0xc78] & 2) != 0) &&
     (lVar5 = IGAccelTask::getColorResolveContext(param_4,'\x01'), lVar5 != 0)) {
    puVar2 = *(uint **)(lVar5 + 0xd8);
    plVar3 = *(long **)(puVar2 + 8);
    uVar6 = IGAccelTask::getScratchGPUVirtualAddress(param_4);
    *(undefined8 *)(param_2 + 8) = uVar6;
    (**(code **)(**(long **)(this + 0x380) + 0x148))(*(long **)(this + 0x380),this + 0x1218);
    lVar5 = *(long *)(param_2 + 0x58);
    if (lVar5 == 0) {
      bVar4 = 1;
    }
    else {
      lVar8 = plVar3[4];
      lVar7 = 0;
      do {
        bVar4 = (**(code **)(**(long **)(this + 0x380) + 0x1c8))
                          (*(long **)(this + 0x380),
                           *(undefined8 *)(*(long *)(param_2 + 0x68) + lVar7 * 8),this + 0x1218,
                           (int)lVar8);
        lVar7 = lVar7 + 1;
      } while (lVar5 != lVar7);
    }
    barrierForWaitEvents(this,(uint)bVar4,(long)plVar3);
    (**(code **)(*plVar3 + 0x148))(plVar3);
    lVar5 = *(long *)(param_2 + 0x70);
    if (lVar5 != 0) {
      lVar8 = 0;
      do {
        (**(code **)(*plVar3 + 0x140))
                  (plVar3,*(undefined8 *)(*(long *)(param_2 + 0x80) + lVar8 * 8));
        lVar8 = lVar8 + 1;
      } while (lVar5 != lVar8);
    }
    *(byte *)(param_2 + 0x50) = *(byte *)(param_2 + 0x50) & 0xfb | ((byte)this[0x11b8] & 1) << 2;
    if ((param_1 == (IGAccelResource *)0x0) ||
       (IGAccelResource::updateMappingCacheType(param_1,2),
       (__got::___ktrace_enable_filter[2] & 4) == 0)) {
      arg4 = 0;
    }
    else {
      iVar1 = *(int *)(param_2 + 0x4c);
      arg4 = _OSAddAtomic64(1,__got::___globalObjectIDCounter);
      if (*(int *)__got::___ktrace_kernel_enabled != 0) {
        _kernel_debug(0x8512003c,*(uintptr_t *)(param_1 + 0x110),(ulong)(iVar1 == 1),
                      (ulong)CONCAT22(*(undefined2 *)(param_1 + 0xb0),
                                      *(undefined2 *)(param_1 + 0xb2)),arg4,0);
      }
    }
    *(uintptr_t *)(*(long *)(puVar2 + 0x618) + 0x48) = arg4;
    if ((_graphicsTracePointEnable != 0) &&
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
      _kernel_debug(0x85a00214,arg4,plVar3[5],0,0,0);
    }
    resolve_ccs(puVar2,param_2,param_3);
    *(undefined8 *)(*(long *)(puVar2 + 0x618) + 0x48) = 0;
    IOAccelCommandBufferPool2::submitBuffer();
    return;
  }
  return;
}



// IntelAccelerator::submitSwapCopy(IOAccelEvent*, IOAccelResource2*, IOAccelResource2*)

ulong __thiscall
IntelAccelerator::submitSwapCopy
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,long *param_11,long *param_12,undefined8 param_13,char *param_14)

{
  byte bVar1;
  IntelAccelerator *pIVar2;
  char cVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  IGAccelDisplayPipe *this_00;
  long *plVar8;
  undefined8 *puVar9;
  ulong uVar10;
  uint uVar11;
  float fVar12;
  undefined4 extraout_XMM0_Db;
  float fVar13;
  undefined4 uVar14;
  long local_1a0;
  undefined8 local_198;
  ulong local_190;
  ulong local_188;
  long local_180;
  undefined8 local_178;
  long local_170;
  ulong local_168;
  long *local_160;
  long local_158;
  undefined8 local_150;
  ulong local_148;
  undefined8 local_140;
  long local_138;
  undefined8 local_130;
  long local_128;
  ulong local_120;
  long *local_118;
  undefined8 local_110;
  undefined8 local_108;
  undefined1 local_100;
  uint local_fe;
  undefined4 local_f8;
  undefined8 local_f0;
  undefined1 local_e8;
  ulong local_e0;
  ulong local_d8;
  long local_d0;
  ulong local_c8;
  ulong local_c0;
  long local_b8;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined4 local_68;
  undefined4 local_64;
  ulong local_60;
  ulong local_58;
  undefined8 *local_50;
  uint local_48;
  undefined4 local_44;
  IntelAccelerator *local_40;
  long local_38;
  
  uVar14 = (undefined4)((ulong)param_2_00 >> 0x20);
  cVar3 = (**(code **)(*param_11 + 0x170))(param_11);
  if (cVar3 == '\0') {
    return 0;
  }
  cVar3 = (**(code **)(*param_12 + 0x170))(param_12);
  if (cVar3 == '\0') {
    (**(code **)(*param_11 + 0x178))(param_11);
    return 0;
  }
  local_40 = this;
  local_38 = param_10;
  ___bzero(&local_1a0,0x138);
  IGVector<>::grow((IGVector<> *)&local_e0,4);
  local_c8 = 0;
  local_c0 = 0;
  local_b8 = 0;
  IGVector<>::grow((IGVector<> *)&local_c8,4);
  local_1a0 = 0;
  local_198 = 0;
  local_190 = 0;
  local_188 = 0;
  local_180 = 0;
  local_178 = 0;
  local_170 = 0;
  local_160 = (long *)0x0;
  local_168 = 0x100000000;
  local_158 = 0;
  local_150 = 0;
  local_148 = 0;
  local_140 = 0;
  local_138 = 0;
  local_130 = 0;
  local_128 = 0;
  local_118 = (long *)0x0;
  local_120 = 0x100000000;
  local_110 = 0;
  local_108 = 0;
  local_fe = 0;
  local_100 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  local_c8 = 0;
  local_98 = 0;
  local_90 = 0;
  local_88 = 0;
  local_80 = 0;
  local_78 = 0;
  local_70 = 0;
  bVar1 = *(byte *)((long)param_11 + 0x16);
  lVar6 = param_11[7];
  uVar10 = 0;
  if ((local_d8 != 0) ||
     (uVar4 = IGVector<>::grow((IGVector<> *)&local_e0,0), uVar10 = local_e0, (char)uVar4 != '\0'))
  {
    local_e0 = uVar10 + 1;
    *(ulong *)(local_d0 + uVar10 * 8) = (ulong)bVar1 * 0x40 + lVar6;
  }
  bVar1 = *(byte *)((long)param_12 + 0x15);
  lVar6 = param_12[7];
  if ((local_e0 != local_d8) ||
     (uVar4 = IGVector<>::grow((IGVector<> *)&local_e0,local_e0 * 2), (char)uVar4 != '\0')) {
    *(ulong *)(local_d0 + local_e0 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    local_e0 = local_e0 + 1;
  }
  lVar6 = param_11[8];
  if ((local_c8 != local_c0) ||
     (uVar4 = IGVector<>::grow((IGVector<> *)&local_c8,local_c8 * 2), (char)uVar4 != '\0')) {
    *(long *)(local_b8 + local_c8 * 8) = lVar6 + 0x38;
    local_c8 = local_c8 + 1;
  }
  lVar6 = param_12[8];
  if ((local_c8 != local_c0) ||
     (uVar4 = IGVector<>::grow((IGVector<> *)&local_c8,local_c8 * 2), (char)uVar4 != '\0')) {
    *(long *)(local_b8 + local_c8 * 8) = lVar6 + 0x38;
    local_c8 = local_c8 + 1;
  }
  if ((local_c8 != local_c0) ||
     (uVar4 = IGVector<>::grow((IGVector<> *)&local_c8,local_c8 * 2), (char)uVar4 != '\0')) {
    *(long *)(local_b8 + local_c8 * 8) = local_38;
    local_c8 = local_c8 + 1;
  }
  local_190 = (ulong)CONCAT24((short)param_11[0x16],(undefined4)local_190);
  local_188 = CONCAT44(local_188._4_4_,(uint)*(ushort *)((long)param_11 + 0xb2));
  lVar5 = (**(code **)(*(long *)param_11[8] + 0x128))();
  lVar6 = param_11[0x17];
  if (lVar6 == 0) {
    lVar6 = param_11[0x18];
  }
  local_198 = CONCAT44(local_198._4_4_,(int)lVar6);
  local_1a0 = lVar5;
  lVar6 = IOAccelResource2::getStorageResource();
  local_198._0_5_ = CONCAT14(*(undefined1 *)(lVar6 + 0x194),(undefined4)local_198);
  lVar6 = IOAccelResource2::getStorageResource();
  local_198 = CONCAT26(*(undefined2 *)(lVar6 + 400),(undefined6)local_198);
  local_190 = CONCAT44(local_190._4_4_,0x23);
  local_148 = (ulong)CONCAT24((short)param_12[0x16],(undefined4)local_148);
  local_140 = CONCAT44(local_140._4_4_,(uint)*(ushort *)((long)param_12 + 0xb2));
  local_160 = param_11;
  lVar7 = (**(code **)(*(long *)param_12[8] + 0x128))();
  lVar6 = param_12[0x17];
  if (lVar6 == 0) {
    lVar6 = param_12[0x18];
  }
  local_150 = CONCAT44(local_150._4_4_,(int)lVar6);
  local_158 = lVar7;
  lVar6 = IOAccelResource2::getStorageResource();
  local_150._0_5_ = CONCAT14(*(undefined1 *)(lVar6 + 0x194),(undefined4)local_150);
  lVar6 = IOAccelResource2::getStorageResource();
  local_150 = CONCAT26(*(undefined2 *)(lVar6 + 400),(undefined6)local_150);
  local_148 = local_148 & 0xffffffff00000000;
  uVar11 = local_fe & 0xfff8;
  local_100 = (undefined1)param_12[0x1b];
  local_118 = param_12;
  local_fe._0_2_ = (ushort)uVar11;
  lVar6 = IOAccelResource2::getStorageResource();
  if (1 < *(byte *)(lVar6 + 0x220)) {
    local_168 = local_168 | 0x10000000000;
    if ((*(byte *)(lVar6 + 0x221) & 4) == 0) {
      local_170 = 0;
    }
    else {
      local_170 = (ulong)*(uint *)(lVar6 + 0x1d0) + lVar5;
    }
    local_180 = lVar5 + (ulong)*(uint *)(lVar6 + 0x1c0);
    local_178 = CONCAT44(local_178._4_4_,*(undefined4 *)(lVar6 + 0x1c4));
  }
  lVar6 = IOAccelResource2::getStorageResource();
  if (1 < *(byte *)(lVar6 + 0x220)) {
    local_120 = local_120 | 0x10000000000;
    if ((*(byte *)(lVar6 + 0x221) & 4) == 0) {
      local_128 = 0;
    }
    else {
      local_128 = (ulong)*(uint *)(lVar6 + 0x1d0) + lVar7;
    }
    local_138 = lVar7 + (ulong)*(uint *)(lVar6 + 0x1c0);
    local_130 = CONCAT44(local_130._4_4_,*(undefined4 *)(lVar6 + 0x1c4));
  }
  lVar6 = (**(code **)(*(long *)param_12[8] + 0x130))();
  pIVar2 = local_40;
  cVar3 = *(char *)((long)param_12 + 0x14);
  if (cVar3 != '\0') {
    if (cVar3 == -0x7e) {
      uVar10 = (ulong)*(uint *)((long)param_12 + 0xfc);
      goto LAB_0002b7a2;
    }
    if (cVar3 != -0x80) {
      uVar10 = 0;
      goto LAB_0002b7a2;
    }
  }
  uVar10 = param_12[0x1f];
LAB_0002b7a2:
  local_60 = uVar10 + lVar6;
  local_48 = uVar11;
  local_38 = IOAccelDisplayMachine::getDisplayPipe((uint)*(undefined8 *)(local_40 + 0x378));
  IOAccelDisplayPipe::getFramebufferIndex();
  uVar4 = *(undefined8 *)(pIVar2 + 0x378);
  uVar11 = IGAccelDisplayMachine::getPlaneAtIndex((uint)uVar4);
  if (uVar11 != 0xffff) {
    local_44 = IGAccelDisplayPipe::planeSurfOffsetLive(uVar11);
    this_00 = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe((uint)uVar4);
    uVar11 = IGAccelDisplayPipe::displayReadRegister32(this_00,local_44);
    if ((uVar11 & 0xfffff000) == (uint)(uVar10 + lVar6)) {
      if ((((byte)local_40[0x11c0] & 2) != 0) &&
         (local_e8 = 1, (*(uint6 *)(local_40 + 0x100a) & 0x40000000000) != 0)) {
        local_fe._0_2_ = (ushort)local_48 | 0x18;
      }
      local_68 = 0;
      local_64 = *(undefined4 *)(local_38 + 0x40c);
      param_14 = (char *)&local_64;
      plVar8 = (long *)IOAccelDisplayPipe::getFramebuffer();
      (**(code **)(*plVar8 + 0x6b8))(plVar8,_fSymFBCLASSExitPsr,0,&local_68,&local_60,param_14,0);
    }
  }
  local_50 = (undefined8 *)0x0;
  local_58 = 0;
  local_60 = 0;
  puVar9 = (undefined8 *)
           _IOMallocTypeVarImpl
                     (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                      0x20);
  if (puVar9 != (undefined8 *)0x0) {
    local_58 = 1;
    local_60 = 1;
    local_50 = puVar9;
  }
  fVar12 = (float)(local_190 >> 0x20);
  fVar13 = (float)(local_188 & 0xffffffff);
  *puVar9 = 0;
  *(float *)(puVar9 + 1) = fVar12;
  *(float *)((long)puVar9 + 0xc) = fVar13;
  puVar9[2] = 0;
  *(float *)(puVar9 + 3) = fVar12;
  *(float *)((long)puVar9 + 0x1c) = fVar13;
  uVar10 = submitBlit(CONCAT44(extraout_XMM0_Db,fVar12),CONCAT44(uVar14,fVar13),param_3_00,param_4,
                      param_5,param_6,param_7,param_8,local_40,&local_1a0,&local_60,
                      *(IGAccelTask **)(local_40 + 0x150),0,param_14);
  (**(code **)(*param_11 + 0x178))(param_11);
  (**(code **)(*param_12 + 0x178))(param_12);
  if (local_50 != (undefined8 *)0x0) {
    lVar6 = local_58 << 5;
    if (lVar6 < 0) {
      lVar6 = -0x8000000000000000;
    }
    if (local_58 >> 0x3b != 0) {
      lVar6 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_50,lVar6);
  }
  if (local_b8 != 0) {
    lVar6 = local_c0 * 8;
    if (lVar6 < 0) {
      lVar6 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_c0) {
      lVar6 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_b8,lVar6);
  }
  if (local_d0 != 0) {
    lVar6 = local_d8 * 8;
    if (lVar6 < 0) {
      lVar6 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_d8) {
      lVar6 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_d0,lVar6);
    return uVar10 & 0xffffffff;
  }
  return uVar10 & 0xffffffff;
}



// IntelAccelerator::submitMainRingCommand(unsigned int*, unsigned long)

void __thiscall
IntelAccelerator::submitMainRingCommand
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,uint param_11,undefined8 param_12,char *param_13,char *param_14)

{
  IGHardwareExtendedContext *pIVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  pIVar1 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)((long)this + 0x150),'\x01');
  IGHardwareRingBuffer::waitForSpace
            (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             *(void **)(*(long *)(pIVar1 + 0xb0) + 0x130),param_11,extraout_RDX,param_12,param_13,
             param_14);
  pIVar1 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)((long)this + 0x150),'\x01');
  IGHardwareRingBuffer::writeBuffer
            (*(IGHardwareRingBuffer **)(*(long *)(pIVar1 + 0xb0) + 0x130),param_10,param_11);
  pIVar1 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)((long)this + 0x150),'\x01');
                    // WARNING: Could not recover jumptable at 0x0002ba80. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(*(long *)(pIVar1 + 0xb0) + 0x130) + 0x138))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::findHardwareContext(unsigned int, int)

long __cdecl IntelAccelerator::findHardwareContext(long param_1,int param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(&DAT_00001258 + param_1);
  while( true ) {
    if (lVar1 == 0) {
      return 0;
    }
    if (*(int *)(lVar1 + 0x7c) == param_2) break;
    lVar1 = *(long *)(lVar1 + 0x40);
  }
  return lVar1;
}



// IntelAccelerator::flushHardwareAfterGttUpdate()

void __thiscall IntelAccelerator::flushHardwareAfterGttUpdate(IntelAccelerator *this)

{
  if (((byte)this[0xc78] & 2) != 0) {
    this[0x1380] = (IntelAccelerator)((byte)this[0x1380] | 0x1f);
  }
  return;
}



// IntelAccelerator::createKernelGPUTask()

void __thiscall IntelAccelerator::createKernelGPUTask(IntelAccelerator *this)

{
  IGAccelTask::withOptions((IGAccelTask *)this);
  return;
}



// IntelAccelerator::createUserGPUTask()

IGAccelTask * __thiscall IntelAccelerator::createUserGPUTask(IntelAccelerator *this)

{
  IGAccelTask *pIVar1;
  
  if (((byte)this[0x11c1] & 2) == 0) {
    (**(code **)(**(long **)(this + 0x150) + 0x20))();
    return *(IGAccelTask **)(this + 0x150);
  }
  pIVar1 = IGAccelTask::withOptions((IGAccelTask *)this);
  return pIVar1;
}



// IntelAccelerator::createMemoryManager()

long * __thiscall IntelAccelerator::createMemoryManager(IntelAccelerator *this)

{
  char cVar1;
  long *plVar2;
  
  plVar2 = (long *)(**(code **)(*(long *)this + 0xaf0))();
  if (plVar2 != (long *)0x0) {
    cVar1 = (**(code **)(*plVar2 + 0x118))(plVar2,this,this + 0x13c0,this + 0x13d0);
    if (cVar1 != '\0') {
      return plVar2;
    }
    (**(code **)(*plVar2 + 0x28))(plVar2);
  }
  return (long *)0x0;
}



// _enableCoarsePowerGating()

void _enableCoarsePowerGating(void)

{
  return;
}



// _SafeForceWake(bool, unsigned int)

void _SafeForceWake(void)

{
  return;
}



// _PAVPSessionControl(PAVPSessionControlCommand_t, void*)

void _PAVPSessionControl(void)

{
  return;
}



// _mediaKernelLoad(bool)

void _mediaKernelLoad(void)

{
  return;
}



// _mediaPrepareEncode(void*)

void _mediaPrepareEncode(void)

{
  return;
}



// _clientNotify(IntelClientID_t, bool)

void _clientNotify(void)

{
  return;
}



// _dpsmNotify(unsigned int*)

undefined8 _dpsmNotify(void)

{
  return 0;
}



// _pmNotify(unsigned int, unsigned int, unsigned long long*, unsigned int*)

undefined8 _pmNotify(void)

{
  return 0;
}



// _accelWillLoadGuC(unsigned long long, void*)

undefined8 _accelWillLoadGuC(void)

{
  return 0xe00002c7;
}



// _accelFailedToLoadGuC()

void _accelFailedToLoadGuC(void)

{
  return;
}



// _accelDidLoadGuC()

void _accelDidLoadGuC(void)

{
  return;
}



// IntelAccelerator::waitForDRMSessionRestore()

void __thiscall IntelAccelerator::waitForDRMSessionRestore(IntelAccelerator *this)

{
  IntelAccelerator IVar1;
  
  IVar1 = this[0x3718];
  while (IVar1 == (IntelAccelerator)0x0) {
    _IOSleep(1);
    IVar1 = this[0x3718];
  }
  return;
}



// IntelAccelerator::determinePowerDomain(unsigned long)

char __thiscall IntelAccelerator::determinePowerDomain(IntelAccelerator *this,undefined *param_1)

{
  char cVar1;
  
  cVar1 = '\0';
  if ((undefined *)0x14ff < param_1 + -0xb00) {
    cVar1 = '\x03';
    if (((((((ulong)param_1 & 0xfffffffffffffc00) != 0x9400) &&
          (cVar1 = '\x01', ((ulong)param_1 & 0xfffffffffffffc00) != 0x24400)) &&
         (&UNK_000008ff < param_1 + -0xe000)) &&
        ((((section_00000468.segname + 7 < param_1 + -0xb000 &&
           (((ulong)param_1 & 0xffffffffffffff00) != 0x8c00)) &&
          ((section_000001f0.sectname + 0xf < param_1 + -0x8300 &&
           ((((ulong)param_1 & 0xffffffffffffffe0) != 0x8140 &&
            ((undefined *)0x2dff < param_1 + -0x5200)))))) && (&UNK_000006ff < param_1 + -0x2000))))
       && (((((ulong)param_1 & 0xfffffffffffff000) != 0x3000 &&
            (cVar1 = '\x02', (undefined *)0xbfff < param_1 + -0x1e0000)) &&
           (0xbfff < ((ulong)param_1 & 0xfffffffffffec000) - 0x1c0000)))) {
      cVar1 = '\x02';
      if (param_1 != &DAT_001082c0) {
        cVar1 = ((undefined *)0xbfff < param_1 + -0x1f0000) * '\x02' + '\x02';
      }
    }
  }
  return cVar1;
}



// IntelAccelerator::SafeReadRegister32(unsigned long)

undefined4 __thiscall
IntelAccelerator::SafeReadRegister32(IntelAccelerator *this,undefined *param_1)

{
  undefined4 uVar1;
  char cVar2;
  uint uVar3;
  undefined7 extraout_var;
  
  cVar2 = determinePowerDomain(this,param_1);
  uVar3 = (uint)CONCAT71(extraout_var,cVar2);
  SafeForceWake(this,1,uVar3);
  uVar1 = *(undefined4 *)(param_1 + *(long *)(this + 0x1270));
  SafeForceWake(this,0,uVar3);
  return uVar1;
}



// IntelAccelerator::SafeReadRegister64(unsigned long)

undefined8 __thiscall
IntelAccelerator::SafeReadRegister64(IntelAccelerator *this,undefined *param_1)

{
  undefined8 uVar1;
  char cVar2;
  uint uVar3;
  undefined7 extraout_var;
  
  cVar2 = determinePowerDomain(this,param_1);
  uVar3 = (uint)CONCAT71(extraout_var,cVar2);
  SafeForceWake(this,1,uVar3);
  uVar1 = *(undefined8 *)(param_1 + *(long *)(this + 0x1270));
  SafeForceWake(this,0,uVar3);
  return uVar1;
}



// IntelAccelerator::SafeWriteRegister32(unsigned long, unsigned int)

void __thiscall
IntelAccelerator::SafeWriteRegister32(IntelAccelerator *this,undefined *param_1,undefined4 param_2)

{
  char cVar1;
  uint uVar2;
  undefined7 extraout_var;
  
  cVar1 = determinePowerDomain(this,param_1);
  uVar2 = (uint)CONCAT71(extraout_var,cVar1);
  SafeForceWake(this,1,uVar2);
  *(undefined4 *)(param_1 + *(long *)(this + 0x1270)) = param_2;
  SafeForceWake(this,0,uVar2);
  return;
}



// IntelAccelerator::incrementForceWakeCount(bool, unsigned int)

int __thiscall
IntelAccelerator::incrementForceWakeCount(IntelAccelerator *this,int param_2_00,uint param_2)

{
  int iVar1;
  ulong uVar2;
  
  uVar2 = (ulong)param_2;
  iVar1 = *(int *)(this + (long)(&DAT_000012b8 + uVar2 * 4));
  if (param_2_00 == 0) {
    *(int *)(this + (long)(&DAT_000012b8 + uVar2 * 4)) = iVar1 + -1;
    if (iVar1 != 1) {
      return 0;
    }
  }
  else {
    *(int *)(this + (long)(&DAT_000012b8 + uVar2 * 4)) = iVar1 + 1;
    if (0 < iVar1) {
      return 0;
    }
  }
  return 1 << ((byte)param_2 & 0x1f);
}



// IntelAccelerator::SafeForceWakeMultithreaded(bool, unsigned int, unsigned int)

void __thiscall
IntelAccelerator::SafeForceWakeMultithreaded
          (IntelAccelerator *this,uint param_2_00,uint param_2,byte param_3)

{
  long lVar1;
  uint uVar2;
  uint param2;
  int iVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int param3;
  int iVar11;
  bool bVar12;
  int local_58;
  
  if (((byte)this[0x11c1] & 0x10) == 0) {
    uVar9 = param_2_00 & 0xff;
    uVar2 = 1 << (param_3 & 0x1f);
    param2 = uVar9 << (param_3 & 0x1f);
    iVar10 = uVar9 + 0x10000;
    iVar3 = iVar10 << (param_3 & 0x1f);
    if ((param_2 & 1) != 0) {
      *(int *)(*(long *)(this + 0x1270) + 0xa278) = iVar3;
      _IOPause(100);
    }
    if ((param_2 & 2) != 0) {
      uVar4 = *(ulong *)(this + 0x1340);
      if (uVar4 != 0) {
        uVar5 = 0;
        if (uVar4 != 0) {
          for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
          }
        }
        do {
          uVar4 = uVar5 + 1;
          if ((uVar5 & 0xfffffffffffffffd) != 0) {
            *(int *)(*(long *)(this + 0x1270) + (ulong)*(uint *)(&DAT_00123951 + uVar5 * 0x79)) =
                 iVar10;
          }
          if (4 < uVar4) break;
          uVar6 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >>
                  ((byte)uVar4 & 0x3f)) << ((byte)uVar4 & 0x3f);
          lVar1 = 0;
          if (uVar6 != 0) {
            for (; (uVar6 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
            }
          }
          uVar5 = (uVar4 & 0xffffffffffffffc0) + lVar1;
        } while (uVar6 != 0);
      }
      _IOPause(100);
    }
    if ((param_2 & 4) != 0) {
      *(int *)(*(long *)(this + 0x1270) + 0xa188) = iVar3;
      _IOPause(100);
    }
    if (((param_2 & 1) != 0) &&
       (uVar7 = *(uint *)(*(long *)(this + 0x1270) + 0xd84) & uVar2, uVar7 != param2)) {
      iVar8 = 300;
      iVar11 = 3000;
      param3 = 0;
      do {
        _IOPause(100);
        if (iVar11 < 2) {
          _IOLog("[IGPU] Retrigger RENDER domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                 ,uVar7,param2,param3 + 1);
          param3 = param3 + 2;
          _kprintf("[IGPU] Retrigger RENDER domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                   ,uVar7,param2,param3);
          if (iVar8 == 0) {
            SafeForceWakeMultithreaded(uVar7,param2,(long)this);
            return;
          }
          iVar8 = iVar8 + -1;
          *(int *)(*(long *)(this + 0x1270) + 0xa278) = iVar3;
          _IOPause(100);
          iVar11 = 3000;
        }
        else {
          iVar11 = iVar11 + -1;
        }
        uVar7 = *(uint *)(*(long *)(this + 0x1270) + 0xd84) & uVar2;
      } while (uVar7 != param2);
    }
    if ((param_2 & 2) != 0) {
      iVar11 = 3000;
      local_58 = 300;
      iVar8 = 0;
      while (uVar4 = *(ulong *)(this + 0x1340), uVar4 != 0) {
        uVar5 = 0;
        if (uVar4 != 0) {
          for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
          }
        }
        while ((uVar4 = uVar5 + 1, (uVar5 & 0xfffffffffffffffd) == 0 ||
               (uVar7 = *(uint *)(*(long *)(this + 0x1270) +
                                 (ulong)*(uint *)(&DAT_00123955 + uVar5 * 0x79)) & 1, uVar7 == uVar9
               ))) {
          if (4 < uVar4) goto LAB_0002c012;
          uVar6 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >>
                  ((byte)uVar4 & 0x3f)) << ((byte)uVar4 & 0x3f);
          lVar1 = 0;
          if (uVar6 != 0) {
            for (; (uVar6 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
            }
          }
          uVar5 = (uVar4 & 0xffffffffffffffc0) + lVar1;
          if (uVar6 == 0) goto LAB_0002c012;
        }
        _IOPause(100);
        if (iVar11 < 2) {
          _IOLog("[IGPU] Retrigger MEDIA domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                 ,uVar7,uVar9,iVar8 + 1);
          iVar8 = iVar8 + 2;
          _kprintf("[IGPU] Retrigger MEDIA domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                   ,uVar7,uVar9,iVar8);
          bVar12 = local_58 == 0;
          local_58 = local_58 + -1;
          if (bVar12) {
            SafeForceWakeMultithreaded(uVar7,uVar9,(long)this);
            return;
          }
          uVar4 = *(ulong *)(this + 0x1340);
          if (uVar4 != 0) {
            uVar5 = 0;
            if (uVar4 != 0) {
              for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
              }
            }
            do {
              uVar4 = uVar5 + 1;
              if ((uVar5 & 0xfffffffffffffffd) != 0) {
                if ((*(uint *)(*(long *)(this + 0x1270) +
                              (ulong)*(uint *)(&DAT_00123955 + uVar5 * 0x79)) & 1) != uVar9) {
                  *(int *)((ulong)*(uint *)(&DAT_00123951 + uVar5 * 0x79) + *(long *)(this + 0x1270)
                          ) = iVar10;
                  uVar7 = ~uVar9;
                }
              }
              if (4 < uVar4) break;
              uVar6 = (*(ulong *)(this + (long)(&DAT_00001340 + (uVar4 >> 6) * 8)) >>
                      ((byte)uVar4 & 0x3f)) << ((byte)uVar4 & 0x3f);
              lVar1 = 0;
              if (uVar6 != 0) {
                for (; (uVar6 >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
                }
              }
              uVar5 = (uVar4 & 0xffffffffffffffc0) + lVar1;
            } while (uVar6 != 0);
          }
          _IOPause(100);
          iVar11 = 3000;
        }
        else {
          iVar11 = iVar11 + -1;
        }
        if (uVar7 == uVar9) break;
      }
    }
LAB_0002c012:
    if (((param_2 & 4) != 0) &&
       (uVar9 = *(uint *)((long)&__const::_RESERVEDIORegistryEntry12 + *(long *)(this + 0x1270) + 4)
                & uVar2, uVar9 != param2)) {
      iVar11 = 300;
      iVar8 = 3000;
      iVar10 = 0;
      do {
        _IOPause(100);
        if (iVar8 < 2) {
          _IOLog("[IGPU] Retrigger GLOBAL domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                 ,uVar9,param2,iVar10 + 1);
          iVar10 = iVar10 + 2;
          _kprintf("[IGPU] Retrigger GLOBAL domain wake! Value read = 0x%x, expecting 0x%x, Retrigger count: %d\n"
                   ,uVar9,param2,iVar10);
          if (iVar11 == 0) {
            SafeForceWakeMultithreaded(uVar9,param2,(long)this);
            return;
          }
          iVar11 = iVar11 + -1;
          *(int *)(*(long *)(this + 0x1270) + 0xa188) = iVar3;
          _IOPause(100);
          iVar8 = 3000;
        }
        else {
          iVar8 = iVar8 + -1;
        }
        uVar9 = *(uint *)((long)&__const::_RESERVEDIORegistryEntry12 + *(long *)(this + 0x1270) + 4)
                & uVar2;
      } while (uVar9 != param2);
    }
  }
  return;
}



// IntelAccelerator::SafeForceWakeInterrupt(bool, unsigned int)

void __thiscall
IntelAccelerator::SafeForceWakeInterrupt(IntelAccelerator *this,byte param_1,uint param_2)

{
  if (param_2 != 0) {
    if ((*(ulong *)(this + 0x11c0) & 0x1000) == 0) {
      if (((uint)*(ulong *)(this + 0x11c0) >> 0xb & 1) == 0) {
                    // WARNING: Could not recover jumptable at 0x0002c30b. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(*(long *)(this + 0xdf8) + 8))(param_1,param_2);
        return;
      }
      SafeForceWakeMultithreaded(this,(uint)param_1,param_2,2);
      return;
    }
  }
  return;
}



// IntelAccelerator::SafeForceWake(bool)

void __thiscall IntelAccelerator::SafeForceWake(IntelAccelerator *this,byte param_1)

{
  SafeForceWake(this,param_1,7);
  return;
}



// IntelAccelerator::getInstDoneSlice(IGHwCsType)

void __thiscall IntelAccelerator::getInstDoneSlice(IntelAccelerator *this,ulong param_1)

{
  uint uVar1;
  long lVar2;
  IntelAccelerator *pIVar3;
  long lVar4;
  
  lVar2 = *(long *)(this + 0x1270);
  uVar1 = *(uint *)(lVar2 + 0xfdc);
  pIVar3 = this + (param_1 & 0xffffffff) * 0x110 + 0x2de8;
  *(uint *)(lVar2 + 0xfdc) = uVar1 & 0x7ffffff | 0x80000000;
  *(undefined4 *)(this + (param_1 & 0xffffffff) * 0x110 + 0x2dc4) = *(undefined4 *)(lVar2 + 0x7100);
  lVar4 = 0;
  do {
    *(uint *)(lVar2 + 0xfdc) = (uint)lVar4 | uVar1 & 0xffffff | 0x80000000;
    *(undefined4 *)(pIVar3 + -0x20) = *(undefined4 *)(lVar2 + 0xe164);
    *(undefined4 *)pIVar3 = *(undefined4 *)(lVar2 + 0xe160);
    lVar4 = lVar4 + 0x1000000;
    pIVar3 = pIVar3 + 4;
  } while (lVar4 != 0x8000000);
  *(uint *)(lVar2 + 0xfdc) = uVar1;
  return;
}



// IntelAccelerator::gatherKeyGuCData()

void __thiscall IntelAccelerator::gatherKeyGuCData(IntelAccelerator *this)

{
  long lVar1;
  
  *(undefined8 *)(this + 0x2d94) = 0;
  *(undefined8 *)(this + 0x2d8c) = 0;
  *(undefined8 *)(this + 0x2d84) = 0;
  *(undefined8 *)(this + 0x2d7c) = 0;
  SafeForceWake(this,1,7);
  lVar1 = *(long *)(this + 0x1270);
  *(undefined4 *)(this + 0x2d7c) = *(undefined4 *)(lVar1 + 0xc184);
  *(undefined4 *)(this + 0x2d80) = *(undefined4 *)(lVar1 + 0xc188);
  *(undefined4 *)(this + 0x2d84) = *(undefined4 *)(lVar1 + 0xc18c);
  *(undefined4 *)(this + 0x2d88) = *(undefined4 *)(lVar1 + 0xc190);
  *(undefined4 *)(this + 0x2d8c) = *(undefined4 *)(lVar1 + 0xc194);
  *(undefined4 *)(this + 0x2d90) = *(undefined4 *)(lVar1 + 0xc198);
  *(undefined4 *)(this + 0x2d94) = *(undefined4 *)(lVar1 + 0xc19c);
  *(undefined4 *)(this + 0x2d98) = *(undefined4 *)(lVar1 + 0xc1a0);
  SafeForceWake(this,0,7);
  return;
}



// IntelAccelerator::gatherKeyRingData(IGHwCsType)

undefined8 __thiscall IntelAccelerator::gatherKeyRingData(IntelAccelerator *this,uint param_1)

{
  undefined8 uVar1;
  ulong uVar2;
  
  uVar2 = (ulong)param_1;
  ___bzero(this + uVar2 * 0x110 + 0x2da0,0x110);
  this[uVar2 * 0x110 + 0x2e3c] = SUB41(param_1,0);
  if ((byte)SUB41(param_1,0) < 5) {
                    // WARNING: Could not recover jumptable at 0x0002c4bd. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*(code *)(&DAT_0002ced4 + *(int *)(&DAT_0002ced4 + uVar2 * 4)))();
    return uVar1;
  }
  return 0;
}



// IntelAccelerator::addTrackingRecord(unsigned int, unsigned int, unsigned int, unsigned int,
// unsigned long long)

void __thiscall
IntelAccelerator::addTrackingRecord
          (IntelAccelerator *this,undefined4 param_1,undefined4 param_2,undefined4 param_3,
          undefined4 param_4,undefined8 param_5)

{
  uint uVar1;
  ulong uVar2;
  
  uVar1 = *(uint *)(this + 0x2d78);
  uVar2 = (ulong)uVar1;
  *(undefined4 *)(this + uVar2 * 0x18 + 0x1578) = param_1;
  *(undefined4 *)(this + uVar2 * 0x18 + 0x157c) = param_2;
  *(undefined4 *)(this + uVar2 * 0x18 + 0x1580) = param_3;
  *(undefined4 *)(this + uVar2 * 0x18 + 0x1584) = param_4;
  *(undefined8 *)(this + uVar2 * 0x18 + 0x1588) = param_5;
  *(uint *)(this + 0x2d78) = uVar1 + 1 & 0xff;
  return;
}



// IntelAccelerator::getDefaultResetValue(unsigned int)

undefined4 __thiscall IntelAccelerator::getDefaultResetValue(IntelAccelerator *this,int param_1)

{
  long lVar1;
  undefined4 *puVar2;
  
  lVar1 = *(long *)(this + 0x12f0);
  if (lVar1 != 0) {
    puVar2 = (undefined4 *)(*(long *)(this + 0x1300) + 4);
    do {
      if (puVar2[-1] == param_1) {
        return *puVar2;
      }
      puVar2 = puVar2 + 9;
      lVar1 = lVar1 + -1;
    } while (lVar1 != 0);
  }
  return 0;
}



// IntelAccelerator::MetaClass::~MetaClass()

void __thiscall IntelAccelerator::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOGraphicsAccelerator2::getWorkLoop() const

undefined8 __thiscall IOGraphicsAccelerator2::getWorkLoop(IOGraphicsAccelerator2 *this)

{
  return *(undefined8 *)(this + 0xf0);
}



// IOGraphicsAccelerator2::tmpTotalVRAM()

undefined4 __thiscall IOGraphicsAccelerator2::tmpTotalVRAM(IOGraphicsAccelerator2 *this)

{
  return *(undefined4 *)(this + 0xca8);
}



undefined8
____ZL38applyDeviceSettingsUserPreferencesImplPK12OSDictionaryPKcS1_PyP13IOAccelConfig_block_invoke
          (long param_1,long *param_2,OSMetaClassBase *param_3)

{
  byte bVar1;
  uint uVar2;
  OSMetaClassBase *pOVar3;
  long *plVar4;
  long *plVar5;
  undefined8 uVar6;
  char *param1;
  
  pOVar3 = (OSMetaClassBase *)(**(code **)(**(long **)(param_1 + 0x20) + 0x1f8))();
  if (pOVar3 == (OSMetaClassBase *)0x0) {
    uVar6 = (**(code **)(*param_2 + 0x148))(param_2);
    _IOLog("[IGPU] Warning: Ignoring unknown device settings user-preference: %s\n",uVar6);
    param1 = (char *)(**(code **)(*param_2 + 0x148))(param_2);
    _kprintf("[IGPU] Warning: Ignoring unknown device settings user-preference: %s\n",param1);
  }
  else {
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar3,*(OSMetaClass **)__got::metaClass);
    plVar5 = (long *)OSMetaClassBase::safeMetaCast(param_3,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 != (long *)0x0) && (plVar5 != (long *)0x0)) {
      uVar2 = (**(code **)(*plVar4 + 0x140))(plVar4);
      bVar1 = (**(code **)(*plVar5 + 0x128))(plVar5);
      **(ulong **)(param_1 + 0x28) =
           (ulong)bVar1 << ((byte)uVar2 & 0x3f) |
           **(ulong **)(param_1 + 0x28) & ~(1L << ((ulong)uVar2 & 0x3f));
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandDescriptor::init(IOGraphicsAccelerator2*)

void __cdecl IGAccelCommandDescriptor::init(long param_1)

{
  *(undefined8 *)(param_1 + 8) = 0;
  *(undefined8 *)(param_1 + 0x10) = 0;
  *(undefined8 *)(param_1 + 0x20) = 0;
  *(undefined8 *)(param_1 + 0x18) = 0;
  *(undefined4 *)(param_1 + 0x30) = 0;
  *(undefined8 *)(param_1 + 0x28) = 0;
  *(undefined8 *)(param_1 + 0x38) = 0;
  *(undefined8 *)(param_1 + 0x40) = 0;
  *(undefined8 *)(param_1 + 0x48) = 0;
  *(undefined8 *)(param_1 + 0x50) = 0;
  *(undefined8 *)(param_1 + 0x58) = 0;
  *(undefined8 *)(param_1 + 0x68) = 0x101;
  *(undefined8 *)(param_1 + 0x70) = 0;
  return;
}



// IGAccelCommandDescriptor::~IGAccelCommandDescriptor()

void __thiscall IGAccelCommandDescriptor::~IGAccelCommandDescriptor(void)

{
  return;
}



// IGAccelCommandDescriptor::~IGAccelCommandDescriptor()

void __thiscall IGAccelCommandDescriptor::~IGAccelCommandDescriptor(IGAccelCommandDescriptor *this)

{
  _IOFreeTypeImpl(operator_delete,this);
  return;
}



// IGBlockFenceManager::~IGBlockFenceManager()

void __thiscall IGBlockFenceManager::~IGBlockFenceManager(IGBlockFenceManager *this)

{
  *(undefined ***)this = &__const::~IGBlockFenceManager;
  if (*(long **)(this + 0x18) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x18) + 0x28))();
  }
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined4 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x20) = 0;
  return;
}



// IGBlockFenceManager::~IGBlockFenceManager()

void __thiscall IGBlockFenceManager::~IGBlockFenceManager(IGBlockFenceManager *this)

{
  *(undefined ***)this = &__const::~IGBlockFenceManager;
  if (*(long **)(this + 0x18) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x18) + 0x28))();
  }
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined4 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x20) = 0;
  _IOFreeTypeImpl(operator_delete,this);
  return;
}



// IGVector<IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __thiscall IGVector<>::IGVector(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  if (param_1 != 0) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x18),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x18),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x18;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x18) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      *(ulong *)this = param_1;
    }
  }
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  char *pcVar4;
  ulong uVar5;
  IGVector<> *this_00;
  
  *(undefined ***)this = &__const::~IGHashTable;
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 == (IGVector<> *)0x0) {
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    return;
  }
  if (*(long *)(this_00 + 8) != 0) {
    lVar3 = *(long *)(this_00 + 0x10);
    uVar5 = 0;
    do {
      lVar1 = *(long *)(lVar3 + uVar5 * 0x18);
      if (lVar1 != 0) {
        for (lVar3 = *(long *)(lVar1 + 0x10); lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x10)) {
          if (*(long *)(lVar3 + 0x18) != lVar1 + 0x10) {
            pcVar4 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_0002d368;
          }
          if (**(long **)(lVar1 + 0x18) != lVar1) goto LAB_0002d361;
          *(long **)(lVar3 + 0x18) = *(long **)(lVar1 + 0x18);
          **(long **)(lVar1 + 0x18) = lVar3;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar3;
        }
        plVar2 = *(long **)(lVar1 + 0x18);
        if (*plVar2 != lVar1) {
LAB_0002d361:
          pcVar4 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0002d368:
                    // WARNING: Subroutine does not return
          _panic(pcVar4,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar5 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        this_00 = *(IGVector<> **)(this + 8);
        lVar3 = *(long *)(this_00 + 0x10);
      }
      *(undefined8 *)(lVar3 + 0x10 + uVar5 * 0x18) = 0;
      uVar5 = uVar5 + 1;
    } while (uVar5 < *(ulong *)(this_00 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  IGVector<>::~IGVector(this_00);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,this_00
                 );
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// IGVector<IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Removing unreachable block (ram,0x0002d505)
// WARNING: Removing unreachable block (ram,0x0002d513)
// WARNING: Removing unreachable block (ram,0x0002d528)
// WARNING: Removing unreachable block (ram,0x0002d533)
// WARNING: Removing unreachable block (ram,0x0002d54b)
// WARNING: Removing unreachable block (ram,0x0002d54e)
// kDisplayVar_sysctl(sysctl_oid*, void*, int, sysctl_req*)

undefined8 kDisplayVar_sysctl(void)

{
  int iVar1;
  undefined8 uVar2;
  long in_RCX;
  
  iVar1 = (**(code **)(in_RCX + 0x48))();
  uVar2 = 0x16;
  if (iVar1 == 0) {
    _kauth_getuid();
    uVar2 = 1;
  }
  return uVar2;
}



// WARNING: Removing unreachable block (ram,0x0002d5d9)
// KernelPrintf_sysctl(sysctl_oid*, void*, int, sysctl_req*)

undefined8 KernelPrintf_sysctl(void)

{
  long lVar1;
  int iVar2;
  long in_RCX;
  undefined8 uVar3;
  
  lVar1 = *(long *)__got::___stack_chk_guard;
  iVar2 = (**(code **)(in_RCX + 0x48))();
  uVar3 = 0x16;
  if (iVar2 == 0) {
    uVar3 = 1;
  }
  if (*(long *)__got::___stack_chk_guard != lVar1) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar3;
}



// IGVector<resetRegisterInfo, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  if (*(ulong *)(this + 8) < param_1) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x24),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x24),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      lVar6 = lVar4;
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined4 *)(lVar4 + 0x20 + lVar5) = *(undefined4 *)(lVar6 + 0x20 + lVar5);
            *(undefined8 *)(lVar4 + 0x18 + lVar5) = *(undefined8 *)(lVar6 + 0x18 + lVar5);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x24;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x24) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x24) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        lVar6 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(resetRegisterInfo*,unsigned_long)::
                                    kalloc_type_view_29,lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar6 >> 8),1);
    }
  }
  return 0;
}



// IGVector<unsigned int, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar4 = param_1 * 4;
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (param_1 >> 0x3e != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar3 = lVar4;
      if (lVar1 != 0) {
        lVar3 = *(long *)this;
        if (lVar3 != 0) {
          lVar2 = 0;
          do {
            *(undefined4 *)(lVar4 + lVar2 * 4) = *(undefined4 *)(lVar1 + lVar2 * 4);
            lVar2 = lVar2 + 1;
          } while (lVar3 != lVar2);
        }
        lVar3 = *(ulong *)(this + 8) * 4;
        if (lVar3 < 0) {
          lVar3 = -0x8000000000000000;
        }
        if (0x3fffffffffffffff < *(ulong *)(this + 8)) {
          lVar3 = -0x8000000000000000;
        }
        lVar3 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(unsigned_int*,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar3);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar3 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IntelAccelerator_cpp(void)

{
  _fSymFBCLASSRegisterAccelerator = OSSymbol::withCString("ra");
  _fSymFBCLASSUnregisterAccelerator = OSSymbol::withCString("ura");
  __fSymFBCLASSRegisterVBLHandler = OSSymbol::withCString("rvh");
  _fSymFBCLASSGetScanRegionInfo = OSSymbol::withCString("gsri");
  _fSymFBCLASSReadRegister32 = OSSymbol::withCString("r32");
  _fSymFBCLASSWriteRegister32 = OSSymbol::withCString("w32");
  _fSymFBCLASSValidateTransaction = OSSymbol::withCString("vald");
  _fSymFBCLASSPerformFlipTransaction = OSSymbol::withCString("flip");
  _fSymFBCLASSIsTransactionComplete = OSSymbol::withCString("itcm");
  __fSymFBCLASSPrepareForTransaction = OSSymbol::withCString("pftn");
  _fSymFBCLASSPerformGammaTransaction = OSSymbol::withCString("gama");
  _fSymFBCLASSPerformPQTransaction = OSSymbol::withCString("pq");
  _fSymFBCLASSExitPsr = OSSymbol::withCString("psrx");
  _fSymFBCLASSPerformCscTransaction = OSSymbol::withCString("csc");
  _fSymFBCLASSPerformPlaneGammaTransaction = OSSymbol::withCString("pgam");
  _fSymFBCLASSGetRC6HandlingFunc = OSSymbol::withCString("fRC6HandlingFuncs");
  _fSymFBCLASSGetDisplayWaterMarkValues = OSSymbol::withCString("gdwv");
  _fSymFBCLASSTranscodeActive = OSSymbol::withCString("TranscodeActive");
  _fSymFBCLASSSetTransactionDisplayPipe = OSSymbol::withCString("stdp");
  _fSymFBCLASSLogTransactionTimeout = OSSymbol::withCString("thang");
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IntelAccelerator::gMetaClass,"IntelAccelerator",
             (OSMetaClass *)__got::gMetaClass,0x3740);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IntelAccelerator::gMetaClass);
  return;
}



// IGAccelCommandQueue::MetaClass::MetaClass()

void __thiscall IGAccelCommandQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelCommandQueue",(OSMetaClass *)__got::gMetaClass,0x840);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelCommandQueue::MetaClass::~MetaClass()

void __thiscall IGAccelCommandQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelCommandQueue::IGAccelCommandQueue(OSMetaClass const*)

void __thiscall
IGAccelCommandQueue::IGAccelCommandQueue(IGAccelCommandQueue *this,OSMetaClass *param_1)

{
  IOAccelCommandQueue::IOAccelCommandQueue((IOAccelCommandQueue *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelCommandQueue;
  IGHeapsAccess::IGHeapsAccess((IGHeapsAccess *)(this + 0x6b8));
  return;
}



// IGHeapsAccess::IGHeapsAccess()

void __thiscall IGHeapsAccess::IGHeapsAccess(IGHeapsAccess *this)

{
  long lVar1;
  long lVar2;
  
  lVar2 = 0x48;
  lVar1 = 0;
  do {
    if (*(long *)(this + lVar1 * 4 + 0x50) != 0) {
      IOAccelResource2::releaseKernelData();
      *(undefined8 *)(this + lVar1 * 4 + 0x50) = 0;
      *(undefined8 *)(this + lVar1 * 4 + 0x58) = 0;
    }
    if (*(long **)(this + lVar1 * 2 + 0x18) != (long *)0x0) {
      (**(code **)(**(long **)(this + lVar1 * 2 + 0x18) + 0x178))();
    }
    *(undefined8 *)(this + lVar1 * 2 + 0x18) = 0;
    this[lVar2] = (IGHeapsAccess)0x0;
    *(undefined4 *)(this + lVar1) = 0;
    lVar1 = lVar1 + 4;
    lVar2 = lVar2 + 1;
  } while (lVar1 != 0x18);
  return;
}



// IGAccelCommandQueue::IGAccelCommandQueue(OSMetaClass const*)

void __thiscall
IGAccelCommandQueue::IGAccelCommandQueue(IGAccelCommandQueue *this,OSMetaClass *param_1)

{
  IOAccelCommandQueue::IOAccelCommandQueue((IOAccelCommandQueue *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelCommandQueue;
  IGHeapsAccess::IGHeapsAccess((IGHeapsAccess *)(this + 0x6b8));
  return;
}



// IGAccelCommandQueue::~IGAccelCommandQueue()

void __thiscall IGAccelCommandQueue::~IGAccelCommandQueue(IGAccelCommandQueue *this)

{
  IOAccelCommandQueue::~IOAccelCommandQueue((IOAccelCommandQueue *)this);
  return;
}



// IGAccelCommandQueue::~IGAccelCommandQueue()

void __thiscall IGAccelCommandQueue::~IGAccelCommandQueue(IGAccelCommandQueue *this)

{
  IOAccelCommandQueue::~IOAccelCommandQueue((IOAccelCommandQueue *)this);
  return;
}



// IGAccelCommandQueue::~IGAccelCommandQueue()

void __thiscall IGAccelCommandQueue::~IGAccelCommandQueue(IGAccelCommandQueue *this)

{
  IOAccelCommandQueue::~IOAccelCommandQueue((IOAccelCommandQueue *)this);
  _OSObject_typed_operator_delete(&IGAccelCommandQueue_ktv,this,0x840);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandQueue::operator delete(void*, unsigned long)

void __cdecl IGAccelCommandQueue::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelCommandQueue_ktv,param_1,param_2);
  return;
}



// IGAccelCommandQueue::getMetaClass() const

undefined8 * IGAccelCommandQueue::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelCommandQueue::MetaClass::MetaClass()

void __thiscall IGAccelCommandQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelCommandQueue",(OSMetaClass *)__got::gMetaClass,0x840);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelCommandQueue::MetaClass::alloc() const

IGAccelCommandQueue * IGAccelCommandQueue::MetaClass::alloc(void)

{
  IGAccelCommandQueue *this;
  
  this = (IGAccelCommandQueue *)_OSObject_typed_operator_new(&IGAccelCommandQueue_ktv,0x840);
  IGAccelCommandQueue(this);
  return this;
}



// IGAccelCommandQueue::operator new(unsigned long)

void * __thiscall IGAccelCommandQueue::operator_new(IGAccelCommandQueue *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelCommandQueue_ktv,this);
  return pvVar1;
}



// IGAccelCommandQueue::IGAccelCommandQueue()

void __thiscall IGAccelCommandQueue::IGAccelCommandQueue(IGAccelCommandQueue *this)

{
  IGAccelCommandQueue(this);
  return;
}



// IGAccelCommandQueue::IGAccelCommandQueue()

void __thiscall IGAccelCommandQueue::IGAccelCommandQueue(IGAccelCommandQueue *this)

{
  IOAccelCommandQueue::IOAccelCommandQueue((IOAccelCommandQueue *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelCommandQueue;
  IGHeapsAccess::IGHeapsAccess((IGHeapsAccess *)(this + 0x6b8));
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelCommandQueue::commandQueueStart()

undefined4 __thiscall IGAccelCommandQueue::commandQueueStart(IGAccelCommandQueue *this)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined8 uVar4;
  long lVar5;
  undefined8 local_48;
  undefined8 local_40;
  undefined4 local_38;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  uVar2 = (**(code **)(__got::vtable + 0x9f0))();
  if ((char)uVar2 != '\0') {
    lVar1 = *(long *)(*(long *)(this + 0x5c0) + 0xe50);
    lVar5 = 1;
    if (-2 < lVar1) {
      lVar5 = lVar1 + 1;
    }
    *(long *)(*(long *)(this + 0x5c0) + 0xe50) = lVar5;
    *(long *)(this + 0x828) = lVar5;
    dtHookSwCtxCreation();
    lVar5 = 0;
    *(undefined8 *)(this + 0x768) = 0;
    *(undefined8 *)(this + 0x770) = 0;
    *(undefined8 *)(this + 0x778) = 0;
    *(undefined8 *)(this + 0x780) = 0;
    *(undefined8 *)(this + 0x788) = 0;
    *(undefined4 *)(this + 0x790) = 0;
    *(undefined8 *)(this + 0x798) = 0;
    *(uint *)(this + 0x620) = ~*(uint *)((long)*(long **)(this + 0x5c0) + 0xcec) & 1;
    uVar4 = (**(code **)(**(long **)(this + 0x5c0) + 0x8d8))();
    *(undefined8 *)(this + 0x6b0) = uVar4;
    uVar4 = (**(code **)(*(long *)this + 0x968))(this);
    lVar1 = *(long *)(this + 0x6b0);
    *(undefined8 *)(lVar1 + 8) = uVar4;
    *(undefined1 *)(lVar1 + 0x68) = 0;
    *(IGAccelCommandQueue **)(lVar1 + 0x10) = this;
    *(undefined4 *)(this + 0x820) = 0xffffffff;
    do {
      *(undefined8 *)(this + lVar5 * 8 + 0x7a0) = 0;
      lVar5 = lVar5 + 1;
    } while (lVar5 != 0x10);
    this[0x824] = (IGAccelCommandQueue)0x0;
    this[0x830] = (IGAccelCommandQueue)0x0;
    local_40 = 0;
    local_48 = 0;
    local_38 = 0;
    uVar3 = IOAccelTask::getProcessIDAndName(*(char **)(this + 0x5b0),(int)&local_48);
    *(undefined4 *)(this + 0x834) = uVar3;
    this[0x838] = (IGAccelCommandQueue)0x0;
  }
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelCommandQueue::commandQueueStop()

void __thiscall IGAccelCommandQueue::commandQueueStop(IGAccelCommandQueue *this)

{
  IGAccelEventMachine::finishEvent
            (*(IGAccelEventMachine **)(*(long *)(this + 0x5c0) + 0x380),this + 0x5c8,0x41);
  dtHookSwCtxDestroy();
  if (((*(char *)(*(long *)(&DAT_00001278 + *(long *)(this + 0x5c0)) + 0x7cc) != '\0') &&
      (*(long *)(this + 0x6a8) != 0)) && (this[0x830] != (IGAccelCommandQueue)0x0)) {
    IGAccelEventMachine::disableStampInterrupt
              (*(IGAccelEventMachine **)(*(long *)(this + 0x5c0) + 0x380),
               *(int *)(*(long *)(*(long *)(this + 0x6a8) + 0xb0) + 0x20),1);
  }
  if (*(IGHardwareContext **)(this + 0x6a8) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x6a8),0);
    (**(code **)(**(long **)(this + 0x6a8) + 0x28))();
    *(undefined8 *)(this + 0x6a8) = 0;
  }
  if (*(long *)(this + 0x6b0) != 0) {
    (**(code **)(**(long **)(this + 0x5c0) + 0x8e0))();
    *(undefined8 *)(this + 0x6b0) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0002de18. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f8))(this);
  return;
}



// IGAccelCommandQueue::parseSegmentList(IOAccelShared2*, IOAccelSegmentResourceListHeader const*,
// IOAccelDeviceShmem*)

long * __thiscall
IGAccelCommandQueue::parseSegmentList
          (IGAccelCommandQueue *this,undefined8 param_1,undefined8 param_2,undefined8 param_3)

{
  long lVar1;
  long *plVar2;
  
  if (*(long *)(this + 0x6a8) == 0) {
    plVar2 = (long *)0x0;
    _IOLog("[IGPU] IG error, render context not vaild while parsing segment list.\n");
    _kprintf("[IGPU] IG error, render context not vaild while parsing segment list.\n");
  }
  else {
    lVar1 = *(long *)(*(long *)(this + 0x6a8) + 0xb0);
    plVar2 = IGAccelSegmentResourceList::newSegmentResourceList(param_1,param_2,param_3,lVar1,lVar1)
    ;
    if (plVar2 == (long *)0x0) {
      plVar2 = (long *)0x0;
    }
    else {
      plVar2[0xd] = *(long *)(*(long *)(this + 0x5c0) + 0x150);
    }
  }
  return plVar2;
}



// IGAccelCommandQueue::processSegment(IOAccelSegmentResourceList*, IOAccelKernelCommand const*,
// IOAccelKernelCommand const*)

void __thiscall
IGAccelCommandQueue::processSegment
          (IGAccelCommandQueue *this,undefined8 param_1,undefined8 param_2,undefined8 param_3)

{
  IGAccelTask::getBlit3DContext(*(IGAccelTask **)(*(long *)(this + 0x5c0) + 0x150),'\x01');
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5c0) + 0xe18),
             *(undefined8 *)(this + 0x828));
  dtHookSubmitQueueKMD();
  *(undefined4 *)(this + 0x820) = 0xffffffff;
  (**(code **)(__got::vtable + 0xa08))(this,param_1,param_2,param_3);
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5c0) + 0xe18));
  return;
}



// IGAccelCommandQueue::processSegmentKernelCommands(IOAccelSegmentResourceList*,
// IOAccelKernelCommand const*, IOAccelKernelCommand const*)

void __thiscall
IGAccelCommandQueue::processSegmentKernelCommands
          (IGAccelCommandQueue *this,long param_1,undefined8 param_2,undefined8 param_3)

{
  int iVar1;
  long lVar2;
  
  iVar1 = *(int *)(this + 0x820);
  *(int *)(this + 0x820) = iVar1 + 1;
  *(long *)(this + (long)iVar1 * 8 + 0x7a8) = param_1;
  iVar1 = *(int *)(this + 0x620);
  if (((*(ulong *)(param_1 + 0x58) & ~*(ulong *)(this + 0x550)) != 0) ||
     (((*(ulong *)(this + 0x550) | *(ulong *)(param_1 + 0x58)) & ~*(ulong *)(param_1 + 0x60)) != 0))
  {
    if ((*(byte *)(*(long *)(this + 0x5c0) + 0xc9f) & 1) != 0) {
      __os_log_internal(0,__got::__os_log_default,0x11,"protection violation: %016llx -> %016llx");
    }
    (**(code **)(*(long *)this + 0x9a0))(this);
    replayKernelCommand(this,'\0');
    this[0x839] = (IGAccelCommandQueue)0x1;
    *(undefined4 *)(this + 0x620) = 0;
  }
  (**(code **)(__got::vtable + 0xa10))(this,param_1,param_2,param_3);
  if (this[0x839] != (IGAccelCommandQueue)0x0) {
    this[0x839] = (IGAccelCommandQueue)0x0;
    *(uint *)(this + 0x620) = (uint)(iVar1 != 0);
  }
  if (*(int *)(this + 0x610) != 0) {
    if (-1 < *(int *)(this + 0x820)) {
      lVar2 = -1;
      do {
        IGAccelSegmentResourceList::removeFromChannel(*(long *)(this + lVar2 * 8 + 0x7a8));
        *(undefined8 *)(this + lVar2 * 8 + 0x7a8) = 0;
        lVar2 = lVar2 + 1;
      } while (lVar2 < *(int *)(this + 0x820));
    }
    *(undefined4 *)(this + 0x820) = 0xffffffff;
  }
  lVar2 = *(long *)(this + 0x6b0);
  if (*(long *)(lVar2 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar2 + 0x20) = 0;
  }
  return;
}



// IGAccelCommandQueue::replayKernelCommand(bool)

void __thiscall IGAccelCommandQueue::replayKernelCommand(IGAccelCommandQueue *this,char param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  bool bVar8;
  long lVar9;
  long lVar10;
  uint uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  
  lVar14 = *(long *)(this + 0x770);
  if (lVar14 == 0) goto LAB_0002e2f0;
  uVar1 = *(uint *)(lVar14 + 4);
  lVar13 = *(long *)(this + 0x6b0);
  uVar4 = *(undefined8 *)(lVar13 + 0x18);
  uVar5 = *(undefined8 *)(lVar13 + 0x50);
  uVar6 = *(undefined8 *)(lVar13 + 0x58);
  if (param_1 == '\0') {
    uVar2 = *(uint *)(this + 0x820);
    if ((int)uVar2 < 0) goto LAB_0002e15b;
    lVar10 = *(long *)(this + (ulong)uVar2 * 8 + 0x7a0);
    uVar11 = *(uint *)(lVar13 + 0x6c);
    if (lVar10 == 0) goto LAB_0002e15f;
    *(uint *)(this + 0x820) = uVar2 - 1;
    bVar8 = false;
  }
  else {
LAB_0002e15b:
    uVar11 = *(uint *)(lVar13 + 0x6c);
LAB_0002e15f:
    bVar8 = true;
    lVar10 = 0;
  }
  uVar7 = *(undefined8 *)(this + 0x768);
  iVar3 = *(int *)(this + 0x620);
  if (*(long *)(lVar13 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar13 + 0x20) = 0;
    lVar13 = *(long *)(this + 0x6b0);
  }
  *(undefined8 *)(lVar13 + 0x50) = *(undefined8 *)(this + 0x778);
  *(undefined8 *)(lVar13 + 0x18) = *(undefined8 *)(this + 0x788);
  *(undefined8 *)(lVar13 + 0x58) = *(undefined8 *)(this + 0x780);
  uVar2 = *(uint *)(this + 0x790);
  *(uint *)(lVar13 + 0x6c) = uVar2;
  lVar9 = IOAccelResource2::getKernelData();
  lVar12 = (ulong)uVar2 + lVar9;
  if (lVar9 == 0) {
    lVar12 = 0;
  }
  *(long *)(lVar13 + 0x20) = lVar12;
  *(undefined8 *)(this + 0x768) = 0;
  *(undefined8 *)(this + 0x770) = 0;
  *(undefined8 *)(this + 0x778) = 0;
  *(undefined8 *)(this + 0x780) = 0;
  *(undefined8 *)(this + 0x788) = 0;
  *(undefined4 *)(this + 0x790) = 0;
  *(undefined8 *)(this + 0x798) = 0;
  *(undefined4 *)(this + 0x620) = 1;
  this[0x824] = (IGAccelCommandQueue)0x1;
  (**(code **)(*(long *)this + 0xa08))(this,uVar7,lVar14,(ulong)uVar1 + lVar14);
  this[0x824] = (IGAccelCommandQueue)0x0;
  lVar14 = *(long *)(this + 0x6b0);
  if (*(long *)(lVar14 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar14 + 0x20) = 0;
    lVar14 = *(long *)(this + 0x6b0);
  }
  *(uint *)(this + 0x620) = (uint)(iVar3 != 0);
  *(undefined8 *)(lVar14 + 0x50) = uVar5;
  *(undefined8 *)(lVar14 + 0x18) = uVar4;
  *(undefined8 *)(lVar14 + 0x58) = uVar6;
  *(uint *)(lVar14 + 0x6c) = uVar11;
  if (param_1 == '\0') {
    lVar12 = IOAccelResource2::getKernelData();
    lVar13 = (ulong)uVar11 + lVar12;
    if (lVar12 == 0) {
      lVar13 = 0;
    }
    *(long *)(lVar14 + 0x20) = lVar13;
  }
  if (!bVar8) {
    iVar3 = *(int *)(this + 0x820);
    *(int *)(this + 0x820) = iVar3 + 1;
    *(long *)(this + (long)iVar3 * 8 + 0x7a8) = lVar10;
  }
LAB_0002e2f0:
  if ((param_1 != '\0') && (lVar14 = *(long *)(this + 0x6b0), *(long *)(lVar14 + 0x20) != 0)) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar14 + 0x20) = 0;
  }
  return;
}



// IGAccelCommandQueue::processSegmentKernelCommand(IOAccelSegmentResourceList*,
// IOAccelKernelCommand const*, IOAccelKernelCommand const*)

void __thiscall
IGAccelCommandQueue::processSegmentKernelCommand
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          IGAccelResource *param_10,uint *param_11,long param_12)

{
  uint uVar1;
  IGAccelCommandDescriptor *pIVar2;
  IGAccelResource *pIVar3;
  char *pcVar4;
  uint uVar5;
  undefined4 uVar6;
  long lVar8;
  undefined8 uVar9;
  ulong uVar7;
  
  uVar1 = *param_11;
  uVar5 = uVar1 & 0xffff0000;
  if (uVar5 == 0x40000) {
    uVar9 = *(undefined8 *)((long)this + 0x6a8);
    pIVar3 = *(IGAccelResource **)((long)this + 0x6b0);
    *(undefined8 *)(pIVar3 + 0x50) = uVar9;
    lVar8 = IntelMTLComputeFunctions::execute
                      (uVar1,this,param_10,(ulong)param_11,param_12,pIVar3,
                       *(IntelAccelerator **)((long)this + 0x5c0),uVar9,(long)this + 0x5c8);
    uVar6 = (undefined4)lVar8;
  }
  else if (uVar5 == 0x30000) {
    uVar9 = *(undefined8 *)((long)this + 0x6a8);
    pcVar4 = *(char **)((long)this + 0x6b0);
    *(undefined8 *)(pcVar4 + 0x50) = uVar9;
    uVar9 = IntelMTLBlitFunctions::execute
                      (param_1_00,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                       uVar1,this,(long)param_10,(long)param_11,param_12,pcVar4,(long)this + 0x6b8,
                       *(IntelAccelerator **)((long)this + 0x5c0),uVar9,(long)this + 0x5c8);
    uVar6 = (undefined4)uVar9;
  }
  else {
    if (uVar5 != 0x10000) {
                    // WARNING: Could not recover jumptable at 0x0002e41a. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(__got::vtable + 0xa18))(this,param_10,param_11,param_12);
      return;
    }
    uVar9 = *(undefined8 *)((long)this + 0x6a8);
    pIVar2 = *(IGAccelCommandDescriptor **)((long)this + 0x6b0);
    *(undefined8 *)(pIVar2 + 0x50) = uVar9;
    uVar7 = IntelMTLRenderFunctions::execute
                      (param_1_00,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                       uVar1,this,(long)param_10,(long)param_11,param_12,pIVar2,
                       (IGHeapsAccess *)((long)this + 0x6b8),
                       *(IntelAccelerator **)((long)this + 0x5c0),uVar9,(long)this + 0x5c8);
    uVar6 = (undefined4)uVar7;
  }
  *(undefined4 *)((long)this + 0x610) = uVar6;
  return;
}



// IGAccelCommandQueue::processParallelCommandBuffer(unsigned int, unsigned int)

void __thiscall
IGAccelCommandQueue::processParallelCommandBuffer
          (IGAccelCommandQueue *this,undefined4 param_1,undefined4 param_2)

{
  uint uVar1;
  undefined4 uVar2;
  uint uVar3;
  long lVar4;
  long lVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  byte bVar8;
  undefined8 local_130 [9];
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  undefined4 local_bc;
  long local_b8 [17];
  
  bVar8 = 0;
  local_b8[0x10] = *(long *)__got::___stack_chk_guard;
  local_bc = param_2;
  replayKernelCommand(this,'\x01');
  lVar5 = *(long *)(this + 0x6b0);
  puVar6 = (undefined8 *)(lVar5 + 8);
  puVar7 = local_130;
  for (lVar4 = 9; lVar4 != 0; lVar4 = lVar4 + -1) {
    *puVar7 = *puVar6;
    puVar6 = puVar6 + (ulong)bVar8 * -2 + 1;
    puVar7 = puVar7 + (ulong)bVar8 * -2 + 1;
  }
  local_c8 = *(undefined8 *)(lVar5 + 0x70);
  local_d0 = *(undefined8 *)(lVar5 + 0x68);
  local_d8 = *(undefined8 *)(lVar5 + 0x60);
  local_e8 = *(undefined8 *)(lVar5 + 0x50);
  local_e0 = *(undefined8 *)(lVar5 + 0x58);
  lVar5 = *(long *)(this + 0x5c0);
  uVar1 = *(uint *)(lVar5 + 0xcec);
  uVar2 = *(undefined4 *)(this + 0x620);
  uVar3 = *(uint *)(this + 0x820);
  local_b8[0xf] = 0;
  local_b8[0xe] = 0;
  local_b8[0xd] = 0;
  local_b8[0xc] = 0;
  local_b8[0xb] = 0;
  local_b8[10] = 0;
  local_b8[9] = 0;
  local_b8[8] = 0;
  local_b8[7] = 0;
  local_b8[6] = 0;
  local_b8[5] = 0;
  local_b8[4] = 0;
  local_b8[3] = 0;
  local_b8[2] = 0;
  local_b8[1] = 0;
  local_b8[0] = 0;
  if (-1 < (int)uVar3) {
    lVar4 = 0;
    do {
      local_b8[lVar4] = *(long *)(this + lVar4 * 8 + 0x7a0);
      lVar4 = lVar4 + 1;
    } while ((ulong)uVar3 + 1 != lVar4);
  }
  *(uint *)(lVar5 + 0xcec) = uVar1 & 0xfffffffe;
  *(undefined4 *)(this + 0x620) = 1;
  *(undefined4 *)(this + 0x820) = 0xffffffff;
  (**(code **)(__got::vtable + 0xa30))(this,param_1,local_bc);
  *(uint *)(*(long *)(this + 0x5c0) + 0xcec) =
       *(uint *)(*(long *)(this + 0x5c0) + 0xcec) | uVar1 & 1;
  lVar5 = *(long *)(this + 0x6b0);
  *(undefined4 *)(this + 0x620) = uVar2;
  puVar6 = local_130;
  puVar7 = (undefined8 *)(lVar5 + 8);
  for (lVar4 = 9; lVar4 != 0; lVar4 = lVar4 + -1) {
    *puVar7 = *puVar6;
    puVar6 = puVar6 + (ulong)bVar8 * -2 + 1;
    puVar7 = puVar7 + (ulong)bVar8 * -2 + 1;
  }
  *(undefined8 *)(lVar5 + 0x70) = local_c8;
  *(undefined8 *)(lVar5 + 0x68) = local_d0;
  *(undefined8 *)(lVar5 + 0x60) = local_d8;
  *(undefined8 *)(lVar5 + 0x58) = local_e0;
  *(undefined8 *)(lVar5 + 0x50) = local_e8;
  *(uint *)(this + 0x820) = uVar3;
  if (-1 < (int)uVar3) {
    lVar5 = 0;
    do {
      *(long *)(this + lVar5 * 8 + 0x7a0) = local_b8[lVar5];
      lVar5 = lVar5 + 1;
    } while ((ulong)uVar3 + 1 != lVar5);
  }
  if (*(long *)__got::___stack_chk_guard == local_b8[0x10]) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandQueue::externalMethod(unsigned int, IOExternalMethodArguments*,
// IOExternalMethodDispatch*, OSObject*, void*)

undefined4 __cdecl IGAccelCommandQueue::externalMethod(long param_1,int param_2)

{
  long *plVar1;
  undefined4 uVar2;
  long lVar3;
  long lVar4;
  
  uVar2 = (**(code **)(__got::vtable + 0x860))();
  if (param_2 == 1) {
    lVar3 = 0;
    lVar4 = 0;
    do {
      if (*(char *)(param_1 + 0x700 + lVar4) != '\0') {
        if (*(long *)(param_1 + 0x708 + lVar3 * 4) != 0) {
          IOAccelResource2::releaseKernelData();
          *(undefined8 *)(param_1 + 0x708 + lVar3 * 4) = 0;
          *(undefined8 *)(param_1 + 0x710 + lVar3 * 4) = 0;
        }
        plVar1 = *(long **)(param_1 + 0x6d0 + lVar3 * 2);
        if (plVar1 != (long *)0x0) {
          (**(code **)(*plVar1 + 0x178))();
        }
        *(undefined8 *)(param_1 + 0x6d0 + lVar3 * 2) = 0;
        *(undefined1 *)(param_1 + 0x700 + lVar4) = 0;
        *(undefined4 *)(param_1 + 0x6b8 + lVar3) = 0;
      }
      lVar4 = lVar4 + 1;
      lVar3 = lVar3 + 4;
    } while (lVar3 != 0x18);
  }
  return uVar2;
}



// IGAccelCommandQueue::beginCoalescedSegment()

void __thiscall IGAccelCommandQueue::beginCoalescedSegment(IGAccelCommandQueue *this)

{
  *(undefined4 *)(this + 0x820) = 0xffffffff;
  IGAccelTask::getBlit3DContext(*(IGAccelTask **)(*(long *)(this + 0x5c0) + 0x150),'\x01');
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5c0) + 0xe18),
             *(undefined8 *)(this + 0x828));
  dtHookSubmitQueueKMD();
  return;
}



// IGAccelCommandQueue::endCoalescedSegment()

void __thiscall IGAccelCommandQueue::endCoalescedSegment(IGAccelCommandQueue *this)

{
  replayKernelCommand(this,'\x01');
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5c0) + 0xe18));
  return;
}



// IGAccelCommandQueue::createHardwareContextIfNeeded(unsigned char)

ulong __thiscall
IGAccelCommandQueue::createHardwareContextIfNeeded(IGAccelCommandQueue *this,undefined1 param_1)

{
  IGAccelTask *this_00;
  long lVar1;
  IGHardwareContext *pIVar2;
  undefined8 unaff_RBX;
  ulong uVar3;
  
  uVar3 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
  if (*(long *)(this + 0x6a8) == 0) {
    this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))();
    IGAccelTask::setRCSSchedPriority(this_00,param_1);
    lVar1 = (**(code **)(*(long *)this + 0x968))(this);
    pIVar2 = IGHardwareContext::withOptions
                       (lVar1,(undefined8 *)&g_cInitGfxHwCtxParamsForGraphics,param_1);
    *(IGHardwareContext **)(this + 0x6a8) = pIVar2;
    this[0x830] = (IGAccelCommandQueue)
                  ((byte)this[0x830] |
                  *(byte *)(*(long *)(&DAT_00001278 + *(long *)(this + 0x5c0)) + 0x7cc));
    if (pIVar2 == (IGHardwareContext *)0x0) {
      uVar3 = 0;
      _IOLog("[IGPU] IG error, render context creation failed.\n");
      _kprintf("[IGPU] IG error, render context creation failed.\n");
    }
  }
  return uVar3 & 0xffffffff;
}



// IGAccelCommandQueue::setPriority(eIOAccelCommandQueuePriority)

void __thiscall IGAccelCommandQueue::setPriority(IGAccelCommandQueue *this,uint param_1)

{
  int iVar1;
  ulong uVar2;
  IGAccelTask *this_00;
  char cVar3;
  
  (**(code **)(__got::vtable + 0xa38))();
  if (param_1 < 6) {
    cVar3 = (char)(0x103030200 >> ((byte)(param_1 << 3) & 0x3f));
    uVar2 = createHardwareContextIfNeeded(this,cVar3);
    if ((char)uVar2 == '\0') {
      *(undefined4 *)(this + 0x610) = 0xe00002bd;
      _IOLog("[IGPU] IG error, hardware context creation failed.\n");
      _kprintf("[IGPU] IG error, hardware context creation failed.\n");
      return;
    }
    if (*(char *)(*(long *)(this + 0x6a8) + 0x78) != cVar3) {
      iVar1 = *(int *)(*(long *)(*(long *)(this + 0x6a8) + 0xb0) + 0x20);
      this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
      IGAccelTask::setRCSSchedPriority(this_00,cVar3);
      IGHardwareContext::updateSchedPriority(*(IGHardwareContext **)(this + 0x6a8),cVar3);
      if (this[0x830] != (IGAccelCommandQueue)0x0) {
        IGAccelEventMachine::enableStampInterrupt
                  (*(IGAccelEventMachine **)(*(long *)(this + 0x5c0) + 0x380),
                   *(int *)(*(long *)(*(long *)(this + 0x6a8) + 0xb0) + 0x20),1);
        IGAccelEventMachine::disableStampInterrupt
                  (*(IGAccelEventMachine **)(*(long *)(this + 0x5c0) + 0x380),iVar1,1);
        return;
      }
    }
  }
  return;
}



// IGAccelCommandQueue::processCommandBuffer(unsigned int, unsigned int)

void __thiscall
IGAccelCommandQueue::processCommandBuffer
          (IGAccelCommandQueue *this,undefined4 param_1,undefined4 param_2)

{
  ulong uVar1;
  undefined8 uVar2;
  IGAccelCommandQueue IVar3;
  
  *(uint *)(*(long *)(this + 0x5c0) + 0xebc) = *(uint *)(*(long *)(this + 0x5c0) + 0xebc) | 0x100;
  if ((this[0x838] == (IGAccelCommandQueue)0x0) &&
     (*(int *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x5c0)) + 0x230) == *(int *)(this + 0x834)
     )) {
    uVar2 = 0;
    IVar3 = (IGAccelCommandQueue)0x1;
  }
  else {
    if ((this[0x838] == (IGAccelCommandQueue)0x0) ||
       (*(int *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x5c0)) + 0x230) ==
        *(int *)(this + 0x834))) goto LAB_0002e9f3;
    IVar3 = (IGAccelCommandQueue)0x0;
    uVar2 = 1;
  }
  (**(code **)(*(long *)this + 0xa28))(this,uVar2);
  this[0x838] = IVar3;
LAB_0002e9f3:
  uVar1 = createHardwareContextIfNeeded(this,2);
  if ((char)uVar1 != '\0') {
    (**(code **)(__got::vtable + 0xa30))(this,param_1,param_2);
    *(uint *)(*(long *)(this + 0x5c0) + 0xebc) =
         *(uint *)(*(long *)(this + 0x5c0) + 0xebc) & 0xfffffeff;
    return;
  }
  *(undefined4 *)(this + 0x610) = 0xe00002bd;
  _IOLog("[IGPU] IG error, hardware context creation failed while processing command buffer.\n");
  _kprintf("[IGPU] IG error, hardware context creation failed while processing command buffer.\n");
  return;
}



// IOAccelCommandQueue::getOwningTask() const

undefined8 __thiscall IOAccelCommandQueue::getOwningTask(IOAccelCommandQueue *this)

{
  return *(undefined8 *)(this + 0x570);
}



// IOAccelCommandQueue::getGPUTask() const

undefined8 __thiscall IOAccelCommandQueue::getGPUTask(IOAccelCommandQueue *this)

{
  return *(undefined8 *)(this + 0x5b0);
}



// IOAccelCommandQueue::getOwningTaskPid() const

undefined4 __thiscall IOAccelCommandQueue::getOwningTaskPid(IOAccelCommandQueue *this)

{
  return *(undefined4 *)(this + 0x578);
}



// IOAccelCommandQueue::affectedByHardwareReset(bool, unsigned int)

void IOAccelCommandQueue::affectedByHardwareReset(void)

{
  return;
}



// IOAccelCommandQueue::shouldHardwareCommandNooped()

undefined8 IOAccelCommandQueue::shouldHardwareCommandNooped(void)

{
  return 0;
}



// IOAccelCommandQueue::canSubmitCommandBuffer()

undefined1 IOAccelCommandQueue::canSubmitCommandBuffer(void)

{
  return 1;
}



// IOAccelCommandQueue::pauseSubmitCommandBuffer()

void IOAccelCommandQueue::pauseSubmitCommandBuffer(void)

{
  _IOSleep(1);
  return;
}



// IGAccelCommandQueue::MetaClass::~MetaClass()

void __thiscall IGAccelCommandQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelCommandQueue_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelCommandQueue::gMetaClass,"IGAccelCommandQueue",
             (OSMetaClass *)__got::gMetaClass,0x840);
  IGAccelCommandQueue::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelCommandQueue::gMetaClass);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit2d_supported(blit3d_params_t const*, IGVector<rect_pair_t, IGIOMallocAllocatorPolicy> const&,
// _WA_TABLE*)

undefined8 __cdecl blit2d_supported(int *param_1,long *param_2,long param_3)

{
  uint uVar1;
  undefined4 extraout_var;
  undefined8 uVar2;
  
  uVar1 = blit2d_common_supported(param_1,param_2,param_3);
  if (((char)uVar1 == '\0') || ((char)param_1[3] == '\a')) {
    uVar2 = 0;
  }
  else {
    uVar2 = CONCAT71((int7)(CONCAT44(extraout_var,uVar1) >> 8),(char)param_1[0x15] != '\a');
  }
  return uVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit2d_common_supported(blit3d_params_t const*, IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>
// const&, _WA_TABLE*)

uint __cdecl blit2d_common_supported(int *param_1,long *param_2,long param_3)

{
  char cVar1;
  char cVar2;
  byte bVar3;
  uint uVar4;
  undefined4 uVar5;
  uint uVar6;
  byte bVar7;
  long lVar8;
  float *pfVar9;
  
  cVar1 = (char)param_1[3];
  if (((((cVar1 != '\v') && (cVar2 = (char)param_1[0x15], cVar2 != '\v')) &&
       ((*(byte *)((long)param_1 + 0x3d) & 1) == 0)) && ((*(byte *)((long)param_1 + 0x85) & 1) == 0)
      ) && ((((char)param_1[0x2e] == '\0' || ((*(uint6 *)(param_3 + 0xd4) & 0x40000000000) == 0)) &&
            (*(short *)((long)param_1 + 0x56) == *(short *)((long)param_1 + 0xe))))) {
    uVar4 = param_1[2];
    if (cVar1 == '\0') {
      if ((uVar4 & 3) == 0) {
        uVar6 = 0;
        if (((*param_1 + param_1[0xb] & 0x3fU) != 0) || (0x7ffe < uVar4)) goto LAB_0002ebda;
        uVar5 = blit2d_supported_dimensions(param_1 + 0x12);
        if ((char)uVar5 != '\0') {
          if (param_1[6] == 1) {
            bVar3 = *(byte *)(param_1 + 0x28);
            bVar7 = 2;
            if ((bVar3 & 3) != 0) {
              bVar7 = ~bVar3 & 1;
            }
            if (0x7fff < (int)((uint)(bVar3 >> bVar7) * param_1[5])) goto LAB_0002ebd8;
          }
LAB_0002ec35:
          if ((cVar2 == '\0') && (param_1[0x18] == 1)) {
            bVar3 = *(byte *)(param_1 + 0x28);
            bVar7 = 2;
            if ((bVar3 & 3) != 0) {
              bVar7 = ~bVar3 & 1;
            }
            if (0x7fff < (int)((uint)(bVar3 >> bVar7) * param_1[0x17])) goto LAB_0002ebd8;
          }
          if (((short)param_1[0x29] == 0) &&
             (*(char *)((long)param_1 + 0xd) == *(char *)((long)param_1 + 0x55))) {
            uVar6 = 0;
            if (((*(ushort *)((long)param_1 + 0xa2) & 0x1e0) == 0) &&
               ((cVar1 != '\x01' && (cVar2 != '\x01')))) {
              lVar8 = *param_2;
              if (lVar8 == 0) {
                uVar6 = 1;
              }
              else {
                pfVar9 = (float *)(param_2[2] + 0x1c);
                do {
                  lVar8 = lVar8 + -1;
                  uVar6 = -(uint)(pfVar9[-1] != pfVar9[-5] || *pfVar9 != pfVar9[-4]);
                  if ((uVar6 & 1) != 0) break;
                  pfVar9 = pfVar9 + 8;
                } while (lVar8 != 0);
                uVar6 = uVar6 ^ 1;
              }
            }
            goto LAB_0002ebda;
          }
        }
      }
    }
    else if ((uVar4 & 0x3f) == 0) {
      uVar6 = 0;
      if (((*param_1 + param_1[0xb] & 0xfffU) != 0) || (0x7ffe < uVar4 >> 2)) goto LAB_0002ebda;
      uVar5 = blit2d_supported_dimensions(param_1 + 0x12);
      if ((char)uVar5 != '\0') goto LAB_0002ec35;
    }
  }
LAB_0002ebd8:
  uVar6 = 0;
LAB_0002ebda:
  return uVar6 & 0xffffff01;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit2d_fast_supported(blit3d_params_t const*, IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>
// const&, _WA_TABLE*)

ulong __cdecl blit2d_fast_supported(long *param_1,ulong *param_2,long param_3)

{
  char cVar1;
  char cVar2;
  ulong uVar3;
  uint uVar4;
  undefined4 extraout_var;
  ulong uVar5;
  uint uVar6;
  uint uVar7;
  float *pfVar8;
  ulong uVar9;
  bool bVar10;
  float fVar11;
  
  uVar4 = blit2d_common_supported((int *)param_1,(long *)param_2,param_3);
  if (((char)uVar4 != '\0') && ((*(byte *)((long)param_1 + 0xa3) & 0x10) == 0)) {
    cVar1 = *(char *)((long)param_1 + 0xc);
    if ((((cVar1 != '\a') && (*(char *)((long)param_1 + 0x54) != '\a')) ||
        (*(byte *)(param_1 + 0x14) < 5)) &&
       (((cVar1 != '\0' || (((int)*param_1 + *(int *)((long)param_1 + 0x2c) & 0x3fU) == 0)) &&
        ((cVar2 = *(char *)((long)param_1 + 0x54), cVar2 != '\0' ||
         (((int)param_1[9] + *(int *)((long)param_1 + 0x74) & 0x3fU) == 0)))))) {
      uVar7 = 0xf;
      if ((param_3 != 0) && (uVar7 = 0x3f, (*(uint6 *)(param_3 + 0xd4) & 0x8000000000) == 0)) {
        uVar7 = 0xf;
      }
      uVar6 = 0x3f;
      if (cVar1 == cVar2) {
        uVar6 = uVar7;
      }
      if (((*(uint *)(param_1 + 1) & uVar6) == 0) && ((*(uint *)(param_1 + 10) & uVar6) == 0)) {
        uVar3 = *param_2;
        if (uVar3 == 0) {
          uVar5 = 0;
LAB_0002eee8:
          return uVar5 ^ 1;
        }
        pfVar8 = (float *)param_2[2];
        uVar5 = CONCAT71((int7)(CONCAT44(extraout_var,uVar4) >> 8),1);
        uVar9 = 1;
        do {
          if ((ulong)*(uint *)((long)param_1 + 0x74) + param_1[9] ==
              (ulong)*(uint *)((long)param_1 + 0x2c) + *param_1) {
            fVar11 = *pfVar8;
            if ((fVar11 < pfVar8[6] + pfVar8[4]) && (pfVar8[4] < pfVar8[2] + fVar11)) {
              if ((pfVar8[1] < pfVar8[7] + pfVar8[5]) && (pfVar8[5] < pfVar8[1] + pfVar8[3]))
              goto LAB_0002eee8;
            }
          }
          else {
            fVar11 = *pfVar8;
          }
          if (((((int)fVar11 * (uint)*(byte *)(param_1 + 0x14) & 0xf) != 0) ||
              (((int)pfVar8[4] * (uint)*(byte *)(param_1 + 0x14) & 0xf) != 0)) ||
             (((*(uint *)(param_3 + 0xc4) >> 0xd & 1) != 0 &&
              (((cVar2 == '\x03' && ((int)pfVar8[5] < 9)) && (((int)pfVar8[5] & 3U) != 0))))))
          goto LAB_0002eee8;
          uVar5 = CONCAT71((int7)(uVar5 >> 8),uVar9 < uVar3);
          pfVar8 = pfVar8 + 8;
          bVar10 = uVar9 == uVar3;
          uVar9 = uVar9 + 1;
          if (bVar10) goto LAB_0002eee8;
        } while( true );
      }
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl
// blt2d_source_copy(IGHardwareBlit2DContext*, blit3d_params_t*, IGVector<rect_pair_t,
// IGIOMallocAllocatorPolicy> const&, _WA_TABLE*)

void __cdecl
blt2d_source_copy(undefined8 param_1_00,ulong param_2_00,ulong param_3_00,ulong param_4_00,
                 ulong param_5,ulong param_6,undefined8 param_7,undefined8 param_8,long param_9,
                 long *param_10,ulong *param_11,long param_12,dword *param_13,char *param_14)

{
  float fVar1;
  char cVar2;
  byte bVar3;
  IGHardwareRingBuffer *this;
  long lVar4;
  long *plVar5;
  ulong *puVar6;
  ulong uVar7;
  char cVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong uVar13;
  uint uVar14;
  ulong uVar15;
  uint uVar16;
  ulong uVar17;
  ulong *puVar18;
  uint *puVar19;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  undefined8 local_a8;
  int local_a0;
  long *local_98;
  long local_90;
  IGHardwareRingBuffer *local_88;
  ulong *local_80;
  uint *local_78;
  IGAccelTask *local_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  long *local_50;
  long *local_48;
  dword *local_40;
  ulong local_38;
  
  local_98 = *(long **)(param_9 + 0xb0);
  this = (IGHardwareRingBuffer *)local_98[0x26];
  cVar2 = *(char *)((long)param_10 + 0xc);
  if ((((cVar2 == '\a') || (cVar2 == '\v')) ||
      (cVar8 = *(char *)((long)param_10 + 0x54), cVar8 == '\v')) || (cVar8 == '\a')) {
    local_40 = (dword *)(ulong)*(byte *)(param_10 + 0x14);
    cVar8 = *(char *)((long)param_10 + 0x54);
    local_48 = (long *)CONCAT44(local_48._4_4_,1);
  }
  else {
    bVar3 = *(byte *)(param_10 + 0x14);
    if ((bVar3 & 3) == 0) {
      local_48 = (long *)CONCAT44(local_48._4_4_,(uint)(bVar3 >> 2));
      local_40 = &MACH_HEADER.cputype;
    }
    else {
      param_13 = (dword *)(ulong)(2 - (bVar3 & 1));
      local_48 = (long *)CONCAT44(local_48._4_4_,(uint)(bVar3 >> ((byte)(bVar3 & 1) ^ 1)));
      local_40 = param_13;
    }
  }
  local_70 = *(IGAccelTask **)(param_9 + 0x58);
  local_78 = *(uint **)(param_9 + 0xd8);
  local_58 = 0;
  local_38 = 0;
  local_60 = 0;
  local_50 = (long *)((ulong)(cVar8 != '\0') << 0xb);
  local_68 = 0xcc000054f00008;
  local_90 = param_12;
  local_80 = param_11;
  IGHardwareRingBuffer::waitForSpace
            (param_1_00,param_2_00,param_3_00,param_4_00,param_5,param_6,param_7,param_8,this,3,0,
             0xcc000054f00008,(char *)param_13,param_14);
  local_a8 = 0x2220011000001;
  local_a0 = (*(char *)((long)param_10 + 0xc) == '\x03') + 0x30000 +
             (uint)(*(char *)((long)param_10 + 0x54) == '\x03') * 2;
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_a8,3);
  local_88 = this;
  (**(code **)(*(long *)this + 0x138))(this);
  uVar14 = *(uint *)(param_10 + 10) >> 2;
  if (*(char *)((long)param_10 + 0x54) == '\0') {
    uVar14 = *(uint *)(param_10 + 10);
  }
  uVar16 = *(uint *)(param_10 + 1) >> 2;
  if (*(char *)((long)param_10 + 0xc) == '\0') {
    uVar16 = *(uint *)(param_10 + 1);
  }
  uVar17 = ((ulong)(uVar16 & 0xffff) << 0x20) + local_60;
  local_68 = ((ulong)(cVar2 != '\0') * 0x8000 + local_68 | (ulong)((int)local_40 - 1U & 3) << 0x38)
             + (long)local_50 | (ulong)(uVar14 & 0xffff) << 0x20;
  local_40 = (dword *)CONCAT44(local_40._4_4_,(float)(int)local_48);
  local_48 = param_10 + 0x1b;
  uVar10 = 0;
  puVar18 = local_80;
  puVar19 = local_78;
  local_50 = param_10;
  do {
    puVar6 = (ulong *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)puVar19);
    uVar9 = (ulong)((puVar19[0x614] - puVar19[0x616]) - 8) / 0x28;
    uVar7 = *puVar18 - uVar10;
    if (uVar9 <= *puVar18 - uVar10) {
      uVar7 = uVar9;
    }
    local_60 = uVar7 + uVar10;
    if (uVar10 < local_60) {
      uVar10 = uVar10 << 5 | 0x1c;
      param_6 = (ulong)local_40 & 0xffffffff;
      param_7 = 0;
      do {
        uVar9 = puVar18[2];
        fVar23 = *(float *)((uVar9 - 4) + uVar10);
        if ((fVar23 != 0.0) || (NAN(fVar23))) {
          fVar20 = *(float *)(uVar9 + uVar10);
          param_2_00 = (ulong)(uint)fVar20;
          if ((fVar20 != 0.0) || (NAN(fVar20))) {
            uVar13 = (ulong)*(uint *)((long)local_50 + 0x74) + local_50[9];
            fVar21 = *(float *)((uVar9 - 8) + uVar10);
            fVar1 = *(float *)((uVar9 - 0x18) + uVar10);
            fVar24 = *(float *)((uVar9 - 0xc) + uVar10);
            fVar22 = fVar23 + fVar24;
            uVar15 = (ulong)((uint)(long)(fVar24 * local_40._0_4_) & 0xffff |
                            (uint)(long)fVar21 << 0x10);
            fVar23 = fVar20 + fVar21;
            uVar11 = (ulong)((uint)(long)fVar1 & 0xffff) << 0x10;
            fVar24 = *(float *)((uVar9 - 0x1c) + uVar10) * local_40._0_4_;
            param_5 = (ulong)(uint)fVar24;
            uVar12 = ((long)(fVar22 * local_40._0_4_) & 0xffffU) << 0x20;
            param_13 = (dword *)(uVar12 | uVar15 | (long)fVar23 << 0x30);
            if (0x7ffe < (int)fVar23) {
              uVar13 = uVar13 + ((int)fVar21 & 0xfffff000U) * (int)local_50[10];
              uVar14 = (uint)(long)fVar21 & 0xfff;
              fVar21 = (float)uVar14;
              param_13 = (dword *)((long)(fVar20 + fVar21) << 0x30 |
                                  (ulong)uVar14 << 0x10 | uVar12 | uVar15 & 0xffff0000ffff);
            }
            local_38 = local_38 & 0xffff000000000000 | uVar13 & 0xffffffffffff;
            param_3_00 = (ulong)(uint)fVar21;
            local_58 = ((ulong)*(uint *)((long)local_50 + 0x2c) + *local_50 & 0xffffffffffff) +
                       (local_58 & 0xffff000000000000);
            fVar20 = *(float *)((uVar9 - 0x10) + uVar10) + fVar1;
            param_2_00 = (ulong)(uint)fVar20;
            if (0x7ffe < (int)fVar20) {
              uVar11 = uVar11 & 0xffffffff0fffffff;
              local_58 = local_58 & 0xffff000000000000 |
                         ((int)fVar1 & 0xfffff000U) * (int)local_50[1] + local_58 & 0xffffffffffff;
            }
            uVar17 = uVar11 | uVar17 & 0xffffffff00000000 | (ulong)((uint)(long)fVar24 & 0xffff);
            *puVar6 = local_68;
            puVar6[1] = (ulong)param_13;
            puVar6[2] = local_38;
            puVar6[3] = uVar17;
            puVar6[4] = local_58;
            puVar6 = puVar6 + 5;
            puVar18 = local_80;
            puVar19 = local_78;
          }
        }
        param_4_00 = (ulong)(uint)fVar23;
        uVar10 = uVar10 + 0x20;
        uVar7 = uVar7 - 1;
      } while (uVar7 != 0);
    }
    *puVar6 = 0x5000000;
    puVar6 = puVar6 + 1;
    IOAccelCommandBufferPool2::setBufferPtr(puVar19);
    plVar5 = local_98;
    (**(code **)(*local_98 + 0x148))(local_98);
    IntelAccelerator::updateAccessEvents(*(IntelAccelerator **)(local_70 + 0x10),local_48,plVar5);
    IOAccelCommandBufferPool2::submitBuffer();
    uVar10 = local_60;
  } while (local_60 < *puVar18);
  lVar4 = local_50[0x17];
  uVar10 = IGAccelTask::getScratchGPUVirtualAddress(local_70);
  blt2d_recompress(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2_00,param_3_00,param_4_00,
                   param_5,param_6,param_7,param_8,(uint)((char)lVar4 != '\0'),local_88,uVar10,
                   local_90,(char *)param_13,(char *)puVar6);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// blt2d_fast_copy(IGHardwareBlit2DContext*, blit3d_params_t*, IGVector<rect_pair_t,
// IGIOMallocAllocatorPolicy> const&, _WA_TABLE*)

void __cdecl
blt2d_fast_copy(undefined8 param_1,ulong param_2_00,ulong param_3_00,ulong param_4_00,ulong param_5,
               ulong param_6,undefined8 param_7,undefined8 param_8,long param_9,long *param_10,
               ulong *param_11,long param_12)

{
  float fVar1;
  byte bVar2;
  byte bVar3;
  long *plVar4;
  IGAccelTask *this;
  IGHardwareRingBuffer *pIVar5;
  uint *puVar6;
  ulong uVar7;
  uint uVar8;
  uint uVar9;
  long lVar10;
  ulong *puVar11;
  ulong uVar12;
  ulong uVar13;
  byte bVar14;
  char *pcVar15;
  ulong uVar16;
  char *pcVar17;
  char *pcVar18;
  uint uVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  ulong uVar23;
  char cVar24;
  ulong uVar25;
  ulong uVar26;
  ulong uVar27;
  float fVar28;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  
  plVar4 = *(long **)(param_9 + 0xb0);
  bVar2 = *(byte *)((long)param_10 + 0xc);
  if ((((bVar2 == 7) || (bVar2 == 0xb)) ||
      (bVar14 = *(byte *)((long)param_10 + 0x54), bVar14 == 0xb)) || (bVar14 == 7)) {
    cVar24 = (char)param_10[0x14];
    bVar14 = *(byte *)((long)param_10 + 0x54);
    bVar3 = 1;
  }
  else {
    bVar3 = *(byte *)(param_10 + 0x14);
    if ((bVar3 & 3) == 0) {
      bVar3 = bVar3 >> 2;
      cVar24 = '\x04';
    }
    else {
      cVar24 = '\x02' - (bVar3 & 1);
      bVar3 = bVar3 >> (bVar3 & 1 ^ 1);
    }
  }
  this = *(IGAccelTask **)(param_9 + 0x58);
  uVar21 = 0x202020202010200U >> (bVar14 * '\b' & 0x3f) & 0xffffffff;
  if (7 < bVar14) {
    uVar21 = 2;
  }
  pIVar5 = (IGHardwareRingBuffer *)plVar4[0x26];
  uVar20 = 0x202020202010200U >> ((bVar2 & 7) << 3) & 0xffffffff;
  if (7 < bVar2) {
    uVar20 = 2;
  }
  puVar6 = *(uint **)(param_9 + 0xd8);
  uVar8 = *(uint *)(param_10 + 10) >> 2;
  if (bVar14 == 0) {
    uVar8 = *(uint *)(param_10 + 10);
  }
  uVar19 = *(uint *)(param_10 + 1);
  pcVar17 = (char *)(ulong)uVar19;
  uVar9 = uVar19 >> 2;
  if (bVar2 == 0) {
    uVar9 = uVar19;
  }
  uVar27 = (ulong)(uVar9 & 0xffff) << 0x20;
  pcVar15 = (char *)0x0;
  uVar25 = 0;
  fVar28 = (float)bVar3;
  uVar23 = 0;
  do {
    puVar11 = (ulong *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)puVar6);
    uVar13 = (ulong)((puVar6[0x614] - puVar6[0x616]) - 8) / 0x28;
    uVar12 = *param_11 - uVar23;
    if (uVar13 <= *param_11 - uVar23) {
      uVar12 = uVar13;
    }
    uVar13 = uVar12 + uVar23;
    if (uVar23 < uVar13) {
      uVar23 = uVar23 << 5 | 0x1c;
      param_6 = (ulong)(uint)fVar28;
      param_7 = 0;
      do {
        uVar7 = param_11[2];
        fVar32 = *(float *)((uVar7 - 4) + uVar23);
        if ((fVar32 != 0.0) || (NAN(fVar32))) {
          fVar29 = *(float *)(uVar7 + uVar23);
          param_2_00 = (ulong)(uint)fVar29;
          if ((fVar29 != 0.0) || (NAN(fVar29))) {
            pcVar17 = (char *)((ulong)*(uint *)((long)param_10 + 0x74) + param_10[9]);
            fVar30 = *(float *)((uVar7 - 8) + uVar23);
            fVar1 = *(float *)((uVar7 - 0x18) + uVar23);
            fVar33 = *(float *)((uVar7 - 0xc) + uVar23);
            fVar31 = fVar32 + fVar33;
            uVar22 = (ulong)((uint)(long)(fVar33 * fVar28) & 0xffff | (uint)(long)fVar30 << 0x10);
            fVar32 = fVar29 + fVar30;
            uVar26 = (ulong)((uint)(long)fVar1 & 0xffff) << 0x10;
            fVar33 = *(float *)((uVar7 - 0x1c) + uVar23) * fVar28;
            param_5 = (ulong)(uint)fVar33;
            uVar16 = ((long)(fVar31 * fVar28) & 0xffffU) << 0x20;
            pcVar15 = (char *)(uVar16 | uVar22 | (long)fVar32 << 0x30);
            pcVar18 = pcVar17;
            if (0x7ffe < (int)fVar32) {
              pcVar18 = pcVar17 + ((int)fVar30 & 0xfffff000U) * (int)param_10[10];
              uVar19 = (uint)(long)fVar30 & 0xfff;
              pcVar17 = (char *)((ulong)uVar19 << 0x10 | uVar16 | uVar22 & 0xffff0000ffff);
              fVar30 = (float)uVar19;
              pcVar15 = (char *)((long)(fVar29 + fVar30) << 0x30 | (ulong)pcVar17);
            }
            param_3_00 = (ulong)(uint)fVar30;
            uVar25 = ((ulong)*(uint *)((long)param_10 + 0x2c) + *param_10 & 0xffffffffffff) +
                     (uVar25 & 0xffff000000000000);
            fVar29 = *(float *)((uVar7 - 0x10) + uVar23) + fVar1;
            param_2_00 = (ulong)(uint)fVar29;
            if (0x7ffe < (int)fVar29) {
              uVar26 = uVar26 & 0xffffffff0fffffff;
              uVar25 = uVar25 & 0xffff000000000000 |
                       ((int)fVar1 & 0xfffff000U) * (int)param_10[1] + uVar25 & 0xffffffffffff;
            }
            uVar27 = uVar26 | uVar27 & 0xffffffff00000000 | (ulong)((uint)(long)fVar33 & 0xffff);
            *puVar11 = (ulong)(bVar2 == 7) << 0x3f |
                       (ulong)(bVar14 == 7) << 0x3e |
                       (uVar20 & 0xff) << 0x14 | (uVar21 & 0xff) << 0xd | 0x50800008 |
                       (ulong)(cVar24 - 1U & 7) << 0x38 | (ulong)(uVar8 & 0xffff) << 0x20;
            puVar11[1] = (ulong)pcVar15;
            puVar11[2] = (ulong)pcVar18 & 0xffffffffffff;
            puVar11[3] = uVar27;
            puVar11[4] = uVar25;
            puVar11 = puVar11 + 5;
          }
        }
        param_4_00 = (ulong)(uint)fVar32;
        uVar23 = uVar23 + 0x20;
        uVar12 = uVar12 - 1;
      } while (uVar12 != 0);
    }
    *puVar11 = 0x5000000;
    IOAccelCommandBufferPool2::setBufferPtr(puVar6);
    (**(code **)(*plVar4 + 0x148))(plVar4);
    IntelAccelerator::updateAccessEvents(*(IntelAccelerator **)(this + 0x10),param_10 + 0x1b,plVar4)
    ;
    IOAccelCommandBufferPool2::submitBuffer();
    uVar23 = uVar13;
  } while (uVar13 < *param_11);
  lVar10 = param_10[0x17];
  uVar21 = IGAccelTask::getScratchGPUVirtualAddress(this);
  blt2d_recompress(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2_00,param_3_00,param_4_00,
                   param_5,param_6,param_7,param_8,(uint)((char)lVar10 != '\0'),pIVar5,uVar21,
                   param_12,pcVar15,pcVar17);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// blt2d_color_fill(IGHardwareBlit2DContext*, blit3d_params_t*, IGVector<_blit_rect,
// IGIOMallocAllocatorPolicy> const&, _WA_TABLE*)

void __cdecl
blt2d_color_fill(undefined8 param_1_00,ulong param_2_00,ulong param_3_00,ulong param_4_00,
                undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
                long param_9,long param_10,ulong *param_11,long param_12,char *param_13,
                char *param_14)

{
  float fVar1;
  float fVar2;
  float fVar3;
  char cVar4;
  IGHardwareRingBuffer *this;
  uint *puVar5;
  uint uVar6;
  long *plVar7;
  ulong *puVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  bool bVar12;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar13;
  undefined8 local_88;
  int local_80;
  ulong local_78;
  long *local_70;
  long *local_68;
  char *local_60;
  char *local_58;
  long local_50;
  IGHardwareRingBuffer *local_48;
  long local_40;
  IGAccelTask *local_38;
  
  local_38 = *(IGAccelTask **)(param_9 + 0x58);
  local_70 = *(long **)(param_9 + 0xb0);
  this = (IGHardwareRingBuffer *)local_70[0x26];
  puVar5 = *(uint **)(param_9 + 0xd8);
  local_50 = param_12;
  IGHardwareRingBuffer::waitForSpace
            (param_1_00,param_2_00,param_3_00,param_4_00,param_5,param_6,param_7,param_8,this,3,
             param_11,param_12,param_13,param_14);
  local_88 = 0x2220011000001;
  bVar12 = *(char *)(param_10 + 0x54) == '\x03';
  local_80 = bVar12 + 0x30000 + (uint)bVar12;
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_88,3);
  local_48 = this;
  (**(code **)(*(long *)this + 0x138))(this);
  local_60 = (char *)(ulong)*(uint *)(param_10 + 0xa8);
  cVar4 = *(char *)(param_10 + 0xa0);
  local_58 = (char *)((ulong)*(uint *)(param_10 + 0x74) + *(long *)(param_10 + 0x48) &
                     0xffffffffffff);
  bVar12 = *(char *)(param_10 + 0x54) != '\0';
  uVar6 = *(uint *)(param_10 + 0x50) >> 2;
  if (!bVar12) {
    uVar6 = *(uint *)(param_10 + 0x50);
  }
  local_68 = (long *)(param_10 + 0xd8);
  uVar11 = 0;
  local_40 = param_10;
  do {
    puVar8 = (ulong *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)puVar5);
    uVar10 = (ulong)((puVar5[0x614] - puVar5[0x616]) - 8 >> 2) / 7;
    uVar9 = *param_11 - uVar11;
    if (uVar10 <= *param_11 - uVar11) {
      uVar9 = uVar10;
    }
    local_78 = uVar9 + uVar11;
    if (uVar11 < local_78) {
      uVar11 = uVar11 << 4 | 0xc;
      param_5 = 0;
      do {
        uVar10 = param_11[2];
        fVar13 = *(float *)((uVar10 - 4) + uVar11);
        if ((fVar13 != 0.0) || (NAN(fVar13))) {
          fVar1 = *(float *)(uVar10 + uVar11);
          if ((fVar1 != 0.0) || (NAN(fVar1))) {
            fVar2 = *(float *)((uVar10 - 0xc) + uVar11);
            param_3_00 = (ulong)(uint)fVar2;
            fVar3 = *(float *)((uVar10 - 8) + uVar11);
            param_4_00 = (ulong)(uint)fVar3;
            fVar13 = fVar13 + fVar2;
            *puVar8 = ((ulong)uVar6 & 0xffff) << 0x20 |
                      (ulong)bVar12 << 0xb | (ulong)(cVar4 - 1U & 3) << 0x38 | 0xf0000054300005;
            puVar8[2] = (ulong)local_58;
            *(int *)(puVar8 + 3) = (int)local_60;
            puVar8[1] = ((long)fVar13 & 0xffffU) << 0x20 |
                        (ulong)(uint)((int)(long)fVar3 << 0x10) | (long)fVar2 & 0xffffU |
                        (long)(fVar1 + fVar3) << 0x30;
            puVar8 = (ulong *)((long)puVar8 + 0x1c);
          }
        }
        param_2_00 = (ulong)(uint)fVar13;
        uVar11 = uVar11 + 0x10;
        uVar9 = uVar9 - 1;
        param_13 = local_60;
        param_14 = local_58;
      } while (uVar9 != 0);
    }
    *puVar8 = 0x5000000;
    IOAccelCommandBufferPool2::setBufferPtr(puVar5);
    plVar7 = local_70;
    (**(code **)(*local_70 + 0x148))(local_70);
    IntelAccelerator::updateAccessEvents(*(IntelAccelerator **)(local_38 + 0x10),local_68,plVar7);
    IOAccelCommandBufferPool2::submitBuffer();
    uVar11 = local_78;
  } while (local_78 < *param_11);
  cVar4 = *(char *)(local_40 + 0xb8);
  uVar11 = IGAccelTask::getScratchGPUVirtualAddress(local_38);
  blt2d_recompress(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2_00,param_3_00,param_4_00,
                   param_5,param_6,param_7,param_8,(uint)(cVar4 != '\0'),local_48,uVar11,local_50,
                   param_13,param_14);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// blt2d_recompress(bool, IGHardwareRingBuffer*, unsigned long long, _WA_TABLE*)

void __cdecl
blt2d_recompress(undefined8 param_1,undefined8 param_2_00,undefined8 param_3_00,
                undefined8 param_4_00,undefined8 param_5,undefined8 param_6,undefined8 param_7,
                undefined8 param_8,int param_9,IGHardwareRingBuffer *param_10,ulong param_11,
                long param_12,char *param_13,char *param_14)

{
  int iVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_40;
  ulong local_38;
  undefined8 local_30;
  int local_28;
  
  if (param_9 != 0) {
    lVar2 = param_12;
    iVar1 = (**(code **)(*(long *)param_10 + 0x128))(param_10);
    IGHardwareRingBuffer::waitForSpace
              (extraout_XMM0_Qa,param_2_00,param_3_00,param_4_00,param_5,param_6,param_7,param_8,
               param_10,iVar1 + 7,extraout_RDX,lVar2,param_13,param_14);
    (**(code **)(*(long *)param_10 + 0x130))(param_10);
    local_30 = 0x5038011000001;
    local_28 = (*(ushort *)(param_12 + 0xd8) >> 10 & 2) + 2;
    IGHardwareRingBuffer::writeBuffer(param_10,(long)&local_30,3);
    local_38 = param_11 & 0xfffffffffffc;
    local_40 = 0x5038012400002;
    IGHardwareRingBuffer::writeBuffer(param_10,(long)&local_40,4);
    (**(code **)(*(long *)param_10 + 0x138))(param_10);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_supported(blit3d_params_t const*, IGVector<rect_pair_t, IGIOMallocAllocatorPolicy> const&)

undefined8 __cdecl blit3d_supported(long *param_1,long *param_2)

{
  uint uVar1;
  ushort uVar2;
  long lVar3;
  ulong uVar4;
  undefined8 uVar5;
  float *pfVar6;
  
  if (((ulong)*(uint *)((long)param_1 + 0x74) + param_1[9] ==
       (ulong)*(uint *)((long)param_1 + 0x2c) + *param_1) && (lVar3 = *param_2, lVar3 != 0)) {
    pfVar6 = (float *)(param_2[2] + 0x1c);
    do {
      if ((pfVar6[-7] < pfVar6[-1] + pfVar6[-3]) && (pfVar6[-3] < pfVar6[-7] + pfVar6[-5])) {
        if ((pfVar6[-6] < *pfVar6 + pfVar6[-2]) && (pfVar6[-2] < pfVar6[-6] + pfVar6[-4])) {
          if (((((*(byte *)((long)param_1 + 0x3d) & 1) == 0) &&
               ((*(byte *)((long)param_1 + 0x85) & 1) == 0)) && (param_1[4] == 0)) &&
             (param_1[0xd] == 0)) goto LAB_0002fcc3;
          break;
        }
      }
      pfVar6 = pfVar6 + 8;
      lVar3 = lVar3 + -1;
    } while (lVar3 != 0);
  }
  uVar2 = *(ushort *)((long)param_1 + 0x56);
  uVar4 = blit3d_supported_format((uint)uVar2);
  if ((((char)uVar4 == '\0') &&
      ((uVar1 = uVar2 - 0x111, uVar4 = (ulong)uVar1, 2 < (ushort)uVar1 ||
       (uVar2 != *(ushort *)((long)param_1 + 0xe))))) &&
     (uVar4 = blit3d_redescribed_format_supported((long)param_1), (char)uVar4 == '\0')) {
LAB_0002fcc3:
    uVar5 = 0;
  }
  else {
    uVar5 = CONCAT71((int7)(uVar4 >> 8),1);
  }
  return uVar5;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_supported_format(unsigned int)

undefined8 __cdecl blit3d_supported_format(uint param_1)

{
  undefined8 in_RAX;
  
  if ((param_1 >> 9 & 1) == 0) {
    if ((int)param_1 < 0x140) {
      switch(param_1) {
      case 0xc0:
      case 0xc1:
      case 0xc2:
      case 0xc3:
      case 0xc4:
      case 199:
      case 200:
      case 0xc9:
      case 0xca:
      case 0xcb:
      case 0xcc:
      case 0xcd:
      case 0xce:
      case 0xcf:
      case 0xd0:
      case 0xd1:
      case 0xd2:
      case 0xd3:
      case 0xd6:
      case 0xd7:
      case 0xd8:
      case 0xd9:
      case 0xdb:
      case 0xe9:
      case 0xea:
      case 0xeb:
      case 0xec:
      case 0x100:
      case 0x102:
      case 0x104:
      case 0x105:
      case 0x106:
      case 0x107:
      case 0x108:
      case 0x109:
      case 0x10a:
      case 0x10b:
      case 0x10c:
      case 0x10d:
      case 0x10e:
        break;
      case 0xc5:
      case 0xc6:
      case 0xd4:
      case 0xd5:
      case 0xda:
      case 0xdc:
      case 0xdd:
      case 0xde:
      case 0xdf:
      case 0xe0:
      case 0xe1:
      case 0xe2:
      case 0xe3:
      case 0xe4:
      case 0xe5:
      case 0xe6:
      case 0xe7:
      case 0xe8:
      case 0xed:
      case 0xee:
      case 0xef:
      case 0xf0:
      case 0xf1:
      case 0xf2:
      case 0xf3:
      case 0xf4:
      case 0xf5:
      case 0xf6:
      case 0xf7:
      case 0xf8:
      case 0xf9:
      case 0xfa:
      case 0xfb:
      case 0xfc:
      case 0xfd:
      case 0xfe:
      case 0xff:
      case 0x101:
      case 0x103:
        return 0;
      default:
        if ((0xf < param_1 - 0x80) || ((0xc1ffU >> (param_1 - 0x80 & 0x1f) & 1) == 0)) {
          if (6 < param_1) {
            return 0;
          }
          if ((0x47U >> (param_1 & 0x1f) & 1) == 0) {
            return 0;
          }
        }
      }
    }
    else if (((0x1e < param_1 - 0x186) || ((0x781808ffU >> (param_1 - 0x186 & 0x1f) & 1) == 0)) &&
            (4 < param_1 - 0x140)) {
      return 0;
    }
  }
  return CONCAT71((int7)((ulong)in_RAX >> 8),1);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_redescribed_format_supported(blit3d_params_t const*)

undefined8 __cdecl blit3d_redescribed_format_supported(long param_1)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint uVar5;
  ulong uVar4;
  
  if (*(short *)(param_1 + 0xe) == *(short *)(param_1 + 0x56)) {
    bVar1 = *(byte *)(param_1 + 0xa0);
    uVar4 = (ulong)bVar1;
    if (((bVar1 < 0x11) && (uVar4 = 1, (0x10116U >> (bVar1 & 0x1f) & 1) == 0)) &&
       (uVar4 = (ulong)bVar1, bVar1 == 0)) {
      return 0;
    }
    uVar2 = *(uint *)(param_1 + 0x14);
    if (uVar2 * (int)uVar4 < 0x4001) {
      uVar5 = *(uint *)(param_1 + 0x5c);
      uVar3 = (int)uVar4 * uVar5;
      uVar4 = (ulong)uVar3;
      if ((uVar3 < 0x4001) || (0x4000 < uVar2)) goto LAB_0002fedf;
    }
    else {
      if (0x4000 < uVar2) goto LAB_0002fedf;
      uVar5 = *(uint *)(param_1 + 0x5c);
    }
    if (0x4000 < uVar5) {
LAB_0002fedf:
      return CONCAT71((int7)(uVar4 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_initialize_scratch_space(IGAccelSysMemory*)

void __cdecl blit3d_initialize_scratch_space(task *param_1)

{
  void *pvVar1;
  
  pvVar1 = (void *)IOAccelSysMemory::lockForCPUAccess
                             (param_1,(uint)*(undefined8 *)__got::_kernel_task);
  _memcpy(pvVar1,&IGBlit3DKernel_clamp_simd16,0x100);
  _memcpy((void *)((long)pvVar1 + 0x100),&IGBlit3DKernel_clamp_simd32,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0x2c0),&IGBlit3DKernel_RGB_to_YUV_simd16,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0x480),&IGBlit3DKernel_YUV_to_RGB_simd16,0x180);
  _memcpy((void *)((long)pvVar1 + 0x600),&IGBlit3DKernel_default_simd16,0xc0);
  _memcpy((void *)((long)pvVar1 + 0x6c0),&IGBlit3DKernel_default_simd32,0x180);
  _memcpy((void *)((long)pvVar1 + 0x840),&IGBlit3DKernel_set_alpha_clamp_simd16,0x100);
  _memcpy((void *)((long)pvVar1 + 0x940),&IGBlit3DKernel_set_alpha_clamp_simd32,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0xb00),&IGBlit3DKernel_set_alpha_simd16,0x100);
  _memcpy((void *)((long)pvVar1 + 0xc00),&IGBlit3DKernel_set_alpha_simd32,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0xdc0),&IGBlit3DKernel_set_alpha_integer_simd16,0x100);
  _memcpy((void *)((long)pvVar1 + 0xec0),&IGBlit3DKernel_set_alpha_integer_simd32,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0x1080),&IGBlit3DKernel_D32fS8_to_D24S8_simd16,0x140);
  _memcpy((void *)((long)pvVar1 + 0x11c0),&IGBlit3DKernel_MSAA_to_MSAA_simd8,0x100);
  _memcpy((void *)((long)pvVar1 + 0x12c0),&IGBlit3DKernel_MSAA_to_NonMSAAx1_simd16,0x100);
  _memcpy((void *)((long)pvVar1 + 0x13c0),&IGBlit3DKernel_MSAA_to_NonMSAAx2_simd16,0x1c0);
  _memcpy((void *)((long)pvVar1 + 0x1580),&IGBlit3DKernel_MSAA_to_NonMSAAx4_simd16,0x280);
  _memcpy((void *)((long)pvVar1 + 0x1800),&IGBlit3DKernel_MSAA_to_NonMSAAx8_simd16,0x400);
  _memcpy((void *)((long)pvVar1 + 0x1c00),&IGBlit3DKernel_MSAA_to_NonMSAAx16_simd16,0x740);
  _memcpy((void *)((long)pvVar1 + 0x2340),&IGBlit3DKernel_MSAA_to_NonMSAAx2_min_simd16,0x180);
  _memcpy((void *)((long)pvVar1 + 0x24c0),&IGBlit3DKernel_MSAA_to_NonMSAAx4_min_simd16,0x240);
  _memcpy((void *)((long)pvVar1 + 0x2700),&IGBlit3DKernel_MSAA_to_NonMSAAx8_min_simd16,0x380);
  _memcpy((void *)((long)pvVar1 + 0x2a80),&IGBlit3DKernel_MSAA_to_NonMSAAx16_min_simd16,0x640);
  _memcpy((void *)((long)pvVar1 + 0x30c0),&IGBlit3DKernel_MSAA_to_NonMSAAx2_max_simd16,0x180);
  _memcpy((void *)((long)pvVar1 + 0x3240),&IGBlit3DKernel_MSAA_to_NonMSAAx4_max_simd16,0x240);
  _memcpy((void *)((long)pvVar1 + 0x3480),&IGBlit3DKernel_MSAA_to_NonMSAAx8_max_simd16,0x380);
  _memcpy((void *)((long)pvVar1 + 0x3800),&IGBlit3DKernel_MSAA_to_NonMSAAx16_max_simd16,0x640);
  _memcpy((void *)((long)pvVar1 + 0x3e40),&IGBlit3DKernel_MSAA_to_NonMSAAx2_stencil_min_simd16,0x200
         );
  _memcpy((void *)((long)pvVar1 + 0x4040),&IGBlit3DKernel_MSAA_to_NonMSAAx4_stencil_min_simd16,0x2c0
         );
  _memcpy((void *)((long)pvVar1 + 0x4300),&IGBlit3DKernel_MSAA_to_NonMSAAx8_stencil_min_simd16,0x480
         );
  _memcpy((void *)((long)pvVar1 + 0x4780),&IGBlit3DKernel_MSAA_to_NonMSAAx16_stencil_min_simd16,
          0x7c0);
  _memcpy((void *)((long)pvVar1 + 0x4f40),&IGBlit3DKernel_MSAA_to_NonMSAAx2_stencil_max_simd16,0x200
         );
  _memcpy((void *)((long)pvVar1 + 0x5140),&IGBlit3DKernel_MSAA_to_NonMSAAx4_stencil_max_simd16,0x2c0
         );
  _memcpy((void *)((long)pvVar1 + 0x5400),&IGBlit3DKernel_MSAA_to_NonMSAAx8_stencil_max_simd16,0x480
         );
  _memcpy((void *)((long)pvVar1 + 0x5880),&IGBlit3DKernel_MSAA_to_NonMSAAx16_stencil_max_simd16,
          0x7c0);
  _memcpy((void *)((long)pvVar1 + 0x6040),&DefaultBlendState,0x44);
  _memcpy((void *)((long)pvVar1 + 0x60c0),&DepthD32FS8BlendState,0x44);
  _memcpy((void *)((long)pvVar1 + 0x6140),&DepthD24S8BlendState,0x44);
  _memcpy((void *)((long)pvVar1 + 0x61c0),&StencilD32FS8BlendState,0x44);
  _memcpy((void *)((long)pvVar1 + 0x6240),&StencilD24S8BlendState,0x44);
  *(undefined8 *)((long)pvVar1 + 0x62c0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x62c8) = 0;
  *(undefined8 *)((long)pvVar1 + 0x62d0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63e0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x6380) = 0;
  *(undefined8 *)((long)pvVar1 + 0x6388) = 0;
  *(undefined8 *)((long)pvVar1 + 0x6390) = 0;
  *(undefined8 *)((long)pvVar1 + 0x6398) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63a0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63a8) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63b0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63b8) = 0;
  *(undefined8 *)((long)pvVar1 + 0x63c0) = 0;
  *(undefined8 *)((long)pvVar1 + 0x6400) = 0x200024000;
  *(undefined8 *)((long)pvVar1 + 0x6408) = 0x7e09200000000;
  *(undefined8 *)((long)pvVar1 + 0x6420) = 0x200000000;
  *(undefined8 *)((long)pvVar1 + 0x6428) = 0x9200000000;
  *(undefined8 *)((long)pvVar1 + 0x6448) = 0x9200000000;
  *(undefined8 *)((long)pvVar1 + 0x6440) = 0x200048001;
  IOAccelSysMemory::unlockForCPUAccess(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_init_ctx(IGHardwareBlit3DContext*)

void __cdecl blit3d_init_ctx(long param_1)

{
  uint uVar1;
  IGMappedBuffer *this;
  long lVar2;
  undefined8 *puVar3;
  ulong uVar4;
  long lVar5;
  long lVar6;
  
  lVar6 = 0;
  *(undefined8 *)(param_1 + 0xe0) = 0;
  *(undefined8 *)(param_1 + 0xe8) = 0;
  *(undefined8 *)(param_1 + 0x100) = 0;
  *(undefined4 *)(param_1 + 0x108) = 1;
  *(undefined4 *)(param_1 + 0x110) = 0;
  lVar5 = *(long *)(param_1 + 0xd8);
  this = *(IGMappedBuffer **)(param_1 + 0xd0);
  lVar2 = *(long *)(*(long *)(param_1 + 0x58) + 0x10);
  (**(code **)(**(long **)(lVar5 + 0x20) + 0x148))();
  puVar3 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)lVar5);
  *(long *)(lVar5 + 0x1858) = (long)puVar3 + 0xa0c;
  uVar4 = IGMappedBuffer::getGPUVirtualAddress(this);
  puVar3[1] = 0;
  puVar3[2] = 0;
  *puVar3 = 0x7a000004;
  *(undefined4 *)(puVar3 + 3) = 0x69041310;
  uVar1 = *(uint *)(lVar2 + 0xf6a);
  *(undefined8 *)((long)puVar3 + 0x1c) = 0x703411000001;
  *(uint *)((long)puVar3 + 0x24) = (uVar1 & 0x40) * 8 + -0x5ffffbe0;
  puVar3[5] = 0x801008078300000;
  puVar3[6] = 0x800000078310000;
  puVar3[7] = 0x800000078320000;
  puVar3[8] = 0x800000078330000;
  _memcpy(puVar3 + 9,&DAT_00112ae0,0x58);
  puVar3[0x10] = puVar3[0x10] & 0xffeffffffff | 0x700100000000;
  puVar3[0xf] = puVar3[0xf] & 0xffe00000ffe | 0x700100007001;
  puVar3[0xe] = (puVar3[0xe] & 0x81e) + (uVar4 & 0xfffffffffffff000) + 0x461;
  puVar3[0xc] = (puVar3[0xc] & 0x81e) + (uVar4 & 0xfffffffffffff000) + 0x701;
  puVar3[10] = (ulong)*(uint *)((long)puVar3 + 0x54) << 0x20 | uVar4 >> 0x20;
  puVar3[9] = puVar3[9] & 0x81effffffff | (uVar4 >> 0xc) << 0x2c | 0x70100000000;
  *(undefined4 *)(puVar3 + 0x15) = 0;
  puVar3[0x14] = 0x61020001;
  *(undefined8 *)((long)puVar3 + 0xac) = 0x79000002;
  *(undefined8 *)((long)puVar3 + 0xb4) = 0x3fff3fff;
  *(undefined8 *)((long)puVar3 + 0xbc) = 0xe004000078050006;
  *(undefined8 *)((long)puVar3 + 0xc4) = 0;
  *(undefined8 *)((long)puVar3 + 0xcc) = 0;
  *(undefined8 *)((long)puVar3 + 0xd4) = 0;
  lVar5 = 0x79040002;
  do {
    *(undefined8 *)((long)puVar3 + lVar6 + 0xe4) = 0;
    *(long *)((long)puVar3 + lVar6 + 0xdc) = lVar5;
    lVar6 = lVar6 + 0x10;
    lVar5 = lVar5 + 0x4000000000000000;
  } while (lVar6 != 0x40);
  lVar5 = 0;
  *(undefined4 *)((long)puVar3 + 0x124) = 0;
  *(undefined8 *)((long)puVar3 + 0x11c) = 0xffff79080001;
  *(undefined4 *)(puVar3 + 0x26) = 0;
  puVar3[0x25] = 0x790a0001;
  *(undefined4 *)((long)puVar3 + 0x144) = 0;
  *(undefined8 *)((long)puVar3 + 0x13c) = 0;
  *(undefined8 *)((long)puVar3 + 0x134) = 0x78060003;
  *(undefined4 *)(puVar3 + 0x2b) = 0;
  puVar3[0x2a] = 0;
  puVar3[0x29] = 0x78070003;
  *(undefined4 *)((long)puVar3 + 0x164) = 0;
  *(undefined8 *)((long)puVar3 + 0x15c) = 0x78040001;
  puVar3[0x2d] = 0x79110000;
  puVar3[0x2e] = 0x780d0000;
  puVar3[0x2f] = 0xff78180000;
  puVar3[0x30] = 0xc75a7599791c0007;
  puVar3[0x31] = 0x2c42816eb3dbad36;
  puVar3[0x32] = 0xf1bf173d10eff408;
  puVar3[0x33] = 0xae2ae66253d97b95;
  *(undefined4 *)(puVar3 + 0x34) = 0x88cc44;
  *(undefined8 *)((long)puVar3 + 0x1a4) = 0x79060000;
  _memcpy((void *)((long)puVar3 + 0x1ac),&g_cInitGfx3dStatePolyStipplePattern,0x84);
  puVar3[0x47] = 0;
  *(undefined4 *)(puVar3 + 0x48) = 0;
  puVar3[0x46] = 0x780a0003;
  _memcpy((void *)((long)puVar3 + 0x244),&g_cInitGfx3dStateVertexBuffers,0x214);
  _memcpy(puVar3 + 0x8b,&g_cInitGfx3dStateVertexElements,0x114);
  *(undefined8 *)((long)puVar3 + 0x45c) = 0x2222000002000000;
  *(undefined8 *)((long)puVar3 + 0x464) = 0x1123000002850000;
  *(undefined8 *)((long)puVar3 + 0x46c) = 0x1111000002000008;
  *(undefined8 *)((long)puVar3 + 0x474) = 0x1123000002850018;
  do {
    *(undefined8 *)((long)puVar3 + lVar5 * 8 + 0x47c) = 0;
    lVar5 = lVar5 + 1;
  } while (lVar5 != 0x1e);
  *(undefined8 *)((long)puVar3 + 0x56c) = 0x780c0800;
  *(undefined8 *)((long)puVar3 + 0x574) = 0xf784b0000;
  *(undefined8 *)((long)puVar3 + 0x57c) = 0xffffffff78550003;
  *(undefined8 *)((long)puVar3 + 0x584) = 0xffffffffffffffff;
  *(undefined4 *)((long)puVar3 + 0x58c) = 0xffffffff;
  puVar3[0xb2] = 0x78260000;
  puVar3[0xb3] = 0x78270000;
  puVar3[0xb4] = 0x78280000;
  puVar3[0xb5] = 0x78290000;
  puVar3[0xb6] = 0x782a0000;
  puVar3[0xb7] = 0x62c1780e0000;
  puVar3[0xb8] = 0x604178240000;
  puVar3[0xb9] = 0x782b0000;
  puVar3[0xba] = 0x782c0000;
  puVar3[0xbb] = 0x782d0000;
  puVar3[0xbc] = 0x782e0000;
  puVar3[0xbd] = 0x6400782f0000;
  puVar3[0xbe] = 0x63e0780f0000;
  puVar3[0xbf] = 0x638078210000;
  puVar3[0xc0] = 0x63c078230000;
  puVar3[0xc1] = 0xa8478140000;
  puVar3[0xc3] = 0;
  *(undefined4 *)(puVar3 + 0xc4) = 1;
  puVar3[0xc2] = 0x78520003;
  *(undefined8 *)((long)puVar3 + 0x624) = 0x784c0000;
  *(undefined8 *)((long)puVar3 + 0x634) = 0x200480800020000;
  *(undefined8 *)((long)puVar3 + 0x62c) = 0x78130002;
  *(undefined8 *)((long)puVar3 + 0x654) = 0x1000078510009;
  *(undefined8 *)((long)puVar3 + 0x65c) = 0x5000400030002;
  *(undefined8 *)((long)puVar3 + 0x664) = 0x9000800070006;
  *(undefined8 *)((long)puVar3 + 0x66c) = 0xd000c000b000a;
  *(undefined4 *)((long)puVar3 + 0x67c) = 0;
  *(undefined **)((long)puVar3 + 0x674) = &DAT_000f000e;
  puVar3[0xd0] = 0x21000078500003;
  puVar3[0xd1] = 0;
  *(undefined4 *)(puVar3 + 0xd2) = 0;
  *(undefined8 *)((long)puVar3 + 0x644) = 0;
  *(undefined8 *)((long)puVar3 + 0x64c) = 0xffffffffffffffff;
  *(undefined8 *)((long)puVar3 + 0x63c) = 0x30400820781f0004;
  *(undefined8 *)((long)puVar3 + 0x69c) = 0;
  *(undefined8 *)((long)puVar3 + 0x6a4) = 0;
  *(undefined4 *)((long)puVar3 + 0x6b4) = 0x10000;
  *(undefined8 *)((long)puVar3 + 0x694) = 0x78100007;
  *(undefined8 *)((long)puVar3 + 0x6ac) = 0x800;
  *(byte *)((long)puVar3 + 0x6a2) = *(byte *)((long)puVar3 + 0x6a2) & 0xfe;
  *(undefined8 *)((long)puVar3 + 0x6e4) = 0x42800000427c0000;
  *(undefined8 *)((long)puVar3 + 0x6dc) = 0x781c0002;
  *(undefined4 *)(puVar3 + 0xdb) = 0;
  puVar3[0xda] = 0;
  puVar3[0xd8] = 0;
  puVar3[0xd9] = 0;
  puVar3[0xd7] = 0x781b0007;
  *(undefined4 *)((long)puVar3 + 0x714) = 0;
  *(undefined8 *)((long)puVar3 + 0x70c) = 0;
  *(undefined8 *)((long)puVar3 + 0x704) = 0;
  *(undefined8 *)((long)puVar3 + 0x6fc) = 0;
  *(undefined8 *)((long)puVar3 + 0x6f4) = 0;
  *(byte *)((long)puVar3 + 0x6fa) = *(byte *)((long)puVar3 + 0x6fa) & 0xfe;
  *(undefined8 *)((long)puVar3 + 0x6ec) = 0x781d0009;
  puVar3[0xe7] = 0;
  puVar3[0xe6] = 0x800020000;
  puVar3[0xe5] = 0;
  puVar3[0xe4] = 0;
  puVar3[0xe3] = 0x78110008;
  puVar3[0xe4] = puVar3[0xe4] & 0xfffeffffffffffff;
  puVar3[0xe6] = puVar3[0xe6] & 0xfffffffffffe07ff | 0x800;
  puVar3[0xed] = 0;
  puVar3[0xec] = 0;
  puVar3[0xea] = 0;
  puVar3[0xe9] = 0;
  puVar3[0xeb] = 0x1f800000;
  *(byte *)((long)puVar3 + 0x74e) = *(byte *)((long)puVar3 + 0x74e) & 0xfe;
  puVar3[0xe8] = 0x7820000a;
  puVar3[0xee] = 0x80000100784f0000;
  puVar3[0xef] = 0x41084200784d0000;
  puVar3[0xf1] = 0x3ffef00000001;
  puVar3[0xf0] = 0x4000078120002;
  *(undefined4 *)(puVar3 + 0xf7) = 0;
  puVar3[0xf6] = 0;
  puVar3[0xf5] = 0;
  puVar3[0xf4] = 0;
  puVar3[0xf3] = 0;
  puVar3[0xf2] = 0x78150009;
  *(undefined4 *)((long)puVar3 + 0x7e4) = 0;
  *(undefined8 *)((long)puVar3 + 0x7dc) = 0;
  *(undefined8 *)((long)puVar3 + 0x7d4) = 0;
  *(undefined8 *)((long)puVar3 + 0x7cc) = 0;
  *(undefined8 *)((long)puVar3 + 0x7c4) = 0;
  *(undefined8 *)((long)puVar3 + 0x7bc) = 0x78190009;
  *(undefined4 *)(puVar3 + 0x102) = 0;
  puVar3[0x101] = 0;
  puVar3[0x100] = 0;
  puVar3[0xff] = 0;
  puVar3[0xfe] = 0;
  puVar3[0xfd] = 0x781a0009;
  *(undefined4 *)((long)puVar3 + 0x83c) = 0;
  *(undefined8 *)((long)puVar3 + 0x834) = 0;
  *(undefined8 *)((long)puVar3 + 0x82c) = 0;
  *(undefined8 *)((long)puVar3 + 0x824) = 0;
  *(undefined8 *)((long)puVar3 + 0x81c) = 0;
  *(undefined8 *)((long)puVar3 + 0x814) = 0x78160009;
  *(undefined4 *)(puVar3 + 0x10d) = 0;
  puVar3[0x10c] = 0;
  puVar3[0x10b] = 0;
  puVar3[0x10a] = 0;
  puVar3[0x109] = 0;
  puVar3[0x108] = 0x78170009;
  _memcpy((void *)((long)puVar3 + 0x874),&g_cInitGfx3dStateVfInstancings,0x198);
  IOAccelCommandBufferPool2::submitBuffer();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_submit_commands(IGHardwareBlit3DContext*, blit3d_params_t*, IGVector<rect_pair_t,
// IGIOMallocAllocatorPolicy> const&)

undefined8 __cdecl blit3d_submit_commands(long param_1,long *param_2,ulong *param_3)

{
  float fVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  float fVar5;
  undefined4 uVar6;
  ushort uVar7;
  uint uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  ulong uVar14;
  ulong *puVar15;
  float fVar16;
  char cVar17;
  undefined2 uVar18;
  uint uVar19;
  undefined8 uVar20;
  ulong uVar21;
  long lVar22;
  IGVector<> *pIVar23;
  long lVar24;
  uint uVar25;
  float *pfVar26;
  long lVar27;
  long lVar28;
  uint uVar29;
  ulong uVar30;
  ulong uVar31;
  undefined1 *puVar32;
  undefined8 *puVar33;
  ulong uVar34;
  ulong uVar35;
  ulong uVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  
  uVar7 = *(ushort *)((long)param_2 + 0x56);
  uVar20 = blit3d_supported_format((uint)uVar7);
  if (((char)uVar20 != '\0') ||
     ((((ushort)(uVar7 - 0x111) < 3 && (uVar7 == *(ushort *)((long)param_2 + 0xe))) ||
      (uVar20 = blit3d_redescribed_format_supported((long)param_2), (char)uVar20 == '\0'))))
  goto switchD_00030c85_caseD_0;
  uVar25 = (uint)*(byte *)(param_2 + 0x14);
  switch(*(byte *)(param_2 + 0x14)) {
  case 0:
    goto switchD_00030c85_caseD_0;
  case 1:
    uVar18 = 0x143;
    break;
  case 2:
    uVar18 = 0x10d;
    break;
  case 3:
  case 5:
  case 6:
  case 7:
switchD_00030c85_caseD_3:
    *(undefined2 *)((long)param_2 + 0xe) = 0x143;
    *(undefined2 *)((long)param_2 + 0x56) = 0x143;
    *(uint *)((long)param_2 + 0x14) = *(int *)((long)param_2 + 0x14) * uVar25;
    *(uint *)((long)param_2 + 0x5c) = *(int *)((long)param_2 + 0x5c) * uVar25;
    uVar21 = *param_3;
    if (uVar21 != 0) {
      fVar41 = (float)uVar25;
      pfVar26 = (float *)(param_3[2] + 0x18);
      do {
        pfVar26[-6] = pfVar26[-6] * fVar41;
        pfVar26[-4] = pfVar26[-4] * fVar41;
        pfVar26[-2] = pfVar26[-2] * fVar41;
        *pfVar26 = *pfVar26 * fVar41;
        pfVar26 = pfVar26 + 8;
        uVar21 = uVar21 - 1;
      } while (uVar21 != 0);
    }
    *(undefined1 *)(param_2 + 0x14) = 1;
    goto switchD_00030c85_caseD_0;
  case 4:
    uVar18 = 0xd7;
    break;
  case 8:
    uVar18 = 0x87;
    break;
  default:
    if (uVar25 != 0x10) goto switchD_00030c85_caseD_3;
    uVar18 = 2;
  }
  *(undefined2 *)((long)param_2 + 0xe) = uVar18;
  *(undefined2 *)((long)param_2 + 0x56) = uVar18;
switchD_00030c85_caseD_0:
  uVar25 = *(uint *)(param_2 + 3);
  uVar8 = *(uint *)(param_2 + 0xc);
  if ((uVar25 < 0x4001) && (uVar8 < 0x4001)) {
    if ((*(uint *)((long)param_2 + 0x14) < 0x4001) && (*(uint *)((long)param_2 + 0x5c) < 0x4001)) {
      uVar21 = blit3d_submit_rectlist(param_1,param_2,param_3);
      goto LAB_00031a2b;
    }
    uVar25 = *(uint *)((long)param_2 + 0x14);
    uVar21 = (ulong)uVar25;
    uVar8 = *(uint *)((long)param_2 + 0x5c);
    if ((uVar25 < 0x4001) && (uVar8 < 0x4001)) goto LAB_00031a2b;
    uVar35 = (ulong)(uVar8 >> 0xe);
    uVar36 = uVar35 + 1;
    lVar22 = _IOMallocTypeVarImpl
                       (&blit3d_submit_commands(IGHardwareBlit3DContext*,blit3d_params_t*,IGVector<>const&)
                         ::kalloc_type_view_4498);
    uVar21 = 0;
    do {
      pIVar23 = (IGVector<> *)
                _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
      *(undefined8 *)pIVar23 = 0;
      *(undefined8 *)(pIVar23 + 8) = 0;
      *(undefined8 *)(pIVar23 + 0x10) = 0;
      IGVector<>::grow(pIVar23,4);
      *(IGVector<> **)(lVar22 + uVar21 * 8) = pIVar23;
      uVar21 = uVar21 + 1;
    } while (uVar36 != uVar21);
    lVar12 = param_2[9];
    uVar9 = *(undefined4 *)((long)param_2 + 0x14);
    lVar13 = *param_2;
    uVar10 = *(undefined4 *)((long)param_2 + 0x5c);
    if (uVar25 != 0) {
      uVar29 = 0;
      do {
        uVar21 = 0;
        do {
          **(undefined8 **)(lVar22 + uVar21 * 8) = 0;
          uVar21 = uVar21 + 1;
        } while (uVar36 != uVar21);
        uVar19 = uVar25 - uVar29;
        if (0x3fff < uVar19) {
          uVar19 = 0x4000;
        }
        *(uint *)((long)param_2 + 0x14) = uVar19;
        uVar21 = *param_3;
        if (uVar21 != 0) {
          uVar34 = 0;
          do {
            uVar14 = param_3[2];
            lVar28 = uVar34 * 0x20;
            fVar41 = *(float *)(uVar14 + lVar28) - (float)uVar29;
            if ((fVar41 < (float)*(uint *)((long)param_2 + 0x14)) &&
               (fVar1 = *(float *)(uVar14 + 8 + lVar28), -fVar1 < fVar41)) {
              fVar42 = *(float *)(uVar14 + 0x10 + lVar28);
              fVar37 = fVar42 * 6.1035156e-05;
              uVar30 = (ulong)fVar37;
              uVar30 = (long)(fVar37 - 9.223372e+18) & (long)uVar30 >> 0x3f | uVar30;
              if (uVar30 < uVar36) {
                uVar31 = uVar30 << 0xe;
                if ((long)uVar31 < 0) {
                  fVar37 = (float)(uVar31 >> 1) + (float)(uVar31 >> 1);
                }
                else {
                  fVar37 = (float)(long)uVar31;
                }
                uVar2 = *(undefined4 *)(uVar14 + 4 + lVar28);
                uVar3 = *(undefined4 *)(uVar14 + 0xc + lVar28);
                uVar4 = *(undefined4 *)(uVar14 + 0x14 + lVar28);
                fVar5 = *(float *)(uVar14 + 0x18 + lVar28);
                uVar6 = *(undefined4 *)(uVar14 + 0x1c + lVar28);
                fVar40 = (float)((uint)(-fVar41 / fVar1) & -(uint)(fVar41 < -fVar41));
                uVar19 = -(uint)(16384.0 < fVar41 + fVar1);
                fVar16 = (float)(~uVar19 & 0x3f800000 | (uint)((16384.0 - fVar41) / fVar1) & uVar19)
                ;
                fVar42 = fVar42 - fVar37;
                puVar33 = (undefined8 *)(lVar22 + uVar30 * 8);
                do {
                  fVar38 = (16384.0 - fVar42) / fVar5;
                  fVar37 = fVar38;
                  if (fVar5 + fVar42 <= 16384.0) {
                    fVar37 = 1.0;
                  }
                  fVar44 = fVar16;
                  if (fVar37 <= fVar16) {
                    fVar44 = 1.0;
                  }
                  if (fVar5 + fVar42 <= 16384.0) {
                    fVar38 = fVar44;
                  }
                  if (fVar37 <= fVar16) {
                    fVar44 = fVar38;
                  }
                  fVar38 = -fVar42;
                  fVar37 = fVar38 / fVar5;
                  if (fVar38 <= fVar42) {
                    fVar37 = 0.0;
                  }
                  fVar43 = fVar40;
                  if (fVar40 <= fVar37) {
                    fVar43 = 0.0;
                  }
                  fVar39 = fVar38 / fVar5;
                  if (fVar38 <= fVar42) {
                    fVar39 = fVar43;
                  }
                  if (fVar40 <= fVar37) {
                    fVar43 = fVar39;
                  }
                  fVar44 = fVar44 - fVar43;
                  if ((fVar44 != 1.0) || (NAN(fVar44))) {
                    if ((0.0 < fVar44) &&
                       ((fVar37 = fVar1 * fVar44, 0 < (int)fVar37 &&
                        (fVar44 = fVar44 * fVar5, 0 < (int)fVar44)))) {
                      pIVar23 = (IGVector<> *)*puVar33;
                      lVar28 = *(long *)pIVar23;
                      if (lVar28 == *(long *)(pIVar23 + 8)) {
                        uVar20 = IGVector<>::grow(pIVar23,lVar28 * 2);
                        if ((char)uVar20 == '\0') goto LAB_000318ff;
                        lVar28 = *(long *)pIVar23;
                      }
                      fVar38 = fVar43 * fVar5 + fVar42;
                      *(long *)pIVar23 = lVar28 + 1;
                      lVar24 = *(long *)(pIVar23 + 0x10) + lVar28 * 0x20;
                      *(float *)(*(long *)(pIVar23 + 0x10) + lVar28 * 0x20) =
                           fVar43 * fVar1 + fVar41;
                      goto LAB_000317a2;
                    }
                  }
                  else {
                    pIVar23 = (IGVector<> *)*puVar33;
                    lVar28 = *(long *)pIVar23;
                    if (lVar28 == *(long *)(pIVar23 + 8)) {
                      uVar20 = IGVector<>::grow(pIVar23,lVar28 * 2);
                      if ((char)uVar20 == '\0') goto LAB_000318ff;
                      lVar28 = *(long *)pIVar23;
                    }
                    *(long *)pIVar23 = lVar28 + 1;
                    lVar24 = *(long *)(pIVar23 + 0x10) + lVar28 * 0x20;
                    *(float *)(*(long *)(pIVar23 + 0x10) + lVar28 * 0x20) = fVar41;
                    fVar37 = fVar1;
                    fVar38 = fVar42;
                    fVar44 = fVar5;
LAB_000317a2:
                    *(undefined4 *)(lVar24 + 4) = uVar2;
                    *(float *)(lVar24 + 8) = fVar37;
                    *(undefined4 *)(lVar24 + 0xc) = uVar3;
                    *(float *)(lVar24 + 0x10) = fVar38;
                    *(undefined4 *)(lVar24 + 0x14) = uVar4;
                    *(float *)(lVar24 + 0x18) = fVar44;
                    *(undefined4 *)(lVar24 + 0x1c) = uVar6;
                  }
LAB_000318ff:
                  fVar42 = fVar42 + -16384.0;
                  puVar33 = puVar33 + 1;
                } while (0.0 < fVar5 + fVar42);
              }
            }
            uVar34 = uVar34 + 1;
          } while (uVar34 != uVar21);
        }
        param_2[9] = lVar12;
        uVar21 = 0;
        lVar28 = lVar12;
        do {
          puVar15 = *(ulong **)(lVar22 + uVar21 * 8);
          if (*puVar15 != 0) {
            uVar19 = uVar8 & 0x3fff;
            if (uVar21 < uVar35) {
              uVar19 = 0x4000;
            }
            *(uint *)((long)param_2 + 0x5c) = uVar19;
            blit3d_submit_rectlist(param_1,param_2,puVar15);
            lVar28 = param_2[9];
          }
          lVar28 = lVar28 + (ulong)*(byte *)(param_2 + 0x14) * 0x4000;
          param_2[9] = lVar28;
          uVar21 = uVar21 + 1;
        } while (uVar36 != uVar21);
        *param_2 = *param_2 + (ulong)*(byte *)(param_2 + 0x14) * 0x4000;
        uVar29 = uVar29 + 0x4000;
      } while (uVar29 < uVar25);
    }
    *(undefined4 *)((long)param_2 + 0x14) = uVar9;
    *param_2 = lVar13;
    *(undefined4 *)((long)param_2 + 0x5c) = uVar10;
    param_2[9] = lVar12;
    uVar21 = 0;
    do {
      pIVar23 = *(IGVector<> **)(lVar22 + uVar21 * 8);
      if (pIVar23 != (IGVector<> *)0x0) {
        IGVector<>::~IGVector(pIVar23);
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                        pIVar23);
      }
      uVar21 = uVar21 + 1;
    } while (uVar36 != uVar21);
    puVar32 = &blit3d_submit_commands(IGHardwareBlit3DContext*,blit3d_params_t*,IGVector<>const&)::
               kalloc_type_view_4627;
  }
  else {
    uVar35 = (ulong)(uVar8 >> 0xe);
    uVar36 = uVar35 + 1;
    lVar22 = _IOMallocTypeVarImpl
                       (&blit3d_submit_commands(IGHardwareBlit3DContext*,blit3d_params_t*,IGVector<>const&)
                         ::kalloc_type_view_4338);
    uVar21 = 0;
    do {
      pIVar23 = (IGVector<> *)
                _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
      *(undefined8 *)pIVar23 = 0;
      *(undefined8 *)(pIVar23 + 8) = 0;
      *(undefined8 *)(pIVar23 + 0x10) = 0;
      IGVector<>::grow(pIVar23,4);
      *(IGVector<> **)(lVar22 + uVar21 * 8) = pIVar23;
      uVar21 = uVar21 + 1;
    } while (uVar36 != uVar21);
    lVar12 = param_2[9];
    lVar28 = param_2[3];
    lVar13 = *param_2;
    lVar24 = param_2[0xc];
    if (uVar25 != 0) {
      uVar29 = 0;
      do {
        uVar21 = 0;
        do {
          **(undefined8 **)(lVar22 + uVar21 * 8) = 0;
          uVar21 = uVar21 + 1;
        } while (uVar36 != uVar21);
        uVar19 = uVar25 - uVar29;
        if (0x3fff < uVar19) {
          uVar19 = 0x4000;
        }
        *(uint *)(param_2 + 3) = uVar19;
        uVar21 = *param_3;
        if (uVar21 != 0) {
          uVar34 = 0;
          do {
            uVar14 = param_3[2];
            lVar27 = uVar34 * 0x20;
            fVar41 = *(float *)(uVar14 + 4 + lVar27) - (float)uVar29;
            if ((fVar41 < (float)*(uint *)(param_2 + 3)) &&
               (fVar1 = *(float *)(uVar14 + 0xc + lVar27), -fVar1 < fVar41)) {
              fVar42 = *(float *)(uVar14 + 0x14 + lVar27);
              fVar37 = fVar42 * 6.1035156e-05;
              uVar30 = (ulong)fVar37;
              uVar30 = (long)(fVar37 - 9.223372e+18) & (long)uVar30 >> 0x3f | uVar30;
              if (uVar30 < uVar36) {
                uVar31 = uVar30 << 0xe;
                if ((long)uVar31 < 0) {
                  fVar37 = (float)(uVar31 >> 1) + (float)(uVar31 >> 1);
                }
                else {
                  fVar37 = (float)(long)uVar31;
                }
                uVar9 = *(undefined4 *)(uVar14 + lVar27);
                uVar10 = *(undefined4 *)(uVar14 + 8 + lVar27);
                uVar2 = *(undefined4 *)(uVar14 + 0x10 + lVar27);
                uVar3 = *(undefined4 *)(uVar14 + 0x18 + lVar27);
                fVar5 = *(float *)(uVar14 + 0x1c + lVar27);
                fVar40 = (float)((uint)(-fVar41 / fVar1) & -(uint)(fVar41 < -fVar41));
                uVar19 = -(uint)(16384.0 < fVar41 + fVar1);
                fVar16 = (float)(~uVar19 & 0x3f800000 | (uint)((16384.0 - fVar41) / fVar1) & uVar19)
                ;
                fVar42 = fVar42 - fVar37;
                puVar33 = (undefined8 *)(lVar22 + uVar30 * 8);
                do {
                  fVar38 = (16384.0 - fVar42) / fVar5;
                  fVar37 = fVar38;
                  if (fVar5 + fVar42 <= 16384.0) {
                    fVar37 = 1.0;
                  }
                  fVar44 = fVar16;
                  if (fVar37 <= fVar16) {
                    fVar44 = 1.0;
                  }
                  if (fVar5 + fVar42 <= 16384.0) {
                    fVar38 = fVar44;
                  }
                  if (fVar37 <= fVar16) {
                    fVar44 = fVar38;
                  }
                  fVar38 = -fVar42;
                  fVar37 = fVar38 / fVar5;
                  if (fVar38 <= fVar42) {
                    fVar37 = 0.0;
                  }
                  fVar43 = fVar40;
                  if (fVar40 <= fVar37) {
                    fVar43 = 0.0;
                  }
                  fVar39 = fVar38 / fVar5;
                  if (fVar38 <= fVar42) {
                    fVar39 = fVar43;
                  }
                  if (fVar40 <= fVar37) {
                    fVar43 = fVar39;
                  }
                  fVar44 = fVar44 - fVar43;
                  if ((fVar44 != 1.0) || (NAN(fVar44))) {
                    if ((0.0 < fVar44) &&
                       ((fVar37 = fVar1 * fVar44, 0 < (int)fVar37 &&
                        (fVar44 = fVar44 * fVar5, 0 < (int)fVar44)))) {
                      fVar38 = fVar43 * fVar1 + fVar41;
                      fVar43 = fVar43 * fVar5 + fVar42;
                      pIVar23 = (IGVector<> *)*puVar33;
                      lVar27 = *(long *)pIVar23;
                      if (lVar27 == *(long *)(pIVar23 + 8)) {
                        uVar20 = IGVector<>::grow(pIVar23,lVar27 * 2);
                        cVar17 = (char)uVar20;
                        goto LAB_0003112f;
                      }
                      goto LAB_00031222;
                    }
                  }
                  else {
                    pIVar23 = (IGVector<> *)*puVar33;
                    lVar27 = *(long *)pIVar23;
                    fVar37 = fVar1;
                    fVar38 = fVar41;
                    fVar43 = fVar42;
                    fVar44 = fVar5;
                    if (lVar27 == *(long *)(pIVar23 + 8)) {
                      uVar20 = IGVector<>::grow(pIVar23,lVar27 * 2);
                      cVar17 = (char)uVar20;
LAB_0003112f:
                      if (cVar17 == '\0') goto LAB_0003127a;
                      lVar27 = *(long *)pIVar23;
                    }
LAB_00031222:
                    *(long *)pIVar23 = lVar27 + 1;
                    lVar11 = *(long *)(pIVar23 + 0x10);
                    lVar27 = lVar27 * 0x20;
                    *(undefined4 *)(lVar11 + lVar27) = uVar9;
                    *(float *)(lVar11 + 4 + lVar27) = fVar38;
                    *(undefined4 *)(lVar11 + 8 + lVar27) = uVar10;
                    *(float *)(lVar11 + 0xc + lVar27) = fVar37;
                    *(undefined4 *)(lVar11 + 0x10 + lVar27) = uVar2;
                    *(float *)(lVar11 + 0x14 + lVar27) = fVar43;
                    *(undefined4 *)(lVar11 + 0x18 + lVar27) = uVar3;
                    *(float *)(lVar11 + 0x1c + lVar27) = fVar44;
                  }
LAB_0003127a:
                  fVar42 = fVar42 + -16384.0;
                  puVar33 = puVar33 + 1;
                } while (0.0 < fVar5 + fVar42);
              }
            }
            uVar34 = uVar34 + 1;
          } while (uVar34 != uVar21);
        }
        param_2[9] = lVar12;
        uVar21 = 0;
        lVar27 = lVar12;
        do {
          puVar15 = *(ulong **)(lVar22 + uVar21 * 8);
          if (*puVar15 != 0) {
            uVar19 = uVar8 & 0x3fff;
            if (uVar21 < uVar35) {
              uVar19 = 0x4000;
            }
            *(uint *)(param_2 + 0xc) = uVar19;
            blit3d_submit_rectlist(param_1,param_2,puVar15);
            lVar27 = param_2[9];
          }
          lVar27 = lVar27 + (ulong)(uint)((int)param_2[10] << 0xe);
          param_2[9] = lVar27;
          uVar21 = uVar21 + 1;
        } while (uVar36 != uVar21);
        *param_2 = *param_2 + (ulong)(uint)((int)param_2[1] << 0xe);
        uVar29 = uVar29 + 0x4000;
      } while (uVar29 < uVar25);
    }
    *(int *)(param_2 + 3) = (int)lVar28;
    *param_2 = lVar13;
    *(int *)(param_2 + 0xc) = (int)lVar24;
    param_2[9] = lVar12;
    uVar21 = 0;
    do {
      pIVar23 = *(IGVector<> **)(lVar22 + uVar21 * 8);
      if (pIVar23 != (IGVector<> *)0x0) {
        IGVector<>::~IGVector(pIVar23);
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                        pIVar23);
      }
      uVar21 = uVar21 + 1;
    } while (uVar36 != uVar21);
    puVar32 = &blit3d_submit_commands(IGHardwareBlit3DContext*,blit3d_params_t*,IGVector<>const&)::
               kalloc_type_view_4468;
  }
  uVar21 = _IOFreeTypeVarImpl(puVar32,lVar22,uVar35 * 8 + 8);
LAB_00031a2b:
  return CONCAT71((int7)(uVar21 >> 8),1);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit3d_submit_rectlist(IGHardwareBlit3DContext*, blit3d_params_t*, IGVector<rect_pair_t,
// IGIOMallocAllocatorPolicy> const*)

void __cdecl blit3d_submit_rectlist(long param_1,long *param_2,ulong *param_3)

{
  byte bVar1;
  char cVar2;
  ushort uVar3;
  ulong uVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  uint *puVar8;
  ulong uVar9;
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [12];
  undefined1 auVar13 [12];
  undefined1 auVar14 [12];
  uint uVar15;
  undefined1 auVar16 [16];
  byte bVar17;
  byte bVar18;
  bool bVar19;
  undefined4 uVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  ulong uVar24;
  ulong uVar25;
  ulong uVar26;
  ulong uVar27;
  long lVar28;
  undefined8 *puVar29;
  ulong uVar30;
  undefined8 uVar31;
  long *plVar32;
  long lVar33;
  bool bVar34;
  uint uVar35;
  long lVar36;
  undefined8 uVar37;
  code *pcVar38;
  ulong *puVar39;
  undefined2 uVar40;
  undefined8 *puVar41;
  uint *puVar42;
  float *pfVar43;
  ulong uVar44;
  ushort uVar47;
  undefined1 *puVar45;
  code *pcVar46;
  uint uVar48;
  int iVar49;
  uint uVar50;
  ulong uVar51;
  long lVar52;
  long lVar53;
  void *pvVar54;
  ulong uVar55;
  code *pcVar56;
  ulong uVar57;
  uint uVar58;
  uint uVar59;
  uint uVar60;
  ulong uVar61;
  uint uVar62;
  ulong uVar63;
  uint uVar64;
  uint uVar65;
  ulong uVar66;
  long lVar67;
  ulong uVar68;
  bool bVar69;
  bool bVar70;
  bool bVar71;
  float fVar72;
  float fVar76;
  undefined1 auVar73 [16];
  undefined1 auVar74 [16];
  undefined1 auVar75 [16];
  undefined1 auVar77 [16];
  undefined1 auVar78 [16];
  undefined1 auVar79 [16];
  float fVar80;
  float fVar83;
  undefined1 auVar81 [16];
  undefined1 auVar82 [16];
  float fVar84;
  undefined1 auVar85 [16];
  undefined1 auVar86 [16];
  undefined1 auVar88 [16];
  float fVar89;
  ulong local_1a0;
  int local_104;
  uint local_100;
  uint local_fc;
  long local_c8;
  ulong local_b8;
  ulong local_b0;
  ulong local_a8;
  ulong local_a0;
  ulong local_98;
  ulong local_90;
  ulong local_88;
  ulong local_80;
  ulong local_78;
  ulong local_70;
  undefined4 local_68;
  uint uStack_64;
  undefined4 local_60;
  undefined4 uStack_5c;
  ulong local_58;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  long local_38;
  undefined1 auVar87 [16];
  
  local_38 = *(long *)__got::___stack_chk_guard;
  uVar4 = *param_3;
  lVar5 = *(long *)(param_1 + 0xd8);
  lVar6 = *(long *)(*(IGAccelTask **)(param_1 + 0x58) + 0x10);
  plVar7 = *(long **)(lVar5 + 0x20);
  uVar24 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(param_1 + 0x58));
  uVar25 = (ulong)((uint)uVar24 & 0xfffffffc) << 0x20;
  uVar26 = uVar25 | 0x10000003;
  local_1a0 = 0x7001fffff001;
  uVar15 = (uint)(uVar24 >> 0x20);
  uVar48 = uVar15 & 0xffff;
  uVar55 = 0;
  do {
    pcVar56 = (code *)0x0;
    (**(code **)(*plVar7 + 0x148))(plVar7);
    *(long *)(*(long *)(lVar5 + 0x1860) + 0x48) = param_2[0x21];
    *(uint *)(param_2 + 0x1e) = (uint)(byte)(&DAT_000012c8)[lVar6];
    uVar27 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(param_1 + 0xd0));
    uVar20 = local_60;
    bVar18 = *(byte *)((long)param_2 + 0x55);
    bVar1 = *(byte *)((long)param_2 + 0x85);
    if ((bVar1 & 4) == 0) {
      bVar69 = false;
    }
    else {
      bVar69 = (*(ushort *)((long)param_2 + 0xa2) & 6) == 4;
    }
    uVar68 = *param_3;
    lVar67 = uVar68 - uVar55;
    uVar44 = uVar55;
    if (uVar55 <= uVar68 && lVar67 != 0) {
      puVar8 = *(uint **)(param_1 + 0xd8);
      lVar33 = *(long *)(*(long *)(param_1 + 0x58) + 0x10);
      uVar47 = *(ushort *)((long)param_2 + 0x56);
      uVar3 = *(ushort *)((long)param_2 + 0xe);
      uVar64 = (uint)uVar3;
      uVar35 = *(uint *)((long)param_2 + 0x5c);
      uVar50 = *(uint *)((long)param_2 + 0x14);
      uVar23 = 0;
      uVar62 = 0;
      uVar58 = (uint)uVar47;
      if (uVar47 < 0xdb) {
        uVar65 = (uint)uVar47;
        uVar21 = uVar65;
        if (uVar58 == 0x8e || uVar47 < 0x8e) {
          if (uVar65 == 0x87 || uVar47 < 0x87) {
            if (uVar65 == 6) {
              uVar62 = 0;
              uVar21 = 0;
            }
            else {
              uVar62 = uVar23;
              if (uVar58 == 0x80) goto LAB_00031d90;
            }
          }
          else {
            if (uVar65 == 0x88) {
              uVar62 = 4;
            }
            else if (uVar65 != 0x8e) goto switchD_00031d0c_caseD_c2;
LAB_00031d90:
            uVar21 = 0x80;
          }
        }
        else {
          uVar21 = uVar58;
          switch(uVar47) {
          case 0xc0:
            goto switchD_00031d0c_caseD_c0;
          case 0xc1:
            goto switchD_00031d0c_caseD_c1;
          case 0xc2:
          case 0xc3:
          case 0xc4:
          case 0xc5:
          case 0xc6:
            break;
          case 199:
            goto switchD_00031d0c_caseD_c7;
          case 200:
            goto switchD_00031d0c_caseD_c8;
          default:
            if (uVar65 == 0x8f) {
              uVar21 = 0x84;
            }
            else {
              uVar21 = uVar65;
              if (uVar58 == 0xd9) goto LAB_00031d76;
            }
          }
        }
      }
      else {
        uVar23 = uVar62;
        switch(uVar47) {
        case 0xe9:
switchD_00031d0c_caseD_c0:
          uVar62 = uVar23;
          uVar21 = 0xc0;
          break;
        case 0xea:
switchD_00031d0c_caseD_c1:
          uVar21 = 0xc1;
          break;
        case 0xeb:
        case 0xed:
switchD_00031d0c_caseD_c7:
          uVar21 = 199;
          break;
        case 0xec:
switchD_00031d0c_caseD_c8:
          uVar21 = 200;
          break;
        default:
          if (uVar47 - 0x111 < 3) {
            uVar21 = 0x10a;
          }
          else {
            uVar21 = (uint)uVar47;
            if (uVar58 == 0xdb) {
LAB_00031d76:
              uVar23 = 1;
              goto switchD_00031d0c_caseD_c0;
            }
          }
        }
      }
switchD_00031d0c_caseD_c2:
      if (uVar47 == uVar3) {
        uVar62 = uVar62 | uVar62 >> 1;
        uVar64 = uVar21;
      }
      else if ((uVar3 - 0x186 < 8) && ((0xe7U >> (uVar3 - 0x186 & 0x1f) & 1) != 0)) {
        uVar64 = 0x140;
      }
      else if ((uVar3 - 0xc0 < 0x1c) && ((0xa000001U >> (uVar3 - 0xc0 & 0x1f) & 1) != 0)) {
        uVar64 = 0xc0;
      }
      else if (uVar3 == 0x88) {
        uVar62 = uVar62 | 2;
        uVar64 = 0x80;
      }
      if ((uVar62 & 3) == 3) {
        uVar64 = 0x87;
        uVar21 = 0xd7;
      }
      uVar44 = param_3[2];
      uVar63 = uVar55 * 0x20;
      fVar72 = *(float *)(uVar44 + 0x10 + uVar63);
      fVar83 = *(float *)(uVar44 + 0x18 + uVar63);
      if (param_2[4] == 0) {
        bVar34 = param_2[0xd] == 0;
      }
      else {
        bVar34 = false;
      }
      iVar49 = (uint)(1 < bVar18) + (uint)(1 < *(byte *)((long)param_2 + 0xd)) * 2;
      bVar71 = true;
      bVar70 = true;
      if (iVar49 != 0) {
        if (iVar49 == 3) {
          bVar70 = bVar18 == *(byte *)((long)param_2 + 0xd);
        }
        else {
          bVar70 = false;
        }
      }
      uVar51 = (ulong)*(float *)(uVar44 + uVar63);
      pfVar43 = (float *)(uVar44 + uVar63 + 8);
      uVar23 = (uint)(long)fVar83;
      if ((fVar83 == *pfVar43) && (!NAN(fVar83) && !NAN(*pfVar43))) {
        fVar80 = *(float *)(uVar44 + 0x1c + uVar63);
        pfVar43 = (float *)(uVar44 + uVar63 + 0xc);
        if ((fVar80 == *pfVar43) && (!NAN(fVar80) && !NAN(*pfVar43))) {
          fVar80 = (float)((long)fVar72 & 0xffffffff);
          if ((fVar72 == fVar80) && (!NAN(fVar72) && !NAN(fVar80))) {
            fVar80 = (float)((long)fVar83 & 0xffffffff);
            if ((fVar83 == fVar80) && (!NAN(fVar83) && !NAN(fVar80))) {
              bVar71 = *(float *)(uVar44 + uVar63) != (float)(uVar51 & 0xffffffff);
            }
          }
        }
      }
      uVar47 = *(ushort *)((long)param_2 + 0xa2);
      local_104 = 0;
      bVar19 = true;
      local_fc = 1;
      local_60 = 0;
      uVar58 = uVar64;
      if (((((uVar21 != uVar64) || (!bVar34)) || ((bool)(bVar70 ^ 1))) ||
          ((bVar71 || ((uVar47 & 0x60) != 0)))) ||
         ((*(short *)((long)param_2 + 0xa4) != 0 || ((uVar47 & 0x100) != 0)))) {
        uVar65 = 1;
        local_60 = uVar20;
      }
      else {
        local_48 = 0;
        local_58 = 0;
        local_50 = 0;
        uStack_5c = 0;
        local_78 = 0x6000000080;
        local_70 = 0x2000000040;
        local_68 = 0x10;
        uStack_64 = 8;
        uVar65 = 8;
        if ((bVar18 < 9) && (uVar65 = 4, bVar18 < 5)) {
          uVar65 = 2 - (bVar18 < 3);
        }
        bVar17 = *(byte *)((long)&local_78 + (ulong)(uVar64 >> 6 & 0xf) * 4);
        uVar59 = (uint)bVar17;
        uVar60 = uVar35;
        if (bVar17 == 0) {
          uVar59 = 0;
          if ((uVar64 - 0x182 < 0xf) && ((0x6003U >> (uVar64 - 0x182 & 0x1f) & 1) != 0)) {
            uVar50 = uVar50 >> 1;
            uVar23 = uVar23 >> 1;
            uVar59 = 8;
            uVar60 = uVar35 >> 1;
          }
          if (((uVar64 >> 9 & 1) == 0) &&
             ((0x1e < uVar64 - 0x186 || ((0x781808ffU >> (uVar64 - 0x186 & 0x1f) & 1) == 0))))
          goto LAB_00032048;
          local_104 = 0;
          if (uVar64 < 0x208) {
            uVar50 = uVar64 - 0x186;
            if (uVar50 < 0x1f) {
              if ((0x781000d6U >> (uVar50 & 0x1f) & 1) != 0) goto LAB_00032bfd;
              uVar58 = 0x87;
              uVar21 = 0x87;
              if ((0x80829U >> (uVar50 & 0x1f) & 1) != 0) goto LAB_00032092;
            }
            if (uVar64 == 0x200) goto LAB_00032bfd;
          }
          else if (((uVar64 - 0x208 < 0x39) &&
                   ((0x1c0560016000603U >> ((ulong)(uVar64 - 0x208) & 0x3f) & 1) != 0)) ||
                  ((uVar64 - 0x248 < 0x38 &&
                   ((0xc0560016000603U >> ((ulong)(uVar64 - 0x248) & 0x3f) & 1) != 0)))) {
LAB_00032bfd:
            uVar58 = 2;
            uVar21 = 2;
            goto LAB_00032092;
          }
LAB_00033e90:
          bVar19 = true;
          local_104 = 0;
          uVar58 = uVar64;
          uVar21 = uVar64;
        }
        else {
LAB_00032048:
          uVar21 = uVar64;
          if ((*(char *)((long)param_2 + 0xc) != '\a') &&
             (((*(char *)((long)param_2 + 0xc) != '\v' && (*(char *)((long)param_2 + 0x54) != '\a'))
              && (*(char *)((long)param_2 + 0x54) != '\v')))) {
            uVar58 = uVar59 - 0x10 >> 4;
            uVar21 = uVar58 | uVar59 << 0x1c;
            if ((uVar21 < 8) && ((0x8bU >> (uVar58 & 0x1f) & 1) != 0)) {
              uVar64 = *(uint *)(&DAT_00112d18 + (long)(int)uVar21 * 4);
            }
            uVar58 = uVar64;
            uVar21 = uVar64;
            if ((uVar59 - 4 < 0x3d) &&
               ((0x1000000010001011U >> ((ulong)(uVar59 - 4) & 0x3f) & 1) != 0)) {
              bVar17 = 0x80 / (byte)uVar59;
              uVar22 = uVar65;
              if (uVar65 < bVar17) {
                uVar22 = (uint)bVar17;
              }
              uVar22 = uVar22 - 1;
              bVar34 = true;
              if ((uVar47 & 0x80) != 0) {
                if ((*(uint *)(param_2 + 0x12) & uVar22) == 0) {
                  bVar34 = (*(uint *)(param_2 + 0x13) & uVar22) == 0;
                }
                else {
                  bVar34 = false;
                }
              }
              uVar44 = (ulong)*(uint *)((long)param_2 + 0x2c) + *param_2;
              if ((uVar44 & 0xf) == 0) {
                bVar71 = ((int)param_2[9] + *(int *)((long)param_2 + 0x74) & 0xfU) == 0;
              }
              else {
                bVar71 = false;
              }
              uVar50 = (uint)uVar51 | (uint)(long)fVar72 | uVar50 | uVar60 | uVar23;
              local_104 = 0;
              local_fc = (uint)bVar17;
              if (((bool)((uVar22 & uVar50) == 0 & bVar34)) && (bVar71)) {
                bVar19 = false;
                local_104 = 2;
                uVar58 = 2;
                uVar21 = 2;
              }
              else if (uVar59 < 0x40) {
                bVar17 = 0x40 / (byte)uVar59;
                local_fc = (uint)bVar17;
                uVar23 = uVar65;
                if (uVar65 < local_fc) {
                  uVar23 = (uint)bVar17;
                }
                uVar23 = uVar23 - 1;
                bVar34 = true;
                if ((uVar47 & 0x80) != 0) {
                  if ((*(uint *)(param_2 + 0x12) & uVar23) == 0) {
                    bVar34 = (*(uint *)(param_2 + 0x13) & uVar23) == 0;
                  }
                  else {
                    bVar34 = false;
                  }
                }
                if ((((uVar44 & 7) != 0) || (!(bool)((uVar23 & uVar50) == 0 & bVar34))) ||
                   (((int)param_2[9] + *(int *)((long)param_2 + 0x74) & 7U) != 0))
                goto LAB_00033e90;
                local_104 = 1;
                uVar58 = 0x87;
                bVar19 = false;
                uVar21 = uVar58;
              }
              else {
                bVar19 = true;
              }
            }
          }
        }
      }
LAB_00032092:
      lVar52 = 0x1c0;
      if (((uint)*(undefined8 *)(lVar33 + 0xf6a) >> 0x15 & 1) == 0) {
        lVar52 = 0x1b4;
      }
      lVar28 = lVar52 + 0x34;
      if ((!bVar19) && ((*(uint *)(lVar33 + 0xfce) >> 0x11 & 1) != 0)) {
        lVar28 = lVar52 + 0x4c;
      }
      lVar52 = 0xfc;
      if (((uint)*(undefined8 *)(lVar33 + 0xf52) >> 0x15 & 1) == 0) {
        lVar52 = 0x5c;
      }
      lVar36 = uVar68 * 0x60 + (ulong)bVar69 * 0x40 + uVar55 * -0x60 + 0x1e0;
      lVar53 = lVar52 * lVar67;
      uVar68 = lVar67 + 1;
      do {
        lVar67 = lVar53;
        if ((uVar47 >> 0xb & 1) == 0) {
          lVar67 = 0x2c;
        }
        uVar44 = lVar67 + lVar28 + 0x3f;
        uVar66 = uVar44 & 0xffffffffffffffc0;
        uVar51 = lVar36 + uVar66 & 0xffffffffffffffc0;
        uVar68 = uVar68 - 1;
        lVar36 = lVar36 + -0x60;
        lVar53 = lVar53 - lVar52;
      } while (0x10000 < uVar51);
      puVar29 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)puVar8);
      uVar30 = IOAccelCommandBufferPool2::getGPUVirtualAddress(puVar8);
      uVar50 = (uint)*(undefined8 *)__got::_page_mask & (uint)puVar29;
      uVar20 = (undefined4)((uVar24 >> 2 & 0x3fffffff) << 2);
      *(undefined4 *)(puVar29 + 1) = uVar20;
      *puVar29 = 0x1050217a000004;
      *(uint *)((long)puVar29 + 0xc) = uVar15;
      puVar29[2] = 0;
      puVar29[4] = 0;
      puVar29[3] = 0x1000c1c7a000004;
      puVar29[5] = 0;
      uVar61 = local_1a0;
      if ((*(byte *)((long)param_2 + 0xa2) & 0x80) != 0) {
        uVar61 = ((ulong)((int)uVar51 + ((uint)uVar30 & 0xfff) + 0xfff >> 0xc) << 0x2c) + 0xfffff001
                 | 0x100000000;
        uVar27 = uVar30;
      }
      *(undefined4 *)(puVar29 + 7) = 0;
      puVar29[6] = 0x4047a000004;
      *(undefined4 *)((long)puVar29 + 0x44) = 0;
      *(undefined8 *)((long)puVar29 + 0x3c) = 0;
      puVar29[0xb] = uVar30 & 0xfffffffffffff000 | 0x701;
      puVar29[0xc] = (uVar27 & 0xfffffffffffff000) + 0x701;
      puVar29[10] = 0;
      puVar29[9] = 0x61010014;
      puVar29[0xd] = 0;
      puVar29[0xe] = 0;
      puVar29[0xf] = uVar61;
      puVar29[0x10] = 0xfffff001fffff001;
      puVar29[0x11] = 0;
      puVar29[0x12] = 0;
      puVar29[0x13] = 0;
      puVar29[0x15] =
           (ulong)(uVar35 - 1 & 0xffff) | (ulong)((int)param_2[0xc] - 1U & 0xffff) << 0x10;
      puVar29[0x14] = 0x79000002;
      uVar47 = *(ushort *)((long)param_2 + 0xa2);
      if ((uVar47 & 0x80) == 0) {
        uVar47 = uVar47 >> 5 & 3;
        if (uVar47 == 2) {
          uVar51 = ((ulong)((uVar62 & 4) == 0) << 0x27) + 0x61c178240000;
          uVar27 = 0x62c1780e0000;
        }
        else {
          if (uVar47 == 1) {
            uVar51 = ((ulong)((uVar62 & 4) == 0) << 0x27) + 0x60c178240000;
          }
          else {
            uVar51 = 0x604178240000;
          }
          uVar27 = 0x62c1780e0000;
        }
      }
      else {
        uVar47 = uVar47 >> 5 & 3;
        pvVar54 = (void *)((long)puVar29 + uVar66 + 0x3f & 0xffffffffffffffc0);
        if (uVar47 == 2) {
          if ((uVar62 & 4) == 0) {
            puVar45 = &StencilD24S8BlendState;
          }
          else {
            puVar45 = &StencilD32FS8BlendState;
          }
        }
        else if (uVar47 == 1) {
          if ((uVar62 & 4) == 0) {
            puVar45 = &DepthD24S8BlendState;
          }
          else {
            puVar45 = &DepthD32FS8BlendState;
          }
        }
        else {
          puVar45 = &DefaultBlendState;
        }
        _memcpy(pvVar54,puVar45,0x44);
        uVar51 = ((ulong)(uVar50 + (int)uVar66) & 0xffffffc0) << 0x20 | 0x178240000;
        uVar44 = (long)pvVar54 + (uVar44 | 0x3f) + (0x44 - (uVar66 + (long)puVar29)) &
                 0xffffffffffffffc0;
        uVar27 = ((ulong)(uVar50 + (int)uVar44) & 0xffffffc0) << 0x20 | 0x1780e0000;
        puVar41 = (undefined8 *)((long)puVar29 + uVar44 + 0x3f & 0xffffffffffffffc0);
        puVar41[2] = 0;
        puVar41[1] = 0;
        *puVar41 = 0;
        uVar66 = (0x18 - (long)puVar29) + (long)puVar41;
      }
      puVar29[0x16] = uVar51;
      puVar29[0x17] = uVar27;
      if ((*(byte *)((long)param_2 + 0xa2) & 0x80) == 0) {
        uVar27 = 0x63e0780f0000;
      }
      else {
        uVar44 = uVar66 + 0x1f & 0xffffffffffffffe0;
        uVar27 = ((ulong)((int)uVar44 + uVar50) & 0xffffffe0) << 0x20 | 0x780f0000;
        puVar39 = (ulong *)((long)puVar29 + uVar44 + 0x1f & 0xffffffffffffffe0);
        *puVar39 = (ulong)*(uint *)((long)param_2 + 0x9c) << 0x30 |
                   (ulong)*(ushort *)(param_2 + 0x13) << 0x20 |
                   (ulong)(uint)(*(int *)((long)param_2 + 0x94) << 0x10) |
                   (ulong)*(ushort *)(param_2 + 0x12);
        uVar66 = (8 - (long)puVar29) + (long)puVar39;
      }
      puVar29[0x18] = uVar27;
      puVar29[0x19] = 0xa8478140000;
      puVar29[0x1a] = (ulong)(iVar49 == 3) << 0x26 | 0x80000100784f0000;
      puVar29[0x1b] = (ulong)(*(ushort *)((long)param_2 + 0xa2) >> 7 & 1) << 0x21 | 0x21000078500003
      ;
      puVar29[0x1c] = 0;
      *(undefined4 *)(puVar29 + 0x1d) = 0;
      *(undefined8 *)((long)puVar29 + 0xf4) = 0x200480800020000;
      *(undefined8 *)((long)puVar29 + 0xec) = 0x78130002;
      uVar35 = iVar49 - 1;
      if (uVar35 < 3) {
        uVar31 = *(undefined8 *)(&DAT_00112d38 + (long)(int)uVar35 * 8);
        uVar40 = (undefined2)(0x100010000 >> ((char)uVar35 * '\x10' & 0x3fU));
      }
      else {
        uVar40 = 0;
        uVar31 = 0x30400820781f0004;
      }
      *(undefined8 *)((long)puVar29 + 0xfc) = uVar31;
      *(undefined8 *)((long)puVar29 + 0x10c) = 0xffffffffffffffff;
      *(undefined8 *)((long)puVar29 + 0x104) = 0;
      *(undefined4 *)((long)puVar29 + 0x114) = 0x78510009;
      *(undefined2 *)(puVar29 + 0x23) = uVar40;
      *(undefined2 *)((long)puVar29 + 0x11a) = 1;
      *(undefined8 *)((long)puVar29 + 0x11c) = 0x5000400030002;
      *(undefined8 *)((long)puVar29 + 0x124) = 0x9000800070006;
      *(undefined8 *)((long)puVar29 + 300) = 0xd000c000b000a;
      *(undefined **)((long)puVar29 + 0x134) = &DAT_000f000e;
      *(undefined4 *)((long)puVar29 + 0x13c) = 0;
      uVar31 = 0x780d0000;
      if (bVar18 < 2) {
        uVar37 = 0x178180000;
      }
      else {
        uVar35 = *(byte *)((long)param_2 + 0x55) - 2 >> 1 |
                 (uint)*(byte *)((long)param_2 + 0x55) << 0x1f;
        uVar37 = 0x178180000;
        if (uVar35 < 8) {
          uVar31 = *(undefined8 *)(&DAT_00112d50 + (long)(int)uVar35 * 8);
          uVar37 = *(undefined8 *)(&DAT_00112d90 + (long)(int)uVar35 * 8);
        }
      }
      puVar29[0x28] = uVar31;
      puVar29[0x29] = uVar37;
      uVar47 = *(ushort *)((long)param_2 + 0xa2);
      if ((uVar47 & 0x80) == 0) {
        if ((uVar47 & 7) == 0) {
          uVar27 = 0x6420782f0000;
        }
        else if ((uVar47 & 7) == 2) {
          uVar27 = 0x6440782f0000;
        }
        else {
          uVar27 = 0x782f0000;
          if ((uVar47 & 7) == 1) {
            uVar27 = 0x6400782f0000;
          }
        }
      }
      else {
        uVar66 = uVar66 + 0x1f & 0xffffffffffffffe0;
        uVar27 = ((ulong)((int)uVar66 + uVar50) & 0xffffffe0) << 0x20 | 0x782f0000;
        if ((uVar47 & 7) == 0) {
          puVar41 = (undefined8 *)((long)puVar29 + uVar66 + 0x1f & 0xffffffffffffffe0);
          puVar41[1] = 0x9200000000;
          uVar31 = 0x200000000;
        }
        else if ((uVar47 & 7) == 2) {
          puVar41 = (undefined8 *)((long)puVar29 + uVar66 + 0x1f & 0xffffffffffffffe0);
          puVar41[1] = 0x9200000000;
          uVar31 = 0x200048001;
        }
        else {
          if ((uVar47 & 7) != 1) goto LAB_000328f4;
          puVar41 = (undefined8 *)((long)puVar29 + uVar66 + 0x1f & 0xffffffffffffffe0);
          puVar41[1] = 0x7e09200000000;
          uVar31 = 0x200024000;
        }
        *puVar41 = uVar31;
        uVar66 = ((uVar66 | 0x10) - (uVar66 + (long)puVar29)) + (long)puVar41;
      }
LAB_000328f4:
      puVar29[0x2a] = uVar27;
      if (iVar49 == 3) {
        uVar31 = 0x40000;
        uVar27 = 0x40000000;
        pcVar38 = (code *)&DAT_000011c0;
        uVar47 = 1;
      }
      else if (iVar49 == 2) {
        uVar47 = *(ushort *)((long)param_2 + 0xa2);
        if ((uVar47 >> 10 & 1) == 0) {
          pcVar38 = __start;
          switch(*(byte *)((long)param_2 + 0xd) - 2 >> 1 |
                 (uint)*(byte *)((long)param_2 + 0xd) << 0x1f) {
          case 0:
            break;
          case 1:
            pcVar38 = (code *)0x1580;
            break;
          default:
switchD_00032952_caseD_2:
            pcVar38 = (code *)&DAT_000012c0;
            break;
          case 3:
            pcVar38 = (code *)0x1800;
            break;
          case 7:
            pcVar38 = (code *)0x1c00;
          }
          goto switchD_00032952_caseD_0;
        }
        if ((uVar47 & 7) == 0) goto switchD_00032952_caseD_2;
        if ((uVar47 & 7) == 5) {
          pcVar38 = (code *)&DAT_000012c0;
          switch(*(byte *)((long)param_2 + 0xd) - 2 >> 1 |
                 (uint)*(byte *)((long)param_2 + 0xd) << 0x1f) {
          case 0:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x4f40;
            pcVar56 = (code *)0x30c0;
            break;
          case 1:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x5140;
            pcVar56 = (code *)0x3240;
            break;
          default:
            goto switchD_00032952_caseD_0;
          case 3:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x5400;
            pcVar56 = (code *)0x3480;
            break;
          case 7:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x5880;
            pcVar56 = (code *)0x3800;
          }
          goto LAB_00032e1e;
        }
        if ((uVar47 & 7) == 4) {
          pcVar38 = (code *)&DAT_000012c0;
          switch(*(byte *)((long)param_2 + 0xd) - 2 >> 1 |
                 (uint)*(byte *)((long)param_2 + 0xd) << 0x1f) {
          case 0:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x3e40;
            pcVar56 = (code *)0x2340;
            break;
          case 1:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x4040;
            pcVar56 = (code *)0x24c0;
            break;
          default:
            goto switchD_00032952_caseD_0;
          case 3:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x4300;
            pcVar56 = (code *)0x2700;
            break;
          case 7:
            bVar34 = (bVar1 & 4) == 0;
            pcVar38 = (code *)0x4780;
            pcVar56 = (code *)0x2a80;
          }
LAB_00032e1e:
          if (bVar34) {
            pcVar38 = pcVar56;
          }
        }
        else {
          pcVar38 = (code *)0x0;
        }
switchD_00032952_caseD_0:
        uVar27 = 0x40000000;
        uVar47 = 2;
        uVar31 = 0x60000;
        pcVar56 = (code *)0x0;
      }
      else {
        uVar35 = *(ushort *)((long)param_2 + 0x56) - 0x182;
        uVar31 = 0x60000;
        uVar27 = 0x48000000;
        if ((uVar62 & 3) == 3) {
          pcVar38 = (code *)&DAT_00001080;
        }
        else {
          bVar34 = (ushort)uVar35 < 0xf && (0x6003U >> (uVar35 & 0x1f) & 1) != 0;
          uVar35 = *(ushort *)((long)param_2 + 0xe) - 0x182;
          if (bVar34 == ((0x6003U >> (uVar35 & 0x1f) & 1) != 0 && (ushort)uVar35 < 0xf)) {
            pcVar38 = pcVar56;
            if ((int)uVar21 < 0x10a) {
              if ((((0x3f < uVar21 - 199) ||
                   ((0xea00003c00140c23U >> ((ulong)(uVar21 - 199) & 0x3f) & 1) == 0)) &&
                  ((0x3b < uVar21 - 0x88 ||
                   ((0xf00000000000041U >> ((ulong)(uVar21 - 0x88) & 0x3f) & 1) == 0)))) &&
                 (uVar21 != 0x80)) goto LAB_00033e1f;
LAB_00032cef:
              cVar2 = *(char *)((long)param_2 + 0x55);
              if ((*(byte *)((long)param_2 + 0xa3) & 1) == 0) {
                uVar31 = 0x10000000b06;
                if (cVar2 == '\x10') {
                  uVar31 = 0x60000;
                }
                uVar47 = (ushort)(((ulong)(cVar2 != '\x10') << 0x22) >> 0x20) | 2;
                goto LAB_00032e49;
              }
              bVar34 = cVar2 == '\x10';
              uVar47 = 6;
              if (bVar34) {
                uVar47 = 2;
                pcVar38 = (code *)0x840;
              }
              pcVar46 = (code *)0x84000000000;
              if (bVar34) {
                pcVar46 = pcVar56;
              }
              pcVar56 = pcVar46;
              uVar31 = 0x94000000b06;
            }
            else {
              if (((uVar21 - 0x10a < 0x3b) &&
                  ((0x440000000000381U >> ((ulong)(uVar21 - 0x10a) & 0x3f) & 1) != 0)) ||
                 ((uVar21 - 0x182 < 0xf && ((0x6003U >> (uVar21 - 0x182 & 0x1f) & 1) != 0))))
              goto LAB_00032cef;
LAB_00033e1f:
              if ((*(byte *)((long)param_2 + 0xa3) & 1) != 0) {
                bVar34 = true;
                if ((((7 < uVar21 - 0xc4) || ((0xc1U >> (uVar21 - 0xc4 & 0x1f) & 1) == 0)) &&
                    (1 < uVar21 - 1)) && (1 < uVar21 - 0x82)) {
                  bVar34 = false;
                }
                if (*(char *)((long)param_2 + 0x55) != '\x10') {
                  pcVar56 = (code *)0xb0000000000;
                  if (bVar34) {
                    pcVar56 = (code *)0xdc000000000;
                  }
                  uVar31 = 0xc0000000b06;
                  if (bVar34) {
                    uVar31 = 0xec000000b06;
                  }
                  uVar47 = 6;
                  goto LAB_00032e49;
                }
                pcVar38 = (code *)0xb00;
                pcVar46 = (code *)0xdc0;
                goto LAB_00032a57;
              }
              bVar34 = *(char *)((long)param_2 + 0x55) == '\x10';
              uVar47 = 6;
              if (bVar34) {
                uVar47 = 2;
                pcVar38 = (code *)0x600;
              }
              pcVar46 = (code *)0x60000000000;
              if (bVar34) {
                pcVar46 = pcVar56;
              }
              uVar31 = 0x6c000000b06;
              pcVar56 = pcVar46;
            }
            if (bVar34) {
              uVar31 = 0x60000;
            }
            goto LAB_00032e49;
          }
          pcVar38 = (code *)0x480;
          pcVar46 = (code *)0x2c0;
LAB_00032a57:
          if (bVar34) {
            pcVar38 = pcVar46;
          }
        }
        uVar47 = 2;
      }
LAB_00032e49:
      uVar51 = 0;
      *(undefined4 *)(puVar29 + 0x2b) = 0x7820000a;
      *(code **)((long)puVar29 + 0x15c) = pcVar38;
      *(undefined4 *)((long)puVar29 + 0x16c) = 0;
      *(ulong *)((long)puVar29 + 0x164) = uVar27 | 0x80000000;
      *(ushort *)(puVar29 + 0x2e) = uVar47;
      *(undefined2 *)((long)puVar29 + 0x172) = 0x1f80;
      *(undefined8 *)((long)puVar29 + 0x174) = uVar31;
      *(code **)((long)puVar29 + 0x17c) = pcVar56;
      local_68 = 0;
      *(undefined4 *)((long)puVar29 + 0x184) = 0;
      uStack_5c = 0;
      local_78 = uVar51;
      local_70 = uVar51;
      uStack_64 = uStack_5c;
      local_60 = local_68;
      local_58 = uVar51;
      local_50 = uVar51;
      local_48 = uVar51;
      local_40 = uVar51;
      get_surface_state(&local_78,param_2 + 9,uVar21,iVar49,local_104,local_fc);
      if (*(char *)((long)param_2 + 0xd) != '\x01') {
        local_78 = local_78 & 0xffffffff1fffffff | 0x20000000;
      }
      uVar27 = CONCAT44(local_60,uStack_64) & 0xfffffffffffffff0;
      uStack_64 = (uint)uVar27 | *(ushort *)((long)param_2 + 0x66) & 0xf;
      local_60 = (undefined4)(uVar27 >> 0x20);
      uVar27 = local_70;
      if ((*(byte *)((long)param_2 + 0x85) & 4) != 0) {
        uVar27 = local_70 & 0xfffc0000ffffffff | (ulong)((int)param_2[0x10] - 1U & 0x3ffff) << 0x20;
      }
      uVar66 = uVar66 + 0x3f & 0xffffffffffffffc0;
      uVar44 = local_78 & 0x81ffffffffffffff;
      if (((param_2[0x11] != 0) && (bVar18 = IGAccelResource::isDisplayableIOSurface(), bVar18 == 0)
          ) || (*(char *)(*(long *)(&DAT_00001290 + lVar33) + 0x21) != '\0')) {
        uVar44 = uVar44 | 0x3200000000000000;
      }
      puVar39 = (ulong *)((long)puVar29 + uVar66 + 0x3f & 0xffffffffffffffc0);
      puVar39[7] = local_40;
      puVar39[6] = local_48;
      puVar39[5] = local_50;
      puVar39[4] = local_58;
      puVar39[3] = CONCAT44(uStack_5c,local_60);
      puVar39[2] = CONCAT44(uStack_64,local_68);
      puVar39[1] = uVar27;
      *puVar39 = uVar44;
      lVar67 = (long)puVar39 + (0x40 - (long)puVar29);
      uVar35 = uVar50 + (int)lVar67 & 0xffffffc0;
      local_100 = uVar35;
      local_78 = uVar44;
      local_70 = uVar27;
      if (bVar69 != false) {
        local_b8 = uVar51;
        local_b0 = uVar51;
        local_a8 = uVar51;
        local_a0 = uVar51;
        local_98 = uVar51;
        local_90 = uVar51;
        local_88 = uVar51;
        local_80 = uVar51;
        get_surface_state(&local_b8,param_2,0xd8,iVar49,local_104,local_fc);
        uVar64 = *(uint *)((long)param_2 + 0xac);
        puVar39 = (ulong *)((long)puVar29 + lVar67 + 0x3f & 0xffffffffffffffc0);
        puVar39[7] = local_80;
        puVar39[6] = local_88;
        puVar39[5] = local_90;
        puVar39[4] = local_98 - uVar64;
        puVar39[3] = local_a0;
        puVar39[2] = local_a8;
        puVar39[1] = local_b0;
        *puVar39 = local_b8 | 0x3000;
        lVar67 = (long)puVar39 + (0x40 - (long)puVar29);
        local_100 = uVar50 + (int)lVar67 & 0xffffffc0;
      }
      local_b8 = uVar51;
      local_b0 = uVar51;
      local_a8 = uVar51;
      local_a0 = uVar51;
      local_98 = uVar51;
      local_90 = uVar51;
      local_88 = uVar51;
      local_80 = uVar51;
      get_surface_state(&local_b8,param_2,uVar58,iVar49,local_104,local_fc);
      if ((*(byte *)((long)param_2 + 0x3d) & 4) != 0) {
        local_b0 = local_b0 & 0xfffc0000ffffffff | (ulong)((int)param_2[7] - 1U & 0x3ffff) << 0x20;
      }
      uVar27 = local_b8 & 0x81ffffffffffffff;
      local_b8 = uVar27;
      if (((IGAccelResource *)param_2[8] != (IGAccelResource *)0x0) &&
         (local_b8 = (ulong)(*(uint *)(param_2 + 2) & 0x3f) << 0x39 | uVar27,
         (~*(uint *)(&g_cInitGfxMemoryInterfaceControlRegisters + (ulong)*(uint *)(param_2 + 2) * 4)
         & 0xc) == 0)) {
        local_b8 = uVar27 | 0x4200000000000000;
        IGAccelResource::updateMappingCacheType((IGAccelResource *)param_2[8],1);
      }
      auVar16 = _DAT_0010bff0;
      puVar39 = (ulong *)((long)puVar29 + lVar67 + 0x3f & 0xffffffffffffffc0);
      puVar39[7] = local_80;
      puVar39[6] = local_88;
      puVar39[5] = local_90;
      puVar39[4] = local_98;
      puVar39[3] = local_a0;
      puVar39[2] = local_a8;
      puVar39[1] = local_b0;
      *puVar39 = local_b8;
      lVar67 = (long)puVar39 - (long)puVar29;
      puVar42 = (uint *)((long)puVar29 + lVar67 + 0x43 & 0xfffffffffffffffc);
      *puVar42 = (int)uVar66 + uVar50 & 0xffffffc0;
      lVar52 = (long)puVar42 + (long)puVar39 + ((long)puVar29 * -2 - lVar67) + 4;
      if (bVar69 != false) {
        puVar42 = (uint *)((long)puVar29 + lVar52 + 3 & 0xfffffffffffffffc);
        *puVar42 = uVar35;
        lVar52 = (long)puVar42 + (4 - (long)puVar29);
      }
      puVar42 = (uint *)((long)puVar29 + lVar52 + 3 & 0xfffffffffffffffc);
      *puVar42 = local_100;
      puVar29[0x31] = (ulong)((int)lVar67 + uVar50 + 0x40 & 0xffe0) << 0x20 | 0x782a0000;
      plVar32 = puVar29 + 0x32;
      if (bVar19) {
        *(undefined4 *)(puVar29 + 0x33) = 0;
        puVar29[0x32] = 0x10027a000004;
        *(undefined4 *)((long)puVar29 + 0x1a4) = 0;
        *(undefined8 *)((long)puVar29 + 0x19c) = 0;
        plVar32 = puVar29 + 0x35;
      }
      if ((*(byte *)((long)param_2 + 0xa3) & 2) != 0) {
        if ((*(uint *)(lVar33 + 0xf6a) >> 0x15 & 1) != 0) {
          *plVar32 = uVar25 + 0x17c20401;
          *(uint *)(plVar32 + 1) = uVar48;
          plVar32 = (long *)((long)plVar32 + 0xc);
        }
        uVar27 = param_2[0x1f];
        *plVar32 = 0x240014800002;
        plVar32[1] = (uVar27 & 0x3fffffffffff) << 2;
        uVar27 = param_2[0x20];
        plVar32[2] = 0x240814800002;
        plVar32[3] = (uVar27 & 0x3fffffffffff) << 2;
        *(undefined4 *)(plVar32 + 4) = 0x60000c2;
        plVar32 = (long *)((long)plVar32 + 0x24);
      }
      uVar66 = (long)puVar42 + (0x43 - (long)puVar29) & 0xffffffffffffffc0;
      uVar27 = uVar51;
      uVar44 = uVar51;
      if (uVar68 != 0) {
        pfVar43 = (float *)(uVar66 + (long)puVar29);
        if (uVar65 < local_fc) {
          uVar65 = local_fc;
        }
        uVar65 = uVar65 - 1;
        fVar72 = (float)local_fc;
        uVar63 = uVar63 | 0x1c;
        uVar61 = uVar51;
        do {
          uVar9 = param_3[2];
          fVar83 = *(float *)((uVar9 - 4) + uVar63);
          if (((fVar83 == 0.0) && (!NAN(fVar83))) ||
             ((*(float *)(uVar9 + uVar63) == 0.0 && (!NAN(*(float *)(uVar9 + uVar63))))))
          goto LAB_000337e1;
          uVar47 = *(ushort *)((long)param_2 + 0xa4);
          auVar73._0_8_ =
               CONCAT44((float)(int)((ulong)*(undefined8 *)((long)param_2 + 0x14) >> 0x20),
                        (float)(int)*(undefined8 *)((long)param_2 + 0x14));
          auVar73._8_8_ = 0;
          auVar77 = *(undefined1 (*) [16])((uVar9 - 0xc) + uVar63);
          fVar83 = auVar77._0_4_;
          auVar81 = *(undefined1 (*) [16])((uVar9 - 0x1c) + uVar63);
          fVar80 = auVar81._0_4_;
          if (!bVar19) {
            fVar84 = *(float *)((uVar9 - 4) + uVar63);
            uVar57 = (ulong)fVar84;
            if ((uVar21 - 0x182 < 0xf) && ((0x6003U >> (uVar21 - 0x182 & 0x1f) & 1) != 0)) {
              uVar57 = uVar57 >> 1 & 0x7fffffff;
            }
            fVar89 = (float)((long)fVar83 & 0xffffffff);
            uVar44 = uVar61;
            if ((fVar83 != fVar89) || (NAN(fVar83) || NAN(fVar89))) break;
            if ((fVar84 != (float)(uVar57 & 0xffffffff)) ||
               (NAN(fVar84) || NAN((float)(uVar57 & 0xffffffff)))) break;
            fVar89 = (float)((long)fVar80 & 0xffffffff);
            if (((fVar80 != fVar89) || (NAN(fVar80) || NAN(fVar89))) ||
               (fVar89 = *(float *)((uVar9 - 0x14) + uVar63),
               fVar89 != (float)((long)fVar89 & 0xffffffff))) break;
            if (((((fVar84 != fVar89) || (NAN(fVar84) || NAN(fVar89))) ||
                 (auVar77._12_4_ != auVar81._12_4_)) ||
                ((((uint)uVar57 & uVar65) != 0 || (((uint)(long)fVar83 & uVar65) != 0)))) ||
               (((uint)(long)fVar80 & uVar65) != 0)) break;
            auVar85._8_8_ = 0;
            auVar85._0_8_ = auVar73._0_8_;
            auVar86._4_4_ = fVar72;
            auVar86._0_4_ = fVar72;
            auVar86._8_4_ = fVar72;
            auVar86._12_4_ = fVar72;
            auVar86 = divps(auVar85,auVar86);
            auVar73 = blendps(auVar73,auVar86,5);
            auVar10._4_4_ = fVar72;
            auVar10._0_4_ = fVar72;
            auVar10._8_4_ = fVar72;
            auVar10._12_4_ = fVar72;
            auVar86 = divps(auVar81,auVar10);
            auVar81 = blendps(auVar81,auVar86,5);
            auVar11._4_4_ = fVar72;
            auVar11._0_4_ = fVar72;
            auVar11._8_4_ = fVar72;
            auVar11._12_4_ = fVar72;
            auVar86 = divps(auVar77,auVar11);
            auVar77 = blendps(auVar77,auVar86,5);
          }
          fVar84 = auVar81._0_4_ + 0.0;
          fVar89 = auVar81._4_4_ + 0.0;
          auVar87._0_8_ = CONCAT44(fVar89,fVar84);
          auVar87._8_4_ = auVar81._0_4_ + auVar81._8_4_;
          auVar87._12_4_ = auVar81._4_4_ + auVar81._12_4_;
          auVar82._0_4_ = auVar77._0_4_ + 0.0;
          auVar82._4_4_ = auVar77._4_4_ + 0.0;
          fVar83 = auVar77._0_4_ + auVar77._8_4_;
          fVar80 = auVar77._4_4_ + auVar77._12_4_;
          auVar12._4_8_ = auVar77._8_8_;
          auVar12._0_4_ = fVar89;
          auVar81._0_8_ = auVar12._0_8_ << 0x20;
          auVar81._8_4_ = auVar87._8_4_;
          auVar81._12_4_ = auVar87._12_4_;
          pfVar43[4] = 0.0;
          pfVar43[5] = 0.0;
          *(long *)(pfVar43 + 6) = auVar81._8_8_;
          auVar78._4_4_ = fVar89;
          auVar78._0_4_ = fVar84;
          auVar78._8_4_ = auVar87._8_4_;
          auVar78._12_4_ = auVar87._12_4_;
          auVar77 = insertps(auVar78,auVar87,0x23);
          *(undefined1 (*) [16])(pfVar43 + 0xc) = auVar77;
          pfVar43[0x14] = 0.0;
          pfVar43[0x15] = 0.0;
          *(undefined8 *)(pfVar43 + 0x16) = auVar87._0_8_;
          auVar77._8_8_ = auVar73._0_8_;
          auVar77._0_8_ = auVar73._0_8_;
          lVar67 = param_2[0x16];
          auVar79._8_4_ = (int)lVar67;
          auVar79._0_8_ = lVar67;
          auVar79._12_4_ = (int)((ulong)lVar67 >> 0x20);
          auVar79 = auVar79 ^ auVar16;
          auVar77 = divps(auVar87,auVar77);
          fVar84 = auVar77._0_4_ + auVar79._0_4_;
          fVar89 = auVar77._4_4_ + auVar79._4_4_;
          auVar88._0_8_ = CONCAT44(fVar89,fVar84);
          auVar88._8_4_ = auVar77._8_4_ + auVar79._8_4_;
          auVar88._12_4_ = auVar77._12_4_ + auVar79._12_4_;
          switch(uVar47 - 0x20 >> 4 | (uint)uVar47 << 0x1c) {
          case 0:
            *pfVar43 = auVar82._0_4_;
            pfVar43[1] = fVar80;
            pfVar43[2] = auVar88._8_4_;
            pfVar43[3] = auVar88._12_4_;
            fVar76 = fVar83;
            goto LAB_000337ce;
          case 1:
            *pfVar43 = fVar83;
            pfVar43[1] = auVar82._4_4_;
            pfVar43[2] = auVar88._8_4_;
            pfVar43[3] = auVar88._12_4_;
            fVar76 = fVar80;
            goto LAB_000337b3;
          case 2:
            *pfVar43 = fVar83;
            pfVar43[1] = auVar82._4_4_;
            pfVar43[2] = auVar88._8_4_;
            pfVar43[3] = auVar88._12_4_;
            fVar83 = auVar82._0_4_;
            fVar76 = auVar82._4_4_;
LAB_000337b3:
            pfVar43[8] = fVar83;
            pfVar43[9] = fVar76;
            pfVar43[10] = fVar84;
            pfVar43[0xb] = auVar88._12_4_;
            auVar82._4_4_ = fVar80;
            auVar82._8_4_ = fVar84;
            auVar82._12_4_ = fVar89;
            break;
          case 3:
            *pfVar43 = auVar82._0_4_;
            pfVar43[1] = fVar80;
            pfVar43[2] = auVar88._8_4_;
            pfVar43[3] = auVar88._12_4_;
            fVar76 = auVar82._0_4_;
            fVar80 = auVar82._4_4_;
LAB_000337ce:
            pfVar43[8] = fVar76;
            pfVar43[9] = fVar80;
            pfVar43[10] = fVar84;
            pfVar43[0xb] = auVar88._12_4_;
            auVar82._0_4_ = fVar83;
            auVar82._8_4_ = fVar84;
            auVar82._12_4_ = fVar89;
            break;
          case 4:
            auVar13._4_8_ = auVar73._0_8_;
            auVar13._0_4_ = fVar89;
            auVar74._0_8_ = auVar13._0_8_ << 0x20;
            auVar74._8_4_ = auVar88._8_4_;
            auVar74._12_4_ = auVar88._12_4_;
            *(undefined8 *)pfVar43 = auVar82._0_8_;
            *(long *)(pfVar43 + 2) = auVar74._8_8_;
            pfVar43[8] = fVar83;
            pfVar43[9] = auVar82._4_4_;
            pfVar43[10] = fVar84;
            pfVar43[0xb] = auVar88._12_4_;
            auVar82._4_4_ = fVar80;
            auVar82._0_4_ = fVar83;
            auVar82._8_4_ = fVar84;
            auVar82._12_4_ = fVar89;
            break;
          default:
            auVar14._4_8_ = auVar73._0_8_;
            auVar14._0_4_ = auVar82._4_4_;
            auVar75._0_8_ = auVar14._0_8_ << 0x20;
            auVar75._8_4_ = fVar83;
            auVar75._12_4_ = fVar80;
            *(long *)pfVar43 = auVar75._8_8_;
            *(long *)(pfVar43 + 2) = auVar88._8_8_;
            pfVar43[8] = auVar82._0_4_;
            pfVar43[9] = fVar80;
            pfVar43[10] = fVar84;
            pfVar43[0xb] = auVar88._12_4_;
            auVar82._8_8_ = auVar88._0_8_;
          }
          *(undefined1 (*) [16])(pfVar43 + 0x10) = auVar82;
          uVar27 = uVar27 + 1;
          pfVar43 = pfVar43 + 0x18;
LAB_000337e1:
          uVar61 = uVar61 + 1;
          uVar63 = uVar63 + 0x20;
          uVar44 = uVar68;
        } while (uVar61 < uVar68);
      }
      *plVar32 = 0xa402078080003;
      plVar32[1] = uVar30 + uVar66;
      *(int *)(plVar32 + 2) = (int)uVar27 * 0x60;
      local_68 = 0;
      uVar35 = *(ushort *)((long)param_2 + 0xa2) >> 1 & 0x100;
      if ((*(ushort *)((long)param_2 + 0xa2) >> 0xb & 1) == 0) {
        *(undefined4 *)((long)plVar32 + 0x14) = 0;
        plVar32[3] = (ulong)(ushort)uVar35 | 0x7b000008;
        *(int *)(plVar32 + 4) = (int)uVar44 * 3;
        *(undefined8 *)((long)plVar32 + 0x24) = 0x100000000;
        *(undefined4 *)((long)plVar32 + 0x3c) = 0;
        *(undefined8 *)((long)plVar32 + 0x2c) = 0;
        *(undefined8 *)((long)plVar32 + 0x34) = 0;
        plVar32 = plVar32 + 8;
      }
      else {
        plVar32 = (long *)((long)plVar32 + 0x14);
        if (uVar44 != 0) {
          uVar50 = 1;
          iVar49 = 0;
          do {
            *(undefined4 *)plVar32 = 0;
            *(ulong *)((long)plVar32 + 4) = (ulong)uVar35 | 0x7b000008;
            *(undefined4 *)((long)plVar32 + 0xc) = 3;
            *(int *)(plVar32 + 2) = iVar49;
            *(undefined4 *)((long)plVar32 + 0x14) = 1;
            plVar32[3] = 0;
            plVar32[4] = 0;
            *(undefined4 *)(plVar32 + 5) = 0;
            *(undefined4 *)((long)plVar32 + 0x34) = uVar20;
            *(undefined8 *)((long)plVar32 + 0x2c) = 0x1050217a000004;
            *(uint *)(plVar32 + 7) = uVar15;
            *(undefined8 *)((long)plVar32 + 0x3c) = 0;
            uVar31 = 0x6c1c7a000004;
            if ((*(byte *)(lVar33 + 0xf4a) & 8) == 0) {
              uVar31 = 0x4c1c7a000004;
            }
            *(undefined4 *)((long)plVar32 + 0x4c) = uVar20;
            *(undefined8 *)((long)plVar32 + 0x44) = uVar31;
            *(uint *)(plVar32 + 10) = uVar15;
            *(undefined8 *)((long)plVar32 + 0x54) = 0;
            if ((*(uint *)(lVar33 + 0xf52) >> 0x15 & 1) == 0) {
              plVar32 = (long *)((long)plVar32 + 0x5c);
            }
            else {
              *(ulong *)((long)plVar32 + 0x5c) = uVar26;
              *(uint *)((long)plVar32 + 100) = uVar48;
              plVar32[0xd] = 0;
              plVar32[0xe] = uVar26;
              *(uint *)(plVar32 + 0xf) = uVar48;
              *(undefined8 *)((long)plVar32 + 0x7c) = 0;
              *(ulong *)((long)plVar32 + 0x84) = uVar26;
              *(uint *)((long)plVar32 + 0x8c) = uVar48;
              plVar32[0x12] = 0;
              plVar32[0x13] = uVar26;
              *(uint *)(plVar32 + 0x14) = uVar48;
              *(undefined8 *)((long)plVar32 + 0xa4) = 0;
              *(ulong *)((long)plVar32 + 0xac) = uVar26;
              *(uint *)((long)plVar32 + 0xb4) = uVar48;
              plVar32[0x17] = 0;
              plVar32[0x18] = uVar26;
              *(uint *)(plVar32 + 0x19) = uVar48;
              *(undefined8 *)((long)plVar32 + 0xcc) = 0;
              *(ulong *)((long)plVar32 + 0xd4) = uVar26;
              *(uint *)((long)plVar32 + 0xdc) = uVar48;
              plVar32[0x1c] = 0;
              plVar32[0x1d] = uVar26;
              *(uint *)(plVar32 + 0x1e) = uVar48;
              *(undefined8 *)((long)plVar32 + 0xf4) = 0;
              plVar32 = (long *)((long)plVar32 + 0xfc);
            }
            uVar27 = (ulong)uVar50;
            uVar50 = uVar50 + 1;
            iVar49 = iVar49 + 3;
          } while (uVar27 < uVar44);
        }
      }
      if (!bVar19) {
        if ((*(uint *)(lVar33 + 0xfce) >> 0x11 & 1) != 0) {
          *(undefined4 *)(plVar32 + 1) = 0;
          *plVar32 = 0x807a000004;
          *(undefined8 *)((long)plVar32 + 0xc) = 0;
          *(undefined4 *)((long)plVar32 + 0x14) = 0;
          plVar32 = plVar32 + 3;
        }
        lVar67 = 0x10027a000004;
        if ((*(byte *)(lVar33 + 0xf4a) & 8) == 0) {
          lVar67 = 0x10007a000004;
        }
        *(undefined4 *)(plVar32 + 1) = 0;
        *plVar32 = lVar67;
        *(undefined8 *)((long)plVar32 + 0xc) = 0;
        *(undefined4 *)((long)plVar32 + 0x14) = 0;
        plVar32 = plVar32 + 3;
      }
      local_78 = 0;
      uVar44 = uVar44 + uVar55;
      *plVar32 = 0x5000000;
      local_70 = uVar51;
      IOAccelCommandBufferPool2::setBufferPtr(puVar8);
    }
    local_c8 = 0;
    if (_graphicsTracePointEnable != 0) {
      if (uVar55 < uVar44) {
        lVar67 = uVar44 - uVar55;
        do {
          lVar67 = lVar67 + -1;
        } while (lVar67 != 0);
      }
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        if (uVar55 < uVar44) {
          lVar33 = uVar44 - uVar55;
          pfVar43 = (float *)(uVar55 * 0x20 + param_3[2] + 0xc);
          lVar67 = local_c8;
          do {
            fVar72 = pfVar43[-1] * *pfVar43 * (float)*(byte *)(param_2 + 0x14);
            uVar55 = (ulong)fVar72;
            lVar67 = lVar67 + (((long)(fVar72 - 9.223372e+18) & (long)uVar55 >> 0x3f | uVar55) >> 10
                              );
            iVar49 = (int)lVar67;
            pfVar43 = pfVar43 + 8;
            lVar33 = lVar33 + -1;
          } while (lVar33 != 0);
        }
        else {
          iVar49 = 0;
        }
        _kernel_debug(0x85a00074,0,(ulong)((int)plVar7[0x2f] + 1),0,(long)iVar49,0);
      }
    }
    IOAccelCommandBufferPool2::submitBuffer();
    *(undefined8 *)(*(long *)(lVar5 + 0x1860) + 0x48) = 0;
    lVar67 = param_2[0x1b];
    if (lVar67 != 0) {
      do {
        (**(code **)(*plVar7 + 0x140))(plVar7,*(undefined8 *)(param_2[0x1d] + local_c8 * 8));
        local_c8 = local_c8 + 1;
      } while (lVar67 != local_c8);
    }
    uVar55 = uVar44;
    if (uVar4 <= uVar44) {
      if (*(long *)__got::___stack_chk_guard == local_38) {
        return;
      }
                    // WARNING: Subroutine does not return
      ___stack_chk_fail();
    }
  } while( true );
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 5;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3b != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// blit2d_supported_dimensions(surface_params_t const&)

undefined4 __cdecl blit2d_supported_dimensions(int *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  
  uVar1 = param_1[2];
  uVar3 = uVar1 >> 2;
  if ((char)param_1[3] == '\0') {
    if ((uVar1 & 3) != 0) {
      return 0;
    }
    uVar2 = *param_1 + param_1[0xb] & 0x3f;
    uVar3 = uVar1;
  }
  else {
    if ((uVar1 & 0x3f) != 0) {
      return 0;
    }
    uVar2 = *param_1 + param_1[0xb] & 0xfff;
  }
  if (uVar2 != 0) {
    return 0;
  }
  return CONCAT31((int3)(uVar3 >> 8),uVar3 < 0x7fff);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// get_surface_state(surface_params_t const&, unsigned int, blit_flags_t const&, unsigned int,
// Blt3DOptMode, unsigned int)

ulong * __cdecl
get_surface_state(ulong *param_1,long *param_2,uint param_3,int param_4,int param_5,uint param_6)

{
  int iVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  ushort uVar5;
  byte bVar6;
  char cVar7;
  ushort uVar8;
  uint uVar9;
  byte bVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  ulong uVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  ulong uVar18;
  ulong uVar19;
  int iVar20;
  uint uVar21;
  char cVar22;
  uint uVar23;
  uint uVar24;
  char cVar25;
  ulong uVar26;
  bool bVar27;
  uint local_78 [16];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  *param_1 = 0;
  param_1[3] = 0;
  param_1[7] = 0;
  param_1[6] = 0;
  param_1[5] = 0;
  param_1[4] = 0;
  param_1[2] = 0;
  param_1[1] = 0;
  *(undefined2 *)((long)param_1 + 1) = 0x1d40;
  *(undefined1 *)((long)param_1 + 3) = 0xe3;
  *(undefined1 *)((long)param_1 + 7) = 0x80;
  *(undefined2 *)((long)param_1 + 0x1e) = 0x977;
  iVar20 = 0;
  if (param_6 != 0) {
    for (; (param_6 >> iVar20 & 1) == 0; iVar20 = iVar20 + 1) {
    }
  }
  bVar10 = 0xff;
  if (param_6 != 0) {
    bVar10 = (byte)iVar20;
  }
  uVar9 = *(uint *)(param_2 + 3);
  bVar2 = *(byte *)((long)param_2 + 0xd);
  uVar26 = *param_1 | 0x20000000;
  if (bVar2 == 1 && uVar9 == 1) {
    uVar26 = *param_1 & 0xffffffff1fffffff;
  }
  param_1[4] = (ulong)*(uint *)((long)param_2 + 0x2c) + *param_2;
  uVar15 = *(uint *)((long)param_2 + 0x1c);
  uVar23 = (uVar15 & 0x7ff) << 0x12;
  *(uint *)(param_1 + 2) = uVar23;
  uVar18 = (ulong)uVar15 << 0x35;
  uVar19 = uVar26 & 0xffffffff3fffffff;
  if (param_5 == 0) {
    uVar19 = uVar26 & 0xffffffff3803ffff | (ulong)((param_3 & 0x1ff) << 0x12);
    uVar15 = *(uint *)((long)param_2 + 0x14);
LAB_0003421b:
    uVar18 = (ulong)((int)param_2[1] - 1U & 0x3ffff) << 0x20 |
             (ulong)(uVar9 - 1 & 0x3fff) << 0x10 | uVar15 - 1 & 0x3fff | uVar18;
    *param_1 = uVar19;
    param_1[1] = uVar18;
  }
  else if ((param_5 == 1) || (param_5 == 2)) {
    uVar19 = uVar26 & 0xffffffff3803ffff | (ulong)((param_3 & 0x1ff) << 0x12);
    uVar15 = *(uint *)((long)param_2 + 0x14) >> (bVar10 & 0x1f);
    goto LAB_0003421b;
  }
  bVar10 = *(byte *)((long)param_2 + 0xc);
  uVar14 = (ulong)((bVar10 & 3) << 0xc);
  uVar26 = *(ulong *)((long)param_1 + 0x14);
  *(ulong *)((long)param_1 + 0x14) = uVar26 & 0xfffffffffff3ffff | (ulong)((bVar10 & 0xc) << 0x10);
  if (1 < bVar2) {
    switch(bVar2 - 2 >> 1 | (uint)bVar2 << 0x1f) {
    case 0:
      uVar23 = uVar23 | 8;
      break;
    case 1:
      uVar23 = uVar23 | 0x10;
      break;
    case 3:
      uVar23 = uVar23 | 0x18;
      break;
    case 7:
      uVar23 = uVar23 | 0x20;
    }
    uVar15 = uVar23 | 2;
    if ((*(byte *)((long)param_2 + 0x3d) & 6) != 0) {
      uVar15 = uVar23 | 0x42;
    }
    *(uint *)(param_1 + 2) = uVar15;
  }
  bVar3 = *(byte *)((long)param_2 + 0x3d);
  if ((param_4 == 0) && ((bVar3 & 6) == 0)) {
    uVar19 = uVar19 & 0xfffffffffffc0fff | uVar14 | 0x14000;
    goto LAB_00034955;
  }
  bVar4 = *(byte *)((long)param_2 + 0x3c);
  uVar5 = *(ushort *)((long)param_2 + 0xe);
  uVar15 = uVar5 >> 6 & 0xf;
  local_78[0xc] = 0;
  local_78[0xd] = 0;
  local_78[10] = 0;
  local_78[0xb] = 0;
  local_78[8] = 0;
  local_78[9] = 0;
  local_78[6] = 0;
  local_78[7] = 0;
  local_78[0] = 0x80;
  local_78[1] = 0x60;
  local_78[2] = 0x40;
  local_78[3] = 0x20;
  local_78[4] = 0x10;
  local_78[5] = 8;
  cVar7 = (char)local_78[uVar15];
  if ((bVar3 & 2) == 0) {
    uVar23 = bVar2 - 2 >> 1;
    cVar25 = ((bVar10 == 3 && cVar7 == ' ') && bVar2 == 1) * '\x04' + '\x04';
    if (bVar4 < 2) {
      cVar25 = '\x04';
    }
    cVar22 = '\x04';
    if ((0x8bU >> (uVar23 & 0x1f) & 1) == 0) {
      cVar22 = cVar25;
    }
    if (7 < (uVar23 | (uint)bVar2 << 0x1f)) {
      cVar22 = cVar25;
    }
    cVar25 = '\b';
    if ((bVar3 & 4) == 0) {
      cVar25 = cVar22;
    }
    iVar20 = (bVar3 & 4) + 4;
  }
  else {
    iVar20 = 4;
    if ((uVar5 - 0x10a < 5) || (uVar5 == 5)) {
      cVar25 = '\b';
    }
    else {
      cVar25 = '\x04';
    }
  }
  uVar23 = local_78[uVar15] & 0xff;
  if (bVar10 == 0xb) {
    if (cVar7 == '\0') {
      iVar20 = 0x40;
      uVar11 = 0x10000;
      iVar17 = 1;
      if ((uVar5 >> 9 & 1) == 0) {
        iVar20 = 0x100;
        if ((ushort)(uVar5 - 0x180) < 0x25) {
          iVar20 = *(int *)(&DAT_00112e64 + (long)(short)(uVar5 - 0x180) * 4);
        }
      }
    }
    else {
      iVar20 = 0x100;
      uVar11 = 0x10000;
      iVar17 = 1;
      if (8 < uVar23) {
        iVar20 = (uint)(uVar23 < 0x21) * 0x40 + 0x40;
      }
    }
  }
  else if (bVar10 == 7) {
    if (cVar7 == '\0') {
      iVar20 = 0x10;
      uVar11 = 0x30000;
      iVar17 = 3;
      if ((uVar5 >> 9 & 1) == 0) {
        iVar20 = 0x40;
        uVar11 = 0x10000;
        iVar17 = 1;
        uVar8 = (ushort)(uVar5 - 0x180);
        if ((uVar8 < 0x25) &&
           (iVar17 = 1, (0x1e06023fc1U >> ((ulong)(uVar5 - 0x180 & 0xffff) & 0x3f) & 1) != 0)) {
          iVar17 = *(int *)(&DAT_00112dd0 + (long)(short)uVar8 * 4);
          uVar11 = 0x30000;
          iVar20 = 0x10;
        }
      }
    }
    else {
      iVar20 = 0x40;
      uVar11 = 0x10000;
      iVar17 = 1;
      if ((8 < uVar23) && (iVar20 = 0x20, 0x20 < uVar23)) {
        iVar17 = (uint)(0x40 < uVar23) * 2 + 1;
        iVar20 = 0x10;
        uVar11 = 0x30000;
      }
    }
  }
  else {
    iVar17 = (cVar25 == '\b') + 1;
    uVar11 = (uint)(iVar20 == 8) * 0x10000 + 0x10000;
  }
  if ((bVar2 < 2) || ((bVar3 & 6) == 0)) {
    bVar27 = true;
    if ((bVar3 & 8) == 0) {
      if ((uVar5 >> 9 & 1) == 0) {
        uVar15 = uVar5 - 0x186;
        if ((ushort)uVar15 < 0x1f) {
          bVar27 = (0x781808ffU >> (uVar15 & 0x1f) & 1) != 0;
        }
        else {
          bVar27 = false;
        }
      }
      iVar1 = iVar20 + -1;
      uVar21 = -iVar20;
      uVar15 = 0;
      if (bVar4 < 2) {
        uVar23 = 0;
      }
      else {
        uVar23 = uVar9 >> 1;
        if (uVar9 < 2) {
          uVar23 = 1;
        }
        uVar23 = uVar23 + iVar1 & uVar21;
        if (bVar4 != 2) {
          uVar15 = 0;
          uVar12 = 2;
          do {
            bVar10 = (byte)uVar12 & 0x1f;
            uVar13 = uVar9 >> bVar10;
            if (uVar9 >> bVar10 == 0) {
              uVar13 = 1;
            }
            uVar16 = uVar13 + 3 >> 2;
            if (!bVar27) {
              uVar16 = uVar13;
            }
            uVar15 = uVar15 + (uVar16 + iVar1 & uVar21);
            uVar12 = uVar12 + 1;
          } while (bVar4 != uVar12);
        }
      }
      uVar12 = uVar9 + 3 >> 2;
      if (!bVar27) {
        uVar12 = uVar9;
      }
      if (uVar15 < uVar23) {
        uVar15 = uVar23;
      }
      uVar21 = (uVar12 + iVar1 & uVar21) + iVar1 + uVar15 & uVar21;
    }
    else {
      if ((uVar5 >> 9 & 1) == 0) {
        uVar23 = uVar5 - 0x186;
        if ((ushort)uVar23 < 0x1f) {
          bVar27 = (0x781808ffU >> (uVar23 & 0x1f) & 1) != 0;
        }
        else {
          bVar27 = false;
        }
      }
      iVar1 = iVar20 + -1;
      uVar21 = -iVar20;
      uVar23 = 0;
      if (bVar4 < 2) {
        uVar12 = 0;
      }
      else {
        uVar12 = uVar9 >> 1;
        if (uVar9 < 2) {
          uVar12 = 1;
        }
        uVar12 = uVar12 + iVar1 & uVar21;
        if (bVar4 != 2) {
          uVar23 = 0;
          uVar13 = 2;
          do {
            bVar6 = (byte)uVar13 & 0x1f;
            uVar16 = uVar9 >> bVar6;
            if (uVar9 >> bVar6 == 0) {
              uVar16 = 1;
            }
            uVar24 = uVar16 + 3 >> 2;
            if (!bVar27) {
              uVar24 = uVar16;
            }
            uVar23 = uVar23 + (uVar24 + iVar1 & uVar21);
            uVar13 = uVar13 + 1;
          } while (bVar4 != uVar13);
        }
      }
      uVar13 = uVar9 + 3 >> 2;
      if (!bVar27) {
        uVar13 = uVar9;
      }
      if (uVar23 < uVar12) {
        uVar23 = uVar12;
      }
      uVar21 = (uVar13 + iVar1 & uVar21) + iVar1 + uVar23 & uVar21;
      uVar9 = (uint)bVar10;
      if (uVar9 != 0) {
        local_78[0xc] = 0;
        local_78[0xd] = 0;
        local_78[10] = 0;
        local_78[0xb] = 0;
        local_78[8] = 0;
        local_78[9] = 0;
        local_78[6] = 0;
        local_78[7] = 0;
        local_78[0] = 0x80;
        local_78[1] = 0x60;
        local_78[2] = 0x40;
        local_78[3] = 0x20;
        local_78[4] = 0x10;
        local_78[5] = 8;
        if (uVar9 - 1 < 0xb) {
          uVar15 = local_78[uVar15] >> 3 & 0x1f;
          iVar20 = 8;
          switch(uVar9) {
          case 1:
            iVar20 = 0x40;
            break;
          case 2:
            break;
          case 3:
            iVar20 = 0x20;
            break;
          default:
            goto switchD_000348bb_caseD_4;
          case 7:
            iVar20 = 0x40;
            if (1 < uVar15) {
              iVar20 = (uint)(uVar15 < 5) * 0x10 + 0x10;
            }
            break;
          case 0xb:
            iVar20 = 0x100;
            if (1 < uVar15) {
              iVar20 = (uint)(uVar15 < 5) * 0x40 + 0x40;
            }
          }
        }
        else {
switchD_000348bb_caseD_4:
          iVar20 = 1;
        }
        uVar21 = -iVar20 & (uVar21 + iVar20) - 1;
      }
    }
  }
  else {
    if (bVar2 == 4) {
LAB_0003450f:
      uVar15 = 1;
      if (1 < uVar9) {
        uVar15 = uVar9;
      }
      uVar9 = uVar15 * 2 + 2 & 0xfffffffc;
    }
    else if (bVar2 == 0x10) {
      uVar15 = 1;
      if (1 < uVar9) {
        uVar15 = uVar9;
      }
      uVar9 = uVar15 * 4 + 4 & 0xfffffff8;
    }
    else if (bVar2 == 8) goto LAB_0003450f;
    uVar21 = -iVar20 & (uVar9 + iVar20) - 1;
  }
  local_78[0xc] = 0;
  local_78[0xd] = 0;
  local_78[10] = 0;
  local_78[0xb] = 0;
  local_78[8] = 0;
  local_78[9] = 0;
  local_78[6] = 0;
  local_78[7] = 0;
  local_78[4] = 0x10;
  local_78[5] = 8;
  local_78[2] = 0x40;
  local_78[3] = 0x20;
  local_78[0] = 0x80;
  local_78[1] = 0x60;
  uVar19 = ((ulong)(uint)(iVar17 << 0xe) & 0xffff |
           uVar19 & 0xffff8000effc0fff | uVar14 | (ulong)uVar11) +
           ((ulong)(uVar21 >> 2 & 0x7fff) << 0x20) + 0x10000000;
LAB_00034955:
  *param_1 = uVar19;
  param_1[1] = uVar18;
  if (param_2[4] != 0) {
    uVar18 = param_2[4] & 0xfffffffffffff000;
    param_1[5] = uVar18;
    *(uint *)(param_1 + 3) =
         ((uint)(uVar26 >> 0x20) & 0xfffff000) + (uint)(bVar2 < 2 & bVar3) * 4 +
         (((int)param_2[5] + 0x7fU >> 4) + 0xff8 & 0xff8) + 1;
    uVar26 = param_2[6];
    if (uVar26 != 0) {
      param_1[5] = uVar18 | 0x400;
      param_1[6] = uVar26 & 0xffffffffffc0 | 0x20;
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return param_1;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  long lVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar5 = param_1 << 5;
    if (lVar5 < 0) {
      lVar5 = -0x8000000000000000;
    }
    if (param_1 >> 0x3b != 0) {
      lVar5 = -0x8000000000000000;
    }
    lVar5 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar5);
    if (lVar5 != 0) {
      lVar2 = *(long *)(this + 0x10);
      lVar4 = lVar5;
      if (lVar2 != 0) {
        if (*(long *)this != 0) {
          lVar2 = 0;
          uVar3 = 0;
          do {
            lVar4 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar5 + 0x18 + lVar2) = *(undefined8 *)(lVar4 + 0x18 + lVar2);
            *(undefined8 *)(lVar5 + 0x10 + lVar2) = *(undefined8 *)(lVar4 + 0x10 + lVar2);
            uVar1 = *(undefined8 *)(lVar4 + lVar2);
            *(undefined8 *)(lVar5 + 8 + lVar2) = *(undefined8 *)(lVar4 + 8 + lVar2);
            *(undefined8 *)(lVar5 + lVar2) = uVar1;
            uVar3 = uVar3 + 1;
            lVar2 = lVar2 + 0x20;
          } while (uVar3 < *(ulong *)this);
          lVar2 = *(long *)(this + 0x10);
        }
        lVar4 = *(ulong *)(this + 8) << 5;
        if (lVar4 < 0) {
          lVar4 = -0x8000000000000000;
        }
        if (0x7ffffffffffffff < *(ulong *)(this + 8)) {
          lVar4 = -0x8000000000000000;
        }
        lVar4 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(rect_pair_t*,unsigned_long)::kalloc_type_view_29,
                                   lVar2,lVar4);
      }
      *(long *)(this + 0x10) = lVar5;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar4 >> 8),1);
    }
  }
  return 0;
}



// IGAccelVideoContextMain::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextMain::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextMain",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextMain::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextMain::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelVideoContextMain::IGAccelVideoContextMain(OSMetaClass const*)

void __thiscall
IGAccelVideoContextMain::IGAccelVideoContextMain(IGAccelVideoContextMain *this,OSMetaClass *param_1)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextMain;
  return;
}



// IGAccelVideoContextMain::IGAccelVideoContextMain(OSMetaClass const*)

void __thiscall
IGAccelVideoContextMain::IGAccelVideoContextMain(IGAccelVideoContextMain *this,OSMetaClass *param_1)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextMain;
  return;
}



// IGAccelVideoContextMain::~IGAccelVideoContextMain()

void __thiscall IGAccelVideoContextMain::~IGAccelVideoContextMain(IGAccelVideoContextMain *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextMain::~IGAccelVideoContextMain()

void __thiscall IGAccelVideoContextMain::~IGAccelVideoContextMain(IGAccelVideoContextMain *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextMain::~IGAccelVideoContextMain()

void __thiscall IGAccelVideoContextMain::~IGAccelVideoContextMain(IGAccelVideoContextMain *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  _OSObject_typed_operator_delete(&IGAccelVideoContextMain_ktv,this,0x13c8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMain::operator delete(void*, unsigned long)

void __cdecl IGAccelVideoContextMain::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelVideoContextMain_ktv,param_1,param_2);
  return;
}



// IGAccelVideoContextMain::getMetaClass() const

undefined8 * IGAccelVideoContextMain::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelVideoContextMain::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextMain::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextMain",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextMain::MetaClass::alloc() const

IGAccelVideoContext * IGAccelVideoContextMain::MetaClass::alloc(void)

{
  IGAccelVideoContext *this;
  
  this = (IGAccelVideoContext *)_OSObject_typed_operator_new(&IGAccelVideoContextMain_ktv,0x13c8);
  IGAccelVideoContext::IGAccelVideoContext(this,(OSMetaClass *)&IGAccelVideoContextMain::gMetaClass)
  ;
  *(undefined ***)this = &__const::~IGAccelVideoContextMain;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelVideoContextMain::operator new(unsigned long)

void * __thiscall IGAccelVideoContextMain::operator_new(IGAccelVideoContextMain *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelVideoContextMain_ktv,this);
  return pvVar1;
}



// IGAccelVideoContextMain::IGAccelVideoContextMain()

void __thiscall IGAccelVideoContextMain::IGAccelVideoContextMain(IGAccelVideoContextMain *this)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextMain;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContextMain::IGAccelVideoContextMain()

void __thiscall IGAccelVideoContextMain::IGAccelVideoContextMain(IGAccelVideoContextMain *this)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextMain;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContextMain::contextStart()

void __thiscall IGAccelVideoContextMain::contextStart(IGAccelVideoContextMain *this)

{
  undefined4 uVar1;
  
  uVar1 = IGAccelVideoContext::contextStart((IGAccelVideoContext *)this);
  if ((char)uVar1 != '\0') {
    *(undefined ***)(this + 0x13b8) = &contextStart()::token_process_methods;
    *(undefined ***)(this + 0x13c0) = &contextStart()::token_discard_methods;
  }
  return;
}



// IGAccelVideoContextMain::process_token_VPHAL(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::process_token_VPHAL(IGAccelVideoContextMain *this,long *param_1)

{
  uint uVar1;
  char cVar2;
  bool bVar3;
  long lVar4;
  long lVar5;
  OSMetaClassBase *pOVar6;
  undefined8 local_50;
  long local_48;
  long *local_40;
  undefined4 local_34;
  
  local_48 = 0;
  local_40 = (long *)0x0;
  local_34 = 0;
  local_50 = 0;
  lVar5 = param_1[3];
  if (*(uint **)(this + 0x628) < (uint *)(lVar5 + 0x14)) {
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    patch_vphal_command_buffer(this,param_1,(uint *)(lVar5 + 0x14));
    if (*(char *)((long)param_1 + 0x3c) != '\0') {
      cVar2 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,*(undefined4 *)(lVar5 + 0xc),&local_48,&local_50,&local_34,0);
      if (cVar2 != '\0') {
        pOVar6 = *(OSMetaClassBase **)(local_48 + 0x88);
        if (pOVar6 == (OSMetaClassBase *)0x0) {
          pOVar6 = *(OSMetaClassBase **)(local_48 + 0x80);
        }
        bVar3 = IGAccelVideoContext::map_memory((long *)&local_40,pOVar6);
        if (bVar3) {
          lVar4 = (**(code **)(*local_40 + 0x118))();
          uVar1 = *(uint *)(lVar5 + 0x10);
          lVar5 = (**(code **)(*local_40 + 0x128))();
          patch_vphal_ssh_instance
                    (this,(long)param_1,lVar4,(uint *)((ulong)uVar1 + lVar4),(uint *)(lVar5 + lVar4)
                    );
          IGAccelVideoContext::unmap_memory((long *)&local_40);
        }
      }
    }
  }
  return;
}



// IGAccelVideoContextMain::process_token_Scaling(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::process_token_Scaling(IGAccelVideoContextMain *this,long *param_1)

{
  patch_encoding_common(this,param_1,1);
  return;
}



// IGAccelVideoContextMain::process_token_HME(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::process_token_HME(IGAccelVideoContextMain *this,long *param_1)

{
  patch_encoding_common(this,param_1,2);
  return;
}



// IGAccelVideoContextMain::process_token_Enc(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::process_token_Enc(IGAccelVideoContextMain *this,long *param_1)

{
  patch_encoding_common(this,param_1,0);
  return;
}



// IGAccelVideoContextMain::process_token_MediaKernel(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::process_token_MediaKernel(IGAccelVideoContextMain *this,long *param_1)

{
  long lVar1;
  char cVar2;
  bool bVar3;
  uint uVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  OSMetaClassBase *pOVar8;
  long lVar9;
  undefined4 *puVar10;
  long local_88;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  int local_44;
  long *local_40;
  IGAccelResource *local_38;
  
  lVar1 = param_1[3];
  if (*(ulong *)(this + 0x628) < lVar1 + 0x90U) {
LAB_00034e7f:
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    *(undefined8 *)(this + 0x1380) = *(undefined8 *)(lVar1 + 8);
    *(undefined8 *)(this + 5000) = *(undefined8 *)(lVar1 + 0x10);
    if (*(int *)(lVar1 + 0x18) != 0) {
      local_88 = lVar1 + 0x34;
      uVar4 = 0;
      do {
        local_40 = (long *)0x0;
        local_38 = (IGAccelResource *)0x0;
        local_68 = 0;
        local_50 = 0;
        local_60 = 0;
        local_44 = 0;
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar1 + 0x20 + (ulong)uVar4 * 0x38),
                           &local_38,&local_50,&local_44,0);
        if (cVar2 == '\0') {
          return;
        }
        lVar9 = (ulong)uVar4 * 0x38 + lVar1 + 0x20;
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar9 + 4),&local_38,&local_60,&local_44,0);
        if (cVar2 == '\0') {
          return;
        }
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar9 + 8),&local_38,&local_68,&local_44,0);
        if (cVar2 == '\0') {
          return;
        }
        pOVar8 = *(OSMetaClassBase **)(local_38 + 0x88);
        if (pOVar8 == (OSMetaClassBase *)0x0) {
          pOVar8 = *(OSMetaClassBase **)(local_38 + 0x80);
        }
        bVar3 = IGAccelVideoContext::map_memory((long *)&local_40,pOVar8);
        if (!bVar3) {
          return;
        }
        lVar5 = (**(code **)(*local_40 + 0x118))();
        lVar6 = (**(code **)(*local_40 + 0x118))();
        lVar7 = (**(code **)(*local_40 + 0x128))();
        if ((ulong)(lVar7 + lVar6) < lVar5 + 0x240U) {
          *(undefined1 *)((long)param_1 + 0x3c) = 0;
          return;
        }
        puVar10 = (undefined4 *)(lVar5 + 100);
        lVar5 = 0;
        do {
          if ((*(ushort *)(puVar10 + -7) & 0x3fff) != 0) {
            local_58 = 0;
            cVar2 = (**(code **)(*(long *)this + 0xb78))
                              (this,param_1,puVar10[-1],&local_38,&local_58,&local_44,
                               *(int *)(local_88 + lVar5 * 4) != 0);
            if (cVar2 == '\0') {
              return;
            }
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_38);
            puVar10[-1] = (undefined4)local_58;
            *puVar10 = local_58._4_4_;
            if ((puVar10[-9] & 0xe0000000) == 0x20000000) {
              puVar10[-6] = puVar10[-6] & 0xfffc0000 | local_44 - 1U & 0x3ffff;
            }
          }
          lVar5 = lVar5 + 1;
          puVar10 = puVar10 + 0x10;
        } while (lVar5 != 8);
        IGAccelVideoContext::unmap_memory((long *)&local_40);
        if ((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] <
            *param_1 + (ulong)*(uint *)(lVar9 + 0xc) * 4 + 0x40) goto LAB_00034e7f;
        lVar9 = *param_1 + (ulong)*(uint *)(lVar9 + 0xc) * 4;
        *(uint *)(lVar9 + 0x18) = (uint)local_50 & 0xfffff000 | 1;
        *(undefined4 *)(lVar9 + 0x1c) = local_50._4_4_;
        *(uint *)(lVar9 + 0x10) = (uint)local_68 & 0xfffff000 | 1;
        *(undefined4 *)(lVar9 + 0x14) = local_68._4_4_;
        *(uint *)(lVar9 + 0x28) = (uint)local_60 & 0xfffff000 | 1;
        *(undefined4 *)(lVar9 + 0x2c) = local_60._4_4_;
        uVar4 = uVar4 + 1;
        local_88 = local_88 + 0x38;
      } while (uVar4 < *(uint *)(lVar1 + 0x18));
    }
  }
  return;
}



// IGAccelVideoContextMain::discard_token_Noop(IOAccelCommandStreamInfo&)

void IGAccelVideoContextMain::discard_token_Noop(void)

{
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMain::contextStop()

void __cdecl IGAccelVideoContextMain::contextStop(IGAccelVideoContext *param_1)

{
  IGAccelVideoContext::contextStop(param_1);
  return;
}



// IGAccelVideoContextMain::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelVideoContextMain::getTargetAndMethodForIndex
          (IGAccelVideoContextMain *this,undefined8 *param_1,int param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 == 0x103) {
    return *(long *)(this + 0x13b0);
  }
  lVar1 = IGAccelVideoContext::getTargetAndMethodForIndex
                    ((IGAccelVideoContext *)this,param_1,param_2);
  return lVar1;
}



// IntelAccelerator::transcodeActiveTimerPing()

void __thiscall IntelAccelerator::transcodeActiveTimerPing(IntelAccelerator *this)

{
  if (*(long *)(this + 0x1460) != 0) {
    this[0xde0] = (IntelAccelerator)0x1;
    sendTranscodeActive(this,1);
                    // WARNING: Could not recover jumptable at 0x000351d6. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(**(long **)(this + 0x1460) + 0x1d0))(*(long **)(this + 0x1460),500);
    return;
  }
  return;
}



// IntelAccelerator::transcodeActiveTimerFired()

void __thiscall IntelAccelerator::transcodeActiveTimerFired(IntelAccelerator *this)

{
  if (*(long *)(this + 0xde8) == *(long *)(this + 0xdf0)) {
    if (this[0xde0] != (IntelAccelerator)0x0) {
      this[0xde0] = (IntelAccelerator)0x0;
      sendTranscodeActive(this,0);
      *(undefined8 *)(this + 0xde8) = 0;
    }
    return;
  }
  *(long *)(this + 0xdf0) = *(long *)(this + 0xde8);
                    // WARNING: Could not recover jumptable at 0x00035248. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0x1460) + 0x1d0))(*(long **)(this + 0x1460),500);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMain::processDataBuffers(unsigned int)

undefined4 __cdecl IGAccelVideoContextMain::processDataBuffers(IGAccelVideoContext *param_1)

{
  IntelAccelerator *this;
  undefined4 uVar1;
  long lVar2;
  IGHardwareContext *pIVar3;
  IGAccelTask *pIVar4;
  IGHardwareExtendedContext *pIVar5;
  
  IOGraphicsAccelerator2::acceleratorWaitEnabled();
  if (*(long *)(param_1 + 0x1370) == 0) {
    lVar2 = (**(code **)(*(long *)param_1 + 0x968))(param_1);
    pIVar3 = IGHardwareContext::withOptions
                       (lVar2,(undefined8 *)&g_cInitGfxHwCtxParamsForVideoMain,param_1[0x10e8]);
    *(IGHardwareContext **)(param_1 + 0x1370) = pIVar3;
    if (pIVar3 == (IGHardwareContext *)0x0) {
      return 0x80000000;
    }
    lVar2 = (**(code **)(*(long *)param_1 + 0x968))(param_1);
    pIVar3 = IGHardwareContext::withOptions
                       (lVar2,(undefined8 *)&g_cInitGfxHwCtxParamsForVideoMainVME,param_1[0x10e8]);
    *(IGHardwareContext **)(param_1 + 0x1378) = pIVar3;
    if (pIVar3 == (IGHardwareContext *)0x0) {
      return 0x80000000;
    }
    pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
    IGAccelTask::setRCSSchedPriority(pIVar4,param_1[0x10e8]);
    pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
    pIVar5 = IGAccelTask::getBlit3DContext(pIVar4,'\0');
    if (pIVar5 != (IGHardwareExtendedContext *)0x0) {
      pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
      pIVar5 = IGAccelTask::getBlit3DContext(pIVar4,'\x01');
      IGHardwareContext::updateSchedPriority((IGHardwareContext *)pIVar5,(char)param_1[0x10e8]);
    }
    pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
    lVar2 = IGAccelTask::getDepthResolveContext(pIVar4,'\0');
    if (lVar2 != 0) {
      pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
      pIVar3 = (IGHardwareContext *)IGAccelTask::getDepthResolveContext(pIVar4,'\x01');
      IGHardwareContext::updateSchedPriority(pIVar3,(char)param_1[0x10e8]);
    }
    pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
    lVar2 = IGAccelTask::getColorResolveContext(pIVar4,'\0');
    if (lVar2 != 0) {
      pIVar4 = (IGAccelTask *)(**(code **)(*(long *)param_1 + 0x968))(param_1);
      pIVar3 = (IGHardwareContext *)IGAccelTask::getColorResolveContext(pIVar4,'\x01');
      IGHardwareContext::updateSchedPriority(pIVar3,(char)param_1[0x10e8]);
    }
  }
  IGAccelVideoContext::getChannel(param_1);
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18),
             *(undefined8 *)(param_1 + 0x1390));
  IGAccelVideoContext::getChannel(param_1);
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(param_1 + 0x1370) + 0x80) = *(undefined8 *)(param_1 + 0x1390);
  uVar1 = IOAccelVideoContext2::processDataBuffers((uint)param_1);
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18));
  if (*(char *)(*(long *)(param_1 + 0x1370) + 0x78) == '\x03') {
    this = *(IntelAccelerator **)(param_1 + 0x5a8);
    *(long *)(this + 0xde8) = *(long *)(this + 0xde8) + 1;
    if (this[0xde0] == (IntelAccelerator)0x0) {
      IntelAccelerator::transcodeActiveTimerPing(this);
    }
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl
// IGAccelVideoContextMain::endCommandStream(IOAccelCommandStreamInfo&)

void __cdecl
IGAccelVideoContextMain::endCommandStream
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *param_9,
          long param_10)

{
  IGAccelVideoContext::endCommandStream
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  return;
}



// IGAccelVideoContextMain::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::processSidebandToken(IGAccelVideoContextMain *this,long param_1)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  if ((uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0x30)) >> 2 < *(uint *)(param_1 + 0x34))
  {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if ((ushort)(*(ushort *)(param_1 + 0x20) + 32000) < 0x500) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x83) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13b8) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13b8) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x0003551e. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::processSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// IGAccelVideoContextMain::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::discardSidebandToken(IGAccelVideoContextMain *this,long param_1)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  if ((ushort)(*(ushort *)(param_1 + 0x20) + 32000) < 0x500) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x83) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13c0) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13c0) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x00035572. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::discardSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// IGAccelVideoContextMain::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall
IGAccelVideoContextMain::describeDriverAllocations
          (IGAccelVideoContextMain *this,IOAccelMemory *param_1)

{
  long lVar1;
  
  IOAccelContext2::describeDriverAllocations((IOAccelAllocationInfo *)this);
  lVar1 = *(long *)(this + 0x1370);
  if (lVar1 != 0) {
    (**(code **)(*(long *)this + 0x970))(this);
    IGHardwareContext::describeDriverAllocations(lVar1,param_1);
  }
  lVar1 = *(long *)(this + 0x1378);
  if (lVar1 != 0) {
    (**(code **)(*(long *)this + 0x970))(this);
    IGHardwareContext::describeDriverAllocations(lVar1,param_1);
    return;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x00035af0)
// WARNING: Removing unreachable block (ram,0x000357a6)
// WARNING: Removing unreachable block (ram,0x00035bc6)
// IGAccelVideoContextMain::patch_encoding_common(IOAccelCommandStreamInfo&, ENCODING_CMD_MODE)

void __thiscall
IGAccelVideoContextMain::patch_encoding_common
          (IGAccelVideoContextMain *this,long *param_1,int param_2)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  char cVar7;
  bool bVar8;
  uint uVar9;
  ulong uVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  IGAccelVideoContextMain *pIVar14;
  long lVar15;
  undefined4 uVar16;
  IGAccelVideoContextMain *local_48;
  IGAccelVideoContextMain *local_40;
  long *local_38;
  
  lVar2 = *param_1;
  local_48 = (IGAccelVideoContextMain *)0x0;
  lVar3 = param_1[3];
  if (*(ulong *)(this + 0x628) < lVar3 + 0xc70U) {
LAB_0003583b:
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  *(undefined8 *)(this + 0x1380) = *(undefined8 *)(lVar3 + 0xc10);
  *(undefined8 *)(this + 5000) = *(undefined8 *)(lVar3 + 0xc18);
  uVar1 = *(uint *)(lVar3 + 8);
  uVar10 = (ulong)uVar1;
  if (0x80 < uVar10) goto LAB_0003583b;
  if (uVar10 != 0) {
    local_38 = (long *)(uVar10 * 0x18);
    lVar15 = 0;
    do {
      local_40 = (IGAccelVideoContextMain *)0x0;
      if (*(int *)(lVar3 + 0x10 + lVar15) != 0) {
        cVar7 = (**(code **)(*(long *)this + 0xb78))();
        if (cVar7 == '\0') {
          return;
        }
        *(IGAccelVideoContextMain **)(lVar3 + 0x18 + lVar15) = local_40;
        *(undefined4 *)(lVar3 + 0x20 + lVar15) = 0;
        IGAccelVideoContext::updateResourceMappingCacheType
                  ((IGAccelVideoContext *)this,(IGAccelResource *)0x0);
      }
      lVar15 = lVar15 + 0x18;
    } while (local_38 != (long *)lVar15);
  }
  if (((uVar1 <= *(uint *)(lVar3 + 0xc24)) || (uVar1 <= *(uint *)(lVar3 + 0xc28))) ||
     (uVar9 = *(uint *)(lVar3 + 0xc2c), uVar1 <= uVar9)) goto LAB_0003583b;
  lVar15 = lVar3 + 0x10;
  uVar4 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc24) * 0x18);
  uVar5 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc28) * 0x18);
  uVar6 = *(undefined8 *)(lVar3 + 0x18 + (ulong)uVar9 * 0x18);
  local_38 = param_1;
  cVar7 = IOAccelShared2::lookupResource
                    ((uint)*(undefined8 *)(this + 0x5a0),
                     (void **)(ulong)*(uint *)(lVar15 + (ulong)uVar9 * 0x18));
  if (cVar7 == '\0') goto LAB_00035c22;
  bVar8 = IGAccelVideoContext::map_memory((long *)&local_48,(OSMetaClassBase *)0x13c0);
  if (!bVar8) {
    return;
  }
  lVar11 = (**(code **)(*(long *)local_48 + 0x118))();
  if (param_2 == 2) {
    lVar12 = (**(code **)(*(long *)local_48 + 0x118))();
    pIVar14 = local_48;
    lVar13 = (**(code **)(*(long *)local_48 + 0x128))();
    if ((ulong)(lVar13 + lVar12) < lVar11 + 0x740U) goto LAB_00035c22;
    patch_hme_ssh(pIVar14,lVar15,lVar11,(long)local_38);
  }
  else if (param_2 == 1) {
    lVar12 = (**(code **)(*(long *)local_48 + 0x118))();
    pIVar14 = local_48;
    lVar13 = (**(code **)(*(long *)local_48 + 0x128))();
    if ((ulong)(lVar13 + lVar12) < lVar11 + 0x6c0U) goto LAB_00035c22;
    patch_scaling_ssh(pIVar14,lVar15,lVar11,(long)local_38);
    if (*(int *)(lVar3 + 0xc50) != 0) {
      local_40 = (IGAccelVideoContextMain *)0x0;
      if ((uVar1 <= *(uint *)(lVar3 + 0xc58)) ||
         (cVar7 = IOAccelShared2::lookupResource
                            ((uint)*(undefined8 *)(this + 0x5a0),
                             (void **)(ulong)*(uint *)(lVar15 + (ulong)*(uint *)(lVar3 + 0xc58) *
                                                                0x18)), cVar7 == '\0'))
      goto LAB_00035c22;
      bVar8 = IGAccelVideoContext::map_memory((long *)&local_40,(OSMetaClassBase *)0x13c0);
      if (!bVar8) {
        return;
      }
      lVar11 = (**(code **)(*(long *)local_40 + 0x118))();
      lVar12 = (**(code **)(*(long *)local_40 + 0x118))();
      pIVar14 = local_40;
      lVar13 = (**(code **)(*(long *)local_40 + 0x128))();
      if ((ulong)(lVar13 + lVar12) < lVar11 + 0x740U) goto LAB_00035c22;
      patch_hme_ssh(pIVar14,lVar15,lVar11,(long)local_38);
      IGAccelVideoContext::unmap_memory((long *)&local_40);
    }
    if (*(int *)(lVar3 + 0xc60) != 0) {
      local_40 = (IGAccelVideoContextMain *)0x0;
      if ((uVar1 <= *(uint *)(lVar3 + 0xc68)) ||
         (cVar7 = IOAccelShared2::lookupResource
                            ((uint)*(undefined8 *)(this + 0x5a0),
                             (void **)(ulong)*(uint *)(lVar15 + (ulong)*(uint *)(lVar3 + 0xc68) *
                                                                0x18)), cVar7 == '\0'))
      goto LAB_00035c22;
      bVar8 = IGAccelVideoContext::map_memory((long *)&local_40,(OSMetaClassBase *)0x13c0);
      if (!bVar8) {
        return;
      }
      lVar11 = (**(code **)(*(long *)local_40 + 0x118))();
      lVar12 = (**(code **)(*(long *)local_40 + 0x118))();
      pIVar14 = local_40;
      lVar13 = (**(code **)(*(long *)local_40 + 0x128))();
      if ((ulong)(lVar13 + lVar12) < lVar11 + 0x180U) goto LAB_00035c22;
      patch_sfd_ssh(pIVar14,lVar15,lVar11,(long)local_38);
      IGAccelVideoContext::unmap_memory((long *)&local_40);
    }
  }
  else if (param_2 == 0) {
    lVar12 = (**(code **)(*(long *)local_48 + 0x118))();
    pIVar14 = local_48;
    lVar13 = (**(code **)(*(long *)local_48 + 0x128))();
    if ((ulong)(lVar13 + lVar12) < lVar11 + 0xc00U) goto LAB_00035c22;
    patch_enc_ssh(pIVar14,lVar15,lVar11,*(int *)(lVar3 + 0xc20),(long)local_38);
  }
  IGAccelVideoContext::unmap_memory((long *)&local_48);
  if (lVar2 + (ulong)*(uint *)(lVar3 + 0xc34) * 4 + 0x40 <=
      (ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1]) {
    lVar15 = lVar2 + (ulong)*(uint *)(lVar3 + 0xc34) * 4;
    *(uint *)(lVar15 + 0x10) = (uint)uVar6 & 0xfffff000 | *(uint *)(lVar3 + 0xc40);
    *(int *)(lVar15 + 0x14) = (int)((ulong)uVar6 >> 0x20);
    *(uint *)(lVar15 + 0x18) = (uint)uVar5 & 0xfffff000 | *(uint *)(lVar3 + 0xc3c);
    *(int *)(lVar15 + 0x1c) = (int)((ulong)uVar5 >> 0x20);
    uVar9 = (uint)uVar4 & 0xfffff000;
    *(uint *)(lVar15 + 0x28) = *(uint *)(lVar3 + 0xc44) | uVar9;
    uVar16 = (undefined4)((ulong)uVar4 >> 0x20);
    *(undefined4 *)(lVar15 + 0x2c) = uVar16;
    uVar10 = (ulong)*(uint *)(lVar3 + 0xc50);
    if (uVar10 != 0) {
      if ((uVar1 <= *(uint *)(lVar3 + 0xc54)) || (uVar1 <= *(uint *)(lVar3 + 0xc58)))
      goto LAB_00035a3e;
      uVar4 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc54) * 0x18);
      uVar5 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc58) * 0x18);
      *(uint *)(lVar2 + 0x10 + uVar10 * 4) = (uint)uVar5 & 0xfffff000 | *(uint *)(lVar3 + 0xc40);
      *(int *)(lVar2 + 0x14 + uVar10 * 4) = (int)((ulong)uVar5 >> 0x20);
      *(uint *)(lVar2 + 0x18 + uVar10 * 4) = (uint)uVar4 & 0xfffff000 | *(uint *)(lVar3 + 0xc3c);
      *(int *)(lVar2 + 0x1c + uVar10 * 4) = (int)((ulong)uVar4 >> 0x20);
      *(uint *)(lVar2 + 0x28 + uVar10 * 4) = *(uint *)(lVar3 + 0xc44) | uVar9;
      *(undefined4 *)(lVar2 + 0x2c + uVar10 * 4) = uVar16;
    }
    uVar10 = (ulong)*(uint *)(lVar3 + 0xc60);
    if (uVar10 == 0) {
      return;
    }
    if (uVar1 <= *(uint *)(lVar3 + 0xc64)) {
LAB_00035c22:
      *(undefined1 *)((long)local_38 + 0x3c) = 0;
      return;
    }
    if (*(uint *)(lVar3 + 0xc68) < uVar1) {
      uVar4 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc64) * 0x18);
      uVar5 = *(undefined8 *)(lVar3 + 0x18 + (ulong)*(uint *)(lVar3 + 0xc68) * 0x18);
      *(uint *)(lVar2 + 0x10 + uVar10 * 4) = (uint)uVar5 & 0xfffff000 | *(uint *)(lVar3 + 0xc40);
      *(int *)(lVar2 + 0x14 + uVar10 * 4) = (int)((ulong)uVar5 >> 0x20);
      *(uint *)(lVar2 + 0x18 + uVar10 * 4) = (uint)uVar4 & 0xfffff000 | *(uint *)(lVar3 + 0xc3c);
      *(int *)(lVar2 + 0x1c + uVar10 * 4) = (int)((ulong)uVar4 >> 0x20);
      *(uint *)(lVar2 + 0x28 + uVar10 * 4) = uVar9 | *(uint *)(lVar3 + 0xc44);
      *(undefined4 *)(lVar2 + 0x2c + uVar10 * 4) = uVar16;
      return;
    }
  }
LAB_00035a3e:
  *(undefined1 *)((long)local_38 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMain::patch_vphal_command_buffer(IOAccelCommandStreamInfo&,
// _VPHAL_TOKEN_MERCURY*)

void __thiscall
IGAccelVideoContextMain::patch_vphal_command_buffer
          (IGAccelVideoContextMain *this,long *param_1,uint *param_2)

{
  uint *puVar1;
  long lVar2;
  char cVar3;
  uint uVar4;
  sbyte sVar5;
  uint uVar6;
  undefined8 local_48;
  undefined4 local_3c;
  ulong local_38;
  
  local_48 = 0;
  local_3c = 0;
  local_38 = 0;
  if (param_2 + 2 <= *(uint **)(this + 0x628)) {
    lVar2 = *param_1;
    do {
      if ((*param_2 & 1) == 0) {
        return;
      }
      cVar3 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,*param_2 >> 0x10,&local_48,&local_38,&local_3c,0);
      if (cVar3 == '\0') {
        return;
      }
      uVar4 = *param_2;
      uVar6 = uVar4 >> 10 & 0x1f;
      if (uVar6 != 0) {
        sVar5 = (sbyte)uVar6;
        if ((uVar4 >> 0xf & 1) == 0) {
          local_38 = local_38 << sVar5;
        }
        else {
          local_38 = local_38 >> sVar5;
        }
      }
      uVar4 = uVar4 >> 3 & 0x7f;
      if ((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < (ulong)uVar4 * 4 + 8 + lVar2)
      break;
      *(uint *)((ulong)uVar4 * 4 + lVar2) = param_2[1] + (int)local_38;
      *(int *)(lVar2 + 4 + (ulong)uVar4 * 4) = (int)(local_38 >> 0x20);
      puVar1 = param_2 + 4;
      param_2 = param_2 + 2;
    } while (puVar1 <= *(uint **)(this + 0x628));
  }
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMain::patch_vphal_ssh_instance(IOAccelCommandStreamInfo&, unsigned char*,
// unsigned char*, unsigned char*)

void __thiscall
IGAccelVideoContextMain::patch_vphal_ssh_instance
          (IGAccelVideoContextMain *this,long param_1,long param_2,uint *param_3,uint *param_4)

{
  uint uVar1;
  char cVar2;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  uint uVar6;
  uint *puVar7;
  uint uVar8;
  undefined8 local_60;
  ulong local_58;
  long local_50;
  undefined8 local_48;
  IGAccelResource *local_40;
  uint local_34;
  
  uVar8 = 0;
  local_48 = 0;
  local_60 = 0;
  local_34 = 0;
  local_40 = (IGAccelResource *)0x0;
  local_58 = 0;
  local_50 = param_1;
  do {
    if (param_4 < param_3 + 1) goto LAB_0003604d;
    uVar1 = *param_3;
    if ((uVar1 & 1) != 0) {
      uVar5 = uVar8 & 0x7ffffffe;
      puVar7 = (uint *)((ulong)(uVar1 & 0xffffffc0) + param_2);
      if ((uVar1 & 4) == 0) {
        if (param_4 < puVar7 + 0x10) {
LAB_0003604d:
          *(undefined1 *)(local_50 + 0x3c) = 0;
          return;
        }
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,local_50,puVar7[8],&local_40,&local_48,&local_34,uVar5 == 0x18);
        if (cVar2 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        uVar4 = local_58;
        if ((*puVar7 & 0x7fc0000) == 0x6940000) {
          uVar4 = (ulong)puVar7[9];
        }
        *(undefined8 *)(puVar7 + 8) = local_48;
        puVar7[3] = puVar7[3] & 0xfffc0000 | local_34 - 1 & 0x3ffff;
        if (((*puVar7 & 0x7fc0000) == 0x6940000) && ((int)uVar4 - 1U < 0xfffffffe)) {
          cVar2 = (**(code **)(*(long *)this + 0xb78))
                            (this,local_50,uVar4,&local_40,&local_60,&local_34,uVar5 == 0x18);
          if (cVar2 == '\0') {
            return;
          }
          if (local_34 == 0) goto LAB_0003604d;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
          puVar7[6] = puVar7[6] & 0xffffc000 |
                      (uint)((int)local_60 - (int)local_48) / local_34 & 0x3fff;
        }
        *(byte *)((long)puVar7 + 0x15) = *(byte *)((long)puVar7 + 0x15) & 0xcf;
        local_58 = uVar4;
      }
      else {
        if (param_4 < puVar7 + 0x10) goto LAB_0003604d;
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,local_50,puVar7[6],&local_40,&local_48,&local_34,uVar5 == 0x18);
        if (cVar2 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        uVar1 = puVar7[2];
        uVar6 = puVar7[7] & 0xffff;
        puVar7[6] = (uint)local_48;
        uVar3 = puVar7[7] & 0xffff0000 | (uint)((ulong)local_48 >> 0x20) & 0xffff;
        puVar7[7] = uVar3;
        puVar7[2] = uVar1 & 0xffe00007 | local_34 * 8 + 0x1ffff8 & 0x1ffff8;
        local_58 = local_58 & 0xffffffff;
        if ((((uVar1 & 0xf8000000) == 0x20000000) && (local_58 = (ulong)uVar6, uVar6 != 0)) &&
           (uVar6 != 0xffff)) {
          cVar2 = (**(code **)(*(long *)this + 0xb78))
                            (this,local_50,local_58,&local_40,&local_60,&local_34,uVar5 == 0x18);
          if (cVar2 == '\0') {
            return;
          }
          if (local_34 == 0) goto LAB_0003604d;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
          puVar7[3] = puVar7[3] & 0xffff8000 |
                      (uint)((int)local_60 - (int)local_48) / local_34 & 0x7fff;
          uVar3 = puVar7[7];
        }
        puVar7[7] = uVar3 & 0xfffcffff;
      }
      *(byte *)param_3 = (byte)*param_3 & 0xfa;
    }
    uVar8 = uVar8 + 1;
    param_3 = param_3 + 1;
    if (uVar8 == 0x40) {
      return;
    }
  } while( true );
}



// IGAccelVideoContextMain::patch_enc_ssh(sIntelVideoResourceMapEntry*, _AVCENCSurfaceStateHeap*,
// unsigned int, IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::patch_enc_ssh
          (IGAccelVideoContextMain *this,long param_1,long param_2,int param_3,long param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined8 uVar6;
  bool bVar7;
  bool bVar8;
  uint *puVar9;
  long lVar10;
  uint uVar11;
  uint uVar12;
  long lVar13;
  uint uVar14;
  int iVar15;
  
  if (param_3 == 0) {
    uVar12 = 0;
    uVar11 = 0;
    uVar14 = 0;
  }
  else {
    uVar12 = *(uint *)(param_2 + 0x220);
    uVar11 = *(uint *)(param_2 + 0x260);
    uVar14 = *(uint *)(param_2 + 0x460);
  }
  if (*(uint *)(param_2 + 0xe0) < 0x80) {
    uVar1 = *(uint *)(param_2 + 0x120);
    uVar2 = *(uint *)(param_2 + 0x3a0);
    uVar3 = *(uint *)(param_2 + 0x2e0);
    uVar4 = *(uint *)(param_2 + 800);
    lVar10 = *(long *)(param_1 + 8 + (ulong)*(uint *)(param_2 + 0xe0) * 0x18);
    *(int *)(param_2 + 0xe0) = (int)lVar10;
    *(int *)(param_2 + 0xe4) = (int)((ulong)lVar10 >> 0x20);
    *(ulong *)(param_2 + 0x120) = lVar10 + (ulong)uVar1;
    if ((ulong)uVar2 != 0) {
      if (0x7f < uVar2) goto LAB_00036388;
      lVar10 = *(long *)(param_1 + 8 + (ulong)uVar2 * 0x18);
      *(int *)(param_2 + 0x3a0) = (int)lVar10;
      *(int *)(param_2 + 0x3a4) = (int)((ulong)lVar10 >> 0x20);
      *(ulong *)(param_2 + 0x3e0) = (ulong)uVar1 + lVar10;
    }
    if ((ulong)uVar3 != 0) {
      if (0x7f < uVar3) goto LAB_00036388;
      *(undefined8 *)(param_2 + 0x2e0) = *(undefined8 *)(param_1 + 8 + (ulong)uVar3 * 0x18);
    }
    if ((ulong)uVar4 != 0) {
      if (0x7f < uVar4) goto LAB_00036388;
      *(undefined8 *)(param_2 + 800) = *(undefined8 *)(param_1 + 8 + (ulong)uVar4 * 0x18);
    }
    if (param_3 != 0) {
      if (((0x7f < uVar12) || (0x7f < uVar11)) || (0x7f < uVar14)) goto LAB_00036388;
      *(undefined8 *)(param_2 + 0x220) = *(undefined8 *)(param_1 + 8 + (ulong)uVar12 * 0x18);
      *(undefined8 *)(param_2 + 0x260) = *(undefined8 *)(param_1 + 8 + (ulong)uVar11 * 0x18);
      *(undefined8 *)(param_2 + 0x460) = *(undefined8 *)(param_1 + 8 + (ulong)uVar14 * 0x18);
    }
    puVar9 = (uint *)(param_2 + 0xcc);
    lVar10 = 0;
    do {
      if ((((byte)lVar10 < 0xb) && ((0x498U >> ((uint)lVar10 & 0x1f) & 1) != 0)) &&
         ((*puVar9 & 0x3ffff) != 0)) {
        lVar13 = (long)(int)puVar9[5];
        if (0x7f < lVar13) goto LAB_00036388;
        iVar5 = *(int *)(param_1 + 0x10 + lVar13 * 0x18);
        *(undefined8 *)(puVar9 + 5) = *(undefined8 *)(param_1 + 8 + lVar13 * 0x18);
        *puVar9 = *puVar9 & 0xfffc0000 | iVar5 - 1U & 0x3ffff;
      }
      lVar10 = lVar10 + 1;
      puVar9 = puVar9 + 0x10;
    } while (lVar10 != 0xf);
    lVar10 = 0;
    do {
      uVar12 = *(uint *)(param_2 + 0x488 + lVar10);
      if ((uVar12 & 0x1ffff8) != 0) {
        uVar11 = *(uint *)(param_2 + 0x498 + lVar10);
        if ((0x7fffff < uVar11) || (uVar14 = uVar11 & 0xffff, 0x7f < uVar14)) goto LAB_00036388;
        uVar1 = *(uint *)(param_1 + 0x10 + (ulong)uVar14 * 0x18);
        if (uVar1 != 0) {
          uVar6 = *(undefined8 *)(param_1 + 8 + (ulong)(uVar11 >> 0x10) * 0x18);
          iVar5 = *(int *)(param_1 + 8 + (ulong)uVar14 * 0x18);
          iVar15 = (int)uVar6;
          *(int *)(param_2 + 0x498 + lVar10) = iVar15;
          *(short *)(param_2 + 0x49c + lVar10) = (short)((ulong)uVar6 >> 0x20);
          *(uint *)(param_2 + 0x488 + lVar10) =
               uVar12 & 0xffe00007 | uVar1 * 8 + 0x1ffff8 & 0x1ffff8;
          *(uint *)(param_2 + 0x48c + lVar10) =
               *(uint *)(param_2 + 0x48c + lVar10) & 0xc0008000 |
               (uint)(iVar5 - iVar15) / uVar1 & 0x7fff;
          puVar9 = (uint *)(param_2 + 0x490 + lVar10);
          *puVar9 = *puVar9 & 0xc0008000;
        }
      }
      lVar10 = lVar10 + 0x40;
    } while (lVar10 != 0x580);
    lVar10 = 0;
    do {
      if ((*(uint *)(param_2 + 0xa0c + lVar10) & 0x3ffff) != 0) {
        lVar13 = (long)*(int *)(param_2 + 0xa20 + lVar10);
        if (0x7f < lVar13) goto LAB_00036388;
        *(undefined8 *)(param_2 + 0xa20 + lVar10) = *(undefined8 *)(param_1 + 8 + lVar13 * 0x18);
      }
      lVar10 = lVar10 + 0x40;
    } while (lVar10 != 0x180);
    lVar10 = 0;
    bVar7 = true;
    do {
      bVar8 = bVar7;
      lVar10 = lVar10 * 0x40;
      if ((*(uint *)(param_2 + 0xb8c + lVar10) & 0x3ffff) != 0) {
        lVar13 = (long)*(int *)(param_2 + 0xba0 + lVar10);
        if (0x7f < lVar13) goto LAB_00036388;
        uVar6 = *(undefined8 *)(param_1 + 8 + lVar13 * 0x18);
        *(int *)(lVar10 + param_2 + 0xba0) = (int)uVar6;
        *(int *)(lVar10 + param_2 + 0xba4) = (int)((ulong)uVar6 >> 0x20);
      }
      lVar10 = 1;
      bVar7 = false;
    } while (bVar8);
  }
  else {
LAB_00036388:
    *(undefined1 *)(param_4 + 0x3c) = 0;
  }
  return;
}



// IGAccelVideoContextMain::patch_scaling_ssh(sIntelVideoResourceMapEntry*,
// _AVCScalingSurfaceStateHeap*, IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::patch_scaling_ssh
          (IGAccelVideoContextMain *this,long param_1,long param_2,long param_3)

{
  int iVar1;
  long lVar2;
  
  lVar2 = (long)*(int *)(param_2 + 0xa0);
  if (lVar2 < 0x80) {
    iVar1 = *(int *)(param_1 + 0x10 + lVar2 * 0x18);
    *(undefined8 *)(param_2 + 0xa0) = *(undefined8 *)(param_1 + 8 + lVar2 * 0x18);
    *(uint *)(param_2 + 0x8c) = *(uint *)(param_2 + 0x8c) & 0xfffc0000 | iVar1 - 1U & 0x3ffff;
    lVar2 = (long)*(int *)(param_2 + 0xe0);
    if (lVar2 < 0x80) {
      iVar1 = *(int *)(param_1 + 0x10 + lVar2 * 0x18);
      *(undefined8 *)(param_2 + 0xe0) = *(undefined8 *)(param_1 + 8 + lVar2 * 0x18);
      *(uint *)(param_2 + 0xcc) = *(uint *)(param_2 + 0xcc) & 0xfffc0000 | iVar1 - 1U & 0x3ffff;
      if ((long)*(int *)(param_2 + 0x1a0) < 0x80) {
        *(undefined8 *)(param_2 + 0x1a0) =
             *(undefined8 *)(param_1 + 8 + (long)*(int *)(param_2 + 0x1a0) * 0x18);
        return;
      }
    }
  }
  *(undefined1 *)(param_3 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMain::patch_hme_ssh(sIntelVideoResourceMapEntry*, _AVCHMESurfaceStateHeap*,
// IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::patch_hme_ssh
          (IGAccelVideoContextMain *this,long param_1,long param_2,long param_3)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  uint uVar9;
  int iVar10;
  
  lVar7 = param_2 + 0xa4;
  lVar8 = 0;
  do {
    if ((((*(uint *)(lVar7 + -0x18) & 0x3ffff) != 0) && ((byte)lVar8 < 4)) &&
       (((uint)lVar8 & 0xff) != 1)) {
      if (0x7f < (long)*(int *)(lVar7 + -4)) goto LAB_00036550;
      *(undefined8 *)(lVar7 + -4) = *(undefined8 *)(param_1 + 8 + (long)*(int *)(lVar7 + -4) * 0x18)
      ;
    }
    lVar8 = lVar8 + 1;
    lVar7 = lVar7 + 0x40;
  } while (lVar8 != 5);
  lVar7 = 0x1dc;
  do {
    uVar2 = *(uint *)(param_2 + -0x14 + lVar7);
    if ((uVar2 & 0x1ffff8) != 0) {
      uVar3 = *(uint *)(param_2 + -4 + lVar7);
      if ((0x7fffff < uVar3) || (uVar9 = uVar3 & 0xffff, 0x7f < uVar9)) {
LAB_00036550:
        *(undefined1 *)(param_3 + 0x3c) = 0;
        return;
      }
      uVar4 = *(uint *)(param_1 + 0x10 + (ulong)uVar9 * 0x18);
      if (uVar4 != 0) {
        uVar6 = *(undefined8 *)(param_1 + 8 + (ulong)(uVar3 >> 0x10) * 0x18);
        iVar5 = *(int *)(param_1 + 8 + (ulong)uVar9 * 0x18);
        iVar10 = (int)uVar6;
        *(int *)(param_2 + -4 + lVar7) = iVar10;
        *(short *)(param_2 + lVar7) = (short)((ulong)uVar6 >> 0x20);
        *(uint *)(param_2 + -0x14 + lVar7) = uVar2 & 0xffe00007 | uVar4 * 8 + 0x1ffff8 & 0x1ffff8;
        *(uint *)(param_2 + -0x10 + lVar7) =
             *(uint *)(param_2 + -0x10 + lVar7) & 0xc0008000 |
             (uint)(iVar5 - iVar10) / uVar4 & 0x7fff;
        puVar1 = (uint *)(param_2 + -0xc + lVar7);
        *puVar1 = *puVar1 & 0xc0008000;
      }
    }
    lVar7 = lVar7 + 0x40;
    if (lVar7 == 0x75c) {
      return;
    }
  } while( true );
}



// IGAccelVideoContextMain::patch_sfd_ssh(sIntelVideoResourceMapEntry*, _AVCSFDSurfaceStateHeap*,
// IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMain::patch_sfd_ssh
          (IGAccelVideoContextMain *this,long param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  
  lVar2 = param_2 + 100;
  lVar1 = 0;
  do {
    if (((*(uint *)(lVar2 + -0x18) & 0x3ffff) != 0) && (((uint)lVar1 & 0x7d) == 1)) {
      if (0x7f < (long)*(int *)(lVar2 + -4)) {
        *(undefined1 *)(param_3 + 0x3c) = 0;
        return;
      }
      *(undefined8 *)(lVar2 + -4) = *(undefined8 *)(param_1 + 8 + (long)*(int *)(lVar2 + -4) * 0x18)
      ;
    }
    lVar1 = lVar1 + 1;
    lVar2 = lVar2 + 0x40;
  } while (lVar1 != 5);
  return;
}



// IGAccelVideoContextMain::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextMain::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



void __GLOBAL__sub_I_IGAccelVideoContextMain_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelVideoContextMain::gMetaClass,"IGAccelVideoContextMain",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  IGAccelVideoContextMain::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelVideoContextMain::gMetaClass);
  return;
}



// IGScheduler5::MetaClass::MetaClass()

void __thiscall IGScheduler5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGScheduler5",(OSMetaClass *)&IGScheduler::gMetaClass,0xd00);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler5::MetaClass::~MetaClass()

void __thiscall IGScheduler5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGScheduler5::IGScheduler5(OSMetaClass const*)

void __thiscall IGScheduler5::IGScheduler5(IGScheduler5 *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGScheduler5;
  lVar1 = 0;
  do {
    *(undefined8 *)(this + lVar1 + 0x480) = 0;
    lVar1 = lVar1 + 0x180;
  } while (lVar1 != 0x600);
  return;
}



// IGScheduler5::IGScheduler5(OSMetaClass const*)

void __thiscall IGScheduler5::IGScheduler5(IGScheduler5 *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,param_1);
  *(undefined ***)this = &__const::~IGScheduler5;
  lVar1 = -0x600;
  do {
    *(undefined8 *)(this + lVar1 + 0xa80) = 0;
    lVar1 = lVar1 + 0x180;
  } while (lVar1 != 0);
  return;
}



// IGScheduler5::~IGScheduler5()

void __thiscall IGScheduler5::~IGScheduler5(IGScheduler5 *this)

{
  *(undefined ***)this = &__const::~IGScheduler5;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGScheduler5::~IGScheduler5()

void __thiscall IGScheduler5::~IGScheduler5(IGScheduler5 *this)

{
  *(undefined ***)this = &__const::~IGScheduler5;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  return;
}



// IGScheduler5::~IGScheduler5()

void __thiscall IGScheduler5::~IGScheduler5(IGScheduler5 *this)

{
  *(undefined ***)this = &__const::~IGScheduler5;
  IGScheduler::~IGScheduler((IGScheduler *)this);
  _OSObject_typed_operator_delete(&IGScheduler5_ktv,this,0xd00);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::operator delete(void*, unsigned long)

void __cdecl IGScheduler5::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGScheduler5_ktv,param_1,param_2);
  return;
}



// IGScheduler5::getMetaClass() const

undefined8 * IGScheduler5::getMetaClass(void)

{
  return &gMetaClass;
}



// IGScheduler5::MetaClass::MetaClass()

void __thiscall IGScheduler5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGScheduler5",(OSMetaClass *)&IGScheduler::gMetaClass,0xd00);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler5::MetaClass::alloc() const

IGScheduler5 * IGScheduler5::MetaClass::alloc(void)

{
  IGScheduler5 *this;
  
  this = (IGScheduler5 *)_OSObject_typed_operator_new(&IGScheduler5_ktv,0xd00);
  IGScheduler5(this);
  return this;
}



// IGScheduler5::operator new(unsigned long)

void * __thiscall IGScheduler5::operator_new(IGScheduler5 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGScheduler5_ktv,this);
  return pvVar1;
}



// IGScheduler5::IGScheduler5()

void __thiscall IGScheduler5::IGScheduler5(IGScheduler5 *this)

{
  IGScheduler5(this);
  return;
}



// IGScheduler5::IGScheduler5()

void __thiscall IGScheduler5::IGScheduler5(IGScheduler5 *this)

{
  long lVar1;
  
  IGScheduler::IGScheduler((IGScheduler *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGScheduler5;
  lVar1 = 0;
  do {
    *(undefined8 *)(this + lVar1 + 0x480) = 0;
    lVar1 = lVar1 + 0x180;
  } while (lVar1 != 0x600);
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::withAccelerator(IOGraphicsAccelerator2*)

IGScheduler5 * __cdecl IGScheduler5::withAccelerator(long param_1)

{
  IGScheduler5 *this;
  undefined8 uVar1;
  
  this = (IGScheduler5 *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGScheduler5 *)0x0) {
    uVar1 = initWithAccelerator(this,param_1);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGScheduler5 *)0x0;
}



// IGScheduler5::initWithAccelerator(IOGraphicsAccelerator2*)

undefined8 __thiscall IGScheduler5::initWithAccelerator(IGScheduler5 *this,long param_1)

{
  undefined8 uVar1;
  long lVar2;
  long lVar3;
  IGHardwareCommandStreamer5 *pIVar4;
  ulong uVar5;
  ulong uVar6;
  
  uVar1 = IGScheduler::initWithOptions
                    ((IGScheduler *)this,*(uint *)(&DAT_000011c0 + param_1) >> 0x1c & 4 | 2,0,
                     param_1);
  if ((char)uVar1 != '\0') {
    lVar2 = IOWorkLoop::workLoop();
    *(long *)(this + 0xa80) = lVar2;
    if (lVar2 != 0) {
      lVar2 = IOInterruptEventSource::interruptEventSource
                        ((OSObject *)this,handleKickDPSMInterrupt,(IOService *)0x0,0);
      *(long *)(this + 0xcd0) = lVar2;
      if (lVar2 != 0) {
        (**(code **)(**(long **)(this + 0xa80) + 0x140))(*(long **)(this + 0xa80),lVar2);
        (**(code **)(**(long **)(this + 0xcd0) + 0x150))();
        initPriorityConfig(this);
        lVar2 = 0x154;
        do {
          lVar3 = _IOMalloc(0x4080);
          *(long *)(this + lVar2 * 8) = lVar3;
          if (lVar3 == 0) goto LAB_000369f4;
          *(undefined8 *)(lVar3 + 0x4000) = 0;
          *(undefined8 *)(lVar3 + 0x4048) = 0;
          *(undefined8 *)(lVar3 + 0x4040) = 0;
          lVar2 = lVar2 + 1;
        } while (lVar2 != 0x194);
        this[0xa88] = (IGScheduler5)0x0;
        lVar2 = *(long *)(this + 0x10);
        uVar6 = *(ulong *)(&DAT_00001340 + lVar2);
        if (uVar6 == 0) {
          return 0x101;
        }
        lVar3 = 0;
        if (uVar6 != 0) {
          for (; (uVar6 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
          }
        }
        while( true ) {
          uVar6 = lVar3 + 1;
          pIVar4 = IGHardwareCommandStreamer5::hardwareCommandStreamer
                             (*(IntelAccelerator **)(this + 0x10),*(undefined8 *)(this + 0xa80),this
                              ,(uint)lVar3 & 0xff);
          *(IGHardwareCommandStreamer5 **)(this + uVar6 * 8 + 0xc98) = pIVar4;
          if (pIVar4 == (IGHardwareCommandStreamer5 *)0x0) break;
          *(undefined4 *)(this + uVar6 * 4 + 0xcd4) = 0x41;
          if (4 < uVar6) {
            return 0x101;
          }
          uVar5 = (*(ulong *)(&DAT_00001340 + (uVar6 >> 6) * 8 + lVar2) >> ((byte)uVar6 & 0x3f)) <<
                  ((byte)uVar6 & 0x3f);
          lVar3 = 0;
          if (uVar5 != 0) {
            for (; (uVar5 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
            }
          }
          lVar3 = (uVar6 & 0xffffffffffffffc0) + lVar3;
          if (uVar5 == 0) {
            return 0x101;
          }
        }
      }
    }
LAB_000369f4:
    (**(code **)(*(long *)this + 0x90))(this);
  }
  return 0;
}



// IGScheduler5::waitForGpuIdle()

void __thiscall IGScheduler5::waitForGpuIdle(IGScheduler5 *this)

{
  uint uVar1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  
  IGAccelEventMachine::finishAllStamps
            (*(IGAccelEventMachine **)(*(long *)(this + 0x10) + 0x380),0x2b);
  cVar2 = (**(code **)(*(long *)this + 0x160))(this);
  if (cVar2 == '\0') {
    uVar3 = 0;
    do {
      for (uVar4 = *(uint *)(this + 0xcc8) & 0x1f; uVar4 != 0;
          uVar4 = uVar4 ^ 1 << ((byte)uVar1 & 0x1f)) {
        uVar1 = 0;
        if (uVar4 != 0) {
          for (; (uVar4 >> uVar1 & 1) == 0; uVar1 = uVar1 + 1) {
          }
        }
        notify(this,uVar1);
      }
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      cVar2 = (**(code **)(*(long *)this + 0x160))(this);
    } while ((cVar2 == '\0') && (bVar5 = uVar3 < 24999, uVar3 = uVar3 + 1, bVar5));
  }
  return;
}



// IGScheduler5::notify(IGHwCsType)

void __thiscall IGScheduler5::notify(IGScheduler5 *this,uint param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00170,(ulong)param_1,0,0,0,0);
    }
  }
  IGHardwareCommandStreamer5::contextSwitchInterruptOccurred
            (*(IGHardwareCommandStreamer5 **)(this + (ulong)param_1 * 8 + 0xca0));
  return;
}



// IGScheduler5::isGpuIdle() const

byte __thiscall IGScheduler5::isGpuIdle(IGScheduler5 *this)

{
  byte bVar1;
  byte bVar2;
  
  bVar1 = _OSCompareAndSwap(0,*(undefined4 *)(this + 0xcc8),this + 0xcc8);
  bVar2 = (**(code **)(**(long **)(*(long *)(this + 0x10) + 0x380) + 0x170))();
  return bVar2 & bVar1;
}



// IGScheduler5::checkForProgress(IGHwCsType)

bool __thiscall IGScheduler5::checkForProgress(IGScheduler5 *this,ulong param_1)

{
  undefined8 uVar1;
  long lVar2;
  bool bVar3;
  int iVar4;
  ulong uVar5;
  uint uVar6;
  ulong uVar7;
  long lVar8;
  bool bVar9;
  
  if (((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) == 0) {
    uVar1 = *(undefined8 *)(*(long *)(this + (param_1 & 0xff) * 8 + 0xca0) + 0x1c40);
    uVar6 = 0;
    do {
      lVar2 = *(long *)(this + 0x10);
      uVar7 = *(ulong *)(&DAT_00001340 + lVar2);
      if (uVar7 != 0) {
        lVar8 = 0;
        if (uVar7 != 0) {
          for (; (uVar7 >> lVar8 & 1) == 0; lVar8 = lVar8 + 1) {
          }
        }
        do {
          uVar7 = lVar8 + 1;
          IGHardwareCommandStreamer5::contextSwitchInterruptOccurred
                    (*(IGHardwareCommandStreamer5 **)(this + uVar7 * 8 + 0xc98));
          if (4 < uVar7) break;
          uVar5 = (*(ulong *)(&DAT_00001340 + (uVar7 >> 6) * 8 + lVar2) >> ((byte)uVar7 & 0x3f)) <<
                  ((byte)uVar7 & 0x3f);
          lVar8 = 0;
          if (uVar5 != 0) {
            for (; (uVar5 >> lVar8 & 1) == 0; lVar8 = lVar8 + 1) {
            }
          }
          lVar8 = (uVar7 & 0xffffffffffffffc0) + lVar8;
        } while (uVar5 != 0);
      }
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      iVar4 = (int)*(undefined8 *)(*(long *)(this + (param_1 & 0xff) * 8 + 0xca0) + 0x1c40) -
              (int)uVar1;
      bVar3 = 0 < iVar4;
    } while ((iVar4 < 1) && (bVar9 = uVar6 < 24999, uVar6 = uVar6 + 1, bVar9));
  }
  else {
    _kprintf("[IG3D] checkForProgress on CS: %u but just returning true we\'re running in simulation\n"
             ,(uint)param_1 & 0xff);
    bVar3 = true;
  }
  return bVar3;
}



// IGScheduler5::resetCommandStreamersOnWake()

void __thiscall IGScheduler5::resetCommandStreamersOnWake(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::resetOnWake
                (*(IGHardwareCommandStreamer5 **)(this + uVar3 * 8 + 0xc98));
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IGScheduler5::processGPUReset(IGHwCsType, IGHardwareContext*)

void __cdecl
IGScheduler5::processGPUReset
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long param_9,
          uint param_10)

{
  IGHardwareCommandStreamer5::processGPUReset
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             *(void **)(param_9 + 0xca0 + (ulong)param_10 * 8));
  return;
}



// IGScheduler5::getActiveContexts(IGHwCsType, IGHardwareContext**, unsigned long long*,
// IGHardwareContext**)

void __thiscall
IGScheduler5::getActiveContexts
          (IGScheduler5 *this,ulong param_1,long *param_2,long *param_3,undefined8 *param_4)

{
  IGHardwareCommandStreamer5::getActiveContexts
            (*(IGHardwareCommandStreamer5 **)(this + (param_1 & 0xffffffff) * 8 + 0xca0),param_2,
             param_3,param_4);
  return;
}



// IGScheduler5::dumpStatus(char*, int)

undefined8 IGScheduler5::dumpStatus(void)

{
  return 0;
}



// IGScheduler5::getNextStampIndex(IGHwCsType, unsigned char)

void __thiscall IGScheduler5::getNextStampIndex(IGScheduler5 *this,byte param_1,ulong param_2)

{
  int iVar1;
  ulong uVar2;
  long lVar3;
  
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    IGScheduler::getNextStampIndex(this,(int)param_1);
    return;
  }
  if (param_1 == 0) {
    uVar2 = param_2 & 0xff;
    lVar3 = uVar2 * 0x180;
    iVar1 = *(int *)(this + lVar3 + 0x5c4);
    *(int *)(this + lVar3 + 0x5c4) = iVar1 + 1;
    if (*(int *)(&DAT_000aae90 + uVar2 * 4) <= iVar1) {
      *(undefined4 *)(this + lVar3 + 0x5c4) = *(undefined4 *)(&DAT_000aaea0 + uVar2 * 4);
    }
  }
  else {
    uVar2 = (ulong)param_1;
    if (*(int *)(this + uVar2 * 4 + 0xcd8) < *(int *)(&DAT_0012591d + uVar2 * 0x79)) {
      iVar1 = *(int *)(this + uVar2 * 4 + 0xcd8) + 1;
    }
    else {
      iVar1 = *(int *)(&DAT_00125919 + uVar2 * 0x79);
    }
    *(int *)(this + uVar2 * 4 + 0xcd8) = iVar1;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::handleKickDPSMInterrupt(IOInterruptEventSource*, int)

void __cdecl IGScheduler5::handleKickDPSMInterrupt(long param_1)

{
  IntelAccelerator::dpsmKickTimer(*(IntelAccelerator **)(param_1 + 0x10));
  return;
}



// IGScheduler5::updateIdleState(IGHwCsType, unsigned int)

void __thiscall IGScheduler5::updateIdleState(IGScheduler5 *this,byte param_1,ulong param_2)

{
  uint uVar1;
  
  if ((param_2 & 0xc) != 0) {
    uVar1 = 1 << (param_1 & 0x1f);
    if ((param_2 & 8) == 0) {
      _OSBitOrAtomic(uVar1,this + 0xcc8);
    }
    else {
      _OSBitAndAtomic(~uVar1,this + 0xcc8);
    }
  }
  if ((param_2 & 0x30) != 0) {
    uVar1 = 0x20 << (param_1 & 0x1f);
    if ((param_2 & 0x20) == 0) {
      _OSBitOrAtomic(uVar1,this + 0xcc8);
    }
    else {
      _OSBitAndAtomic(~uVar1,this + 0xcc8);
    }
  }
  if ((param_2 & 2) == 0) {
    if ((param_2 & 1) == 0) {
      return;
    }
                    // WARNING: Could not recover jumptable at 0x00036e82. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(**(long **)(this + 0xcd0) + 0x1e0))(*(long **)(this + 0xcd0),0,0,0);
    return;
  }
  IntelAccelerator::dpsmKickTimer(*(IntelAccelerator **)(this + 0x10));
  return;
}



// IGScheduler5::getCurrentContext(IGHwCsType) const

undefined8 __thiscall IGScheduler5::getCurrentContext(IGScheduler5 *this,uint param_1)

{
  undefined8 uVar1;
  
  if (*(IGHardwareCommandStreamer5 **)(this + (ulong)param_1 * 8 + 0xca0) !=
      (IGHardwareCommandStreamer5 *)0x0) {
    uVar1 = IGHardwareCommandStreamer5::getCurrentContext
                      (*(IGHardwareCommandStreamer5 **)(this + (ulong)param_1 * 8 + 0xca0));
    return uVar1;
  }
  return 0;
}



// IGScheduler5::setThermalAttribute(unsigned int)

void __thiscall IGScheduler5::setThermalAttribute(IGScheduler5 *this,uint param_1)

{
  uintptr_t arg1;
  
  if (_graphicsTracePointEnable == 0) {
    arg1 = (uintptr_t)(int)((param_1 >> 8 & 0xff) - 1);
  }
  else {
    arg1 = (uintptr_t)(int)((param_1 >> 8 & 0xff) - 1);
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001b8,arg1,(ulong)(param_1 & 0xff),0,0,0);
    }
  }
  *(uint *)(this + arg1 * 4 + 0xa90) = param_1 & 0xff;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::handleHighPriThrottleTimerInterrupt(IOTimerEventSource*)

void __cdecl IGScheduler5::handleHighPriThrottleTimerInterrupt(IGScheduler5 *param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001ae,0,0,0,0,0);
    }
  }
  param_1[0x5e4] = (IGScheduler5)0x0;
  IGHardwareCommandStreamer5::resetLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(param_1 + 0xca0),0);
  notify(param_1,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::handleNormalHighPriThrottleTimerInterrupt(IOTimerEventSource*)

void __cdecl IGScheduler5::handleNormalHighPriThrottleTimerInterrupt(IGScheduler5 *param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001b2,0,0,0,0,0);
    }
  }
  param_1[0x764] = (IGScheduler5)0x0;
  IGHardwareCommandStreamer5::resetLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(param_1 + 0xca0),1);
  notify(param_1,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::handleNormalPriThrottleTimerInterrupt(IOTimerEventSource*)

void __cdecl IGScheduler5::handleNormalPriThrottleTimerInterrupt(IGScheduler5 *param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001b6,0,0,0,0,0);
    }
  }
  param_1[0x8e4] = (IGScheduler5)0x0;
  IGHardwareCommandStreamer5::resetLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(param_1 + 0xca0),2);
  notify(param_1,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::handleLowPriThrottleTimerInterrupt(IOTimerEventSource*)

void __cdecl IGScheduler5::handleLowPriThrottleTimerInterrupt(IGScheduler5 *param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001ba,0,0,0,0,0);
    }
  }
  param_1[0xa64] = (IGScheduler5)0x0;
  IGHardwareCommandStreamer5::resetLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(param_1 + 0xca0),3);
  notify(param_1,0);
  return;
}



// IGScheduler5::updateKnobs()

void __thiscall IGScheduler5::updateKnobs(IGScheduler5 *this)

{
  updateCredits(this);
  updateOptions(this);
  return;
}



// IGScheduler5::updateCredits()

void __thiscall IGScheduler5::updateCredits(IGScheduler5 *this)

{
  char *param1;
  undefined *puVar1;
  undefined *puVar2;
  IGScheduler5 *pIVar3;
  uint *puVar4;
  long lVar5;
  undefined *param3;
  
  pIVar3 = this + 0x5cc;
  puVar4 = &DAT_000aae80;
  lVar5 = 0;
  do {
    puVar1 = ___idvarGetParam(*puVar4);
    if ((0 < (long)puVar1) && (puVar2 = (undefined *)(long)*(int *)pIVar3, puVar1 != puVar2)) {
      param3 = *(undefined **)((long)&DAT_00112f30 + lVar5);
      if ((long)puVar1 < (long)*(undefined **)((long)&DAT_00112f30 + lVar5)) {
        param3 = puVar1;
      }
      if ((long)param3 <= (long)*(undefined **)((long)&DAT_00112f10 + lVar5)) {
        param3 = *(undefined **)((long)&DAT_00112f10 + lVar5);
      }
      if (param3 != puVar2) {
        param1 = *(char **)((long)&PTR_s_High_00125b20 + lVar5);
        _IOLog("[IGPU] schedPriCredits%s %d -> %lld\n",param1,puVar2,param3);
        _kprintf("[IGPU] schedPriCredits%s %d -> %lld\n",param1,*(int *)pIVar3,(longlong)param3);
        *(int *)pIVar3 = (int)param3;
      }
    }
    lVar5 = lVar5 + 8;
    puVar4 = puVar4 + 1;
    pIVar3 = pIVar3 + 0x180;
  } while (lVar5 != 0x20);
  return;
}



// IGScheduler5::updateOptions()

void __thiscall IGScheduler5::updateOptions(IGScheduler5 *this)

{
  undefined *puVar1;
  int iVar2;
  
  puVar1 = ___idvarGetParam(0x20);
  if ((puVar1 != (undefined *)0x0) != (bool)(((byte)this[0xc] & 4) >> 2)) {
    (**(code **)(*(long *)this + 0x238 + (ulong)(puVar1 == (undefined *)0x0) * 8))(this,4);
  }
  puVar1 = ___idvarGetParam(0x21);
  iVar2 = -1;
  if (0 < (int)puVar1) {
    iVar2 = (int)puVar1;
  }
  if (iVar2 != *(int *)(this + 0x230)) {
    *(int *)(this + 0x230) = iVar2;
  }
  return;
}



// IGScheduler5::resetCredits()

void __thiscall IGScheduler5::resetCredits(IGScheduler5 *this)

{
  long lVar1;
  
  lVar1 = 0;
  do {
    if (*(int *)(this + lVar1 + 0x5c8) < 1) {
      *(undefined4 *)(this + lVar1 + 0x5c8) = *(undefined4 *)(this + lVar1 + 0x5cc);
    }
    lVar1 = lVar1 + 0x180;
  } while (lVar1 != 0x600);
  return;
}



// IGScheduler5::verifyThrottling(bool*)

void __thiscall IGScheduler5::verifyThrottling(IGScheduler5 *this,long param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  uint uVar4;
  undefined *puVar5;
  ulong uVar6;
  ulong uVar7;
  long lVar8;
  IGScheduler5 *pIVar9;
  uint local_48 [4];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  uVar4 = *(uint *)(this + 0xa90);
  uVar1 = *(undefined4 *)(this + 0xa94);
  uVar2 = *(undefined4 *)(this + 0xa98);
  uVar3 = *(undefined4 *)(this + 0xa9c);
  local_48[0] = uVar4;
  local_48[1] = uVar1;
  local_48[2] = uVar2;
  local_48[3] = uVar3;
  puVar5 = ___idvarGetParam(0x22);
  if (puVar5 != (undefined *)0x0) {
    puVar5 = ___idvarGetParam(0x26);
    local_48[0] = (uint)puVar5;
    if (puVar5 == (undefined *)0xffffffffffffffff) {
      local_48[0] = uVar4;
    }
    puVar5 = ___idvarGetParam(0x25);
    local_48[1] = (int)puVar5;
    if (puVar5 == (undefined *)0xffffffffffffffff) {
      local_48[1] = uVar1;
    }
    puVar5 = ___idvarGetParam(0x24);
    local_48[2] = (int)puVar5;
    if (puVar5 == (undefined *)0xffffffffffffffff) {
      local_48[2] = uVar2;
    }
    puVar5 = ___idvarGetParam(0x23);
    local_48[3] = (int)puVar5;
    if (puVar5 == (undefined *)0xffffffffffffffff) {
      local_48[3] = uVar3;
    }
  }
  pIVar9 = this + 0x5e0;
  lVar8 = 0;
  do {
    uVar6 = IGHardwareCommandStreamer5::getLastContextRunTimeNS
                      (*(IGHardwareCommandStreamer5 **)(this + 0xca0),(byte)lVar8);
    uVar7 = (ulong)local_48[lVar8];
    if (0x62 < local_48[lVar8]) {
      uVar7 = 99;
    }
    uVar4 = (uint)(((100 - uVar7 >> 1) + (uVar6 / 1000) * uVar7) / (100 - uVar7));
    if ((uint)(*(int *)(this + 0xa8c) * 1000) < uVar4) {
      uVar4 = *(int *)(this + 0xa8c) * 1000;
    }
    *(uint *)pIVar9 = uVar4;
    *(bool *)(param_1 + lVar8) = uVar4 != 0;
    lVar8 = lVar8 + 1;
    pIVar9 = pIVar9 + 0x180;
  } while (lVar8 != 4);
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGScheduler5::getLastContextRunTimeNS(unsigned char) const

void __thiscall IGScheduler5::getLastContextRunTimeNS(IGScheduler5 *this,byte param_1)

{
  IGHardwareCommandStreamer5::getLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(this + 0xca0),param_1);
  return;
}



// IGScheduler5::notifyAsyncEngines(int)

void __thiscall IGScheduler5::notifyAsyncEngines(IGScheduler5 *this,uint param_1)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  undefined8 uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  long lVar8;
  ulong local_100 [8];
  ulong local_c0 [18];
  
  local_c0[8] = *(ulong *)__got::___stack_chk_guard;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) {
    bVar1 = *(byte *)((long)&IG_STAMP_INDEX_TO_HWCS_LUT + (ulong)param_1);
    IGAccelTask::getStampAtIndex
              (local_c0,*(long *)(*(long *)(this + 0x10) + 0x150),(long)(int)param_1);
    iVar3 = (int)local_c0[0];
    local_c0[7] = 0;
    local_c0[6] = 0;
    local_c0[5] = 0;
    local_c0[4] = 0;
    local_c0[3] = 0;
    local_c0[2] = 0;
    local_c0[1] = 0;
    bVar2 = bVar1 & 0x3f;
    local_c0[0] = *(ulong *)(&DAT_00001340 + *(long *)(this + 0x10));
    local_100[7] = 0;
    local_100[6] = 0;
    local_100[5] = 0;
    local_100[4] = 0;
    local_100[3] = 0;
    local_100[2] = 0;
    local_c0[bVar1 >> 6] =
         local_c0[bVar1 >> 6] & (-2L << bVar2 | 0xfffffffffffffffeU >> 0x40 - bVar2);
    local_100[1] = 0;
    local_100[0] = 0;
    if (local_c0[0] != 0) {
      uVar7 = 0;
      if (local_c0[0] != 0) {
        for (; (local_c0[0] >> uVar7 & 1) == 0; uVar7 = uVar7 + 1) {
        }
      }
      do {
        uVar6 = uVar7 + 1;
        uVar4 = IGHardwareCommandStreamer5::checkUnblock
                          (*(IGHardwareCommandStreamer5 **)(this + uVar6 * 8 + 0xc98),param_1,iVar3,
                           *(int *)(&DAT_00125919 + uVar7 * 0x79),
                           *(uint *)(&DAT_00125921 + uVar7 * 0x79));
        if ((char)uVar4 != '\0') {
          local_100[uVar7 >> 6] = local_100[uVar7 >> 6] | 1L << ((byte)uVar7 & 0x3f);
        }
        if (4 < uVar6) break;
        uVar5 = (local_c0[uVar6 >> 6] >> ((byte)uVar6 & 0x3f)) << ((byte)uVar6 & 0x3f);
        lVar8 = 0;
        if (uVar5 != 0) {
          for (; (uVar5 >> lVar8 & 1) == 0; lVar8 = lVar8 + 1) {
          }
        }
        uVar7 = (uVar6 & 0xffffffffffffffc0) + lVar8;
      } while (uVar5 != 0);
      if (local_100[0] != 0) {
        lVar8 = 0;
        if (local_100[0] != 0) {
          for (; (local_100[0] >> lVar8 & 1) == 0; lVar8 = lVar8 + 1) {
          }
        }
        do {
          uVar7 = lVar8 + 1;
          notify(this,(int)uVar7 - 1U & 0xff);
          if (4 < uVar7) break;
          uVar6 = (local_100[uVar7 >> 6] >> ((byte)uVar7 & 0x3f)) << ((byte)uVar7 & 0x3f);
          lVar8 = 0;
          if (uVar6 != 0) {
            for (; (uVar6 >> lVar8 & 1) == 0; lVar8 = lVar8 + 1) {
            }
          }
          lVar8 = (uVar7 & 0xffffffffffffffc0) + lVar8;
        } while (uVar6 != 0);
      }
    }
  }
  if (*(long *)__got::___stack_chk_guard != local_c0[8]) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGScheduler5::bind(IGHardwareContext*, int, unsigned char)

int __thiscall
IGScheduler5::bind(IGScheduler5 *this,int param_1,sockaddr *param_2,socklen_t param_3)

{
  byte bVar1;
  undefined8 uVar2;
  int iVar3;
  undefined4 in_register_00000034;
  
  bVar1 = *(byte *)(CONCAT44(in_register_00000034,param_1) + 0x6c);
  iVar3 = (int)param_2;
  if (((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) && (bVar1 == 0)) {
    *(int *)(this + (long)iVar3 * 4 + (ulong)(byte)param_3 * 0x180 + 0x4c0) =
         *(int *)(this + (long)iVar3 * 4 + (ulong)(byte)param_3 * 0x180 + 0x4c0) + 1;
    *(ulong *)(this + ((ulong)(long)iVar3 >> 6) * 8 + (ulong)(byte)param_3 * 0x180 + 0x480) =
         *(ulong *)(this + ((ulong)(long)iVar3 >> 6) * 8 + (ulong)(byte)param_3 * 0x180 + 0x480) |
         1L << ((byte)param_2 & 0x3f);
  }
  uVar2 = IGHardwareCommandStreamer5::setWorkQueueBinding
                    (*(IGHardwareCommandStreamer5 **)(this + (ulong)bVar1 * 8 + 0xca0),iVar3,1);
  return (int)CONCAT71((int7)((ulong)uVar2 >> 8),1);
}



// IGScheduler5::rebind(IGHardwareContext*, unsigned char)

int __thiscall IGScheduler5::rebind(void *this,IGHardwareContext *param_2,IGHardwareContext param_3)

{
  ulong *puVar1;
  int *piVar2;
  int iVar3;
  byte bVar4;
  int iVar5;
  ulong uVar6;
  long lVar7;
  long lVar8;
  
  if (((((*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) & 0x18000) != 0x8000) &&
       (param_2[0x78] != param_3)) && (param_2[0x6c] == (IGHardwareContext)0x0)) &&
     (uVar6 = IGHardwareContext::waitForIdle(param_2), (char)uVar6 != '\0')) {
    lVar8 = (ulong)(byte)param_3 * 0x180;
    iVar5 = *(int *)(*(long *)(param_2 + 0xb0) + 0x20);
    uVar6 = (ulong)iVar5;
    lVar7 = (ulong)(byte)param_2[0x78] * 0x180;
    iVar3 = *(int *)((long)this + uVar6 * 4 + lVar7 + 0x4c0);
    *(int *)((long)this + uVar6 * 4 + lVar7 + 0x4c0) = iVar3 + -1;
    if (iVar3 == 1) {
      bVar4 = (byte)iVar5 & 0x3f;
      puVar1 = (ulong *)((long)this + (uVar6 >> 6) * 8 + lVar7 + 0x480);
      *puVar1 = *puVar1 & (-2L << bVar4 | 0xfffffffffffffffeU >> 0x40 - bVar4);
    }
    IGHardwareCommandStreamer5::setWorkQueueBinding
              (*(IGHardwareCommandStreamer5 **)((long)this + (ulong)(byte)param_2[0x6c] * 8 + 0xca0)
               ,iVar5,0);
    iVar5 = (**(code **)(*(long *)this + 0x140))(this,param_2[0x6c],(ulong)(byte)param_3);
    piVar2 = (int *)((long)this + (long)iVar5 * 4 + lVar8 + 0x4c0);
    *piVar2 = *piVar2 + 1;
    puVar1 = (ulong *)((long)this + ((ulong)(long)iVar5 >> 6) * 8 + lVar8 + 0x480);
    *puVar1 = *puVar1 | 1L << ((byte)iVar5 & 0x3f);
    IGHardwareCommandStreamer5::setWorkQueueBinding
              (*(IGHardwareCommandStreamer5 **)((long)this + (ulong)(byte)param_2[0x6c] * 8 + 0xca0)
               ,iVar5,1);
    return iVar5;
  }
  return *(int *)(*(long *)(param_2 + 0xb0) + 0x20);
}



// IGScheduler5::unbind(IGHardwareContext*)

void __thiscall IGScheduler5::unbind(IGScheduler5 *this,long param_1)

{
  int iVar1;
  int iVar2;
  byte bVar3;
  byte bVar4;
  ulong uVar5;
  
  iVar1 = *(int *)(*(long *)(param_1 + 0xb0) + 0x20);
  uVar5 = (ulong)iVar1;
  bVar4 = *(byte *)(param_1 + 0x6c);
  if (((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) && (bVar4 == 0)) {
    bVar4 = *(byte *)(param_1 + 0x78);
    iVar2 = *(int *)(this + uVar5 * 4 + (ulong)bVar4 * 0x180 + 0x4c0);
    *(int *)(this + uVar5 * 4 + (ulong)bVar4 * 0x180 + 0x4c0) = iVar2 + -1;
    if (iVar2 == 1) {
      bVar3 = (byte)iVar1 & 0x3f;
      *(ulong *)(this + (uVar5 >> 6) * 8 + (ulong)bVar4 * 0x180 + 0x480) =
           *(ulong *)(this + (uVar5 >> 6) * 8 + (ulong)bVar4 * 0x180 + 0x480) &
           (-2L << bVar3 | 0xfffffffffffffffeU >> 0x40 - bVar3);
    }
    bVar4 = 0;
  }
  IGHardwareCommandStreamer5::setWorkQueueBinding
            (*(IGHardwareCommandStreamer5 **)(this + (ulong)bVar4 * 8 + 0xca0),iVar1,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::signalDisplayStampUpdate(int)

void __cdecl IGScheduler5::signalDisplayStampUpdate(IGScheduler5 *param_1)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(param_1 + 0x10);
  if (((*(uint *)(&DAT_000011c0 + lVar1) & 0x18000) == 0) &&
     (uVar3 = *(ulong *)(&DAT_00001340 + lVar1), uVar3 != 0)) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      if (*(long *)(*(long *)(param_1 + uVar3 * 8 + 0xc98) + 0x3c0) != 0) {
        notify(param_1,(uint)(byte)(&kIGHwCsDesc)[lVar4 * 0x79]);
      }
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::push(IGHardwareContext*, unsigned int, unsigned int, bool, bool)

ulong __thiscall
IGScheduler5::push(IGScheduler5 *this,long param_1,undefined4 param_2,undefined4 param_3,
                  uint param_4,uint param_5)

{
  undefined4 uVar1;
  long lVar2;
  undefined *puVar3;
  undefined *puVar4;
  long lVar5;
  undefined8 unaff_R12;
  ulong uVar6;
  ulong uVar7;
  
  lVar2 = *(long *)(this + (long)*(int *)(*(long *)(param_1 + 0xb0) + 0x20) * 8 + 0xaa0);
  uVar7 = (ulong)((int)*(undefined8 *)(lVar2 + 0x4048) + 1U & 0x1ff);
  uVar6 = CONCAT71((int7)((ulong)unaff_R12 >> 8),1);
  if (uVar7 == *(ulong *)(lVar2 + 0x4000)) {
    puVar3 = (undefined *)0x0;
    do {
      puVar4 = puVar3;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      if (puVar4 == &DAT_000f423f) {
        uVar6 = 0x137300;
        goto LAB_000379cc;
      }
      puVar3 = puVar4 + 1;
    } while (uVar7 == *(ulong *)(lVar2 + 0x4000));
    uVar6 = CONCAT71(0x1373,puVar4 < &DAT_000f423f);
  }
  uVar1 = *(undefined4 *)(*(long *)(*(long *)(param_1 + 0xb0) + 0x130) + 0x44);
  lVar5 = *(long *)(lVar2 + 0x4048) * 0x20;
  *(long *)(lVar2 + lVar5) = param_1;
  *(undefined4 *)(lVar2 + 8 + lVar5) = param_2;
  *(undefined4 *)(lVar2 + 0xc + lVar5) = param_3;
  *(undefined8 *)(lVar2 + 0x10 + lVar5) = 0;
  *(undefined4 *)(lVar2 + 0x18 + lVar5) = uVar1;
  *(uint *)(lVar2 + 0x1c + lVar5) = (param_5 & 0xff) * 4 + (param_4 & 0xff) * 2 + 1;
  _OSAddAtomic16(1,param_1 + 0x60);
  *(ulong *)(lVar2 + 0x4048) = uVar7;
  notify(this,(uint)*(byte *)(param_1 + 0x6c));
LAB_000379cc:
  return uVar6 & 0xffffffff;
}



// IGScheduler5::enableInterrupts()

void __thiscall IGScheduler5::enableInterrupts(IGScheduler5 *this)

{
  enableContextSwitchInterrupts(this);
  enableErrorInterrupts(this);
  return;
}



// IGScheduler5::enableContextSwitchInterrupts()

void __thiscall IGScheduler5::enableContextSwitchInterrupts(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::enableContextSwitchInterrupt
                (*(IGHardwareCommandStreamer5 **)(this + uVar3 * 8 + 0xc98));
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::enableErrorInterrupts()

void __thiscall IGScheduler5::enableErrorInterrupts(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::enableErrorInterrupt
                (*(IGHardwareCommandStreamer5 **)(this + uVar3 * 8 + 0xc98));
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::disableInterrupts()

void __thiscall IGScheduler5::disableInterrupts(IGScheduler5 *this)

{
  disableErrorInterrupts(this);
  disableContextSwitchInterrupts(this);
  return;
}



// IGScheduler5::disableErrorInterrupts()

void __thiscall IGScheduler5::disableErrorInterrupts(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::disableErrorInterrupt
                (*(IGHardwareCommandStreamer5 **)(this + uVar3 * 8 + 0xc98));
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::disableContextSwitchInterrupts()

void __thiscall IGScheduler5::disableContextSwitchInterrupts(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::disableContextSwitchInterrupt();
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::enableStampInterrupt(int)

void __thiscall IGScheduler5::enableStampInterrupt(IGScheduler5 *this,uint param_1)

{
  undefined **ppuVar1;
  
  ppuVar1 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar1 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer5 **)
       (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0xca0) !=
      (IGHardwareCommandStreamer5 *)0x0) {
    IGHardwareCommandStreamer5::enableStampInterrupt
              (*(IGHardwareCommandStreamer5 **)
                (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0xca0),param_1);
    return;
  }
  return;
}



// IGScheduler5::disableStampInterrupt(int)

void __thiscall IGScheduler5::disableStampInterrupt(IGScheduler5 *this,uint param_1)

{
  undefined **ppuVar1;
  
  ppuVar1 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar1 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer5 **)
       (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0xca0) !=
      (IGHardwareCommandStreamer5 *)0x0) {
    IGHardwareCommandStreamer5::disableStampInterrupt
              (*(IGHardwareCommandStreamer5 **)
                (this + (ulong)*(byte *)((long)ppuVar1 + (ulong)param_1) * 8 + 0xca0),param_1);
    return;
  }
  return;
}



// IGScheduler5::isStampInterruptEnabled(int)

ulong __thiscall IGScheduler5::isStampInterruptEnabled(IGScheduler5 *this,uint param_1)

{
  ulong uVar1;
  undefined **ppuVar2;
  
  ppuVar2 = &IG_STAMP_INDEX_TO_HWCS_LUT;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
    ppuVar2 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
  }
  if (*(IGHardwareCommandStreamer5 **)
       (this + (ulong)*(byte *)((long)ppuVar2 + (ulong)param_1) * 8 + 0xca0) !=
      (IGHardwareCommandStreamer5 *)0x0) {
    uVar1 = IGHardwareCommandStreamer5::isStampInterruptEnabled
                      (*(IGHardwareCommandStreamer5 **)
                        (this + (ulong)*(byte *)((long)ppuVar2 + (ulong)param_1) * 8 + 0xca0),
                       param_1);
    return uVar1;
  }
  return 0;
}



// IGScheduler5::pause()

int __thiscall IGScheduler5::pause(IGScheduler5 *this)

{
  long lVar1;
  int iVar2;
  ulong uVar3;
  ulong uVar4;
  long lVar5;
  
  this[0xa88] = (IGScheduler5)0x1;
  lVar1 = *(long *)(this + 0x10);
  uVar4 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar4 != 0) {
    lVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
      }
    }
    do {
      uVar4 = lVar5 + 1;
      iVar2 = IGHardwareCommandStreamer5::pauseScheduling
                        (*(IGHardwareCommandStreamer5 **)(this + uVar4 * 8 + 0xc98));
      if (4 < uVar4) {
        return iVar2;
      }
      uVar3 = (*(ulong *)(&DAT_00001340 + (uVar4 >> 6) * 8 + lVar1) >> ((byte)uVar4 & 0x3f)) <<
              ((byte)uVar4 & 0x3f);
      lVar5 = 0;
      if (uVar3 != 0) {
        for (; (uVar3 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
        }
      }
      lVar5 = (uVar4 & 0xffffffffffffffc0) + lVar5;
    } while (uVar3 != 0);
  }
  return 0;
}



// IGScheduler5::resume()

void __thiscall IGScheduler5::resume(IGScheduler5 *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  
  this[0xa88] = (IGScheduler5)0x0;
  lVar1 = *(long *)(this + 0x10);
  uVar3 = *(ulong *)(&DAT_00001340 + lVar1);
  if (uVar3 != 0) {
    lVar4 = 0;
    if (uVar3 != 0) {
      for (; (uVar3 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      IGHardwareCommandStreamer5::resumeScheduling
                (*(IGHardwareCommandStreamer5 **)(this + uVar3 * 8 + 0xc98));
      if (4 < uVar3) {
        return;
      }
      uVar2 = (*(ulong *)(&DAT_00001340 + (uVar3 >> 6) * 8 + lVar1) >> ((byte)uVar3 & 0x3f)) <<
              ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar2 != 0);
  }
  return;
}



// IGScheduler5::prepareGPUReset(IGHwCsType)

void IGScheduler5::prepareGPUReset(void)

{
  return;
}



// IGScheduler5::resetLastContextRunTimeNS(unsigned char)

void __thiscall IGScheduler5::resetLastContextRunTimeNS(IGScheduler5 *this,byte param_1)

{
  IGHardwareCommandStreamer5::resetLastContextRunTimeNS
            (*(IGHardwareCommandStreamer5 **)(this + 0xca0),param_1);
  return;
}



// IGScheduler5::isContextIdle(IGHardwareContext const*) const

undefined8 __thiscall IGScheduler5::isContextIdle(IGScheduler5 *this,long param_1)

{
  char cVar1;
  undefined8 uVar2;
  
  cVar1 = _OSCompareAndSwap64(0,0,param_1 + 0x60);
  if (cVar1 != '\0') {
                    // WARNING: Could not recover jumptable at 0x00037dd3. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar2 = (**(code **)(**(long **)(*(long *)(this + 0x10) + 0x380) + 400))
                      (*(long **)(*(long *)(this + 0x10) + 0x380),*(long *)(param_1 + 0xb0) + 0x138)
    ;
    return uVar2;
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler5::systemWillSleep()

void __cdecl IGScheduler5::systemWillSleep(IGScheduler *param_1)

{
  IGScheduler::systemWillSleep(param_1);
  return;
}



// IGScheduler5::systemDidWake()

void __thiscall IGScheduler5::systemDidWake(IGScheduler5 *this)

{
  IGScheduler::systemDidWake();
  resetCommandStreamersOnWake(this);
  return;
}



// IGScheduler5::initPriorityConfig()

ulong __thiscall IGScheduler5::initPriorityConfig(IGScheduler5 *this)

{
  uint uVar1;
  OSMetaClassBase *pOVar2;
  OSMetaClass *pOVar3;
  long *plVar4;
  void *pvVar5;
  char *pcVar6;
  long lVar7;
  undefined8 unaff_RBX;
  ulong uVar8;
  uint local_2c;
  
  plVar4 = *(long **)(this + 0x10);
  uVar8 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
  if ((*(uint *)(plVar4 + 0x238) & 0x18000) != 0) goto LAB_00038143;
  pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4);
  local_2c = 100;
  if (pOVar2 == (OSMetaClassBase *)0x0) {
    pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"Development");
    plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass);
    if ((plVar4 != (long *)0x0) &&
       (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x208))(plVar4),
       pOVar2 != (OSMetaClassBase *)0x0)) goto LAB_00037e5f;
  }
  else {
LAB_00037e5f:
    pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
    if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
      plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
      local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
    }
    else {
      pOVar3 = (OSMetaClass *)(**(code **)(*(long *)pOVar2 + 0x38))(pOVar2);
      if (pOVar3 == *(OSMetaClass **)__got::metaClass) {
        plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,pOVar3);
        pvVar5 = (void *)(**(code **)(*plVar4 + 0x178))(plVar4);
        uVar1 = (**(code **)(*plVar4 + 0x140))(plVar4);
        if (4 < uVar1) {
          initPriorityConfig();
          return 0;
        }
        _memcpy(&local_2c,pvVar5,(ulong)uVar1);
      }
    }
  }
  plVar4 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar4 != (long *)0x0) &&
      (pOVar2 = (OSMetaClassBase *)(**(code **)(*plVar4 + 0x2b8))(plVar4,"SchedThrottleCapMS"),
      pOVar2 != (OSMetaClassBase *)0x0)) &&
     (plVar4 = (long *)OSMetaClassBase::safeMetaCast(pOVar2,*(OSMetaClass **)__got::metaClass),
     plVar4 != (long *)0x0)) {
    pcVar6 = (char *)(**(code **)(*plVar4 + 0x178))(plVar4);
    plVar4 = (long *)OSNumber::withNumber(pcVar6,0x20);
    if (plVar4 != (long *)0x0) {
      local_2c = (**(code **)(*plVar4 + 0x148))(plVar4);
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
  }
  uVar1 = 0x4e2;
  if (local_2c < 0x4e2) {
    uVar1 = local_2c;
  }
  *(uint *)(this + 0xa8c) = uVar1;
  _IOLog("[IGPU] Scheduler Throttle Cap = %dms.\n");
  _kprintf("[IGPU] Scheduler Throttle Cap = %dms.\n",*(int *)(this + 0xa8c));
  *(undefined4 *)(this + 0x5cc) = 4;
  *(undefined4 *)(this + 0x74c) = 3;
  *(undefined4 *)(this + 0x8cc) = 2;
  *(undefined4 *)(this + 0xa4c) = 1;
  lVar7 = 0x5cc;
  do {
    *(undefined4 *)(this + lVar7 + -8) = 0x41;
    *(undefined4 *)(this + lVar7 + -4) = *(undefined4 *)(this + lVar7);
    lVar7 = lVar7 + 0x180;
  } while (lVar7 != 0xbcc);
  plVar4 = (long *)IOTimerEventSource::timerEventSource
                             ((OSObject *)this,handleHighPriThrottleTimerInterrupt);
  if (plVar4 != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xa80) + 0x140))(*(long **)(this + 0xa80),plVar4);
    (**(code **)(*plVar4 + 0x150))(plVar4);
    *(long **)(this + 0x5d8) = plVar4;
    plVar4 = (long *)IOTimerEventSource::timerEventSource
                               ((OSObject *)this,handleNormalHighPriThrottleTimerInterrupt);
    if (plVar4 != (long *)0x0) {
      (**(code **)(**(long **)(this + 0xa80) + 0x140))(*(long **)(this + 0xa80),plVar4);
      (**(code **)(*plVar4 + 0x150))(plVar4);
      *(long **)(this + 0x758) = plVar4;
      plVar4 = (long *)IOTimerEventSource::timerEventSource
                                 ((OSObject *)this,handleNormalPriThrottleTimerInterrupt);
      if (plVar4 != (long *)0x0) {
        (**(code **)(**(long **)(this + 0xa80) + 0x140))(*(long **)(this + 0xa80),plVar4);
        (**(code **)(*plVar4 + 0x150))(plVar4);
        *(long **)(this + 0x8d8) = plVar4;
        plVar4 = (long *)IOTimerEventSource::timerEventSource
                                   ((OSObject *)this,handleLowPriThrottleTimerInterrupt);
        if (plVar4 != (long *)0x0) {
          (**(code **)(**(long **)(this + 0xa80) + 0x140))(*(long **)(this + 0xa80),plVar4);
          (**(code **)(*plVar4 + 0x150))(plVar4);
          *(long **)(this + 0xa58) = plVar4;
          goto LAB_00038143;
        }
      }
    }
  }
  uVar8 = 0;
LAB_00038143:
  return uVar8 & 0xffffffff;
}



// IGScheduler5::free()

void __thiscall IGScheduler5::free(IGScheduler5 *this,void *param_1)

{
  ulong uVar1;
  void *pvVar2;
  long lVar3;
  ulong uVar4;
  long lVar5;
  
  lVar3 = 0x5d8;
  do {
    if (*(long *)(this + lVar3) != 0) {
      (**(code **)(**(long **)(this + 0xa80) + 0x148))();
      (**(code **)(**(long **)(this + lVar3) + 0x28))();
    }
    lVar3 = lVar3 + 0x180;
  } while (lVar3 != 0xbd8);
  if (*(long *)(this + 0xcd0) != 0) {
    (**(code **)(**(long **)(this + 0xa80) + 0x148))();
    (**(code **)(**(long **)(this + 0xcd0) + 0x28))();
  }
  lVar3 = *(long *)(this + 0x10);
  uVar4 = *(ulong *)(&DAT_00001340 + lVar3);
  if (uVar4 != 0) {
    lVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
      }
    }
    do {
      uVar4 = lVar5 + 1;
      if (*(long **)(this + uVar4 * 8 + 0xc98) != (long *)0x0) {
        (**(code **)(**(long **)(this + uVar4 * 8 + 0xc98) + 0x28))();
      }
      *(undefined8 *)(this + uVar4 * 8 + 0xc98) = 0;
      if (4 < uVar4) break;
      uVar1 = (*(ulong *)(&DAT_00001340 + (uVar4 >> 6) * 8 + lVar3) >> ((byte)uVar4 & 0x3f)) <<
              ((byte)uVar4 & 0x3f);
      lVar5 = 0;
      if (uVar1 != 0) {
        for (; (uVar1 >> lVar5 & 1) == 0; lVar5 = lVar5 + 1) {
        }
      }
      lVar5 = (uVar4 & 0xffffffffffffffc0) + lVar5;
    } while (uVar1 != 0);
  }
  lVar3 = 0x154;
  do {
    pvVar2 = (void *)0x4080;
    _IOFree(*(undefined8 *)(this + lVar3 * 8));
    lVar3 = lVar3 + 1;
  } while (lVar3 != 0x194);
  if (*(long **)(this + 0xa80) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xa80) + 0x28))();
  }
  *(undefined8 *)(this + 0xa80) = 0;
  IGScheduler::free((IGScheduler *)this,pvVar2);
  return;
}



// IGScheduler5::MetaClass::~MetaClass()

void __thiscall IGScheduler5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGScheduler5::initSharedPrivateData(IGHardwareContext*)

void IGScheduler5::initSharedPrivateData(void)

{
  return;
}



// IGScheduler5::updateSharedPrivateData(IGHardwareContext*)

void IGScheduler5::updateSharedPrivateData(void)

{
  return;
}



// IGScheduler5::cleanupSharedPrivateData(IGHardwareContext*)

void IGScheduler5::cleanupSharedPrivateData(void)

{
  return;
}



// IGScheduler5::isHung(unsigned int)

undefined8 IGScheduler5::isHung(void)

{
  return 0;
}



// IGScheduler5::setPmAttributes(void const*)

undefined8 IGScheduler5::setPmAttributes(void)

{
  return 0xe00002c7;
}



// IGScheduler5::getPmUtilizationSnapshot()

undefined8 IGScheduler5::getPmUtilizationSnapshot(void)

{
  return 0xe00002c7;
}



// IGScheduler5::setPerfLogLevel(unsigned long long)

void IGScheduler5::setPerfLogLevel(void)

{
  return;
}



// IGScheduler5::updateThermalStallConfigs(unsigned int, unsigned int)

void IGScheduler5::updateThermalStallConfigs(void)

{
  return;
}



// IGScheduler5::updateThermalStallStats(ThermalStallStats*)

void IGScheduler5::updateThermalStallStats(void)

{
  return;
}



// IGScheduler5::getWorkLoop() const

undefined8 __thiscall IGScheduler5::getWorkLoop(IGScheduler5 *this)

{
  return *(undefined8 *)(this + 0xa80);
}



void __GLOBAL__sub_I_IGScheduler_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGScheduler5::gMetaClass,"IGScheduler5",
             (OSMetaClass *)&IGScheduler::gMetaClass,0xd00);
  IGScheduler5::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGScheduler5::gMetaClass);
  return;
}



// IGHardwareCommandStreamer5::MetaClass::MetaClass()

void __thiscall IGHardwareCommandStreamer5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareCommandStreamer5",(OSMetaClass *)__got::gMetaClass,
             0x1c80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareCommandStreamer5::MetaClass::~MetaClass()

void __thiscall IGHardwareCommandStreamer5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareCommandStreamer5::IGHardwareCommandStreamer5(OSMetaClass const*)

void __thiscall
IGHardwareCommandStreamer5::IGHardwareCommandStreamer5
          (IGHardwareCommandStreamer5 *this,OSMetaClass *param_1)

{
  IGHardwareCommandStreamer5 *pIVar1;
  long lVar2;
  
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  lVar2 = 0;
  do {
    *(undefined8 *)(this + lVar2 + 0x38) = 0;
    *(undefined8 *)(this + lVar2 + 0x30) = 0;
    lVar2 = lVar2 + 0x10;
  } while (lVar2 != 0x20);
  *(undefined4 *)(this + 0x50) = 0;
  lVar2 = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 0x240) = 0;
  *(undefined8 *)(this + 0x380) = 0;
  *(undefined8 *)(this + 0x3c0) = 0;
  pIVar1 = this + 0x1400;
  do {
    *(undefined8 *)(this + lVar2 + 0x400) = 0;
    lVar2 = lVar2 + 0x40;
  } while (lVar2 != 0x1000);
  do {
    *(undefined8 *)pIVar1 = 0;
    *(undefined4 *)(pIVar1 + 0xc) = 0xffffffff;
    *(uint *)(pIVar1 + 8) = *(uint *)(pIVar1 + 8) & 0xfffc0000 | 0xffff;
    pIVar1 = pIVar1 + 0x10;
  } while (pIVar1 != this + 0x1c00);
  this[0x1c3c] = (IGHardwareCommandStreamer5)0x1;
  return;
}



// IGHardwareCommandStreamer5::IGHardwareCommandStreamer5(OSMetaClass const*)

void __thiscall
IGHardwareCommandStreamer5::IGHardwareCommandStreamer5
          (IGHardwareCommandStreamer5 *this,OSMetaClass *param_1)

{
  IGHardwareCommandStreamer5(this,param_1);
  return;
}



// IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5()

void __thiscall
IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5(IGHardwareCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5()

void __thiscall
IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5(IGHardwareCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5()

void __thiscall
IGHardwareCommandStreamer5::~IGHardwareCommandStreamer5(IGHardwareCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareCommandStreamer5_ktv,this,0x1c80);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::operator delete(void*, unsigned long)

void __cdecl IGHardwareCommandStreamer5::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareCommandStreamer5_ktv,param_1,param_2);
  return;
}



// IGHardwareCommandStreamer5::getMetaClass() const

undefined8 * IGHardwareCommandStreamer5::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareCommandStreamer5::MetaClass::MetaClass()

void __thiscall IGHardwareCommandStreamer5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareCommandStreamer5",(OSMetaClass *)__got::gMetaClass,
             0x1c80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareCommandStreamer5::MetaClass::alloc() const

IGHardwareCommandStreamer5 * IGHardwareCommandStreamer5::MetaClass::alloc(void)

{
  IGHardwareCommandStreamer5 *this;
  
  this = (IGHardwareCommandStreamer5 *)
         _OSObject_typed_operator_new(&IGHardwareCommandStreamer5_ktv,0x1c80);
  IGHardwareCommandStreamer5(this);
  return this;
}



// IGHardwareCommandStreamer5::operator new(unsigned long)

void * __thiscall IGHardwareCommandStreamer5::operator_new(IGHardwareCommandStreamer5 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareCommandStreamer5_ktv,this);
  return pvVar1;
}



// IGHardwareCommandStreamer5::IGHardwareCommandStreamer5()

void __thiscall
IGHardwareCommandStreamer5::IGHardwareCommandStreamer5(IGHardwareCommandStreamer5 *this)

{
  IGHardwareCommandStreamer5(this);
  return;
}



// IGHardwareCommandStreamer5::IGHardwareCommandStreamer5()

void __thiscall
IGHardwareCommandStreamer5::IGHardwareCommandStreamer5(IGHardwareCommandStreamer5 *this)

{
  IGHardwareCommandStreamer5 *pIVar1;
  long lVar2;
  
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  lVar2 = 0;
  do {
    *(undefined8 *)(this + lVar2 + 0x38) = 0;
    *(undefined8 *)(this + lVar2 + 0x30) = 0;
    lVar2 = lVar2 + 0x10;
  } while (lVar2 != 0x20);
  *(undefined4 *)(this + 0x50) = 0;
  lVar2 = 0;
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 0x240) = 0;
  *(undefined8 *)(this + 0x380) = 0;
  *(undefined8 *)(this + 0x3c0) = 0;
  pIVar1 = this + 0x1400;
  do {
    *(undefined8 *)(this + lVar2 + 0x400) = 0;
    lVar2 = lVar2 + 0x40;
  } while (lVar2 != 0x1000);
  do {
    *(undefined8 *)pIVar1 = 0;
    *(undefined4 *)(pIVar1 + 0xc) = 0xffffffff;
    *(uint *)(pIVar1 + 8) = *(uint *)(pIVar1 + 8) & 0xfffc0000 | 0xffff;
    pIVar1 = pIVar1 + 0x10;
  } while (pIVar1 != this + 0x1c00);
  this[0x1c3c] = (IGHardwareCommandStreamer5)0x1;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::hardwareCommandStreamer(IOGraphicsAccelerator2*, IOWorkLoop*,
// IGScheduler5*, IGHwCsType)

IGHardwareCommandStreamer5 * __cdecl
IGHardwareCommandStreamer5::hardwareCommandStreamer
          (IntelAccelerator *param_1,undefined8 param_2,undefined8 param_3,uint param_4)

{
  char cVar1;
  IGHardwareCommandStreamer5 *this;
  undefined8 uVar2;
  
  if (param_4 == 0) {
    this = (IGHardwareCommandStreamer5 *)
           (**(code **)(IGHardwareRenderCommandStreamer5::gMetaClass + 0x88))
                     (&IGHardwareRenderCommandStreamer5::gMetaClass);
    if (this == (IGHardwareCommandStreamer5 *)0x0) {
      return (IGHardwareCommandStreamer5 *)0x0;
    }
    uVar2 = IGHardwareRenderCommandStreamer5::init(this,param_1,param_2,param_3);
    cVar1 = (char)uVar2;
  }
  else {
    this = (IGHardwareCommandStreamer5 *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
    if (this == (IGHardwareCommandStreamer5 *)0x0) {
      return (IGHardwareCommandStreamer5 *)0x0;
    }
    uVar2 = init(this,param_1,param_2,param_3,param_4 & 0xff);
    cVar1 = (char)uVar2;
  }
  if (cVar1 == '\0') {
    (**(code **)(*(long *)this + 0x28))(this);
    return (IGHardwareCommandStreamer5 *)0x0;
  }
  return this;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRenderCommandStreamer5::init(IOGraphicsAccelerator2*, IOWorkLoop*, IGScheduler5*)

undefined8 __cdecl
IGHardwareRenderCommandStreamer5::init
          (IGHardwareCommandStreamer5 *param_1,IntelAccelerator *param_2,undefined8 param_3,
          undefined8 param_4)

{
  undefined8 uVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  undefined8 uVar5;
  
  uVar5 = 0;
  uVar1 = IGHardwareCommandStreamer5::init(param_1,param_2,param_3,param_4,0);
  if ((char)uVar1 != '\0') {
    uVar3 = (uint)*(ushort *)(&DAT_000011c8 + *(long *)(param_1 + 0x10));
    if (15999 < uVar3) {
      uVar3 = 16000;
    }
    uVar4 = 100;
    if (100 < (ushort)uVar3) {
      uVar4 = uVar3;
    }
    *(uint *)(param_1 + 0x1c54) = uVar4;
    uVar3 = 16000;
    if (*(ushort *)(&DAT_000011ca + *(long *)(param_1 + 0x10)) < 16000) {
      uVar3 = (uint)*(ushort *)(&DAT_000011ca + *(long *)(param_1 + 0x10));
    }
    uVar4 = 1000;
    if (1000 < uVar3) {
      uVar4 = uVar3;
    }
    *(uint *)(param_1 + 0x1c58) = uVar4;
    lVar2 = IOTimerEventSource::timerEventSource((OSObject *)param_1,handlePreemptionTimerInterrupt)
    ;
    *(long *)(param_1 + 0x1c60) = lVar2;
    if (lVar2 == 0) {
      uVar5 = 0;
    }
    else {
      (**(code **)(**(long **)(param_1 + 0x18) + 0x140))(*(long **)(param_1 + 0x18),lVar2);
      (**(code **)(**(long **)(param_1 + 0x1c60) + 0x150))();
      uVar5 = 1;
    }
  }
  return uVar5;
}



// IGHardwareCommandStreamer5::init(IOGraphicsAccelerator2*, IOWorkLoop*, IGScheduler5*, IGHwCsType)

undefined8 __thiscall
IGHardwareCommandStreamer5::init
          (IGHardwareCommandStreamer5 *this,IntelAccelerator *param_1,undefined8 param_2,
          undefined8 param_3,uint param_4)

{
  char cVar1;
  IGSharedMappedBuffer *this_00;
  undefined8 uVar2;
  long *plVar3;
  long lVar4;
  IGHwCsStatsTracker *pIVar5;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 != '\0') {
    *(IntelAccelerator **)(this + 0x10) = param_1;
    *(undefined8 *)(this + 0x18) = param_2;
    *(undefined8 *)(this + 0x20) = param_3;
    this[0x1c00] = (IGHardwareCommandStreamer5)0x0;
    *(undefined4 *)(this + 0x1c04) = 7;
    this[0x1c20] = (IGHardwareCommandStreamer5)0x1;
    this[0x1c28] = (IGHardwareCommandStreamer5)0x7f;
    *(uint *)(this + 0x1c24) =
         (*(uint *)((long)&nlist_00145998.n_strx + *(long *)(param_1 + 0x1270)) & 0xff) * 3;
    *(undefined1 **)(this + 0x28) = &kIGHwCsDesc + (ulong)(param_4 & 0xff) * 0x79;
    this_00 = (IGSharedMappedBuffer *)
              IntelAccelerator::getGlobalHardwareStatusPage(param_1,param_4 & 0xff);
    uVar2 = IGSharedMappedBuffer::getVirtualAddress(this_00);
    *(undefined8 *)(this + 0x68) = uVar2;
    plVar3 = IGSpinLock::withOptions(**(byte **)(this + 0x28) + 0x48574353,0);
    *(long **)(this + 0x200) = plVar3;
    if (plVar3 != (long *)0x0) {
      lVar4 = IOInterruptEventSource::interruptEventSource
                        ((OSObject *)this,handleSoftwareContextSwitchInterrupt,(IOService *)0x0,0);
      *(long *)(this + 0x58) = lVar4;
      if (lVar4 != 0) {
        (**(code **)(**(long **)(this + 0x18) + 0x140))(*(long **)(this + 0x18),lVar4);
        (**(code **)(**(long **)(this + 0x58) + 0x150))();
        lVar4 = IOInterruptEventSource::interruptEventSource
                          ((OSObject *)this,handleFlushNotifyInterruptSecondary,(IOService *)0x0,0);
        *(long *)(this + 0x60) = lVar4;
        if (lVar4 != 0) {
          (**(code **)(**(long **)(this + 0x18) + 0x140))(*(long **)(this + 0x18),lVar4);
          (**(code **)(**(long **)(this + 0x60) + 0x150))();
          lVar4 = IOInterruptEventSource::interruptEventSource
                            ((OSObject *)this,handleFinishContextInterrupt,(IOService *)0x0,0);
          *(long *)(this + 0x1c08) = lVar4;
          if (lVar4 != 0) {
            (**(code **)(**(long **)(this + 0x18) + 0x140))(*(long **)(this + 0x18),lVar4);
            (**(code **)(**(long **)(this + 0x1c08) + 0x150))();
            *(undefined8 *)(this + 0x1c10) = 0x28;
            lVar4 = IOTimerEventSource::timerEventSource
                              ((OSObject *)this,handleChangeFrequencyInterrupt);
            *(long *)(this + 0x1c18) = lVar4;
            if (lVar4 != 0) {
              (**(code **)(**(long **)(this + 0x18) + 0x140))(*(long **)(this + 0x18),lVar4);
              (**(code **)(**(long **)(this + 0x1c18) + 0x150))();
              pIVar5 = IGHwCsStatsTracker::withAccelerator(*(undefined8 *)(this + 0x10));
              *(IGHwCsStatsTracker **)(this + 0x70) = pIVar5;
              if (pIVar5 != (IGHwCsStatsTracker *)0x0) {
                IGInterruptBridge::requestEnableCallback
                          (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                           (long *)this,registerForInterrupts);
                uVar2 = IGScheduler::enablePeriodicEventTimerInterrupt
                                  (*(IGScheduler **)(this + 0x20),*(undefined8 *)(this + 0x1c08));
                return CONCAT71((int7)((ulong)uVar2 >> 8),1);
              }
            }
          }
        }
      }
    }
    (**(code **)(*(long *)this + 0x90))(this);
  }
  return 0;
}



// IGHardwareCommandStreamer5::handleSoftwareContextSwitchInterrupt(IOInterruptEventSource*, int)

void __thiscall
IGHardwareCommandStreamer5::handleSoftwareContextSwitchInterrupt
          (IGHardwareCommandStreamer5 *this,long param_1,int param_2)

{
  char cVar1;
  
  if (this[0x1c00] == (IGHardwareCommandStreamer5)0x0) {
    cVar1 = _OSCompareAndSwap(0,1,this + 0x1c38);
    if (cVar1 != '\0') {
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug((uint)**(byte **)(this + 0x28) * 4 + 0x85a00179,(long)param_2,
                        (ulong)(byte)this[0x1c3c],0,0,0);
        }
      }
      schedDispatch(this,(uint)(param_1 != 0) << 6);
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug((uint)**(byte **)(this + 0x28) * 4 + 0x85a0017a,0,0,0,0,0);
        }
      }
      _OSDecrementAtomic(this + 0x1c38);
      return;
    }
    if (this[0x1c00] == (IGHardwareCommandStreamer5)0x0) {
                    // WARNING: Could not recover jumptable at 0x00038ac3. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(**(long **)(this + 0x58) + 0x1e0))(*(long **)(this + 0x58),0,0,0);
      return;
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleFlushNotifyInterruptSecondary(IOInterruptEventSource*, int)

void __cdecl IGHardwareCommandStreamer5::handleFlushNotifyInterruptSecondary(long param_1)

{
  long lVar1;
  IntelAccelerator *this;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  ulong *puVar5;
  ulong uVar6;
  ulong uVar7;
  ulong local_c0 [13];
  long local_58;
  
  local_58 = *(long *)__got::___stack_chk_guard;
  this = *(IntelAccelerator **)(param_1 + 0x10);
  if (((byte)this[0x11c4] & 0x80) == 0) {
    puVar5 = (ulong *)(param_1 + 0xc0);
  }
  else {
    local_c0[0] = 0;
    uVar2 = (long)*(int *)(*(long *)(param_1 + 0x28) + 0x59);
    for (uVar4 = (ulong)*(int *)(*(long *)(param_1 + 0x28) + 0x61); puVar5 = local_c0, uVar4 != 0;
        uVar4 = uVar4 - uVar6) {
      uVar3 = (uint)uVar2 & 0x3f;
      uVar6 = 0x40 - (ulong)uVar3;
      if (uVar4 < uVar6) {
        uVar6 = uVar4;
      }
      lVar1 = uVar6 + uVar3;
      uVar7 = ~(-1L << ((byte)lVar1 & 0x3f));
      if (lVar1 == 0x40) {
        uVar7 = 0xffffffffffffffff;
      }
      local_c0[uVar2 >> 6] = local_c0[uVar2 >> 6] | (uVar7 >> (sbyte)uVar3) << (sbyte)uVar3;
      uVar2 = uVar6 + uVar2;
    }
  }
  IntelAccelerator::signalStampUpdate(this,puVar5);
  if (*(long *)__got::___stack_chk_guard == local_58) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleFinishContextInterrupt(IOInterruptEventSource*, int)

void __cdecl IGHardwareCommandStreamer5::handleFinishContextInterrupt(long param_1)

{
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00170,(ulong)**(byte **)(param_1 + 0x28),0,0,0,0);
    }
  }
  if (*(char *)(param_1 + 0x1c00) != '\0') {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00038c0b. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(param_1 + 0x58) + 0x1e0))(*(long **)(param_1 + 0x58),0,0,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleChangeFrequencyInterrupt(IOTimerEventSource*)

void __cdecl
IGHardwareCommandStreamer5::handleChangeFrequencyInterrupt(IGHardwareCommandStreamer5 *param_1)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  
  lVar2 = *(long *)__got::___stack_chk_guard;
  iVar3 = (**(code **)(*(long *)(*(long *)(param_1 + 0x10) + 0xdf8) + 0x40))(param_1[0x1c28],1);
  if (iVar3 == 0) {
    setGTFrequencyMMIO(param_1,0);
    uVar1 = *(uint *)(param_1 + 0x1c24);
    uVar4 = 0x28;
    if ((uVar1 != 0) && (uVar4 = 4, uVar1 < 0xb)) {
      uVar4 = (ulong)(byte)(0x28 / (byte)uVar1);
    }
    *(ulong *)(param_1 + 0x1c10) = uVar4;
    (**(code **)(**(long **)(param_1 + 0x1c18) + 0x1d0))();
    param_1[0x1c20] = (IGHardwareCommandStreamer5)0x0;
  }
  if (*(long *)__got::___stack_chk_guard != lVar2) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGHardwareCommandStreamer5::registerForInterrupts()

void __thiscall IGHardwareCommandStreamer5::registerForInterrupts(IGHardwareCommandStreamer5 *this)

{
  IGInterruptBridge *this_00;
  
  IGScheduler::disablePeriodicEventTimerInterrupt
            (*(IGScheduler **)(this + 0x20),*(undefined8 *)(this + 0x1c08));
  this_00 = *(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10));
  IGInterruptBridge::registerForInterruptType
            (this_00,*(int *)(*(long *)(this + 0x28) + 0x69),handleHardwareFlushNotifyInterrupt,this
             ,0,(undefined8 *)(this + 0x80));
  IGInterruptBridge::registerForInterruptType
            (this_00,*(int *)(*(long *)(this + 0x28) + 0x65),handleHardwareContextSwitchInterrupt,
             this,0,(undefined8 *)(this + 0x78));
  IGInterruptBridge::registerForInterruptType
            (this_00,*(int *)(*(long *)(this + 0x28) + 0x6d),handleHardwareErrorInterrupt,this,0,
             (undefined8 *)(this + 0x88));
  return;
}



// IGHardwareCommandStreamer5::free()

void __thiscall IGHardwareCommandStreamer5::free(IGHardwareCommandStreamer5 *this,void *param_1)

{
  long *plVar1;
  
  plVar1 = *(long **)(this + 0x200);
  if (plVar1 != (long *)0x0) {
    if (*plVar1 != 0) {
      _lck_spin_free(*plVar1,IGSpinLock::fGlobalLockGroup);
    }
    if (plVar1[1] != 0) {
      _lck_attr_free();
    }
    _IOFreeTypeImpl(IGSpinLock::operator_delete,plVar1);
  }
  *(undefined8 *)(this + 0x200) = 0;
  if (*(long **)(this + 0x70) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x70) + 0x28))();
  }
  *(undefined8 *)(this + 0x70) = 0;
  plVar1 = *(long **)(this + 0x1c18);
  (**(code **)(**(long **)(this + 0x18) + 0x148))(*(long **)(this + 0x18),plVar1);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x28))(plVar1);
  }
  plVar1 = *(long **)(this + 0x1c08);
  (**(code **)(**(long **)(this + 0x18) + 0x148))(*(long **)(this + 0x18),plVar1);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x28))(plVar1);
  }
  plVar1 = *(long **)(this + 0x58);
  (**(code **)(**(long **)(this + 0x18) + 0x148))(*(long **)(this + 0x18),plVar1);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x28))(plVar1);
  }
  plVar1 = *(long **)(this + 0x60);
  (**(code **)(**(long **)(this + 0x18) + 0x148))(*(long **)(this + 0x18),plVar1);
  if (plVar1 != (long *)0x0) {
    (**(code **)(*plVar1 + 0x28))(plVar1);
  }
  if (*(long *)(this + 0x78) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(long *)(this + 0x78));
  }
  if (*(long *)(this + 0x80) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(long *)(this + 0x80));
  }
  if (*(long *)(this + 0x88) != 0) {
    IGInterruptBridge::unregisterInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(long *)(this + 0x88));
  }
                    // WARNING: Could not recover jumptable at 0x00038ec5. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGHardwareCommandStreamer5::setWorkQueueBinding(int, bool)

void __thiscall
IGHardwareCommandStreamer5::setWorkQueueBinding
          (IGHardwareCommandStreamer5 *this,int param_1,int param_2)

{
  int iVar1;
  byte bVar2;
  ulong uVar3;
  
  uVar3 = (ulong)param_1;
  iVar1 = *(int *)(this + uVar3 * 4 + 0x280);
  if (param_2 == 0) {
    *(int *)(this + uVar3 * 4 + 0x280) = iVar1 + -1;
    if (iVar1 == 1) {
      bVar2 = (byte)param_1 & 0x3f;
      *(ulong *)(this + (uVar3 >> 6) * 8 + 0x240) =
           *(ulong *)(this + (uVar3 >> 6) * 8 + 0x240) &
           (-2L << bVar2 | 0xfffffffffffffffeU >> 0x40 - bVar2);
    }
  }
  else {
    *(int *)(this + uVar3 * 4 + 0x280) = iVar1 + 1;
    if (iVar1 == 0) {
      *(ulong *)(this + (uVar3 >> 6) * 8 + 0x240) =
           *(ulong *)(this + (uVar3 >> 6) * 8 + 0x240) | 1L << ((byte)param_1 & 0x3f);
    }
  }
  return;
}



// IGHardwareCommandStreamer5::hardwareErrorInterruptHandler()

void __thiscall
IGHardwareCommandStreamer5::hardwareErrorInterruptHandler(IGHardwareCommandStreamer5 *this)

{
  *(undefined4 *)
   (*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) +
   (ulong)*(uint *)(*(long *)(this + 0x28) + 0x41)) =
       *(undefined4 *)
        (*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) +
        (ulong)*(uint *)(*(long *)(this + 0x28) + 0x41));
  return;
}



// IGHardwareCommandStreamer5::resetOnWake()

void __thiscall IGHardwareCommandStreamer5::resetOnWake(IGHardwareCommandStreamer5 *this)

{
  IntelAccelerator *this_00;
  long lVar1;
  
  *(undefined4 *)(this + 0x1c04) = 7;
  *(undefined4 *)(*(long *)(this + 0x68) + 0xbc) = 7;
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar1 = *(long *)(this_00 + 0x1270);
  *(uint *)(lVar1 + (ulong)*(uint *)(*(long *)(this + 0x28) + 0x25)) =
       *(uint *)(lVar1 + (ulong)*(uint *)(*(long *)(this + 0x28) + 0x25)) & 0xf0f0f0f0 | 0x7070707;
  IntelAccelerator::SafeForceWake(this_00,0,7);
  return;
}



// IGHardwareCommandStreamer5::getCurrentContext() const

undefined8 __thiscall
IGHardwareCommandStreamer5::getCurrentContext(IGHardwareCommandStreamer5 *this)

{
  undefined8 uVar1;
  
  if (*(undefined8 **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) == (undefined8 *)0x0) {
    uVar1 = 0;
  }
  else {
    uVar1 = **(undefined8 **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30);
  }
  return uVar1;
}



// IGHardwareCommandStreamer5::getActiveContexts(IGHardwareContext**, unsigned long long*,
// IGHardwareContext**)

void __thiscall
IGHardwareCommandStreamer5::getActiveContexts
          (IGHardwareCommandStreamer5 *this,long *param_1,long *param_2,undefined8 *param_3)

{
  uint64_t uVar1;
  undefined8 uVar2;
  
  if (*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) == (long *)0x0) {
    uVar2 = 0;
    *param_1 = 0;
    *param_2 = 0;
  }
  else {
    *param_1 = **(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30);
    uVar1 = _mach_absolute_time();
    *param_2 = uVar1 - *(long *)(this + 0x1c48);
    if (*param_1 == 0) {
      _PE_enter_debugger("\n\nContext == 0!!\n\n");
    }
    if (*(undefined8 **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) == (undefined8 *)0x0) {
      uVar2 = 0;
    }
    else {
      uVar2 = **(undefined8 **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38);
    }
  }
  *param_3 = uVar2;
  return;
}



// IGHardwareCommandStreamer5::processGPUReset()

void __thiscall
IGHardwareCommandStreamer5::processGPUReset
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this)

{
  long lVar1;
  uint uVar2;
  undefined8 *puVar3;
  IGHardwareContext *this_00;
  IGHardwareRingBuffer *this_01;
  long lVar4;
  char cVar5;
  uint in_EAX;
  long lVar6;
  uint *puVar7;
  char *in_R8;
  char *in_R9;
  ulong uVar8;
  undefined8 uVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 uStack_38;
  
  *(undefined4 *)((long)this + 0x1c04) = 7;
  *(undefined4 *)(*(long *)((long)this + 0x68) + 0xbc) = 7;
  lVar6 = (ulong)*(uint *)((long)this + 0x50) * 0x10;
  puVar3 = *(undefined8 **)((long)this + lVar6 + 0x30);
  if (puVar3 != (undefined8 *)0x0) {
    this_00 = (IGHardwareContext *)*puVar3;
    this_01 = *(IGHardwareRingBuffer **)(*(long *)(this_00 + 0xb0) + 0x130);
    lVar4 = *(long *)(*(long *)((long)this + 0x20) + 0xaa0 + (long)*(int *)(this_01 + 0x38) * 8);
    puVar7 = (uint *)(ulong)*(uint *)(*(long *)(&DAT_00001270 + *(long *)((long)this + 0x10)) +
                                     (ulong)*(uint *)(*(long *)((long)this + 0x28) + 0x25));
    *(undefined4 *)((long)puVar3 + 0xc) = 0;
    lVar6 = *(long *)((long)this + lVar6 + 0x38);
    if (lVar6 != 0) {
      *(undefined4 *)(lVar6 + 0xc) = 0;
    }
    uStack_38._0_4_ = in_EAX;
    IGHardwareContext::beginReset(this_00);
    uVar9 = IGHardwareRingBuffer::resetRing(this_01);
    uStack_38 = (ulong)(uint)uStack_38;
    IGHardwareRingBuffer::resubmitStampToRing
              (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_01,
               *(undefined4 *)(puVar3 + 3),(uint *)((long)&uStack_38 + 4),puVar7,in_R8,in_R9);
    IGHardwareContext::updateRingTail(this_00,uStack_38._4_4_);
    for (uVar8 = *(ulong *)(lVar4 + 0x4000); uVar8 != *(ulong *)(lVar4 + 0x4048);
        uVar8 = (ulong)((int)uVar8 + 1U & 0x1ff)) {
      lVar6 = uVar8 * 0x20;
      cVar5 = (**(code **)(**(long **)(lVar4 + lVar6) + 0x40))(*(long **)(lVar4 + lVar6),this_00);
      if (cVar5 != '\0') {
        uVar2 = *(uint *)(lVar4 + 0x1c + lVar6);
        if ((uVar2 & 2) == 0) {
          puVar7 = (uint *)(lVar6 + lVar4 + 0x1c);
          *puVar7 = uVar2 | 8;
        }
        else {
          lVar1 = lVar6 + lVar4;
          *(undefined4 *)(lVar1 + 0xc) = 0;
          IGHardwareRingBuffer::resubmitStampToRing
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     *(void **)(*(long *)(*(long *)(lVar6 + lVar4) + 0xb0) + 0x130),
                     *(undefined4 *)(lVar1 + 0x18),(uint *)(lVar1 + 8),puVar7,in_R8,in_R9);
        }
      }
    }
    this_00[0xc1] = (IGHardwareContext)0x1;
    _OSAddAtomic16(1,this_00 + 0x62);
    IGHardwareContext::endReset(this_00);
    uVar2 = *(uint *)(*(long *)(this_00 + 0xb0) + 0x20);
    if ((*(ulong *)((long)this + (ulong)(uVar2 >> 3 & 0x1ffffff8) + 0xc0) >> ((ulong)uVar2 & 0x3f) &
        1) == 0) {
      enableStampInterrupt(this,uVar2);
    }
    if (*(char *)((long)this + 0x1c3c) != '\0') {
      *(int *)((long)this + 0x50) = 1 - *(int *)((long)this + 0x50);
    }
    submitExecList(this,0x80);
  }
  return;
}



// IGHardwareCommandStreamer5::enableStampInterrupt(int)

void __thiscall
IGHardwareCommandStreamer5::enableStampInterrupt(IGHardwareCommandStreamer5 *this,int param_1)

{
  int iVar1;
  undefined8 *puVar2;
  ulong uVar3;
  
  puVar2 = *(undefined8 **)(this + 0x200);
  _lck_spin_lock(*puVar2);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 1,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  uVar3 = (ulong)param_1;
  iVar1 = *(int *)(this + uVar3 * 4 + 0x100);
  *(int *)(this + uVar3 * 4 + 0x100) = iVar1 + 1;
  if (iVar1 == 0) {
    if (*(long *)(this + 0xc0) == 0) {
      IGInterruptBridge::enableInterrupt
                (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
                 *(int *)(*(long *)(this + 0x28) + 0x69));
    }
    *(ulong *)(this + (uVar3 >> 6) * 8 + 0xc0) =
         *(ulong *)(this + (uVar3 >> 6) * 8 + 0xc0) | 1L << ((byte)param_1 & 0x3f);
  }
  puVar2 = *(undefined8 **)(this + 0x200);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 2,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar2);
  return;
}



// WARNING: Removing unreachable block (ram,0x00039647)
// IGHardwareCommandStreamer5::submitExecList(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::submitExecList(IGHardwareCommandStreamer5 *this,uint param_1)

{
  byte bVar1;
  uint uVar2;
  IntelAccelerator *this_00;
  bool bVar3;
  long lVar4;
  bool bVar5;
  ulong uVar6;
  long lVar7;
  uintptr_t arg4;
  long lVar8;
  uintptr_t local_58;
  undefined8 local_48;
  undefined8 local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_40 = 0x108;
  local_48 = 0x108;
  lVar4 = (ulong)(1 - *(int *)(this + 0x50)) * 0x10;
  if (*(long **)(this + lVar4 + 0x38) == (long *)0x0) {
    lVar8 = 0;
  }
  else {
    lVar8 = **(long **)(this + lVar4 + 0x38);
  }
  lVar4 = **(long **)(this + lVar4 + 0x30);
  lVar7 = *(long *)(this + 0x10);
  if ((((((&DAT_000011c1)[lVar7] & 0x40) != 0) && ((param_1 & 0x80) == 0)) &&
      (**(char **)(this + 0x28) == '\0')) && (*(char *)(*(long *)(lVar7 + 0xf18) + 0x338) == '\0'))
  {
    (**(code **)(*(long *)(lVar7 + 0xdf8) + 0x40))
              ((ulong)*(byte *)(lVar4 + 0x78),1,
               *(long *)(this + 0x70) + (ulong)*(byte *)(lVar4 + 0x78) * 8 + 0x678);
    setGTFrequencyMMIO(this,0);
    uVar2 = *(uint *)(this + 0x1c24);
    uVar6 = 0x28;
    if ((uVar2 != 0) && (uVar6 = 4, uVar2 < 0xb)) {
      uVar6 = (ulong)(byte)(0x28 / (byte)uVar2);
    }
    *(ulong *)(this + 0x1c10) = uVar6;
    (**(code **)(**(long **)(this + 0x1c18) + 0x1d0))();
    this[0x1c20] = (IGHardwareCommandStreamer5)0x0;
    this[0x1c28] = *(IGHardwareCommandStreamer5 *)(lVar4 + 0x78);
  }
  uVar6 = *(ulong *)(lVar4 + 0x89);
  local_48 = uVar6;
  if (*(char *)(lVar4 + 0xc1) != '\0') {
    *(undefined1 *)(lVar4 + 0xc1) = 0;
    local_48 = uVar6 | 4;
  }
  *(ulong *)(lVar4 + 0xb8) = (*(ulong *)(lVar4 + 0xb8) & 0x7fffffffffffffff) + 1;
  if (lVar8 == 0) {
    local_58 = 0;
  }
  else {
    local_58 = *(ulong *)(lVar8 + 0x89);
    lVar7 = *(long *)(this + 0x10);
    local_40 = local_58;
    if (((((&DAT_000011c1)[lVar7] & 0x40) != 0) && ((param_1 & 0x80) == 0)) &&
       ((**(char **)(this + 0x28) == '\0' &&
        (((bVar1 = *(byte *)(lVar8 + 0x78), *(byte *)(lVar4 + 0x78) != bVar1 &&
          (*(int *)(*(long *)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x38) + 0xc) != 0))
         && (*(char *)(*(long *)(lVar7 + 0xf18) + 0x338) == '\0')))))) {
      (**(code **)(*(long *)(lVar7 + 0xdf8) + 0x40))
                ((ulong)bVar1,1,*(long *)(this + 0x70) + (ulong)bVar1 * 8 + 0x678);
    }
    if (*(char *)(lVar8 + 0xc1) != '\0') {
      *(undefined1 *)(lVar8 + 0xc1) = 0;
      local_40 = CONCAT44(local_40._4_4_,(int)local_58) | 4;
    }
    local_58 = local_58 >> 0x20;
    *(ulong *)(lVar8 + 0xb8) = (*(ulong *)(lVar8 + 0xb8) & 0x7fffffffffffffff) + 1;
  }
  if (((byte)(*(IntelAccelerator **)(this + 0x10))[0xf7b] & 4) != 0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  }
  this[0x1c3c] = (IGHardwareCommandStreamer5)0x0;
  (**(code **)(*(long *)this + 0x138))(this);
  IGScheduler5::updateIdleState
            (*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),
             (ulong)(param_1 & 0xffffff7b | 4));
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      if (lVar8 == 0) {
        arg4 = 0;
      }
      else {
        arg4 = (uintptr_t)*(byte *)(lVar8 + 0x78);
      }
      _kernel_debug((uint)**(byte **)(this + 0x28) * 4 + 0x85a001d0,uVar6 >> 0x20,
                    (ulong)*(byte *)(lVar4 + 0x78),local_58,arg4,0);
    }
  }
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar4 = *(long *)(this + 0x28);
  lVar8 = *(long *)(this_00 + 0x1270);
  lVar7 = 0;
  bVar3 = true;
  do {
    bVar5 = bVar3;
    uVar6 = (ulong)(uint)((int)lVar7 * 8 + *(int *)(lVar4 + 0x19));
    *(undefined4 *)(lVar8 + uVar6) = *(undefined4 *)(&local_48 + lVar7);
    *(undefined4 *)(lVar8 + 4 + uVar6) = *(undefined4 *)((long)&local_48 + lVar7 * 8 + 4);
    lVar7 = 1;
    bVar3 = false;
  } while (bVar5);
  *(undefined4 *)(lVar8 + (ulong)*(uint *)(lVar4 + 0x1d)) = 1;
  if (((byte)this_00[0xf7b] & 4) != 0) {
    IntelAccelerator::SafeForceWake(this_00,0,7);
  }
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGHardwareCommandStreamer5::contextSwitchInterruptOccurred()

void __thiscall
IGHardwareCommandStreamer5::contextSwitchInterruptOccurred(IGHardwareCommandStreamer5 *this)

{
  if (this[0x1c00] != (IGHardwareCommandStreamer5)0x0) {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00039762. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0x58) + 0x1e0))(*(long **)(this + 0x58),0,0,0);
  return;
}



// IGHardwareCommandStreamer5::enableContextSwitchInterrupt()

void __thiscall
IGHardwareCommandStreamer5::enableContextSwitchInterrupt(IGHardwareCommandStreamer5 *this)

{
  IGScheduler::disablePeriodicEventTimerInterrupt
            (*(IGScheduler **)(this + 0x20),*(undefined8 *)(this + 0x1c08));
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x28) + 0x65));
  return;
}



// IGHardwareCommandStreamer5::disableContextSwitchInterrupt()

void IGHardwareCommandStreamer5::disableContextSwitchInterrupt(void)

{
  return;
}



// IGHardwareCommandStreamer5::disableStampInterrupt(int)

void __thiscall
IGHardwareCommandStreamer5::disableStampInterrupt(IGHardwareCommandStreamer5 *this,int param_1)

{
  int iVar1;
  undefined8 *puVar2;
  byte bVar3;
  ulong uVar4;
  
  puVar2 = *(undefined8 **)(this + 0x200);
  _lck_spin_lock(*puVar2);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 1,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  uVar4 = (ulong)param_1;
  iVar1 = *(int *)(this + uVar4 * 4 + 0x100);
  *(int *)(this + uVar4 * 4 + 0x100) = iVar1 + -1;
  if ((iVar1 == 1) &&
     (bVar3 = (byte)param_1 & 0x3f,
     *(ulong *)(this + (uVar4 >> 6) * 8 + 0xc0) =
          *(ulong *)(this + (uVar4 >> 6) * 8 + 0xc0) &
          (-2L << bVar3 | 0xfffffffffffffffeU >> 0x40 - bVar3), *(long *)(this + 0xc0) == 0)) {
    IGInterruptBridge::disableInterrupt
              (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
               *(int *)(*(long *)(this + 0x28) + 0x69));
  }
  puVar2 = *(undefined8 **)(this + 0x200);
  if ((*(int *)((long)puVar2 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar2 + 0x14) | 2,(ulong)*(uint *)(puVar2 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar2);
  return;
}



// IGHardwareCommandStreamer5::isStampInterruptEnabled(int)

ulong __thiscall
IGHardwareCommandStreamer5::isStampInterruptEnabled(IGHardwareCommandStreamer5 *this,int param_1)

{
  undefined8 *puVar1;
  ulong uVar2;
  
  puVar1 = *(undefined8 **)(this + 0x200);
  _lck_spin_lock(*puVar1);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 1,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  uVar2 = *(ulong *)(this + ((ulong)(long)param_1 >> 6) * 8 + 0xc0);
  puVar1 = *(undefined8 **)(this + 0x200);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 2,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar1);
  return CONCAT71((int7)((ulong)this >> 8),(uVar2 >> ((long)param_1 & 0x3fU) & 1) != 0) & 0xffffffff
  ;
}



// IGHardwareCommandStreamer5::enableErrorInterrupt()

void __thiscall IGHardwareCommandStreamer5::enableErrorInterrupt(IGHardwareCommandStreamer5 *this)

{
  IntelAccelerator *this_00;
  long lVar1;
  long lVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar1 = *(long *)(this + 0x28);
  lVar2 = *(long *)(this_00 + 0x1270);
  *(undefined4 *)(lVar2 + (ulong)*(uint *)(lVar1 + 0x41)) = 0xffffffff;
  *(undefined4 *)((ulong)*(uint *)(lVar1 + 0x45) + lVar2) = 0xfffffffa;
  IntelAccelerator::SafeForceWake(this_00,0,7);
  IGInterruptBridge::enableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x28) + 0x6d));
  return;
}



// IGHardwareCommandStreamer5::disableErrorInterrupt()

void __thiscall IGHardwareCommandStreamer5::disableErrorInterrupt(IGHardwareCommandStreamer5 *this)

{
  IGInterruptBridge::disableInterrupt
            (*(IGInterruptBridge **)(&DAT_00001278 + *(long *)(this + 0x10)),
             *(int *)(*(long *)(this + 0x28) + 0x6d));
  return;
}



// IGHardwareCommandStreamer5::pauseScheduling()

void __thiscall IGHardwareCommandStreamer5::pauseScheduling(IGHardwareCommandStreamer5 *this)

{
  this[0x1c00] = (IGHardwareCommandStreamer5)0x1;
  return;
}



// IGHardwareCommandStreamer5::resumeScheduling()

void __thiscall IGHardwareCommandStreamer5::resumeScheduling(IGHardwareCommandStreamer5 *this)

{
  this[0x1c00] = (IGHardwareCommandStreamer5)0x0;
  return;
}



// IGHardwareCommandStreamer5::checkUnblock(int, unsigned int, int, unsigned int) const

undefined8 __thiscall
IGHardwareCommandStreamer5::checkUnblock
          (IGHardwareCommandStreamer5 *this,int param_1,int param_2,int param_3,uint param_4)

{
  uint uVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  ulong uVar8;
  bool bVar9;
  ulong local_100 [8];
  ulong local_c0 [12];
  long local_60;
  
  local_60 = *(long *)__got::___stack_chk_guard;
  local_c0[7] = 0;
  local_c0[6] = 0;
  local_c0[5] = 0;
  local_c0[4] = 0;
  local_c0[3] = 0;
  local_c0[2] = 0;
  local_c0[1] = 0;
  local_c0[0] = 0;
  uVar3 = *(ulong *)(this + (long)param_1 * 0x40 + 0x400);
  local_100[0] = 0;
  if (param_4 != 0) {
    uVar7 = (ulong)param_4;
    uVar6 = (long)param_3;
    do {
      uVar1 = (uint)uVar6 & 0x3f;
      uVar8 = 0x40 - (ulong)uVar1;
      if (uVar7 < uVar8) {
        uVar8 = uVar7;
      }
      lVar4 = uVar8 + uVar1;
      uVar5 = ~(-1L << ((byte)lVar4 & 0x3f));
      if (lVar4 == 0x40) {
        uVar5 = 0xffffffffffffffff;
      }
      local_100[uVar6 >> 6] = local_100[uVar6 >> 6] | (uVar5 >> (sbyte)uVar1) << (sbyte)uVar1;
      uVar7 = uVar7 - uVar8;
      uVar6 = uVar8 + uVar6;
    } while (uVar7 != 0);
  }
  local_c0[0] = local_100[0] & uVar3 & *(ulong *)(this + 0x3c0);
  if (local_c0[0] == 0) {
    uVar2 = 0;
  }
  else {
    lVar4 = 0;
    if (local_c0[0] != 0) {
      for (; (local_c0[0] >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
      }
    }
    do {
      uVar3 = lVar4 + 1;
      bVar9 = -1 < param_2 - *(int *)(this + uVar3 * 0x20 + 0x13ec);
      uVar2 = CONCAT71((int7)(uVar3 * 0x20 >> 8),bVar9);
      if ((bVar9) || (0x3f < uVar3)) break;
      uVar6 = (local_c0[uVar3 >> 6] >> ((byte)uVar3 & 0x3f)) << ((byte)uVar3 & 0x3f);
      lVar4 = 0;
      if (uVar6 != 0) {
        for (; (uVar6 >> lVar4 & 1) == 0; lVar4 = lVar4 + 1) {
        }
      }
      lVar4 = (uVar3 & 0xffffffffffffffc0) + lVar4;
    } while (uVar6 != 0);
  }
  if (*(long *)__got::___stack_chk_guard != local_60) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar2;
}



// IGHardwareCommandStreamer5::getLastContextRunTimeNS(unsigned char) const

undefined8 __thiscall
IGHardwareCommandStreamer5::getLastContextRunTimeNS(IGHardwareCommandStreamer5 *this,byte param_1)

{
  undefined8 uVar1;
  
  if (*(IGHwCsStatsTracker **)(this + 0x70) != (IGHwCsStatsTracker *)0x0) {
    uVar1 = IGHwCsStatsTracker::getLastContextRunTimeNS
                      (*(IGHwCsStatsTracker **)(this + 0x70),(uint)param_1);
    return uVar1;
  }
  return 0;
}



// IGHardwareCommandStreamer5::resetLastContextRunTimeNS(unsigned char)

void __thiscall
IGHardwareCommandStreamer5::resetLastContextRunTimeNS(IGHardwareCommandStreamer5 *this,byte param_1)

{
  if (*(IGHwCsStatsTracker **)(this + 0x70) != (IGHwCsStatsTracker *)0x0) {
    IGHwCsStatsTracker::resetLastContextRunTimeNS
              (*(IGHwCsStatsTracker **)(this + 0x70),(uint)param_1);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleHardwareFlushNotifyInterrupt(OSObject*, void*)

void __cdecl
IGHardwareCommandStreamer5::handleHardwareFlushNotifyInterrupt(OSMetaClassBase *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar2 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  lVar1 = *(long *)(lVar2 + 0x10);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00039,(ulong)**(byte **)(lVar2 + 0x28),0,0,0,0);
    }
  }
  if (((&DAT_000011c5)[lVar1] & 1) == 0) {
    (**(code **)(**(long **)(lVar2 + 0x60) + 0x1e0))(*(long **)(lVar2 + 0x60),0,0);
  }
  else {
    handleFlushNotifyInterruptSecondary(lVar2);
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a0003a,(ulong)**(byte **)(lVar2 + 0x28),0,0,0,0);
      return;
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleHardwareContextSwitchInterrupt(OSObject*, void*)

void __cdecl
IGHardwareCommandStreamer5::handleHardwareContextSwitchInterrupt(OSMetaClassBase *param_1)

{
  IGHardwareCommandStreamer5 *this;
  
  this = (IGHardwareCommandStreamer5 *)
         OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00174,(ulong)**(byte **)(this + 0x28),0,0,0,0);
    }
  }
  handleSoftwareContextSwitchInterrupt(this,0,1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::handleHardwareErrorInterrupt(OSObject*, void*)

void __cdecl IGHardwareCommandStreamer5::handleHardwareErrorInterrupt(OSMetaClassBase *param_1)

{
  long lVar1;
  ulong uVar2;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  uVar2 = (ulong)*(uint *)(*(long *)(lVar1 + 0x28) + 0x41);
  *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(lVar1 + 0x10)) + uVar2) =
       *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(lVar1 + 0x10)) + uVar2);
  return;
}



// IGHardwareCommandStreamer5::schedDispatch(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::schedDispatch(IGHardwareCommandStreamer5 *this,uint param_1)

{
  long *plVar1;
  char cVar2;
  byte bVar3;
  uint uVar4;
  
  IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),0x10);
  if ((*(long *)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) != 0) ||
     (*(long *)(this + (ulong)(1 - *(uint *)(this + 0x50)) * 0x10 + 0x30) != 0)) {
    processContextStatusBuffer(this,(ulong)param_1);
  }
  cVar2 = (**(code **)(*(long *)this + 0x150))(this);
  if (cVar2 != '\0') {
    (**(code **)(*(long *)this + 0x158))(this);
    (**(code **)(*(long *)this + 0x130))(this);
  }
  cVar2 = (**(code **)(*(long *)this + 0x128))(this);
  if ((((cVar2 == '\0') ||
       (plVar1 = *(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30),
       plVar1 == (long *)0x0)) || (*(char *)(*plVar1 + 0x78) == '\0')) ||
     ((*(byte *)((long)plVar1 + 0x1c) & 0x40) != 0)) {
    (**(code **)(*(long *)this + 0x138))(this);
  }
  if (this[0x1c3c] != (IGHardwareCommandStreamer5)0x0) {
    if (*(long *)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) != 0) {
      cVar2 = (**(code **)(*(long *)this + 0x128))(this);
      if (cVar2 == '\0') goto LAB_00039e8c;
    }
    if ((param_1 & 0x40) == 0) {
      bVar3 = IntelAccelerator::dpsmIsIdle(*(IntelAccelerator **)(this + 0x10));
      if (bVar3 != 0) {
        if (this[0x1c00] == (IGHardwareCommandStreamer5)0x0) {
          (**(code **)(**(long **)(this + 0x58) + 0x1e0))(*(long **)(this + 0x58),0,0,0);
        }
        goto LAB_00039e8c;
      }
      uVar4 = param_1 | 1;
    }
    else {
      uVar4 = param_1 | 2;
    }
    dequeueExecList(this,uVar4);
  }
LAB_00039e8c:
  IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),0x20);
  return;
}



// IGHardwareCommandStreamer5::processContextStatusBuffer(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::processContextStatusBuffer
          (IGHardwareCommandStreamer5 *this,ulong param_1)

{
  ulong uVar1;
  uint uVar2;
  uint uVar3;
  code *pcVar4;
  uint uVar5;
  
  uVar1 = *(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10));
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug((uint)**(byte **)(this + 0x28) * 4 + 0x85a0018d,(ulong)**(byte **)(this + 0x28),0,
                  0,0,0);
  }
  if ((uVar1 & 0x80) == 0) {
    uVar5 = *(uint *)(*(long *)(this + 0x68) + 0xbc);
  }
  else {
    if ((param_1 & 0x40) == 0) {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
    }
    else {
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),1,7);
    }
    uVar5 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) +
                     (ulong)*(uint *)(*(long *)(this + 0x28) + 0x25)) & 0xf;
  }
  if (5 < uVar5) {
    if ((param_1 & 0x40) == 0) {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
      return;
    }
    IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),0,7);
    return;
  }
  uVar3 = *(uint *)(this + 0x1c04);
  while (uVar3 != uVar5) {
    uVar3 = uVar3 + 1;
    if (5 < uVar3) {
      uVar3 = 0;
    }
    *(uint *)(this + 0x1c04) = uVar3;
    if ((uVar1 & 0x80) == 0) {
      uVar3 = *(uint *)(*(long *)(this + 0x68) + (ulong)(uVar3 * 2) * 4 + 0x40);
    }
    else {
      uVar3 = *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) +
                       (ulong)(uVar3 * 8 + *(int *)(*(long *)(this + 0x28) + 0x29)));
    }
    uVar2 = 0;
    if ((uVar3 & 0xf) != 0) {
      for (; ((uVar3 & 0xf) >> uVar2 & 1) == 0; uVar2 = uVar2 + 1) {
      }
    }
    pcVar4 = (code *)(&processContextStatusBuffer(unsigned_int)::pfnCsbProcessContextSwitchType)
                     [(ulong)uVar2 * 2];
    if (((ulong)pcVar4 & 1) != 0) {
      pcVar4 = *(code **)(pcVar4 + *(long *)(this + *(long *)(&DAT_00126028 + (ulong)uVar2 * 0x10))
                                   + -1);
    }
    (*pcVar4)();
    uVar3 = *(uint *)(this + 0x1c04);
  }
  if ((uVar1 & 0x80) != 0) {
    if ((param_1 & 0x40) == 0) {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
    }
    else {
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),0,7);
    }
  }
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug((uint)**(byte **)(this + 0x28) * 4 + 0x85a0018e,(ulong)**(byte **)(this + 0x28),0,
                  0,0,0);
  }
  return;
}



// IGHardwareCommandStreamer5::dequeueExecList(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::dequeueExecList(IGHardwareCommandStreamer5 *this,uint param_1)

{
  uint uVar1;
  uint uVar2;
  undefined4 local_3c;
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  local_38 = 0;
  uVar1 = (**(code **)(*(long *)this + 0x128))();
  (**(code **)(*(long *)this + 0x120))(this);
  local_3c = 0;
  uVar2 = 0;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) {
    if (**(char **)(this + 0x28) == '\0') {
      IGScheduler5::verifyThrottling(*(IGScheduler5 **)(this + 0x20),(long)&local_3c);
    }
    uVar2 = evalWaitQueue(this,(long)&local_3c,uVar1 & 0xff,'\0');
    if ((uVar2 & 8) != 0) goto LAB_0003a17d;
  }
  uVar2 = (**(code **)(*(long *)this + 0x118))(this,&local_38,uVar2,&local_3c);
LAB_0003a17d:
  if ((((*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x2000018000) == 0) &&
      (*(long *)(this + 0x3c0) != 0)) &&
     (*(long *)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x38) == 0)) {
    uVar1 = evalWaitQueue(this,(long)&local_3c,0,'\x01');
    uVar2 = uVar2 | uVar1;
  }
  if ((uVar2 & 8) != 0) {
    prepareExecListAndSubmit(this,param_1,uVar2,(long)&local_38);
  }
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareCommandStreamer5::prepareForQueuesEval()

void __thiscall IGHardwareCommandStreamer5::prepareForQueuesEval(IGHardwareCommandStreamer5 *this)

{
  long lVar1;
  long lVar2;
  
  lVar1 = (ulong)*(uint *)(this + 0x50) * 0x10;
  lVar2 = (ulong)(1 - *(uint *)(this + 0x50)) * 0x10;
  *(undefined8 *)(this + lVar2 + 0x30) = *(undefined8 *)(this + lVar1 + 0x30);
  *(undefined8 *)(this + lVar2 + 0x38) = *(undefined8 *)(this + lVar1 + 0x38);
  return;
}



// IGHardwareCommandStreamer5::evalWaitQueue(bool const*, bool, bool)

uint __thiscall
IGHardwareCommandStreamer5::evalWaitQueue
          (IGHardwareCommandStreamer5 *this,long param_1,int param_3_00,char param_3)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  byte bVar4;
  uint uVar5;
  uint uVar6;
  ulong uVar7;
  long *plVar8;
  ulong uVar9;
  long lVar10;
  long lVar11;
  ulong uVar12;
  char cVar13;
  long *plVar14;
  IGHardwareCommandStreamer5 *pIVar15;
  ulong uVar16;
  ulong uVar17;
  IGHardwareCommandStreamer5 *local_110;
  int local_100 [16];
  ulong local_c0 [18];
  
  local_c0[8] = *(long *)__got::___stack_chk_guard;
  plVar14 = *(long **)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x30);
  uVar6 = 0;
  if (plVar14 != (long *)0x0) {
    uVar6 = param_3_00 << 8;
  }
  uVar12 = *(ulong *)(this + 0x3c0);
  if (uVar12 != 0) {
    local_c0[7] = 0;
    local_c0[6] = 0;
    local_c0[5] = 0;
    local_c0[4] = 0;
    local_c0[3] = 0;
    local_c0[2] = 0;
    local_c0[1] = 0;
    local_c0[0] = uVar12;
    if ((local_c0[(ulong)(long)*(int *)(this + 900) >> 6] >> ((long)*(int *)(this + 900) & 0x3fU) &
        1) == 0) {
      lVar11 = 0;
      if (uVar12 != 0) {
        for (; (uVar12 >> lVar11 & 1) == 0; lVar11 = lVar11 + 1) {
        }
      }
      *(int *)(this + 900) = (int)lVar11;
    }
    do {
      iVar1 = *(int *)(this + 900);
      bVar4 = (byte)iVar1 & 0x3f;
      uVar17 = -2L << bVar4 | 0xfffffffffffffffeU >> 0x40 - bVar4;
      uVar16 = (ulong)(long)iVar1 >> 6;
      local_c0[uVar16] = local_c0[uVar16] & uVar17;
      uVar12 = local_c0[0];
      uVar5 = *(uint *)(this + 0x380);
      if (local_c0[0] != 0) {
        uVar9 = (long)(int)uVar5 + 1;
        if ((uVar9 < 0x40) &&
           (uVar7 = (local_c0[uVar9 >> 6] >> ((byte)uVar9 & 0x3f)) << ((byte)uVar9 & 0x3f),
           uVar7 != 0)) {
          lVar11 = 0;
          if (uVar7 != 0) {
            for (; (uVar7 >> lVar11 & 1) == 0; lVar11 = lVar11 + 1) {
            }
          }
          uVar5 = (uint)lVar11 | (uint)uVar9 & 0xffffffc0;
        }
        else {
          lVar11 = 0;
          if (local_c0[0] != 0) {
            for (; (local_c0[0] >> lVar11 & 1) == 0; lVar11 = lVar11 + 1) {
            }
          }
          uVar5 = (uint)lVar11;
        }
        *(uint *)(this + 0x380) = uVar5;
      }
      *(uint *)(this + 900) = uVar5;
      lVar11 = (long)iVar1 * 0x20;
      pIVar15 = this + lVar11 + 0x1400;
      cVar13 = (char)param_3_00;
      if (((cVar13 == '\0') ||
          (*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) == (long *)0x0)) ||
         (*(byte *)(**(long **)pIVar15 + 0x78) <
          *(byte *)(**(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) + 0x78))) {
        if (plVar14 == (long *)0x0) {
          uVar5 = *(uint *)(this + lVar11 + 0x1408);
          if ((uVar5 >> 0x10 & 1) == 0) {
            if (cVar13 != '\0') {
LAB_0003a454:
              if ((*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) != (long *)0x0) &&
                 (*(byte *)(**(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30) + 0x78)
                  <= *(byte *)(**(long **)pIVar15 + 0x78))) goto LAB_0003a6f3;
            }
          }
          else {
LAB_0003a488:
            local_110 = this + lVar11 + 0x1408;
            IGAccelTask::getStampAtIndex
                      ((undefined8 *)local_100,*(long *)(*(long *)(this + 0x10) + 0x150),
                       (ulong)(uVar5 & 0xffff));
            if (local_100[0] - *(int *)(this + lVar11 + 0x140c) < 0) {
              if ((((param_3 != '\0') &&
                   (plVar8 = *(long **)pIVar15, (*(byte *)((long)plVar8 + 0x1c) & 0x20) != 0)) &&
                  (*(char *)((long)&IG_STAMP_INDEX_TO_HWCS_LUT +
                            (ulong)(*(uint *)local_110 & 0xffff)) != **(char **)(this + 0x28))) &&
                 (*(int *)(*(long *)(this + 0x20) + 0x5e0 +
                          (ulong)*(byte *)((long)&kStampIndexPriorityMappingTableRCS +
                                          (ulong)(*(uint *)local_110 >> 2 & 0x3fff)) * 0x180) == 0))
              goto LAB_0003a4d5;
              goto LAB_0003a6f3;
            }
          }
LAB_0003a4c8:
          plVar8 = *(long **)pIVar15;
          if (plVar8 != (long *)0x0) {
LAB_0003a4d5:
            local_110 = this + lVar11 + 0x1408;
            if (*(char *)(param_1 + (ulong)*(byte *)(*plVar8 + 0x78)) == '\0') {
              *(undefined4 *)((long)plVar8 + 0xc) = 0;
              if (((byte)this[lVar11 + 0x140a] & 1) != 0) {
                *(uint *)((long)plVar8 + 0x1c) =
                     *(uint *)((long)plVar8 + 0x1c) & 0xffffffcf |
                     *(uint *)((long)plVar8 + 0x1c) + 0x30 & 0x30;
                iVar1 = *(int *)(*(long *)(*plVar8 + 0xb0) + 0x20);
                bVar4 = (byte)iVar1 & 0x3f;
                *(ulong *)(this + ((ulong)(long)iVar1 >> 6) * 8 +
                                  (ulong)*(ushort *)local_110 * 0x40 + 0x400) =
                     *(ulong *)(this + ((ulong)(long)iVar1 >> 6) * 8 +
                                       (ulong)*(ushort *)local_110 * 0x40 + 0x400) &
                     (-2L << bVar4 | 0xfffffffffffffffeU >> 0x40 - bVar4);
              }
              lVar10 = (ulong)(1 - *(int *)(this + 0x50)) * 0x10;
              if (plVar14 == (long *)0x0) {
                *(long **)(this + lVar10 + 0x30) = plVar8;
                uVar6 = 0x20;
                if (((byte)this[lVar11 + 0x140a] & 2) != 0) {
                  if (*(long *)(this + lVar11 + 0x1410) == 0) {
                    uVar6 = 0x120;
                  }
                  else {
                    *(long *)(this + lVar10 + 0x38) = *(long *)(this + lVar11 + 0x1410);
                    uVar6 = 0x368;
                  }
                }
              }
              else {
                *(long **)(this + lVar10 + 0x38) = plVar8;
                uVar6 = (uint)(((byte)this[lVar11 + 0x140a] & 2) >> 1) << 9 | uVar6 | 0x48;
                plVar8 = plVar14;
              }
              *(ulong *)(this + uVar16 * 8 + 0x3c0) = *(ulong *)(this + uVar16 * 8 + 0x3c0) & uVar17
              ;
              *(long *)pIVar15 = 0;
              *(undefined4 *)(this + lVar11 + 0x140c) = 0xffffffff;
              *(uint *)(this + lVar11 + 0x1408) =
                   *(uint *)(this + lVar11 + 0x1408) & 0xfffc0000 | 0xffff;
              *(undefined8 *)(this + lVar11 + 0x1410) = 0;
              *(undefined4 *)(this + lVar11 + 0x141c) = 0xffffffff;
              *(uint *)(this + lVar11 + 0x1418) =
                   *(uint *)(this + lVar11 + 0x1418) & 0xfffc0000 | 0xffff;
              uVar12 = local_c0[0];
              plVar14 = plVar8;
            }
          }
        }
        else if (*(long *)(this + lVar11 + 0x1410) == 0) {
          plVar8 = *(long **)pIVar15;
          uVar2 = *(uint *)(*(long *)(*plVar8 + 0xb0) + 0x20);
          uVar3 = *(uint *)(*(long *)(*plVar14 + 0xb0) + 0x20);
          if ((uVar2 != uVar3) || ((*(byte *)((long)plVar14 + 0x1c) & 4) == 0)) {
            uVar5 = *(uint *)(this + lVar11 + 0x1408);
            if ((uVar5 >> 0x10 & 1) == 0) {
              if (cVar13 == '\0') goto LAB_0003a4c8;
              if (uVar2 == uVar3) goto LAB_0003a454;
              if (*(byte *)(*plVar8 + 0x78) < *(byte *)(*plVar14 + 0x78)) {
                plVar14 = (long *)0x0;
                uVar6 = uVar6 & 0xfffffedf;
              }
            }
            else if (((uVar3 != (uVar5 & 0xffff)) ||
                     ((int)plVar14[3] - *(int *)(this + lVar11 + 0x140c) < 0)) ||
                    ((*(byte *)((long)plVar8 + 0x1c) & 0x20) == 0)) goto LAB_0003a488;
            goto LAB_0003a4d5;
          }
        }
      }
LAB_0003a6f3:
    } while ((uVar12 != 0) && ((uVar6 & 8) == 0));
    uVar5 = uVar6 | 8;
    if ((uVar6 & 0x60) == 0) {
      uVar5 = uVar6;
    }
    if (param_3 != '\0') {
      uVar6 = uVar5;
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_c0[8]) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareCommandStreamer5::prepareExecListAndSubmit(unsigned int, unsigned int, unsigned int
// const*)

void __thiscall
IGHardwareCommandStreamer5::prepareExecListAndSubmit
          (IGHardwareCommandStreamer5 *this,uint param_1,uint param_2,long param_3)

{
  int iVar1;
  long *plVar2;
  bool bVar3;
  bool bVar4;
  long lVar5;
  uint uVar6;
  
  uVar6 = 0x20;
  lVar5 = 0;
  bVar3 = true;
  do {
    bVar4 = bVar3;
    plVar2 = *(long **)(this + lVar5 * 8 + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x30);
    if (plVar2 != (long *)0x0) {
      _OSAddAtomic16(1,*plVar2 + 0x62);
      iVar1 = *(int *)(param_3 + lVar5 * 4);
      if (0 < iVar1) {
        _OSAddAtomic16(-iVar1,*plVar2 + 0x60);
      }
      if ((param_2 & uVar6) != 0) {
        _OSAddAtomic16(0xffffffff,*plVar2 + 100);
      }
    }
    lVar5 = 1;
    uVar6 = 0x40;
    bVar3 = false;
  } while (bVar4);
  submitExecList(this,param_1);
  if ((param_2 >> 10 & 1) == 0) {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x0003a81b. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x140))(this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::evalWorkQueues(unsigned int*, unsigned int, bool const*)

uint __cdecl IGHardwareCommandStreamer5::evalWorkQueues(long param_1,uint *param_2,uint param_3)

{
  undefined8 *puVar1;
  ulong *puVar2;
  int iVar3;
  undefined4 uVar4;
  long lVar5;
  undefined8 *puVar6;
  ulong uVar7;
  byte bVar8;
  bool bVar9;
  char cVar10;
  ulong uVar11;
  uint uVar12;
  long *plVar13;
  ulong uVar14;
  uint uVar15;
  long lVar16;
  undefined4 *puVar17;
  uint uVar18;
  ulong uVar19;
  long lVar20;
  uint *puVar21;
  int local_154;
  ulong local_100 [9];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  long local_80;
  
  local_80 = *(long *)__got::___stack_chk_guard;
  uVar18 = 0;
  local_88 = 0;
  local_90 = 0;
  local_98 = 0;
  local_a0 = 0;
  local_a8 = 0;
  local_b0 = 0;
  local_b8 = 0;
  local_100[8] = *(ulong *)(param_1 + 0x240);
  uVar15 = param_3 & 0x20;
  if (uVar15 != 0) {
    iVar3 = *(int *)(*(long *)(**(long **)(param_1 + 0x30 +
                                          (ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10) + 0xb0) +
                    0x20);
    bVar8 = (byte)iVar3 & 0x3f;
    local_100[((ulong)(long)iVar3 >> 6) + 8] =
         local_100[((ulong)(long)iVar3 >> 6) + 8] &
         (-2L << bVar8 | 0xfffffffffffffffeU >> 0x40 - bVar8);
  }
  local_100[8] = ~*(ulong *)(param_1 + 0x3c0) & local_100[8];
  if (local_100[8] != 0) {
    local_100[7] = 0;
    local_100[6] = 0;
    local_100[5] = 0;
    local_100[4] = 0;
    local_100[3] = 0;
    local_100[2] = 0;
    uVar4 = 0;
    local_100[1] = 0;
    local_100[0] = local_100[8];
    uVar19 = (ulong)*(int *)(param_1 + 0x380);
    if ((local_100[(uVar19 >> 6) + 8] >> (uVar19 & 0x3f) & 1) == 0) {
      uVar19 = 0;
      if (local_100[8] != 0) {
        for (; (local_100[8] >> uVar19 & 1) == 0; uVar19 = uVar19 + 1) {
        }
      }
      *(int *)(param_1 + 0x380) = (int)uVar19;
    }
    uVar7 = 0;
    if (local_100[8] != 0) {
      for (; (local_100[8] >> uVar7 & 1) == 0; uVar7 = uVar7 + 1) {
      }
    }
    local_154 = 0;
    do {
      bVar8 = (byte)uVar19 & 0x3f;
      puVar2 = (ulong *)((long)local_100 + (ulong)((uint)(uVar19 >> 3) & 0x1ffffff8));
      *puVar2 = *puVar2 & (-2L << bVar8 | 0xfffffffffffffffeU >> 0x40 - bVar8);
      lVar5 = *(long *)(*(long *)(param_1 + 0x20) + 0xaa0 + (long)(int)uVar19 * 8);
      uVar14 = *(ulong *)(lVar5 + 0x4040);
      if (uVar14 != *(ulong *)(lVar5 + 0x4048)) {
        do {
          lVar16 = uVar14 * 0x20;
          if ((*(byte *)(lVar5 + 0x1c + lVar16) & 8) == 0) {
            puVar1 = (undefined8 *)(lVar16 + lVar5);
            puVar21 = (uint *)(lVar16 + lVar5 + 0x1c);
            uVar11 = (ulong)(1 - *(int *)(param_1 + 0x50));
            lVar20 = *(long *)(param_1 + 0x38 + uVar11 * 0x10);
            if (lVar20 == 0) {
              plVar13 = (long *)(uVar11 * 0x10 + param_1 + 0x30);
              puVar6 = (undefined8 *)*plVar13;
              if (puVar6 == (undefined8 *)0x0) {
                *plVar13 = (long)puVar1;
              }
              else {
                cVar10 = (**(code **)(*(long *)*puVar1 + 0x40))((long *)*puVar1,*puVar6);
                if (cVar10 == '\0') {
                  uVar11 = (ulong)(1 - *(int *)(param_1 + 0x50));
                  if ((((*(uint *)(&DAT_000011c0 + *(long *)(param_1 + 0x10)) & 0x18000) == 0) &&
                      (plVar13 = *(long **)(param_1 + 0x30 + uVar11 * 0x10),
                      *(int *)(*(long *)(*plVar13 + 0xb0) + 0x20) == (int)uVar19)) &&
                     ((*(byte *)((long)plVar13 + 0x1c) & 4) != 0)) goto LAB_0003acef;
                  lVar20 = (long)local_154;
                  local_154 = local_154 + 1;
                  *(undefined8 **)(uVar11 * 0x10 + param_1 + 0x38 + lVar20 * 8) = puVar1;
                }
                else {
                  puVar6 = *(undefined8 **)
                            (param_1 + 0x30 + (ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10);
                  uVar18 = *param_2;
                  cVar10 = (**(code **)(*(long *)*puVar1 + 0x40))((long *)*puVar1,*puVar6);
                  if ((((0xff < uVar18) || (cVar10 == '\0')) ||
                      (((&DAT_000011c3)[*(long *)(param_1 + 0x10)] & 4) != 0)) ||
                     (((*puVar21 & 0x40) != 0 || ((*(byte *)((long)puVar6 + 0x1c) & 0x40) != 0))))
                  goto LAB_0003acef;
                  *puVar21 = *(uint *)(*(long *)(param_1 + 0x30 +
                                                (ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10) + 0x1c
                                      ) & 4 | *puVar21;
                  uVar11 = (ulong)(1 - *(int *)(param_1 + 0x50));
                  *(undefined8 **)(param_1 + 0x30 + uVar11 * 0x10) = puVar1;
                }
              }
            }
            else {
              uVar12 = param_2[1];
              cVar10 = (**(code **)(*(long *)*puVar1 + 0x40))();
              uVar18 = 8;
              if ((((0xff < uVar12) || (cVar10 == '\0')) ||
                  (((&DAT_000011c3)[*(long *)(param_1 + 0x10)] & 4) != 0)) ||
                 (((*puVar21 & 0x40) != 0 || ((*(byte *)(lVar20 + 0x1c) & 0x40) != 0)))) {
                bVar9 = false;
                goto LAB_0003acf5;
              }
              *puVar21 = *(uint *)(*(long *)(param_1 + 0x38 +
                                            (ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10) + 0x1c) &
                         4 | *puVar21;
              uVar11 = (ulong)(1 - *(int *)(param_1 + 0x50));
              *(undefined8 **)(param_1 + 0x38 + uVar11 * 0x10) = puVar1;
            }
            lVar20 = (long)local_154;
            puVar17 = (undefined4 *)(lVar16 + lVar5 + 0xc);
            IGHardwareContext::updateRingTail
                      ((IGHardwareContext *)
                       **(undefined8 **)(uVar11 * 0x10 + param_1 + 0x30 + lVar20 * 8),
                       *(undefined4 *)(lVar16 + lVar5 + 8));
            uVar18 = param_2[lVar20];
            param_2[lVar20] = uVar18 + 1;
            if (uVar18 == 0) {
              uVar4 = *puVar17;
            }
            else {
              *puVar17 = uVar4;
            }
            uVar14 = (ulong)((int)uVar14 + 1U & 0x1ff);
            *(ulong *)(*(long *)((ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10 + param_1 + 0x30 +
                                lVar20 * 8) + 0x10) = uVar14;
          }
          else {
            uVar14 = (ulong)((int)uVar14 + 1U & 0x1ff);
          }
        } while (uVar14 != *(ulong *)(lVar5 + 0x4048));
      }
      if (local_154 == 1) {
        uVar18 = 8;
        local_154 = 1;
        bVar9 = false;
      }
      else {
LAB_0003acef:
        uVar18 = 0;
        bVar9 = true;
      }
LAB_0003acf5:
      *(ulong *)(lVar5 + 0x4040) = uVar14;
      uVar14 = (long)*(int *)(param_1 + 0x380) + 1;
      uVar19 = uVar7;
      if ((uVar14 < 0x40) &&
         (uVar11 = (local_100[(uVar14 >> 6) + 8] >> ((byte)uVar14 & 0x3f)) << ((byte)uVar14 & 0x3f),
         uVar11 != 0)) {
        uVar19 = 0;
        if (uVar11 != 0) {
          for (; (uVar11 >> uVar19 & 1) == 0; uVar19 = uVar19 + 1) {
          }
        }
        uVar19 = uVar19 | uVar14 & 0xffffffffffffffc0;
      }
      *(int *)(param_1 + 0x380) = (int)uVar19;
    } while ((bool)(local_100[0] != 0 & bVar9));
    uVar12 = 8;
    if (!bVar9) goto LAB_0003ad8d;
  }
  uVar12 = uVar18;
  if ((*(long *)(param_1 + 0x30 + (ulong)(1 - *(int *)(param_1 + 0x50)) * 0x10) != 0) &&
     (uVar12 = 8, *param_2 == 0 && uVar15 == 0)) {
    uVar12 = uVar18;
  }
LAB_0003ad8d:
  if (*(long *)__got::___stack_chk_guard != local_80) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return (int)(uVar12 << 0x1c) >> 0x1f & uVar15 | uVar12;
}



// IGHardwareCommandStreamer5::setGTFrequencyMMIO(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::setGTFrequencyMMIO(IGHardwareCommandStreamer5 *this,undefined4 param_1)

{
  undefined8 local_38;
  long local_30;
  
  local_38 = 0;
  local_30 = 0;
  _clock_get_uptime(&local_38);
  _absolutetime_to_nanoseconds(local_38,&local_30);
  if (0x32 < (ulong)(local_30 - *(long *)(this + 0x1c30))) {
    *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0xa008) = param_1;
    *(long *)(this + 0x1c30) = local_30;
  }
  return;
}



// IGHardwareCommandStreamer5::startChangeFrequencyTimer(unsigned int)

void __thiscall
IGHardwareCommandStreamer5::startChangeFrequencyTimer(IGHardwareCommandStreamer5 *this,int param_1)

{
  uint uVar1;
  ulong uVar2;
  
  uVar2 = 0x28;
  uVar1 = *(int *)(this + 0x1c24) - param_1;
  if ((uVar1 != 0) && (uVar2 = 4, uVar1 < 0xb)) {
    uVar2 = (ulong)(byte)(0x28 / (byte)uVar1);
  }
  *(ulong *)(this + 0x1c10) = uVar2;
  (**(code **)(**(long **)(this + 0x1c18) + 0x1d0))();
  this[0x1c20] = (IGHardwareCommandStreamer5)0x0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareCommandStreamer5::csbProcessIdleToActive(SGfxContextStatusBufferEntry const*)

void __cdecl IGHardwareCommandStreamer5::csbProcessIdleToActive(long *param_1)

{
  ushort uVar1;
  uint uVar2;
  uint64_t uVar3;
  ulong uVar4;
  ulong uVar5;
  
  uVar3 = _mach_absolute_time();
  param_1[0x389] = uVar3;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001bc,0,0,0,0,0);
    }
  }
  uVar2 = *(uint *)(param_1 + 10);
  *(uint *)(param_1 + 10) = 1 - uVar2;
  param_1[(ulong)uVar2 * 2 + 6] = 0;
  param_1[(ulong)uVar2 * 2 + 7] = 0;
  if ((long *)param_1[(ulong)(1 - uVar2) * 2 + 6] != (long *)0x0) {
    uVar2 = *(uint *)(*(long *)(*(long *)param_1[(ulong)(1 - uVar2) * 2 + 6] + 0xb0) + 0x20);
    uVar4 = (ulong)uVar2;
    uVar5 = (ulong)(uVar2 >> 6);
    if (((ulong)param_1[uVar5 + 0x78] >> (uVar4 & 0x3f) & 1) != 0) {
      uVar1 = *(ushort *)(param_1 + uVar4 * 4 + 0x281);
      _OSAddAtomic16(0xffffffff,*(long *)param_1[uVar4 * 4 + 0x280] + 100);
      param_1[uVar4 * 4 + 0x280] = 0;
      *(undefined4 *)(__stop + (long)param_1 + uVar4 * 0x20) = 0xffffffff;
      *(uint *)(param_1 + uVar4 * 4 + 0x281) =
           *(uint *)(param_1 + uVar4 * 4 + 0x281) & 0xfffc0000 | 0xffff;
      param_1[uVar4 * 4 + 0x282] = 0;
      *(undefined4 *)((long)param_1 + uVar4 * 0x20 + 0x141c) = 0xffffffff;
      *(uint *)(param_1 + uVar4 * 4 + 0x283) =
           *(uint *)(param_1 + uVar4 * 4 + 0x283) & 0xfffc0000 | 0xffff;
      uVar4 = ~(1L << ((byte)uVar2 & 0x3f));
      param_1[uVar5 + 0x78] = param_1[uVar5 + 0x78] & uVar4;
      param_1[uVar5 + (ulong)uVar1 * 8 + 0x80] = param_1[uVar5 + (ulong)uVar1 * 8 + 0x80] & uVar4;
    }
  }
  *(undefined1 *)((long)param_1 + 0x1c3c) = 1;
  (**(code **)(*param_1 + 0x130))(param_1);
  IGScheduler5::updateIdleState((IGScheduler5 *)param_1[4],*(byte *)param_1[5],5);
  return;
}



// IGHardwareCommandStreamer5::csbProcessPreempted(SGfxContextStatusBufferEntry const*)

void __thiscall
IGHardwareCommandStreamer5::csbProcessPreempted(IGHardwareCommandStreamer5 *this,uint *param_1)

{
  uint uVar1;
  long *plVar2;
  char cVar3;
  short sVar4;
  long lVar5;
  uint64_t uVar6;
  
  ContextStatusBufferValidate((long *)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30),param_1);
  plVar2 = *(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30);
  IGHwCsStatsTracker::updateWithContextUtilizationData
            (*(IGHwCsStatsTracker **)(this + 0x70),(IGHardwareContext *)*plVar2);
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001c0,(ulong)(param_1[1] >> 5 & 0x7ff),0,0,0,0);
    }
  }
  this[0x1c3c] = (IGHardwareCommandStreamer5)0x1;
  (**(code **)(*(long *)this + 0x130))(this);
  sVar4 = _OSAddAtomic16(0xffffffff,*plVar2 + 0x62);
  if ((*param_1 & 0x10) != 0) {
    if (sVar4 == 1) {
      *(long *)(*(long *)(*(long *)(this + 0x20) + 0xaa0 +
                         (long)*(int *)(*(long *)(*plVar2 + 0xb0) + 0x20) * 8) + 0x4000) = plVar2[2]
      ;
    }
    if (this[0x1c20] == (IGHardwareCommandStreamer5)0x0) {
      (**(code **)(**(long **)(this + 0x1c18) + 0x218))();
      this[0x1c20] = (IGHardwareCommandStreamer5)0x1;
    }
  }
  IGScheduler5::notifyAsyncEngines
            (*(IGScheduler5 **)(this + 0x20),*(uint *)(*(long *)(*plVar2 + 0xb0) + 0x20));
  uVar1 = *param_1;
  if ((uVar1 >> 0xf & 1) == 0) {
    if ((uVar1 & 0x10) == 0) {
      moveItemToWaitQueue(this,plVar2,0,(uVar1 & 0xff) >> 7,1);
    }
    if (*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) != (long *)0x0) {
      _OSAddAtomic16(0xffffffff,
                     **(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) + 0x62);
      cVar3 = (**(code **)(*(long *)**(undefined8 **)
                                      (this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) + 0x40))
                        ((long *)**(undefined8 **)
                                   (this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38),
                         **(undefined8 **)(this + (ulong)(1 - *(uint *)(this + 0x50)) * 0x10 + 0x30)
                        );
      if (cVar3 == '\0') {
        moveItemToWaitQueue(this,*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38),
                            (uint)(*(long *)(this + (ulong)*(uint *)(*(long *)(**(long **)(this + (
                                                  ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) + 0xb0
                                                  ) + 0x20) * 0x20 + 0x1400) != 0),0,1);
      }
    }
  }
  uVar1 = *(uint *)(this + 0x50);
  *(uint *)(this + 0x50) = 1 - uVar1;
  lVar5 = (ulong)uVar1 * 0x10;
  *(undefined8 *)(this + lVar5 + 0x30) = 0;
  *(undefined8 *)(this + lVar5 + 0x38) = 0;
  IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),5);
  uVar6 = _mach_absolute_time();
  *(uint64_t *)(this + 0x1c48) = uVar6;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// ContextStatusBufferValidate(IGHwCsExecList5 const&, SGfxContextStatusBufferEntry const*)

void __cdecl ContextStatusBufferValidate(long *param_1,uint *param_2)

{
  if ((long *)*param_1 == (long *)0x0) {
    ContextStatusBufferValidate(param_2);
  }
  else if (*(uint *)(*(long *)*param_1 + 0x7c) != (param_2[1] >> 5 & 0x7ff)) {
    ContextStatusBufferValidate(param_2);
  }
  return;
}



// IGHardwareCommandStreamer5::retireItem(IGHwCsWorkItem5*)

void __thiscall
IGHardwareCommandStreamer5::retireItem(IGHardwareCommandStreamer5 *this,long *param_1)

{
  *(long *)(*(long *)(*(long *)(this + 0x20) + 0xaa0 +
                     (long)*(int *)(*(long *)(*param_1 + 0xb0) + 0x20) * 8) + 0x4000) = param_1[2];
  return;
}



// IGHardwareCommandStreamer5::moveItemToWaitQueue(IGHwCsWorkItem5*, int, bool, bool)

void __thiscall
IGHardwareCommandStreamer5::moveItemToWaitQueue
          (IGHardwareCommandStreamer5 *this,long *param_1,int param_2,int param_3,undefined4 param_4
          )

{
  int iVar1;
  long lVar2;
  IGHardwareCommandStreamer5 *pIVar3;
  byte bVar4;
  uint uVar5;
  long lVar6;
  ulong arg1;
  undefined4 local_80;
  undefined2 local_7c;
  IGHardwareCommandStreamer5 *local_40;
  undefined4 local_38;
  int local_34;
  
  lVar2 = *param_1;
  iVar1 = *(int *)(*(long *)(lVar2 + 0xb0) + 0x20);
  arg1 = (ulong)iVar1;
  lVar6 = (long)param_2 * 0x10;
  local_40 = this;
  local_38 = param_4;
  local_34 = param_3;
  IGAccelTask::getStampAtIndex
            ((undefined8 *)&local_80,*(long *)(*(long *)(this + 0x10) + 0x150),arg1 + 0x40);
  _OSAddAtomic16(1,lVar2 + 100);
  *(long **)(this + lVar6 + 0x1400 + arg1 * 0x20) = param_1;
  bVar4 = (byte)iVar1;
  if (local_34 != 0) {
    lVar2 = lVar6 + arg1 * 0x20;
    pIVar3 = this + lVar2 + 0x1408;
    uVar5 = CONCAT22(*(undefined2 *)(this + lVar2 + 0x140a),local_7c);
    *(uint *)pIVar3 = uVar5;
    *(undefined4 *)(this + lVar2 + 0x140c) = local_80;
    if ((*(uint *)((long)param_1 + 0x1c) & 0x30) == 0) {
      *(uint *)((long)param_1 + 0x1c) = *(uint *)((long)param_1 + 0x1c) & 0xffffffcf | 0x20;
      uVar5 = *(uint *)pIVar3;
    }
    *(uint *)pIVar3 = uVar5 | 0x10000;
    *(ulong *)(local_40 + (arg1 >> 6) * 8 + (ulong)(uVar5 & 0xffff) * 0x40 + 0x400) =
         *(ulong *)(local_40 + (arg1 >> 6) * 8 + (ulong)(uVar5 & 0xffff) * 0x40 + 0x400) |
         1L << (bVar4 & 0x3f);
  }
  if ((char)local_38 != '\0') {
    lVar2 = lVar6 + arg1 * 0x20;
    this[lVar2 + 0x140a] = (IGHardwareCommandStreamer5)((byte)this[lVar2 + 0x140a] | 2);
    uVar5 = *(uint *)(*(long *)(this + lVar2 + 0x1400) + 0x1c);
    if ((uVar5 & 4) != 0) {
      *(uint *)(*(long *)(this + lVar2 + 0x1400) + 0x1c) =
           (uVar5 & 0xffffffcf) + (uint)((uVar5 & 0x30) != 0) * 0x10 + 0x10;
    }
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      lVar6 = lVar6 + arg1 * 0x20;
      _kernel_debug(0x85a001cc,arg1,(ulong)*(ushort *)(this + lVar6 + 0x1408),
                    (ulong)*(uint *)(this + lVar6 + 0x140c),0,0);
    }
  }
  *(ulong *)(local_40 + (arg1 >> 6) * 8 + 0x3c0) =
       *(ulong *)(local_40 + (arg1 >> 6) * 8 + 0x3c0) | 1L << (bVar4 & 0x3f);
  return;
}



// IGHardwareCommandStreamer5::csbProcessElementSwitch(SGfxContextStatusBufferEntry const*)

void __thiscall
IGHardwareCommandStreamer5::csbProcessElementSwitch(IGHardwareCommandStreamer5 *this,uint *param_1)

{
  IGHardwareContext IVar1;
  uint uVar2;
  uint uVar3;
  long *plVar4;
  IGHardwareContext *pIVar5;
  long lVar6;
  long lVar7;
  uint64_t uVar8;
  ulong uVar9;
  
  ContextStatusBufferValidate((long *)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30),param_1);
  plVar4 = *(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30);
  pIVar5 = (IGHardwareContext *)*plVar4;
  lVar7 = **(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38);
  uVar2 = *(uint *)(*(long *)(pIVar5 + 0xb0) + 0x20);
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a001c4,(ulong)(param_1[1] >> 5 & 0x7ff),(ulong)(byte)pIVar5[0x78],0,0,0);
  }
  if ((((lVar7 != 0) && (IVar1 = *(IGHardwareContext *)(lVar7 + 0x78), IVar1 != pIVar5[0x78])) &&
      (lVar6 = *(long *)(this + 0x10), ((&DAT_000011c1)[lVar6] & 0x40) != 0)) &&
     ((**(char **)(this + 0x28) == '\0' && (*(char *)(*(long *)(lVar6 + 0xf18) + 0x338) == '\0'))))
  {
    (**(code **)(*(long *)(lVar6 + 0xdf8) + 0x40))
              ((ulong)(byte)IVar1,1,*(long *)(this + 0x70) + (ulong)(byte)IVar1 * 8 + 0x678);
    uVar3 = *(uint *)(this + 0x1c24);
    uVar9 = 0x28;
    if ((uVar3 != 0) && (uVar9 = 4, uVar3 < 0xb)) {
      uVar9 = (ulong)(byte)(0x28 / (byte)uVar3);
    }
    *(ulong *)(this + 0x1c10) = uVar9;
    (**(code **)(**(long **)(this + 0x1c18) + 0x1d0))();
    this[0x1c20] = (IGHardwareCommandStreamer5)0x0;
    this[0x1c28] = *(IGHardwareCommandStreamer5 *)(lVar7 + 0x78);
  }
  IGHwCsStatsTracker::updateWithContextUtilizationData(*(IGHwCsStatsTracker **)(this + 0x70),pIVar5)
  ;
  if (((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) &&
     ((*param_1 & 0x80) != 0)) {
    moveItemToWaitQueue(this,plVar4,0,1,0);
    IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),5);
  }
  IGScheduler5::notifyAsyncEngines(*(IGScheduler5 **)(this + 0x20),uVar2);
  if ((*param_1 & 0x80) == 0) {
    *(long *)(*(long *)(*(long *)(this + 0x20) + 0xaa0 +
                       (long)*(int *)(*(long *)(*plVar4 + 0xb0) + 0x20) * 8) + 0x4000) = plVar4[2];
    _OSAddAtomic64(1,this + 0x1c40);
  }
  _OSAddAtomic16(0xffffffff,pIVar5 + 0x62);
  lVar7 = (ulong)*(uint *)(this + 0x50) * 0x10;
  *(undefined8 *)(this + lVar7 + 0x30) = *(undefined8 *)(this + lVar7 + 0x38);
  *(undefined8 *)(this + lVar7 + 0x38) = 0;
  IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),5);
  uVar8 = _mach_absolute_time();
  *(uint64_t *)(this + 0x1c48) = uVar8;
  return;
}



// IGHardwareCommandStreamer5::csbProcessActiveToIdle(SGfxContextStatusBufferEntry const*)

void __thiscall
IGHardwareCommandStreamer5::csbProcessActiveToIdle(IGHardwareCommandStreamer5 *this,uint *param_1)

{
  uint uVar1;
  long *plVar2;
  IGHardwareContext *pIVar3;
  char cVar4;
  short sVar5;
  ulong uVar6;
  uint64_t uVar7;
  
  ContextStatusBufferValidate((long *)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30),param_1);
  plVar2 = *(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x30);
  pIVar3 = (IGHardwareContext *)*plVar2;
  uVar1 = *(uint *)(*(long *)(pIVar3 + 0xb0) + 0x20);
  if (this[0x1c20] == (IGHardwareCommandStreamer5)0x0) {
    (**(code **)(**(long **)(this + 0x1c18) + 0x218))();
    this[0x1c20] = (IGHardwareCommandStreamer5)0x1;
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a001c8,(ulong)(param_1[1] >> 5 & 0x7ff),(ulong)(byte)pIVar3[0x78],0,0,0);
    }
  }
  IGHwCsStatsTracker::updateWithContextUtilizationData(*(IGHwCsStatsTracker **)(this + 0x70),pIVar3)
  ;
  if (((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) &&
     ((*param_1 & 0x80) != 0)) {
    moveItemToWaitQueue(this,plVar2,0,1,0);
    if (this[0x1c3c] != (IGHardwareCommandStreamer5)0x0) {
      IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),5);
    }
  }
  if ((((&DAT_000011c4)[*(long *)(this + 0x10)] & 0x40) != 0) &&
     (*(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) != (long *)0x0)) {
    _OSAddAtomic16(0xffffffff,**(long **)(this + (ulong)*(uint *)(this + 0x50) * 0x10 + 0x38) + 0x62
                  );
    uVar6 = (ulong)*(uint *)(this + 0x50);
    if (*(undefined8 **)(this + (ulong)(1 - *(uint *)(this + 0x50)) * 0x10 + 0x30) !=
        (undefined8 *)0x0) {
      cVar4 = (**(code **)(*(long *)**(undefined8 **)(this + uVar6 * 0x10 + 0x38) + 0x40))
                        ((long *)**(undefined8 **)(this + uVar6 * 0x10 + 0x38),
                         **(undefined8 **)(this + (ulong)(1 - *(uint *)(this + 0x50)) * 0x10 + 0x30)
                        );
      if (cVar4 != '\0') goto LAB_0003b841;
      uVar6 = (ulong)*(uint *)(this + 0x50);
    }
    moveItemToWaitQueue(this,*(long **)(this + uVar6 * 0x10 + 0x38),0,0,1);
  }
LAB_0003b841:
  IGScheduler5::notifyAsyncEngines(*(IGScheduler5 **)(this + 0x20),uVar1);
  if ((*param_1 & 0x80) == 0) {
    *(long *)(*(long *)(*(long *)(this + 0x20) + 0xaa0 +
                       (long)*(int *)(*(long *)(*plVar2 + 0xb0) + 0x20) * 8) + 0x4000) = plVar2[2];
    _OSAddAtomic64(1,this + 0x1c40);
  }
  sVar5 = _OSAddAtomic16(0xffffffff,pIVar3 + 0x62);
  if (sVar5 == 1) {
    IGScheduler5::updateIdleState(*(IGScheduler5 **)(this + 0x20),**(byte **)(this + 0x28),8);
  }
  uVar1 = *(uint *)(this + 0x50);
  *(undefined8 *)(this + (ulong)uVar1 * 0x10 + 0x30) = 0;
  *(undefined8 *)(this + (ulong)uVar1 * 0x10 + 0x38) = 0;
  uVar7 = _mach_absolute_time();
  *(uint64_t *)(this + 0x1c48) = uVar7;
  return;
}



// IGHardwareCommandStreamer5::debugDumpCsbBeforeProcessing(unsigned int, unsigned int)

void IGHardwareCommandStreamer5::debugDumpCsbBeforeProcessing(void)

{
  return;
}



// IGHardwareCommandStreamer5::allowPreemption()

void IGHardwareCommandStreamer5::allowPreemption(void)

{
  return;
}



// IGHardwareCommandStreamer5::isPreemptionAllowed() const

undefined8 IGHardwareCommandStreamer5::isPreemptionAllowed(void)

{
  return 0;
}



// IGHardwareCommandStreamer5::disallowPreemption()

void IGHardwareCommandStreamer5::disallowPreemption(void)

{
  return;
}



// IGHardwareCommandStreamer5::startPreemptionTimer()

void IGHardwareCommandStreamer5::startPreemptionTimer(void)

{
  return;
}



// IGHardwareCommandStreamer5::cancelPreemptionTimer()

void IGHardwareCommandStreamer5::cancelPreemptionTimer(void)

{
  return;
}



// IGHardwareCommandStreamer5::isPreemptionAllowedByTimer() const

undefined8 IGHardwareCommandStreamer5::isPreemptionAllowedByTimer(void)

{
  return 0;
}



// IGHardwareCommandStreamer5::disablePreemptionAllowedByTimer()

void IGHardwareCommandStreamer5::disablePreemptionAllowedByTimer(void)

{
  return;
}



// IGHardwareRenderCommandStreamer5::MetaClass::MetaClass()

void __thiscall IGHardwareRenderCommandStreamer5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRenderCommandStreamer5",
             (OSMetaClass *)&IGHardwareCommandStreamer5::gMetaClass,0x1c80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRenderCommandStreamer5::MetaClass::~MetaClass()

void __thiscall IGHardwareRenderCommandStreamer5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5(OSMetaClass const*)

void __thiscall
IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this,OSMetaClass *param_1)

{
  IGHardwareCommandStreamer5::IGHardwareCommandStreamer5((IGHardwareCommandStreamer5 *)this,param_1)
  ;
  *(undefined ***)this = &__const::~IGHardwareRenderCommandStreamer5;
  this[0x1c50] = (IGHardwareRenderCommandStreamer5)0x0;
  *(undefined8 *)(this + 0x1c54) = 0x7d000000190;
  *(undefined2 *)(this + 0x1c5c) = 0;
  *(undefined8 *)(this + 0x1c60) = 0;
  return;
}



// IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5(OSMetaClass const*)

void __thiscall
IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this,OSMetaClass *param_1)

{
  IGHardwareCommandStreamer5::IGHardwareCommandStreamer5((IGHardwareCommandStreamer5 *)this,param_1)
  ;
  *(undefined ***)this = &__const::~IGHardwareRenderCommandStreamer5;
  this[0x1c50] = (IGHardwareRenderCommandStreamer5)0x0;
  *(undefined8 *)(this + 0x1c54) = 0x7d000000190;
  *(undefined2 *)(this + 0x1c5c) = 0;
  *(undefined8 *)(this + 0x1c60) = 0;
  return;
}



// IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5()

void __thiscall
IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5()

void __thiscall
IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5()

void __thiscall
IGHardwareRenderCommandStreamer5::~IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this)

{
  *(undefined ***)this = &__const::~IGHardwareCommandStreamer5;
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareRenderCommandStreamer5_ktv,this,0x1c80);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRenderCommandStreamer5::operator delete(void*, unsigned long)

void __cdecl
IGHardwareRenderCommandStreamer5::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRenderCommandStreamer5_ktv,param_1,param_2);
  return;
}



// IGHardwareRenderCommandStreamer5::getMetaClass() const

undefined8 * IGHardwareRenderCommandStreamer5::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRenderCommandStreamer5::MetaClass::MetaClass()

void __thiscall IGHardwareRenderCommandStreamer5::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRenderCommandStreamer5",
             (OSMetaClass *)&IGHardwareCommandStreamer5::gMetaClass,0x1c80);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRenderCommandStreamer5::MetaClass::alloc() const

IGHardwareRenderCommandStreamer5 * IGHardwareRenderCommandStreamer5::MetaClass::alloc(void)

{
  IGHardwareRenderCommandStreamer5 *this;
  
  this = (IGHardwareRenderCommandStreamer5 *)
         _OSObject_typed_operator_new(&IGHardwareRenderCommandStreamer5_ktv,0x1c80);
  IGHardwareRenderCommandStreamer5(this);
  return this;
}



// IGHardwareRenderCommandStreamer5::operator new(unsigned long)

void * __thiscall
IGHardwareRenderCommandStreamer5::operator_new(IGHardwareRenderCommandStreamer5 *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRenderCommandStreamer5_ktv,this);
  return pvVar1;
}



// IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5()

void __thiscall
IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this)

{
  IGHardwareRenderCommandStreamer5(this);
  return;
}



// IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5()

void __thiscall
IGHardwareRenderCommandStreamer5::IGHardwareRenderCommandStreamer5
          (IGHardwareRenderCommandStreamer5 *this)

{
  IGHardwareCommandStreamer5::IGHardwareCommandStreamer5
            ((IGHardwareCommandStreamer5 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRenderCommandStreamer5;
  this[0x1c50] = (IGHardwareRenderCommandStreamer5)0x0;
  *(undefined8 *)(this + 0x1c54) = 0x7d000000190;
  *(undefined2 *)(this + 0x1c5c) = 0;
  *(undefined8 *)(this + 0x1c60) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRenderCommandStreamer5::handlePreemptionTimerInterrupt(IOTimerEventSource*)

void __cdecl IGHardwareRenderCommandStreamer5::handlePreemptionTimerInterrupt(long param_1)

{
  *(undefined2 *)(param_1 + 0x1c5c) = 0x100;
  IGScheduler5::notify(*(IGScheduler5 **)(param_1 + 0x20),0);
  return;
}



// IGHardwareRenderCommandStreamer5::free()

void __thiscall
IGHardwareRenderCommandStreamer5::free(IGHardwareRenderCommandStreamer5 *this,void *param_1)

{
  if (*(long *)(this + 0x1c60) != 0) {
    (**(code **)(**(long **)(this + 0x18) + 0x148))();
    if (*(long **)(this + 0x1c60) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x1c60) + 0x28))();
    }
    *(undefined8 *)(this + 0x1c60) = 0;
  }
  return;
}



// IGHardwareRenderCommandStreamer5::evalWorkQueues(unsigned int*, unsigned int, bool const*)

uint __thiscall
IGHardwareRenderCommandStreamer5::evalWorkQueues
          (IGHardwareRenderCommandStreamer5 *this,uint *param_1,uint param_2,long param_3)

{
  undefined8 *puVar1;
  ulong *puVar2;
  int iVar3;
  long *plVar4;
  ulong uVar5;
  byte bVar6;
  char cVar7;
  char cVar8;
  bool bVar9;
  uint uVar10;
  uint uVar11;
  uint *puVar12;
  undefined8 uVar13;
  long lVar14;
  ulong uVar15;
  int *piVar16;
  ulong uVar17;
  ulong uVar18;
  ulong uVar19;
  bool bVar20;
  int *piVar21;
  ulong uVar22;
  long lVar23;
  undefined4 *puVar24;
  long lVar25;
  bool bVar26;
  int local_174;
  uint local_15c;
  byte local_150;
  undefined4 local_13c;
  ulong local_100 [9];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  long local_80;
  
  local_80 = *(long *)__got::___stack_chk_guard;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0x8000) {
    uVar10 = IGHardwareCommandStreamer5::evalWorkQueues((long)this,param_1,param_2);
    if (*(long *)__got::___stack_chk_guard == local_80) {
      return uVar10;
    }
    goto LAB_0003c50a;
  }
  cVar7 = (**(code **)(*(long *)this + 0x128))(this);
  uVar10 = 0;
  uVar15 = 0;
  if ((param_2 >> 8 & 1) != 0) {
    uVar15 = (ulong)*(byte *)(**(long **)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x30) +
                             0x78);
  }
  local_15c = param_2 & 0x20;
  bVar26 = true;
  if ((uint)uVar15 < 4) {
    bVar20 = false;
    bVar9 = false;
    local_174 = 0;
    uVar10 = 0;
    uVar18 = uVar15;
    do {
      do {
        lVar14 = *(long *)(this + 0x20);
        lVar25 = uVar18 * 0x180;
        if (*(char *)(param_3 + uVar18) == '\0') {
          if (*(int *)(lVar14 + 0x5c8 + lVar25) < 1) {
            bVar9 = true;
          }
          else {
            local_88 = 0;
            local_90 = 0;
            local_98 = 0;
            local_a0 = 0;
            local_a8 = 0;
            local_b0 = 0;
            local_b8 = 0;
            local_100[8] = *(ulong *)(lVar14 + lVar25 + 0x480);
            if ((param_2 & 0x120) != 0) {
              iVar3 = *(int *)(*(long *)(**(long **)(this + (ulong)(1 - *(int *)(this + 0x50)) *
                                                            0x10 + 0x30) + 0xb0) + 0x20);
              bVar6 = (byte)iVar3 & 0x3f;
              local_100[((ulong)(long)iVar3 >> 6) + 8] =
                   local_100[((ulong)(long)iVar3 >> 6) + 8] &
                   (-2L << bVar6 | 0xfffffffffffffffeU >> 0x40 - bVar6);
            }
            if (cVar7 != '\0') {
              uVar11 = *(uint *)(this + 0x50);
              if (*(long **)(this + (ulong)uVar11 * 0x10 + 0x30) != (long *)0x0) {
                iVar3 = *(int *)(*(long *)(**(long **)(this + (ulong)uVar11 * 0x10 + 0x30) + 0xb0) +
                                0x20);
                bVar6 = (byte)iVar3 & 0x3f;
                local_100[((ulong)(long)iVar3 >> 6) + 8] =
                     local_100[((ulong)(long)iVar3 >> 6) + 8] &
                     (-2L << bVar6 | 0xfffffffffffffffeU >> 0x40 - bVar6);
              }
              if (*(long **)(this + (ulong)uVar11 * 0x10 + 0x38) != (long *)0x0) {
                iVar3 = *(int *)(*(long *)(**(long **)(this + (ulong)uVar11 * 0x10 + 0x38) + 0xb0) +
                                0x20);
                bVar6 = (byte)iVar3 & 0x3f;
                local_100[((ulong)(long)iVar3 >> 6) + 8] =
                     local_100[((ulong)(long)iVar3 >> 6) + 8] &
                     (-2L << bVar6 | 0xfffffffffffffffeU >> 0x40 - bVar6);
              }
            }
            local_100[8] = ~*(ulong *)(this + 0x3c0) & local_100[8];
            if (local_100[8] != 0) {
              piVar21 = (int *)(lVar14 + lVar25 + 0x5c0);
              local_100[7] = 0;
              local_100[6] = 0;
              local_100[5] = 0;
              local_100[4] = 0;
              local_100[3] = 0;
              local_100[2] = 0;
              local_100[1] = 0;
              local_100[0] = local_100[8];
              uVar22 = (ulong)*piVar21;
              if ((local_100[(uVar22 >> 6) + 8] >> (uVar22 & 0x3f) & 1) == 0) {
                uVar22 = 0;
                if (local_100[8] != 0) {
                  for (; (local_100[8] >> uVar22 & 1) == 0; uVar22 = uVar22 + 1) {
                  }
                }
                *piVar21 = (int)uVar22;
              }
              if ((uVar10 & 8) == 0) {
                piVar16 = (int *)(lVar14 + lVar25 + 0x5c8);
                uVar5 = 0;
                if (local_100[8] != 0) {
                  for (; (local_100[8] >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
                  }
                }
                local_13c = 0;
                do {
                  bVar6 = (byte)uVar22 & 0x3f;
                  puVar2 = (ulong *)((long)local_100 + (ulong)((uint)(uVar22 >> 3) & 0x1ffffff8));
                  *puVar2 = *puVar2 & (-2L << bVar6 | 0xfffffffffffffffeU >> 0x40 - bVar6);
                  lVar14 = *(long *)(*(long *)(this + 0x20) + 0xaa0 + (long)(int)uVar22 * 8);
                  uVar17 = *(ulong *)(lVar14 + 0x4040);
                  if (uVar17 != *(ulong *)(lVar14 + 0x4048)) {
                    do {
                      lVar25 = uVar17 * 0x20;
                      if ((*(byte *)(lVar14 + 0x1c + lVar25) & 8) == 0) {
                        puVar1 = (undefined8 *)(lVar14 + lVar25);
                        puVar12 = (uint *)(lVar14 + lVar25 + 0x1c);
                        uVar19 = (ulong)(1 - *(int *)(this + 0x50));
                        lVar23 = *(long *)(this + uVar19 * 0x10 + 0x38);
                        if (lVar23 != 0) {
                          uVar10 = param_1[1];
                          cVar8 = (**(code **)(*(long *)*puVar1 + 0x40))();
                          if ((((uVar10 < 0x100) && (cVar8 != '\0')) &&
                              (((&DAT_000011c3)[*(long *)(this + 0x10)] & 4) == 0)) &&
                             ((uVar10 = *puVar12, (uVar10 & 0x40) == 0 &&
                              ((*(byte *)(lVar23 + 0x1c) & 0x40) == 0)))) {
                            lVar23 = (ulong)(1 - *(int *)(this + 0x50)) * 0x10;
                            plVar4 = *(long **)(this + lVar23 + 0x38);
                            uVar13 = isHigherPriorityBlocked(this,plVar4);
                            if (((char)uVar13 == '\0') &&
                               ((*(byte *)(*plVar4 + 0x78) <=
                                 *(byte *)(**(long **)(this + lVar23 + 0x30) + 0x78) ||
                                ((*(byte *)((long)*(long **)(this + lVar23 + 0x30) + 0x1c) & 4) == 0
                                )))) {
                              uVar11 = *(uint *)((long)plVar4 + 0x1c) & 4;
                              *puVar12 = uVar11 | uVar10;
                              *puVar12 = uVar11 | uVar10 & 0xffffffbf |
                                         (uVar10 | *(uint *)(*(long *)(this + (ulong)(1 - *(int *)(
                                                  this + 0x50)) * 0x10 + 0x38) + 0x1c)) & 0x40;
                              uVar19 = (ulong)(1 - *(int *)(this + 0x50));
                              *(undefined8 **)(this + uVar19 * 0x10 + 0x38) = puVar1;
                              goto LAB_0003c240;
                            }
                          }
                          *(ulong *)(lVar14 + 0x4040) = uVar17;
                          uVar10 = 8;
                          bVar6 = 0;
                          goto LAB_0003c322;
                        }
                        if (*(long *)(this + uVar19 * 0x10 + 0x30) != 0) {
                          cVar8 = (**(code **)(*(long *)*puVar1 + 0x40))();
                          uVar19 = (ulong)(1 - *(int *)(this + 0x50));
                          plVar4 = *(long **)(this + uVar19 * 0x10 + 0x30);
                          if (cVar8 == '\0') {
                            if ((*(int *)(*(long *)(*plVar4 + 0xb0) + 0x20) != (int)uVar22) ||
                               ((*(byte *)((long)plVar4 + 0x1c) & 4) == 0)) {
                              iVar3 = *piVar16;
                              if (0 < iVar3) {
                                local_174 = local_174 + 1;
                                *(undefined8 **)(this + uVar19 * 0x10 + 0x38) = puVar1;
                                *piVar16 = iVar3 + -1;
                                goto LAB_0003c240;
                              }
                              *(ulong *)(lVar14 + 0x4040) = uVar17;
                              bVar9 = true;
                              uVar10 = 0x10;
                              bVar20 = true;
                              goto LAB_0003c38a;
                            }
                          }
                          else {
                            uVar10 = *param_1;
                            cVar8 = (**(code **)(*(long *)*puVar1 + 0x40))();
                            if ((((uVar10 < 0x100) && (cVar8 != '\0')) &&
                                (((&DAT_000011c3)[*(long *)(this + 0x10)] & 4) == 0)) &&
                               ((uVar10 = *puVar12, (uVar10 & 0x40) == 0 &&
                                ((*(byte *)((long)plVar4 + 0x1c) & 0x40) == 0)))) {
                              plVar4 = *(long **)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 +
                                                         0x30);
                              uVar13 = isHigherPriorityBlocked(this,plVar4);
                              if ((char)uVar13 == '\0') {
                                uVar11 = *(uint *)((long)plVar4 + 0x1c) & 4;
                                *puVar12 = uVar11 | uVar10;
                                *puVar12 = uVar11 | uVar10 & 0xffffffbf |
                                           (uVar10 | *(uint *)(*(long *)(this + (ulong)(1 - *(int *)
                                                  (this + 0x50)) * 0x10 + 0x30) + 0x1c)) & 0x40;
                                uVar19 = (ulong)(1 - *(int *)(this + 0x50));
                                *(undefined8 **)(this + uVar19 * 0x10 + 0x30) = puVar1;
                                if (local_15c == 0) {
                                  *piVar16 = *piVar16 + -1;
                                }
                                goto LAB_0003c240;
                              }
                            }
                          }
                          *(ulong *)(lVar14 + 0x4040) = uVar17;
                          goto LAB_0003c31d;
                        }
                        *(undefined8 **)(this + uVar19 * 0x10 + 0x30) = puVar1;
                        *piVar16 = *piVar16 + -1;
LAB_0003c240:
                        lVar23 = (long)local_174;
                        puVar24 = (undefined4 *)(lVar14 + lVar25 + 0xc);
                        IGHardwareContext::updateRingTail
                                  ((IGHardwareContext *)
                                   **(undefined8 **)(this + lVar23 * 8 + uVar19 * 0x10 + 0x30),
                                   *(undefined4 *)(lVar14 + lVar25 + 8));
                        uVar10 = param_1[lVar23];
                        param_1[lVar23] = uVar10 + 1;
                        if (uVar10 == 0) {
                          local_13c = *puVar24;
                        }
                        else {
                          *puVar24 = local_13c;
                        }
                        uVar17 = (ulong)((int)uVar17 + 1U & 0x1ff);
                        *(ulong *)(*(long *)(this + lVar23 * 8 +
                                                    (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x30
                                            ) + 0x10) = uVar17;
                      }
                      else {
                        uVar17 = (ulong)((int)uVar17 + 1U & 0x1ff);
                      }
                    } while (uVar17 != *(ulong *)(lVar14 + 0x4048));
                  }
                  *(ulong *)(lVar14 + 0x4040) = uVar17;
                  if (local_174 == 1) {
                    bVar6 = 0;
                    uVar10 = 8;
                    local_174 = 1;
                  }
                  else {
LAB_0003c31d:
                    uVar10 = 0;
                    bVar6 = 1;
                  }
LAB_0003c322:
                  uVar17 = (long)*piVar21 + 1;
                  uVar22 = uVar5;
                  if ((uVar17 < 0x40) &&
                     (uVar19 = (local_100[(uVar17 >> 6) + 8] >> ((byte)uVar17 & 0x3f)) <<
                               ((byte)uVar17 & 0x3f), uVar19 != 0)) {
                    uVar22 = 0;
                    if (uVar19 != 0) {
                      for (; (uVar19 >> uVar22 & 1) == 0; uVar22 = uVar22 + 1) {
                      }
                    }
                    uVar22 = uVar22 | uVar17 & 0xffffffffffffffc0;
                  }
                  *piVar21 = (int)uVar22;
                } while ((bool)(local_100[0] != 0 & bVar6));
              }
            }
          }
        }
        else if (*(char *)(lVar14 + 0x5e4 + lVar25) == '\0') {
          if (_graphicsTracePointEnable != 0) {
            local_150 = (byte)uVar18;
            dtHookTrace();
            if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
              _kernel_debug((uint)local_150 * 4 + 0x85a001ad,
                            (ulong)*(uint *)(lVar14 + lVar25 + 0x5e0),0,0,0,0);
            }
          }
          *(undefined1 *)(lVar14 + lVar25 + 0x5e4) = 1;
          (**(code **)(**(long **)(lVar14 + lVar25 + 0x5d8) + 0x1d8))();
        }
LAB_0003c38a:
      } while ((uVar18 < 3) && (uVar18 = uVar18 + 1, (uVar10 & 8) == 0));
      if ((((uVar10 & 8) != 0) || (!bVar9)) ||
         ((lVar14 = (ulong)(1 - *(int *)(this + 0x50)) * 0x10, *(long *)(this + lVar14 + 0x30) != 0
          && (*(long *)(this + lVar14 + 0x38) != 0)))) {
        if ((uVar10 & 8) == 0) goto LAB_0003c458;
        goto LAB_0003c47f;
      }
      IGScheduler5::resetCredits(*(IGScheduler5 **)(this + 0x20));
      bVar26 = (uVar10 & 8) == 0;
      if (3 < (uint)uVar15) break;
      bVar20 = false;
      bVar9 = false;
      uVar18 = uVar15;
    } while ((uVar10 & 8) == 0);
  }
  bVar20 = false;
  if (bVar26) {
LAB_0003c458:
    if ((*(long *)(this + (ulong)(1 - *(int *)(this + 0x50)) * 0x10 + 0x30) != 0) &&
       ((param_2 & 0x120) != 0 || *param_1 != 0)) {
      uVar10 = 8;
    }
LAB_0003c47f:
    local_15c = local_15c & (int)(uVar10 << 0x1c) >> 0x1f;
    uVar11 = 0x400;
    if (!bVar20) goto LAB_0003c49b;
  }
  else {
    bVar20 = false;
LAB_0003c49b:
    lVar14 = (ulong)(1 - *(int *)(this + 0x50)) * 0x10;
    if (*(long **)(this + lVar14 + 0x38) == (long *)0x0) {
      uVar11 = 0;
    }
    else {
      uVar11 = (uint)bVar20;
      if (*(byte *)(**(long **)(this + lVar14 + 0x38) + 0x78) <
          *(byte *)(**(long **)(this + lVar14 + 0x30) + 0x78)) {
        uVar11 = 1;
      }
      uVar11 = uVar11 << 10;
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_80) {
    return uVar11 | local_15c | uVar10;
  }
LAB_0003c50a:
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRenderCommandStreamer5::isHigherPriorityBlocked(IGHwCsWorkItem5*) const

undefined8 __thiscall
IGHardwareRenderCommandStreamer5::isHigherPriorityBlocked
          (IGHardwareRenderCommandStreamer5 *this,long *param_1)

{
  undefined8 uVar1;
  ulong uVar2;
  
  uVar2 = (ulong)*(byte *)(*param_1 + 0x78);
  if (uVar2 != 0) {
    uVar1 = IGHardwareCommandStreamer5::checkUnblock
                      ((IGHardwareCommandStreamer5 *)this,
                       *(int *)(*(long *)(*param_1 + 0xb0) + 0x20),(int)param_1[3],0,
                       (uint)*(byte *)((long)&kStampIndexPriorityMinTable + uVar2));
    return uVar1;
  }
  return 0;
}



// IGHardwareRenderCommandStreamer5::prepareForQueuesEval()

void __thiscall
IGHardwareRenderCommandStreamer5::prepareForQueuesEval(IGHardwareRenderCommandStreamer5 *this)

{
  uint uVar1;
  long *plVar2;
  char cVar3;
  ulong uVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  
  cVar3 = (**(code **)(*(long *)this + 0x128))();
  uVar1 = *(uint *)(this + 0x50);
  lVar6 = (ulong)uVar1 * 0x10;
  plVar2 = *(long **)(this + lVar6 + 0x30);
  if (((cVar3 == '\0') || (plVar2 == (long *)0x0)) || (*(byte *)(*plVar2 + 0x78) == 0)) {
    uVar4 = (ulong)(1 - uVar1);
    *(long **)(this + uVar4 * 0x10 + 0x30) = plVar2;
    uVar5 = *(undefined8 *)(this + lVar6 + 0x38);
  }
  else {
    plVar7 = *(long **)(this + lVar6 + 0x38);
    if ((plVar7 == (long *)0x0) || (*(byte *)(*plVar2 + 0x78) <= *(byte *)(*plVar7 + 0x78))) {
      plVar7 = (long *)0x0;
    }
    uVar4 = (ulong)(1 - uVar1);
    *(long **)(this + uVar4 * 0x10 + 0x30) = plVar7;
    uVar5 = 0;
  }
  *(undefined8 *)(this + uVar4 * 0x10 + 0x38) = uVar5;
  return;
}



// IGHardwareRenderCommandStreamer5::startPreemptionTimer()

void __thiscall
IGHardwareRenderCommandStreamer5::startPreemptionTimer(IGHardwareRenderCommandStreamer5 *this)

{
  if ((*(byte *)(*(long *)(this + 0x20) + 0xc) & 4) != 0) {
    (**(code **)(*(long *)this + 0x148))();
    (**(code **)(**(long **)(this + 0x1c60) + 0x1d8))
              (*(long **)(this + 0x1c60),*(undefined4 *)(this + 0x1c58));
    this[0x1c5c] = (IGHardwareRenderCommandStreamer5)0x1;
  }
  return;
}



// IGHardwareRenderCommandStreamer5::cancelPreemptionTimer()

void __thiscall
IGHardwareRenderCommandStreamer5::cancelPreemptionTimer(IGHardwareRenderCommandStreamer5 *this)

{
  (**(code **)(*(long *)this + 0x158))();
  if (this[0x1c5c] != (IGHardwareRenderCommandStreamer5)0x0) {
                    // WARNING: Could not recover jumptable at 0x0003c63b. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(**(long **)(this + 0x1c60) + 0x218))();
    return;
  }
  return;
}



// IGHardwareRenderCommandStreamer5::isPreemptionAllowedByTimer() const

IGHardwareRenderCommandStreamer5 __thiscall
IGHardwareRenderCommandStreamer5::isPreemptionAllowedByTimer(IGHardwareRenderCommandStreamer5 *this)

{
  return this[0x1c5d];
}



// IGHardwareRenderCommandStreamer5::disablePreemptionAllowedByTimer()

void __thiscall
IGHardwareRenderCommandStreamer5::disablePreemptionAllowedByTimer
          (IGHardwareRenderCommandStreamer5 *this)

{
  this[0x1c5d] = (IGHardwareRenderCommandStreamer5)0x0;
  return;
}



// IGHardwareRenderCommandStreamer5::allowPreemption()

void __thiscall
IGHardwareRenderCommandStreamer5::allowPreemption(IGHardwareRenderCommandStreamer5 *this)

{
  IGHardwareRenderCommandStreamer5 IVar1;
  
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0) {
    IVar1 = (IGHardwareRenderCommandStreamer5)(*(byte *)(*(long *)(this + 0x20) + 0xc) >> 2 & 1);
  }
  else {
    IVar1 = (IGHardwareRenderCommandStreamer5)0x0;
  }
  this[0x1c50] = IVar1;
  return;
}



// IGHardwareRenderCommandStreamer5::isPreemptionAllowed() const

IGHardwareRenderCommandStreamer5 __thiscall
IGHardwareRenderCommandStreamer5::isPreemptionAllowed(IGHardwareRenderCommandStreamer5 *this)

{
  return this[0x1c50];
}



// IGHardwareRenderCommandStreamer5::disallowPreemption()

void __thiscall
IGHardwareRenderCommandStreamer5::disallowPreemption(IGHardwareRenderCommandStreamer5 *this)

{
  (**(code **)(*(long *)this + 0x148))();
  this[0x1c50] = (IGHardwareRenderCommandStreamer5)0x0;
  return;
}



// IGHardwareCommandStreamer5::MetaClass::~MetaClass()

void __thiscall IGHardwareCommandStreamer5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRenderCommandStreamer5::MetaClass::~MetaClass()

void __thiscall IGHardwareRenderCommandStreamer5::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// DebugDumpContextStatusBufferEntry(SGfxContextStatusBufferEntry const*)

void __cdecl DebugDumpContextStatusBufferEntry(uint *param_1)

{
  int iVar1;
  int iVar2;
  ulong uVar3;
  int iVar4;
  bool bVar5;
  uint uVar6;
  long lVar7;
  char local_a8 [112];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_a8[0x58] = '\0';
  local_a8[0x59] = '\0';
  local_a8[0x5a] = '\0';
  local_a8[0x5b] = '\0';
  local_a8[0x5c] = '\0';
  local_a8[0x5d] = '\0';
  local_a8[0x5e] = '\0';
  local_a8[0x5f] = '\0';
  local_a8[0x50] = '\0';
  local_a8[0x51] = '\0';
  local_a8[0x52] = '\0';
  local_a8[0x53] = '\0';
  local_a8[0x54] = '\0';
  local_a8[0x55] = '\0';
  local_a8[0x56] = '\0';
  local_a8[0x57] = '\0';
  local_a8[0x48] = '\0';
  local_a8[0x49] = '\0';
  local_a8[0x4a] = '\0';
  local_a8[0x4b] = '\0';
  local_a8[0x4c] = '\0';
  local_a8[0x4d] = '\0';
  local_a8[0x4e] = '\0';
  local_a8[0x4f] = '\0';
  local_a8[0x40] = '\0';
  local_a8[0x41] = '\0';
  local_a8[0x42] = '\0';
  local_a8[0x43] = '\0';
  local_a8[0x44] = '\0';
  local_a8[0x45] = '\0';
  local_a8[0x46] = '\0';
  local_a8[0x47] = '\0';
  local_a8[0x38] = '\0';
  local_a8[0x39] = '\0';
  local_a8[0x3a] = '\0';
  local_a8[0x3b] = '\0';
  local_a8[0x3c] = '\0';
  local_a8[0x3d] = '\0';
  local_a8[0x3e] = '\0';
  local_a8[0x3f] = '\0';
  local_a8[0x30] = '\0';
  local_a8[0x31] = '\0';
  local_a8[0x32] = '\0';
  local_a8[0x33] = '\0';
  local_a8[0x34] = '\0';
  local_a8[0x35] = '\0';
  local_a8[0x36] = '\0';
  local_a8[0x37] = '\0';
  local_a8[0x28] = '\0';
  local_a8[0x29] = '\0';
  local_a8[0x2a] = '\0';
  local_a8[0x2b] = '\0';
  local_a8[0x2c] = '\0';
  local_a8[0x2d] = '\0';
  local_a8[0x2e] = '\0';
  local_a8[0x2f] = '\0';
  local_a8[0x20] = '\0';
  local_a8[0x21] = '\0';
  local_a8[0x22] = '\0';
  local_a8[0x23] = '\0';
  local_a8[0x24] = '\0';
  local_a8[0x25] = '\0';
  local_a8[0x26] = '\0';
  local_a8[0x27] = '\0';
  local_a8[0x18] = '\0';
  local_a8[0x19] = '\0';
  local_a8[0x1a] = '\0';
  local_a8[0x1b] = '\0';
  local_a8[0x1c] = '\0';
  local_a8[0x1d] = '\0';
  local_a8[0x1e] = '\0';
  local_a8[0x1f] = '\0';
  local_a8[0x10] = '\0';
  local_a8[0x11] = '\0';
  local_a8[0x12] = '\0';
  local_a8[0x13] = '\0';
  local_a8[0x14] = '\0';
  local_a8[0x15] = '\0';
  local_a8[0x16] = '\0';
  local_a8[0x17] = '\0';
  local_a8[8] = '\0';
  local_a8[9] = '\0';
  local_a8[10] = '\0';
  local_a8[0xb] = '\0';
  local_a8[0xc] = '\0';
  local_a8[0xd] = '\0';
  local_a8[0xe] = '\0';
  local_a8[0xf] = '\0';
  local_a8[0] = '\0';
  local_a8[1] = '\0';
  local_a8[2] = '\0';
  local_a8[3] = '\0';
  local_a8[4] = '\0';
  local_a8[5] = '\0';
  local_a8[6] = '\0';
  local_a8[7] = '\0';
  local_a8[0x60] = '\0';
  local_a8[0x61] = '\0';
  local_a8[0x62] = '\0';
  local_a8[99] = '\0';
  if ((*param_1 & 0x1ff) == 0) {
    _snprintf(local_a8,100,"None");
  }
  else {
    iVar4 = 100;
    bVar5 = true;
    uVar6 = 1;
    lVar7 = 0;
    uVar3 = 0;
    do {
      if ((*param_1 & uVar6) != 0) {
        if (!bVar5) {
          iVar1 = _snprintf(local_a8 + uVar3,(long)iVar4," | ");
          if (iVar4 - iVar1 != 0 && iVar1 <= iVar4) {
            uVar3 = (ulong)(uint)((int)uVar3 + iVar1);
            iVar4 = iVar4 - iVar1;
          }
        }
        bVar5 = false;
        iVar2 = _snprintf(local_a8 + uVar3,(long)iVar4,"%s",
                          (char *)((long)&
                                         _reltable__ZL33DebugDumpContextStatusBufferEntryPK28SGfxContextStatusBufferEntry
                                  + (long)*(int *)((long)&
                                                  _reltable__ZL33DebugDumpContextStatusBufferEntryPK28SGfxContextStatusBufferEntry
                                                  + lVar7)));
        iVar1 = 0;
        if (iVar2 < iVar4) {
          iVar1 = iVar2;
        }
        uVar3 = (ulong)(uint)((int)uVar3 + iVar1);
        iVar4 = iVar4 - iVar1;
      }
      uVar6 = uVar6 * 2;
      lVar7 = lVar7 + 4;
    } while (lVar7 != 0x24);
  }
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



void __GLOBAL__sub_I_IGHardwareCommandStreamer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareCommandStreamer5::gMetaClass,"IGHardwareCommandStreamer5",
             (OSMetaClass *)__got::gMetaClass,0x1c80);
  IGHardwareCommandStreamer5::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRenderCommandStreamer5::gMetaClass,
             "IGHardwareRenderCommandStreamer5",
             (OSMetaClass *)&IGHardwareCommandStreamer5::gMetaClass,0x1c80);
  IGHardwareRenderCommandStreamer5::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRenderCommandStreamer5::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareCommandStreamer5::gMetaClass);
  return;
}



// IGAccelVideoContextMedia::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextMedia::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextMedia",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13f8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextMedia::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextMedia::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelVideoContextMedia::IGAccelVideoContextMedia(OSMetaClass const*)

void __thiscall
IGAccelVideoContextMedia::IGAccelVideoContextMedia
          (IGAccelVideoContextMedia *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextMedia;
  this[0x13c8] = (IGAccelVideoContextMedia)0x0;
  *(undefined8 *)(this + 0x13d0) = 0;
  *(undefined8 *)(this + 0x13d8) = 0;
  lVar1 = -0x18;
  do {
    *(undefined8 *)(this + lVar1 + 0x13f8) = 0;
    lVar1 = lVar1 + 8;
  } while (lVar1 != 0);
  return;
}



// IGAccelVideoContextMedia::IGAccelVideoContextMedia(OSMetaClass const*)

void __thiscall
IGAccelVideoContextMedia::IGAccelVideoContextMedia
          (IGAccelVideoContextMedia *this,OSMetaClass *param_1)

{
  long lVar1;
  
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextMedia;
  this[0x13c8] = (IGAccelVideoContextMedia)0x0;
  *(undefined8 *)(this + 0x13d0) = 0;
  *(undefined8 *)(this + 0x13d8) = 0;
  lVar1 = -0x18;
  do {
    *(undefined8 *)(this + lVar1 + 0x13f8) = 0;
    lVar1 = lVar1 + 8;
  } while (lVar1 != 0);
  return;
}



// IGAccelVideoContextMedia::~IGAccelVideoContextMedia()

void __thiscall IGAccelVideoContextMedia::~IGAccelVideoContextMedia(IGAccelVideoContextMedia *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextMedia::~IGAccelVideoContextMedia()

void __thiscall IGAccelVideoContextMedia::~IGAccelVideoContextMedia(IGAccelVideoContextMedia *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextMedia::~IGAccelVideoContextMedia()

void __thiscall IGAccelVideoContextMedia::~IGAccelVideoContextMedia(IGAccelVideoContextMedia *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  _OSObject_typed_operator_delete(&IGAccelVideoContextMedia_ktv,this,0x13f8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMedia::operator delete(void*, unsigned long)

void __cdecl IGAccelVideoContextMedia::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelVideoContextMedia_ktv,param_1,param_2);
  return;
}



// IGAccelVideoContextMedia::getMetaClass() const

undefined8 * IGAccelVideoContextMedia::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelVideoContextMedia::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextMedia::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextMedia",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13f8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextMedia::MetaClass::alloc() const

IGAccelVideoContextMedia * IGAccelVideoContextMedia::MetaClass::alloc(void)

{
  IGAccelVideoContextMedia *this;
  
  this = (IGAccelVideoContextMedia *)
         _OSObject_typed_operator_new(&IGAccelVideoContextMedia_ktv,0x13f8);
  IGAccelVideoContextMedia(this);
  return this;
}



// IGAccelVideoContextMedia::operator new(unsigned long)

void * __thiscall IGAccelVideoContextMedia::operator_new(IGAccelVideoContextMedia *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelVideoContextMedia_ktv,this);
  return pvVar1;
}



// IGAccelVideoContextMedia::IGAccelVideoContextMedia()

void __thiscall IGAccelVideoContextMedia::IGAccelVideoContextMedia(IGAccelVideoContextMedia *this)

{
  IGAccelVideoContextMedia(this);
  return;
}



// IGAccelVideoContextMedia::IGAccelVideoContextMedia()

void __thiscall IGAccelVideoContextMedia::IGAccelVideoContextMedia(IGAccelVideoContextMedia *this)

{
  long lVar1;
  
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextMedia;
  this[0x13c8] = (IGAccelVideoContextMedia)0x0;
  *(undefined8 *)(this + 0x13d0) = 0;
  *(undefined8 *)(this + 0x13d8) = 0;
  lVar1 = -0x18;
  do {
    *(undefined8 *)(this + lVar1 + 0x13f8) = 0;
    lVar1 = lVar1 + 8;
  } while (lVar1 != 0);
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContextMedia::contextStart()

void __thiscall IGAccelVideoContextMedia::contextStart(IGAccelVideoContextMedia *this)

{
  undefined4 uVar1;
  
  uVar1 = IGAccelVideoContext::contextStart((IGAccelVideoContext *)this);
  if ((char)uVar1 != '\0') {
    *(undefined ***)(this + 0x13b8) = &contextStart()::token_process_methods;
    *(undefined ***)(this + 0x13c0) = &contextStart()::token_discard_methods;
  }
  return;
}



// IGAccelVideoContextMedia::process_token_MPEG2DecodeVLD(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_MPEG2DecodeVLD(IGAccelVideoContextMedia *this,long *param_1)

{
  ushort uVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long *plVar5;
  char cVar6;
  long lVar7;
  ulong uVar8;
  ulong uVar9;
  short sVar10;
  uint uVar11;
  ulong *puVar12;
  undefined8 *puVar13;
  undefined8 local_c0;
  IGAccelResource *local_b8;
  long local_b0;
  long local_a8;
  IGAccelResource *local_a0;
  ulong local_98;
  long *local_90;
  IGAccelResource *local_88;
  uint local_7c;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  ulong local_58;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  lVar2 = param_1[3];
  if ((*(ulong *)(this + 0x628) < lVar2 + 500U) ||
     (lVar3 = *param_1, (ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < lVar3 + 0x2a4U))
  {
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    local_c0 = 0;
    local_40 = 0;
    local_48 = 0;
    local_50 = 0;
    local_58 = 0;
    local_60 = 0;
    local_68 = 0;
    local_70 = 0;
    local_78 = 0;
    local_7c = 0;
    local_b8 = (IGAccelResource *)0x0;
    local_a0 = (IGAccelResource *)0x0;
    local_88 = (IGAccelResource *)0x0;
    cVar6 = (**(code **)(*(long *)this + 0xb78))(this,param_1,*(undefined4 *)(lVar2 + 8));
    if (cVar6 != '\0') {
      (**(code **)(*(long *)local_b8 + 0x168))(local_b8,0,0);
      IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_b8);
      cVar6 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,*(undefined4 *)(lVar2 + 0xc),&local_a0,&local_c0,&local_7c,1);
      if (cVar6 != '\0') {
        local_a8 = lVar2;
        local_90 = param_1;
        (**(code **)(*(long *)local_a0 + 0x168))(local_a0,0,0);
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_a0);
        plVar5 = local_90;
        lVar2 = local_a8;
        lVar7 = -4;
        puVar12 = &local_58;
        puVar13 = &local_78;
        do {
          local_b0 = lVar7;
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,plVar5,*(undefined4 *)(lVar2 + 0x20 + lVar7 * 4),&local_88,puVar12
                             ,&local_7c,0);
          if (cVar6 == '\0') goto LAB_0003cb63;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_88);
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,plVar5,*(undefined4 *)(lVar2 + 0x30 + local_b0 * 4),&local_88,
                             puVar13,&local_7c,0);
          if (cVar6 == '\0') goto LAB_0003cb63;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_88);
          lVar4 = local_a8;
          puVar12 = puVar12 + 1;
          puVar13 = puVar13 + 1;
          lVar7 = local_b0 + 1;
        } while (lVar7 != 0);
        if (local_7c == 0) {
          *(undefined1 *)((long)local_90 + 0x3c) = 0;
        }
        else {
          uVar11 = *(uint *)(local_a8 + 0x48) & 0xfff00007 | local_7c * 8 + 0xffff8 & 0xffff8;
          *(uint *)(local_a8 + 0x48) = uVar11;
          *(uint *)(local_a8 + 0x4c) =
               *(uint *)(local_a8 + 0x4c) & 0xffff8000 | (uint)local_c0 / local_7c & 0x7fff;
          *(uint *)(lVar3 + 0x34) = uVar11;
          *(undefined4 *)(lVar3 + 0x38) = *(undefined4 *)(local_a8 + 0x4c);
          *(undefined2 *)(local_a8 + 0x5c) = 0;
          *(ulong *)(local_a8 + 0x54) = *(ulong *)(local_a8 + 0x54) & 0x3fffffffff;
          *(ulong *)(local_a8 + 0xa0) =
               local_58 & 0xffffffffffc0 | *(ulong *)(local_a8 + 0xa0) & 0xffff00000000003f;
          *(ulong *)(local_a8 + 0xa8) =
               local_50 & 0xffffffffffc0 | *(ulong *)(local_a8 + 0xa8) & 0xffff00000000003f;
          *(ulong *)(local_a8 + 0xb0) =
               local_48 & 0xffffffffffc0 | *(ulong *)(local_a8 + 0xb0) & 0xffff00000000003f;
          *(ulong *)(local_a8 + 0xb8) =
               local_40 & 0xffffffffffc0 | *(ulong *)(local_a8 + 0xb8) & 0xffff00000000003f;
          uVar8 = *(ulong *)(lVar3 + 0x40) & 0x3fffffffff;
          *(ulong *)(lVar3 + 0x40) = uVar8;
          uVar1 = *(ushort *)(local_a8 + 0x5c);
          *(ulong *)(lVar3 + 0x40) = uVar8;
          *(ulong *)(lVar3 + 0x48) = (ulong)uVar1 | *(ulong *)(lVar3 + 0x48) & 0xffffffffffff0000;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_a8 + 0xa0) & 0xffffffc0);
          uVar8 = *(ulong *)(lVar3 + 0x8c);
          *(ulong *)(lVar3 + 0x8c) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(lVar3 + 0x8c) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_a8 + 0xa4) << 0x20;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_a8 + 0xa8) & 0xffffffc0);
          uVar8 = *(ulong *)(lVar3 + 0x94);
          *(ulong *)(lVar3 + 0x94) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(lVar3 + 0x94) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_a8 + 0xac) << 0x20;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_a8 + 0xb0) & 0xffffffc0);
          uVar8 = *(ulong *)(lVar3 + 0x9c);
          *(ulong *)(lVar3 + 0x9c) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(lVar3 + 0x9c) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_a8 + 0xb4) << 0x20;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_a8 + 0xb8) & 0xffffffc0);
          uVar8 = *(ulong *)(lVar3 + 0xa4);
          *(ulong *)(lVar3 + 0xa4) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(lVar3 + 0xa4) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_a8 + 0xbc) << 0x20;
          local_98 = 0;
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,local_90,*(undefined4 *)(local_a8 + 0x30),&local_88,&local_98,
                             &local_7c,1);
          if (cVar6 != '\0') {
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_88);
            uVar9 = (ulong)((uint)local_98 & 0xffffffc0);
            *(ulong *)(lVar4 + 0x94) =
                 (local_98 >> 0x20 & 0xffff) << 0x20 | *(ulong *)(lVar4 + 0x94) & 0xffff00000000003f
                 | uVar9;
            uVar8 = *(ulong *)(lVar3 + 0x80);
            *(ulong *)(lVar3 + 0x80) = uVar8 & 0xffffffff0000003f | uVar9;
            *(ulong *)(lVar3 + 0x80) =
                 uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(lVar4 + 0x98) << 0x20;
            cVar6 = (**(code **)(*(long *)this + 0xb78))
                              (this,local_90,*(undefined4 *)(lVar4 + 0x34),&local_88,&local_98,
                               &local_7c,1);
            if (cVar6 != '\0') {
              IGAccelVideoContext::updateResourceMappingCacheType
                        ((IGAccelVideoContext *)this,local_88);
              uVar11 = *(uint *)(lVar4 + 0x1d0) & 0x3f | (uint)local_98 & 0xffffffc0;
              *(uint *)(lVar4 + 0x1d0) = uVar11;
              *(short *)(lVar4 + 0x1d4) = (short)(local_98 >> 0x20);
              *(uint *)(lVar3 + 0x1bc) = uVar11;
              *(undefined4 *)(lVar3 + 0x1c0) = *(undefined4 *)(lVar4 + 0x1d4);
              cVar6 = (**(code **)(*(long *)this + 0xb78))
                                (this,local_90,*(undefined4 *)(lVar4 + 0x38),&local_88,&local_98,
                                 &local_7c,0);
              if (cVar6 != '\0') {
                IGAccelVideoContext::updateResourceMappingCacheType
                          ((IGAccelVideoContext *)this,local_88);
                uVar11 = *(uint *)(lVar4 + 0x168) & 0xfff | (uint)local_98 & 0xfffff000;
                *(uint *)(lVar4 + 0x168) = uVar11;
                sVar10 = (short)(local_98 >> 0x20);
                *(short *)(lVar4 + 0x16c) = sVar10;
                *(uint *)(lVar4 + 0x174) =
                     *(uint *)(lVar4 + 0x174) & 0xfff |
                     (*(uint *)(lVar4 + 0x174) & 0xfffff000) + (uint)local_98 & 0xfffff000;
                *(short *)(lVar4 + 0x178) = (short)*(undefined4 *)(lVar4 + 0x178) + sVar10;
                *(uint *)(lVar3 + 0x154) = uVar11;
                *(undefined4 *)(lVar3 + 0x160) = *(undefined4 *)(lVar4 + 0x174);
              }
            }
          }
        }
      }
    }
  }
LAB_0003cb63:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelVideoContextMedia::process_token_AVCPAK(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_AVCPAK(IGAccelVideoContextMedia *this,long *param_1)

{
  uint uVar1;
  long lVar2;
  long *plVar3;
  char cVar4;
  int iVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  ulong *puVar9;
  long lVar10;
  ulong uVar11;
  ulong uVar12;
  ulong uVar13;
  ulong uVar14;
  ulong uVar15;
  uint uVar16;
  ulong uVar17;
  IGAccelVideoContextMedia *this_00;
  uint uVar18;
  uint *puVar19;
  uint local_cc0 [4];
  ulong local_cb0;
  uint local_ca8 [764];
  undefined8 local_b8;
  ulong local_b0;
  ulong local_a8;
  ulong local_a0;
  ulong local_98;
  ulong local_90;
  IGAccelResource *local_88;
  ulong local_80;
  ulong local_78;
  ulong local_70;
  uint local_64;
  uint local_60;
  uint local_5c;
  IGAccelVideoContextMedia *local_58;
  uint local_4c;
  long local_48;
  long local_40;
  long *local_38;
  
  lVar6 = param_1[3];
  local_b0 = lVar6 + 0xcc0;
  if (local_b0 <= *(ulong *)(this + 0x628)) {
    lVar2 = *param_1;
    local_58 = this;
    _memcpy(local_cc0,(void *)(lVar6 + 8),0xc08);
    uVar11 = (ulong)local_cc0[0];
    if (0x80 < uVar11) {
      *(undefined1 *)((long)param_1 + 0x3c) = 0;
      return;
    }
    local_38 = param_1;
    local_48 = lVar2;
    local_40 = lVar6;
    this_00 = local_58;
    if (uVar11 != 0) {
      puVar19 = local_ca8 + 1;
      uVar17 = 0;
      do {
        local_88 = (IGAccelResource *)0x0;
        local_b8 = 0;
        local_64 = 0;
        if (puVar19[-5] != 0) {
          cVar4 = (**(code **)(*(long *)this_00 + 0xb78))
                            (this_00,local_38,puVar19[-5],&local_88,&local_b8,&local_64,*puVar19 & 1
                            );
          if (cVar4 == '\0') {
            return;
          }
          IGAccelVideoContext::updateResourceMappingCacheType
                    ((IGAccelVideoContext *)this_00,local_88);
          *(undefined8 *)(puVar19 + -3) = local_b8;
          puVar19[-1] = local_64;
          plVar3 = local_38;
          if ((uVar17 == *(uint *)(local_40 + 0xc14)) || (uVar17 == *(uint *)(local_40 + 0xc18))) {
            IGAccelVideoContext::prepare_to_encode
                      ((IGAccelVideoContext *)this_00,(long)local_38,(ulong)local_88);
            this_00 = local_58;
            if (*(char *)((long)plVar3 + 0x3c) == '\0') {
              return;
            }
            lVar6 = IOAccelResource2::getProtectionOptions();
            if (lVar6 != 0) goto LAB_0003d983;
          }
        }
        uVar17 = uVar17 + 1;
        puVar19 = puVar19 + 6;
      } while (uVar11 != uVar17);
    }
    uVar17 = (ulong)*(uint *)(local_40 + 0xc24);
    param_1 = local_38;
    if ((((local_48 + uVar17 * 4 + 0x1b8 <=
           (ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1]) &&
         (*(uint *)(local_40 + 0xc54) < local_cc0[0])) &&
        (*(uint *)(local_40 + 0xc58) < local_cc0[0])) &&
       ((uVar8 = *(uint *)(local_40 + 0xc14), uVar8 < local_cc0[0] &&
        (*(uint *)(local_40 + 0xc18) < local_cc0[0])))) {
      uVar16 = local_ca8[(ulong)uVar8 * 6];
      if (uVar16 != 0) {
        local_58 = (IGAccelVideoContextMedia *)uVar11;
        lVar2 = local_48 + uVar17 * 4;
        uVar11 = (&local_cb0)[(ulong)uVar8 * 3];
        uVar12 = (&local_cb0)[(ulong)*(uint *)(local_40 + 0xc54) * 3] >> 6 & 0x3ffffff;
        local_a0 = *(ulong *)(lVar2 + 0x18) & 0x3fffffffff | uVar12 << 0x26;
        uVar14 = (uVar11 >> 6) << 0x26 | *(ulong *)(lVar2 + 0x30) & 0x3fffffffff;
        uVar13 = (&local_cb0)[(ulong)*(uint *)(local_40 + 0xc54) * 3] >> 0x20 & 0xffff;
        local_a8 = *(ulong *)(lVar2 + 0x20) & 0xffffffffffff0000 | uVar13;
        uVar13 = uVar13 << 0x20 | uVar12 << 6 | *(ulong *)(lVar2 + 0x28) & 0xffff00000000003f;
        uVar12 = (&local_cb0)[(ulong)*(uint *)(local_40 + 0xc18) * 3];
        uVar15 = uVar11 >> 0x20 & 0xffff | *(ulong *)(lVar2 + 0x38) & 0xffffffffffff0000;
        local_90 = *(ulong *)(lVar2 + 0x58);
        *(ulong *)(lVar2 + 0x20) = local_a8;
        *(ulong *)(lVar2 + 0x38) = uVar15;
        *(ulong *)(lVar2 + 0x18) = local_a0;
        *(ulong *)(lVar2 + 0x28) = uVar13;
        *(ulong *)(lVar2 + 0x30) = uVar14;
        local_80 = *(ulong *)(lVar2 + 0x50);
        local_70 = *(ulong *)(lVar2 + 0x40);
        local_78 = *(ulong *)(lVar2 + 0x48);
        uVar8 = *(uint *)(lVar2 + 0x60);
        local_98 = (ulong)uVar8;
        *(uint *)(lVar2 + 0xc) = uVar16 * 8 + 0xffff8 & 0xffff8 | *(uint *)(local_40 + 0xc38);
        *(uint *)(lVar2 + 0x10) = (uint)((int)uVar12 - (int)uVar11) / uVar16;
        lVar10 = local_48 + uVar17 * 4;
        puVar9 = (ulong *)(lVar10 + 0x18);
        lVar7 = 0;
        lVar6 = lVar10 + 100;
        do {
          uVar16 = *(uint *)(local_40 + 0xc68 + lVar7 * 4);
          if (uVar16 == 0) {
            puVar19 = (uint *)(lVar6 + lVar7 * 8);
            *puVar19 = *puVar19 & 0x3f;
          }
          else {
            uVar16 = uVar16 & 0xfff;
            if (local_cc0[0] <= uVar16) goto LAB_0003d983;
            *(ulong *)(lVar6 + lVar7 * 8) =
                 (&local_cb0)[(ulong)uVar16 * 3] & 0xffffffffffc0 |
                 *(ulong *)(lVar6 + lVar7 * 8) & 0xffff00000000003f;
          }
          lVar7 = lVar7 + 1;
        } while (lVar7 != 0x10);
        if (*(int *)(local_40 + 0xc1c) == 0) {
          local_60 = *(uint *)(local_40 + 0xc30);
          uVar16 = *(uint *)(local_40 + 0xc60);
          uVar18 = *(uint *)(local_40 + 0xc64);
          local_4c = *(uint *)(local_40 + 0xca8);
          local_5c = *(uint *)(local_40 + 0xcb4);
        }
        else {
          local_60 = *(uint *)(local_40 + 0xc30);
          uVar1 = *(uint *)(local_40 + 0xc5c);
          uVar16 = *(uint *)(local_40 + 0xc60);
          uVar18 = *(uint *)(local_40 + 0xc64);
          local_4c = *(uint *)(local_40 + 0xca8);
          local_5c = *(uint *)(local_40 + 0xcb4);
          if ((ulong)uVar1 != 0) {
            if (local_cc0[0] <= uVar1) goto LAB_0003d983;
            local_70 = local_70 & 0xffff00000000003f |
                       (ulong)((uint)(&local_cb0)[(ulong)uVar1 * 3] & 0xffffffc0) |
                       ((&local_cb0)[(ulong)uVar1 * 3] >> 0x20 & 0xffff) << 0x20;
            *(ulong *)(lVar10 + 0x28) = uVar13;
            *(ulong *)(lVar10 + 0x20) = local_a8;
            *puVar9 = local_a0;
            *(ulong *)(lVar10 + 0x30) = uVar14;
            *(ulong *)(lVar10 + 0x38) = uVar15;
            *(ulong *)(lVar10 + 0x48) = local_78;
            *(ulong *)(lVar10 + 0x50) = local_80;
            *(ulong *)(lVar10 + 0x58) = local_90;
            *(ulong *)(lVar10 + 0x40) = local_70;
            *(uint *)(lVar10 + 0x60) = uVar8;
          }
        }
        if (uVar16 != 0) {
          if (local_cc0[0] <= uVar16) goto LAB_0003d983;
          local_78 = local_78 & 0x3fffffffff | ((&local_cb0)[(ulong)uVar16 * 3] >> 6) << 0x26;
          local_80 = local_80 & 0xffffffffffff0000 |
                     (&local_cb0)[(ulong)uVar16 * 3] >> 0x20 & 0xffff;
          *(ulong *)(lVar10 + 0x38) = uVar15;
          *(ulong *)(lVar10 + 0x30) = uVar14;
          *(ulong *)(lVar10 + 0x28) = uVar13;
          *(ulong *)(lVar10 + 0x20) = local_a8;
          *puVar9 = local_a0;
          *(ulong *)(lVar10 + 0x40) = local_70;
          *(ulong *)(lVar10 + 0x58) = local_90;
          *(ulong *)(lVar10 + 0x50) = local_80;
          *(ulong *)(lVar10 + 0x48) = local_78;
          *(uint *)(lVar10 + 0x60) = uVar8;
        }
        if (uVar18 != 0) {
          if (local_cc0[0] <= uVar18) goto LAB_0003d983;
          uVar11 = (&local_cb0)[(ulong)uVar18 * 3];
          *(ulong *)(lVar10 + 0x38) = uVar15;
          *(ulong *)(lVar10 + 0x30) = uVar14;
          *(ulong *)(lVar10 + 0x28) = uVar13;
          *(ulong *)(lVar10 + 0x20) = local_a8;
          *puVar9 = local_a0;
          *(ulong *)(lVar10 + 0x40) = local_70;
          *(ulong *)(lVar10 + 0x48) = local_78;
          *(ulong *)(lVar10 + 0x50) = local_80;
          *(uint *)(lVar10 + 0x60) = uVar8;
          *(ulong *)(lVar10 + 0x58) =
               (uVar11 >> 0x20 & 0xffff) << 0x20 |
               local_90 & 0xffff00000000003f | (ulong)((uint)uVar11 & 0xffffffc0);
        }
        if (local_4c != 0) {
          if (local_cc0[0] <= local_4c) goto LAB_0003d983;
          uVar11 = (&local_cb0)[(ulong)local_4c * 3];
          *(uint *)(lVar2 + 0x194) = (uint)uVar11 & 0xffffffc0;
          *(int *)(lVar2 + 0x198) = (int)(uVar11 >> 0x20);
        }
        if (local_60 != 0) {
          if (local_cc0[0] <= local_60) goto LAB_0003d983;
          lVar6 = (ulong)*(uint *)(local_40 + 0xcac) + (&local_cb0)[(ulong)local_60 * 3];
          lVar10 = (ulong)*(uint *)(local_40 + 0xcb0) + (&local_cb0)[(ulong)local_60 * 3];
          *(uint *)(lVar2 + 0x140) = (uint)lVar6 & 0xfffff000;
          *(int *)(lVar2 + 0x144) = (int)((ulong)lVar6 >> 0x20);
          *(uint *)(lVar2 + 0x14c) = (uint)lVar10 & 0xfffff000;
          *(int *)(lVar2 + 0x150) = (int)((ulong)lVar10 >> 0x20);
        }
        if (local_5c != 0) {
          if (local_cc0[0] <= local_5c) goto LAB_0003d983;
          uVar11 = (&local_cb0)[(ulong)local_5c * 3];
          lVar6 = *(uint *)(local_40 + 0xcb8) + uVar11;
          *(uint *)(lVar2 + 0x17c) = (uint)uVar11 & 0xfffff000;
          *(int *)(lVar2 + 0x180) = (int)(uVar11 >> 0x20);
          *(uint *)(lVar2 + 0x188) = (uint)lVar6 & 0xfffff000;
          *(int *)(lVar2 + 0x18c) = (int)((ulong)lVar6 >> 0x20);
        }
        if (*(int *)(local_40 + 0xc20) != 0) {
          lVar6 = (ulong)*(uint *)(local_40 + 0xc28) * 4 + local_48;
          uVar8 = 0;
          do {
            if (*(ulong *)(this_00 + 0x628) < local_b0 + 0x4c) goto LAB_0003d983;
            if ((ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1] <
                lVar6 + (ulong)*(uint *)(local_b0 + 0x44) * 4 + 0x11c) {
LAB_0003d990:
              *(undefined1 *)((long)local_38 + 0x3c) = 0;
              return;
            }
            lVar2 = lVar6 + (ulong)*(uint *)(local_b0 + 0x44) * 4;
            lVar10 = 0;
            do {
              uVar16 = *(uint *)(local_b0 + lVar10 * 4);
              if ((ulong)uVar16 != 0) {
                if (local_cc0[0] <= uVar16) goto LAB_0003d990;
                uVar11 = (&local_cb0)[(ulong)uVar16 * 3];
                *(uint *)(lVar2 + 4 + lVar10 * 8) = (uint)uVar11 & 0xffffffc0;
                *(int *)(lVar2 + 8 + lVar10 * 8) = (int)(uVar11 >> 0x20);
              }
              lVar10 = lVar10 + 1;
            } while (lVar10 != 0x10);
            uVar8 = uVar8 + 1;
            local_b0 = local_b0 + 0x4c;
          } while (uVar8 < *(uint *)(local_40 + 0xc20));
        }
        uVar8 = *(uint *)(local_40 + 0xc34);
        if ((ulong)uVar8 == 0) {
          return;
        }
        if ((uVar8 < local_cc0[0]) &&
           (local_48 + 0x28U <= (ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1])) {
          uVar11 = (&local_cb0)[(ulong)uVar8 * 3];
          iVar5 = (int)uVar11;
          *(uint *)(local_48 + 0x18) = *(int *)(local_40 + 0xc3c) + iVar5 & 0xfffffffc;
          *(int *)(local_48 + 0x1c) = (int)(*(uint *)(local_40 + 0xc3c) + uVar11 >> 0x20);
          uVar8 = *(uint *)(local_40 + 0xc28);
          uVar17 = (ulong)*(uint *)(local_40 + 0xc2c);
          lVar6 = local_48 + (ulong)uVar8 * 4;
          if (lVar6 + uVar17 * 4 + 0x14 <=
              (ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1]) {
            lVar6 = lVar6 + uVar17 * 4;
            *(uint *)(lVar6 + 4) = *(int *)(local_40 + 0xc40) + iVar5 & 0xfffffffc;
            *(int *)(lVar6 + 8) = (int)(*(uint *)(local_40 + 0xc40) + uVar11 >> 0x20);
            uVar17 = (ulong)uVar8 * 4 + uVar17 * 4 + local_48 + 0x38;
            lVar6 = 0;
            while (uVar17 <= (ulong)(*(uint *)(local_38 + 2) & 0xfffffffc) + local_38[1]) {
              *(uint *)(uVar17 - 8) = *(int *)(local_40 + 0xc44 + lVar6 * 4) + iVar5 & 0xfffffffc;
              *(int *)(uVar17 - 4) = (int)(*(uint *)(local_40 + 0xc44 + lVar6 * 4) + uVar11 >> 0x20)
              ;
              lVar6 = lVar6 + 1;
              uVar17 = uVar17 + 0x10;
              if (lVar6 == 4) {
                return;
              }
            }
          }
        }
      }
LAB_0003d983:
      *(undefined1 *)((long)local_38 + 0x3c) = 0;
      return;
    }
  }
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMedia::process_token_AVCDecode(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_AVCDecode(IGAccelVideoContextMedia *this,long *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  char cVar5;
  ulong uVar6;
  uint uVar7;
  ulong uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  ulong uVar12;
  ulong uVar13;
  long lVar14;
  uint *puVar15;
  long lVar16;
  ulong uVar17;
  uint local_cb0 [4];
  ulong local_ca0;
  uint local_c98 [764];
  ulong local_a8;
  ulong local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  ulong local_80;
  ulong local_78;
  ulong local_70;
  long local_68;
  ulong local_60;
  undefined8 local_58;
  long local_50;
  ulong local_48;
  IGAccelResource *local_40;
  uint local_34;
  
  lVar4 = param_1[3];
  if (lVar4 + 0x19f8U <= *(ulong *)(this + 0x628)) {
    lVar14 = *param_1;
    _memcpy(local_cb0,(void *)(lVar4 + 8),0xc08);
    local_48 = (ulong)local_cb0[0];
    if (local_48 < 0x81) {
      if (*(int *)(lVar4 + 0xd54) == 0) {
        local_68 = 0xc;
        if ((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < lVar14 + 0x50cU)
        goto LAB_0003e17d;
      }
      else {
        if ((((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < lVar14 + 0x910U) ||
            (uVar17 = (ulong)*(uint *)(lVar4 + 0xdf0), 0x80 < uVar17)) || (uVar17 == 0))
        goto LAB_0003e17d;
        local_60 = lVar4 + 0xdf8;
        local_68 = uVar17 * 0x18;
        lVar16 = 0;
        local_50 = lVar14;
        do {
          local_40 = (IGAccelResource *)0x0;
          local_58 = 0;
          local_34 = 0;
          iVar10 = *(int *)(lVar4 + 0xdf8 + lVar16);
          if (iVar10 != 0) {
            cVar5 = (**(code **)(*(long *)this + 0xb78))
                              (this,param_1,iVar10,&local_40,&local_58,&local_34,
                               *(uint *)(lVar4 + 0xe0c + lVar16) & 1);
            if (cVar5 == '\0') {
              return;
            }
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_40);
            *(undefined8 *)(lVar4 + 0xe00 + lVar16) = local_58;
            *(uint *)(lVar4 + 0xe08 + lVar16) = local_34;
          }
          lVar16 = lVar16 + 0x18;
        } while (local_68 != lVar16);
        uVar17 = (ulong)*(uint *)(lVar4 + 0xd5c);
        if (*(uint *)(lVar4 + 0xdf0) <= *(uint *)(lVar4 + 0xd5c)) goto LAB_0003e17d;
        *(undefined8 *)(local_50 + 0x7c) = *(undefined8 *)(local_60 + 8 + uVar17 * 0x18);
        uVar7 = *(uint *)(local_60 + 0x10 + uVar17 * 0x18);
        uVar9 = *(uint *)(lVar4 + 0xde4) & 0xfff00007 | uVar7 * 8 + 0xffff8 & 0xffff8;
        *(uint *)(lVar4 + 0xde4) = uVar9;
        *(uint *)(local_50 + 0xac) = uVar9;
        if (*(uint *)(lVar4 + 0xdf0) <= *(uint *)(lVar4 + 0xd64)) goto LAB_0003e17d;
        *(undefined8 *)(local_50 + 0x88) =
             *(undefined8 *)(local_60 + 8 + (ulong)*(uint *)(lVar4 + 0xd64) * 0x18);
        if (*(int *)(lVar4 + 0xd58) != 0) {
          if (*(uint *)(lVar4 + 0xdf0) <= *(uint *)(lVar4 + 0xd68)) goto LAB_0003e17d;
          *(undefined8 *)(local_50 + 0x94) =
               *(undefined8 *)(local_60 + 8 + (ulong)*(uint *)(lVar4 + 0xd68) * 0x18);
        }
        uVar9 = *(uint *)(lVar4 + 0xd60);
        local_68 = 0x10d;
        lVar14 = local_50;
        if (((ulong)uVar9 != 0xffffffff) && (uVar7 != 0)) {
          if (*(uint *)(lVar4 + 0xdf0) <= uVar9) goto LAB_0003e17d;
          uVar7 = *(uint *)(lVar4 + 0xde8) & 0xffffc000 |
                  (uint)(*(int *)(local_60 + 8 + (ulong)uVar9 * 0x18) -
                        *(int *)(local_60 + uVar17 * 0x18 + 8)) / uVar7 & 0x3fff;
          *(uint *)(lVar4 + 0xde8) = uVar7;
          *(uint *)(local_50 + 0xb0) = uVar7;
        }
      }
      local_50 = lVar14;
      if (local_48 != 0) {
        puVar15 = local_c98 + 1;
        uVar17 = 0;
        do {
          local_40 = (IGAccelResource *)0x0;
          local_58 = 0;
          local_34 = 0;
          if (puVar15[-5] != 0) {
            cVar5 = (**(code **)(*(long *)this + 0xb78))
                              (this,param_1,puVar15[-5],&local_40,&local_58,&local_34,*puVar15 & 1);
            if (cVar5 == '\0') {
              return;
            }
            *(undefined8 *)(puVar15 + -3) = local_58;
            puVar15[-1] = local_34;
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_40);
            if ((*(int *)(local_50 + 0x20) < 0) &&
               ((uVar17 == *(uint *)(lVar4 + 0xc24) || (uVar17 == *(uint *)(lVar4 + 0xc28))))) {
              IGAccelVideoContext::prepare_to_decode(this,SUB81(local_40,0));
              uVar6 = IOAccelResource2::getProtectionOptions();
              if ((uVar6 & 1) == 0) goto LAB_0003e17d;
            }
          }
          uVar17 = uVar17 + 1;
          puVar15 = puVar15 + 6;
        } while (local_48 != uVar17);
      }
      uVar7 = *(uint *)(lVar4 + 0xc24);
      uVar9 = (uint)local_48;
      if (((uVar7 < uVar9) && (*(uint *)(lVar4 + 0xc28) < uVar9)) &&
         (uVar1 = local_c98[(ulong)uVar7 * 6], uVar1 != 0)) {
        lVar14 = local_50 + local_68 * 4;
        uVar2 = *(uint *)(lVar4 + 0xc1c);
        uVar17 = (&local_ca0)[(ulong)*(uint *)(lVar4 + 0xc28) * 3];
        uVar3 = *(uint *)(lVar4 + 0xc30);
        iVar10 = (*(int *)(lVar4 + 0xc2c) + 0x7fU >> 7) * *(int *)__got::_page_size;
        uVar11 = uVar3 * uVar1 + iVar10;
        if (*(int *)(lVar4 + 0xc20) == 0) {
          uVar8 = (&local_ca0)[(ulong)uVar7 * 3] + (ulong)uVar11;
          local_78 = *(ulong *)(lVar14 + 0x58);
          local_70 = *(ulong *)(lVar14 + 0x50);
          local_60 = *(ulong *)(lVar14 + 0x48);
          local_98 = *(undefined8 *)(lVar14 + 0x40);
          local_88 = *(undefined8 *)(lVar14 + 0x30);
          local_90 = *(undefined8 *)(lVar14 + 0x38);
          uVar12 = *(ulong *)(lVar14 + 0x28) & 0xffffffff0000003f;
          local_80 = (ulong)*(uint *)(lVar14 + 0x60);
          uVar13 = *(ulong *)(lVar14 + 0x18) & 0x3fffffffff | (uVar8 >> 6) << 0x26;
          uVar6 = uVar8 >> 0x20 & 0xffff | *(ulong *)(lVar14 + 0x20) & 0xffffffffffff0000;
          *(ulong *)(lVar14 + 0x28) = uVar12;
          *(ulong *)(lVar14 + 0x18) = uVar13;
          *(ulong *)(lVar14 + 0x20) = uVar6;
        }
        else {
          local_78 = *(ulong *)(lVar14 + 0x58);
          local_70 = *(ulong *)(lVar14 + 0x50);
          local_60 = *(ulong *)(lVar14 + 0x48);
          local_98 = *(undefined8 *)(lVar14 + 0x40);
          local_90 = *(undefined8 *)(lVar14 + 0x38);
          uVar6 = *(ulong *)(lVar14 + 0x20);
          local_88 = *(undefined8 *)(lVar14 + 0x30);
          local_80 = (ulong)*(uint *)(lVar14 + 0x60);
          uVar8 = (&local_ca0)[(ulong)uVar7 * 3] + (ulong)uVar11;
          uVar12 = (uVar8 >> 0x20 & 0xffff) << 0x20 |
                   *(ulong *)(lVar14 + 0x28) & 0xffff00000000003f |
                   (ulong)((uint)uVar8 & 0xffffffc0);
          uVar13 = *(ulong *)(lVar14 + 0x18) & 0x3fffffffff;
          *(ulong *)(lVar14 + 0x18) = uVar13;
          *(ulong *)(lVar14 + 0x28) = uVar12;
        }
        *(uint *)(lVar14 + 0xc) = uVar1 * 8 - 8 | uVar2;
        lVar16 = 0;
        *(uint *)(lVar14 + 0x10) =
             (((int)uVar17 + (uVar3 >> 1) * uVar1 + iVar10) - (int)uVar8) / uVar1;
        do {
          uVar7 = *(uint *)(lVar4 + 0xc3c + lVar16 * 4);
          if (uVar9 <= uVar7) goto LAB_0003e17d;
          *(ulong *)(lVar14 + 100 + lVar16 * 8) =
               (&local_ca0)[(ulong)uVar7 * 3] & 0xffffffffffc0 |
               *(ulong *)(lVar14 + 100 + lVar16 * 8) & 0xffff00000000003f;
          lVar16 = lVar16 + 1;
        } while (lVar16 != 0x10);
        if (((*(uint *)(lVar4 + 0xc34) < uVar9) && (*(uint *)(lVar4 + 0xc38) < uVar9)) &&
           ((uVar7 = *(uint *)(lVar4 + 0xcc4), uVar7 < uVar9 &&
            (uVar1 = *(uint *)(lVar4 + 0xcc8), uVar1 < uVar9)))) {
          local_a0 = (ulong)uVar1;
          uVar2 = *(uint *)(lVar4 + 0xcbc);
          local_a8 = (ulong)uVar2;
          if (uVar2 < uVar9) {
            uVar17 = (&local_ca0)[(ulong)*(uint *)(lVar4 + 0xc34) * 3];
            uVar8 = (&local_ca0)[(ulong)*(uint *)(lVar4 + 0xc38) * 3];
            *(ulong *)(lVar14 + 0x28) = uVar12;
            *(ulong *)(lVar14 + 0x20) = uVar6;
            *(ulong *)(lVar14 + 0x18) = uVar13;
            *(undefined8 *)(lVar14 + 0x30) = local_88;
            *(undefined8 *)(lVar14 + 0x38) = local_90;
            *(undefined8 *)(lVar14 + 0x40) = local_98;
            *(ulong *)(lVar14 + 0x48) = local_60 & 0x3fffffffff | (uVar17 >> 6) << 0x26;
            *(ulong *)(lVar14 + 0x50) = uVar17 >> 0x20 & 0xffff | local_70 & 0xffffffffffff0000;
            *(int *)(lVar14 + 0x60) = (int)local_80;
            *(ulong *)(lVar14 + 0x58) =
                 (uVar8 >> 0x20 & 0xffff) << 0x20 |
                 (ulong)((uint)uVar8 & 0xffffffc0) | local_78 & 0xffff00000000003f;
            *(ulong *)(lVar14 + 0x194) = (&local_ca0)[(ulong)uVar7 * 3];
            *(ulong *)(lVar14 + 0x1a0) = (&local_ca0)[(ulong)uVar1 * 3];
            uVar17 = (&local_ca0)[(ulong)uVar2 * 3];
            *(ulong *)(lVar14 + 300) = uVar17;
            *(int *)(lVar14 + 0x138) = *(int *)(lVar4 + 0xcc0) + (int)uVar17;
            *(int *)(lVar14 + 0x13c) = (int)(*(uint *)(lVar4 + 0xcc0) + uVar17 >> 0x20);
            if (lVar14 + 0x4dcU <= (ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1]) {
              lVar16 = 0;
              do {
                uVar7 = *(uint *)(lVar4 + 0xccc + lVar16 * 8);
                if (uVar9 <= uVar7) goto LAB_0003e17d;
                *(ulong *)(local_50 + local_68 * 4 + 0x3c4 + lVar16 * 8) =
                     (&local_ca0)[(ulong)uVar7 * 3];
                lVar16 = lVar16 + 1;
              } while (lVar16 != 0x10);
              if (*(uint *)(lVar4 + 0xd4c) < uVar9) {
                *(ulong *)(lVar14 + 0x448) = (&local_ca0)[(ulong)*(uint *)(lVar4 + 0xd4c) * 3];
                return;
              }
            }
          }
        }
      }
    }
  }
LAB_0003e17d:
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMedia::process_token_MPEG2DecodeIT(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_MPEG2DecodeIT(IGAccelVideoContextMedia *this,long *param_1)

{
  ushort uVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long *plVar5;
  char cVar6;
  long lVar7;
  ulong uVar8;
  ulong uVar9;
  short sVar10;
  uint uVar11;
  ulong *puVar12;
  undefined8 *puVar13;
  undefined8 local_c8;
  ulong *local_c0;
  long local_b8;
  undefined8 local_b0;
  IGAccelResource *local_a8;
  long local_a0;
  long local_98;
  long *local_90;
  IGAccelResource *local_88;
  uint local_7c;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  ulong local_58;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  lVar2 = param_1[3];
  if ((*(ulong *)(this + 0x628) < lVar2 + 0x1c4U) ||
     ((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < *param_1 + 0x2a4U)) {
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    local_b0 = 0;
    local_40 = 0;
    local_48 = 0;
    local_50 = 0;
    local_58 = 0;
    local_60 = 0;
    local_68 = 0;
    local_70 = 0;
    local_78 = 0;
    local_7c = 0;
    local_88 = (IGAccelResource *)0x0;
    local_a8 = (IGAccelResource *)0x0;
    local_b8 = *param_1;
    cVar6 = (**(code **)(*(long *)this + 0xb78))(this,param_1,*(undefined4 *)(lVar2 + 8));
    if (cVar6 != '\0') {
      IGAccelVideoContext::updateResourceMappingCacheType
                ((IGAccelVideoContext *)this,(IGAccelResource *)0x0);
      cVar6 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,*(undefined4 *)(lVar2 + 0xc),&local_a8,&local_b0,&local_7c,1);
      if (cVar6 != '\0') {
        local_98 = lVar2;
        local_90 = param_1;
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_a8);
        plVar5 = local_90;
        lVar2 = local_98;
        lVar7 = -4;
        puVar12 = &local_58;
        puVar13 = &local_78;
        do {
          local_c0 = puVar12;
          local_a0 = lVar7;
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,plVar5,*(undefined4 *)(lVar2 + 0x20 + lVar7 * 4),&local_88,puVar12
                             ,&local_7c,0);
          if (cVar6 == '\0') goto LAB_0003e1e7;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_88);
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,plVar5,*(undefined4 *)(lVar2 + 0x30 + local_a0 * 4),&local_88,
                             puVar13,&local_7c,0);
          if (cVar6 == '\0') goto LAB_0003e1e7;
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_88);
          lVar4 = local_98;
          lVar3 = local_b8;
          puVar12 = local_c0 + 1;
          puVar13 = puVar13 + 1;
          lVar7 = local_a0 + 1;
        } while (lVar7 != 0);
        if (local_7c == 0) {
          *(undefined1 *)((long)local_90 + 0x3c) = 0;
        }
        else {
          uVar11 = *(uint *)(local_98 + 0x40) & 0xfff00007 | local_7c * 8 + 0xffff8 & 0xffff8;
          *(uint *)(local_98 + 0x40) = uVar11;
          *(uint *)(local_98 + 0x44) =
               *(uint *)(local_98 + 0x44) & 0xffff8000 | (uint)local_b0 / local_7c & 0x7fff;
          *(uint *)(local_b8 + 0x34) = uVar11;
          *(undefined4 *)(local_b8 + 0x38) = *(undefined4 *)(local_98 + 0x44);
          *(undefined2 *)(local_98 + 0x54) = 0;
          *(ulong *)(local_98 + 0x4c) = *(ulong *)(local_98 + 0x4c) & 0x3fffffffff;
          *(ulong *)(local_98 + 0x98) =
               local_58 & 0xffffffffffc0 | *(ulong *)(local_98 + 0x98) & 0xffff00000000003f;
          *(ulong *)(local_98 + 0xa0) =
               local_50 & 0xffffffffffc0 | *(ulong *)(local_98 + 0xa0) & 0xffff00000000003f;
          *(ulong *)(local_98 + 0xa8) =
               local_48 & 0xffffffffffc0 | *(ulong *)(local_98 + 0xa8) & 0xffff00000000003f;
          *(ulong *)(local_98 + 0xb0) =
               local_40 & 0xffffffffffc0 | *(ulong *)(local_98 + 0xb0) & 0xffff00000000003f;
          uVar8 = *(ulong *)(local_b8 + 0x40) & 0x3fffffffff;
          *(ulong *)(local_b8 + 0x40) = uVar8;
          uVar1 = *(ushort *)(local_98 + 0x54);
          *(ulong *)(local_b8 + 0x40) = uVar8;
          *(ulong *)(local_b8 + 0x48) =
               (ulong)uVar1 | *(ulong *)(local_b8 + 0x48) & 0xffffffffffff0000;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_98 + 0x98) & 0xffffffc0);
          uVar8 = *(ulong *)(local_b8 + 0x8c);
          *(ulong *)(local_b8 + 0x8c) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(local_b8 + 0x8c) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_98 + 0x9c) << 0x20;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_98 + 0xa0) & 0xffffffc0);
          uVar8 = *(ulong *)(local_b8 + 0x94);
          *(ulong *)(local_b8 + 0x94) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(local_b8 + 0x94) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_98 + 0xa4) << 0x20;
          uVar9 = (ulong)((uint)*(undefined8 *)(local_98 + 0xa8) & 0xffffffc0);
          uVar8 = *(ulong *)(local_b8 + 0x9c);
          *(ulong *)(local_b8 + 0x9c) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(local_b8 + 0x9c) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_98 + 0xac) << 0x20;
          uVar8 = *(ulong *)(local_b8 + 0xa4);
          uVar9 = (ulong)((uint)*(undefined8 *)(local_98 + 0xb0) & 0xffffffc0);
          *(ulong *)(local_b8 + 0xa4) = uVar8 & 0xffffffff0000003f | uVar9;
          *(ulong *)(local_b8 + 0xa4) =
               uVar8 & 0xffff00000000003f | uVar9 | (ulong)*(ushort *)(local_98 + 0xb4) << 0x20;
          local_c8 = 0;
          cVar6 = (**(code **)(*(long *)this + 0xb78))
                            (this,local_90,*(undefined4 *)(local_98 + 0x30),&local_88,&local_c8,
                             &local_7c,0);
          if (cVar6 != '\0') {
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_88);
            uVar11 = *(uint *)(lVar4 + 0x188) & 0xfff | (uint)local_c8 & 0xfffff000;
            *(uint *)(lVar4 + 0x188) = uVar11;
            sVar10 = (short)((ulong)local_c8 >> 0x20);
            *(short *)(lVar4 + 0x18c) = sVar10;
            *(uint *)(lVar4 + 0x194) =
                 *(uint *)(lVar4 + 0x194) & 0xfff |
                 (*(uint *)(lVar4 + 0x194) & 0xfffff000) + (uint)local_c8 & 0xfffff000;
            *(short *)(lVar4 + 0x198) = (short)*(undefined4 *)(lVar4 + 0x198) + sVar10;
            *(uint *)(lVar3 + 0x17c) = uVar11;
            *(undefined4 *)(lVar3 + 0x180) = *(undefined4 *)(lVar4 + 0x18c);
            *(undefined4 *)(lVar3 + 0x188) = *(undefined4 *)(lVar4 + 0x194);
            *(undefined4 *)(lVar3 + 0x18c) = *(undefined4 *)(lVar4 + 0x198);
          }
        }
      }
    }
  }
LAB_0003e1e7:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelVideoContextMedia::process_token_JPEGDecode(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_JPEGDecode(IGAccelVideoContextMedia *this,long *param_1)

{
  ushort uVar1;
  undefined4 uVar2;
  long lVar3;
  long lVar4;
  char cVar5;
  ulong uVar6;
  ulong uVar7;
  short sVar8;
  ulong uVar9;
  ulong uVar10;
  uint uVar11;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  ulong local_50;
  uint local_44;
  IGAccelResource *local_40;
  uint local_34;
  
  local_80 = 0;
  local_50 = 0;
  local_78 = 0;
  local_70 = 0;
  local_34 = 0;
  local_64 = 0;
  local_60 = 0;
  local_5c = 0;
  local_40 = (IGAccelResource *)0x0;
  lVar3 = param_1[3];
  if ((lVar3 + 0x1acU <= *(ulong *)(this + 0x628)) &&
     (lVar4 = *param_1, lVar4 + 0x1b8U <= (ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1])
     ) {
    local_44 = *(uint *)(lVar3 + 8);
    uVar2 = *(undefined4 *)(lVar3 + 0x10);
    local_54 = *(undefined4 *)(lVar3 + 0x14);
    local_58 = *(undefined4 *)(lVar3 + 0x18);
    cVar5 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar3 + 0xc),&local_40,&local_50,&local_34,1);
    if (cVar5 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar3 + 0x28) =
         *(uint *)(lVar3 + 0x28) & 0xfff00007 | local_34 * 8 + 0xffff8 & 0xffff8;
    if (local_34 != 0) {
      if (1 < local_44) {
        cVar5 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,uVar2,&local_40,&local_78,&local_64,1);
        if (cVar5 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        uVar10 = (ulong)(uint)((int)local_78 - (int)local_50) / (ulong)local_34;
        *(uint *)(lVar3 + 0x2c) = *(uint *)(lVar3 + 0x2c) & 0xffff8000 | (uint)uVar10 & 0x7fff;
        *(short *)(lVar3 + 0x30) = (short)uVar10;
        if (2 < local_44) {
          cVar5 = (**(code **)(*(long *)this + 0xb78))
                            (this,param_1,local_54,&local_40,&local_70,&local_60,1);
          if (cVar5 == '\0') {
            return;
          }
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
          *(short *)(lVar3 + 0x30) = (short)((uint)((int)local_70 - (int)local_50) / local_34);
        }
      }
      cVar5 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,local_58,&local_40,&local_80,&local_5c,0);
      if (cVar5 == '\0') {
        return;
      }
      IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
      *(undefined4 *)(lVar4 + 0x34) = *(undefined4 *)(lVar3 + 0x28);
      *(undefined4 *)(lVar4 + 0x38) = *(undefined4 *)(lVar3 + 0x2c);
      *(undefined4 *)(lVar4 + 0x3c) = *(undefined4 *)(lVar3 + 0x30);
      uVar10 = local_50 >> 6 & 0x3ffffff;
      uVar6 = uVar10 << 0x26;
      *(short *)(lVar3 + 0x3c) = (short)(local_50 >> 0x20);
      *(ulong *)(lVar3 + 0x34) = *(ulong *)(lVar3 + 0x34) & 0x3fffffffff | uVar6;
      *(ulong *)(lVar3 + 0x44) =
           (local_50 >> 0x20 & 0xffff) << 0x20 |
           uVar10 << 6 | *(ulong *)(lVar3 + 0x44) & 0xffff00000000003f;
      uVar6 = *(ulong *)(lVar4 + 0x40) & 0x3fffffffff | uVar6;
      *(ulong *)(lVar4 + 0x40) = uVar6;
      uVar7 = *(ulong *)(lVar4 + 0x48) & 0xffffffffffff0000 | (ulong)*(ushort *)(lVar3 + 0x3c);
      *(ulong *)(lVar4 + 0x40) = uVar6;
      *(ulong *)(lVar4 + 0x48) = uVar7;
      uVar9 = (ulong)((uint)*(undefined8 *)(lVar3 + 0x44) & 0xffffffc0);
      uVar10 = *(ulong *)(lVar4 + 0x50);
      *(ulong *)(lVar4 + 0x48) = uVar7;
      *(ulong *)(lVar4 + 0x40) = uVar6;
      *(ulong *)(lVar4 + 0x50) = uVar10 & 0xffffffff0000003f | uVar9;
      uVar1 = *(ushort *)(lVar3 + 0x48);
      *(ulong *)(lVar4 + 0x40) = uVar6;
      *(ulong *)(lVar4 + 0x48) = uVar7;
      *(ulong *)(lVar4 + 0x50) = uVar10 & 0xffff00000000003f | uVar9 | (ulong)uVar1 << 0x20;
      uVar11 = *(uint *)(lVar3 + 0x148) & 0xfff | (uint)local_80 & 0xfffff000;
      *(uint *)(lVar3 + 0x148) = uVar11;
      sVar8 = (short)((ulong)local_80 >> 0x20);
      *(short *)(lVar3 + 0x14c) = sVar8;
      *(uint *)(lVar3 + 0x154) =
           *(uint *)(lVar3 + 0x154) & 0xfff |
           (*(uint *)(lVar3 + 0x154) & 0xfffff000) + (uint)local_80 & 0xfffff000;
      *(short *)(lVar3 + 0x158) = (short)*(undefined4 *)(lVar3 + 0x158) + sVar8;
      *(uint *)(lVar4 + 0x154) = uVar11;
      *(undefined4 *)(lVar4 + 0x158) = *(undefined4 *)(lVar3 + 0x14c);
      *(undefined4 *)(lVar4 + 0x160) = *(undefined4 *)(lVar3 + 0x154);
      *(undefined4 *)(lVar4 + 0x164) = *(undefined4 *)(lVar3 + 0x158);
      return;
    }
  }
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMedia::process_token_VDENC(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_VDENC(IGAccelVideoContextMedia *this,long *param_1)

{
  uint *puVar1;
  uint uVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  char cVar7;
  undefined4 uVar8;
  ulong uVar9;
  uint uVar10;
  ulong uVar11;
  undefined4 uVar12;
  uint uVar13;
  long lVar14;
  uint uVar15;
  ulong uVar16;
  long lVar17;
  uint uVar18;
  uint uVar19;
  uint local_c78 [2];
  int local_c70 [2];
  ulong uStack_c68;
  uint auStack_c60 [764];
  ulong local_70;
  IGAccelResource *local_68;
  undefined8 local_60;
  uint local_58;
  undefined4 local_54;
  long local_50;
  ulong local_48;
  long *local_40;
  long local_38;
  
  lVar17 = param_1[3];
  if (lVar17 + 0xcf0U <= *(ulong *)(this + 0x628)) {
    lVar14 = *param_1;
    _memcpy(local_c78,(void *)(lVar17 + 8),0xc08);
    uVar9 = (ulong)local_c78[0];
    if (uVar9 < 0x81) {
      local_50 = lVar14;
      local_38 = lVar17;
      local_40 = param_1;
      local_48 = uVar9;
      if (uVar9 != 0) {
        lVar17 = 0;
        do {
          local_68 = (IGAccelResource *)0x0;
          local_60 = 0;
          local_54 = 0;
          if (*(int *)((long)local_c70 + lVar17) != 0) {
            cVar7 = (**(code **)(*(long *)this + 0xb78))
                              (this,local_40,*(int *)((long)local_c70 + lVar17),&local_68,&local_60,
                               &local_54,*(uint *)((long)auStack_c60 + lVar17 + 4) & 1);
            if (cVar7 == '\0') {
              return;
            }
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_68);
            *(undefined8 *)((long)&uStack_c68 + lVar17) = local_60;
            *(undefined4 *)((long)auStack_c60 + lVar17) = local_54;
          }
          lVar17 = lVar17 + 0x18;
        } while (uVar9 * 0x18 != lVar17);
      }
      uVar9 = (ulong)*(uint *)(local_38 + 0xc20);
      if (uVar9 * 4 + 0x1e8 + local_50 <=
          (ulong)(*(uint *)(local_40 + 2) & 0xfffffffc) + local_40[1]) {
        uVar19 = (uint)local_48;
        if ((((*(uint *)(local_38 + 0xc60) < uVar19) && (*(uint *)(local_38 + 0xc64) < uVar19)) &&
            (uVar15 = *(uint *)(local_38 + 0xc10), uVar15 < uVar19)) &&
           (*(uint *)(local_38 + 0xc14) < uVar19)) {
          uVar13 = auStack_c60[(ulong)uVar15 * 6];
          if ((((ulong)uVar13 != 0) && (uVar18 = *(uint *)(local_38 + 0xc68), uVar18 < uVar19)) &&
             (*(uint *)(local_38 + 0xc6c) < uVar19)) {
            uVar10 = auStack_c60[(ulong)uVar18 * 6];
            local_70 = (ulong)uVar10;
            if (local_70 != 0) {
              lVar17 = uVar9 * 4 + local_50;
              uVar11 = (&uStack_c68)[(ulong)*(uint *)(local_38 + 0xc60) * 3];
              uVar3 = (&uStack_c68)[(ulong)uVar15 * 3];
              uVar16 = uVar11 >> 6 & 0x3ffffff;
              local_58 = (uint)uVar3 & 0xffffffc0;
              uVar4 = (&uStack_c68)[(ulong)*(uint *)(local_38 + 0xc14) * 3];
              uVar5 = (&uStack_c68)[(ulong)*(uint *)(local_38 + 0xc6c) * 3];
              uVar6 = (&uStack_c68)[(ulong)uVar18 * 3];
              *(short *)(lVar17 + 0x50) = (short)(uVar11 >> 0x20);
              *(ulong *)(lVar17 + 0x48) = *(ulong *)(lVar17 + 0x48) & 0x3fffffffff | uVar16 << 0x26;
              *(short *)(lVar17 + 0x68) = (short)(uVar3 >> 0x20);
              *(ulong *)(lVar17 + 0x60) =
                   (ulong)((uint)uVar3 >> 6) << 0x26 | *(ulong *)(lVar17 + 0x60) & 0x3fffffffff;
              *(ulong *)(lVar17 + 0x58) =
                   (uVar11 >> 0x20 & 0xffff) << 0x20 |
                   uVar16 << 6 | *(ulong *)(lVar17 + 0x58) & 0xffff00000000003f;
              *(short *)(lVar17 + 0x144) = (short)(uVar6 >> 0x20);
              *(ulong *)(lVar17 + 0x13c) =
                   *(ulong *)(lVar17 + 0x13c) & 0x3fffffffff | (uVar6 >> 6) << 0x26;
              uVar18 = uVar13 * 8 + 0xffff8 & 0xffff8;
              *(uint *)(lVar17 + 0xc) = *(uint *)(local_38 + 0xc38) | uVar18;
              uVar12 = (undefined4)((uVar4 - uVar3) / (ulong)uVar13);
              *(undefined4 *)(lVar17 + 0x10) = uVar12;
              *(undefined4 *)(lVar17 + 0x14) = uVar12;
              *(uint *)(lVar17 + 0x24) = *(uint *)(local_38 + 0xc38) | uVar18;
              *(undefined4 *)(lVar17 + 0x28) = uVar12;
              *(undefined4 *)(lVar17 + 0x2c) = uVar12;
              uVar15 = uVar10 * 8 + 0xffff8 & 0xffff8;
              *(uint *)(lVar17 + 0x3c) = *(uint *)(local_38 + 0xc3c) | uVar15;
              uVar8 = (undefined4)((uVar5 - uVar6) / local_70);
              *(undefined4 *)(lVar17 + 0x40) = uVar8;
              *(undefined4 *)(lVar17 + 0x44) = uVar8;
              if ((((ulong)(*(uint *)(local_40 + 2) & 0xfffffffc) + local_40[1] <
                    local_50 + (ulong)*(uint *)(local_38 + 0xc24) * 4 + 0xdc) ||
                  (uVar19 <= *(uint *)(local_38 + 0xccc))) ||
                 (uVar19 <= *(uint *)(local_38 + 0xcd0))) {
                *(undefined1 *)((long)local_40 + 0x3c) = 0;
                return;
              }
              if ((((*(uint *)(local_38 + 0xcc0) < uVar19) && (*(uint *)(local_38 + 0xcc4) < uVar19)
                   ) && (*(uint *)(local_38 + 0xcc8) < uVar19)) &&
                 ((*(uint *)(local_38 + 0xc78) < uVar19 && (*(uint *)(local_38 + 0xc30) < uVar19))))
              {
                lVar17 = local_50 + (ulong)*(uint *)(local_38 + 0xc24) * 4;
                *(uint *)(lVar17 + 0xc) = *(uint *)(local_38 + 0xc40) | uVar18;
                *(undefined4 *)(lVar17 + 0x10) = uVar12;
                *(undefined4 *)(lVar17 + 0x14) = uVar12;
                *(uint *)(lVar17 + 0x24) = uVar18 | *(uint *)(local_38 + 0xc40);
                *(undefined4 *)(lVar17 + 0x28) = uVar12;
                *(undefined4 *)(lVar17 + 0x2c) = uVar12;
                *(uint *)(lVar17 + 0x3c) = uVar15 | *(uint *)(local_38 + 0xc44);
                *(undefined4 *)(lVar17 + 0x40) = uVar8;
                *(undefined4 *)(lVar17 + 0x44) = uVar8;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xccc) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xccc) * 3];
                }
                *(undefined4 *)(lVar17 + 0x4c) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xccc) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xccc) * 6 + -1];
                }
                *(uint *)(lVar17 + 0x50) = uVar15;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xcd0) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xcd0) * 3];
                }
                *(undefined4 *)(lVar17 + 0x58) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xcd0) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xcd0) * 6 + -1];
                }
                *(uint *)(lVar17 + 0x5c) = uVar15;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xcc0) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xcc0) * 3];
                }
                *(undefined4 *)(lVar17 + 0xa0) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xcc0) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xcc0) * 6 + -1];
                }
                *(uint *)(lVar17 + 0xa4) = uVar15;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xcc4) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xcc4) * 3];
                }
                *(undefined4 *)(lVar17 + 0xac) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xcc4) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xcc4) * 6 + -1];
                }
                *(uint *)(lVar17 + 0xb0) = uVar15;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xcc8) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xcc8) * 3];
                }
                *(undefined4 *)(lVar17 + 0xb8) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xcc8) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xcc8) * 6 + -1];
                }
                *(uint *)(lVar17 + 0xbc) = uVar15;
                *(uint *)(lVar17 + 0x70) = local_58;
                *(int *)(lVar17 + 0x74) = (int)(uVar3 >> 0x20);
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xc30) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xc30) * 3];
                }
                *(undefined4 *)(lVar17 + 0x7c) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xc30) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xc30) * 6 + -1];
                }
                *(uint *)(lVar17 + 0x80) = uVar15;
                uVar15 = 0;
                uVar8 = 0;
                if ((ulong)*(uint *)(local_38 + 0xc78) != 0) {
                  uVar8 = (undefined4)(&uStack_c68)[(ulong)*(uint *)(local_38 + 0xc78) * 3];
                }
                *(undefined4 *)(lVar17 + 0x88) = uVar8;
                if ((ulong)*(uint *)(local_38 + 0xc78) != 0) {
                  uVar15 = auStack_c60[(ulong)*(uint *)(local_38 + 0xc78) * 6 + -1];
                }
                lVar14 = local_50 + uVar9 * 4;
                *(uint *)(lVar17 + 0x8c) = uVar15;
                lVar17 = 0;
                do {
                  uVar15 = *(uint *)(local_38 + 0xc80 + lVar17 * 4);
                  if (uVar15 == 0) {
                    puVar1 = (uint *)(lVar14 + 0x94 + lVar17 * 8);
                    *puVar1 = *puVar1 & 0x3f;
                  }
                  else {
                    uVar15 = uVar15 & 0xfff;
                    if (uVar19 <= uVar15) goto LAB_0003f379;
                    *(ulong *)(lVar14 + 0x94 + lVar17 * 8) =
                         (&uStack_c68)[(ulong)uVar15 * 3] & 0xffffffffffc0 |
                         *(ulong *)(lVar14 + 0x94 + lVar17 * 8) & 0xffff00000000003f;
                  }
                  lVar17 = lVar17 + 1;
                } while (lVar17 != 0x10);
                if (*(int *)(local_38 + 0xc18) == 0) {
                  uVar15 = *(uint *)(local_38 + 0xc74);
                  uVar13 = *(uint *)(local_38 + 0xc7c);
                  uVar18 = *(uint *)(local_38 + 0xcd4);
                  uVar10 = *(uint *)(local_38 + 0xce0);
                }
                else {
                  uVar2 = *(uint *)(local_38 + 0xc70);
                  uVar15 = *(uint *)(local_38 + 0xc74);
                  uVar13 = *(uint *)(local_38 + 0xc7c);
                  uVar18 = *(uint *)(local_38 + 0xcd4);
                  uVar10 = *(uint *)(local_38 + 0xce0);
                  if ((ulong)uVar2 != 0) {
                    if (uVar19 <= uVar2) goto LAB_0003f379;
                    *(ulong *)(lVar14 + 0x70) =
                         ((&uStack_c68)[(ulong)uVar2 * 3] >> 0x20 & 0xffff) << 0x20 |
                         *(ulong *)(lVar14 + 0x70) & 0xffff00000000003f |
                         (ulong)((uint)(&uStack_c68)[(ulong)uVar2 * 3] & 0xffffffc0);
                  }
                }
                if (uVar15 != 0) {
                  if (uVar19 <= uVar15) goto LAB_0003f379;
                  uVar9 = (&uStack_c68)[(ulong)uVar15 * 3];
                  *(short *)(lVar14 + 0x80) = (short)(uVar9 >> 0x20);
                  *(ulong *)(lVar14 + 0x78) =
                       *(ulong *)(lVar14 + 0x78) & 0x3fffffffff | (uVar9 >> 6) << 0x26;
                }
                if (uVar13 != 0) {
                  if (uVar19 <= uVar13) goto LAB_0003f379;
                  *(ulong *)(lVar14 + 0x88) =
                       ((&uStack_c68)[(ulong)uVar13 * 3] >> 0x20 & 0xffff) << 0x20 |
                       *(ulong *)(lVar14 + 0x88) & 0xffff00000000003f |
                       (ulong)((uint)(&uStack_c68)[(ulong)uVar13 * 3] & 0xffffffc0);
                }
                if (uVar18 != 0) {
                  if (uVar19 <= uVar18) goto LAB_0003f379;
                  uVar9 = (&uStack_c68)[(ulong)uVar18 * 3];
                  *(uint *)(lVar14 + 0x1c4) = (uint)uVar9 & 0xffffffc0;
                  *(int *)(lVar14 + 0x1c8) = (int)(uVar9 >> 0x20);
                }
                if (uVar10 != 0) {
                  if (uVar19 <= uVar10) goto LAB_0003f379;
                  uVar9 = (&uStack_c68)[(ulong)uVar10 * 3];
                  lVar17 = *(uint *)(local_38 + 0xce4) + uVar9;
                  *(uint *)(lVar14 + 0x1ac) = (uint)uVar9 & 0xfffff000;
                  *(int *)(lVar14 + 0x1b0) = (int)(uVar9 >> 0x20);
                  *(uint *)(lVar14 + 0x1b8) = (uint)lVar17 & 0xfffff000;
                  *(int *)(lVar14 + 0x1bc) = (int)((ulong)lVar17 >> 0x20);
                }
                uVar15 = *(uint *)(local_38 + 0xc34);
                if ((ulong)uVar15 == 0) {
                  return;
                }
                if ((uVar15 < uVar19) &&
                   (local_50 + 0x28U <= (ulong)(*(uint *)(local_40 + 2) & 0xfffffffc) + local_40[1])
                   ) {
                  uVar9 = (&uStack_c68)[(ulong)uVar15 * 3];
                  lVar17 = *(uint *)(local_38 + 0xc48) + uVar9;
                  *(uint *)(local_50 + 0x18) = (uint)lVar17 & 0xfffffffc;
                  *(int *)(local_50 + 0x1c) = (int)((ulong)lVar17 >> 0x20);
                  uVar19 = *(uint *)(local_38 + 0xc28);
                  uVar11 = (ulong)*(uint *)(local_38 + 0xc2c);
                  lVar17 = local_50 + (ulong)uVar19 * 4;
                  if (lVar17 + uVar11 * 4 + 0x14 <=
                      (ulong)(*(uint *)(local_40 + 2) & 0xfffffffc) + local_40[1]) {
                    lVar17 = lVar17 + uVar11 * 4;
                    lVar14 = *(uint *)(local_38 + 0xc4c) + uVar9;
                    *(uint *)(lVar17 + 4) = (uint)lVar14 & 0xfffffffc;
                    *(int *)(lVar17 + 8) = (int)((ulong)lVar14 >> 0x20);
                    uVar11 = (ulong)uVar19 * 4 + uVar11 * 4 + local_50 + 0x38;
                    lVar17 = 0;
                    while (uVar11 <= (ulong)(*(uint *)(local_40 + 2) & 0xfffffffc) + local_40[1]) {
                      lVar14 = *(uint *)(local_38 + 0xc50 + lVar17 * 4) + uVar9;
                      *(uint *)(uVar11 - 8) = (uint)lVar14 & 0xfffffffc;
                      *(int *)(uVar11 - 4) = (int)((ulong)lVar14 >> 0x20);
                      lVar17 = lVar17 + 1;
                      uVar11 = uVar11 + 0x10;
                      if (lVar17 == 4) {
                        return;
                      }
                    }
                  }
                }
              }
LAB_0003f379:
              *(undefined1 *)((long)local_40 + 0x3c) = 0;
              return;
            }
          }
        }
      }
      *(undefined1 *)((long)local_40 + 0x3c) = 0;
      return;
    }
  }
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMedia::process_token_CODECDecode(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::process_token_CODECDecode(IGAccelVideoContextMedia *this,long *param_1)

{
  long lVar1;
  long lVar2;
  char cVar3;
  int iVar4;
  long lVar5;
  int iVar6;
  ulong uVar7;
  ulong uVar8;
  long local_68;
  undefined4 local_5c;
  undefined8 local_58;
  uint local_4c;
  undefined8 local_48;
  IGAccelResource *local_40;
  undefined4 local_34;
  
  local_40 = (IGAccelResource *)0x0;
  local_48 = 0;
  local_34 = 0;
  lVar1 = param_1[3];
  if ((lVar1 + 0xb0U <= *(ulong *)(this + 0x628)) &&
     (lVar2 = *param_1, lVar2 + 0x8a0U <= (ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1])
     ) {
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x1c),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x48) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x4c) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x20),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x54) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x58) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x24),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x60) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 100) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x28),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x6c) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x70) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x2c),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x78) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x7c) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x30),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x84) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x88) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x34),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x90) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0x94) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x38),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0x9c) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0xa0) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x3c),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0xa8) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0xac) = (int)((ulong)local_48 >> 0x20);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x40),&local_40,&local_48,&local_34,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    *(uint *)(lVar2 + 0xb4) = (uint)local_48 & 0xffffffc0;
    *(int *)(lVar2 + 0xb8) = (int)((ulong)local_48 >> 0x20);
    local_4c = 0;
    local_5c = 0;
    local_58 = 0;
    local_68 = 0;
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0xc),&local_40,&local_58,&local_4c,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    cVar3 = (**(code **)(*(long *)this + 0xb78))
                      (this,param_1,*(undefined4 *)(lVar1 + 0x10),&local_40,&local_68,&local_5c,1);
    if (cVar3 == '\0') {
      return;
    }
    IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
    iVar4 = (*(int *)(lVar1 + 0x14) + 0x7fU >> 7) * *(int *)__got::_page_size;
    uVar7 = (ulong)(local_4c * *(uint *)(lVar1 + 0x18) + iVar4);
    iVar6 = (*(uint *)(lVar1 + 0x18) >> 1) * local_4c;
    lVar5 = local_58 + uVar7;
    *(uint *)(lVar2 + 0x3c) = (uint)lVar5 & 0xffffffc0;
    *(int *)(lVar2 + 0x40) = (int)((ulong)lVar5 >> 0x20);
    uVar8 = 0;
    do {
      if (uVar8 < *(uint *)(lVar1 + 100)) {
        cVar3 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar1 + 0x68 + uVar8 * 4),&local_40,
                           &local_58,&local_4c,0);
        if (cVar3 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        cVar3 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar1 + 0x88 + uVar8 * 4),&local_40,
                           &local_68,&local_5c,0);
        if (cVar3 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        *(uint *)(lVar2 + 0xcc + uVar8 * 8) = (uint)local_58 & 0xffffffc0;
        *(undefined4 *)(lVar2 + 0xd0 + uVar8 * 8) = local_58._4_4_;
        cVar3 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,*(undefined4 *)(lVar1 + 0x44 + uVar8 * 4),&local_40,
                           &local_48,&local_34,0);
        if (cVar3 == '\0') {
          return;
        }
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
        *(uint *)(lVar2 + 0x140 + uVar8 * 8) = (uint)local_48 & 0xffffffc0;
        *(undefined4 *)(lVar2 + 0x144 + uVar8 * 8) = local_48._4_4_;
      }
      else {
        *(undefined4 *)(lVar2 + 0xcc + uVar8 * 8) = 0;
        *(undefined4 *)(lVar2 + 0x140 + uVar8 * 8) = 0;
      }
      uVar8 = uVar8 + 1;
    } while (uVar8 != 8);
    if ((ulong)local_4c != 0) {
      *(uint *)(lVar2 + 0x30) = *(uint *)(lVar2 + 0x30) | local_4c - 1 & 0x1ffff;
      *(uint *)(lVar2 + 0x34) =
           *(uint *)(lVar2 + 0x34) & 0xffff8000 |
           (uint)((((ulong)(uint)(iVar6 + iVar4) + local_68) - (uVar7 + local_58)) / (ulong)local_4c
                 ) & 0x7fff;
      cVar3 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,*(undefined4 *)(lVar1 + 0xa8),&local_40,&local_48,&local_34,0)
      ;
      if (cVar3 == '\0') {
        return;
      }
      IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_40);
      *(long *)(lVar2 + 0x1dc) = local_48;
      *(int *)(lVar2 + 0x1e8) = *(int *)(lVar1 + 0xac) + (int)local_48;
      *(int *)(lVar2 + 0x1ec) = (int)((ulong)*(uint *)(lVar1 + 0xac) + local_48 >> 0x20);
      return;
    }
  }
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelVideoContextMedia::discard_token_Noop(IOAccelCommandStreamInfo&)

void IGAccelVideoContextMedia::discard_token_Noop(void)

{
  return;
}



// IGAccelVideoContextMedia::releaseScalableCommandBufferPointers()

void __thiscall
IGAccelVideoContextMedia::releaseScalableCommandBufferPointers(IGAccelVideoContextMedia *this)

{
  long lVar1;
  
  lVar1 = 0;
  do {
    *(undefined8 *)(this + lVar1 * 8 + 0x13d8) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 4);
  return;
}



// IGAccelVideoContextMedia::contextStop()

void __thiscall IGAccelVideoContextMedia::contextStop(IGAccelVideoContextMedia *this)

{
  long lVar1;
  
  if (*(IGHardwareContext **)(this + 0x13d0) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x13d0),0);
    (**(code **)(**(long **)(this + 0x13d0) + 0x28))();
    *(undefined8 *)(this + 0x13d0) = 0;
  }
  lVar1 = 0x27b;
  do {
    *(undefined8 *)(this + lVar1 * 8) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x27f);
  IGAccelVideoContext::contextStop((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextMedia::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelVideoContextMedia::getTargetAndMethodForIndex
          (IGAccelVideoContextMedia *this,undefined8 *param_1,int param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 == 0x104) {
    return *(long *)(this + 0x13b0);
  }
  lVar1 = IGAccelVideoContext::getTargetAndMethodForIndex
                    ((IGAccelVideoContext *)this,param_1,param_2);
  return lVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMedia::processDataBuffers(unsigned int)

undefined4 __cdecl IGAccelVideoContextMedia::processDataBuffers(IGAccelVideoContext *param_1)

{
  undefined4 uVar1;
  long lVar2;
  IGHardwareContext *pIVar3;
  
  if (*(long *)(param_1 + 0x1370) == 0) {
    IOGraphicsAccelerator2::acceleratorWaitEnabled();
    lVar2 = (**(code **)(*(long *)param_1 + 0x968))(param_1);
    pIVar3 = IGHardwareContext::withOptions
                       (lVar2,(undefined8 *)&g_cInitGfxHwCtxParamsForVideoMedia,2);
    *(IGHardwareContext **)(param_1 + 0x1370) = pIVar3;
    if (pIVar3 == (IGHardwareContext *)0x0) {
      return 0x80000000;
    }
  }
  IOGraphicsAccelerator2::acceleratorWaitEnabled();
  IGAccelVideoContext::getChannel(param_1);
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18),
             *(undefined8 *)(param_1 + 0x1390));
  IGAccelVideoContext::getChannel(param_1);
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(param_1 + 0x1370) + 0x80) = *(undefined8 *)(param_1 + 0x1390);
  uVar1 = IOAccelVideoContext2::processDataBuffers((uint)param_1);
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18));
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextMedia::beginCommandStream(IOAccelCommandStreamInfo&)

void __cdecl IGAccelVideoContextMedia::beginCommandStream(long param_1)

{
  long lVar1;
  
  if (*(char *)(param_1 + 0x13c8) != '\0') {
    lVar1 = 0;
    do {
      *(undefined8 *)(param_1 + 0x13d8 + lVar1 * 8) = 0;
      lVar1 = lVar1 + 1;
    } while (lVar1 != 4);
    *(undefined1 *)(param_1 + 0x13c8) = 0;
  }
  IGAccelVideoContext::beginCommandStream(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IGAccelVideoContextMedia::endScalableCommandStreamFE_BE(IOAccelCommandStreamInfo&)

void __cdecl
IGAccelVideoContextMedia::endScalableCommandStreamFE_BE
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long param_9)

{
  long *plVar1;
  long *this;
  IGHardwareRingBuffer *this_00;
  IGHardwareRingBuffer *this_01;
  undefined8 uVar2;
  long lVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  char *in_R8;
  char *in_R9;
  undefined8 local_50;
  undefined4 local_48;
  long local_40;
  undefined4 local_34;
  
  plVar1 = *(long **)(*(long *)(&DAT_00001370 + param_9) + 0xb0);
  this = *(long **)(*(long *)(param_9 + 0x13d0) + 0xb0);
  this_00 = (IGHardwareRingBuffer *)plVar1[0x26];
  this_01 = (IGHardwareRingBuffer *)this[0x26];
  *(long *)(*(long *)(param_9 + 0x618) + 0x50) = *(long *)(&DAT_00001370 + param_9);
  uVar2 = IOAccelResource2::getKernelData();
  *(undefined8 *)(*(long *)(param_9 + 0x618) + 0x20) = uVar2;
  uVar2 = (**(code **)(**(long **)(*(long *)(param_9 + 0x13d8) + 0x40) + 0x128))();
  lVar3 = *(long *)(param_9 + 0x618);
  *(undefined8 *)(lVar3 + 0x18) = uVar2;
  *(int *)(lVar3 + 0x30) =
       (int)(*(ulong *)(*(long *)(param_9 + 0x13d8) + 200 +
                       (ulong)(*(long *)(*(long *)(param_9 + 0x13d8) + 0x88) == 0) * 8) >> 2);
  (**(code **)(*plVar1 + 0x148))(plVar1);
  (**(code **)(*plVar1 + 0x130))(plVar1,*(undefined8 *)(param_9 + 0x618));
  local_40 = param_9 + 0x5d0;
  (**(code **)(*plVar1 + 0x140))(plVar1);
  (**(code **)(*plVar1 + 0x140))(plVar1,*(long *)(*(long *)(param_9 + 0x13d8) + 0x40) + 0x38);
  uVar2 = IOAccelResource2::releaseKernelData();
  local_34 = (undefined4)plVar1[0x2f];
  local_50 = 0x1c024411000001;
  local_48 = 0x80008;
  IGHardwareRingBuffer::waitForSpace
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,3,extraout_RDX,
             lVar3,in_R8,in_R9);
  IGHardwareRingBuffer::writeBuffer(this_00,(long)&local_50,3);
  (**(code **)(*(long *)this_00 + 0x138))(this_00);
  uVar2 = (**(code **)(*this + 0x148))(this);
  IGAccelFIFOChannel::submitStampCommand
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this);
  (**(code **)(*(long *)this_00 + 0x120))(this_00,(int)this[0x2f],(int)this[4]);
  uVar2 = IOAccelResource2::getKernelData();
  *(undefined8 *)(*(long *)(param_9 + 0x618) + 0x20) = uVar2;
  uVar2 = (**(code **)(**(long **)(*(long *)(_OSKextGetCurrentIdentifier + param_9 + 6) + 0x40) +
                      0x128))();
  lVar3 = *(long *)(param_9 + 0x618);
  *(undefined8 *)(lVar3 + 0x18) = uVar2;
  *(int *)(lVar3 + 0x30) =
       (int)(*(ulong *)(*(long *)(_OSKextGetCurrentIdentifier + param_9 + 6) + 200 +
                       (ulong)(*(long *)(*(long *)(_OSKextGetCurrentIdentifier + param_9 + 6) + 0x88
                                        ) == 0) * 8) >> 2);
  (**(code **)(*plVar1 + 0x148))(plVar1);
  (**(code **)(*plVar1 + 0x130))(plVar1,*(undefined8 *)(param_9 + 0x618));
  (**(code **)(*plVar1 + 0x140))(plVar1,local_40);
  (**(code **)(*plVar1 + 0x140))
            (plVar1,*(long *)(*(long *)(_OSKextGetCurrentIdentifier + param_9 + 6) + 0x40) + 0x38);
  uVar2 = IOAccelResource2::releaseKernelData();
  local_50 = 0x1c024411000001;
  local_48 = 0x80000;
  IGHardwareRingBuffer::waitForSpace
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,3,extraout_RDX_00
             ,lVar3,in_R8,in_R9);
  IGHardwareRingBuffer::writeBuffer(this_00,(long)&local_50,3);
  uVar2 = (**(code **)(*(long *)this_00 + 0x138))(this_00);
  local_50 = 0x1d024411000001;
  local_48 = 0x80008;
  IGHardwareRingBuffer::waitForSpace
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_01,3,extraout_RDX_01
             ,lVar3,in_R8,in_R9);
  IGHardwareRingBuffer::writeBuffer(this_01,(long)&local_50,3);
  (**(code **)(*(long *)this_01 + 0x138))(this_01);
  (**(code **)(*(long *)this_01 + 0x120))(this_01,local_34,(int)plVar1[4]);
  *(undefined8 *)(*(long *)(param_9 + 0x618) + 0x50) = *(undefined8 *)(param_9 + 0x13d0);
  uVar2 = IOAccelResource2::getKernelData();
  *(undefined8 *)(*(long *)(param_9 + 0x618) + 0x20) = uVar2;
  uVar2 = (**(code **)(**(long **)(*(long *)(param_9 + 0x13e8) + 0x40) + 0x128))();
  lVar3 = *(long *)(param_9 + 0x618);
  *(undefined8 *)(lVar3 + 0x18) = uVar2;
  *(int *)(lVar3 + 0x30) =
       (int)(*(ulong *)(*(long *)(param_9 + 0x13e8) + 200 +
                       (ulong)(*(long *)(*(long *)(param_9 + 0x13e8) + 0x88) == 0) * 8) >> 2);
  (**(code **)(*this + 0x148))(this);
  (**(code **)(*this + 0x130))(this,*(undefined8 *)(param_9 + 0x618));
  (**(code **)(*this + 0x140))(this,local_40);
  (**(code **)(*this + 0x140))(this,*(long *)(*(long *)(param_9 + 0x13e8) + 0x40) + 0x38);
  uVar2 = IOAccelResource2::releaseKernelData();
  local_50 = 0x1d024411000001;
  local_48 = 0x80000;
  IGHardwareRingBuffer::waitForSpace
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_01,3,extraout_RDX_02
             ,lVar3,in_R8,in_R9);
  IGHardwareRingBuffer::writeBuffer(this_01,(long)&local_50,3);
  (**(code **)(*(long *)this_01 + 0x138))(this_01);
  return;
}



// IGAccelVideoContextMedia::endCommandStream(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::endCommandStream
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  undefined1 uVar1;
  long lVar2;
  undefined8 uVar3;
  
  lVar2 = *(long *)((long)this + 0x618);
  uVar1 = *(undefined1 *)(lVar2 + 0x68);
  if (*(char *)((long)this + 0x13c8) != '\0') {
    *(undefined1 *)(lVar2 + 0x68) = 0;
  }
  uVar3 = IGAccelVideoContext::endCommandStream
                    (param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                     param_10);
  if (*(char *)((long)this + 0x13c8) != '\0') {
    endScalableCommandStreamFE_BE
              (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this);
    *(undefined1 *)(lVar2 + 0x68) = uVar1;
  }
  return;
}



// IGAccelVideoContextMedia::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::processSidebandToken(IGAccelVideoContextMedia *this,long param_1)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  if ((uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0x30)) >> 2 < *(uint *)(param_1 + 0x34))
  {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if ((ushort)(*(ushort *)(param_1 + 0x20) + 0x7800) < 0x700) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x88) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13b8) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13b8) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x000400f8. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::processSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// IGAccelVideoContextMedia::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextMedia::discardSidebandToken(IGAccelVideoContextMedia *this,long param_1)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  if ((ushort)(*(ushort *)(param_1 + 0x20) + 0x7800) < 0x700) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x88) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13c0) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13c0) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x0004014c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::discardSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// WARNING: Type propagation algorithm not settling
// IGAccelVideoContextMedia::patch_codechal_command_buffer(IOAccelCommandStreamInfo&, unsigned int*)

void __thiscall
IGAccelVideoContextMedia::patch_codechal_command_buffer
          (IGAccelVideoContextMedia *this,long *param_1,uint *param_2)

{
  undefined8 *puVar1;
  char cVar2;
  undefined8 uVar3;
  long lVar4;
  IGHardwareContext *pIVar5;
  long lVar6;
  ulong uVar7;
  uint *local_a0;
  undefined8 local_98;
  uint *local_90;
  undefined4 local_84;
  long local_80 [10];
  
  local_80[9] = *(long *)__got::___stack_chk_guard;
  local_90 = (uint *)0x0;
  local_a0 = (uint *)0x0;
  uVar3 = IGAccelVideoContext::patch_codechal_command_buffer__get_token_header
                    ((IGAccelVideoContext *)this,(long)param_1,(long)param_2,(long *)&local_90,
                     (ulong *)&local_a0);
  if ((char)uVar3 != '\0') {
    if ((*local_90 & 0x40000) == 0) {
      IGAccelVideoContext::patch_codechal_command_buffer
                ((IGAccelVideoContext *)this,param_1,param_2);
    }
    else {
      local_80[0] = 0;
      local_98 = 0;
      local_84 = 0;
      local_80[8] = 0;
      local_80[7] = 0;
      local_80[6] = 0;
      local_80[5] = 0;
      local_80[4] = 0;
      local_80[3] = 0;
      local_80[2] = 0;
      local_80[1] = 0;
      this[0x13c8] = (IGAccelVideoContextMedia)0x1;
      if (*(long *)(this + 0x13d0) == 0) {
        lVar4 = (**(code **)(*(long *)this + 0x968))(this);
        pIVar5 = IGHardwareContext::withOptions
                           (lVar4,(undefined8 *)&g_cInitGfxHwCtxParamsForVideoMedia2,2);
        *(IGHardwareContext **)(this + 0x13d0) = pIVar5;
        if (pIVar5 == (IGHardwareContext *)0x0) {
          *(undefined1 *)((long)param_1 + 0x3c) = 0;
          goto LAB_0004032f;
        }
      }
      lVar4 = *param_1;
      if (*(int *)(lVar4 + 0x4c) != 0) {
        uVar7 = 0;
        do {
          cVar2 = (**(code **)(*(long *)this + 0xb78))
                            (this,param_1,*(undefined4 *)(lVar4 + 0x50 + uVar7 * 8),local_80,
                             &local_98,&local_84,0);
          if (cVar2 == '\0') goto LAB_0004032f;
          lVar6 = IOAccelResource2::getKernelData();
          local_80[uVar7 + 5] = lVar6;
          local_80[uVar7 + 1] =
               (*(ulong *)(local_80[0] + 200 + (ulong)(*(long *)(local_80[0] + 0x88) == 0) * 8) &
               0xfffffffffffffffc) + lVar6;
          *(long *)(this + uVar7 * 8 + 0x13d8) = local_80[0];
          uVar7 = uVar7 + 1;
        } while (uVar7 < *(uint *)(lVar4 + 0x4c));
      }
      IGAccelVideoContext::patch_codechal_command_buffer__set_base_addresses
                ((long *)this,(long)param_1,local_a0,local_90,(long)(local_80 + 5),
                 (long)(local_80 + 1));
      if (*(int *)(lVar4 + 0x4c) != 0) {
        uVar7 = 0;
        do {
          IOAccelResource2::releaseKernelData();
          uVar7 = uVar7 + 1;
        } while (uVar7 < *(uint *)(lVar4 + 0x4c));
      }
      puVar1 = (undefined8 *)*param_1;
      lVar4 = 0;
      do {
        *(undefined4 *)((long)puVar1 + lVar4 * 4) = 0;
        lVar4 = lVar4 + 1;
      } while (lVar4 != 0x2c);
      *puVar1 = 0x5000000;
    }
  }
LAB_0004032f:
  if (*(long *)__got::___stack_chk_guard == local_80[9]) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelVideoContextMedia::patch_AVC_WA(IOAccelCommandStreamInfo&, unsigned int*,
// sIntelVideoTokenArgsWADummyJPEG*)

void __thiscall
IGAccelVideoContextMedia::patch_AVC_WA
          (IGAccelVideoContextMedia *this,long param_1,long param_2,undefined4 *param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  char cVar4;
  undefined4 uVar5;
  long lVar6;
  uint uVar7;
  IGAccelResource *local_48;
  ulong local_40;
  undefined4 local_34;
  
  if ((*(undefined4 **)(this + 0x628) < param_3 + 0xe) ||
     ((ulong)(*(uint *)(param_1 + 0x10) & 0xfffffffc) + *(long *)(param_1 + 8) < param_2 + 0x4f0U))
  {
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else {
    local_48 = (IGAccelResource *)0x0;
    local_40 = 0;
    local_34 = 0;
    cVar4 = (**(code **)(*(long *)this + 0xb78))(this,param_1,*param_3);
    if (cVar4 != '\0') {
      IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_48);
      *(ulong *)(param_2 + 0x50) = *(ulong *)(param_2 + 0x50) & 0xffffffff0000003f;
      *(short *)(param_2 + 0x48) = (short)(local_40 >> 0x20);
      *(ulong *)(param_2 + 0x40) =
           *(ulong *)(param_2 + 0x40) & 0x3fffffffff | (local_40 >> 6) << 0x26;
      uVar7 = param_3[0xb] & 0xfff00007 | 0x1f8;
      param_3[0xb] = uVar7;
      *(uint *)(param_2 + 0x34) = uVar7;
      lVar6 = 0;
      do {
        *(ulong *)(param_2 + 0x8c + lVar6 * 8) =
             *(ulong *)(param_2 + 0x8c + lVar6 * 8) & 0xffff00000000003f |
             (local_40 >> 0x20 & 0xffff) << 0x20 | (ulong)((uint)local_40 & 0xffffffc0);
        lVar6 = lVar6 + 1;
      } while (lVar6 != 0x10);
      uVar5 = param_3[2];
      uVar1 = param_3[3];
      uVar2 = param_3[5];
      uVar3 = param_3[6];
      cVar4 = (**(code **)(*(long *)this + 0xb78))
                        (this,param_1,param_3[1],&local_48,&local_40,&local_34,1);
      if (cVar4 != '\0') {
        *(short *)(param_2 + 0x78) = (short)(local_40 >> 0x20);
        *(ulong *)(param_2 + 0x70) =
             *(ulong *)(param_2 + 0x70) & 0x3fffffffff | (local_40 >> 6) << 0x26;
        IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_48);
        cVar4 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,uVar5,&local_48,&local_40,&local_34,1);
        if (cVar4 != '\0') {
          *(ulong *)(param_2 + 0x80) =
               (local_40 >> 0x20 & 0xffff) << 0x20 |
               *(ulong *)(param_2 + 0x80) & 0xffff00000000003f |
               (ulong)((uint)local_40 & 0xffffffc0);
          IGAccelVideoContext::updateResourceMappingCacheType((IGAccelVideoContext *)this,local_48);
          cVar4 = (**(code **)(*(long *)this + 0xb78))
                            (this,param_1,uVar2,&local_48,&local_40,&local_34,1);
          if (cVar4 != '\0') {
            IGAccelVideoContext::updateResourceMappingCacheType
                      ((IGAccelVideoContext *)this,local_48);
            *(ulong *)(param_2 + 0x1bc) = local_40;
            cVar4 = (**(code **)(*(long *)this + 0xb78))
                              (this,param_1,uVar3,&local_48,&local_40,&local_34,1);
            if (cVar4 != '\0') {
              IGAccelVideoContext::updateResourceMappingCacheType
                        ((IGAccelVideoContext *)this,local_48);
              *(ulong *)(param_2 + 0x1c8) = local_40;
              cVar4 = (**(code **)(*(long *)this + 0xb78))
                                (this,param_1,uVar1,&local_48,&local_40,&local_34,0);
              if (cVar4 != '\0') {
                IGAccelVideoContext::updateResourceMappingCacheType
                          ((IGAccelVideoContext *)this,local_48);
                *(ulong *)(param_2 + 0x154) = local_40;
                *(int *)(param_2 + 0x160) = param_3[4] + (int)local_40;
                *(int *)(param_2 + 0x164) = (int)((uint)param_3[4] + local_40 >> 0x20);
                cVar4 = (**(code **)(*(long *)this + 0xb78))
                                  (this,param_1,param_3[7],&local_48,&local_40,&local_34,1);
                if (cVar4 != '\0') {
                  IGAccelVideoContext::updateResourceMappingCacheType
                            ((IGAccelVideoContext *)this,local_48);
                  lVar6 = 0;
                  do {
                    *(int *)(param_2 + 0x380 + lVar6 * 8) = (int)local_40;
                    uVar5 = (undefined4)(local_40 >> 0x20);
                    *(undefined4 *)(param_2 + 900 + lVar6 * 8) = uVar5;
                    lVar6 = lVar6 + 1;
                  } while (lVar6 != 0x10);
                  *(int *)(param_2 + 0x404) = (int)local_40;
                  *(undefined4 *)(param_2 + 0x408) = uVar5;
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



// IGAccelVideoContextMedia::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextMedia::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



void __GLOBAL__sub_I_IGAccelVideoContextMedia_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelVideoContextMedia::gMetaClass,"IGAccelVideoContextMedia",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13f8);
  IGAccelVideoContextMedia::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelVideoContextMedia::gMetaClass);
  return;
}



// IGHardwareRingBuffer::MetaClass::MetaClass()

void __thiscall IGHardwareRingBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBuffer",(OSMetaClass *)__got::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBuffer::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRingBuffer::IGHardwareRingBuffer(OSMetaClass const*)

void __thiscall
IGHardwareRingBuffer::IGHardwareRingBuffer(IGHardwareRingBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBuffer;
  return;
}



// IGHardwareRingBuffer::IGHardwareRingBuffer(OSMetaClass const*)

void __thiscall
IGHardwareRingBuffer::IGHardwareRingBuffer(IGHardwareRingBuffer *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBuffer;
  return;
}



// IGHardwareRingBuffer::~IGHardwareRingBuffer()

void __thiscall IGHardwareRingBuffer::~IGHardwareRingBuffer(IGHardwareRingBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareRingBuffer::~IGHardwareRingBuffer()

void __thiscall IGHardwareRingBuffer::~IGHardwareRingBuffer(IGHardwareRingBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGHardwareRingBuffer::~IGHardwareRingBuffer()

void __thiscall IGHardwareRingBuffer::~IGHardwareRingBuffer(IGHardwareRingBuffer *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareRingBuffer_ktv,this,0x8e0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBuffer::operator delete(void*, unsigned long)

void __cdecl IGHardwareRingBuffer::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRingBuffer_ktv,param_1,param_2);
  return;
}



// IGHardwareRingBuffer::getMetaClass() const

undefined1 * IGHardwareRingBuffer::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRingBuffer::MetaClass::MetaClass()

void __thiscall IGHardwareRingBuffer::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBuffer",(OSMetaClass *)__got::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBuffer::MetaClass::alloc() const

undefined8 IGHardwareRingBuffer::MetaClass::alloc(void)

{
  return 0;
}



// IGHardwareRingBuffer::operator new(unsigned long)

void * __thiscall IGHardwareRingBuffer::operator_new(IGHardwareRingBuffer *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRingBuffer_ktv,this);
  return pvVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBuffer::withHardwareContext(IGHardwareContext*)

long * __cdecl IGHardwareRingBuffer::withHardwareContext(long param_1)

{
  char cVar1;
  long *plVar2;
  
  if (((ulong)(long)*(char *)(param_1 + 0x6c) < 5) &&
     (plVar2 = (long *)(**(code **)(**(long **)(&__const::metaClass)[*(char *)(param_1 + 0x6c)] +
                                   0x88))(), plVar2 != (long *)0x0)) {
    cVar1 = (**(code **)(*plVar2 + 0x170))(plVar2,param_1);
    if (cVar1 != '\0') {
      return plVar2;
    }
    (**(code **)(*plVar2 + 0x28))(plVar2);
  }
  return (long *)0x0;
}



// IGHardwareRingBuffer::init(IGHardwareContext*)

long __thiscall IGHardwareRingBuffer::init(IGHardwareRingBuffer *this,long param_1)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined8 uVar5;
  long lVar6;
  IGSharedMappedBuffer *pIVar7;
  long lVar8;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  lVar8 = 0;
  if (cVar1 != '\0') {
    *(long *)(this + 0x20) = param_1;
    this[0x40] = *(IGHardwareRingBuffer *)(param_1 + 0x6c);
    lVar6 = *(long *)(*(long *)(param_1 + 0x58) + 0x10);
    *(long *)(this + 0x10) = lVar6;
    *(undefined8 *)(this + 0x50) = *(undefined8 *)(*(long *)(&DAT_00001290 + lVar6) + 0x18);
    uVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_1 + 0x98));
    *(undefined8 *)(this + 0x18) = uVar5;
    iVar2 = IGHardwareContext::getRingBufferSize(*(IGHardwareContext **)(this + 0x20));
    *(int *)(this + 0x8c) = iVar2;
    *(int *)(this + 0x88) = iVar2 + -8;
    *(int *)(this + 0x90) = iVar2 + -1;
    *(undefined4 *)(this + 0x68) = 0;
    *(undefined8 *)(this + 0x60) = 0;
    *(undefined2 *)(this + 0x6c) = 0;
    *(undefined4 *)(this + 0x4c) = 0;
    *(undefined8 *)(this + 0x8a8) = 0;
    *(undefined4 *)(this + 0x8b0) = 0;
    *(undefined8 *)(this + 0x94) = 0;
    *(undefined4 *)(*(long *)(this + 0x18) + 0x10) = 0;
    lVar6 = *(long *)(this + 0x10) + 0x2da0;
    do {
      *(long *)(this + lVar8 * 8 + 0x8b8) = lVar6;
      lVar8 = lVar8 + 1;
      lVar6 = lVar6 + 0x110;
    } while (lVar8 != 5);
    uVar5 = IGAccelTask::getStampGPUVirtualAddress(*(IGAccelTask **)(param_1 + 0x58));
    *(undefined8 *)(this + 0x28) = uVar5;
    uVar5 = IGAccelTask::getStamps(*(IGAccelTask **)(param_1 + 0x58));
    *(undefined8 *)(this + 0x30) = uVar5;
    lVar6 = *(long *)(*(long *)(this + 0x10) + 0x150);
    uVar3 = IGHardwareContext::getRingBufferSize(*(IGHardwareContext **)(this + 0x20));
    lVar8 = 0;
    pIVar7 = IGSharedMappedBuffer::withOptions(lVar6,(ulong)uVar3,2,0);
    *(IGSharedMappedBuffer **)(this + 0x80) = pIVar7;
    if (pIVar7 != (IGSharedMappedBuffer *)0x0) {
      if ((this[0x40] == (IGHardwareRingBuffer)0x0) &&
         ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0)) {
        uVar4 = IGAccelTask::getRCSStampIndex
                          (*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58),
                           (uint)*(byte *)(*(long *)(this + 0x20) + 0x78));
      }
      else {
        uVar4 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x140))
                          (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),this[0x40],
                           *(undefined1 *)(*(long *)(this + 0x20) + 0x78));
      }
      *(undefined4 *)(this + 0x38) = uVar4;
      cVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x1c8))
                        (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),*(long *)(this + 0x20),
                         uVar4,*(undefined1 *)(*(long *)(this + 0x20) + 0x78));
      if (cVar1 == '\0') {
        if (*(long **)(this + 0x80) != (long *)0x0) {
          (**(code **)(**(long **)(this + 0x80) + 0x28))();
        }
        *(undefined8 *)(this + 0x80) = 0;
        lVar8 = 0;
      }
      else {
        *(undefined4 *)(this + 0x8a0) = 0;
        ___bzero(this + 0xa0,0x800);
        lVar8 = 1;
      }
    }
  }
  return lVar8;
}



// IGHardwareRingBuffer::initDebugEngine()

void __thiscall IGHardwareRingBuffer::initDebugEngine(IGHardwareRingBuffer *this)

{
  *(undefined4 *)(this + 0x8a0) = 0;
  ___bzero(this + 0xa0,0x800);
  return;
}



// IGHardwareRingBuffer::free()

void __thiscall IGHardwareRingBuffer::free(IGHardwareRingBuffer *this,void *param_1)

{
  if (-1 < *(int *)(this + 0x38)) {
    (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x1d8))
              (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),*(undefined8 *)(this + 0x20));
    *(undefined4 *)(this + 0x38) = 0xffffffff;
  }
  if (*(long **)(this + 0x80) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x80) + 0x28))();
  }
  *(undefined8 *)(this + 0x80) = 0;
  if (*(long *)(this + 0x8a8) != 0) {
    _IOFreeData(*(long *)(this + 0x8a8),0x10000);
  }
                    // WARNING: Could not recover jumptable at 0x00040b79. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGHardwareRingBuffer::refreshRing()

void __thiscall IGHardwareRingBuffer::refreshRing(IGHardwareRingBuffer *this)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = *(uint *)(*(long *)(this + 0x18) + 0x10) & 0x1ffffc;
  *(uint *)(this + 0x60) = uVar1;
  iVar2 = (uVar1 - *(int *)(this + 100)) + -8;
  *(int *)(this + 0x88) = iVar2;
  if (iVar2 < 0) {
    *(int *)(this + 0x88) = iVar2 + *(int *)(this + 0x8c);
  }
  return;
}



// IGHardwareRingBuffer::waitForSpace(unsigned int)

bool __thiscall
IGHardwareRingBuffer::waitForSpace
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  int *piVar1;
  byte bVar2;
  int iVar3;
  uint uVar4;
  long lVar5;
  undefined *puVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  ulong uVar10;
  uint uVar11;
  ulong extraout_RDX;
  ulong uVar12;
  undefined **ppuVar13;
  uint uVar14;
  undefined *arg3;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined *local_c8;
  undefined8 local_c0;
  code *local_b8;
  undefined *local_b0;
  void *local_a8;
  uint local_a0;
  undefined *local_98;
  undefined8 local_90;
  code *local_88;
  undefined *local_80;
  void *local_78;
  uint local_70;
  undefined *local_68;
  undefined8 local_60;
  code *local_58;
  undefined *local_50;
  void *local_48;
  char *local_40;
  uint local_34;
  
  if (_graphicsTracePointEnable != 0) {
    param_13 = (char *)0x0;
    param_1_00 = dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      param_13 = (char *)0x0;
      param_14 = (char *)0x0;
      _kernel_debug(0x85a00045,(ulong)*(byte *)((long)this + 0x40),(ulong)param_10,0,0,0);
      param_1_00 = extraout_XMM0_Qa;
    }
  }
  uVar9 = *(uint *)((long)this + 0x40);
  uVar4 = param_10 + 4;
  if ((char)uVar9 != '\0') {
    uVar4 = param_10 + 1;
  }
  if (((&DAT_000011c1)[*(long *)((long)this + 0x10)] & 0x40) == 0) {
    uVar4 = param_10 + 1;
  }
  if ((*(ulong *)(&DAT_00001380 + (ulong)(uVar9 >> 3 & 0x18) + *(long *)((long)this + 0x10)) >>
       ((ulong)uVar9 & 0x3f) & 1) != 0) {
    iVar3 = (**(code **)(*(long *)this + 0x150))(this);
    uVar4 = iVar3 + uVar4;
    *(undefined1 *)((long)this + 0x6d) = 1;
    param_1_00 = extraout_XMM0_Qa_00;
  }
  uVar9 = *(uint *)((long)this + 100);
  uVar14 = uVar4 + 1;
  if ((uVar9 & 7) == 0) {
    uVar14 = uVar4;
  }
  uVar14 = uVar14 * 4 + 4 & 0xfffffff8;
  local_34 = *(uint *)((long)this + 0x8c) - 8;
  if (local_34 < uVar14) {
    if ((_graphicsTracePointEnable == 0) ||
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0)) goto LAB_00040f13;
    bVar2 = *(byte *)((long)this + 0x40);
    arg3 = (undefined *)0x0;
  }
  else {
    uVar12 = (ulong)(uVar9 + uVar14);
    if ((uVar9 + uVar14 & ~*(uint *)((long)this + 0x90)) == 0) {
      uVar8 = *(uint *)((long)this + 0x88);
      arg3 = (undefined *)0x0;
      uVar7 = uVar14;
    }
    else {
      uVar4 = uVar4 + 1 & 0xfffffffe;
      uVar8 = uVar4 * 4;
      param_13 = (char *)(ulong)uVar8;
      uVar11 = *(uint *)(*(long *)((long)this + 0x18) + 0x10) & 0x1ffffc;
      *(uint *)((long)this + 0x60) = uVar11;
      uVar7 = ((uVar11 - uVar9) +
              ((int)((uVar11 - uVar9) + -8) >> 0x1f & *(uint *)((long)this + 0x8c))) - 8;
      *(uint *)((long)this + 0x88) = uVar7;
      local_40 = param_13;
      if (uVar9 < uVar11) {
        ppuVar13 = &local_68;
        local_68 = __got::__NSConcreteStackBlock;
        local_60 = 0x40000000;
        local_58 = ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke;
        local_50 = &___block_descriptor_tmp;
        local_48 = this;
LAB_00040dae:
        arg3 = waitTimeout(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                           (long)ppuVar13,(ulong)uVar11,(ulong)uVar7,param_13,param_14);
      }
      else {
        if (uVar11 < uVar8 + 8) {
          ppuVar13 = &local_c8;
          local_c8 = __got::__NSConcreteStackBlock;
          local_c0 = 0x40000000;
          local_b8 = ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_2;
          local_b0 = &___block_descriptor_tmp_4;
          local_a8 = this;
          local_a0 = uVar8;
          goto LAB_00040dae;
        }
        arg3 = (undefined *)0x0;
      }
      uVar9 = *(int *)((long)this + 0x8c) - *(int *)((long)this + 100);
      lVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)((long)this + 0x80))
      ;
      uVar12 = extraout_RDX;
      if (3 < uVar9) {
        uVar8 = *(uint *)((long)this + 100);
        uVar12 = 0;
        do {
          *(undefined4 *)(lVar5 + (ulong)uVar8 + uVar12 * 4) = 0;
          uVar12 = uVar12 + 1;
        } while (uVar9 >> 2 != (uint)uVar12);
      }
      *(undefined4 *)((long)this + 100) = 0;
      uVar11 = *(uint *)(*(long *)((long)this + 0x18) + 0x10) & 0x1ffffc;
      *(uint *)((long)this + 0x60) = uVar11;
      uVar9 = 0;
      uVar8 = uVar11 - 8;
      *(uint *)((long)this + 0x88) = uVar8;
      uVar7 = (uint)local_40;
      param_1_00 = extraout_XMM0_Qa_01;
      if (uVar11 < 8) {
        uVar8 = uVar8 + *(int *)((long)this + 0x8c);
        *(uint *)((long)this + 0x88) = uVar8;
      }
    }
    uVar10 = (ulong)uVar8;
    if ((int)uVar8 < (int)uVar7) {
      uVar12 = *(ulong *)((long)this + 0x18);
      uVar8 = *(uint *)(uVar12 + 0x10) & 0x1ffffc;
      *(uint *)((long)this + 0x60) = uVar8;
      uVar9 = (uVar8 - uVar9) - 8;
      uVar10 = (ulong)uVar9;
      *(uint *)((long)this + 0x88) = uVar9;
      if ((int)uVar9 < 0) {
        uVar9 = uVar9 + *(int *)((long)this + 0x8c);
        uVar10 = (ulong)uVar9;
        *(uint *)((long)this + 0x88) = uVar9;
      }
    }
    if ((int)uVar10 < (int)uVar7) {
      local_98 = __got::__NSConcreteStackBlock;
      local_90 = 0x40000000;
      local_88 = ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_3;
      local_80 = &___block_descriptor_tmp_5;
      local_78 = this;
      local_70 = uVar7;
      puVar6 = waitTimeout(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                           (long)&local_98,uVar12,uVar10,param_13,param_14);
      arg3 = arg3 + (long)puVar6;
    }
    lVar5 = *(long *)((long)this + 0x10);
    IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar5 + 0x388) + 0x58),0x2c);
    piVar1 = (int *)(lVar5 + 0x250);
    *piVar1 = *piVar1 + (int)arg3;
    if ((_graphicsTracePointEnable == 0) ||
       (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0)) goto LAB_00040f13;
    bVar2 = *(byte *)((long)this + 0x40);
  }
  _kernel_debug(0x85a00046,(ulong)bVar2,(ulong)uVar4,(uintptr_t)arg3,0,0);
LAB_00040f13:
  return uVar14 <= local_34;
}



// IGHardwareRingBuffer::waitTimeout(bool ( block_pointer)())

undefined * __thiscall
IGHardwareRingBuffer::waitTimeout
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  uint64_t uVar4;
  uint64_t uVar5;
  undefined8 uVar6;
  undefined8 extraout_RDX;
  ulong uVar7;
  undefined *puVar8;
  undefined *puVar9;
  undefined8 extraout_XMM0_Qa;
  
  puVar9 = (undefined *)0x746a528800;
  if (((&DAT_000011c0)[*(long *)((long)this + 0x10)] & 0x20) == 0) {
    puVar9 = (undefined *)0x12a05f200;
  }
  cVar1 = (**(code **)(param_10 + 0x10))(param_10);
  if (cVar1 != '\0') {
    puVar8 = (undefined *)0x0;
    do {
      uVar6 = 1000;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100);
      _thread_block(0);
      uVar2 = *(uint *)(*(long *)((long)this + 0x18) + 0x10) & 0x1ffffc;
      *(uint *)((long)this + 0x60) = uVar2;
      iVar3 = (uVar2 - *(int *)((long)this + 100)) + -8;
      *(int *)((long)this + 0x88) = iVar3;
      if (iVar3 < 0) {
        *(int *)((long)this + 0x88) = iVar3 + *(int *)((long)this + 0x8c);
      }
      puVar8 = puVar8 + 100000;
      cVar1 = (**(code **)(param_10 + 0x10))(param_10);
    } while ((cVar1 != '\0') && (puVar8 < puVar9));
    if (cVar1 == '\0') {
      return puVar8;
    }
    uVar4 = _mach_absolute_time();
    uVar7 = (ulong)*(byte *)((long)this + 0x40);
    cVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0x150))();
    if ((cVar1 != '\0') ||
       (debugGraphicsEngine(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                            ,this,uVar7,extraout_RDX,uVar6,param_13,param_14),
       *(uint *)((long)this + 0x94) < 4)) {
      uVar5 = _mach_absolute_time();
      uVar2 = *(uint *)(*(long *)((long)this + 0x18) + 0x10) & 0x1ffffc;
      *(uint *)((long)this + 0x60) = uVar2;
      iVar3 = (uVar2 - *(int *)((long)this + 100)) + -8;
      *(int *)((long)this + 0x88) = iVar3;
      if (-1 < iVar3) {
        return puVar8 + (uVar5 - uVar4);
      }
      *(int *)((long)this + 0x88) = iVar3 + *(int *)((long)this + 0x8c);
      return puVar8 + (uVar5 - uVar4);
    }
    waitTimeout();
  }
  return (undefined *)0x0;
}



undefined8 ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke(long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(param_1 + 0x20);
  return CONCAT71((int7)((ulong)lVar1 >> 8),*(uint *)(lVar1 + 100) < *(uint *)(lVar1 + 0x60));
}



undefined8 ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_2(long param_1)

{
  return CONCAT71((int7)((ulong)*(long *)(param_1 + 0x20) >> 8),
                  *(uint *)(*(long *)(param_1 + 0x20) + 0x60) < *(int *)(param_1 + 0x28) + 8U);
}



undefined4 ____ZN20IGHardwareRingBuffer12waitForSpaceEj_block_invoke_3(long param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(*(long *)(param_1 + 0x20) + 0x88);
  return CONCAT31((int3)((uint)iVar1 >> 8),iVar1 < *(int *)(param_1 + 0x28));
}



// IGHardwareRingBuffer::alignRing(unsigned int)

void __thiscall IGHardwareRingBuffer::alignRing(IGHardwareRingBuffer *this,uint param_1)

{
  uint uVar1;
  
  uVar1 = *(uint *)(this + 100);
  while ((uVar1 & param_1) != 0) {
    writeDWord(this,0);
    uVar1 = *(uint *)(this + 100);
  }
  return;
}



// IGHardwareRingBuffer::writeDWord(unsigned int)

void __thiscall IGHardwareRingBuffer::writeDWord(IGHardwareRingBuffer *this,undefined4 param_1)

{
  IGHardwareRingBuffer IVar1;
  long lVar2;
  undefined8 local_30;
  undefined4 local_28;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  IVar1 = this[0x40];
  if (((*(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) >>
        ((ulong)(byte)IVar1 & 0x3f) & 1) != 0) && (this[0x6d] != (IGHardwareRingBuffer)0x0)) {
    *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) =
         *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) &
         ~(1L << ((byte)IVar1 & 0x3f));
    (**(code **)(*(long *)this + 0x158))(this);
    this[0x6d] = (IGHardwareRingBuffer)0x0;
  }
  if (((this[0x6c] == (IGHardwareRingBuffer)0x0) && (this[0x40] == (IGHardwareRingBuffer)0x0)) &&
     (((&DAT_000011c1)[*(long *)(this + 0x10)] & 0x40) != 0)) {
    this[0x6c] = (IGHardwareRingBuffer)0x1;
    *(undefined4 *)(this + 0x68) = *(undefined4 *)(this + 100);
    local_28 = 0;
    local_30 = 0;
    writeBuffer(this,(long)&local_30,3);
  }
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80));
  *(undefined4 *)(lVar2 + (ulong)*(uint *)(this + 100)) = param_1;
  *(uint *)(this + 100) = *(int *)(this + 100) + 4U & *(uint *)(this + 0x90);
  *(int *)(this + 0x88) = *(int *)(this + 0x88) + -4;
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::writeQWord(unsigned long long)

void __thiscall IGHardwareRingBuffer::writeQWord(IGHardwareRingBuffer *this,undefined8 param_1)

{
  IGHardwareRingBuffer IVar1;
  uint uVar2;
  long lVar3;
  undefined8 local_30;
  undefined4 local_28;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  IVar1 = this[0x40];
  if (((*(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) >>
        ((ulong)(byte)IVar1 & 0x3f) & 1) != 0) && (this[0x6d] != (IGHardwareRingBuffer)0x0)) {
    *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) =
         *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) &
         ~(1L << ((byte)IVar1 & 0x3f));
    (**(code **)(*(long *)this + 0x158))(this);
    this[0x6d] = (IGHardwareRingBuffer)0x0;
  }
  if (((this[0x6c] == (IGHardwareRingBuffer)0x0) && (this[0x40] == (IGHardwareRingBuffer)0x0)) &&
     (((&DAT_000011c1)[*(long *)(this + 0x10)] & 0x40) != 0)) {
    this[0x6c] = (IGHardwareRingBuffer)0x1;
    *(undefined4 *)(this + 0x68) = *(undefined4 *)(this + 100);
    local_28 = 0;
    local_30 = 0;
    writeBuffer(this,(long)&local_30,3);
  }
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80));
  uVar2 = *(uint *)(this + 100);
  *(undefined8 *)(lVar3 + (ulong)uVar2) = param_1;
  *(uint *)(this + 100) = uVar2 + 8 & *(uint *)(this + 0x90);
  *(int *)(this + 0x88) = *(int *)(this + 0x88) + -8;
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::writeBuffer(unsigned int*, unsigned int)

undefined8 __thiscall
IGHardwareRingBuffer::writeBuffer(IGHardwareRingBuffer *this,long param_1,uint param_2)

{
  IGHardwareRingBuffer IVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  undefined8 local_38;
  undefined4 local_30;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  IVar1 = this[0x40];
  if (((*(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) >>
        ((ulong)(byte)IVar1 & 0x3f) & 1) != 0) && (this[0x6d] != (IGHardwareRingBuffer)0x0)) {
    *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) =
         *(ulong *)(&DAT_00001380 + (ulong)((byte)IVar1 >> 6) * 8 + *(long *)(this + 0x10)) &
         ~(1L << ((byte)IVar1 & 0x3f));
    (**(code **)(*(long *)this + 0x158))(this);
    this[0x6d] = (IGHardwareRingBuffer)0x0;
  }
  if (((this[0x6c] == (IGHardwareRingBuffer)0x0) && (this[0x40] == (IGHardwareRingBuffer)0x0)) &&
     (((&DAT_000011c1)[*(long *)(this + 0x10)] & 0x40) != 0)) {
    this[0x6c] = (IGHardwareRingBuffer)0x1;
    *(undefined4 *)(this + 0x68) = *(undefined4 *)(this + 100);
    local_30 = 0;
    local_38 = 0;
    writeBuffer(this,(long)&local_38,3);
  }
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80));
  uVar3 = *(uint *)(this + 100);
  if (param_2 != 0) {
    uVar4 = 0;
    do {
      *(undefined4 *)(lVar2 + (ulong)uVar3 + uVar4 * 4) = *(undefined4 *)(param_1 + uVar4 * 4);
      uVar4 = uVar4 + 1;
    } while (param_2 != uVar4);
    uVar3 = *(uint *)(this + 100);
  }
  *(uint *)(this + 0x88) = *(int *)(this + 0x88) + param_2 * -4;
  *(uint *)(this + 100) = uVar3 + param_2 * 4 & *(uint *)(this + 0x90);
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return CONCAT71((int7)((ulong)*(long *)__got::___stack_chk_guard >> 8),1);
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::sleepForStamp(unsigned int*, unsigned int, unsigned int)

bool __thiscall
IGHardwareRingBuffer::sleepForStamp
          (IGHardwareRingBuffer *this,int *param_1,uint param_2,uint param_3)

{
  int iVar1;
  uint64_t uVar2;
  uint64_t uVar3;
  
  if ((param_3 == 0) && (param_3 = 500000000, ((&DAT_000011c0)[*(long *)(this + 0x10)] & 0x20) == 0)
     ) {
    param_3 = 5000000;
  }
  iVar1 = *(int *)(*(long *)(this + 0x30) + (long)*(int *)(this + 0x38) * 0x40);
  *param_1 = iVar1;
  if (0 < (int)(param_2 - iVar1)) {
    if (_graphicsTracePointEnable != 0) {
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a00041,(ulong)(byte)this[0x40],(ulong)param_2,0,0,0);
      }
    }
    uVar2 = _mach_absolute_time();
    iVar1 = *(int *)(*(long *)(this + 0x30) + (long)*(int *)(this + 0x38) * 0x40);
    *param_1 = iVar1;
    if (0 < (int)(param_2 - iVar1)) {
      do {
        uVar3 = _mach_absolute_time();
        if ((ulong)param_3 * 1000 <= uVar3 - uVar2) break;
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
        _thread_block(0);
        iVar1 = *(int *)(*(long *)(this + 0x30) + (long)*(int *)(this + 0x38) * 0x40);
        *param_1 = iVar1;
      } while (0 < (int)(param_2 - iVar1));
    }
    if (_graphicsTracePointEnable != 0) {
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a00042,(ulong)(byte)this[0x40],(ulong)param_2,0,0,0);
      }
    }
  }
  iVar1 = *param_1;
  if ((0 < (int)(param_2 - iVar1)) && (((&DAT_000011c2)[*(long *)(this + 0x10)] & 2) != 0)) {
    _PE_enter_debugger("***  IG_DEBUG_GPU_HANG is enabled calling debugger ***\n");
  }
  return 0 < (int)(param_2 - iVar1);
}



// IGHardwareRingBuffer::notifyComplete(IOAccelEvent*)

bool __thiscall IGHardwareRingBuffer::notifyComplete(IGHardwareRingBuffer *this,long param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(this + 0x38);
  if ((param_1 != 0) && (-1 < iVar1)) {
    (**(code **)(**(long **)(*(long *)(this + 0x10) + 0x380) + 0x1b8))
              (*(long **)(*(long *)(this + 0x10) + 0x380),
               *(long *)(*(long *)(this + 0x20) + 0xb0) + 0x138,param_1);
  }
  return -1 < iVar1;
}



// IGHardwareRingBuffer::getStampSpace()

undefined8 IGHardwareRingBuffer::getStampSpace(void)

{
  return 5;
}



// IGHardwareRingBuffer::commitStampCommand(unsigned int, bool)

void __thiscall
IGHardwareRingBuffer::commitStampCommand(IGHardwareRingBuffer *this,ulong param_1,ulong param_2)

{
  long lVar1;
  long local_28;
  uint local_20;
  ulong local_1c;
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  lVar1 = (long)*(int *)(this + 0x38) * 0x40 + *(long *)(this + 0x28);
  local_1c = param_1 & 0xffffffff;
  local_28 = (param_2 & 0xffffffff) * 0x100 +
             ((ulong)((uint)lVar1 & 0xfffffff8) << 0x20 |
             (ulong)((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 8 & 1) == 0) << 0x22) +
             0x13004003;
  local_20 = (uint)(ushort)((ulong)lVar1 >> 0x20);
  writeBuffer(this,(long)&local_28,5);
  if (*(long *)__got::___stack_chk_guard == local_10) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::getGTTWriteMode()

bool __thiscall IGHardwareRingBuffer::getGTTWriteMode(IGHardwareRingBuffer *this)

{
  return (*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 8 & 1) == 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBuffer::writeStamp(unsigned int, bool)

void __cdecl IGHardwareRingBuffer::writeStamp(long *param_1,uint param_2)

{
  (**(code **)(*param_1 + 0x140))();
  *(uint *)(param_1[6] + 8 + (long)(int)param_1[7] * 0x40) = param_2;
  *(uint *)((long)param_1 + 0x44) = param_2;
  *(undefined1 *)(param_1 + 9) = 1;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00030,(ulong)*(byte *)(param_1 + 8),(long)(int)param_1[7],(ulong)param_2,0,
                    0);
    }
  }
  dtHookWriteStamp();
  return;
}



// IGHardwareRingBuffer::getSemaphoreWaitBuffer(unsigned int, int)

void __thiscall
IGHardwareRingBuffer::getSemaphoreWaitBuffer
          (IGHardwareRingBuffer *this,undefined4 param_1,uint param_2)

{
  IGScheduler::getSemaphoreWaitBuffer
            (*(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10)),
             *(long **)(*(long *)(this + 0x20) + 0xb0),param_1,param_2);
  return;
}



// IGHardwareRingBuffer::canUseSemaphoreWaitPoll(int)

undefined8 __thiscall
IGHardwareRingBuffer::canUseSemaphoreWaitPoll(IGHardwareRingBuffer *this,uint param_1)

{
  ulong uVar1;
  undefined **ppuVar2;
  
  if ((int)param_1 < 0x3c) {
    uVar1 = *(ulong *)(&DAT_000011c0 + *(long *)(this + 0x10));
    ppuVar2 = &IG_STAMP_INDEX_TO_HWCS_LUT;
    if ((uVar1 & 0x18000) != 0) {
      ppuVar2 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
    }
    if ((((uint)uVar1 >> 0x1d & 1) != 0) &&
       ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 2) != 0)) {
      return CONCAT71((int7)(uVar1 >> 8),
                      this[0x40] != *(IGHardwareRingBuffer *)((long)ppuVar2 + (ulong)param_1) &&
                      (uVar1 & 0x18000) == 0);
    }
  }
  return 0;
}



// IGHardwareRingBuffer::insertSemaphoreWaitPollCommand(IGSemaphoreWaitBufferQueue::SemaphoreWaitBufferDescriptor
// const*)

void __thiscall
IGHardwareRingBuffer::insertSemaphoreWaitPollCommand(IGHardwareRingBuffer *this,undefined8 *param_1)

{
  uint uVar1;
  undefined8 uVar2;
  ulong local_50;
  undefined4 local_48;
  ulong local_40;
  ulong local_38;
  undefined4 local_30;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  uVar1 = 0x18800001;
  if (((&DAT_000011c1)[*(long *)(this + 0x10)] & 1) != 0) {
    uVar1 = (~(uint)*(ushort *)(*(long *)(this + 0x20) + 0x6e) & 2) << 7 | 0x18800001;
  }
  uVar2 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)*param_1);
  local_50 = CONCAT44((int)uVar2,uVar1) & 0xfffffffcffffffff;
  local_48 = (undefined4)((ulong)uVar2 >> 0x20);
  writeBuffer(this,(long)&local_50,3);
  writeDWord(this,0);
  local_30 = 0;
  local_40 = (ulong)((uint)param_1[1] & 0xfffffffc) << 0x20 |
             (ulong)((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x100) << 0xe) ^
             0x10400003;
  local_38 = (ulong)param_1[1] >> 0x20 & 0xffff;
  writeBuffer(this,(long)&local_40,5);
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::getBatchBufferAddressSpaceIndicator()

bool __thiscall
IGHardwareRingBuffer::getBatchBufferAddressSpaceIndicator(IGHardwareRingBuffer *this)

{
  bool bVar1;
  
  bVar1 = false;
  if (((&DAT_000011c1)[*(long *)(this + 0x10)] & 1) != 0) {
    bVar1 = (*(byte *)(*(long *)(this + 0x20) + 0x6e) & 2) == 0;
  }
  return bVar1;
}



// IGHardwareRingBuffer::getSemaphoreWaitPollSpace(int)

int __thiscall
IGHardwareRingBuffer::getSemaphoreWaitPollSpace(IGHardwareRingBuffer *this,uint param_1)

{
  undefined8 uVar1;
  
  uVar1 = canUseSemaphoreWaitPoll(this,param_1);
  return ((uint)uVar1 & 0xff) * 9;
}



// IGHardwareRingBuffer::insertSemaphoreWaitPoll(unsigned int, int)

undefined8 __thiscall
IGHardwareRingBuffer::insertSemaphoreWaitPoll
          (IGHardwareRingBuffer *this,undefined4 param_1,uint param_2)

{
  undefined8 uVar1;
  undefined8 *puVar2;
  
  uVar1 = canUseSemaphoreWaitPoll(this,param_2);
  if (((char)uVar1 != '\0') &&
     (puVar2 = (undefined8 *)
               IGScheduler::getSemaphoreWaitBuffer
                         (*(IGScheduler **)(&DAT_00001280 + *(long *)(this + 0x10)),
                          *(long **)(*(long *)(this + 0x20) + 0xb0),param_1,param_2),
     puVar2 != (undefined8 *)0x0)) {
    uVar1 = insertSemaphoreWaitPollCommand(this,puVar2);
    return CONCAT71((int7)((ulong)uVar1 >> 8),1);
  }
  return 0;
}



// IGHardwareRingBuffer::getSerializeSubmissionSpace()

undefined8 __thiscall IGHardwareRingBuffer::getSerializeSubmissionSpace(IGHardwareRingBuffer *this)

{
  undefined8 uVar1;
  
  uVar1 = 4;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0x8000) {
    uVar1 = 10;
  }
  return uVar1;
}



// IGHardwareRingBuffer::serializeSubmission()

void __thiscall IGHardwareRingBuffer::serializeSubmission(IGHardwareRingBuffer *this)

{
  uint uVar1;
  ulong *puVar2;
  ulong local_48;
  undefined4 local_40;
  ulong local_38;
  undefined4 local_30;
  ulong local_28;
  ulong local_20;
  
  local_20 = *(long *)(this + 0x28) + (long)*(int *)(this + 0x38) * 0x40 & 0xfffffffffffc;
  local_28 = (CONCAT44(*(undefined4 *)
                        (*(long *)(this + 0x30) + 8 + (long)*(int *)(this + 0x38) * 0x40),
                       ~*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) << 0xe) &
             0xffffffff00400000) + 0xe009002;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) == 0x8000) {
    local_48 = (ulong)(*(uint *)(this + 0x5c) >> 2 & 0x1fffff) << 0x22 | 0x11000001;
    local_40 = 0x80000;
    puVar2 = &local_38;
    local_30 = 0x80008;
    local_38 = local_48;
    writeBuffer(this,(long)&local_48,3);
    writeBuffer(this,(long)&local_28,4);
    uVar1 = 3;
  }
  else {
    puVar2 = &local_28;
    uVar1 = 4;
  }
  writeBuffer(this,(long)puVar2,uVar1);
  return;
}



// IGHardwareRingBuffer::waitForSemaphore(unsigned int, unsigned int)

void __thiscall
IGHardwareRingBuffer::waitForSemaphore
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined4 param_10,uint param_11)

{
  undefined8 uVar1;
  undefined8 uVar2;
  uint uVar3;
  ulong uVar4;
  long local_48;
  char *local_40;
  char *local_38;
  undefined4 local_30;
  ulong local_2c;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  uVar3 = *(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) >> 8 & 1 ^ 1;
  uVar4 = (ulong)(*(int *)((long)this + 0x38) + 0x40) * 0x40 + *(long *)((long)this + 0x28);
  local_30 = (undefined4)((uVar4 & 0xfffffffffff8) >> 0x20);
  local_38 = (char *)(((ulong)uVar3 << 0x22) + ((uVar4 & 0xfffffff8) << 0x20) + 0x13004003);
  local_2c = CONCAT44(param_11,param_10) & 0xffffffffffff;
  local_40 = (char *)((ulong)param_11 * 0x40 + *(long *)((long)this + 0x28) & 0xfffffffffffc);
  local_48 = CONCAT44(param_10,uVar3 << 0x16) + 0xe009002;
  uVar1 = 0xd;
  if ((*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) & 0x18000) == 0x8000) {
    uVar1 = 0x13;
  }
  uVar2 = 9;
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    uVar2 = uVar1;
  }
  waitForSpace(param_1_00,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this,
               (uint)uVar2,uVar1,*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)),local_40,
               local_38);
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    serializeSubmission(this);
  }
  writeBuffer(this,(long)&local_38,5);
  writeBuffer(this,(long)&local_48,4);
  *(int *)((long)this + 0x4c) = *(int *)((long)this + 0x4c) + 1;
  if (*(long *)__got::___stack_chk_guard == local_20) {
                    // WARNING: Could not recover jumptable at 0x00041b67. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(long *)this + 0x138))(this);
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::getFlushSpace()

undefined8 IGHardwareRingBuffer::getFlushSpace(void)

{
  return 5;
}



// IGHardwareRingBuffer::writeFlush()

void __thiscall IGHardwareRingBuffer::writeFlush(IGHardwareRingBuffer *this)

{
  writeBuffer(this,0x1130f0,5);
  return;
}



// IGHardwareRingBuffer::getFlushTLBSpace()

int __thiscall IGHardwareRingBuffer::getFlushTLBSpace(IGHardwareRingBuffer *this)

{
  return (*(uint *)(*(long *)(this + 0x10) + 0xfe2) >> 0x1c & 1) * 5 + 5;
}



// IGHardwareRingBuffer::writeFlushTLB()

void __thiscall IGHardwareRingBuffer::writeFlushTLB(IGHardwareRingBuffer *this)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  uint uVar4;
  ulong local_48;
  undefined8 local_40;
  undefined4 local_38;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  local_48 = 0x413000003;
  local_38 = 0;
  local_40 = 0;
  uVar1 = *(uint *)(&DAT_000011c0 + *(long *)(this + 0x10));
  uVar2 = *(uint *)(*(long *)(this + 0x10) + 0xfe2);
  uVar3 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58))
  ;
  local_48 = (ulong)((uint)uVar3 & 0xfffffff8) << 0x20 | (ulong)((uVar1 >> 8 & 1) == 0) << 0x22;
  uVar1 = (uint)((ulong)uVar3 >> 0x20);
  uVar4 = uVar1 & 0xffff;
  if ((uVar2 >> 0x1c & 1) == 0) {
    local_48 = local_48 | 0x13044003;
  }
  else {
    local_48 = local_48 | 0x13004003;
    local_40 = CONCAT44(local_40._4_4_,uVar1) & 0xffffffff0000ffff;
    writeBuffer(this,(long)&local_48,5);
    local_40 = 0;
    local_38 = 0;
    local_48 = 0x413040003;
    uVar4 = 0;
  }
  local_40 = CONCAT44(local_40._4_4_,uVar4);
  writeBuffer(this,(long)&local_48,5);
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::writeBlockFenceMMIOTimestamp(unsigned long long)

void __thiscall
IGHardwareRingBuffer::writeBlockFenceMMIOTimestamp(IGHardwareRingBuffer *this,ulong param_1)

{
  undefined8 local_48;
  long local_40;
  undefined8 local_38;
  long local_30;
  undefined8 local_28;
  long local_20;
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  local_40 = (param_1 >> 2 & 0x3fffffffffff) << 2;
  local_48 = 0x235c12400002;
  local_30 = (param_1 + 4 >> 2 & 0x3fffffffffff) << 2;
  local_38 = 0x235812400002;
  local_28 = 0x235c12400002;
  local_20 = (param_1 + 8 >> 2 & 0x3fffffffffff) << 2;
  writeBuffer(this,(long)&local_48,0xc);
  if (*(long *)__got::___stack_chk_guard == local_10) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::sampleTimestamp(unsigned long long)

void __thiscall IGHardwareRingBuffer::sampleTimestamp(IGHardwareRingBuffer *this,ulong param_1)

{
  ulong local_88;
  long local_80;
  ulong local_78;
  long local_70;
  undefined8 local_68;
  long local_60;
  undefined8 local_58;
  long local_50;
  undefined8 local_48;
  long local_40;
  undefined8 local_38;
  long local_30;
  undefined8 local_28;
  long local_20;
  long local_18;
  
  local_18 = *(long *)__got::___stack_chk_guard;
  local_80 = (param_1 >> 2 & 0x3fffffffffff) << 2;
  local_88 = (ulong)(*(uint *)(&DAT_00127469 + (ulong)(byte)this[0x40] * 0x79) & 0x3fffffc) << 0x20
             | 0x12400002;
  if (_graphicsTracePointEnable != 0) {
    local_60 = (param_1 + 0x10 >> 2 & 0x3fffffffffff) << 2;
    local_68 = 0x291012400002;
    local_50 = (param_1 + 0x18 >> 2 & 0x3fffffffffff) << 2;
    local_58 = 0x280012400002;
    local_40 = (param_1 + 0x20 >> 2 & 0x3fffffffffff) * 4;
    local_48 = 0x283812400002;
    local_30 = (param_1 + 0x28 >> 2 & 0x3fffffffffff) * 4;
    local_38 = 0x284012400002;
    local_20 = (param_1 + 0x30 >> 2 & 0x3fffffffffff) * 4;
    local_28 = 0x91b812400002;
    local_78 = local_88;
    local_70 = local_80;
    writeBuffer(this,(long)&local_78,0x18);
  }
  writeBuffer(this,(long)&local_88,4);
  if (*(long *)__got::___stack_chk_guard == local_18) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::sampleTimestampHiLoHi(unsigned long long)

void __thiscall IGHardwareRingBuffer::sampleTimestampHiLoHi(IGHardwareRingBuffer *this,long param_1)

{
  ulong uVar1;
  ulong local_c8;
  long local_c0;
  ulong local_b8;
  long local_b0;
  ulong local_a8;
  long local_a0;
  ulong local_98;
  long local_90;
  ulong local_88;
  long local_80;
  ulong local_78;
  long local_70;
  undefined8 local_68;
  long local_60;
  undefined8 local_58;
  long local_50;
  undefined8 local_48;
  long local_40;
  undefined8 local_38;
  long local_30;
  undefined8 local_28;
  long local_20;
  long local_18;
  
  local_18 = *(long *)__got::___stack_chk_guard;
  uVar1 = param_1 + 8U >> 2;
  local_c0 = (uVar1 - 1 & 0x3fffffffffff) << 2;
  local_c8 = (ulong)(*(uint *)(&DAT_00127469 + (ulong)(byte)this[0x40] * 0x79) + 4 >> 2 & 0xffffff)
             << 0x22 | 0x12400002;
  local_b8 = (ulong)(*(uint *)(&DAT_00127469 + (ulong)(byte)this[0x40] * 0x79) & 0x3fffffc) << 0x20
             | 0x12400002;
  local_b0 = (uVar1 & 0x3fffffffffff) << 2;
  local_a0 = (uVar1 + 1 & 0x3fffffffffff) << 2;
  local_a8 = local_c8;
  if (_graphicsTracePointEnable != 0) {
    local_60 = (param_1 + 0x14U >> 2 & 0x3fffffffffff) << 2;
    local_68 = 0x291012400002;
    local_50 = (param_1 + 0x1cU >> 2 & 0x3fffffffffff) << 2;
    local_58 = 0x280012400002;
    local_40 = (param_1 + 0x24U >> 2 & 0x3fffffffffff) << 2;
    local_48 = 0x283812400002;
    local_30 = (param_1 + 0x2cU >> 2 & 0x3fffffffffff) << 2;
    local_38 = 0x284012400002;
    local_20 = (param_1 + 0x34U >> 2 & 0x3fffffffffff) << 2;
    local_28 = 0x91b812400002;
    local_98 = local_c8;
    local_90 = local_c0;
    local_88 = local_b8;
    local_80 = local_b0;
    local_78 = local_c8;
    local_70 = local_a0;
    writeBuffer(this,(long)&local_98,0x20);
  }
  writeBuffer(this,(long)&local_c8,0xc);
  if (*(long *)__got::___stack_chk_guard == local_18) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBuffer::submitBatchBuffer(unsigned long long, unsigned int, unsigned int*, unsigned
// int, bool, bool)

undefined8 __cdecl
IGHardwareRingBuffer::submitBatchBuffer
          (IGHardwareRingBuffer *param_1,undefined8 param_2,undefined4 param_3,undefined8 param_4,
          undefined4 param_5)

{
  uint uVar1;
  long lVar2;
  undefined8 uVar3;
  ulong local_28;
  undefined4 local_20;
  
  uVar1 = *(uint *)(param_1 + 0x8a0);
  lVar2 = (ulong)uVar1 * 0x20;
  *(undefined4 *)(param_1 + lVar2 + 0xa0) = param_3;
  *(undefined8 *)(param_1 + lVar2 + 0xb0) = param_4;
  *(undefined8 *)(param_1 + lVar2 + 0xa8) = param_2;
  *(undefined4 *)(param_1 + lVar2 + 0xb8) = param_5;
  *(uint *)(param_1 + 0x8a0) = uVar1 + 1 & 0x3f;
  lVar2 = *(long *)(param_1 + 0x10);
  if ((*(byte *)(*(long *)(&DAT_00001280 + lVar2) + 0xc) & 0x10) != 0) {
    serializeSubmission(param_1);
    lVar2 = *(long *)(param_1 + 0x10);
  }
  uVar1 = 0x18800001;
  if (((&DAT_000011c1)[lVar2] & 1) != 0) {
    uVar1 = (~(uint)*(ushort *)(*(long *)(param_1 + 0x20) + 0x6e) & 2) << 7 | 0x18800001;
  }
  local_28 = CONCAT44((int)param_2,uVar1) & 0xfffffffcffffffff;
  local_20 = (undefined4)((ulong)param_2 >> 0x20);
  writeBuffer(param_1,(long)&local_28,3);
  uVar3 = writeDWord(param_1,0);
  return CONCAT71((int7)((ulong)uVar3 >> 8),1);
}



// IGHardwareRingBuffer::addRingResources(unsigned int, unsigned int*, unsigned long long, unsigned
// int)

void __thiscall
IGHardwareRingBuffer::addRingResources
          (IGHardwareRingBuffer *this,undefined4 param_1,undefined8 param_2,undefined8 param_3,
          undefined4 param_4)

{
  uint uVar1;
  long lVar2;
  
  uVar1 = *(uint *)(this + 0x8a0);
  lVar2 = (ulong)uVar1 * 0x20;
  *(undefined4 *)(this + lVar2 + 0xa0) = param_1;
  *(undefined8 *)(this + lVar2 + 0xb0) = param_2;
  *(undefined8 *)(this + lVar2 + 0xa8) = param_3;
  *(undefined4 *)(this + lVar2 + 0xb8) = param_4;
  *(uint *)(this + 0x8a0) = uVar1 + 1 & 0x3f;
  return;
}



// IGHardwareRingBuffer::submitCommands(unsigned int*, unsigned int, unsigned int)

undefined8 __thiscall
IGHardwareRingBuffer::submitCommands
          (IGHardwareRingBuffer *this,long param_1,uint param_2,undefined4 param_3)

{
  undefined8 uVar1;
  
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
    serializeSubmission(this);
  }
  writeBuffer(this,param_1,param_2);
  uVar1 = (**(code **)(*(long *)this + 0x160))(this,param_3,1);
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IGHardwareRingBuffer::getSubmitCommandSpace()

ulong __thiscall IGHardwareRingBuffer::getSubmitCommandSpace(IGHardwareRingBuffer *this)

{
  int iVar1;
  ulong uVar2;
  
  uVar2 = (**(code **)(*(long *)this + 0x148))();
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
    iVar1 = (int)uVar2;
    uVar2 = (ulong)(iVar1 + 10);
    if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0x8000) {
      uVar2 = (ulong)(iVar1 + 4);
    }
  }
  return uVar2;
}



// IGHardwareRingBuffer::submitStamp(unsigned int)

undefined8 __thiscall
IGHardwareRingBuffer::submitStamp(IGHardwareRingBuffer *this,undefined4 param_1)

{
  undefined8 uVar1;
  
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
    serializeSubmission(this);
  }
  uVar1 = (**(code **)(*(long *)this + 0x160))(this,param_1,1);
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IGHardwareRingBuffer::getSubmitStampSpace()

ulong __thiscall IGHardwareRingBuffer::getSubmitStampSpace(IGHardwareRingBuffer *this)

{
  int iVar1;
  ulong uVar2;
  
  uVar2 = (**(code **)(*(long *)this + 0x148))();
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
    iVar1 = (int)uVar2;
    uVar2 = (ulong)(iVar1 + 10);
    if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0x8000) {
      uVar2 = (ulong)(iVar1 + 4);
    }
  }
  return uVar2;
}



// IGHardwareRingBuffer::patchFrequencyRequest(unsigned int, unsigned int)

void __thiscall
IGHardwareRingBuffer::patchFrequencyRequest
          (IGHardwareRingBuffer *this,uint param_1,undefined4 param_2)

{
  long lVar1;
  long lVar2;
  undefined8 local_20;
  undefined4 local_18;
  
  local_20 = 0xa00811000001;
  local_18 = param_2;
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80));
  lVar2 = 0;
  do {
    *(undefined4 *)((ulong)param_1 + lVar1 + lVar2 * 4) =
         *(undefined4 *)((long)&local_20 + lVar2 * 4);
    lVar2 = lVar2 + 1;
  } while (lVar2 != 3);
  return;
}



// IGHardwareRingBuffer::setStampIndex(int)

void __thiscall IGHardwareRingBuffer::setStampIndex(IGHardwareRingBuffer *this,undefined4 param_1)

{
  *(undefined4 *)(this + 0x38) = param_1;
  return;
}



// IGHardwareRingBuffer::resetRing()

void __thiscall IGHardwareRingBuffer::resetRing(IGHardwareRingBuffer *this)

{
  undefined8 uVar1;
  
  *(undefined8 *)(this + 0x60) = 0;
  *(undefined4 *)(this + 0x68) = 0;
  *(int *)(this + 0x88) = *(int *)(this + 0x8c) + -8;
  this[0x6c] = (IGHardwareRingBuffer)0x0;
  *(undefined4 *)(*(long *)(this + 0x18) + 0x10) = 0;
  uVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x80));
  ___bzero(uVar1,*(undefined4 *)(this + 0x8c));
  return;
}



// IGHardwareRingBuffer::resubmitStampToRing(unsigned int, unsigned int*)

void __thiscall
IGHardwareRingBuffer::resubmitStampToRing
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined4 param_10,uint *param_11,undefined8 param_12,char *param_13,char *param_14)

{
  uint uVar1;
  undefined8 extraout_RDX;
  undefined4 uVar2;
  undefined8 extraout_XMM0_Qa;
  
  uVar1 = (**(code **)(*(long *)this + 0x148))();
  waitForSpace(extraout_XMM0_Qa,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this,
               uVar1,extraout_RDX,param_12,param_13,param_14);
  (**(code **)(*(long *)this + 0x140))(this,param_10,1);
  uVar2 = 0x3800000;
  while( true ) {
    writeDWord(this,uVar2);
    if ((*(uint *)((long)this + 100) & 7) == 0) break;
    uVar2 = 0;
  }
  *(undefined1 *)((long)this + 0x6c) = 0;
  *param_11 = *(uint *)((long)this + 100);
  return;
}



// IGHardwareRingBuffer::submitToRing()

void __thiscall IGHardwareRingBuffer::submitToRing(IGHardwareRingBuffer *this)

{
  IGHardwareRingBuffer IVar1;
  uint uVar2;
  char cVar3;
  long lVar4;
  long lVar5;
  undefined4 uVar6;
  
  lVar4 = IGHardwareContext::getConfigSerial(*(IGHardwareContext **)(this + 0x20));
  lVar5 = *(long *)(*(long *)(*(long *)(this + 0x10) + 0xf18) + 0x268);
  if (lVar4 != lVar5) {
    if (this[0x40] == (IGHardwareRingBuffer)0x0) {
      lVar5 = IGSharedMappedBuffer::getVirtualAddress
                        (*(IGSharedMappedBuffer **)(*(long *)(this + 0x20) + 0x98));
      IGTelemetryManager::patchContextImageRCS
                (*(IGTelemetryManager **)(*(long *)(this + 0x10) + 0xf18),lVar5);
      lVar5 = *(long *)(*(long *)(*(long *)(this + 0x10) + 0xf18) + 0x268);
    }
    IGHardwareContext::setConfigSerial(*(IGHardwareContext **)(this + 0x20),lVar5);
  }
  uVar6 = 0x3800000;
  while( true ) {
    writeDWord(this,uVar6);
    if (((byte)this[100] & 7) == 0) break;
    uVar6 = 0;
  }
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00028,(ulong)(byte)this[0x40],(ulong)(byte)this[0x48],
                    (ulong)*(uint *)(this + 0x44),1,0);
    }
  }
  IVar1 = this[0x48];
  if (IVar1 != (IGHardwareRingBuffer)0x0) {
    uVar2 = *(uint *)(*(long *)(this + 0x30) + (long)*(int *)(this + 0x38) * 0x40);
    if (_graphicsTracePointEnable != 0) {
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a0001c,(ulong)(*(uint *)(this + 0x44) - uVar2),(ulong)(byte)this[0x40],
                      (ulong)uVar2,(ulong)*(uint *)(this + 0x44),0);
      }
    }
  }
  dtHookSubmitToRing();
  this[0x48] = (IGHardwareRingBuffer)0x0;
  cVar3 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x148))
                    (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),*(undefined8 *)(this + 0x20)
                     ,*(undefined4 *)(this + 100),*(undefined4 *)(this + 0x68),IVar1,
                     0 < *(int *)(this + 0x4c));
  if (cVar3 == '\0') {
    submitToRing();
  }
  else {
    *(undefined4 *)(this + 0x4c) = 0;
    this[0x6c] = (IGHardwareRingBuffer)0x0;
  }
  return;
}



// IGHardwareRingBuffer::getUtilizationData(IGHardwareContextUtilizationData*) const

void __thiscall
IGHardwareRingBuffer::getUtilizationData(IGHardwareRingBuffer *this,undefined8 *param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(this + 0x18);
  *param_1 = *(undefined8 *)(lVar1 + 0x48);
  param_1[1] = *(undefined8 *)(lVar1 + 0x50);
  param_1[2] = *(undefined8 *)(lVar1 + 0x58);
  *(undefined4 *)(param_1 + 3) = *(undefined4 *)(lVar1 + 0x40);
  return;
}



// IGHardwareRingBuffer::describeDriverAllocations(IOAccelAllocationInfo*, char const*, int)

void IGHardwareRingBuffer::describeDriverAllocations(void)

{
  return;
}



// IGHardwareRingBuffer::clearEventWait()

undefined8 __thiscall IGHardwareRingBuffer::clearEventWait(IGHardwareRingBuffer *this)

{
  *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + (ulong)*(uint *)(this + 0x58)) =
       *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 8) & 0xfffff3ff | 0x800;
  return CONCAT71((int7)((ulong)*(long *)(this + 0x50) >> 8),
                  (*(uint *)((ulong)*(uint *)(this + 0x58) + *(long *)(this + 0x50)) >> 0xb & 1) ==
                  0);
}



// IGHardwareRingBuffer::clearSemaphoreWait()

undefined8 __thiscall IGHardwareRingBuffer::clearSemaphoreWait(IGHardwareRingBuffer *this)

{
  *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + (ulong)*(uint *)(this + 0x58)) =
       *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 8) & 0xfffff3ff | 0x400;
  return CONCAT71((int7)((ulong)*(long *)(this + 0x50) >> 8),
                  (*(uint *)((ulong)*(uint *)(this + 0x58) + *(long *)(this + 0x50)) >> 10 & 1) == 0
                 );
}



// IGHardwareRingBuffer::doSchedulerReset(IGHardwareContext*)

void __thiscall
IGHardwareRingBuffer::doSchedulerReset(IGHardwareRingBuffer *this,undefined8 param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  
  UNRECOVERED_JUMPTABLE = *(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 400);
                    // WARNING: Could not recover jumptable at 0x000427a8. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)
            (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),this[0x40],param_1,
             UNRECOVERED_JUMPTABLE);
  return;
}



// IGHardwareRingBuffer::resetGraphicsEngine(IGHardwareContext*)

ulong __thiscall
IGHardwareRingBuffer::resetGraphicsEngine(IGHardwareRingBuffer *this,undefined8 param_1)

{
  uint uVar1;
  long *plVar2;
  long lVar3;
  char cVar4;
  uint uVar5;
  char *pcVar6;
  long lVar7;
  undefined4 *puVar8;
  ulong uVar9;
  IntelAccelerator *this_00;
  long lVar10;
  
  cVar4 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x158))
                    (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),0);
  if (cVar4 != '\0') {
    pcVar6 = IGScheduler::schedulerName
                       ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x16) & 7);
    _IOLog("[IGPU] Scheduler (%s) is HUNG\n",pcVar6);
    pcVar6 = IGScheduler::schedulerName
                       ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x16) & 7);
    _kprintf("[IGPU] Scheduler (%s) is HUNG\n",pcVar6);
  }
  this_00 = *(IntelAccelerator **)(this + 0x10);
  if (((byte)this_00[0x11c2] & 2) != 0) {
    _PE_enter_debugger("***  IG_DEBUG_GPU_HANG is enabled: calling debugger ***\n");
    this_00 = *(IntelAccelerator **)(this + 0x10);
  }
  IntelAccelerator::SafeForceWake(this_00,1,7);
  lVar7 = *(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8);
  if ((*(uint *)(lVar7 + 0xac) & 8) == 0) {
    if (((*(uint *)(lVar7 + 0xac) & 4) == 0) ||
       (*(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + (ulong)*(uint *)(this + 0x58))
             = *(uint *)(lVar7 + 8) & 0xfffff3ff | 0x400,
       (*(uint *)((ulong)*(uint *)(this + 0x58) + *(long *)(this + 0x50)) >> 10 & 1) != 0)) {
LAB_0004292f:
      plVar2 = *(long **)(this + 0x78);
      if (plVar2 == (long *)0x0) {
        uVar9 = 0;
        IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
        goto LAB_00042a84;
      }
      lVar7 = *plVar2;
      if (lVar7 == 0) {
        lVar10 = *(long *)(this + 0x50);
      }
      else {
        lVar10 = *(long *)(this + 0x50);
        puVar8 = (undefined4 *)(plVar2[2] + 4);
        do {
          *puVar8 = *(undefined4 *)((ulong)(uint)puVar8[-1] + lVar10);
          puVar8 = puVar8 + 9;
          lVar7 = lVar7 + -1;
        } while (lVar7 != 0);
      }
      *(undefined4 *)(lVar10 + 0x4a08) = 0x40004;
      *(undefined4 *)(lVar10 + 0x941c) = *(undefined4 *)(this + 0x70);
      do {
        lVar7 = *(long *)(this + 0x50);
        uVar1 = *(uint *)(lVar7 + 0x941c);
        if ((*(uint *)(lVar7 + 0x4094) & 1) != 0) {
          *(undefined4 *)(lVar7 + 0x4100) = 0xf0f0b1b1;
          *(undefined4 *)(lVar7 + 0x4104) = 0xf0f0b2b2;
          *(uint *)(lVar7 + 0x4094) = *(uint *)(lVar7 + 0x4094) & 0xfffffffe;
        }
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,10,1000);
        _thread_block(0);
      } while ((*(uint *)(this + 0x70) & uVar1 & 0xff) != 0);
      *(undefined4 *)(*(long *)(this + 0x50) + 0x4a08) = 0x40000;
      plVar2 = *(long **)(this + 0x78);
      lVar7 = *plVar2;
      if (lVar7 != 0) {
        lVar10 = 0;
        do {
          lVar3 = plVar2[2];
          uVar1 = *(uint *)(lVar3 + 4 + lVar10);
          uVar5 = IntelAccelerator::getDefaultResetValue
                            (*(IntelAccelerator **)(this + 0x10),*(int *)(lVar3 + lVar10));
          if (uVar5 != 0) {
            uVar1 = uVar5;
          }
          uVar5 = uVar1 | 0xffff0000;
          if (*(char *)(lVar3 + 8 + lVar10) == '\0') {
            uVar5 = uVar1;
          }
          *(uint *)((ulong)*(uint *)(lVar3 + lVar10) + *(long *)(this + 0x50)) = uVar5;
          lVar10 = lVar10 + 0x24;
          lVar7 = lVar7 + -1;
        } while (lVar7 != 0);
      }
      (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 400))
                (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),this[0x40],param_1);
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
    }
    else {
      _IOSleep(1);
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0);
      *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 0xac) =
           *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 0xac) & 0xfffffffb;
    }
  }
  else {
    *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + (ulong)*(uint *)(this + 0x58)) =
         *(uint *)(lVar7 + 8) & 0xfffff3ff | 0x800;
    if ((*(uint *)((ulong)*(uint *)(this + 0x58) + *(long *)(this + 0x50)) >> 0xb & 1) != 0)
    goto LAB_0004292f;
    _IOSleep(1);
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
    *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 0xac) =
         *(uint *)(*(long *)(this + (ulong)(byte)this[0x40] * 8 + 0x8b8) + 0xac) & 0xfffffff7;
  }
  uVar9 = CONCAT71((int7)((ulong)this >> 8),1);
LAB_00042a84:
  return uVar9 & 0xffffffff;
}



// IGHardwareRingBuffer::debugGraphicsEngine()

void __thiscall
IGHardwareRingBuffer::debugGraphicsEngine
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  doHangAnalysis(this);
  dumpHangAnalysis(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                   param_10,extraout_RDX,param_12,param_13,param_14);
  IOAccelEventMachine2::signalHardwareError
            (*(undefined8 *)(*(long *)((long)this + 0x10) + 0x380),1,
             *(undefined4 *)(*(long *)(*(long *)((long)this + 0x20) + 0xb0) + 0x20));
  return;
}



// IGHardwareRingBuffer::doHangAnalysis()

undefined8 __thiscall IGHardwareRingBuffer::doHangAnalysis(IGHardwareRingBuffer *this)

{
  char cVar1;
  char *pcVar2;
  undefined8 uVar3;
  ulong uVar4;
  IntelAccelerator *this_00;
  ulong uVar5;
  long lVar6;
  
  cVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x158))
                    (*(long **)(&DAT_00001280 + *(long *)(this + 0x10)),0);
  if (cVar1 != '\0') {
    pcVar2 = IGScheduler::schedulerName
                       ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x16) & 7);
    _IOLog("[IGPU] Scheduler (%s) is HUNG\n",pcVar2);
    pcVar2 = IGScheduler::schedulerName
                       ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x16) & 7);
    _kprintf("[IGPU] Scheduler (%s) is HUNG\n",pcVar2);
  }
  this_00 = *(IntelAccelerator **)(this + 0x10);
  uVar5 = *(ulong *)(this_00 + 0x1340);
  if (uVar5 != 0) {
    lVar6 = 0;
    if (uVar5 != 0) {
      for (; (uVar5 >> lVar6 & 1) == 0; lVar6 = lVar6 + 1) {
      }
    }
    do {
      uVar5 = lVar6 + 1;
      uVar3 = IntelAccelerator::gatherKeyRingData
                        (*(IntelAccelerator **)(this + 0x10),(int)uVar5 - 1U & 0xff);
      if ((char)uVar3 != '\0') {
        checkEngineStatus(this,*(uint **)(this + uVar5 * 8 + 0x8b0));
      }
      if (4 < uVar5) break;
      uVar4 = (*(ulong *)(this_00 + (long)(&DAT_00001340 + (uVar5 >> 6) * 8)) >>
              ((byte)uVar5 & 0x3f)) << ((byte)uVar5 & 0x3f);
      lVar6 = 0;
      if (uVar4 != 0) {
        for (; (uVar4 >> lVar6 & 1) == 0; lVar6 = lVar6 + 1) {
        }
      }
      lVar6 = (uVar5 & 0xffffffffffffffc0) + lVar6;
    } while (uVar4 != 0);
    this_00 = *(IntelAccelerator **)(this + 0x10);
  }
  IntelAccelerator::SafeForceWake(this_00,1,7);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
  return 2;
}



// IGHardwareRingBuffer::dumpHangAnalysis()

undefined8 __thiscall
IGHardwareRingBuffer::dumpHangAnalysis
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  char *pcVar1;
  long lVar2;
  char *pcVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  char *pcVar5;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  undefined8 extraout_RDX_13;
  undefined8 extraout_RDX_14;
  undefined8 extraout_RDX_15;
  undefined8 extraout_RDX_16;
  undefined8 extraout_RDX_17;
  undefined8 extraout_RDX_18;
  undefined8 extraout_RDX_19;
  undefined8 extraout_RDX_20;
  undefined8 extraout_RDX_21;
  uint uVar6;
  char *pcVar7;
  int iVar8;
  uint uVar9;
  undefined8 uVar10;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar11;
  long local_48;
  char *local_40;
  long local_38;
  
  lVar2 = *(long *)((long)this + 0x8a8);
  if (lVar2 == 0) {
    lVar2 = _IOMallocZeroData(0x10000);
    *(long *)((long)this + 0x8a8) = lVar2;
    if (lVar2 == 0) {
      return 0;
    }
  }
  uVar10 = ___bzero(lVar2,0x10000);
  *(undefined4 *)((long)this + 0x8b0) = 0x10000;
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "\n===========================================================================\n"
                     ,extraout_RDX,param_12,param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "                         Intel GPU Hang Summary\n",extraout_RDX_00,param_12,
                     param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "                              version 1.2.0\n",extraout_RDX_01,param_12,
                     param_13,param_14);
  drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "===========================================================================\n",
            extraout_RDX_02,param_12,param_13,param_14);
  pcVar3 = IGScheduler::schedulerName
                     ((byte)(*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) >> 0x16) & 7);
  uVar10 = drvErrLog(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)this,"  Scheduler: %s",pcVar3,param_12,param_13,param_14);
  pcVar3 = (char *)(ulong)(*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) & 0x18000);
  pcVar5 = "Multiple channels per index";
  if ((*(uint *)(&DAT_000011c0 + *(long *)((long)this + 0x10)) & 0x18000) == 0x8000) {
    pcVar5 = "Single channel index";
  }
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "%s\n",pcVar5,pcVar3,param_13,param_14);
  pcVar5 = "\n  Processing hang for hardware context ID[%u]\n";
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "\n  Processing hang for hardware context ID[%u]\n",
                     (ulong)*(uint *)(*(long *)((long)this + 0x20) + 0x7c),pcVar3,param_13,param_14)
  ;
  uVar10 = dumpRingStatus(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar5
                          ,extraout_RDX_03,pcVar3,param_13,(ulong)param_14);
  uVar10 = dumpStampInfo(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar5,
                         extraout_RDX_04,(ulong)pcVar3,(ulong)param_13,param_14);
  uVar10 = dumpSchedStatus(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                           pcVar5,extraout_RDX_05,(ulong)pcVar3,param_13,param_14);
  getRingResources(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,&local_48,
                   extraout_RDX_06,pcVar3,param_13,param_14);
  local_38 = *(long *)((long)this + 0x10);
  uVar4 = *(ulong *)(&DAT_00001340 + local_38);
  uVar10 = extraout_RDX_07;
  uVar11 = extraout_XMM0_Qa_00;
  if (uVar4 != 0) {
    pcVar5 = (char *)0x0;
    if (uVar4 != 0) {
      for (; (uVar4 >> (long)pcVar5 & 1) == 0; pcVar5 = pcVar5 + 1) {
      }
    }
    do {
      pcVar7 = pcVar5 + 1;
      if ((pcVar5 == (char *)(ulong)*(byte *)((long)this + 0x40)) ||
         ((*(uint *)(*(long *)((long)this + (long)pcVar7 * 8 + 0x8b0) + 0xac) & 0xe) == 2)) {
        uVar10 = drvErrLog(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,
                           "===========================================================================\n"
                           ,uVar10,pcVar3,param_13,param_14);
        pcVar3 = "";
        local_40 = pcVar5;
        uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"                 Details for Hung/Stuck ring: %s \n",
                           *(undefined8 *)((long)&PTR_s_RCS_00127425 + (long)pcVar5 * 0x79),
                           &kIGHwCsDesc,param_13,param_14);
        uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,
                           "===========================================================================\n"
                           ,extraout_RDX_08,pcVar3,param_13,param_14);
        uVar11 = dumpInstDoneStatus(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    this,*(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),
                                    extraout_RDX_09,pcVar3,param_13,param_14);
        uVar10 = extraout_RDX_10;
        if (*(int *)(&DAT_00001190 + *(long *)((long)this + 0x10)) != 0) {
          uVar6 = 0;
          do {
            uVar10 = drvErrLog(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)this,"\n",uVar10,pcVar3,param_13,param_14);
            uVar11 = dumpInstDone2Status(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,this,
                                         *(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),uVar6,
                                         pcVar3,param_13,param_14);
            pcVar5 = pcVar3;
            uVar10 = extraout_RDX_11;
            pcVar1 = (char *)0x0;
            do {
              pcVar3 = pcVar1;
              uVar10 = drvErrLog(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long)this,"\n",uVar10,pcVar5,param_13,param_14);
              iVar8 = (int)pcVar3;
              uVar10 = dumpInstDone3Status(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                           param_8,this,
                                           *(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),uVar6,
                                           (ulong)pcVar3,param_13,param_14);
              uVar11 = dumpInstDone4Status(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                           param_8,this,
                                           *(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),uVar6,
                                           iVar8,param_13,param_14);
              uVar9 = iVar8 + 1;
              pcVar5 = pcVar3;
              uVar10 = extraout_RDX_12;
              pcVar1 = (char *)(ulong)uVar9;
            } while (uVar9 != 8);
            uVar6 = uVar6 + 1;
          } while (uVar6 < *(uint *)(&DAT_00001190 + *(long *)((long)this + 0x10)));
        }
        uVar10 = dumpExecutionListStatus
                           (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                            *(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),uVar10,(ulong)pcVar3,
                            param_13,param_14);
        uVar11 = dumpPageTableStatus(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     this,*(long *)((long)this + (long)pcVar7 * 8 + 0x8b0),
                                     extraout_RDX_13,pcVar3,param_13,param_14);
        uVar10 = extraout_RDX_14;
        if (local_40 == (char *)(ulong)*(byte *)((long)this + 0x40)) {
          uVar11 = dumpRingBuffer(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  this,*(uint **)((long)this + (long)pcVar7 * 8 + 0x8b0),
                                  extraout_RDX_14,pcVar3,param_13,param_14);
          uVar10 = extraout_RDX_15;
        }
      }
      if (&MACH_HEADER.cputype < pcVar7) break;
      uVar4 = (*(ulong *)(&DAT_00001340 + ((ulong)pcVar7 >> 6) * 8 + local_38) >>
              ((byte)pcVar7 & 0x3f)) << ((byte)pcVar7 & 0x3f);
      pcVar3 = (char *)0x0;
      if (uVar4 != 0) {
        for (; (uVar4 >> (long)pcVar3 & 1) == 0; pcVar3 = pcVar3 + 1) {
        }
      }
      pcVar5 = pcVar3 + ((ulong)pcVar7 & 0xffffffffffffffc0);
    } while (uVar4 != 0);
  }
  pcVar5 = "* Ring buffer dumps disabled.  Use DEBUG_DUMP_RINGS to enable.\n\n";
  uVar10 = drvErrLog(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "* Ring buffer dumps disabled.  Use DEBUG_DUMP_RINGS to enable.\n\n",uVar10,
                     pcVar3,param_13,param_14);
  uVar10 = dumpRegisters(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar5,
                         extraout_RDX_16,pcVar3,param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "\n\n",extraout_RDX_17,pcVar3,param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "===========================================================================\n"
                     ,extraout_RDX_18,pcVar3,param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "                            End Hang Analysis\n",extraout_RDX_19,pcVar3,
                     param_13,param_14);
  uVar10 = drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "===========================================================================\n"
                     ,extraout_RDX_20,pcVar3,param_13,param_14);
  drvErrLog(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n\n",
            extraout_RDX_21,pcVar3,param_13,param_14);
  return *(undefined8 *)((long)this + 0x8a8);
}



// IGHardwareRingBuffer::checkEngineStatus(debugRegisters&)

void __thiscall IGHardwareRingBuffer::checkEngineStatus(IGHardwareRingBuffer *this,uint *param_1)

{
  uint uVar1;
  IGHardwareRingBuffer *this_00;
  
  this_00 = this;
  checkRingRegs(this,param_1);
  checkBatchRegs(this_00,(long)param_1);
  checkInstRegs(this_00,(long)param_1);
  uVar1 = *(uint *)(*(long *)(this + 0x50) + 0x4094);
  *(uint *)((long)param_1 + 0x9d) = uVar1;
  if ((uVar1 & 1) != 0) {
    *(byte *)(param_1 + 0x2b) = (byte)param_1[0x2b] | 0x20;
  }
  return;
}



// IGHardwareRingBuffer::generateHangSig()

undefined8 __thiscall IGHardwareRingBuffer::generateHangSig(IGHardwareRingBuffer *this)

{
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,7);
  return 2;
}



// IGHardwareRingBuffer::checkInstRegs(debugRegisters&)

void __thiscall IGHardwareRingBuffer::checkInstRegs(IGHardwareRingBuffer *this,long param_1)

{
  uint uVar1;
  
  uVar1 = (uint)(*(int *)(param_1 + 0x48) == -1) << 0xb |
          (uint)(*(int *)(param_1 + 0x28) == -1) << 10 |
          (uint)(*(int *)(param_1 + 0x24) == -1) << 9 |
          *(uint *)(param_1 + 0xac) & 0xfffff0ff | (uint)(*(int *)(param_1 + 0x20) == -1) << 8;
  *(uint *)(param_1 + 0xac) = uVar1;
  if (*(int *)(param_1 + 0x84) == -0x1124111) {
    *(uint *)(param_1 + 0xac) = uVar1 | 0x40;
  }
  return;
}



// IGHardwareRingBuffer::checkBatchRegs(debugRegisters&)

void __thiscall IGHardwareRingBuffer::checkBatchRegs(IGHardwareRingBuffer *this,long param_1)

{
  if ((*(ulong *)(param_1 + 0x78) & 1) != 0) {
    *(byte *)(param_1 + 0xac) = *(byte *)(param_1 + 0xac) | 0x10;
  }
  if ((*(ulong *)(param_1 + 0x78) & 0xffffffff00000002) != 0) {
    *(byte *)(param_1 + 0xae) = *(byte *)(param_1 + 0xae) | 1;
  }
  if ((*(uint *)(param_1 + 0x80) & 0xffffffdf) != 0) {
    *(byte *)(param_1 + 0xae) = *(byte *)(param_1 + 0xae) | 2;
  }
  return;
}



// IGHardwareRingBuffer::checkRingRegs(debugRegisters&)

void __thiscall IGHardwareRingBuffer::checkRingRegs(IGHardwareRingBuffer *this,uint *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  uVar5 = (param_1[0x2b] & 0xfffffffd) +
          (uint)((*param_1 & 0x1ffffc) != (param_1[1] & 0x1ffff8)) * 2;
  param_1[0x2b] = uVar5;
  uVar1 = param_1[2];
  uVar5 = uVar1 >> 8 & 0xc | uVar1 & 1 | uVar5;
  uVar4 = *param_1 & 3;
  uVar2 = uVar5 | 0x1000;
  if (uVar4 == 0) {
    uVar2 = uVar5;
  }
  uVar3 = param_1[1] & 0xffe00007;
  uVar5 = uVar2 | 0x2000;
  if (uVar3 == 0) {
    uVar5 = uVar2;
  }
  uVar2 = uVar5 | 0x4000;
  if ((uVar1 & 0x3f8) == 0) {
    uVar2 = uVar5;
  }
  if ((uVar1 & 0x3f8) != 0 || (uVar3 != 0 || (uVar4 != 0 || (uVar1 & 0xc01) != 0))) {
    param_1[0x2b] = uVar2;
  }
  if ((param_1[3] & 0xfff) != 0) {
    param_1[0x2b] = uVar2 | 0x8000;
  }
  return;
}



// IGHardwareRingBuffer::checkExecListRegs(debugRegisters&)

void IGHardwareRingBuffer::checkExecListRegs(void)

{
  return;
}



// IGHardwareRingBuffer::checkPageFault(debugRegisters&)

void __thiscall IGHardwareRingBuffer::checkPageFault(IGHardwareRingBuffer *this,long param_1)

{
  uint uVar1;
  
  uVar1 = *(uint *)(*(long *)(this + 0x50) + 0x4094);
  *(uint *)(param_1 + 0x9d) = uVar1;
  if ((uVar1 & 1) != 0) {
    *(byte *)(param_1 + 0xac) = *(byte *)(param_1 + 0xac) | 0x20;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IGHardwareRingBuffer::drvErrLog(char const*, ...)

void __cdecl
IGHardwareRingBuffer::drvErrLog
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long param_9,
          char *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14,...)

{
  char in_AL;
  int iVar1;
  long lVar2;
  int iVar3;
  undefined1 local_198 [16];
  undefined8 local_188;
  undefined8 local_180;
  undefined8 local_178;
  undefined8 local_170;
  undefined8 local_168;
  undefined8 local_158;
  undefined8 local_148;
  undefined8 local_138;
  undefined8 local_128;
  undefined8 local_118;
  undefined8 local_108;
  undefined8 local_f8;
  undefined8 local_e8;
  undefined1 *local_e0;
  undefined1 *local_d8;
  char local_c8 [152];
  long local_30;
  
  if (in_AL != '\0') {
    local_168 = param_1_00;
    local_158 = param_2;
    local_148 = param_3;
    local_138 = param_4;
    local_128 = param_5;
    local_118 = param_6;
    local_108 = param_7;
    local_f8 = param_8;
  }
  local_30 = *(long *)__got::___stack_chk_guard;
  local_188 = param_11;
  local_180 = param_12;
  local_178 = param_13;
  local_170 = param_14;
  ___bzero(local_c8,0x96);
  local_e8 = 0x3000000010;
  local_e0 = &stack0x00000008;
  local_d8 = local_198;
  _vsnprintf(local_c8,0x96,param_10,&local_e8);
  iVar1 = *(int *)(param_9 + 0x8b0);
  if (iVar1 != 0) {
    lVar2 = *(long *)(param_9 + 0x8a8);
    if (lVar2 == 0) {
      lVar2 = _IOMallocZeroData(0x10000);
      *(long *)(param_9 + 0x8a8) = lVar2;
      if (lVar2 == 0) goto LAB_0004329d;
      iVar1 = *(int *)(param_9 + 0x8b0);
    }
    iVar1 = _snprintf((char *)((lVar2 - iVar1) + 0x10000),(long)iVar1,"%s",local_c8);
    iVar3 = *(int *)(param_9 + 0x8b0) - iVar1;
    if (*(int *)(param_9 + 0x8b0) < iVar1) {
      iVar3 = 0;
    }
    *(int *)(param_9 + 0x8b0) = iVar3;
    if (drvErrLog(char_const*,...)::fullWarning <
        (int)((ulong)((0x10000 - (long)iVar3) * 100) >> 0x10)) {
      drvErrLog(char_const*,...)::fullWarning =
           drvErrLog(char_const*,...)::fullWarning +
           (uint)(4 < drvErrLog(char_const*,...)::fullWarning - 0x5fU) * 4 + 1;
    }
  }
LAB_0004329d:
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBuffer::checkHangLogMemory()

undefined8 __thiscall IGHardwareRingBuffer::checkHangLogMemory(IGHardwareRingBuffer *this)

{
  long in_RAX;
  
  if (*(long *)(this + 0x8a8) == 0) {
    in_RAX = _IOMallocZeroData(0x10000);
    *(long *)(this + 0x8a8) = in_RAX;
    if (in_RAX == 0) {
      return 0;
    }
  }
  return CONCAT71((int7)((ulong)in_RAX >> 8),1);
}



// IGHardwareRingBuffer::dumpRingStatus()

void __thiscall
IGHardwareRingBuffer::dumpRingStatus
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,char *param_12,char *param_13,ulong param_14)

{
  uint uVar1;
  long lVar2;
  uint *puVar3;
  bool bVar4;
  bool bVar5;
  ulong uVar6;
  undefined1 *puVar7;
  ulong uVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  undefined8 extraout_RDX_13;
  undefined8 extraout_RDX_14;
  undefined8 extraout_RDX_15;
  undefined8 extraout_RDX_16;
  undefined8 extraout_RDX_17;
  undefined8 extraout_RDX_18;
  char *pcVar9;
  ulong uVar10;
  uint uVar11;
  char *pcVar12;
  char *pcVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  int local_34;
  
  uVar14 = drvErrLog(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n"
                     ,param_11,param_12,param_13,param_14);
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "-- Summary of Status for ALL Rings --\n",extraout_RDX,param_12,param_13,
                     param_14);
  lVar2 = *(long *)((long)this + 0x10);
  uVar6 = *(ulong *)(&DAT_00001340 + lVar2);
  if (uVar6 == 0) {
    bVar4 = false;
    local_34 = -1;
    uVar15 = extraout_RDX_00;
  }
  else {
    pcVar13 = (char *)0x0;
    if (uVar6 != 0) {
      for (; (uVar6 >> (long)pcVar13 & 1) == 0; pcVar13 = pcVar13 + 1) {
      }
    }
    local_34 = -1;
    bVar4 = false;
    do {
      pcVar12 = pcVar13 + 1;
      uVar1 = *(uint *)(*(long *)((long)this + (long)pcVar12 * 8 + 0x8b0) + 0xac);
      param_12 = "";
      uVar15 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "%s Ring is:\t",
                         *(undefined8 *)((long)&PTR_s_RCS_00127425 + (long)pcVar13 * 0x79),
                         &kIGHwCsDesc,param_13,param_14);
      uVar14 = extraout_RDX_01;
      if ((uVar1 & 1) == 0) {
        uVar15 = drvErrLog(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ," - NOT enabled",extraout_RDX_01,param_12,param_13,param_14);
        uVar14 = extraout_RDX_02;
      }
      pcVar9 = " - idle";
      if ((uVar1 & 2) != 0) {
        pcVar9 = " - busy";
      }
      uVar14 = drvErrLog(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         pcVar9,uVar14,param_12,param_13,param_14);
      pcVar9 = " - waiting on a semaphore";
      bVar5 = true;
      if (((uVar1 & 4) != 0) ||
         (pcVar9 = " - waiting on an event ", uVar15 = extraout_RDX_03, bVar5 = bVar4,
         (uVar1 & 8) != 0)) {
        bVar4 = bVar5;
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,pcVar9,extraout_RDX_03,param_12,param_13,param_14);
        uVar15 = extraout_RDX_04;
      }
      if ((~uVar1 & 0x12) == 0) {
        pcVar9 = " - in a batch buffer\t <-- Appears hung\n";
LAB_00043426:
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,pcVar9,uVar15,param_12,param_13,param_14);
        uVar15 = extraout_RDX_06;
        local_34 = (int)pcVar13;
      }
      else {
        if ((uVar1 & 2) != 0) {
          pcVar9 = " - in the ring\t<--  Appears hung\n";
          goto LAB_00043426;
        }
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"\n",uVar15,param_12,param_13,param_14);
        uVar15 = extraout_RDX_05;
      }
      if (&MACH_HEADER.cputype < pcVar12) break;
      uVar6 = (*(ulong *)(&DAT_00001340 + ((ulong)pcVar12 >> 6) * 8 + lVar2) >>
              ((byte)pcVar12 & 0x3f)) << ((byte)pcVar12 & 0x3f);
      param_12 = (char *)0x0;
      if (uVar6 != 0) {
        for (; (uVar6 >> (long)param_12 & 1) == 0; param_12 = param_12 + 1) {
        }
      }
      pcVar13 = param_12 + ((ulong)pcVar12 & 0xffffffffffffffc0);
    } while (uVar6 != 0);
  }
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n",
                     uVar15,param_12,param_13,param_14);
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "===========================================================================\n"
                     ,extraout_RDX_07,param_12,param_13,param_14);
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "                     Hardware Ring Registers\n",extraout_RDX_08,param_12,
                     param_13,param_14);
  uVar15 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "===========================================================================\n"
                     ,extraout_RDX_09,param_12,param_13,param_14);
  lVar2 = *(long *)((long)this + 0x10);
  uVar6 = *(ulong *)(&DAT_00001340 + lVar2);
  uVar14 = extraout_RDX_10;
  if (uVar6 != 0) {
    pcVar13 = (char *)0x0;
    if (uVar6 != 0) {
      for (; (uVar6 >> (long)pcVar13 & 1) == 0; pcVar13 = pcVar13 + 1) {
      }
    }
    do {
      pcVar12 = pcVar13 + 1;
      puVar3 = *(uint **)((long)this + (long)pcVar12 * 8 + 0x8b0);
      puVar7 = &kIGHwCsDesc;
      uVar14 = drvErrLog(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "\n-- %s Ring --\n",
                         *(undefined8 *)((long)&PTR_s_RCS_00127425 + (long)pcVar13 * 0x79),
                         &kIGHwCsDesc,param_13,param_14);
      if ((*(byte *)((long)puVar3 + 0xad) & 0x10) != 0) {
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"  !! Reserved bits set in RING_HEAD:  Data may be unreliable.\n",
                           extraout_RDX_11,puVar7,param_13,param_14);
      }
      uVar1 = *puVar3;
      uVar6 = (ulong)(uVar1 & 0x1ffffc);
      uVar8 = (ulong)(uVar1 >> 0x15);
      uVar10 = (ulong)(uVar1 & 1);
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "  RING_HEAD   = 0x%08x  (offset = 0x%08x, wrap count = %u, wait_for_cond = 0x%1x)\n"
                         ,(ulong)uVar1,uVar6,uVar8,uVar10);
      if ((*(byte *)((long)puVar3 + 0xad) & 0x20) != 0) {
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"  !! Reserved bits set in RING_TAIL:  Data may be unreliable.\n",
                           extraout_RDX_12,uVar6,uVar8,uVar10);
      }
      uVar6 = (ulong)(puVar3[1] & 0x1ffff8);
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "  RING_TAIL   = 0x%08x  (offset = 0x%08x)\n",(ulong)puVar3[1],uVar6,uVar8,
                         uVar10);
      if ((*(byte *)((long)puVar3 + 0xad) & 0x80) != 0) {
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"  ** Reserved bits set in RING_START!  Data may be unreliable.\n",
                           extraout_RDX_13,uVar6,uVar8,uVar10);
      }
      uVar6 = (ulong)puVar3[3];
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "  RING_START  = 0x%08x  (offset = 0x%08x)\n",(ulong)puVar3[3],uVar6,uVar8,
                         uVar10);
      if ((*(byte *)((long)puVar3 + 0xad) & 0x40) != 0) {
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"  !! Reserved bits set in RING_CTL:  Data may be unreliable.\n",
                           extraout_RDX_14,uVar6,uVar8,uVar10);
      }
      uVar1 = puVar3[2];
      param_12 = "en";
      if ((uVar1 & 1) == 0) {
        param_12 = "dis";
      }
      uVar11 = uVar1 >> 1 & 3;
      param_14 = (ulong)uVar11;
      param_13 = "enabled";
      if (uVar11 == 0) {
        param_13 = "disabled";
      }
      pcVar13 = "is";
      if ((uVar1 >> 0xb & 1) == 0) {
        pcVar13 = "not";
      }
      pcVar9 = "is";
      if ((uVar1 >> 10 & 1) == 0) {
        pcVar9 = "not";
      }
      uVar15 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "  RING_CTRL   = 0x%08x  (%sabled, auto report %s (0x%02x), %s waiting, semaphore %s waiting, length = 0x%03x 4KB pages)\n"
                         ,(ulong)uVar1,param_12,param_13,param_14,pcVar13,pcVar9,
                         (ulong)((uVar1 >> 0xc) + 1));
      uVar14 = extraout_RDX_15;
      if ((puVar3[0x2b] & 8) != 0) {
        uVar14 = IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),1,4);
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"\n  This ring is stuck waiting on an event!\n",extraout_RDX_16,param_12
                           ,param_13,param_14);
        drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                  "    DE_RRMR = 0x%08x\n",(ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x44050),
                  param_12,param_13,param_14);
        uVar15 = IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),0,4);
        uVar14 = extraout_RDX_17;
      }
      if (&MACH_HEADER.cputype < pcVar12) break;
      uVar6 = (*(ulong *)(&DAT_00001340 + ((ulong)pcVar12 >> 6) * 8 + lVar2) >>
              ((byte)pcVar12 & 0x3f)) << ((byte)pcVar12 & 0x3f);
      param_12 = (char *)0x0;
      if (uVar6 != 0) {
        for (; (uVar6 >> (long)param_12 & 1) == 0; param_12 = param_12 + 1) {
        }
      }
      pcVar13 = param_12 + ((ulong)pcVar12 & 0xffffffffffffffc0);
    } while (uVar6 != 0);
  }
  if (bVar4) {
    uVar15 = drvErrLog(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "\n - One or more rings were waiting on a semaphore \n",uVar14,param_12,
                       param_13,param_14);
    uVar14 = extraout_RDX_18;
  }
  if (local_34 == -1) {
    return;
  }
  lVar2 = *(long *)((long)this + (long)local_34 * 8 + 0x8b8);
  uVar14 = drvErrLog(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "\n - Other registers associated with guilty ring - \n",uVar14,param_12,
                     param_13,param_14);
  uVar6 = *(ulong *)(lVar2 + 0x78);
  uVar8 = uVar6 & 0xfffffffffffc;
  uVar10 = (ulong)((uint)uVar6 & 1);
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  BB_ADDR     = 0x%08x  (offset = 0x%08x, valid = 0x%1x)\n",uVar6,uVar8,uVar10
                     ,param_14);
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  BB_STATE    = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x80),uVar8,uVar10,param_14
                    );
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  IPEIR       = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x88),uVar8,uVar10,param_14
                    );
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  ACTHD       = 0x%08x\n",*(undefined8 *)(lVar2 + 0x70),uVar8,uVar10,param_14)
  ;
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  EIR         = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x8c),uVar8,uVar10,param_14
                    );
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  EMR         = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x90),uVar8,uVar10,param_14
                    );
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  ESR         = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x94),uVar8,uVar10,param_14
                    );
  uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  INSTPM      = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x68),uVar8,uVar10,param_14
                    );
  drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "  INSTPS      = 0x%08x\n",(ulong)*(uint *)(lVar2 + 0x6c),uVar8,uVar10,param_14);
  return;
}



// IGHardwareRingBuffer::dumpStampInfo()

void __thiscall
IGHardwareRingBuffer::dumpStampInfo
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,char *param_14)

{
  long lVar1;
  int iVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  long lVar3;
  ulong uVar4;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar6;
  
  uVar5 = drvErrLog(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n",
                    param_11,param_12,param_13,param_14);
  uVar5 = drvErrLog(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "===========================================================================\n",
                    extraout_RDX,param_12,param_13,param_14);
  uVar5 = drvErrLog(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "                Stamp info for all indexes\n",extraout_RDX_00,param_12,param_13
                    ,param_14);
  uVar5 = drvErrLog(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "===========================================================================\n",
                    extraout_RDX_01,param_12,param_13,param_14);
  drvErrLog(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "  Index  Submitted    Returned\n",extraout_RDX_02,param_12,param_13,param_14);
  iVar2 = (**(code **)(**(long **)(*(long *)((long)this + 0x10) + 0x380) + 0x128))();
  uVar5 = extraout_RDX_03;
  uVar6 = extraout_XMM0_Qa;
  if (0 < iVar2) {
    lVar3 = 8;
    uVar4 = 0;
    do {
      lVar1 = *(long *)((long)this + 0x30);
      param_12 = (ulong)*(uint *)(lVar1 + lVar3);
      param_13 = (ulong)*(uint *)(lVar1 + -8 + lVar3);
      param_14 = "";
      if (*(int *)(lVar1 + lVar3) != *(int *)(lVar1 + -8 + lVar3)) {
        param_14 = "<- BUSY";
      }
      drvErrLog(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                "%5d:   0x%08x   0x%08x %s\n",uVar4 & 0xffffffff,param_12,param_13,param_14);
      uVar4 = uVar4 + 1;
      iVar2 = (**(code **)(**(long **)(*(long *)((long)this + 0x10) + 0x380) + 0x128))();
      lVar3 = lVar3 + 0x40;
      uVar5 = extraout_RDX_04;
      uVar6 = extraout_XMM0_Qa_00;
    } while ((long)uVar4 < (long)iVar2);
  }
  drvErrLog(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n",uVar5,
            param_12,param_13,param_14);
  return;
}



// IGHardwareRingBuffer::dumpSchedStatus()

void __thiscall
IGHardwareRingBuffer::dumpSchedStatus
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
          undefined8 param_14)

{
  int iVar1;
  long lVar2;
  uint uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar4;
  undefined8 extraout_XMM0_Qa;
  
  uVar4 = drvErrLog(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "===========================================================================\n",
                    param_11,param_12,param_13,param_14);
  uVar4 = drvErrLog(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "                         Scheduler Status \n",extraout_RDX,param_12,param_13,
                    param_14);
  drvErrLog(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "===========================================================================\n",
            extraout_RDX_00,param_12,param_13,param_14);
  lVar2 = *(long *)((long)this + 0x8a8);
  if (lVar2 == 0) {
    lVar2 = _IOMallocZeroData(0x10000);
    *(long *)((long)this + 0x8a8) = lVar2;
    if (lVar2 == 0) {
      return;
    }
  }
  iVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0x210))
                    (*(long **)(&DAT_00001280 + *(long *)((long)this + 0x10)),
                     (lVar2 - *(int *)((long)this + 0x8b0)) + 0x10000);
  if (-1 < iVar1) {
    uVar3 = *(int *)((long)this + 0x8b0) - iVar1;
    param_12 = (ulong)uVar3;
    if (uVar3 != 0 && iVar1 <= *(int *)((long)this + 0x8b0)) {
      *(uint *)((long)this + 0x8b0) = uVar3;
    }
  }
  drvErrLog(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n"
            ,extraout_RDX_01,param_12,param_13,param_14);
  return;
}



// IGHardwareRingBuffer::getRingResources(ResourceCacheElement**)

ulong __thiscall
IGHardwareRingBuffer::getRingResources
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  uint uVar4;
  ulong uVar5;
  undefined8 unaff_R12;
  ulong uVar6;
  long lVar8;
  undefined8 uVar9;
  uint7 uVar7;
  
  uVar1 = *(uint *)(*(long *)((long)this + 0x30) + (long)*(int *)((long)this + 0x38) * 0x40);
  uVar4 = *(uint *)((long)this + 0x8a0);
  uVar5 = (ulong)(uVar4 - 1 & 0x3f);
  uVar7 = (uint7)((ulong)unaff_R12 >> 8);
  uVar6 = CONCAT71(uVar7,1);
  if (uVar1 < *(uint *)((long)this + uVar5 * 0x20 + 0xa0)) {
    uVar2 = 0;
    do {
      if (uVar2 == 0xffffffc1) {
        uVar3 = 0x3f;
        uVar6 = (ulong)uVar7 << 8;
        lVar8 = 0;
        uVar9 = drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)this,"  ** Ring resources NOT available in history buffer!\n",uVar5,
                          0x3f,param_13,param_14);
        uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                          "    * Last timestamp executed = 0x%08x\n",(ulong)uVar1,uVar3,param_13,
                          param_14);
        drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                  "    * Last timestamp recorded in history buffer = 0x%08x\n",
                  (ulong)*(uint *)((long)this + (ulong)*(uint *)((long)this + 0x8a0) * 0x20 + 0xa0),
                  uVar3,param_13,param_14);
        goto LAB_00043abb;
      }
      uVar4 = (uint)uVar5;
      uVar5 = (ulong)(uVar4 - 1 & 0x3f);
      uVar2 = uVar2 - 1;
    } while (uVar1 < *(uint *)((long)this + uVar5 * 0x20 + 0xa0));
    uVar6 = CONCAT71(uVar7,~uVar2 < 0x3f);
  }
  lVar8 = (long)this + (ulong)uVar4 * 0x20 + 0xa0;
LAB_00043abb:
  *param_10 = lVar8;
  return uVar6 & 0xffffffff;
}



// IGHardwareRingBuffer::dumpInstDoneStatus(debugRegisters&)

void __thiscall
IGHardwareRingBuffer::dumpInstDoneStatus
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  byte bVar1;
  uint uVar2;
  ulong uVar3;
  undefined8 extraout_RDX;
  char *pcVar4;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 uVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  char *pcVar10;
  char *pcVar11;
  char *pcVar12;
  char *pcVar13;
  char *pcVar14;
  char *pcVar15;
  char *pcVar16;
  char *pcVar17;
  char *pcVar18;
  char *pcVar19;
  char *pcVar20;
  char *pcVar21;
  char *pcVar22;
  char *pcVar23;
  char *pcVar24;
  char *pcVar25;
  char *pcVar26;
  char *pcVar27;
  char *pcVar28;
  undefined8 uVar29;
  
  uVar3 = (ulong)*(uint *)(param_10 + 0x84);
  uVar29 = drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "  Last instruction header executed: 0x%08x  (IPEHR=0x%08x)\n",
                     (ulong)*(uint *)(param_10 + 0x84),uVar3,param_13,param_14);
  if ((*(byte *)(param_10 + 0xac) & 0x40) == 0) {
    uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "   -> Use AubList to decode:  Aublist -d 0x%08x\n",
                       (ulong)*(uint *)(param_10 + 0x84),uVar3,param_13,param_14);
  }
  else {
    uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "   -> Looks like HW was trying to execute instructions from the scratch page!!!\n"
                       ,extraout_RDX,uVar3,param_13,param_14);
  }
  pcVar4 = "All Main engines are done";
  if ((*(uint *)(param_10 + 0xac) >> 8 & 1) == 0) {
    pcVar4 = "Some Main engines are NOT DONE";
  }
  uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                     "\n  %s.\n",pcVar4,uVar3,param_13,param_14);
  if ((*(byte *)(param_10 + 0xad) & 1) == 0) {
    bVar1 = *(byte *)(param_10 + 0x9c);
    if ((ulong)bVar1 < 5) {
      switch(bVar1) {
      case 0:
        uVar2 = *(uint *)(param_10 + 0x20);
        uVar3 = (ulong)uVar2;
        if ((uVar2 < 0x2000000) || ((uVar2 & 0x400) == 0)) {
          uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)this,
                             "   !!INSTDONE reserved bits were not set:  Data could be unreliable!\n"
                             ,uVar3,&switchD_00043b8f::switchdataD_00044004,param_13,param_14);
          uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        }
        pcVar4 = "Ring_Enable, ";
        if ((uVar3 & 1) != 0) {
          pcVar4 = "";
        }
        pcVar19 = "VF, ";
        if ((uVar3 & 2) != 0) {
          pcVar19 = "";
        }
        pcVar20 = "VS, ";
        if ((uVar3 & 4) != 0) {
          pcVar20 = "";
        }
        pcVar21 = "HS, ";
        if ((uVar3 & 8) != 0) {
          pcVar21 = "";
        }
        pcVar23 = "TE, ";
        if ((uVar3 & 0x10) != 0) {
          pcVar23 = "";
        }
        pcVar25 = "DS, ";
        if ((uVar3 & 0x20) != 0) {
          pcVar25 = "";
        }
        pcVar6 = "GS, ";
        if ((uVar3 & 0x40) != 0) {
          pcVar6 = "";
        }
        pcVar7 = "SOL, ";
        if ((uVar3 & 0x80) != 0) {
          pcVar7 = "";
        }
        uVar2 = (uint)uVar3;
        pcVar8 = "CL, ";
        if ((uVar2 >> 8 & 1) != 0) {
          pcVar8 = "";
        }
        pcVar9 = "SF, ";
        if ((uVar2 >> 9 & 1) != 0) {
          pcVar9 = "";
        }
        pcVar10 = "TDG0, ";
        if ((uVar2 >> 0xc & 1) != 0) {
          pcVar10 = "";
        }
        pcVar11 = "TDG1, ";
        if ((uVar2 >> 0xb & 1) != 0) {
          pcVar11 = "";
        }
        pcVar12 = "URBM, ";
        if ((uVar2 >> 0xd & 1) != 0) {
          pcVar12 = "";
        }
        pcVar13 = "SVG, ";
        if ((uVar2 >> 0xe & 1) != 0) {
          pcVar13 = "";
        }
        pcVar14 = "GAFS, ";
        if ((uVar2 >> 0xf & 1) != 0) {
          pcVar14 = "";
        }
        pcVar15 = "VFE, ";
        if ((uVar2 >> 0x10 & 1) != 0) {
          pcVar15 = "";
        }
        pcVar16 = "TSG0, ";
        if ((uVar2 >> 0x11 & 1) != 0) {
          pcVar16 = "";
        }
        pcVar17 = "GAFM, ";
        if ((uVar2 >> 0x12 & 1) != 0) {
          pcVar17 = "";
        }
        pcVar18 = "GAM, ";
        if ((uVar2 >> 0x13 & 1) != 0) {
          pcVar18 = "";
        }
        pcVar24 = "RS, ";
        if ((uVar2 >> 0x14 & 1) != 0) {
          pcVar24 = "";
        }
        pcVar28 = "CS, ";
        if ((uVar2 >> 0x15 & 1) != 0) {
          pcVar28 = "";
        }
        pcVar26 = "SDE, ";
        if ((uVar2 >> 0x16 & 1) != 0) {
          pcVar26 = "";
        }
        pcVar27 = "FBC, ";
        if ((uVar2 >> 0x17 & 1) != 0) {
          pcVar27 = "";
        }
        pcVar22 = "TSG1, ";
        if ((uVar2 >> 0x18 & 1) != 0) {
          pcVar22 = "";
        }
        uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,
                           "     INSTDONE (=0x%08x): Not done= %s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\n"
                           ,uVar3,pcVar4,pcVar19,pcVar20,pcVar21,pcVar23,pcVar25,pcVar6,pcVar7,
                           pcVar8,pcVar9,pcVar10,pcVar11,pcVar12,pcVar13,pcVar14,pcVar15,pcVar16,
                           pcVar17,pcVar18,pcVar24,pcVar28,pcVar26,pcVar27,pcVar22);
        if ((*(byte *)(param_10 + 0x20) & 1) == 0) {
          pcVar21 = "       MAIN Ring is not enabled!\n";
          uVar5 = extraout_RDX_00;
LAB_00043fd4:
          drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    pcVar21,uVar5,pcVar4,pcVar19,pcVar20);
          return;
        }
        break;
      default:
        uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        if ((*(uint *)(param_10 + 0x20) & 0x1fffffe) == 0) {
          uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)this,
                             "   !!INSTDONE reserved bits were not set!  Data could be unreliable!\n"
                             ,(long)&switchD_00043b8f::switchdataD_00044004 +
                              (long)(int)(&switchD_00043b8f::switchdataD_00044004)[bVar1],uVar3,
                             param_13,param_14);
          bVar1 = *(byte *)(param_10 + 0x9c);
          uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        }
        pcVar4 = "1";
        if (bVar1 == 1) {
          pcVar4 = "0";
        }
        pcVar19 = "Ring_Enable, ";
        if ((uVar3 & 1) != 0) {
          pcVar19 = "";
        }
        uVar2 = (uint)uVar3;
        pcVar20 = "VCR, ";
        if ((uVar2 >> 0x19 & 1) != 0) {
          pcVar20 = "";
        }
        pcVar21 = "VIN, ";
        if ((uVar2 >> 0x1a & 1) != 0) {
          pcVar21 = "";
        }
        pcVar23 = "VCS, ";
        if ((uVar2 >> 0x1e & 1) != 0) {
          pcVar23 = "";
        }
        pcVar25 = "GAC, ";
        if ((int)uVar2 < 0) {
          pcVar25 = "";
        }
        uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"     [VDBOX INSTANCE %s] INSTDONE (=0x%08x): Not done= %s%s%s%s%s\n",
                           pcVar4,uVar3,pcVar19,pcVar20,pcVar21,pcVar23,pcVar25);
        if ((*(byte *)(param_10 + 0x20) & 1) == 0) {
          pcVar4 = "2";
          if (*(char *)(param_10 + 0x9c) == '\x01') {
            pcVar4 = "0";
          }
          drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "       VCS%d Ring is not enabled!\n",pcVar4,uVar3,pcVar19,pcVar20);
          return;
        }
        break;
      case 2:
        uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        if (*(uint *)(param_10 + 0x20) < 0x10) {
          uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)this,
                             "   !!INSTDONE reserved bits were not set!  Data could be unreliable!\n"
                             ,uVar3,&switchD_00043b8f::switchdataD_00044004,param_13,param_14);
          uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        }
        pcVar4 = "Ring_Enable, ";
        if ((uVar3 & 1) != 0) {
          pcVar4 = "";
        }
        pcVar19 = "BCS, ";
        if ((uVar3 & 8) != 0) {
          pcVar19 = "";
        }
        pcVar20 = "GAB_Idle, ";
        if ((uVar3 & 4) != 0) {
          pcVar20 = "";
        }
        pcVar21 = "Blitter_Idle, ";
        if ((uVar3 & 2) != 0) {
          pcVar21 = "";
        }
        uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"     INSTDONE (=0x%08x): Not done = %s%s%s%s\n",uVar3,pcVar4,pcVar19,
                           pcVar20,pcVar21);
        if ((*(byte *)(param_10 + 0x20) & 1) == 0) {
          pcVar21 = "       BLIT Ring is not enabled!\n";
          uVar5 = extraout_RDX_01;
          goto LAB_00043fd4;
        }
        break;
      case 3:
        uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        if ((*(uint *)(param_10 + 0x20) & 0x3ffffffe) == 0) {
          uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)this,
                             "   !!INSTDONE reserved bits were not set!  Data could be unreliable!\n"
                             ,uVar3,&switchD_00043b8f::switchdataD_00044004,param_13,param_14);
          uVar3 = (ulong)*(uint *)(param_10 + 0x20);
        }
        pcVar4 = "Ring_Enable, ";
        if ((uVar3 & 1) != 0) {
          pcVar4 = "";
        }
        pcVar19 = "VECS, ";
        if (((uint)uVar3 >> 0x1e & 1) != 0) {
          pcVar19 = "";
        }
        pcVar20 = "GAM, ";
        if ((int)(uint)uVar3 < 0) {
          pcVar20 = "";
        }
        uVar29 = drvErrLog(uVar29,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"     INSTDONE (=0x%08x): Not done= %s%s%s\n",uVar3,pcVar4,pcVar19,
                           pcVar20);
        if ((*(byte *)(param_10 + 0x20) & 1) == 0) {
          pcVar21 = "       VEBOX Ring is not enabled!\n";
          uVar5 = extraout_RDX_02;
          goto LAB_00043fd4;
        }
      }
    }
  }
  return;
}



// IGHardwareRingBuffer::dumpInstDone2Status(debugRegisters&, int)

void __thiscall
IGHardwareRingBuffer::dumpInstDone2Status
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,uint param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  uint uVar2;
  ulong uVar3;
  char *pcVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  char *pcVar10;
  char *pcVar11;
  char *pcVar12;
  char *pcVar13;
  char *pcVar14;
  char *pcVar15;
  char *pcVar16;
  char *pcVar17;
  char *pcVar18;
  char *pcVar19;
  char *pcVar20;
  char *pcVar21;
  char *pcVar22;
  char *pcVar23;
  char *pcVar24;
  char *pcVar25;
  undefined8 uVar26;
  
  uVar26 = drvErrLog(param_1_00,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)this,"     - Slice:%d\n",(ulong)param_11,param_12,param_13,param_14);
  uVar2 = *(uint *)(param_10 + 0x24 + (long)(int)param_11 * 4);
  uVar3 = (ulong)uVar2;
  if ((uVar2 < 0x4000000) || ((uVar2 & 0x4080) != 0x4080)) {
    uVar26 = drvErrLog(uVar26,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "       !!INSTDONE_CS reserved bits were not set:  Data could be unreliable!\n"
                       ,uVar3,param_12,param_13,param_14);
    uVar3 = (ulong)*(uint *)(param_10 + 0x24 + (long)(int)param_11 * 4);
  }
  pcVar1 = "SVL, ";
  if ((uVar3 & 1) != 0) {
    pcVar1 = "";
  }
  pcVar18 = "WMFE, ";
  if ((uVar3 & 2) != 0) {
    pcVar18 = "";
  }
  pcVar19 = "WMBE, ";
  if ((uVar3 & 4) != 0) {
    pcVar19 = "";
  }
  pcVar5 = "HiZ, ";
  if ((uVar3 & 8) != 0) {
    pcVar5 = "";
  }
  pcVar6 = "STC, ";
  if ((uVar3 & 0x10) != 0) {
    pcVar6 = "";
  }
  pcVar7 = "IZ, ";
  if ((uVar3 & 0x20) != 0) {
    pcVar7 = "";
  }
  pcVar8 = "SBE, ";
  if ((uVar3 & 0x40) != 0) {
    pcVar8 = "";
  }
  uVar2 = (uint)uVar3;
  pcVar9 = "RCZ, ";
  if ((uVar2 >> 8 & 1) != 0) {
    pcVar9 = "";
  }
  pcVar10 = "RCC, ";
  if ((uVar2 >> 9 & 1) != 0) {
    pcVar10 = "";
  }
  pcVar11 = "RCPBE, ";
  if ((uVar2 >> 10 & 1) != 0) {
    pcVar11 = "";
  }
  pcVar12 = "RCPFE, ";
  if ((uVar2 >> 0xb & 1) != 0) {
    pcVar12 = "";
  }
  pcVar13 = "DAPB, ";
  if ((uVar2 >> 0xc & 1) != 0) {
    pcVar13 = "";
  }
  pcVar14 = "SARB, ";
  if ((uVar2 >> 0xf & 1) != 0) {
    pcVar14 = "";
  }
  pcVar15 = "DC0, ";
  if ((uVar2 >> 0x10 & 1) != 0) {
    pcVar15 = "";
  }
  pcVar16 = "DC1, ";
  if ((uVar2 >> 0x11 & 1) != 0) {
    pcVar16 = "";
  }
  pcVar17 = "DC2, ";
  if ((uVar2 >> 0x12 & 1) != 0) {
    pcVar17 = "";
  }
  pcVar4 = "DC3, ";
  if ((uVar2 >> 0x13 & 1) != 0) {
    pcVar4 = "";
  }
  pcVar20 = "GW0, ";
  if ((uVar2 >> 0x14 & 1) != 0) {
    pcVar20 = "";
  }
  pcVar21 = "GW1, ";
  if ((uVar2 >> 0x15 & 1) != 0) {
    pcVar21 = "";
  }
  pcVar24 = "GW2, ";
  if ((uVar2 >> 0x16 & 1) != 0) {
    pcVar24 = "";
  }
  pcVar25 = "GW3, ";
  if ((uVar2 >> 0x17 & 1) != 0) {
    pcVar25 = "";
  }
  pcVar22 = "TDC, ";
  if ((uVar2 >> 0x18 & 1) != 0) {
    pcVar22 = "";
  }
  pcVar23 = "SFBE, ";
  if ((uVar2 >> 0x19 & 1) != 0) {
    pcVar23 = "";
  }
  drvErrLog(uVar26,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "         INSTDONE_CS (=0x%08x): Not done= %s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\n"
            ,uVar3,pcVar1,pcVar18,pcVar19,pcVar5,pcVar6,pcVar7,pcVar8,pcVar9,pcVar10,pcVar11,pcVar12
            ,pcVar13,pcVar14,pcVar15,pcVar16,pcVar17,pcVar4,pcVar20,pcVar21,pcVar24,pcVar25,pcVar22,
            pcVar23);
  return;
}



// IGHardwareRingBuffer::dumpInstDone3Status(debugRegisters&, int, int)

void __thiscall
IGHardwareRingBuffer::dumpInstDone3Status
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,int param_11,ulong param_12,undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  char *pcVar2;
  uint uVar3;
  ulong uVar4;
  long lVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  char *pcVar10;
  char *pcVar11;
  char *pcVar12;
  char *pcVar13;
  char *pcVar14;
  char *pcVar15;
  char *pcVar16;
  char *pcVar17;
  char *pcVar18;
  char *pcVar19;
  char *pcVar20;
  char *pcVar21;
  undefined8 uVar22;
  
  iVar1 = (int)param_12;
  lVar5 = (long)param_11 * 0x20 + param_10;
  uVar22 = drvErrLog(param_1_00,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)this,"       - Subslice:%d\n",param_12 & 0xffffffff,param_12,param_13,
                     param_14);
  uVar3 = *(uint *)(lVar5 + 0x28 + (long)iVar1 * 4);
  uVar4 = (ulong)uVar3;
  if (((((uVar3 & 0x20) == 0) || ((uVar3 & 0xf80) == 0)) || ((uVar3 & 0x6000) == 0)) ||
     ((((uVar3 & 0x100000) == 0 || ((uVar3 & 0x2000000) == 0)) || (uVar3 < 0x8000000)))) {
    uVar22 = drvErrLog(uVar22,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "         !!INSTDONE_ROW reserved bits were not set:  Data could be unreliable!\n"
                       ,uVar4,param_12,param_13,param_14);
    uVar4 = (ulong)*(uint *)(lVar5 + (long)iVar1 * 4 + 0x28);
  }
  pcVar2 = "BC, ";
  if ((uVar4 & 1) != 0) {
    pcVar2 = "";
  }
  pcVar14 = "PSD, ";
  if ((uVar4 & 2) != 0) {
    pcVar14 = "";
  }
  pcVar15 = "TDP, ";
  if ((uVar4 & 4) != 0) {
    pcVar15 = "";
  }
  pcVar7 = "DAPR, ";
  if ((uVar4 & 8) != 0) {
    pcVar7 = "";
  }
  pcVar8 = "CPSS, ";
  if ((uVar4 & 0x10) != 0) {
    pcVar8 = "";
  }
  pcVar9 = "TDL, ";
  if ((uVar4 & 0x40) != 0) {
    pcVar9 = "";
  }
  uVar3 = (uint)uVar4;
  pcVar10 = "IC, ";
  if ((uVar3 >> 0xc & 1) != 0) {
    pcVar10 = "";
  }
  pcVar11 = "MA0, ";
  if ((uVar3 >> 0xf & 1) != 0) {
    pcVar11 = "";
  }
  pcVar12 = "EU00, ";
  if ((uVar3 >> 0x10 & 1) != 0) {
    pcVar12 = "";
  }
  pcVar13 = "EU01, ";
  if ((uVar3 >> 0x11 & 1) != 0) {
    pcVar13 = "";
  }
  pcVar16 = "EU02, ";
  if ((uVar3 >> 0x12 & 1) != 0) {
    pcVar16 = "";
  }
  pcVar17 = "EU03, ";
  if ((uVar3 >> 0x13 & 1) != 0) {
    pcVar17 = "";
  }
  pcVar20 = "EU10, ";
  if ((uVar3 >> 0x15 & 1) != 0) {
    pcVar20 = "";
  }
  pcVar21 = "EU11, ";
  if ((uVar3 >> 0x16 & 1) != 0) {
    pcVar21 = "";
  }
  pcVar18 = "EU12, ";
  if ((uVar3 >> 0x17 & 1) != 0) {
    pcVar18 = "";
  }
  pcVar19 = "EU13, ";
  if ((uVar3 >> 0x18 & 1) != 0) {
    pcVar19 = "";
  }
  pcVar6 = "MA1, ";
  if ((uVar3 >> 0x1a & 1) != 0) {
    pcVar6 = "";
  }
  drvErrLog(uVar22,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "           INSTDONE_ROW (=0x%08x): Not done= %s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\n",
            uVar4,pcVar2,pcVar14,pcVar15,pcVar7,pcVar8,pcVar9,pcVar10,pcVar11,pcVar12,pcVar13,
            pcVar16,pcVar17,pcVar20,pcVar21,pcVar18,pcVar19,pcVar6);
  return;
}



// IGHardwareRingBuffer::dumpInstDone4Status(debugRegisters&, int, int)

void __thiscall
IGHardwareRingBuffer::dumpInstDone4Status
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,int param_11,int param_12,undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  char *pcVar3;
  uint uVar4;
  ulong uVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  char *pcVar10;
  char *pcVar11;
  char *pcVar12;
  char *pcVar13;
  char *pcVar14;
  char *pcVar15;
  char *pcVar16;
  char *pcVar17;
  char *pcVar18;
  char *pcVar19;
  char *pcVar20;
  char *pcVar21;
  char *pcVar22;
  char *pcVar23;
  char *pcVar24;
  
  lVar2 = (long)param_12;
  lVar1 = (long)param_11 * 0x20 + param_10;
  uVar4 = *(uint *)(lVar1 + 0x48 + lVar2 * 4);
  uVar5 = (ulong)uVar4;
  if (uVar4 < 0x100000) {
    param_1_00 = drvErrLog(param_1_00,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                           (long)this,
                           "         !!INSTDONE_SAMPLER reserved bits were not set:  Data could be unreliable!\n"
                           ,uVar5,lVar2,param_13,param_14);
    uVar5 = (ulong)*(uint *)(lVar1 + lVar2 * 4 + 0x48);
  }
  pcVar3 = "IME, ";
  if ((uVar5 & 1) != 0) {
    pcVar3 = "";
  }
  pcVar17 = "PL, ";
  if ((uVar5 & 2) != 0) {
    pcVar17 = "";
  }
  pcVar18 = "SO, ";
  if ((uVar5 & 4) != 0) {
    pcVar18 = "";
  }
  pcVar7 = "DG, ";
  if ((uVar5 & 8) != 0) {
    pcVar7 = "";
  }
  pcVar8 = "FT0, ";
  if ((uVar5 & 0x10) != 0) {
    pcVar8 = "";
  }
  pcVar9 = "DM0, ";
  if ((uVar5 & 0x20) != 0) {
    pcVar9 = "";
  }
  pcVar10 = "SC, ";
  if ((uVar5 & 0x40) != 0) {
    pcVar10 = "";
  }
  pcVar11 = "FL, ";
  if ((uVar5 & 0x80) != 0) {
    pcVar11 = "";
  }
  uVar4 = (uint)uVar5;
  pcVar12 = "QC, ";
  if ((uVar4 >> 8 & 1) != 0) {
    pcVar12 = "";
  }
  pcVar13 = "SVSM, ";
  if ((uVar4 >> 9 & 1) != 0) {
    pcVar13 = "";
  }
  pcVar14 = "SI, ";
  if ((uVar4 >> 10 & 1) != 0) {
    pcVar14 = "";
  }
  pcVar15 = "MT0, ";
  if ((uVar4 >> 0xb & 1) != 0) {
    pcVar15 = "";
  }
  pcVar16 = "AVS, ";
  if ((uVar4 >> 0xc & 1) != 0) {
    pcVar16 = "";
  }
  pcVar24 = "IEF, ";
  if ((uVar4 >> 0xd & 1) != 0) {
    pcVar24 = "";
  }
  pcVar21 = "CRE, ";
  if ((uVar4 >> 0xe & 1) != 0) {
    pcVar21 = "";
  }
  pcVar22 = "SVSM_ARB_SIFM, ";
  if ((uVar4 >> 0xf & 1) != 0) {
    pcVar22 = "";
  }
  pcVar6 = "SVSM_ARB2, ";
  if ((uVar4 >> 0x10 & 1) != 0) {
    pcVar6 = "";
  }
  pcVar19 = "SVSM_ARB1, ";
  if ((uVar4 >> 0x11 & 1) != 0) {
    pcVar19 = "";
  }
  pcVar20 = "SVSM_Adapter, ";
  if ((uVar4 >> 0x12 & 1) != 0) {
    pcVar20 = "";
  }
  pcVar23 = "BDM, ";
  if ((uVar4 >> 0x13 & 1) != 0) {
    pcVar23 = "";
  }
  drvErrLog(param_1_00,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
            "           INSTDONE_SAMPLER (=0x%08x): Not done= %s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\n"
            ,uVar5,pcVar3,pcVar17,pcVar18,pcVar7,pcVar8,pcVar9,pcVar10,pcVar11,pcVar12,pcVar13,
            pcVar14,pcVar15,pcVar16,pcVar24,pcVar21,pcVar22,pcVar6,pcVar19,pcVar20,pcVar23);
  return;
}



// IGHardwareRingBuffer::dumpExecutionListStatus(debugRegisters&)

void __thiscall
IGHardwareRingBuffer::dumpExecutionListStatus
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,ulong param_12,undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  undefined **ppuVar5;
  ulong uVar6;
  uint uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar8;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  ulong uVar9;
  long lVar10;
  int iVar11;
  bool bVar12;
  char *pcVar13;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar14;
  undefined8 extraout_XMM0_Qa_00;
  char local_a8 [112];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_a8[0x58] = '\0';
  local_a8[0x59] = '\0';
  local_a8[0x5a] = '\0';
  local_a8[0x5b] = '\0';
  local_a8[0x5c] = '\0';
  local_a8[0x5d] = '\0';
  local_a8[0x5e] = '\0';
  local_a8[0x5f] = '\0';
  local_a8[0x50] = '\0';
  local_a8[0x51] = '\0';
  local_a8[0x52] = '\0';
  local_a8[0x53] = '\0';
  local_a8[0x54] = '\0';
  local_a8[0x55] = '\0';
  local_a8[0x56] = '\0';
  local_a8[0x57] = '\0';
  local_a8[0x48] = '\0';
  local_a8[0x49] = '\0';
  local_a8[0x4a] = '\0';
  local_a8[0x4b] = '\0';
  local_a8[0x4c] = '\0';
  local_a8[0x4d] = '\0';
  local_a8[0x4e] = '\0';
  local_a8[0x4f] = '\0';
  local_a8[0x40] = '\0';
  local_a8[0x41] = '\0';
  local_a8[0x42] = '\0';
  local_a8[0x43] = '\0';
  local_a8[0x44] = '\0';
  local_a8[0x45] = '\0';
  local_a8[0x46] = '\0';
  local_a8[0x47] = '\0';
  local_a8[0x38] = '\0';
  local_a8[0x39] = '\0';
  local_a8[0x3a] = '\0';
  local_a8[0x3b] = '\0';
  local_a8[0x3c] = '\0';
  local_a8[0x3d] = '\0';
  local_a8[0x3e] = '\0';
  local_a8[0x3f] = '\0';
  local_a8[0x30] = '\0';
  local_a8[0x31] = '\0';
  local_a8[0x32] = '\0';
  local_a8[0x33] = '\0';
  local_a8[0x34] = '\0';
  local_a8[0x35] = '\0';
  local_a8[0x36] = '\0';
  local_a8[0x37] = '\0';
  local_a8[0x28] = '\0';
  local_a8[0x29] = '\0';
  local_a8[0x2a] = '\0';
  local_a8[0x2b] = '\0';
  local_a8[0x2c] = '\0';
  local_a8[0x2d] = '\0';
  local_a8[0x2e] = '\0';
  local_a8[0x2f] = '\0';
  local_a8[0x20] = '\0';
  local_a8[0x21] = '\0';
  local_a8[0x22] = '\0';
  local_a8[0x23] = '\0';
  local_a8[0x24] = '\0';
  local_a8[0x25] = '\0';
  local_a8[0x26] = '\0';
  local_a8[0x27] = '\0';
  local_a8[0x18] = '\0';
  local_a8[0x19] = '\0';
  local_a8[0x1a] = '\0';
  local_a8[0x1b] = '\0';
  local_a8[0x1c] = '\0';
  local_a8[0x1d] = '\0';
  local_a8[0x1e] = '\0';
  local_a8[0x1f] = '\0';
  local_a8[0x10] = '\0';
  local_a8[0x11] = '\0';
  local_a8[0x12] = '\0';
  local_a8[0x13] = '\0';
  local_a8[0x14] = '\0';
  local_a8[0x15] = '\0';
  local_a8[0x16] = '\0';
  local_a8[0x17] = '\0';
  local_a8[8] = '\0';
  local_a8[9] = '\0';
  local_a8[10] = '\0';
  local_a8[0xb] = '\0';
  local_a8[0xc] = '\0';
  local_a8[0xd] = '\0';
  local_a8[0xe] = '\0';
  local_a8[0xf] = '\0';
  local_a8[0] = '\0';
  local_a8[1] = '\0';
  local_a8[2] = '\0';
  local_a8[3] = '\0';
  local_a8[4] = '\0';
  local_a8[5] = '\0';
  local_a8[6] = '\0';
  local_a8[7] = '\0';
  local_a8[0x60] = '\0';
  local_a8[0x61] = '\0';
  local_a8[0x62] = '\0';
  local_a8[99] = '\0';
  if ((*(ushort *)(param_10 + 0xb0) & 0x3fe0) == 0) {
LAB_000450ff:
    _snprintf(local_a8,100,"None");
  }
  else {
    iVar11 = 100;
    bVar12 = true;
    uVar7 = 1;
    lVar10 = 0;
    uVar9 = 0;
    do {
      if ((uVar7 & *(uint *)(param_10 + 0xb0) >> 5) != 0) {
        if (!bVar12) {
          iVar1 = _snprintf(local_a8 + uVar9,(long)iVar11," | ");
          if (iVar11 - iVar1 != 0 && iVar1 <= iVar11) {
            uVar9 = (ulong)(uint)((int)uVar9 + iVar1);
            iVar11 = iVar11 - iVar1;
          }
        }
        bVar12 = false;
        uVar2 = _snprintf(local_a8 + uVar9,(long)iVar11,"%s",*(char **)((long)&csbReason + lVar10));
        param_12 = 0;
        if ((int)uVar2 < iVar11) {
          param_12 = (ulong)uVar2;
        }
        uVar9 = (ulong)(uint)((int)uVar9 + (int)param_12);
        iVar11 = iVar11 - (int)param_12;
        param_11 = extraout_RDX;
        param_1_00 = extraout_XMM0_Qa;
      }
      uVar7 = uVar7 * 2;
      lVar10 = lVar10 + 8;
    } while (lVar10 != 0x48);
    uVar14 = drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                       ,"\n EXECUTION LIST INFORMATION:\n",param_11,param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    Execution List Status Register:\n",extraout_RDX_00,param_12,param_13,
                       param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - CurrentContextID               : %u\n",
                       (ulong)(*(uint *)(param_10 + 0xb4) >> 5 & 0x7ff),param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - CurrentExecListPointer         : %d\n",
                       (ulong)(*(uint *)(param_10 + 0xb0) & 1),param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecListWritePointer           : %d\n",
                       (ulong)(*(uint *)(param_10 + 0xb0) >> 1 & 1),param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecListQueueFull              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xb0) & 4) * 2),
                       param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecList1Valid                 : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_NOT_VALID_001276c0 + (ulong)(*(uint *)(param_10 + 0xb0) & 8)),
                       param_12,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecList0Valid                 : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_NOT_VALID_001276c0 +
                        (ulong)(*(uint *)(param_10 + 0xb0) >> 1 & 8)),param_12,param_13,param_14);
    puVar4 = &DAT_00113090;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - CurrentActiveElementStatus     : %s\n",
                       &DAT_00113090 +
                       *(int *)(&DAT_00113090 + (*(uint *)(param_10 + 0xb0) >> 0xc & 0xc)),
                       &DAT_00113090,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ArbitrationEnable              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 +
                        (ulong)(*(uint *)(param_10 + 0xb0) >> 0xd & 8)),puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecList1Active                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 +
                        (ulong)(*(uint *)(param_10 + 0xb0) >> 0xe & 8)),puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ExecList0Active                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 +
                        (ulong)(*(uint *)(param_10 + 0xb0) >> 0xf & 8)),puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - LastContextSwitchReason(0x%02x)  : ",
                       (ulong)(*(uint *)(param_10 + 0xb0) >> 5 & 0x1ff),puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "%s\n",local_a8,puVar4,param_13,param_14);
    pcVar13 = "<--- ACTIVE";
    pcVar8 = " pending ";
    if ((*(byte *)(param_10 + 0xb0) & 1) == 0) {
      pcVar8 = "<--- ACTIVE";
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "\n    Execution List 0:  %s\n",pcVar8,puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      Context 0:\n",extraout_RDX_01,puVar4,param_13,param_14);
    uVar7 = *(uint *)(param_10 + 0xec);
    if ((uVar7 & 0xe00) != 0) {
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "    * Reserved bits are set!  Data may not be valid!\n",extraout_RDX_02,
                         puVar4,param_13,param_14);
      uVar7 = *(uint *)(param_10 + 0xec);
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - Valid                       : %s\n",
                       (&PTR_s_FALSE_001276d0)[uVar7 & 1],puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ContextID                   : %u\n",
                       (ulong)(*(uint *)(param_10 + 0xf0) >> 5 & 0x7ff),puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForcePDRestore              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xec) & 2) * 4),
                       puVar4,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForceRestore                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xec) & 4) * 2),
                       puVar4,param_13,param_14);
    ppuVar5 = &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - AddressingMode              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700 +
                        (ulong)(*(uint *)(param_10 + 0xec) & 0x18)),
                       &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - FaultHandling               : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FAULT_AND_HANG_001276e0 +
                        (ulong)(*(uint *)(param_10 + 0xec) >> 3 & 0x18)),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - PrivilegeAccess             : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xec) >> 5 & 8))
                       ,ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - LogicalRingContextAddress   : 0x%08x\n",
                       (ulong)(*(uint *)(param_10 + 0xec) >> 0xc),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      Context 1:\n",extraout_RDX_03,ppuVar5,param_13,param_14);
    uVar7 = *(uint *)(param_10 + 0xf4);
    if ((uVar7 & 0xe00) != 0) {
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "    * Reserved bits are set!  Data may not be valid!\n",extraout_RDX_04,
                         ppuVar5,param_13,param_14);
      uVar7 = *(uint *)(param_10 + 0xf4);
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - Valid                       : %s\n",
                       (&PTR_s_FALSE_001276d0)[uVar7 & 1],ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ContextID                   : %u\n",
                       (ulong)(*(uint *)(param_10 + 0xf8) >> 5 & 0x7ff),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForcePDRestore              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xf4) & 2) * 4),
                       ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForceRestore                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xf4) & 4) * 2),
                       ppuVar5,param_13,param_14);
    ppuVar5 = &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - AddressingMode              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700 +
                        (ulong)(*(uint *)(param_10 + 0xf4) & 0x18)),
                       &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - FaultHandling               : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FAULT_AND_HANG_001276e0 +
                        (ulong)(*(uint *)(param_10 + 0xf4) >> 3 & 0x18)),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - PrivilegeAccess             : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xf4) >> 5 & 8))
                       ,ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - LogicalRingContextAddress   : 0x%08x\n",
                       (ulong)(*(uint *)(param_10 + 0xf4) >> 0xc),ppuVar5,param_13,param_14);
    if ((*(byte *)(param_10 + 0xb0) & 1) == 0) {
      pcVar13 = " pending ";
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "\n    Execution List 1:  %s\n",pcVar13,ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      Context 0:\n",extraout_RDX_05,ppuVar5,param_13,param_14);
    uVar7 = *(uint *)(param_10 + 0xfc);
    if ((uVar7 & 0xe00) != 0) {
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "    * Reserved bits are set!  Data may not be valid!\n",extraout_RDX_06,
                         ppuVar5,param_13,param_14);
      uVar7 = *(uint *)(param_10 + 0xfc);
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - Valid                       : %s\n",
                       (&PTR_s_FALSE_001276d0)[uVar7 & 1],ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ContextID                   : %u\n",
                       (ulong)(*(uint *)(param_10 + 0x100) >> 5 & 0x7ff),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForcePDRestore              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xfc) & 2) * 4),
                       ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForceRestore                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xfc) & 4) * 2),
                       ppuVar5,param_13,param_14);
    ppuVar5 = &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - AddressingMode              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700 +
                        (ulong)(*(uint *)(param_10 + 0xfc) & 0x18)),
                       &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - FaultHandling               : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FAULT_AND_HANG_001276e0 +
                        (ulong)(*(uint *)(param_10 + 0xfc) >> 3 & 0x18)),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - PrivilegeAccess             : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0xfc) >> 5 & 8))
                       ,ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - LogicalRingContextAddress   : 0x%08x\n",
                       (ulong)(*(uint *)(param_10 + 0xfc) >> 0xc),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      Context 1:\n",extraout_RDX_07,ppuVar5,param_13,param_14);
    uVar7 = *(uint *)(param_10 + 0x104);
    if ((uVar7 & 0xe00) != 0) {
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "    * Reserved bits are set!  Data may not be valid!\n",extraout_RDX_08,
                         ppuVar5,param_13,param_14);
      uVar7 = *(uint *)(param_10 + 0x104);
    }
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - Valid                       : %s\n",
                       (&PTR_s_FALSE_001276d0)[uVar7 & 1],ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ContextID                   : %u\n",
                       (ulong)(*(uint *)(param_10 + 0x108) >> 5 & 0x7ff),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForcePDRestore              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0x104) & 2) * 4)
                       ,ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - ForceRestore                : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0x104) & 4) * 2)
                       ,ppuVar5,param_13,param_14);
    ppuVar5 = &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - AddressingMode              : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700 +
                        (ulong)(*(uint *)(param_10 + 0x104) & 0x18)),
                       &PTR_s_ADVANCED_CONTEXT_WITHOUT_AD_SUPP_00127700,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - FaultHandling               : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FAULT_AND_HANG_001276e0 +
                        (ulong)(*(uint *)(param_10 + 0x104) >> 3 & 0x18)),ppuVar5,param_13,param_14)
    ;
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - PrivilegeAccess             : %s\n",
                       *(undefined8 *)
                        ((long)&PTR_s_FALSE_001276d0 + (ulong)(*(uint *)(param_10 + 0x104) >> 5 & 8)
                        ),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "      - LogicalRingContextAddress   : 0x%08x\n",
                       (ulong)(*(uint *)(param_10 + 0x104) >> 0xc),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "\n    Context Status Buffer Pointers:\n",extraout_RDX_09,ppuVar5,param_13,
                       param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - WritePointer                : %d\n",
                       (ulong)(*(uint *)(param_10 + 0xb8) & 0xf),ppuVar5,param_13,param_14);
    uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                       "    - ReadPointer                 : %d\n",
                       (ulong)(*(uint *)(param_10 + 0xb8) >> 8 & 0xf),ppuVar5,param_13,param_14);
    uVar9 = 0;
    do {
      if ((*(ushort *)(param_10 + 0xbc + uVar9 * 8) & 0x1ff) == 0) goto LAB_000450ff;
      lVar10 = 0;
      iVar11 = 100;
      bVar12 = true;
      uVar7 = 1;
      uVar6 = 0;
      do {
        if ((*(uint *)(param_10 + 0xbc + uVar9 * 8) & uVar7) != 0) {
          if (!bVar12) {
            iVar1 = _snprintf(local_a8 + uVar6,(long)iVar11," | ");
            if (iVar11 - iVar1 != 0 && iVar1 <= iVar11) {
              uVar6 = (ulong)(uint)((int)uVar6 + iVar1);
              iVar11 = iVar11 - iVar1;
            }
          }
          bVar12 = false;
          iVar3 = _snprintf(local_a8 + uVar6,(long)iVar11,"%s",*(char **)((long)&csbReason + lVar10)
                           );
          iVar1 = 0;
          if (iVar3 < iVar11) {
            iVar1 = iVar3;
          }
          uVar6 = (ulong)(uint)((int)uVar6 + iVar1);
          iVar11 = iVar11 - iVar1;
          uVar14 = extraout_XMM0_Qa_00;
        }
        uVar7 = uVar7 * 2;
        lVar10 = lVar10 + 8;
      } while (lVar10 != 0x48);
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "\n    Context Status Buffer Entry %d:\n",uVar9,param_10,param_13,param_14)
      ;
      uVar6 = uVar9;
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "    - ContextSwitchReason(0x%02x)   : ",
                         (ulong)(*(uint *)(param_10 + 0xbc + uVar9 * 8) & 0x1ff),uVar9,param_13,
                         param_14);
      uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                         "%s\n",local_a8,uVar6,param_13,param_14);
      if ((*(uint *)(param_10 + 0xbc + uVar9 * 8) & 0x1ff) != 1) {
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"    - ContextID                   : %u\n",
                           (ulong)(*(uint *)(param_10 + 0xc0 + uVar9 * 8) >> 5 & 0x7ff),param_10,
                           param_13,param_14);
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"    - LiteRestore                 : %s\n",
                           *(undefined8 *)
                            ((long)&PTR_s_FALSE_001276d0 +
                            (ulong)(*(uint *)(param_10 + 0xbc + uVar9 * 8) >> 0xc & 8)),
                           &PTR_s_FALSE_001276d0,param_13,param_14);
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"    - SemaphoreWaitMode           : %s\n",
                           &DAT_00113088 +
                           *(int *)(&DAT_00113088 +
                                   (*(uint *)(param_10 + 0xbc + uVar9 * 8) >> 9 & 4)),&DAT_00113088,
                           param_13,param_14);
        uVar14 = drvErrLog(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this
                           ,"    - DisplayPlane                : 0x%02x\n",
                           (ulong)(*(uint *)(param_10 + 0xbc + uVar9 * 8) >> 0xc & 7),uVar9,param_13
                           ,param_14);
      }
      uVar7 = (int)uVar9 + 1;
      uVar9 = (ulong)uVar7;
    } while (uVar7 != 6);
  }
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGHardwareRingBuffer::dumpPageTableStatus(debugRegisters&)

void __thiscall
IGHardwareRingBuffer::dumpPageTableStatus
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined *puVar1;
  undefined **ppuVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  
  if ((*(byte *)(param_10 + 0xac) & 0x20) == 0) {
    drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
              "\n-- Page Table Appears to be okay --\n\n",param_11,param_12,param_13,param_14);
    return;
  }
  uVar3 = IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),1,7);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "   - Page Fault Error detected!  FAULT_REG=0x%08x\n",
                    (ulong)*(uint *)(param_10 + 0x9d),param_12,param_13,param_14);
  puVar1 = &DAT_00113078;
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - Type      :  %s\n",
                    &DAT_00113078 +
                    *(int *)(&DAT_00113078 + (ulong)(*(uint *)(param_10 + 0x9d) & 6) * 2),
                    &DAT_00113078,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - Source ID :  %d\n",(ulong)(*(uint *)(param_10 + 0x9d) >> 3 & 0xff),
                    puVar1,param_13,param_14);
  ppuVar2 = &PTR_s_Main__RCS__00127680;
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - Engine ID :  %s\n",
                    *(undefined8 *)
                     ((long)&PTR_s_Main__RCS__00127680 +
                     (ulong)(*(uint *)(param_10 + 0x9d) >> 9 & 0x38)),&PTR_s_Main__RCS__00127680,
                    param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n     Additional Registers (ring buffer mode):\n",extraout_RDX,ppuVar2,
                    param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - PAGETABLE_PP_PFIR          = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4510),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - PAGETABLE_PP_PFD           = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4580),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP0_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2270),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP0_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2274),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP1_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2278),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP1_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x227c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP2_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2280),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP2_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2284),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP3_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2288),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - RCS_PDP3_DESCRIPTOR hi     = 0x%08x\n\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x228c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - PAGETABLE_BCS_SWCTRL       = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22200),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP0_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22270),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP0_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22274),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP1_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22278),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP1_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2227c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP2_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22280),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP2_DESCRIPTOR hi     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22284),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP3_DESCRIPTOR lo     = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22288),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - BCS_PDP3_DESCRIPTOR hi     = 0x%08x\n\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2228c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP0_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0270),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP0_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0274),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP1_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0278),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP1_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c027c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP2_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0280),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP2_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0284),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP3_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0288),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS0_PDP3_DESCRIPTOR hi    = 0x%08x\n\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c028c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP0_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0270),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP0_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0274),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP1_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0278),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP1_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d027c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP2_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0280),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP2_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0284),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP3_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0288),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VCS2_PDP3_DESCRIPTOR hi    = 0x%08x\n\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d028c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP0_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8270),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP0_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8274),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP1_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8278),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP1_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c827c),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP2_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8280),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP2_DESCRIPTOR hi    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8284),ppuVar2,param_13,
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "     - VECS_PDP3_DESCRIPTOR lo    = 0x%08x\n",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8288),ppuVar2,param_13,
                    param_14);
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "     - VECS_PDP3_DESCRIPTOR hi    = 0x%08x\n\n",
            (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c828c),ppuVar2,param_13,param_14);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),0,7);
  return;
}



// IGHardwareRingBuffer::dumpRingBuffer(debugRegisters&)

void __thiscall
IGHardwareRingBuffer::dumpRingBuffer
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  undefined1 *puVar3;
  ulong uVar4;
  uint uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  char *pcVar6;
  uint uVar7;
  int iVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar9;
  
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)((long)this + 0x80));
  uVar1 = *(int *)((long)this + 0x8c) - 1;
  uVar7 = (*param_10 & 0x1ffffc) - 4 & uVar1;
  uVar1 = uVar7 - 400 & uVar1;
  uVar9 = drvErrLog(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long)this,"-----------------------------------\n",extraout_RDX,param_12,
                    param_13,param_14);
  puVar3 = &kIGHwCsDesc;
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "Dumping %s ring buffer contents:\n",
                    *(undefined8 *)((long)&PTR_s_RCS_00127425 + (ulong)(byte)param_10[0x27] * 0x79),
                    &kIGHwCsDesc,param_13,param_14);
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "  Start Offset:  0x%08x\n",(ulong)uVar1,puVar3,param_13,param_14);
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "  Head Offset :  0x%08x   (Adjusted to previous instruction)\n",(ulong)uVar7,
                    puVar3,param_13,param_14);
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "  End Offset  :  0x%08x\n",
                    (ulong)(*(int *)((long)this + 0x8c) - 1U & uVar1 + 0x1b8),puVar3,param_13,
                    param_14);
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "-----------------------------------\n",extraout_RDX_00,puVar3,param_13,param_14
                   );
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\nOffset       Value\n------------------------\n",extraout_RDX_01,puVar3,
                    param_13,param_14);
  iVar8 = 0;
  do {
    uVar5 = *(int *)((long)this + 0x8c) - 1U & uVar1 + iVar8;
    uVar4 = (ulong)*(uint *)(lVar2 + (ulong)uVar5);
    pcVar6 = "";
    if (uVar7 == uVar5) {
      pcVar6 = "  <---- RING HEAD POINTER (PRB0_HEAD)";
    }
    uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                      "0x%08x : 0x%08x%s\n",(ulong)uVar5,uVar4,pcVar6,param_14);
    iVar8 = iVar8 + 4;
  } while (iVar8 != 0x1b8);
  uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\nAublist command line:\n-----------------------\nAubList -d ",extraout_RDX_02,
                    uVar4,pcVar6,param_14);
  iVar8 = 0;
  do {
    uVar4 = (ulong)(*(int *)((long)this + 0x8c) - 1U & uVar1 + iVar8);
    uVar9 = drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                      "0x%08x ",(ulong)*(uint *)(lVar2 + uVar4),uVar4,pcVar6,param_14);
    iVar8 = iVar8 + 4;
  } while (iVar8 != 0x1b8);
  drvErrLog(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n\n",
            extraout_RDX_03,uVar4,pcVar6,param_14);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IGHardwareRingBuffer::dumpBatchBuffer(debugRegisters&, ResourceCacheElement*)

void __cdecl
IGHardwareRingBuffer::dumpBatchBuffer
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,long param_9,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
            "* Ring buffer dumps disabled.  Use DEBUG_DUMP_RINGS to enable.\n\n",param_11,param_12,
            param_13,param_14);
  return;
}



// IGHardwareRingBuffer::dumpRegisters()

void __thiscall
IGHardwareRingBuffer::dumpRegisters
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  char *pcVar1;
  undefined8 uVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),1,7);
  uVar2 = _IOSleep(10);
  uVar2 = drvErrLog(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n",
                    extraout_RDX,param_12,param_13,param_14);
  uVar2 = drvErrLog(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "===========================================================================\n",
                    extraout_RDX_00,param_12,param_13,param_14);
  uVar2 = drvErrLog(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "                          MMIO Register Dump\n",extraout_RDX_01,param_12,
                    param_13,param_14);
  pcVar1 = "===========================================================================\n";
  uVar2 = drvErrLog(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "===========================================================================\n",
                    extraout_RDX_02,param_12,param_13,param_14);
  uVar2 = dumpRegistersRCS(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar1
                           ,extraout_RDX_03,param_12,param_13,param_14);
  uVar2 = dumpRegistersDebug(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                             pcVar1,extraout_RDX_04,param_12,param_13,param_14);
  uVar2 = dumpRegistersBCS(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar1
                           ,extraout_RDX_05,param_12,param_13,param_14);
  uVar2 = dumpRegistersVCS(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar1
                           ,extraout_RDX_06,param_12,param_13,param_14);
  uVar2 = dumpRegistersVCS2(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                            pcVar1,extraout_RDX_07,param_12,param_13,param_14);
  uVar2 = dumpRegistersVECS(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,
                            pcVar1,extraout_RDX_08,param_12,param_13,param_14);
  dumpRegistersSysConfig
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,pcVar1,
             extraout_RDX_09,param_12,param_13,param_14);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)((long)this + 0x10),0,7);
  uVar2 = _IOSleep(10);
  drvErrLog(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n",
            extraout_RDX_10,param_12,param_13,param_14);
  return;
}



// IGHardwareRingBuffer::dumpSemaphoreRegs()

void IGHardwareRingBuffer::dumpSemaphoreRegs(void)

{
  return;
}



// IGHardwareRingBuffer::dumpRegistersRCS()

void __thiscall
IGHardwareRingBuffer::dumpRegistersRCS
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\nMAIN MMIO Registers\n-------------------------------------------------\n",
                    extraout_RDX,param_12,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2028,"GFXREG_EXECCONDITION_EXCC",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2028),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2030,"GFXREG_RING_BUFFER_PRB0_TAIL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2034,"GFXREG_RING_BUFFER_PRB0_HEAD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2038,"GFXREG_RING_BUFFER_PRB0_START",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2038),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x203c,"GFXREG_RING_BUFFER_PRB0_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x203c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2050,"GFXREG_RENDERDEBUG_RC_PSMI_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2050),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2054,"GFXREG_RENDERDEBUG_RC_PWRCTX_MAXCNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2054),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2068,"GFXREG_RENDERDEBUG_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x206c,"GFXREG_RENDERDEBUG_INSTDONE_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x206c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2070,"GFXREG_RENDERDEBUG_INSTPS",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2070),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2074,"GFXREG_RENDERDEBUG_ACTHD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2074),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2078,"GFXREG_RENDERDEBUG_DMA_FADD_P",
                    (ulong)*(uint *)(IGAccelCLContext::telemetryReadOABuffer +
                                    *(long *)((long)this + 0x50) + 2),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x207c,"GFXREG_CONTROL_INSTDONE_2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x207c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2084,"GFXREG_CONTROL_3D_CHICKEN",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2084),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x208c,"GFXREG_CONTROL_3D_CHICKEN2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x208c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2090,"GFXREG_CONTROL_3D_CHICKEN3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2090),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2094,"GFXREG_IDENTIFICATION_NOPID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",IGAccelCLContext::telemetryMapOABufferMemory,
                    "GFXREG_CONTROL_HWSTAM",
                    (ulong)*(uint *)(IGAccelCLContext::telemetryMapOABufferMemory +
                                    *(long *)((long)this + 0x50)),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x209c,"GFXREG_CONTROL_MI_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x209c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n","er12getMetaClassEv","GFXREG_GUC_SCTR_GTHR_IER",
                    (ulong)*(uint *)("__ZNK14IGMappedBuffer12getMetaClassEv" +
                                    *(long *)((long)this + 0x50) + 0x13),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n","DescriptorEv","GFXREG_GUC_SCTR_GTHR_IMR",
                    (ulong)*(uint *)("__ZNK14IGMappedBuffer19getMemoryDescriptorEv" +
                                    *(long *)((long)this + 0x50) + 0x20),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n","ppedBuffer12getMetaClassEv","GFXREG_RENDER_BLT_IER",
                    (ulong)*(uint *)("__ZNK14IGMappedBuffer12getMetaClassEv" +
                                    *(long *)((long)this + 0x50) + 0xb),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n","oryOptionsEv","GFXREG_RCS_RSVD_IMR",
                    (ulong)*(uint *)("__ZNK14IGMappedBuffer16getMemoryOptionsEv" +
                                    *(long *)((long)this + 0x50) + 0x1d),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20b0,"GFXREG_CONDITION_EIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20b4,"GFXREG_CONDITION_EMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20b4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20b8,"GFXREG_CONDITION_ESR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20c0,"GFXREG_MAIN_INSTPM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20c4,"GFXREG_CONTROL_CMD_CCTL_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20c4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20d0,"GFXREG_RCS_RESET_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2110,"GFXREG_BATCHBUFF_BB_STATE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2110),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7000,"GFXREG_CACHE_MODE_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7000),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7004,"GFXREG_CACHE_MODE_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7004),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7100,"GFXREG_COMMON_SLICE_INSTDONE_REG",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7100),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7010,"GFXREG_COMMON_SLICE_CHICKEN1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7010),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7014,"GFXREG_COMMON_SLICE_CHICKEN2",
                    (ulong)*(uint *)(IGAccelTraceStreamManager::turnOn +
                                    *(long *)((long)this + 0x50) + 2),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20e0,"GFXREG_FF_SLICE_CS_CHICKEN1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20e0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x20e4,"GFXREG_FF_SLICE_CS_CHICKEN2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x20e4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2134,"GFXREG_RING_BUFFER_UHPTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2134),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2140,"GFXREG_BATCHBUFF_BB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2140),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2168,"GFXREG_BB_ADDR_UDW",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2168),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2148,"GFXREG_BATCHBUFF_BB_PREEMPT_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2148),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2178,"GFXREG_RENDER_PR_CTR_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2178),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x217c,"GFXREG_RENDER_PR_CTR_THRSH",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x217c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2180,"GFXREG_RING_BUFFER_CCID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2180),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2190,"GFXREG_RENDER_PR_CTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2190),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x21a0,"GFXREG_RENDER_CTX_SIZE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x21a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x21a4,"GFXREG_RENDER_CTX_AS_OFFSET",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x21a4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x21b0,"GFXREG_POSH_LRCA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x21b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x21d0,"GFXREG_SCRATCHPAD_ECOSKPD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x21d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2470,"GFXREG_SCRATCHPAD_VFSKPD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2470),param_14);
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x2450,"GFXREG_SCRATCHPAD_VFDC",
            (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2450),param_14);
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2200,"GFXREG_INTERNAL_CSFLFSM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2200),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2204,"GFXREG_INTERNAL_CSFLFLAG",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2204),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2208,"GFXREG_INTERNAL_CSFLTRK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2208),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220c,"GFXREG_INTERNAL_CSCMDOP",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2210,"GFXREG_INTERNAL_CSCMDVLD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2210),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2360,"GFXREG_OAUNIT_OACONTROL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2360),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2364,"GFXREG_OAUNIT_OASTATUS1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2364),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2368,"GFXREG_OAUNIT_OASTATUS2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2368),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x27f0,"GFXREG_OAUNIT_OANOASELECT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x27f0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2370,"GFXREG_OAUNIT_OAREPORTTRIG4",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2370),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2374,"GFXREG_OAUNIT_OAREPORTTRIG3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2374),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2378,"GFXREG_OAUNIT_OAREPORTTRIG2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2378),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x237c,"GFXREG_OAUNIT_OAREPORTTRIG1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x237c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2380,"GFXREG_OAUNIT_OASTARTTRIG4",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2380),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2384,"GFXREG_OAUNIT_OASTARTTRIG3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2384),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2388,"GFXREG_OAUNIT_OASTARTTRIG2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2388),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x238c,"GFXREG_OAUNIT_OASTARTTRIG1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x238c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2390,"GFXREG_OAUNIT_CEC0_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2390),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2394,"GFXREG_OAUNIT_CEC0_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2394),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2398,"GFXREG_OAUNIT_CEC1_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2398),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x239c,"GFXREG_OAUNIT_CEC1_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x239c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x23a0,"GFXREG_OAUNIT_CEC2_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x23a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x23a4,"GFXREG_OAUNIT_CEC2_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x23a4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x23a8,"GFXREG_OAUNIT_CEC3_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x23a8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x23ac,"GFXREG_OAUNIT_CEC3_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x23ac),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x23b0,"GFXREG_OAUNIT_OABUFFER",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x23b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2400,"GFXREG_RENDER_MI_PREDICATE_SRC0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2400),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2408,"GFXREG_RENDER_MI_PREDICATE_SRC1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2408),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2410,"GFXREG_RENDER_MI_PREDICATE_DATA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2410),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2418,"GFXREG_RENDER_MI_PREDICATE_RESULT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2418),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2420,"GFXREG_RENDER_3DPRIM_END_OFFSET",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2420),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2430,"GFXREG_RENDER_3DPRIM_START_VERTEX",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2430),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2434,"GFXREG_RENDER_3DPRIM_VERTEX_COUNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2434),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2438,"GFXREG_RENDER_3DPRIM_INSTANCE_COUNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2438),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x243c,"GFXREG_RENDER_3DPRIM_START_INSTANCE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x243c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2440,"GFXREG_RENDER_3DPRIM_BASE_VERTEX",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2440),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2234,"GFXREG_RCS_EXECLIST_STATUS",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2234),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2250,"GFXREG_RCS_ELST0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2250),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2260,"GFXREG_RCS_ELST1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2260),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2270,"GFXREG_RCS_PDP0_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2270),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2274,"GFXREG_RCS_PDP0_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2274),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2278,"GFXREG_RCS_PDP1_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2278),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x227c,"GFXREG_RCS_PDP1_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x227c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2280,"GFXREG_RCS_PDP2_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2280),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2284,"GFXREG_RCS_PDP2_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2284),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2288,"GFXREG_RCS_PDP3_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2288),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x228c,"GFXREG_RCS_PDP3_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x228c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x229c,"GFXREG_RCS_GFX_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x229c),param_14);
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x222c,"GFXREG_RENDER_MTCH_CID_RST",
            (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x222c),param_14);
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22e0,"GFXREG_CONTROL_PRBL_SF",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22e0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2234,"GFXREG_STATUS_RUN_LIST",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2234),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x223c,"GFXREG_STATUS_CTXT_ST_PTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x223c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2244,"GFXREG_STATUS_CTXT_SR_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2244),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2248,"GFXREG_STATUS_CTXT_PREMP_DBG",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2248),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4030,"GFXREG_COMMAND_ARB_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4040,"GFXREG_COMMAND_GFX_PEND_TLB_0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4040),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4044,"GFXREG_COMMAND_GFX_PEND_TLB_1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4044),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4050,"GFXREG_COMMAND_ZSHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4050),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4090,"GFXREG_COMMANDDBG_ECOCHK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4090),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4094,"GFXREG_COMMANDDBG_FAULT_REG",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2068,"GFXREG_RENDERDEBUG_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4204,"GFXREG_CONTROL_MIDARB_PRIO",
                    (ulong)*(uint *)(IOAccelSubmitter2::isOpportunisticWorkload +
                                    *(long *)((long)this + 0x50) + 6),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4510,"GFXREG_PAGETABLE_PP_PFIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4510),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4580,"GFXREG_PAGETABLE_PP_PFD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4580),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4700,"GFXREG_VECTOR_TLBPEND_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4700),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4704,"GFXREG_VECTOR_TLBPEND_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4704),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4708,"GFXREG_VECTOR_TLBPEND_RDY0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4708),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x470c,"GFXREG_VECTOR_TLBPEND_RDY1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x470c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4780,"GFXREG_VECTOR_MTTLB_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4780),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4784,"GFXREG_VECTOR_MTTLB_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4784),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4788,"GFXREG_VECTOR_VICTLB_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4788),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x478c,"GFXREG_VECTOR_VICTLB_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x478c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4790,"GFXREG_VECTOR_RCCTLB_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4790),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4794,"GFXREG_VECTOR_RCCTLB_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x4794),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x4798,"GFXREG_VECTOR_RCZTLB_VLD0",
                    (ulong)*(uint *)(IGSpinLock::withOptions + *(long *)((long)this + 0x50) + 2),
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x479c,"GFXREG_VECTOR_RCZTLB_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x479c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7008,"GFXREG_CONTROL_GT_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7008),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x7020,"GFXREG_PAGETABLE_FBC_RT_BASE_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x7020),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x8000,"GFXREG_GPMUNIT_MESSAGE_BUSRST",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x8000),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9030,"GFXREG_SYSCONFIG_SQCM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9034,"GFXREG_SYSCONFIG_SQERR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9070,"GFXREG_SYSCONFIG_MFCR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9070),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91b8,"GFXREG_SYSCONFIG_PERFCNT1L",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91bc,"GFXREG_SYSCONFIG_PERFCNT1H",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91bc),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91c0,"GFXREG_SYSCONFIG_PERFCNT2L",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91c4,"GFXREG_SYSCONFIG_PERFCNT2H",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91c4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91c8,"GFXREG_SYSCONFIG_PERFMATARIXL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91c8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x91cc,"GFXREG_SYSCONFIG_PERFMATARIXH",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x91cc),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9400,"GFXREG_SYSCONFIG_UCGCTL1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9400),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9404,"GFXREG_SYSCONFIG_UCGCTL2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9404),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9408,"GFXREG_SYSCONFIG_UCGCTL3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9408),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x940c,"GFXREG_SYSCONFIG_UCGCTL4",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x940c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9410,"GFXREG_SYSCONFIG_RCGCTL1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9410),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9414,"GFXREG_SYSCONFIG_RCGCTL2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9414),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9418,"GFXREG_SYSCONFIG_IFDIMCTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9418),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x941c,"GFXREG_SYSCONFIG_GDRST",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x941c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9420,"GFXREG_SYSCONFIG_RSTCTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9420),param_14);
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x9424,"GFXREG_SYSCONFIG_MISCCPCTL",
            (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9424),param_14);
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9870,"GFXREG_SYSCONFIG_PSMIBASE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9870),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9874,"GFXREG_SYSCONFIG_PSMICTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9874),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x9878,"GFXREG_SYSCONFIG_PSMISTATUS",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x9878),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe404,"GFXREG_CONTROL_TD_CTL2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe404),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe408,"GFXREG_CONTROL_TD_VF_VS_EMSK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe408),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe40c,"GFXREG_CONTROL_TD_GS_EMSK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe40c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe4b0,"GFXREG_CONTROL_TD_HS_EMSK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe4b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe4b4,"GFXREG_CONTROL_TD_DS_EMSK",
                    (ulong)*(uint *)(IGStolenMemoryDescriptor::initSubRange +
                                    *(long *)((long)this + 0x50) + 2),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe410,"GFXREG_CONTROL_TD_WIZ_EMSK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe410),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0xe428,"GFXREG_CONTROL_TD_TS_EMSK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe428),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24d0,"GFXREG_FORCE_TO_NONPRIV0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24d4,"GFXREG_FORCE_TO_NONPRIV1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24d4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24d8,"GFXREG_FORCE_TO_NONPRIV2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24d8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24dc,"GFXREG_FORCE_TO_NONPRIV3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24dc),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24e0,"GFXREG_FORCE_TO_NONPRIV4",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24e0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24ec,"GFXREG_FORCE_TO_NONPRIV7",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24ec),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24f0,"GFXREG_FORCE_TO_NONPRIV8",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24f0),param_14);
  uVar2 = (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24f4);
  pcVar1 = "GFXREG_FORCE_TO_NONPRIV9";
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x24f4,"GFXREG_FORCE_TO_NONPRIV9",uVar2,param_14);
  uVar3 = _IOSleep(5);
  dumpRegisterRange(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,0x2000,0x400,
                    (ulong)pcVar1,uVar2,param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersDebug()

void __thiscall
IGHardwareRingBuffer::dumpRegistersDebug
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 extraout_RDX;
  int iVar1;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nDumping EU_DEBUG_REGISTERS Registers\n-------------------------------------------------\n"
                    ,extraout_RDX,param_12,param_13,param_14);
  iVar1 = 0x400;
  uVar2 = 0;
  do {
    *(int *)(*(long *)(&DAT_00001270 + *(long *)((long)this + 0x10)) + 0xe460) = iVar1;
    uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                      "[0x%4x]: EU: %2d, %-23s: 0x%08x\n",0xe4a0,uVar2,"GFXREG_EU_DEBUG_RDATA",
                      (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe4a0));
    uVar2 = (ulong)((int)uVar2 + 1);
    iVar1 = iVar1 + 0x10000;
  } while (iVar1 != 0x40400);
  uVar2 = 8;
  iVar1 = 0x80400;
  do {
    *(int *)(*(long *)(&DAT_00001270 + *(long *)((long)this + 0x10)) + 0xe460) = iVar1;
    uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                      "[0x%4x]: EU: %2d, %-23s: 0x%08x\n",0xe4a0,uVar2,"GFXREG_EU_DEBUG_RDATA",
                      (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0xe4a0));
    uVar2 = (ulong)((int)uVar2 + 1);
    iVar1 = iVar1 + 0x10000;
  } while (iVar1 != 0xc0400);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersBCS()

void __thiscall
IGHardwareRingBuffer::dumpRegistersBCS
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nBLIT MMIO Registers\n-------------------------------------------------\n",
                    extraout_RDX,param_12,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22028,"GFXREG_EXECCONDITION_BCS_EXCC",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22028),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22030,"GFXREG_RING_BUFFER_BCS_RING_TAIL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22034,"GFXREG_RING_BUFFER_BCS_RING_HEAD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22038,"GFXREG_RING_BUFFER_BCS_RING_START",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22038),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2203c,"GFXREG_RING_BUFFER_BCS_RING_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2203c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22050,"GFXREG_BLTDEBUG_RC_PSMI_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22050),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22054,"GFXREG_BLTDEBUG_RC_PWRCTX_MAXCNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22054),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22064,"GFXREG_BLTDEBUG_BCS_IPEIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22064),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22068,"GFXREG_BLTDEBUG_BCS_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2206c,"GFXREG_BLTDEBUG_BCS_INSTDONE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2206c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22074,"GFXREG_BLTDEBUG_BCS_ACTHD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22074),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22078,"GFXREG_BLTRDEBUG_BCS_DMA_FADD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22078),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22094,"GFXREG_IDENTIFICATION_BCS_NOPID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22098,"GFXREG_CONTROL_BCS_HWSTAM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22098),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2209c,"GFXREG_CONTROL_BCS_MI_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2209c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220a0,"GFXREG_CONTROL_BCS_GAC_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n","NK14IGMappedBuffer17getMappingOptionsEv",
                    "GFXREG_BCS_RSVD_IMR",
                    (ulong)*(uint *)("__ZNK14IGMappedBuffer17getMappingOptionsEv" +
                                    *(long *)((long)this + 0x50) + 3),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220b0,"GFXREG_CONTROL_BCS_EIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220b4,"GFXREG_CONTROL_BCS_EMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220b4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220b8,"GFXREG_CONTROL_BCS_ESR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220c0,"GFXREG_BLT_BCS_INSTPM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x220d0,"GFXREG_BCS_RESET_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x220d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22134,"GFXREG_RING_BUFFER_BCS_UHPTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22134),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22140,"GFXREG_BATCHBUFF_BCS_BB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22140),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22190,"GFXREG_BLT_RING_BCS_RCCID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22190),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22198,"GFXREG_BLT_RING_BCS_RNCID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22198),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x221d0,"GFXREG_SCRATCHPAD_BCS_ECOSKPD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x221d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22200,"GFXREG_PAGETABLE_BCS_SWCTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22200),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22270,"GFXREG_BCS_PDP0_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22270),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22274,"GFXREG_BCS_PDP0_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22274),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22278,"GFXREG_BCS_PDP1_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22278),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2227c,"GFXREG_BCS_PDP1_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2227c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22280,"GFXREG_BCS_PDP2_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22280),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22284,"GFXREG_BCS_PDP2_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22284),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22288,"GFXREG_BCS_PDP3_DESCRIPTOR_LO",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22288),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2228c,"GFXREG_BCS_PDP3_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2228c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2229c,"GFXREG_BCS_GFX_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2229c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22358,"GFXREG_BCS_TIMESTAMP",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22358),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24000,"GFXREG_BLT_GAC_GAB",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24000),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x22080,"GFXREG_COMMAND_BCS_HWS_PGA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x22080),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24094,"GFXREG_BLT_GAB_REPORT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24700,"GFXREG_BLTVECTOR_TLBPEND_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24700),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24708,"GFXREG_BLTVECTOR_TLBPEND_RDY0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24708),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24780,"GFXREG_BLTVECTOR_BCS_TLB_VLD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24780),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24784,"GFXREG_BLTVECTOR_BLB_TLB_VLD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24784),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x24788,"GFXREG_BLTVECTOR_CTX_TLB_VLD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x24788),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x2478c,"GFXREG_BLTVECTOR_PD_TLB_VLD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x2478c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x72204,"GFXREG_SPRITE_DVSASCALE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x72204),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x731ac,"GFXREG_SPRITE_DVSBSURFLIVE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x731ac),param_14);
  uVar2 = (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x73204);
  pcVar1 = "GFXREG_SPRITE_DVSBSCALE";
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x73204,"GFXREG_SPRITE_DVSBSCALE",uVar2,param_14);
  uVar3 = _IOSleep(5);
  dumpRegisterRange(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,0x22000,0x200
                    ,(ulong)pcVar1,uVar2,param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersVCS()

void __thiscall
IGHardwareRingBuffer::dumpRegistersVCS
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nMEDIA INSTANCE 0 MMIO Registers\n-------------------------------------------------\n"
                    ,extraout_RDX,param_12,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0080,"GFXREG_VCS0_HWS_PGA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0080),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0030,"GFXREG_VCS0_RING_BUFFER_TAIL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0034,"GFXREG_VCS0_RING_BUFFER_HEAD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0038,"GFXREG_VCS0_RING_BUFFER_START",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0038),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c003c,"GFXREG_VCS0_RING_BUFFER_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c003c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0050,"GFXREG_MEDIADEBUG_RC_PSMI_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0050),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0054,"GFXREG_VCS0_PWRCTX_MAXCNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0054),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0064,"GFXREG_MEDIADEBUG_VCS0_IPEIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0064),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0068,"GFXREG_VCS0_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c006c,"GFXREG_VCS0_VCS_INSTDONE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c006c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0074,"GFXREG_VCS0_ACTHD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0074),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0078,"GFXREG_VCS0_DMA_FADD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0078),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0094,"GFXREG_VCS0_NOPID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0098,"GFXREG_VCS0_HWSTAM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0098),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c009c,"GFXREG_VCS0_MI_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c009c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00a0,"GFXREG_VCS0_GAC_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00a8,"GFXREG_CONTROL_VCS0_IMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00a8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00b0,"GFXREG_VCS0_EIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00b4,"GFXREG_VCS0_EMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00b4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00b8,"GFXREG_VCS0_ESR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00c0,"GFXREG_VCS0_INSTPM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c00d0,"GFXREG_VCS0_RESET_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c00d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0110,"GFXREG_VCS0_BB_STATE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0110),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0114,"GFXREG_VCS0_SBB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0114),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0140,"GFXREG_VCS0_BB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0140),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0178,"GFXREG_VCS0_PR_CTR_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0178),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c017c,"GFXREG_VCS0_PR_CTR_THRSH",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c017c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0190,"GFXREG_VCS0_PR_CTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0190),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0198,"GFXREG_MEDIA_RING_VCS0_RNCID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0198),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c01d0,"GFXREG_VCS0_VCS_ECOSKPD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c01d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0270,"GFXREG_VCS0_PDP0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0270),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0274,"GFXREG_VCS0_PDP0_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0274),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0278,"GFXREG_VCS0_PDP1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0278),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c027c,"GFXREG_VCS0_PDP1_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c027c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0280,"GFXREG_VCS0_PDP2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0280),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0284,"GFXREG_VCS0_PDP2_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0284),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0288,"GFXREG_VCS0_PDP3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0288),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c028c,"GFXREG_VCS0_PDP3_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c028c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c0358,"GFXREG_VCS0_TIMESTAMP",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c0358),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12400,"GFXREG_MFC_VIN_AVD_ERROR_FLAGS",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12400),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12404,"GFXREG_MFC_VIN_AVD_ERROR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12404),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12408,"GFXREG_MFC_BITSTREAM_BYTECOUNT_SLICE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12408),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1240c,"GFXREG_MFC_BITSTREAM_SE_BITCOUNT_SLICE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1240c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12410,"GFXREG_MFC_AVC_CABAC_INSERTION_COUNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12410),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12414,"GFXREG_MFC_AVC_MINSIZE_PADDING_COUNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12414),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12418,"GFXREG_MFC_IMAGE_STATUS_MASK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12418),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1241c,"GFXREG_MFC_IMAGE_STATUS_CONTROL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1241c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",IGMappedBuffer::IGMappedBuffer,
                    "GFXREG_MFC_BITSTREAM_BYTECOUNT_FRAME",
                    (ulong)*(uint *)(IGMappedBuffer::IGMappedBuffer + *(long *)((long)this + 0x50)),
                    param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12424,"GFXREG_MFC_BITSTREAM_SE_BITCOUNT_FRAME",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12424),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12428,"GFXREG_MFC_AVC_CABAC_BIN_COUNT_FRAME",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12428),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1242c,"GFXREG_DEBUG_MFC_BSP_DEBUG0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1242c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12430,"GFXREG_DEBUG_MFC_BSP_DEBUG1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12430),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12434,"GFXREG_DEBUG_MFC_BSP_DEBUG2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12434),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12438,"GFXREG_DEBUG_MFC_VIN_DEBUG0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12438),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1243c,"GFXREG_DEBUG_MFC_VIN_DEBUG1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1243c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12440,"GFXREG_DEBUG_MFC_VIN_DEBUG2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12440),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x12444,"GFXREG_DEBUG_MFC_VIN_DEBUG3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x12444),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14040,"GFXREG_MEDIACONTROL_TLBPEND",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14040),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",82000,"GFXREG_MEDIA_GAC_GAB",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 82000),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14090,"GFXREG_MEDIACOMMANDDBG_ECOCHK",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14090),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x140a0,"GFXREG_MEDIACOMMANDDBG_ERROR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x140a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14700,"GFXREG_MEDIAVECTOR_TLBPEND_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14700),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14704,"GFXREG_MEDIAVECTOR_TLBPEND_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14704),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14708,"GFXREG_MEDIAVECTOR_TLBPEND_RDY0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14708),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1470c,"GFXREG_MEDIAVECTOR_TLBPEND_RDY1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1470c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14780,"GFXREG_MEDIAVECTOR_TLB064_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14780),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14784,"GFXREG_MEDIAVECTOR_TLB064_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14784),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14788,"GFXREG_MEDIAVECTOR_TLB132_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14788),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1478c,"GFXREG_MEDIAVECTOR_TLB132_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1478c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14790,"GFXREG_MEDIAVECTOR_TLB232_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14790),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14794,"GFXREG_MEDIAVECTOR_TLB232_VLD1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14794),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x14798,"GFXREG_MEDIAVECTOR_TLB304_VLD0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x14798),param_14);
  uVar2 = (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1479c);
  pcVar1 = "GFXREG_MEDIAVECTOR_TLB304_VLD1";
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x1479c,"GFXREG_MEDIAVECTOR_TLB304_VLD1",uVar2,param_14);
  uVar3 = _IOSleep(5);
  dumpRegisterRange(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,0x12000,0x200
                    ,(ulong)pcVar1,uVar2,param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersVCS2()

void __thiscall
IGHardwareRingBuffer::dumpRegistersVCS2
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nMEDIA INSTANCE 1 MMIO Registers\n-------------------------------------------------\n"
                    ,extraout_RDX,param_12,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0080,"GFXREG_VCS2_HWS_PGA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0080),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0030,"GFXREG_VCS2_RING_BUFFER_TAIL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0034,"GFXREG_VCS2_RING_BUFFER_HEAD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0038,"GFXREG_VCS2_RING_BUFFER_START",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0038),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d003c,"GFXREG_VCS2_RING_BUFFER_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d003c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0054,"GFXREG_VCS2_PWRCTX_MAXCNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0054),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0064,"GFXREG_MEDIADEBUG_VCS2_IPEIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0064),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0068,"GFXREG_VCS2_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d006c,"GFXREG_VCS2_VCS_INSTDONE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d006c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0074,"GFXREG_VCS2_ACTHD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0074),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0078,"GFXREG_VCS2_DMA_FADD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0078),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0094,"GFXREG_VCS2_NOPID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0098,"GFXREG_VCS2_HWSTAM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0098),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d009c,"GFXREG_VCS2_MI_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d009c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00a0,"GFXREG_VCS2_GAC_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00a0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00a8,"GFXREG_CONTROL_VCS2_IMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00a8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00b0,"GFXREG_VCS2_EIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00b4,"GFXREG_VCS2_EMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00b4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00b8,"GFXREG_VCS2_ESR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00c0,"GFXREG_VCS2_INSTPM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d00d0,"GFXREG_VCS2_RESET_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d00d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0110,"GFXREG_VCS2_BB_STATE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0110),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0114,"GFXREG_VCS2_SBB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0114),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0140,"GFXREG_VCS2_BB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0140),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0178,"GFXREG_VCS2_PR_CTR_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0178),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d017c,"GFXREG_VCS2_PR_CTR_THRSH",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d017c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0190,"GFXREG_VCS2_PR_CTR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0190),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0198,"GFXREG_MEDIA_RING_VCS2_RNCID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0198),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d01d0,"GFXREG_VCS2_VCS_ECOSKPD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d01d0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0270,"GFXREG_VCS2_PDP0",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0270),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0274,"GFXREG_VCS2_PDP0_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0274),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0278,"GFXREG_VCS2_PDP1",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0278),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d027c,"GFXREG_VCS2_PDP1_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d027c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0280,"GFXREG_VCS2_PDP2",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0280),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0284,"GFXREG_VCS2_PDP2_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0284),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d0288,"GFXREG_VCS2_PDP3",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0288),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1d028c,"GFXREG_VCS2_PDP3_DESCRIPTOR_HI",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d028c),param_14);
  uVar2 = (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1d0358);
  pcVar1 = "GFXREG_VCS2_TIMESTAMP";
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x1d0358,"GFXREG_VCS2_TIMESTAMP",uVar2,param_14);
  uVar3 = _IOSleep(5);
  dumpRegisterRange(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,0x12000,0x200
                    ,(ulong)pcVar1,uVar2,param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersVECS()

void __thiscall
IGHardwareRingBuffer::dumpRegistersVECS
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = _IOSleep(5);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nVEBOX MMIO Registers\n-------------------------------------------------\n",
                    extraout_RDX,param_12,param_13,param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8080,"GFXREG_VECS0_HWS_PGA",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8080),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8030,"GFXREG_VECS0_RING_BUFFER_TAIL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8030),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8034,"GFXREG_VECS0_RING_BUFFER_HEAD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8034),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8038,"GFXREG_VECS0_RING_BUFFER_START",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8038),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c803c,"GFXREG_VECS0_RING_BUFFER_CTL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c803c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8050,"GFXREG_VEBOXDEBUG_RC_PSMI_CTRL",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8050),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8054,"GFXREG_VECS0_PWRCTX_MAXCNT",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8054),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8064,"GFXREG_VEBOXDEBUG_VECS0_IPEIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8064),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8068,"GFXREG_VECS0_IPEHR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8068),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c806c,"GFXREG_VECS0_VECS_INSTDONE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c806c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8074,"GFXREG_VECS0_ACTHD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8074),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8078,"GFXREG_VECS0_DMA_FADD",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8078),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8094,"GFXREG_VECS0_NOPID",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8094),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8098,"GFXREG_VECS0_HWSTAM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8098),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c809c,"GFXREG_VECS0_MI_MODE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c809c),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c80a8,"GFXREG_CONTROL_VECS0_IMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c80a8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c80b0,"GFXREG_VECS0_EIR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c80b0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c80b4,"GFXREG_VECS0_EMR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c80b4),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c80b8,"GFXREG_VECS0_ESR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c80b8),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c80c0,"GFXREG_VECS0_INSTPM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c80c0),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8110,"GFXREG_VECS0_BB_STATE",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8110),param_14);
  uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x1c8140,"GFXREG_VECS0_BB_ADDR",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8140),param_14);
  uVar2 = (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x1c8358);
  pcVar1 = "GFXREG_VECS0_TIMESTAMP";
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",0x1c8358,"GFXREG_VECS0_TIMESTAMP",uVar2,param_14);
  uVar3 = _IOSleep(5);
  dumpRegisterRange(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,0x1a000,0x200
                    ,(ulong)pcVar1,uVar2,param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegistersSysConfig()

void __thiscall
IGHardwareRingBuffer::dumpRegistersSysConfig
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined8 uVar1;
  
  uVar1 = _IOSleep(5);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\n\nDumping OTHER MMIO Registers\n-------------------------------------------------\n"
                    ,extraout_RDX,param_12,param_13,param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x51000,"GFXREG_SYSCONFIG_DFSM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x51000),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",0x51004,"GFXREG_SYSCONFIG_DSSM",
                    (ulong)*(uint *)(*(long *)((long)this + 0x50) + 0x51004),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00100100,"GFXREG_SYSCONFIG_DPFC_CONTROL_SA",
                    (ulong)*(uint *)(&DAT_00100100 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00100104,
                    "GFXREG_SYSCONFIG_DPFC_CPU_FENCE_OFFSET",
                    (ulong)*(uint *)(&DAT_00100104 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00101000,"GFXREG_SYSCONFIG_TILECTL",
                    (ulong)*(uint *)(&DAT_00101000 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00101004,"GFXREG_SYSCONFIG_MISC0",
                    (ulong)*(uint *)(&DAT_00101004 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00101008,"GFXREG_SYSCONFIG_MGGC",
                    (ulong)*(uint *)(&DAT_00101008 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00108000,"GFXREG_SYSCONFIG_MTOLUD",
                    (ulong)*(uint *)(&DAT_00108000 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00108040,"GFXREG_SYSCONFIG_GFX_FLSH_CNTL",
                    (ulong)*(uint *)(&DAT_00108040 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00108080,"GFXREG_SYSCONFIG_MTOUUD",
                    (ulong)*(uint *)(&DAT_00108080 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_001080c0,"GFXREG_SYSCONFIG_MBDSM",
                    (ulong)*(uint *)(&DAT_001080c0 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00108100,"GFXREG_SYSCONFIG_MBGSM",
                    (ulong)*(uint *)(&DAT_00108100 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110000,"GFXREG_SYSCONFIG_GTVTD0",
                    (ulong)*(uint *)(&DAT_00110000 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110040,"GFXREG_SYSCONFIG_GTVTD1",
                    (ulong)*(uint *)(&DAT_00110040 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110080,"GFXREG_SYSCONFIG_GTVTD2",
                    (ulong)*(uint *)(&DAT_00110080 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_001100c0,"GFXREG_SYSCONFIG_GTVTD3",
                    (ulong)*(uint *)(&DAT_001100c0 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110100,"GFXREG_SYSCONFIG_GTVTD4",
                    (ulong)*(uint *)(&DAT_00110100 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110140,"GFXREG_SYSCONFIG_GTVTD5",
                    (ulong)*(uint *)(&DAT_00110140 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110180,"GFXREG_SYSCONFIG_GTVTD6",
                    (ulong)*(uint *)(&DAT_00110180 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_001101c0,"GFXREG_SYSCONFIG_GTVTD7",
                    (ulong)*(uint *)(&DAT_001101c0 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110200,"GFXREG_SYSCONFIG_GTVTD8",
                    (ulong)*(uint *)(&DAT_00110200 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110240,"GFXREG_SYSCONFIG_GTVTD9",
                    (ulong)*(uint *)(&DAT_00110240 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110280,"GFXREG_SYSCONFIG_GTVTD10",
                    (ulong)*(uint *)(&DAT_00110280 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_001102c0,"GFXREG_SYSCONFIG_GTVTD11",
                    (ulong)*(uint *)(&DAT_001102c0 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110300,"GFXREG_SYSCONFIG_GTVTD12",
                    (ulong)*(uint *)(&DAT_00110300 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110300,"GFXREG_SYSCONFIG_GTVTD12",
                    (ulong)*(uint *)(&DAT_00110300 + *(long *)((long)this + 0x50)),param_14);
  uVar1 = drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "[0x%4x]: %-32s: 0x%08x\n",&DAT_00110340,"GFXREG_SYSCONFIG_GTVTD13",
                    (ulong)*(uint *)(&DAT_00110340 + *(long *)((long)this + 0x50)),param_14);
  drvErrLog(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
            "[0x%4x]: %-32s: 0x%08x\n",&DAT_001103c0,"GFXREG_SYSCONFIG_GTVTD15",
            (ulong)*(uint *)(&DAT_001103c0 + *(long *)((long)this + 0x50)),param_14);
  _IOSleep(5);
  return;
}



// IGHardwareRingBuffer::dumpRegisterRange(unsigned int, unsigned int)

void __thiscall
IGHardwareRingBuffer::dumpRegisterRange
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint param_10,ulong param_11,ulong param_12,undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar1;
  ulong uVar2;
  undefined8 uVar3;
  
  uVar3 = drvErrLog(param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\nMMIO Offset:\n------------\n",param_11,param_12,param_13,param_14);
  uVar1 = extraout_RDX;
  if ((int)param_11 != 0) {
    uVar2 = 0;
    do {
      if ((uVar2 & 7) == 0) {
        drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                  "\n0x%08x  :  ",(ulong)param_10,param_12,param_13,param_14);
        _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
        uVar3 = _thread_block(0);
      }
      param_12 = (ulong)param_10;
      uVar3 = drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,
                        "0x%08x ",(ulong)*(uint *)(*(long *)((long)this + 0x50) + param_12),param_12
                        ,param_13,param_14);
      uVar2 = uVar2 + 1;
      param_10 = param_10 + 4;
      uVar1 = extraout_RDX_00;
    } while ((param_11 & 0xffffffff) != uVar2);
  }
  drvErrLog(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)this,"\n\n",uVar1,
            param_12,param_13,param_14);
  return;
}



// IGHardwareRingBuffer::dumpExecListRegs(debugRegisters&)

void IGHardwareRingBuffer::dumpExecListRegs(void)

{
  return;
}



// IGHardwareRingBuffer::dumpBuffer(char const*, unsigned int*, unsigned long long, unsigned int)

void __thiscall
IGHardwareRingBuffer::dumpBuffer
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined8 param_10,long param_11,long param_12,ulong param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong uVar2;
  ulong uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  
  lVar1 = param_12;
  uVar2 = param_13;
  uVar4 = drvErrLog(param_1_00,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                    (long)this,"------------------------------------\n",param_11,param_12,param_13,
                    param_14);
  uVar4 = drvErrLog(uVar4,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "Dumping %s contents:\n",param_10,lVar1,uVar2,param_14);
  uVar4 = drvErrLog(uVar4,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "  Start Offset:  0x%08x\n",param_12,lVar1,uVar2,param_14);
  uVar4 = drvErrLog(uVar4,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "  End Offset  :  0x%08x\n",(param_13 & 0xffffffff) + param_12,lVar1,uVar2,
                    param_14);
  uVar4 = drvErrLog(uVar4,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "------------------------------------\n",extraout_RDX,lVar1,uVar2,param_14);
  uVar5 = drvErrLog(uVar4,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,
                    "\nOffset         Values\n------------------------\n",extraout_RDX_00,lVar1,
                    uVar2,param_14);
  uVar4 = extraout_RDX_01;
  if (3 < (uint)param_13) {
    uVar3 = 0;
    do {
      if ((uVar3 & 7) == 0) {
        uVar5 = drvErrLog(uVar5,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                          (long)this,"\n0x%08x  :  ",param_12,lVar1,uVar2,param_14);
      }
      uVar5 = drvErrLog(uVar5,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,
                        (long)this,"0x%08x ",(ulong)*(uint *)(param_11 + uVar3 * 4),lVar1,uVar2,
                        param_14);
      uVar3 = uVar3 + 1;
      param_12 = param_12 + 4;
      uVar4 = extraout_RDX_02;
    } while ((param_13 >> 2 & 0x3fffffff) != uVar3);
  }
  drvErrLog(uVar5,param_2_00,param_3_00,param_4,param_5,param_6,param_7,param_8,(long)this,"\n\n",
            uVar4,lVar1,uVar2,param_14);
  return;
}



// IGHardwareRingBuffer::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBuffer::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareRingBuffer_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,"IGHardwareRingBuffer",
             (OSMetaClass *)__got::gMetaClass,0x8e0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRingBuffer::gMetaClass);
  return;
}



// IGInterruptBridge::MetaClass::MetaClass()

void __thiscall IGInterruptBridge::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGInterruptBridge",(OSMetaClass *)__got::gMetaClass,0x800);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGInterruptBridge::MetaClass::~MetaClass()

void __thiscall IGInterruptBridge::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGInterruptBridge::IGInterruptBridge(OSMetaClass const*)

void __thiscall IGInterruptBridge::IGInterruptBridge(IGInterruptBridge *this,OSMetaClass *param_1)

{
  IGInterruptBridge *pIVar1;
  
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGInterruptBridge;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x80) = 0;
  pIVar1 = this + 0xc0;
  do {
    *(undefined4 *)pIVar1 = 0;
    *(undefined8 *)(pIVar1 + 8) = 0;
    *(undefined8 *)(pIVar1 + 0x10) = 0;
    *(undefined8 *)(pIVar1 + 0x18) = 0;
    pIVar1 = pIVar1 + 0x20;
  } while (pIVar1 != this + 0x5e0);
  return;
}



// IGInterruptBridge::IGInterruptBridge(OSMetaClass const*)

void __thiscall IGInterruptBridge::IGInterruptBridge(IGInterruptBridge *this,OSMetaClass *param_1)

{
  IGInterruptBridge *pIVar1;
  
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGInterruptBridge;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x80) = 0;
  pIVar1 = this + 0xc0;
  do {
    *(undefined4 *)pIVar1 = 0;
    *(undefined8 *)(pIVar1 + 8) = 0;
    *(undefined8 *)(pIVar1 + 0x10) = 0;
    *(undefined8 *)(pIVar1 + 0x18) = 0;
    pIVar1 = pIVar1 + 0x20;
  } while (pIVar1 != this + 0x5e0);
  return;
}



// IGInterruptBridge::~IGInterruptBridge()

void __thiscall IGInterruptBridge::~IGInterruptBridge(IGInterruptBridge *this)

{
  *(undefined ***)this = &__const::~IGInterruptBridge;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGInterruptBridge::~IGInterruptBridge()

void __thiscall IGInterruptBridge::~IGInterruptBridge(IGInterruptBridge *this)

{
  *(undefined ***)this = &__const::~IGInterruptBridge;
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGInterruptBridge::~IGInterruptBridge()

void __thiscall IGInterruptBridge::~IGInterruptBridge(IGInterruptBridge *this)

{
  *(undefined ***)this = &__const::~IGInterruptBridge;
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGInterruptBridge_ktv,this,0x800);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::operator delete(void*, unsigned long)

void __cdecl IGInterruptBridge::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGInterruptBridge_ktv,param_1,param_2);
  return;
}



// IGInterruptBridge::getMetaClass() const

undefined8 * IGInterruptBridge::getMetaClass(void)

{
  return &gMetaClass;
}



// IGInterruptBridge::MetaClass::MetaClass()

void __thiscall IGInterruptBridge::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGInterruptBridge",(OSMetaClass *)__got::gMetaClass,0x800);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGInterruptBridge::MetaClass::alloc() const

IGInterruptBridge * IGInterruptBridge::MetaClass::alloc(void)

{
  IGInterruptBridge *this;
  
  this = (IGInterruptBridge *)_OSObject_typed_operator_new(&IGInterruptBridge_ktv,0x800);
  IGInterruptBridge(this);
  return this;
}



// IGInterruptBridge::operator new(unsigned long)

void * __thiscall IGInterruptBridge::operator_new(IGInterruptBridge *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGInterruptBridge_ktv,this);
  return pvVar1;
}



// IGInterruptBridge::IGInterruptBridge()

void __thiscall IGInterruptBridge::IGInterruptBridge(IGInterruptBridge *this)

{
  IGInterruptBridge(this);
  return;
}



// IGInterruptBridge::IGInterruptBridge()

void __thiscall IGInterruptBridge::IGInterruptBridge(IGInterruptBridge *this)

{
  IGInterruptBridge *pIVar1;
  
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGInterruptBridge;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x80) = 0;
  pIVar1 = this + 0xc0;
  do {
    *(undefined4 *)pIVar1 = 0;
    *(undefined8 *)(pIVar1 + 8) = 0;
    *(undefined8 *)(pIVar1 + 0x10) = 0;
    *(undefined8 *)(pIVar1 + 0x18) = 0;
    pIVar1 = pIVar1 + 0x20;
  } while (pIVar1 != this + 0x5e0);
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::interruptBridge(IOGraphicsAccelerator2*, IOService*)

IGInterruptBridge * __cdecl IGInterruptBridge::interruptBridge(undefined8 param_1,long param_2)

{
  IGInterruptBridge *this;
  undefined8 uVar1;
  
  this = (IGInterruptBridge *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGInterruptBridge *)0x0) {
    uVar1 = initInterruptBridge(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGInterruptBridge *)0x0;
}



// IGInterruptBridge::initInterruptBridge(IOGraphicsAccelerator2*, IOService*)

undefined8 __thiscall
IGInterruptBridge::initInterruptBridge(IGInterruptBridge *this,undefined8 param_1,long param_2)

{
  char cVar1;
  bool bVar2;
  long *plVar3;
  long lVar4;
  undefined8 *puVar5;
  char *pcVar6;
  undefined8 uVar7;
  
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined2 *)(this + 0x7cc) = 0;
  this[0x7ce] = (IGInterruptBridge)0x0;
  *(undefined8 *)(this + 2000) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x80) = 0;
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 == '\0') {
    return 0;
  }
  pcVar6 = (char *)0x0;
  plVar3 = IGSpinLock::withOptions(0x494e5452,0);
  *(long **)(this + 2000) = plVar3;
  if (plVar3 == (long *)0x0) {
    return 0;
  }
  *(undefined8 *)(this + 0x10) = param_1;
  this[0x7ce] = (IGInterruptBridge)(param_2 != 0);
  *(undefined8 *)(this + 0x7d8) = 0;
  lVar4 = 0;
  do {
    *(undefined4 *)(this + lVar4 + 0x5e8) = *(undefined4 *)((long)&DAT_00113118 + lVar4);
    *(undefined8 *)(this + lVar4 + 0x5e0) = *(undefined8 *)((long)&DAT_00113110 + lVar4);
    lVar4 = lVar4 + 0xc;
  } while (lVar4 != 0x1ec);
  puVar5 = (undefined8 *)
           _IOMallocTypeImpl(&initInterruptBridge(IOGraphicsAccelerator2*,IOService*)::
                              kalloc_type_view_148);
  *(undefined8 **)(this + 0x18) = puVar5;
  if (puVar5 == (undefined8 *)0x0) {
LAB_00049783:
    (**(code **)(*(long *)this + 0x90))(this);
    uVar7 = 0;
  }
  else {
    *puVar5 = registerForInterruptTypeCallback;
    puVar5[1] = setInterruptStateCallback;
    puVar5[2] = unregisterInterruptCallback;
    if (this[0x7ce] == (IGInterruptBridge)0x0) {
      pcVar6 = "[IGPU] Failed to register with service. Using Local Filter Interrupt Source!\n";
      _IOLog("[IGPU] Failed to register with service. Using Local Filter Interrupt Source!\n");
      _kprintf("[IGPU] Failed to register with service. Using Local Filter Interrupt Source!\n");
      bVar2 = createFilterInterruptEventSource(this);
      if (!bVar2) goto LAB_00049783;
    }
    uVar7 = CONCAT71((int7)((ulong)pcVar6 >> 8),1);
    g_pInterruptBridge = this;
  }
  return uVar7;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::registerForInterruptTypeCallback(unsigned int, void*, void*, void*, void**)

undefined8 __cdecl IGInterruptBridge::registerForInterruptTypeCallback(int param_1)

{
  ulong uVar1;
  undefined8 uVar2;
  long *in_R8;
  
  uVar1 = getInterruptTypeIndex(param_1);
  if ((int)uVar1 == -1) {
    uVar2 = 0xe00002bc;
  }
  else {
    uVar2 = 0;
    if (in_R8 != (long *)0x0) {
      *in_R8 = (uVar1 & 0xffffffff) * 0x20 + g_pInterruptBridge + 0xc0;
    }
  }
  return uVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::setInterruptStateCallback(void*, unsigned int)

undefined8 __cdecl
IGInterruptBridge::setInterruptStateCallback(undefined4 *param_1,undefined4 param_2)

{
  *param_1 = param_2;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::unregisterInterruptCallback(void*)

void __cdecl IGInterruptBridge::unregisterInterruptCallback(undefined4 *param_1)

{
  *param_1 = 0;
  *(undefined8 *)(param_1 + 2) = 0;
  *(undefined8 *)(param_1 + 4) = 0;
  *(undefined8 *)(param_1 + 6) = 0;
  return;
}



// IGInterruptBridge::createFilterInterruptEventSource()

bool __thiscall IGInterruptBridge::createFilterInterruptEventSource(IGInterruptBridge *this)

{
  uint in_EAX;
  int iVar1;
  int iVar2;
  IOService *pIVar3;
  long lVar4;
  long *plVar5;
  int iVar6;
  bool bVar7;
  undefined8 uStack_38;
  
  uStack_38._0_4_ = in_EAX;
  pIVar3 = (IOService *)
           OSMetaClassBase::safeMetaCast
                     (*(OSMetaClassBase **)(*(long *)(this + 0x10) + 0x368),
                      *(OSMetaClass **)__got::metaClass);
  if (pIVar3 == (IOService *)0x0) {
    bVar7 = false;
  }
  else {
    uStack_38 = (ulong)(uint)uStack_38;
    iVar1 = (**(code **)(*(long *)pIVar3 + 0x708))(pIVar3,0);
    iVar6 = 0;
    if (iVar1 == 0) {
      iVar1 = 0;
      do {
        iVar6 = iVar1;
        if ((uStack_38._4_4_ >> 0x10 & 1) != 0) break;
        iVar1 = iVar1 + 1;
        uStack_38 = uStack_38 & 0xffffffff;
        iVar2 = (**(code **)(*(long *)pIVar3 + 0x708))(pIVar3,iVar1,(long)&uStack_38 + 4);
        iVar6 = 0;
      } while (iVar2 == 0);
    }
    lVar4 = IOFilterInterruptEventSource::filterInterruptEventSource
                      ((OSObject *)this,interruptHandler,interruptFilterHandler,pIVar3,iVar6);
    *(long *)(this + 0x20) = lVar4;
    if (lVar4 != 0) {
      plVar5 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
      (**(code **)(*plVar5 + 0x140))(plVar5,*(undefined8 *)(this + 0x20));
    }
    bVar7 = lVar4 != 0;
  }
  return bVar7;
}



// IGInterruptBridge::free()

void __thiscall IGInterruptBridge::free(IGInterruptBridge *this,void *param_1)

{
  long *plVar1;
  
  clearRequestors(this);
  if (*(long *)(this + 0x18) != 0) {
    *(undefined8 *)(this + 0x18) = 0;
    _IOFreeTypeImpl(&free()::kalloc_type_view_187);
    *(undefined8 *)(this + 0x18) = 0;
  }
  if ((this[0x7ce] == (IGInterruptBridge)0x0) && (*(long *)(this + 0x20) != 0)) {
    plVar1 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
    (**(code **)(*plVar1 + 0x148))(plVar1,*(undefined8 *)(this + 0x20));
    if (*(long **)(this + 0x20) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x20) + 0x28))();
    }
    *(undefined8 *)(this + 0x20) = 0;
  }
  plVar1 = *(long **)(this + 2000);
  if (plVar1 != (long *)0x0) {
    if (*plVar1 != 0) {
      _lck_spin_free(*plVar1,IGSpinLock::fGlobalLockGroup);
    }
    if (plVar1[1] != 0) {
      _lck_attr_free();
    }
    _IOFreeTypeImpl(IGSpinLock::operator_delete,plVar1);
  }
  *(undefined8 *)(this + 2000) = 0;
  *(undefined8 *)(this + 0x10) = 0;
                    // WARNING: Could not recover jumptable at 0x000499b8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGInterruptBridge::clearRequestors()

void __thiscall IGInterruptBridge::clearRequestors(IGInterruptBridge *this)

{
  undefined8 *puVar1;
  
  puVar1 = *(undefined8 **)(this + 0x7d8);
  while (puVar1 != (undefined8 *)0x0) {
    (**(code **)(*(long *)*puVar1 + 0x28))();
    *(undefined8 *)(this + 0x7d8) = *(undefined8 *)(*(long *)(this + 0x7d8) + 0x10);
    _IOFreeTypeImpl(&clearRequestors()::kalloc_type_view_553,puVar1);
    puVar1 = *(undefined8 **)(this + 0x7d8);
  }
  return;
}



// IGInterruptBridge::enable()

void __thiscall IGInterruptBridge::enable(IGInterruptBridge *this)

{
  IntelAccelerator *pIVar1;
  undefined8 *puVar2;
  
  if (this[0x7cc] == (IGInterruptBridge)0x0) {
    if (this[0x7ce] == (IGInterruptBridge)0x0) {
      (**(code **)(**(long **)(this + 0x20) + 0x150))();
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),1,4);
      pIVar1 = *(IntelAccelerator **)(this + 0x10);
      *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
           *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13)
           & 0x7fffffff;
      IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
      enableInterrupts(this);
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),1,4);
      pIVar1 = *(IntelAccelerator **)(this + 0x10);
      *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
           *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13)
           | 0x80000000;
      IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
    }
    else {
      enableInterrupts(this);
    }
    (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x1a0))();
    if (this[0x7cd] == (IGInterruptBridge)0x0) {
      for (puVar2 = *(undefined8 **)(this + 0x7d8); puVar2 != (undefined8 *)0x0;
          puVar2 = (undefined8 *)puVar2[2]) {
        (*(code *)puVar2[1])(*puVar2);
      }
      clearRequestors(this);
      this[0x7cd] = (IGInterruptBridge)0x1;
    }
    this[0x7cc] = (IGInterruptBridge)0x1;
  }
  return;
}



// IGInterruptBridge::enableInterrupts()

void __thiscall IGInterruptBridge::enableInterrupts(IGInterruptBridge *this)

{
  char *pcVar1;
  int iVar2;
  IntelAccelerator *this_00;
  long lVar3;
  char cVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  bool bVar8;
  
  cVar4 = IGScheduler::schedulerType
                    ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) >> 0x16) & 7);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
  uVar6 = 0x80400000;
  if (cVar4 == '\x01') {
    uVar6 = 0;
  }
  this_00 = *(IntelAccelerator **)(this + 0x10);
  uVar7 = 0x100010;
  if (cVar4 == '\x01') {
    uVar7 = 0x1100110;
  }
  lVar3 = *(long *)(this_00 + 0x1270);
  *(undefined4 *)("__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0xb) = uVar7;
  *(undefined4 *)("__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0xf) = uVar7;
  *(undefined4 *)("__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0x13) = uVar6;
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0x17;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0x1b;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar3 + 0x1f;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 0x1d;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer17getMappingOptionsEv" + lVar3 + 3;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer17getMappingOptionsEv" + lVar3 + 0xb;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer17getMappingOptionsEv" + lVar3 + 0xf;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer19getMemoryDescriptorEv" + lVar3 + 8;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer19getMemoryDescriptorEv" + lVar3 + 0x20;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
  pcVar1[0] = '\x01';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
  }
  pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
  pcVar1[0] = '\0';
  pcVar1[1] = -0x80;
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
  }
  pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\x02';
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
  }
  pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
  pcVar1[0] = '\x01';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
  }
  pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
  pcVar1[0] = '\x04';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
  }
  pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = -0x80;
  uVar5 = 0;
  do {
    iVar2 = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
    if (iVar2 < 0) break;
    bVar8 = uVar5 < 10;
    uVar5 = uVar5 + 1;
  } while (bVar8);
  if (iVar2 < 0) {
    *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) = iVar2;
    *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) =
         *(undefined4 *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
  }
  IntelAccelerator::SafeForceWake(this_00,0,4);
  return;
}



// IGInterruptBridge::serviceActions()

void __thiscall IGInterruptBridge::serviceActions(IGInterruptBridge *this)

{
  undefined8 *puVar1;
  
  for (puVar1 = *(undefined8 **)(this + 0x7d8); puVar1 != (undefined8 *)0x0;
      puVar1 = (undefined8 *)puVar1[2]) {
    (*(code *)puVar1[1])(*puVar1);
  }
  return;
}



// IGInterruptBridge::disable()

void __thiscall IGInterruptBridge::disable(IGInterruptBridge *this)

{
  IntelAccelerator *pIVar1;
  
  if (this[0x7cc] != (IGInterruptBridge)0x0) {
    IGAccelEventMachine::finishAllStamps
              (*(IGAccelEventMachine **)(*(long *)(this + 0x10) + 0x380),0x2b);
    if (this[0x7ce] == (IGInterruptBridge)0x0) {
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),1,4);
      pIVar1 = *(IntelAccelerator **)(this + 0x10);
      *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
           *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13)
           & 0x7fffffff;
      IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
      disableInterrupts(this);
      IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(this + 0x10),1,4);
      pIVar1 = *(IntelAccelerator **)(this + 0x10);
      *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
           *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13)
           | 0x80000000;
      IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
      (**(code **)(**(long **)(this + 0x20) + 0x158))();
    }
    else {
      disableInterrupts(this);
    }
    (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x10)) + 0x1a8))();
    this[0x7cc] = (IGInterruptBridge)0x0;
  }
  return;
}



// IGInterruptBridge::disableInterrupts()

void __thiscall IGInterruptBridge::disableInterrupts(IGInterruptBridge *this)

{
  char *pcVar1;
  IntelAccelerator *this_00;
  long lVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  lVar2 = *(long *)(this_00 + 0x1270);
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0xb;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0xf;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0x13;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0x17;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0x1b;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  pcVar1 = "__ZNK14IGMappedBuffer12getMetaClassEv" + lVar2 + 0x1f;
  pcVar1[0] = '\0';
  pcVar1[1] = '\0';
  pcVar1[2] = '\0';
  pcVar1[3] = '\0';
  IntelAccelerator::SafeForceWake(this_00,0,4);
  return;
}



// IGInterruptBridge::isInterruptRegistered(unsigned int) const

undefined8 __thiscall IGInterruptBridge::isInterruptRegistered(IGInterruptBridge *this,int param_1)

{
  undefined8 uVar1;
  long lVar2;
  
  uVar1 = getInterruptTypeIndex(param_1);
  lVar2 = (long)(int)uVar1 * 0x20;
  if (*(long *)(this + lVar2 + 200) == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = CONCAT71((int7)((ulong)lVar2 >> 8),*(long *)(this + lVar2 + 0xd0) != 0);
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// getInterruptTypeIndex(unsigned int)

undefined8 __cdecl getInterruptTypeIndex(int param_1)

{
  if (param_1 < 0x69676638) {
    if (param_1 < 0x69676465) {
      if (param_1 < 0x69676330) {
        if (param_1 == 0x69676263) {
          return 6;
        }
        if (param_1 == 0x69676265) {
          return 0x10;
        }
        if (param_1 == 0x69676266) {
          return 0xb;
        }
      }
      else if (param_1 < 0x69676338) {
        if (param_1 == 0x69676330) {
          return 7;
        }
        if (param_1 == 0x69676332) {
          return 8;
        }
      }
      else {
        if (param_1 == 0x69676338) {
          return 9;
        }
        if (param_1 == 0x69676464) {
          return 0x22;
        }
      }
    }
    else if (param_1 < 0x69676538) {
      if (param_1 < 0x69676530) {
        if (param_1 == 0x69676465) {
          return 0x26;
        }
        if (param_1 == 0x69676472) {
          return 0x23;
        }
      }
      else {
        if (param_1 == 0x69676530) {
          return 0x11;
        }
        if (param_1 == 0x69676532) {
          return 0x12;
        }
      }
    }
    else if (param_1 < 0x69676630) {
      if (param_1 == 0x69676538) {
        return 0x13;
      }
      if (param_1 == 0x69676565) {
        return 0x27;
      }
    }
    else {
      if (param_1 == 0x69676630) {
        return 0xc;
      }
      if (param_1 == 0x69676632) {
        return 0xd;
      }
    }
  }
  else if (param_1 < 0x69676968) {
    switch(param_1) {
    case 0x69676930:
      return 0x19;
    case 0x69676931:
      return 0x1a;
    case 0x69676932:
      return 0x1b;
    case 0x69676933:
      return 0x1c;
    case 0x69676934:
      return 0x1d;
    case 0x69676935:
      return 0x1e;
    case 0x69676936:
      return 0x1f;
    }
    if (param_1 == 0x69676638) {
      return 0xe;
    }
    if (param_1 == 0x69676665) {
      return 0x21;
    }
  }
  else if (param_1 < 0x69677263) {
    if (param_1 == 0x69676968) {
      return 0x28;
    }
    if (param_1 == 0x69676d6d) {
      return 0x24;
    }
    if (param_1 == 0x69676e65) {
      return 0x20;
    }
  }
  else if (param_1 < 0x69677266) {
    if (param_1 == 0x69677263) {
      return 5;
    }
    if (param_1 == 0x69677265) {
      return 0xf;
    }
  }
  else {
    if (param_1 == 0x69677266) {
      return 10;
    }
    if (param_1 == 0x69677373) {
      return 0x25;
    }
  }
  return 0xffffffff;
}



// IGInterruptBridge::isInterruptEnabled(unsigned int) const

undefined8 __thiscall IGInterruptBridge::isInterruptEnabled(IGInterruptBridge *this,int param_1)

{
  undefined8 uVar1;
  
  uVar1 = getInterruptTypeIndex(param_1);
  return CONCAT71((int7)((ulong)((long)(int)uVar1 * 3) >> 8),
                  0 < *(int *)(this + (long)(int)uVar1 * 0xc + 0x5e8));
}



// IGInterruptBridge::systemWillSleep()

void __thiscall IGInterruptBridge::systemWillSleep(IGInterruptBridge *this)

{
  IGAccelEventMachine::finishAllStamps
            (*(IGAccelEventMachine **)(*(long *)(this + 0x10) + 0x380),0x2b);
  disable(this);
  return;
}



// IGInterruptBridge::systemDidWake()

void __thiscall IGInterruptBridge::systemDidWake(IGInterruptBridge *this)

{
  enable(this);
  return;
}



// IGInterruptBridge::registerForInterruptType(unsigned int, void (*)(OSObject*, void*), OSObject*,
// void*, void**)

int __thiscall
IGInterruptBridge::registerForInterruptType
          (IGInterruptBridge *this,int param_1,undefined8 param_2,undefined8 param_3,
          undefined8 param_4,undefined8 *param_5)

{
  int iVar1;
  
  iVar1 = (*(code *)**(undefined8 **)(this + 0x18))(param_1,param_2,param_3,param_4,param_5);
  if (iVar1 == 0) {
    iVar1 = (**(code **)(*(long *)(this + 0x18) + 8))(*param_5,1);
    if (iVar1 == 0) {
      registerInterruptService(this,param_1,param_2,param_3,param_4);
      iVar1 = 0;
    }
    else {
      (**(code **)(*(long *)(this + 0x18) + 0x10))(*param_5);
    }
  }
  return iVar1;
}



// IGInterruptBridge::setInterruptState(void*, unsigned int)

void __thiscall
IGInterruptBridge::setInterruptState(IGInterruptBridge *this,undefined8 param_1,undefined4 param_2)

{
                    // WARNING: Could not recover jumptable at 0x0004a238. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)(this + 0x18) + 8))(param_1,param_2);
  return;
}



// IGInterruptBridge::registerInterruptService(unsigned int, void (*)(OSObject*, void*), OSObject*,
// void*)

void __thiscall
IGInterruptBridge::registerInterruptService
          (IGInterruptBridge *this,int param_1,undefined8 param_2,undefined8 param_3,
          undefined8 param_4)

{
  ulong uVar1;
  long lVar2;
  
  uVar1 = getInterruptTypeIndex(param_1);
  if ((int)uVar1 != -1) {
    lVar2 = (uVar1 & 0xffffffff) * 0x20;
    *(undefined8 *)(this + lVar2 + 200) = param_2;
    *(undefined8 *)(this + lVar2 + 0xd0) = param_3;
    *(undefined8 *)(this + lVar2 + 0xd8) = param_4;
    *(ulong *)(this + ((uVar1 & 0xffffffff) >> 6) * 8 + 0x40) =
         *(ulong *)(this + ((uVar1 & 0xffffffff) >> 6) * 8 + 0x40) | 1L << ((byte)uVar1 & 0x3f);
  }
  return;
}



// IGInterruptBridge::unregisterInterrupt(void*)

void __thiscall IGInterruptBridge::unregisterInterrupt(IGInterruptBridge *this,undefined8 param_1)

{
                    // WARNING: Could not recover jumptable at 0x0004a2a6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)(this + 0x18) + 0x10))(param_1);
  return;
}



// IGInterruptBridge::enableInterrupt(unsigned int)

undefined8 __thiscall IGInterruptBridge::enableInterrupt(IGInterruptBridge *this,int param_1)

{
  ulong uVar1;
  undefined8 uVar2;
  
  uVar1 = getInterruptTypeIndex(param_1);
  if ((int)uVar1 == -1) {
    uVar2 = 0xe00002c2;
  }
  else {
    enableInterrupt(this,(long)(this + (uVar1 & 0xffffffff) * 0xc + 0x5e0));
    uVar2 = 0;
  }
  return uVar2;
}



// IGInterruptBridge::enableInterrupt(IGInterruptBridge::InterruptTraits*)

void __thiscall IGInterruptBridge::enableInterrupt(IGInterruptBridge *this,long param_1)

{
  undefined8 *puVar1;
  
  puVar1 = *(undefined8 **)(this + 2000);
  _lck_spin_lock(*puVar1);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 1,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
  puVar1 = *(undefined8 **)(this + 2000);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 2,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar1);
  return;
}



// IGInterruptBridge::disableInterrupt(unsigned int)

undefined8 __thiscall IGInterruptBridge::disableInterrupt(IGInterruptBridge *this,int param_1)

{
  ulong uVar1;
  undefined8 uVar2;
  
  uVar1 = getInterruptTypeIndex(param_1);
  if ((int)uVar1 == -1) {
    uVar2 = 0xe00002c2;
  }
  else {
    disableInterrupt(this,(long)(this + (uVar1 & 0xffffffff) * 0xc + 0x5e0));
    uVar2 = 0;
  }
  return uVar2;
}



// IGInterruptBridge::disableInterrupt(IGInterruptBridge::InterruptTraits*)

void __thiscall IGInterruptBridge::disableInterrupt(IGInterruptBridge *this,long param_1)

{
  undefined8 *puVar1;
  
  puVar1 = *(undefined8 **)(this + 2000);
  _lck_spin_lock(*puVar1);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 1,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
  puVar1 = *(undefined8 **)(this + 2000);
  if ((*(int *)((long)puVar1 + 0x14) != 0) && (_graphicsTracePointEnable != 0)) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(*(uint *)((long)puVar1 + 0x14) | 2,(ulong)*(uint *)(puVar1 + 2),0,0,0,0);
    }
  }
  _lck_spin_unlock(*puVar1);
  return;
}



// IGInterruptBridge::requestEnableCallback(OSObject*, void (*)(OSObject*, ...))

void __thiscall
IGInterruptBridge::requestEnableCallback(IGInterruptBridge *this,long *param_1,undefined8 param_2)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)
           _IOMallocTypeImpl(&requestEnableCallback(OSObject*,void(*)(OSObject*,...))::
                              kalloc_type_view_431);
  *puVar1 = param_1;
  puVar1[1] = param_2;
  (**(code **)(*param_1 + 0x20))(param_1);
  puVar1[2] = *(undefined8 *)(this + 0x7d8);
  *(undefined8 **)(this + 0x7d8) = puVar1;
  return;
}



// IGInterruptBridge::interruptHandler(IOInterruptEventSource*, int)

void IGInterruptBridge::interruptHandler(void)

{
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::interruptFilterHandler(IOFilterInterruptEventSource*)

undefined8 __cdecl IGInterruptBridge::interruptFilterHandler(IGInterruptBridge *param_1)

{
  IntelAccelerator *pIVar1;
  char cVar2;
  undefined8 auStack_100 [8];
  ulong local_c0 [11];
  long local_68;
  
  local_68 = *(long *)__got::___stack_chk_guard;
  IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(param_1 + 0x10),1,4);
  pIVar1 = *(IntelAccelerator **)(param_1 + 0x10);
  *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
       *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) &
       0x7fffffff;
  IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
  local_c0[7] = 0;
  local_c0[6] = 0;
  local_c0[5] = 0;
  local_c0[4] = 0;
  local_c0[3] = 0;
  local_c0[2] = 0;
  local_c0[1] = 0;
  local_c0[0] = 0;
  readAndClearInterrupts(param_1,(byte *)local_c0);
  cVar2 = (**(code **)(**(long **)(param_1 + 0x20) + 0x160))();
  if ((cVar2 != '\0') && (local_c0[0] != 0)) {
    serviceInterrupts(auStack_100,(long)param_1,local_c0);
  }
  IntelAccelerator::SafeForceWakeInterrupt(*(IntelAccelerator **)(param_1 + 0x10),1,4);
  pIVar1 = *(IntelAccelerator **)(param_1 + 0x10);
  *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) =
       *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + *(long *)(pIVar1 + 0x1270) + 0x13) |
       0x80000000;
  IntelAccelerator::SafeForceWakeInterrupt(pIVar1,0,4);
  if (*(long *)__got::___stack_chk_guard == local_68) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGInterruptBridge::clearQueuedHeirarchichalIntrBits(unsigned int, unsigned int, unsigned int,
// unsigned int)

void __thiscall
IGInterruptBridge::clearQueuedHeirarchichalIntrBits
          (IGInterruptBridge *this,uint param_1,undefined4 param_2,uint param_3,uint param_4)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  bool bVar5;
  
  lVar2 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  *(undefined4 *)(lVar2 + (ulong)param_1) = param_2;
  uVar3 = (ulong)param_3;
  uVar4 = 0;
  do {
    uVar1 = *(uint *)(lVar2 + uVar3);
    if ((int)uVar1 < 0) break;
    bVar5 = uVar4 < 10;
    uVar4 = uVar4 + 1;
  } while (bVar5);
  if ((int)uVar1 < 0) {
    *(uint *)(lVar2 + uVar3) = uVar1 & (param_4 | 0xffff0000);
    *(uint *)(lVar2 + uVar3) = *(uint *)(lVar2 + uVar3) & (param_4 | 0xffff0000);
  }
  return;
}



// IGInterruptBridge::readAndClearInterrupts(IGBitSet<41ul>&)

void __thiscall IGInterruptBridge::readAndClearInterrupts(IGInterruptBridge *this,byte *param_1)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  
  param_1[0] = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[5] = 0;
  param_1[6] = 0;
  param_1[7] = 0;
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  uVar3 = 0;
  uVar2 = 0;
  if ((*(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + lVar1 + 0x13) & 1) != 0) {
    uVar2 = *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + lVar1 + 0x1b);
  }
  if ((*(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + lVar1 + 0x13) & 2) != 0) {
    uVar3 = *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" + lVar1 + 0x1f);
  }
  if (uVar2 != 0) {
    readAndClearRCSInterrupts(this,param_1,(ulong)uVar2);
    readAndClearBCSInterrupts(this,param_1,uVar2);
    readAndClearGuCInterrupts(this,(long)param_1,uVar2);
    *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" +
             *(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0x1b) = uVar2;
  }
  if (uVar3 != 0) {
    readAndClearVCSInterrupts(this,(long)param_1,(ulong)uVar3);
    readAndClearVECSInterrupts(this,param_1,uVar3);
    *(uint *)("__ZNK14IGAccelSurface9MetaClass5allocEv" +
             *(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + 0x1f) = uVar3;
  }
  return;
}



// IGInterruptBridge::readAndClearRCSInterrupts(IGBitSet<41ul>&, unsigned int)

void __thiscall
IGInterruptBridge::readAndClearRCSInterrupts(IGInterruptBridge *this,byte *param_1,ulong param_2)

{
  char *pcVar1;
  uint uVar2;
  long lVar3;
  uint uVar4;
  bool bVar5;
  
  if ((param_2 & 1) != 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
    pcVar1[0] = '\x01';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    uVar4 = 0;
    do {
      uVar2 = *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
      if ((int)uVar2 < 0) break;
      bVar5 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar5);
    if ((int)uVar2 < 0) {
      if ((uVar2 & 1) != 0) {
        *param_1 = *param_1 | 1;
      }
      if ((uVar2 & 0x10) != 0) {
        param_1[1] = param_1[1] | 4;
      }
      if ((uVar2 >> 8 & 1) != 0) {
        *param_1 = *param_1 | 0x20;
      }
      *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = uVar2;
    }
  }
  return;
}



// IGInterruptBridge::readAndClearBCSInterrupts(IGBitSet<41ul>&, unsigned int)

void __thiscall
IGInterruptBridge::readAndClearBCSInterrupts(IGInterruptBridge *this,byte *param_1,uint param_2)

{
  char *pcVar1;
  uint uVar2;
  long lVar3;
  uint uVar4;
  bool bVar5;
  
  if ((param_2 >> 0xf & 1) != 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
    pcVar1[0] = '\0';
    pcVar1[1] = -0x80;
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    uVar4 = 0;
    do {
      uVar2 = *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
      if ((int)uVar2 < 0) break;
      bVar5 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar5);
    if ((int)uVar2 < 0) {
      if ((uVar2 & 1) != 0) {
        *param_1 = *param_1 | 2;
      }
      if ((uVar2 & 0x10) != 0) {
        param_1[1] = param_1[1] | 8;
      }
      if ((uVar2 >> 8 & 1) != 0) {
        *param_1 = *param_1 | 0x40;
      }
      *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = uVar2;
    }
  }
  return;
}



// IGInterruptBridge::readAndClearGuCInterrupts(IGBitSet<41ul>&, unsigned int)

void __thiscall
IGInterruptBridge::readAndClearGuCInterrupts(IGInterruptBridge *this,long param_1,uint param_2)

{
  char *pcVar1;
  uint uVar2;
  long lVar3;
  uint uVar4;
  bool bVar5;
  
  if ((param_2 >> 0x19 & 1) != 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    pcVar1 = "__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x25;
    pcVar1[0] = '\0';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\x02';
    uVar4 = 0;
    do {
      uVar2 = *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15);
      if ((int)uVar2 < 0) break;
      bVar5 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar5);
    if ((int)uVar2 < 0) {
      if ((uVar2 >> 0xf & 1) != 0) {
        *(byte *)(param_1 + 5) = *(byte *)(param_1 + 5) | 1;
      }
      if ((uVar2 & 0x40) != 0) {
        *(byte *)(param_1 + 3) = *(byte *)(param_1 + 3) | 0x80;
      }
      *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x15) = uVar2;
    }
  }
  return;
}



// IGInterruptBridge::readAndClearVCSInterrupts(IGBitSet<41ul>&, unsigned int)

void __thiscall
IGInterruptBridge::readAndClearVCSInterrupts(IGInterruptBridge *this,long param_1,ulong param_2)

{
  char *pcVar1;
  ulong *puVar2;
  long lVar3;
  uint uVar4;
  bool bVar5;
  long lVar6;
  bool bVar7;
  uint local_20 [2];
  long local_18;
  
  local_18 = *(long *)__got::___stack_chk_guard;
  if ((param_2 & 5) != 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
    pcVar1[0] = '\x01';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    uVar4 = 0;
    do {
      if ((int)*(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) < 0) break;
      bVar7 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar7);
    local_20[0] = *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
    pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
    pcVar1[0] = '\x04';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = '\0';
    uVar4 = 0;
    do {
      if (*(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) < 0) break;
      bVar7 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar7);
    local_20[1] = *(int *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
    lVar6 = 0;
    bVar7 = true;
    do {
      bVar5 = bVar7;
      uVar4 = local_20[lVar6];
      if ((int)uVar4 < 0) {
        if ((uVar4 & 1) != 0) {
          puVar2 = (ulong *)(param_1 + ((ulong)(long)(int)(&DAT_00113300)[lVar6] >> 6) * 8);
          *puVar2 = *puVar2 | 1L << ((byte)(&DAT_00113300)[lVar6] & 0x3f);
        }
        if ((uVar4 & 0x10) != 0) {
          puVar2 = (ulong *)(param_1 + ((ulong)(long)(int)(&DAT_00113308)[lVar6] >> 6) * 8);
          *puVar2 = *puVar2 | 1L << ((byte)(&DAT_00113308)[lVar6] & 0x3f);
        }
        if ((uVar4 >> 8 & 1) != 0) {
          puVar2 = (ulong *)(param_1 + ((ulong)(long)(int)(&DAT_00113310)[lVar6] >> 6) * 8);
          *puVar2 = *puVar2 | 1L << ((byte)(&DAT_00113310)[lVar6] & 0x3f);
        }
        *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) = uVar4;
      }
      lVar6 = 1;
      bVar7 = false;
    } while (bVar5);
  }
  if (*(long *)__got::___stack_chk_guard == local_18) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGInterruptBridge::readAndClearVECSInterrupts(IGBitSet<41ul>&, unsigned int)

void __thiscall
IGInterruptBridge::readAndClearVECSInterrupts(IGInterruptBridge *this,byte *param_1,int param_2)

{
  char *pcVar1;
  uint uVar2;
  long lVar3;
  uint uVar4;
  bool bVar5;
  
  if (param_2 < 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
    pcVar1 = "__ZNK14IGMappedBuffer16getMemoryOptionsEv" + lVar3 + 1;
    pcVar1[0] = '\0';
    pcVar1[1] = '\0';
    pcVar1[2] = '\0';
    pcVar1[3] = -0x80;
    uVar4 = 0;
    do {
      uVar2 = *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19);
      if ((int)uVar2 < 0) break;
      bVar5 = uVar4 < 10;
      uVar4 = uVar4 + 1;
    } while (bVar5);
    if ((int)uVar2 < 0) {
      if ((uVar2 & 1) != 0) {
        *param_1 = *param_1 | 0x10;
      }
      if ((uVar2 & 0x10) != 0) {
        param_1[1] = param_1[1] | 0x40;
      }
      if ((uVar2 >> 8 & 1) != 0) {
        param_1[1] = param_1[1] | 2;
      }
      *(uint *)("__ZNK14IGMappedBuffer14getAccessEventEv" + lVar3 + 0x19) = uVar2;
    }
  }
  return;
}



// IGInterruptBridge::readIIR(unsigned int, unsigned int, unsigned int)

void __thiscall
IGInterruptBridge::readIIR(IGInterruptBridge *this,uint param_1,undefined4 param_2,uint param_3)

{
  long lVar1;
  uint uVar2;
  bool bVar3;
  
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  *(undefined4 *)(lVar1 + (ulong)param_1) = param_2;
  uVar2 = 0;
  do {
    if (*(int *)(lVar1 + (ulong)param_3) < 0) {
      return;
    }
    bVar3 = uVar2 < 10;
    uVar2 = uVar2 + 1;
  } while (bVar3);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGInterruptBridge::serviceInterrupts(IGBitSet<41ul> const&)

undefined8 * __cdecl
IGInterruptBridge::serviceInterrupts(undefined8 *param_1,long param_2,ulong *param_3)

{
  code *pcVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  
  param_1[7] = 0;
  param_1[6] = 0;
  param_1[5] = 0;
  param_1[4] = 0;
  param_1[3] = 0;
  param_1[2] = 0;
  param_1[1] = 0;
  *param_1 = 0;
  uVar4 = *param_3;
  if (uVar4 != 0) {
    uVar5 = 0;
    if (uVar4 != 0) {
      for (; (uVar4 >> uVar5 & 1) == 0; uVar5 = uVar5 + 1) {
      }
    }
    do {
      uVar4 = uVar5 + 1;
      lVar3 = uVar5 * 0x20;
      pcVar1 = *(code **)(param_2 + 200 + lVar3);
      if (pcVar1 != (code *)0x0) {
        (*pcVar1)(*(undefined8 *)(param_2 + 0xd0 + lVar3),*(undefined8 *)(param_2 + 0xd8 + lVar3));
        param_1[uVar5 >> 6] = param_1[uVar5 >> 6] | 1L << ((byte)uVar5 & 0x3f);
      }
      if (0x28 < uVar4) {
        return param_1;
      }
      uVar2 = (param_3[uVar4 >> 6] >> ((byte)uVar4 & 0x3f)) << ((byte)uVar4 & 0x3f);
      lVar3 = 0;
      if (uVar2 != 0) {
        for (; (uVar2 >> lVar3 & 1) == 0; lVar3 = lVar3 + 1) {
        }
      }
      uVar5 = (uVar4 & 0xffffffffffffffc0) + lVar3;
    } while (uVar2 != 0);
  }
  return param_1;
}



// IGInterruptBridge::processInterrupts(unsigned long long*)

void __thiscall IGInterruptBridge::processInterrupts(IGInterruptBridge *this,ulong *param_1)

{
  ulong uVar1;
  undefined8 auStack_100 [8];
  ulong local_c0 [9];
  long local_78;
  
  local_78 = *(long *)__got::___stack_chk_guard;
  if (this[0x7cc] == (IGInterruptBridge)0x0) {
    uVar1 = 0;
  }
  else {
    uVar1 = 0;
    local_c0[7] = 0;
    local_c0[6] = 0;
    local_c0[5] = 0;
    local_c0[4] = 0;
    local_c0[3] = 0;
    local_c0[2] = 0;
    local_c0[1] = 0;
    local_c0[0] = 0;
    readAndClearInterrupts(this,(byte *)local_c0);
    if (local_c0[0] != 0) {
      serviceInterrupts(auStack_100,(long)this,local_c0);
      uVar1 = (ulong)((uint)(local_c0[0] >> 0x19) & 0x40);
    }
  }
  if (param_1 != (ulong *)0x0) {
    *param_1 = uVar1;
  }
  if (*(long *)__got::___stack_chk_guard == local_78) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGInterruptBridge::MetaClass::~MetaClass()

void __thiscall IGInterruptBridge::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGInterruptBridge_cpp(void)

{
  __fSymFBCLASSGetInterruptCallbacks = OSSymbol::withCString("fInterruptCallbacks");
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGInterruptBridge::gMetaClass,"IGInterruptBridge",
             (OSMetaClass *)__got::gMetaClass,0x800);
  IGInterruptBridge::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGInterruptBridge::gMetaClass);
  return;
}



// IGHardwareRingBufferVEBox::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferVEBox::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferVEBox",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferVEBox::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferVEBox::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox
          (IGHardwareRingBufferVEBox *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferVEBox;
  return;
}



// IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox
          (IGHardwareRingBufferVEBox *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferVEBox;
  return;
}



// IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox()

void __thiscall
IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox(IGHardwareRingBufferVEBox *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox()

void __thiscall
IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox(IGHardwareRingBufferVEBox *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox()

void __thiscall
IGHardwareRingBufferVEBox::~IGHardwareRingBufferVEBox(IGHardwareRingBufferVEBox *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  _OSObject_typed_operator_delete(&IGHardwareRingBufferVEBox_ktv,this,0x8e0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBufferVEBox::operator delete(void*, unsigned long)

void __cdecl IGHardwareRingBufferVEBox::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRingBufferVEBox_ktv,param_1,param_2);
  return;
}



// IGHardwareRingBufferVEBox::getMetaClass() const

undefined1 * IGHardwareRingBufferVEBox::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRingBufferVEBox::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferVEBox::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferVEBox",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferVEBox::MetaClass::alloc() const

IGHardwareRingBuffer * IGHardwareRingBufferVEBox::MetaClass::alloc(void)

{
  IGHardwareRingBuffer *this;
  
  this = (IGHardwareRingBuffer *)_OSObject_typed_operator_new(&IGHardwareRingBufferVEBox_ktv,0x8e0);
  IGHardwareRingBuffer::IGHardwareRingBuffer
            (this,(OSMetaClass *)&IGHardwareRingBufferVEBox::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferVEBox;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareRingBufferVEBox::operator new(unsigned long)

void * __thiscall IGHardwareRingBufferVEBox::operator_new(IGHardwareRingBufferVEBox *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRingBufferVEBox_ktv,this);
  return pvVar1;
}



// IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox()

void __thiscall
IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox(IGHardwareRingBufferVEBox *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferVEBox;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox()

void __thiscall
IGHardwareRingBufferVEBox::IGHardwareRingBufferVEBox(IGHardwareRingBufferVEBox *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferVEBox;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferVEBox::init(IGHardwareContext*)

ulong __thiscall IGHardwareRingBufferVEBox::init(IGHardwareRingBufferVEBox *this,long param_1)

{
  int iVar1;
  int iVar2;
  ulong uVar3;
  undefined8 uVar4;
  
  uVar3 = IGHardwareRingBuffer::init((IGHardwareRingBuffer *)this,param_1);
  if ((char)uVar3 != '\0') {
    *(undefined8 *)(this + 0x58) = 0x1c8244001c803c;
    *(undefined4 *)(this + 0x70) = 0x2000;
    *(undefined8 **)(this + 0x78) = &_vecsResetRegisters;
    iVar1 = (**(code **)(*(long *)this + 0x128))(this);
    iVar2 = (**(code **)(*(long *)this + 0x148))(this);
    *(int *)(this + 0x3c) = iVar2 + iVar1 + 4;
    if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
      uVar4 = IGHardwareRingBuffer::getSerializeSubmissionSpace((IGHardwareRingBuffer *)this);
      *(int *)(this + 0x3c) = *(int *)(this + 0x3c) + (int)uVar4;
    }
  }
  return uVar3 & 0xffffffff;
}



// IGHardwareRingBufferVEBox::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferVEBox::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareRingBufferVEBox_cpp(void)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  _vecsResetRegisters = 0;
  DAT_001364e8 = 0;
  DAT_001364f0 = 0;
  lVar3 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                     0x120);
  lVar5 = DAT_001364f0;
  if (lVar3 != 0) {
    if (DAT_001364f0 != 0) {
      if (_vecsResetRegisters != 0) {
        lVar6 = 0;
        lVar4 = _vecsResetRegisters;
        do {
          *(undefined4 *)(lVar3 + 0x20 + lVar6) = *(undefined4 *)(lVar5 + 0x20 + lVar6);
          *(undefined8 *)(lVar3 + 0x18 + lVar6) = *(undefined8 *)(lVar5 + 0x18 + lVar6);
          *(undefined8 *)(lVar3 + 0x10 + lVar6) = *(undefined8 *)(lVar5 + 0x10 + lVar6);
          uVar1 = *(undefined8 *)(lVar5 + lVar6);
          *(undefined8 *)(lVar3 + 8 + lVar6) = *(undefined8 *)(lVar5 + 8 + lVar6);
          *(undefined8 *)(lVar3 + lVar6) = uVar1;
          lVar6 = lVar6 + 0x24;
          lVar4 = lVar4 + -1;
        } while (lVar4 != 0);
      }
      auVar2._8_8_ = 0;
      auVar2._0_8_ = DAT_001364e8;
      lVar4 = SUB168(ZEXT816(0x24) * auVar2,0);
      if (lVar4 < 0) {
        lVar4 = -0x8000000000000000;
      }
      lVar6 = -0x8000000000000000;
      if (SUB168(ZEXT816(0x24) * auVar2,8) == 0) {
        lVar6 = lVar4;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)
                          ::kalloc_type_view_29,lVar5,lVar6);
    }
    DAT_001364e8 = 8;
    lVar5 = 0;
    DAT_001364f0 = lVar3;
    do {
      *(undefined4 *)(lVar3 + 0x20 + lVar5) = *(undefined4 *)((long)&DAT_00113340 + lVar5);
      *(undefined8 *)(lVar3 + 0x18 + lVar5) = *(undefined8 *)("RC_PWRCTX_MAXCNT" + lVar5 + 0xe);
      *(undefined8 *)(lVar3 + 0x10 + lVar5) = *(undefined8 *)("RC_PWRCTX_MAXCNT" + lVar5 + 6);
      uVar1 = *(undefined8 *)((long)&vecsRegisters + lVar5);
      *(undefined8 *)(lVar3 + 8 + lVar5) = *(undefined8 *)(&DAT_00113328 + lVar5);
      *(undefined8 *)(lVar3 + lVar5) = uVar1;
      lVar5 = lVar5 + 0x24;
    } while (lVar5 != 0x120);
    _vecsResetRegisters = 8;
  }
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRingBufferVEBox::gMetaClass,"IGHardwareRingBufferVEBox",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRingBufferVEBox::gMetaClass);
  if (DAT_001364f0 != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = DAT_001364e8;
    lVar2 = SUB168(ZEXT816(0x24) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x24) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)::
                        kalloc_type_view_29,DAT_001364f0,lVar3);
    return;
  }
  return;
}



// IntelICLMemoryManager::MetaClass::MetaClass()

void __thiscall IntelICLMemoryManager::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IntelICLMemoryManager",(OSMetaClass *)&IGMemoryManager::gMetaClass
             ,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IntelICLMemoryManager::MetaClass::~MetaClass()

void __thiscall IntelICLMemoryManager::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IntelICLMemoryManager::IntelICLMemoryManager(OSMetaClass const*)

void __thiscall
IntelICLMemoryManager::IntelICLMemoryManager(IntelICLMemoryManager *this,OSMetaClass *param_1)

{
  IGMemoryManager::IGMemoryManager((IGMemoryManager *)this,param_1);
  *(undefined ***)this = &__const::~IntelICLMemoryManager;
  return;
}



// IntelICLMemoryManager::IntelICLMemoryManager(OSMetaClass const*)

void __thiscall
IntelICLMemoryManager::IntelICLMemoryManager(IntelICLMemoryManager *this,OSMetaClass *param_1)

{
  IGMemoryManager::IGMemoryManager((IGMemoryManager *)this,param_1);
  *(undefined ***)this = &__const::~IntelICLMemoryManager;
  return;
}



// IntelICLMemoryManager::~IntelICLMemoryManager()

void __thiscall IntelICLMemoryManager::~IntelICLMemoryManager(IntelICLMemoryManager *this)

{
  IGMemoryManager::~IGMemoryManager((IGMemoryManager *)this);
  return;
}



// IntelICLMemoryManager::~IntelICLMemoryManager()

void __thiscall IntelICLMemoryManager::~IntelICLMemoryManager(IntelICLMemoryManager *this)

{
  IGMemoryManager::~IGMemoryManager((IGMemoryManager *)this);
  return;
}



// IntelICLMemoryManager::~IntelICLMemoryManager()

void __thiscall IntelICLMemoryManager::~IntelICLMemoryManager(IntelICLMemoryManager *this)

{
  IGMemoryManager::~IGMemoryManager((IGMemoryManager *)this);
  _OSObject_typed_operator_delete(&IntelICLMemoryManager_ktv,this,0x118);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelICLMemoryManager::operator delete(void*, unsigned long)

void __cdecl IntelICLMemoryManager::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IntelICLMemoryManager_ktv,param_1,param_2);
  return;
}



// IntelICLMemoryManager::getMetaClass() const

undefined8 * IntelICLMemoryManager::getMetaClass(void)

{
  return &gMetaClass;
}



// IntelICLMemoryManager::MetaClass::MetaClass()

void __thiscall IntelICLMemoryManager::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IntelICLMemoryManager",(OSMetaClass *)&IGMemoryManager::gMetaClass
             ,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IntelICLMemoryManager::MetaClass::alloc() const

IGMemoryManager * IntelICLMemoryManager::MetaClass::alloc(void)

{
  IGMemoryManager *this;
  
  this = (IGMemoryManager *)_OSObject_typed_operator_new(&IntelICLMemoryManager_ktv,0x118);
  IGMemoryManager::IGMemoryManager(this,(OSMetaClass *)&IntelICLMemoryManager::gMetaClass);
  *(undefined ***)this = &__const::~IntelICLMemoryManager;
  OSMetaClass::instanceConstructed();
  return this;
}



// IntelICLMemoryManager::operator new(unsigned long)

void * __thiscall IntelICLMemoryManager::operator_new(IntelICLMemoryManager *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IntelICLMemoryManager_ktv,this);
  return pvVar1;
}



// IntelICLMemoryManager::IntelICLMemoryManager()

void __thiscall IntelICLMemoryManager::IntelICLMemoryManager(IntelICLMemoryManager *this)

{
  IGMemoryManager::IGMemoryManager((IGMemoryManager *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IntelICLMemoryManager;
  OSMetaClass::instanceConstructed();
  return;
}



// IntelICLMemoryManager::IntelICLMemoryManager()

void __thiscall IntelICLMemoryManager::IntelICLMemoryManager(IntelICLMemoryManager *this)

{
  IGMemoryManager::IGMemoryManager((IGMemoryManager *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IntelICLMemoryManager;
  OSMetaClass::instanceConstructed();
  return;
}



// IntelICLMemoryManager::synchronizeAllTasks()

void __thiscall IntelICLMemoryManager::synchronizeAllTasks(IntelICLMemoryManager *this)

{
  if (((&DAT_000011c1)[*(long *)(this + 0x10)] & 1) == 0) {
    return;
  }
  IGMemoryManager::synchronizeAllTasks((IGMemoryManager *)this);
  return;
}



// IntelICLMemoryManager::initGTL3Layout()

void __thiscall IntelICLMemoryManager::initGTL3Layout(IntelICLMemoryManager *this)

{
  long lVar1;
  
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  *(undefined4 *)(lVar1 + 0x7034) = 0xa0000420;
  *(undefined4 *)(lVar1 + 0xb0a4) = 8;
  *(undefined4 *)(lVar1 + 0xe6f0) = 0x2000200;
  return;
}



// IntelICLMemoryManager::detectEDRAM()

void __thiscall IntelICLMemoryManager::detectEDRAM(IntelICLMemoryManager *this)

{
  long lVar1;
  int iVar2;
  undefined4 uVar3;
  undefined8 in_RAX;
  OSMetaClassBase *pOVar4;
  OSMetaClass *pOVar5;
  long *plVar6;
  void *pvVar7;
  char *pcVar8;
  uint uVar9;
  int local_28;
  int local_24;
  
  local_24 = (int)((ulong)in_RAX >> 0x20);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
  uVar9 = *(uint *)((long)&__const::_RESERVEDOSMetaClassBase7 + *(long *)(this + 0x18));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,4);
  uVar9 = uVar9 & 1;
  this[0x20] = SUB41(uVar9,0);
  if (uVar9 == 0) {
    return;
  }
  plVar6 = *(long **)(this + 0x10);
  pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6);
  local_28 = 0;
  if (pOVar4 == (OSMetaClassBase *)0x0) {
    pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6,"Development");
    plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,*(OSMetaClass **)__got::metaClass);
    if ((plVar6 != (long *)0x0) &&
       (pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x208))(plVar6),
       pOVar4 != (OSMetaClassBase *)0x0)) goto LAB_0004b25f;
  }
  else {
LAB_0004b25f:
    pOVar5 = (OSMetaClass *)(**(code **)(*(long *)pOVar4 + 0x38))(pOVar4);
    if (pOVar5 == *(OSMetaClass **)__got::metaClass) {
      plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,pOVar5);
      local_28 = (**(code **)(*plVar6 + 0x148))(plVar6);
    }
    else {
      pOVar5 = (OSMetaClass *)(**(code **)(*(long *)pOVar4 + 0x38))(pOVar4);
      if (pOVar5 == *(OSMetaClass **)__got::metaClass) {
        plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,pOVar5);
        pvVar7 = (void *)(**(code **)(*plVar6 + 0x178))(plVar6);
        uVar9 = (**(code **)(*plVar6 + 0x140))(plVar6);
        if (4 < uVar9) {
          detectEDRAM();
          return;
        }
        _memcpy(&local_28,pvVar7,(ulong)uVar9);
      }
    }
  }
  plVar6 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  iVar2 = local_28;
  if (((plVar6 != (long *)0x0) &&
      (pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6,"ForceDisableEDRAM"),
      iVar2 = local_28, pOVar4 != (OSMetaClassBase *)0x0)) &&
     (plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,*(OSMetaClass **)__got::metaClass),
     iVar2 = local_28, plVar6 != (long *)0x0)) {
    pcVar8 = (char *)(**(code **)(*plVar6 + 0x178))(plVar6);
    plVar6 = (long *)OSNumber::withNumber(pcVar8,0x20);
    iVar2 = local_28;
    if (plVar6 != (long *)0x0) {
      iVar2 = (**(code **)(*plVar6 + 0x148))(plVar6);
      (**(code **)(*plVar6 + 0x28))(plVar6);
    }
  }
  if (iVar2 == 1) {
    this[0x20] = (IntelICLMemoryManager)0x0;
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,4);
    lVar1 = *(long *)(this + 0x18);
    *(undefined4 *)(&DAT_00138128 + lVar1) = 0xb0000000;
    *(undefined4 *)(&DAT_00138124 + lVar1) = 0x80591012;
    _IOSleep(1000);
    if (*(int *)((long)&nlist_00145908.n_value + *(long *)(this + 0x18)) == -0x50000000) {
      this[0x20] = (IntelICLMemoryManager)0x0;
    }
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),0,4);
  }
  if (this[0x20] == (IntelICLMemoryManager)0x0) {
    return;
  }
  plVar6 = *(long **)(this + 0x10);
  pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6);
  _local_28 = CONCAT44(1,local_28);
  if (pOVar4 == (OSMetaClassBase *)0x0) {
    pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6,"Development");
    plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,*(OSMetaClass **)__got::metaClass);
    if ((plVar6 == (long *)0x0) ||
       (pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x208))(plVar6),
       pOVar4 == (OSMetaClassBase *)0x0)) goto LAB_0004b52e;
  }
  pOVar5 = (OSMetaClass *)(**(code **)(*(long *)pOVar4 + 0x38))(pOVar4);
  if (pOVar5 == *(OSMetaClass **)__got::metaClass) {
    plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,pOVar5);
    uVar3 = (**(code **)(*plVar6 + 0x148))(plVar6);
    _local_28 = CONCAT44(uVar3,local_28);
  }
  else {
    pOVar5 = (OSMetaClass *)(**(code **)(*(long *)pOVar4 + 0x38))(pOVar4);
    if (pOVar5 == *(OSMetaClass **)__got::metaClass) {
      plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,pOVar5);
      pvVar7 = (void *)(**(code **)(*plVar6 + 0x178))(plVar6);
      uVar9 = (**(code **)(*plVar6 + 0x140))(plVar6);
      if (4 < uVar9) {
        detectEDRAM();
        return;
      }
      _memcpy(&local_24,pvVar7,(ulong)uVar9);
    }
  }
LAB_0004b52e:
  plVar6 = (long *)IORegistryEntry::fromPath
                             ("IODeviceTree:/options",(IORegistryPlane *)0x0,(char *)0x0,(int *)0x0,
                              (IORegistryEntry *)0x0);
  if (((plVar6 != (long *)0x0) &&
      (pOVar4 = (OSMetaClassBase *)(**(code **)(*plVar6 + 0x2b8))(plVar6,"DisplaySurfaceInEDRAM"),
      pOVar4 != (OSMetaClassBase *)0x0)) &&
     (plVar6 = (long *)OSMetaClassBase::safeMetaCast(pOVar4,*(OSMetaClass **)__got::metaClass),
     plVar6 != (long *)0x0)) {
    pcVar8 = (char *)(**(code **)(*plVar6 + 0x178))(plVar6);
    plVar6 = (long *)OSNumber::withNumber(pcVar8,0x20);
    if (plVar6 != (long *)0x0) {
      uVar3 = (**(code **)(*plVar6 + 0x148))(plVar6);
      _local_28 = CONCAT44(uVar3,local_28);
      (**(code **)(*plVar6 + 0x28))(plVar6);
    }
  }
  this[0x21] = (IntelICLMemoryManager)(local_24 == 1);
  return;
}



// IntelICLMemoryManager::updatePageAttributeTable()

void __thiscall IntelICLMemoryManager::updatePageAttributeTable(IntelICLMemoryManager *this)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x10));
  lVar2 = 0;
  do {
    *(undefined4 *)(lVar1 + 0x40e0 + lVar2) =
         *(undefined4 *)((long)&g_cPageAttributeTableEntry + lVar2);
    lVar2 = lVar2 + 4;
  } while (lVar2 != 0x20);
  return;
}



// IntelICLMemoryManager::getPageAttributeTableIndex(unsigned int)

char __thiscall
IntelICLMemoryManager::getPageAttributeTableIndex(IntelICLMemoryManager *this,uint param_1)

{
  return ((param_1 & 0xfffffffe) != 2) * '\x04' + '\x01';
}



// IntelICLMemoryManager::MetaClass::~MetaClass()

void __thiscall IntelICLMemoryManager::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_intel_icl_memory_manager_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IntelICLMemoryManager::gMetaClass,"IntelICLMemoryManager",
             (OSMetaClass *)&IGMemoryManager::gMetaClass,0x118);
  IntelICLMemoryManager::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IntelICLMemoryManager::gMetaClass);
  return;
}



// IGAccelFIFOChannel::MetaClass::MetaClass()

void __thiscall IGAccelFIFOChannel::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelFIFOChannel",(OSMetaClass *)__got::gMetaClass,0x180);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelFIFOChannel::MetaClass::~MetaClass()

void __thiscall IGAccelFIFOChannel::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelFIFOChannel::IGAccelFIFOChannel(OSMetaClass const*)

void __thiscall
IGAccelFIFOChannel::IGAccelFIFOChannel(IGAccelFIFOChannel *this,OSMetaClass *param_1)

{
  IOAccelFIFOChannel2::IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelFIFOChannel;
  return;
}



// IGAccelFIFOChannel::IGAccelFIFOChannel(OSMetaClass const*)

void __thiscall
IGAccelFIFOChannel::IGAccelFIFOChannel(IGAccelFIFOChannel *this,OSMetaClass *param_1)

{
  IOAccelFIFOChannel2::IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelFIFOChannel;
  return;
}



// IGAccelFIFOChannel::~IGAccelFIFOChannel()

void __thiscall IGAccelFIFOChannel::~IGAccelFIFOChannel(IGAccelFIFOChannel *this)

{
  IOAccelFIFOChannel2::~IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this);
  return;
}



// IGAccelFIFOChannel::~IGAccelFIFOChannel()

void __thiscall IGAccelFIFOChannel::~IGAccelFIFOChannel(IGAccelFIFOChannel *this)

{
  IOAccelFIFOChannel2::~IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this);
  return;
}



// IGAccelFIFOChannel::~IGAccelFIFOChannel()

void __thiscall IGAccelFIFOChannel::~IGAccelFIFOChannel(IGAccelFIFOChannel *this)

{
  IOAccelFIFOChannel2::~IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this);
  _OSObject_typed_operator_delete(&IGAccelFIFOChannel_ktv,this,0x180);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelFIFOChannel::operator delete(void*, unsigned long)

void __cdecl IGAccelFIFOChannel::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelFIFOChannel_ktv,param_1,param_2);
  return;
}



// IGAccelFIFOChannel::getMetaClass() const

undefined8 * IGAccelFIFOChannel::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelFIFOChannel::MetaClass::MetaClass()

void __thiscall IGAccelFIFOChannel::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelFIFOChannel",(OSMetaClass *)__got::gMetaClass,0x180);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelFIFOChannel::MetaClass::alloc() const

IOAccelFIFOChannel2 * IGAccelFIFOChannel::MetaClass::alloc(void)

{
  IOAccelFIFOChannel2 *this;
  
  this = (IOAccelFIFOChannel2 *)_OSObject_typed_operator_new(&IGAccelFIFOChannel_ktv,0x180);
  IOAccelFIFOChannel2::IOAccelFIFOChannel2(this,(OSMetaClass *)&IGAccelFIFOChannel::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelFIFOChannel;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelFIFOChannel::operator new(unsigned long)

void * __thiscall IGAccelFIFOChannel::operator_new(IGAccelFIFOChannel *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelFIFOChannel_ktv,this);
  return pvVar1;
}



// IGAccelFIFOChannel::IGAccelFIFOChannel()

void __thiscall IGAccelFIFOChannel::IGAccelFIFOChannel(IGAccelFIFOChannel *this)

{
  IOAccelFIFOChannel2::IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelFIFOChannel;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelFIFOChannel::IGAccelFIFOChannel()

void __thiscall IGAccelFIFOChannel::IGAccelFIFOChannel(IGAccelFIFOChannel *this)

{
  IOAccelFIFOChannel2::IOAccelFIFOChannel2((IOAccelFIFOChannel2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelFIFOChannel;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelFIFOChannel::withOptions(IOGraphicsAccelerator2*, IGHardwareRingBuffer*)

IGAccelFIFOChannel * __cdecl IGAccelFIFOChannel::withOptions(undefined8 param_1,long *param_2)

{
  undefined4 uVar1;
  IGAccelFIFOChannel *this;
  
  this = (IGAccelFIFOChannel *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGAccelFIFOChannel *)0x0) {
    uVar1 = initWithOptions(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGAccelFIFOChannel *)0x0;
}



// IGAccelFIFOChannel::initWithOptions(IOGraphicsAccelerator2*, IGHardwareRingBuffer*)

undefined4 __thiscall
IGAccelFIFOChannel::initWithOptions(IGAccelFIFOChannel *this,undefined8 param_1,long *param_2)

{
  int iVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  undefined4 uVar6;
  undefined8 uVar7;
  
  *(undefined8 *)(this + 0x178) = 0;
  *(undefined8 *)(this + 0xe8) = 0;
  *(long **)(this + 0x130) = param_2;
  (**(code **)(*param_2 + 0x20))(param_2);
  _snprintf((char *)(this + 0xf0),0x20,"%s@{%u}",
            *(char **)((long)&PTR_s_RCS_001281d5 +
                      (ulong)*(byte *)(*(long *)(this + 0x130) + 0x40) * 0x79),
            *(uint *)(*(long *)(this + 0x130) + 0x38));
  _snprintf((char *)(this + 0x110),0x20,"%s %u",
            *(char **)((long)&PTR_s_Render_001281dd +
                      (ulong)*(byte *)(*(long *)(this + 0x130) + 0x40) * 0x79),
            *(uint *)(*(long *)(this + 0x130) + 0x38));
  uVar5 = (ulong)*(uint *)((long)param_2 + 0x8c) /
          (ulong)((uint)(_graphicsTracePointEnable != 0) * 0x40 +
                  *(int *)(*(long *)(this + 0x130) + 0x3c) + 0x28);
  uVar6 = (**(code **)(*(long *)this + 0x1a0))
                    (this,param_1,*(undefined4 *)(*(long *)(this + 0x130) + 0x38),uVar5,0x90,
                     (int)uVar5 * 0x90);
  if ((char)uVar6 == '\0') {
    (**(code **)(*(long *)this + 0x90))(this);
  }
  else {
    (**(code **)(**(long **)(*(long *)(this + 0x18) + 0x380) + 0x140))
              (*(long **)(*(long *)(this + 0x18) + 0x380),this + 0x138);
    if (((&DAT_000011c3)[*(long *)(this + 0x18)] & 0x10) == 0) {
      lVar2 = *(long *)(*(long *)(this + 0x18) + 0xf18);
      lVar3 = *(long *)(this + 0x130);
      iVar1 = *(int *)(lVar3 + 0x38);
      if ((iVar1 < *(int *)(&DAT_000011d0 + *(long *)(lVar2 + 600))) ||
         (*(int *)(&DAT_000011d4 + *(long *)(lVar2 + 600)) < iVar1)) {
        lVar4 = *(long *)(lVar2 + 0x18 + (long)iVar1 * 8);
        *(undefined1 *)(lVar4 + 0x48) = *(undefined1 *)(lVar3 + 0x40);
        *(long *)(lVar4 + 0x40) = lVar3;
        uVar7 = *(undefined8 *)(lVar2 + 0x18 + (long)iVar1 * 8);
      }
      else {
        uVar7 = 0;
      }
      *(undefined8 *)(this + 0xe8) = uVar7;
    }
  }
  return uVar6;
}



// IGAccelFIFOChannel::free()

void __thiscall IGAccelFIFOChannel::free(IGAccelFIFOChannel *this,void *param_1)

{
  long *plVar1;
  int iVar2;
  uintptr_t arg1;
  
  plVar1 = *(long **)(this + 0x18);
  iVar2 = _IOLockTryLock(plVar1[0x11]);
  if (iVar2 == 0) {
    if (*(int *)__got::___ktrace_kernel_enabled != 0) {
      arg1 = IORegistryEntry::getRegistryEntryID();
      _kernel_debug(0x8512001c,arg1,0,0,0,0);
    }
  }
  else {
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  }
  if (*(long *)(this + 0xe8) != 0) {
    *(undefined8 *)(this + 0xe8) = 0;
  }
  if (*(long **)(this + 0x130) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x130) + 0x28))();
  }
  *(undefined8 *)(this + 0x130) = 0;
  if (iVar2 != 0) {
    plVar1 = *(long **)(this + 0x18);
    (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar1[0x11]);
  }
                    // WARNING: Could not recover jumptable at 0x0004baf6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelFIFOChannel::setStampIndex(int)

void __thiscall IGAccelFIFOChannel::setStampIndex(IGAccelFIFOChannel *this,undefined4 param_1)

{
  int iVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  
  if (*(IGHardwareRingBuffer **)(this + 0x130) != (IGHardwareRingBuffer *)0x0) {
    IGHardwareRingBuffer::setStampIndex(*(IGHardwareRingBuffer **)(this + 0x130),param_1);
    _snprintf((char *)(this + 0xf0),0x20,"%s@{%u}",
              *(char **)((long)&PTR_s_RCS_001281d5 +
                        (ulong)*(byte *)(*(long *)(this + 0x130) + 0x40) * 0x79),
              *(uint *)(*(long *)(this + 0x130) + 0x38));
    _snprintf((char *)(this + 0x110),0x20,"%s %u",
              *(char **)((long)&PTR_s_Render_001281dd +
                        (ulong)*(byte *)(*(long *)(this + 0x130) + 0x40) * 0x79),
              *(uint *)(*(long *)(this + 0x130) + 0x38));
    if (((&DAT_000011c3)[*(long *)(this + 0x18)] & 0x10) == 0) {
      lVar2 = *(long *)(*(long *)(this + 0x18) + 0xf18);
      lVar3 = *(long *)(this + 0x130);
      iVar1 = *(int *)(lVar3 + 0x38);
      if ((iVar1 < *(int *)(&DAT_000011d0 + *(long *)(lVar2 + 600))) ||
         (*(int *)(&DAT_000011d4 + *(long *)(lVar2 + 600)) < iVar1)) {
        lVar4 = *(long *)(lVar2 + 0x18 + (long)iVar1 * 8);
        *(undefined1 *)(lVar4 + 0x48) = *(undefined1 *)(lVar3 + 0x40);
        *(long *)(lVar4 + 0x40) = lVar3;
        uVar5 = *(undefined8 *)(lVar2 + 0x18 + (long)iVar1 * 8);
      }
      else {
        uVar5 = 0;
      }
      *(undefined8 *)(this + 0xe8) = uVar5;
    }
  }
                    // WARNING: Could not recover jumptable at 0x0004bbfa. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x138))(this,param_1);
  return;
}



// IGAccelFIFOChannel::submitStampCommand()

void __thiscall
IGAccelFIFOChannel::submitStampCommand
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this)

{
  long *plVar1;
  IGHardwareRingBuffer *this_00;
  bool bVar2;
  ulong uVar3;
  undefined8 *puVar4;
  undefined8 extraout_RDX;
  char *in_R8;
  char *in_R9;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_20;
  
  if ((*(byte *)(*(long *)((long)this + 0x18) + 0xc78) & 2) != 0) {
    puVar4 = &local_20;
    local_20 = 0;
    plVar1 = *(long **)(*(long *)((long)this + 0x18) + 0x380);
    (**(code **)(*plVar1 + 0x1e0))(plVar1,*(undefined4 *)((long)this + 0x20),0);
    this_00 = *(IGHardwareRingBuffer **)((long)this + 0x130);
    uVar3 = IGHardwareRingBuffer::getSubmitStampSpace(this_00);
    bVar2 = IGHardwareRingBuffer::waitForSpace
                      (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       this_00,(uint)uVar3,extraout_RDX,puVar4,in_R8,in_R9);
    if (bVar2) {
      IGHardwareRingBuffer::submitStamp
                (*(IGHardwareRingBuffer **)((long)this + 0x130),local_20._4_4_);
      (**(code **)(**(long **)((long)this + 0x130) + 0x138))();
    }
    *(undefined4 *)((long)this + 0x178) = local_20._4_4_;
    (**(code **)(*(long *)this + 0x140))(this,(long)this + 0x138);
    if (((&DAT_000011c4)[*(long *)((long)this + 0x18)] & 4) != 0) {
      IGAccelEventMachine::finishStamp
                (*(IGAccelEventMachine **)(*(long *)((long)this + 0x18) + 0x380),
                 (ulong)*(uint *)((long)this + 0x20),0x2b);
    }
  }
  return;
}



// IGAccelFIFOChannel::submitRingCommands(unsigned int*, unsigned int, unsigned int)

void __thiscall
IGAccelFIFOChannel::submitRingCommands
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,uint param_11,uint param_12,char *param_13,char *param_14)

{
  long *plVar1;
  bool bVar2;
  ulong uVar3;
  undefined8 *puVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_38;
  
  if ((((*(byte *)(*(long *)((long)this + 0x18) + 0xc78) & 2) != 0) && (local_38 = 0, param_10 != 0)
      ) && (param_11 != 0)) {
    plVar1 = *(long **)(*(long *)((long)this + 0x18) + 0x380);
    puVar4 = &local_38;
    (**(code **)(*plVar1 + 0x1e0))(plVar1,*(undefined4 *)((long)this + 0x20),0);
    uVar3 = IGHardwareRingBuffer::getSubmitCommandSpace
                      (*(IGHardwareRingBuffer **)((long)this + 0x130));
    bVar2 = IGHardwareRingBuffer::waitForSpace
                      (extraout_XMM0_Qa,param_2_00,param_3_00,param_4,param_5,param_6,param_7,
                       param_8,*(void **)((long)this + 0x130),
                       (param_12 + 1 >> 2) + param_11 + (int)uVar3,extraout_RDX,puVar4,param_13,
                       param_14);
    if (bVar2) {
      if (param_12 != 0) {
        IGHardwareRingBuffer::alignRing(*(IGHardwareRingBuffer **)((long)this + 0x130),param_12);
      }
      IGHardwareRingBuffer::submitCommands
                (*(IGHardwareRingBuffer **)((long)this + 0x130),param_10,param_11,local_38._4_4_);
      (**(code **)(**(long **)((long)this + 0x130) + 0x138))();
      *(undefined4 *)((long)this + 0x178) = local_38._4_4_;
      (**(code **)(*(long *)this + 0x140))(this,(long)this + 0x138);
    }
    if (((&DAT_000011c4)[*(long *)((long)this + 0x18)] & 4) != 0) {
      IGAccelEventMachine::finishStamp
                (*(IGAccelEventMachine **)(*(long *)((long)this + 0x18) + 0x380),
                 (ulong)*(uint *)((long)this + 0x20),0x2b);
    }
  }
  return;
}



// IGAccelFIFOChannel::submitBuffer(IOAccelCommandDescriptor*)

void __thiscall
IGAccelFIFOChannel::submitBuffer
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  int iVar1;
  long *plVar2;
  IGHardwareRingBuffer *this_00;
  undefined4 uVar3;
  bool bVar4;
  ulong uVar5;
  uint uVar6;
  undefined8 *puVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long lVar8;
  undefined8 uVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_50;
  IGBlockFenceManager *local_48;
  IGHardwareRingBuffer *local_40;
  undefined4 local_34;
  
  if ((*(byte *)(*(long *)((long)this + 0x18) + 0xc78) & 2) == 0) {
    return;
  }
  puVar7 = &local_50;
  local_50 = 0;
  plVar2 = *(long **)(*(long *)((long)this + 0x18) + 0x380);
  uVar9 = (**(code **)(*plVar2 + 0x1e0))(plVar2,*(undefined4 *)((long)this + 0x20),0);
  uVar3 = local_50._4_4_;
  lVar8 = *(long *)(param_10 + 0x20);
  if (lVar8 == 0) {
LAB_0004beb2:
    this_00 = *(IGHardwareRingBuffer **)((long)this + 0x130);
    uVar5 = IGHardwareRingBuffer::getSubmitStampSpace(this_00);
    bVar4 = IGHardwareRingBuffer::waitForSpace
                      (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       this_00,(uint)uVar5,extraout_RDX_00,puVar7,param_13,param_14);
    if (!bVar4) goto LAB_0004c027;
    IGHardwareRingBuffer::submitStamp(*(IGHardwareRingBuffer **)((long)this + 0x130),uVar3);
  }
  else {
    puVar7 = (undefined8 *)0x0;
    if ((ulong)*(uint *)(param_10 + 0x30) == 0) goto LAB_0004beb2;
    if (*(char *)(param_10 + 0x68) != '\0') {
      *(undefined4 *)(lVar8 + (ulong)*(uint *)(param_10 + 0x30) * 4) = 0x5000000;
      *(undefined4 *)(lVar8 + (ulong)(*(int *)(param_10 + 0x30) + 1) * 4) = 0;
    }
    uVar6 = (uint)(_graphicsTracePointEnable != 0) * 0x40;
    bVar4 = IGHardwareRingBuffer::waitForSpace
                      (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(void **)((long)this + 0x130),
                       uVar6 + *(int *)((long)*(void **)((long)this + 0x130) + 0x3c) + 0x28,
                       extraout_RDX,(ulong)uVar6,param_13,param_14);
    if (!bVar4) {
      return;
    }
    if (*(IGTelemetryUsage **)((long)this + 0xe8) == (IGTelemetryUsage *)0x0) {
      local_34 = 0;
    }
    else {
      uVar5 = IGTelemetryUsage::startSample
                        (*(IGTelemetryUsage **)((long)this + 0xe8),
                         *(IGHardwareRingBuffer **)((long)this + 0x130),0x85030000,uVar3,
                         *(undefined8 *)(param_10 + 0x40),*(undefined8 *)((long)this + 0x28),0,0);
      local_34 = (undefined4)uVar5;
    }
    puVar7 = (undefined8 *)((long)this + 0x130);
    lVar8 = *(long *)(param_10 + 0x38);
    local_48 = *(IGBlockFenceManager **)(&DAT_00001268 + *(long *)((long)this + 0x18));
    if ((lVar8 != 0) && (*(char *)(lVar8 + 0xf4) == '\0')) {
      local_40 = (IGHardwareRingBuffer *)*puVar7;
      uVar5 = IGBlockFenceManager::getTailStartTimeWriteAddress(local_48);
      IGHardwareRingBuffer::writeBlockFenceMMIOTimestamp(local_40,uVar5);
    }
    (**(code **)(*(long *)*puVar7 + 0x118))
              ((long *)*puVar7,*(undefined8 *)(param_10 + 0x18),uVar3,
               *(undefined8 *)(param_10 + 0x20),*(undefined4 *)(param_10 + 0x30),
               *(undefined1 *)(param_10 + 0x6a),*(undefined1 *)(param_10 + 0x69));
    if (lVar8 != 0) {
      local_40 = (IGHardwareRingBuffer *)*puVar7;
      if (*(char *)(lVar8 + 0xf4) == '\0') {
        uVar5 = IGBlockFenceManager::getTailEndTimeWriteAddress(local_48);
        IGHardwareRingBuffer::writeBlockFenceMMIOTimestamp(local_40,uVar5);
        IGBlockFenceManager::incrementTailWithFence(local_48,lVar8);
        *(undefined1 *)(lVar8 + 0xf4) = 1;
      }
      else {
        uVar5 = IGBlockFenceManager::getBlockFenceEndTimeWriteAddress(local_48,lVar8);
        IGHardwareRingBuffer::writeBlockFenceMMIOTimestamp(local_40,uVar5);
      }
    }
    if ((char)local_34 != '\0') {
      IGTelemetryUsage::stopSample
                (*(IGTelemetryUsage **)((long)this + 0xe8),
                 *(IGHardwareRingBuffer **)((long)this + 0x130),0x85030008);
    }
    (**(code **)(**(long **)((long)this + 0x130) + 0x160))
              (*(long **)((long)this + 0x130),uVar3,*(undefined1 *)(param_10 + 0x69));
    dtHookSubmitBatchBuffer();
  }
  (**(code **)(**(long **)((long)this + 0x130) + 0x138))();
LAB_0004c027:
  *(undefined4 *)((long)this + 0x178) = uVar3;
  (**(code **)(*(long *)this + 0x140))(this);
  lVar8 = *(long *)((long)this + 0x18);
  if ((((&DAT_000011c4)[lVar8] & 4) != 0) || (*(char *)(param_10 + 0x6b) != '\0')) {
    IGAccelEventMachine::finishStamp
              (*(IGAccelEventMachine **)(lVar8 + 0x380),(ulong)*(uint *)((long)this + 0x20),0x2b);
    lVar8 = *(long *)((long)this + 0x18);
  }
  iVar1 = *(int *)(param_10 + 0x30);
  IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar8 + 0x388) + 0x58),0);
  *(int *)(lVar8 + 0x1a0) = *(int *)(lVar8 + 0x1a0) + iVar1 * 4;
  return;
}



// IGAccelFIFOChannel::sleepForStamp(unsigned int, unsigned int*)

undefined8 __thiscall
IGAccelFIFOChannel::sleepForStamp(IGAccelFIFOChannel *this,uint param_1,undefined4 *param_2)

{
  bool bVar1;
  uint in_EAX;
  undefined8 uVar2;
  undefined8 uStack_18;
  
  uStack_18 = (ulong)in_EAX;
  bVar1 = IGHardwareRingBuffer::sleepForStamp
                    (*(IGHardwareRingBuffer **)(this + 0x130),(int *)((long)&uStack_18 + 4),param_1,
                     0);
  uVar2 = 0xe00002d6;
  if (!bVar1) {
    *param_2 = uStack_18._4_4_;
    uVar2 = 0;
  }
  return uVar2;
}



// IGAccelFIFOChannel::notifyComplete(IOAccelEvent*)

ulong __thiscall IGAccelFIFOChannel::notifyComplete(IGAccelFIFOChannel *this,long param_1)

{
  bool bVar1;
  undefined7 extraout_var;
  ulong uVar2;
  
  if (*(IGHardwareRingBuffer **)(this + 0x130) == (IGHardwareRingBuffer *)0x0) {
    uVar2 = 0;
  }
  else {
    bVar1 = IGHardwareRingBuffer::notifyComplete(*(IGHardwareRingBuffer **)(this + 0x130),param_1);
    uVar2 = CONCAT71(extraout_var,bVar1) & 0xffffffff;
    dtHookCompleteExecute();
  }
  return uVar2;
}



// IGAccelFIFOChannel::resetHardwareAndReplay()

void __thiscall IGAccelFIFOChannel::resetHardwareAndReplay(IGAccelFIFOChannel *this)

{
  int *piVar1;
  long lVar2;
  char cVar3;
  
  lVar2 = *(long *)((*(long **)(this + 0x130))[4] + 0xb0);
  cVar3 = (**(code **)(**(long **)(this + 0x130) + 0x168))();
  if (cVar3 == '\0') {
    piVar1 = (int *)(lVar2 + 0x17c);
    *piVar1 = *piVar1 + 1;
  }
                    // WARNING: Could not recover jumptable at 0x0004c16a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x18)) + 0x180))();
  return;
}



// IGAccelFIFOChannel::getHardwareDiagnosisReport(unsigned int*)

void __thiscall
IGAccelFIFOChannel::getHardwareDiagnosisReport
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          undefined4 *param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14
          )

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined4 *puVar2;
  undefined8 extraout_XMM0_Qa;
  
  puVar2 = param_10;
  uVar1 = IGHardwareRingBuffer::doHangAnalysis(*(IGHardwareRingBuffer **)((long)this + 0x130));
  *param_10 = (int)uVar1;
  IGHardwareRingBuffer::dumpHangAnalysis
            (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             *(void **)((long)this + 0x130),puVar2,extraout_RDX,param_12,param_13,param_14);
  return;
}



// IGAccelFIFOChannel::getChannelLabel() const

IGAccelFIFOChannel * __thiscall IGAccelFIFOChannel::getChannelLabel(IGAccelFIFOChannel *this)

{
  return this + 0x110;
}



// IGAccelFIFOChannel::MetaClass::~MetaClass()

void __thiscall IGAccelFIFOChannel::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelFIFOChannel_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelFIFOChannel::gMetaClass,"IGAccelFIFOChannel",
             (OSMetaClass *)__got::gMetaClass,0x180);
  IGAccelFIFOChannel::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelFIFOChannel::gMetaClass);
  return;
}



// IGTelemetryUsage::MetaClass::MetaClass()

void __thiscall IGTelemetryUsage::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGTelemetryUsage",(OSMetaClass *)__got::gMetaClass,0x98);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGTelemetryUsage::MetaClass::~MetaClass()

void __thiscall IGTelemetryUsage::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGTelemetryUsage::IGTelemetryUsage(OSMetaClass const*)

void __thiscall IGTelemetryUsage::IGTelemetryUsage(IGTelemetryUsage *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGTelemetryUsage;
  return;
}



// IGTelemetryUsage::IGTelemetryUsage(OSMetaClass const*)

void __thiscall IGTelemetryUsage::IGTelemetryUsage(IGTelemetryUsage *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGTelemetryUsage;
  return;
}



// IGTelemetryUsage::~IGTelemetryUsage()

void __thiscall IGTelemetryUsage::~IGTelemetryUsage(IGTelemetryUsage *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGTelemetryUsage::~IGTelemetryUsage()

void __thiscall IGTelemetryUsage::~IGTelemetryUsage(IGTelemetryUsage *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGTelemetryUsage::~IGTelemetryUsage()

void __thiscall IGTelemetryUsage::~IGTelemetryUsage(IGTelemetryUsage *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGTelemetryUsage_ktv,this,0x98);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryUsage::operator delete(void*, unsigned long)

void __cdecl IGTelemetryUsage::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGTelemetryUsage_ktv,param_1,param_2);
  return;
}



// IGTelemetryUsage::getMetaClass() const

undefined8 * IGTelemetryUsage::getMetaClass(void)

{
  return &gMetaClass;
}



// IGTelemetryUsage::MetaClass::MetaClass()

void __thiscall IGTelemetryUsage::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGTelemetryUsage",(OSMetaClass *)__got::gMetaClass,0x98);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGTelemetryUsage::MetaClass::alloc() const

OSObject * IGTelemetryUsage::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGTelemetryUsage_ktv,0x98);
  OSObject::OSObject(this,(OSMetaClass *)&IGTelemetryUsage::gMetaClass);
  *(undefined ***)this = &__const::~IGTelemetryUsage;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGTelemetryUsage::operator new(unsigned long)

void * __thiscall IGTelemetryUsage::operator_new(IGTelemetryUsage *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGTelemetryUsage_ktv,this);
  return pvVar1;
}



// IGTelemetryUsage::IGTelemetryUsage()

void __thiscall IGTelemetryUsage::IGTelemetryUsage(IGTelemetryUsage *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGTelemetryUsage;
  OSMetaClass::instanceConstructed();
  return;
}



// IGTelemetryUsage::IGTelemetryUsage()

void __thiscall IGTelemetryUsage::IGTelemetryUsage(IGTelemetryUsage *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGTelemetryUsage;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryUsage::withAcceleratorAndStampIndex(IntelAccelerator*, int)

IGTelemetryUsage * __cdecl
IGTelemetryUsage::withAcceleratorAndStampIndex(long param_1,undefined4 param_2)

{
  undefined4 uVar1;
  IGTelemetryUsage *this;
  
  this = (IGTelemetryUsage *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGTelemetryUsage *)0x0) {
    uVar1 = initWithAcceleratorAndStampIndex(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGTelemetryUsage *)0x0;
}



// IGTelemetryUsage::initWithAcceleratorAndStampIndex(IntelAccelerator*, int)

undefined4 __thiscall
IGTelemetryUsage::initWithAcceleratorAndStampIndex
          (IGTelemetryUsage *this,long param_1,undefined4 param_2)

{
  undefined4 uVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong *puVar4;
  
  uVar1 = (**(code **)(__got::vtable + 0x98))();
  if ((char)uVar1 != '\0') {
    uVar2 = _current_thread();
    uVar3 = _thread_tid(uVar2);
    *(long *)(this + 0x18) = param_1;
    *(undefined8 *)(this + 0x30) = 0;
    this[0x38] = (IGTelemetryUsage)0x0;
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x68) = 0;
    *(undefined8 *)(this + 0x70) = 0;
    *(undefined8 *)(this + 0x88) = 0;
    *(undefined8 *)(this + 0x50) = 0;
    puVar4 = IGTelemetryManager::getThreadInfo(*(IGTelemetryManager **)(param_1 + 0xf18),uVar3);
    *(ulong **)(this + 0x20) = puVar4;
    uVar2 = IGAccelTask::getStamps(*(IGAccelTask **)(*(long *)(this + 0x18) + 0x150));
    *(undefined8 *)(this + 0x28) = uVar2;
    g_telemetryUsageInvocationCount = g_telemetryUsageInvocationCount + 1;
    *(long *)(this + 0x10) = g_telemetryUsageInvocationCount;
    *(undefined8 *)(this + 0x30) =
         *(undefined8 *)(*(long *)(*(long *)(this + 0x18) + 0xf18) + 0x260);
    _gpu_describe();
    *(undefined8 *)(this + 0x40) = 0;
    this[0x48] = (IGTelemetryUsage)0x0;
    *(undefined4 *)(this + 0x4c) = param_2;
    allocUsageMem(this);
  }
  return uVar1;
}



// IGTelemetryUsage::allocUsageMem()

void __thiscall IGTelemetryUsage::allocUsageMem(IGTelemetryUsage *this)

{
  long *plVar1;
  IGMappedBuffer *this_00;
  uint uVar2;
  IGSharedMappedBuffer *this_01;
  undefined8 uVar3;
  long lVar4;
  uint uVar5;
  
  uVar2 = lusage_entries;
  uVar5 = lusage_entries * 0x38 + 0xfff & 0xfffff000;
  *(uint *)(this + 0x78) = uVar5;
  *(uint *)(this + 0x90) = uVar2 * 0x58;
  *(undefined8 *)(this + 0x70) = 0;
  *(undefined8 *)(this + 0x88) = 0;
  this_01 = IGSharedMappedBuffer::withOptions
                      (*(long *)(*(long *)(this + 0x18) + 0x150),(ulong)uVar5,0,0);
  *(IGSharedMappedBuffer **)(this + 0x68) = this_01;
  if (this_01 != (IGSharedMappedBuffer *)0x0) {
    uVar3 = IGSharedMappedBuffer::getVirtualAddress(this_01);
    *(undefined8 *)(this + 0x70) = uVar3;
    lVar4 = _IOMallocTypeVarImpl
                      (&allocUsageMem()::kalloc_type_view_160,(ulong)lusage_entries * 0x58);
    *(long *)(this + 0x88) = lVar4;
    this_00 = *(IGMappedBuffer **)(this + 0x68);
    if ((*(long *)(this + 0x70) == 0) || (lVar4 == 0)) {
      if (this_00 != (IGMappedBuffer *)0x0) {
        (**(code **)(*(long *)this_00 + 0x28))();
      }
      *(undefined8 *)(this + 0x68) = 0;
    }
    else {
      uVar3 = IGMappedBuffer::getGPUVirtualAddress(this_00);
      *(undefined8 *)(this + 0x80) = uVar3;
      ___bzero(*(undefined8 *)(this + 0x70),*(undefined4 *)(this + 0x78));
      lVar4 = *(long *)(*(long *)(this + 0x18) + 0xf18);
      plVar1 = (long *)(lVar4 + 0x240);
      *plVar1 = *plVar1 + (ulong)*(uint *)(this + 0x78);
      plVar1 = (long *)(lVar4 + 0x248);
      *plVar1 = *plVar1 + (ulong)*(uint *)(this + 0x90);
    }
  }
  return;
}



// IGTelemetryUsage::deallocUsageMem()

void __thiscall IGTelemetryUsage::deallocUsageMem(IGTelemetryUsage *this)

{
  long *plVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  
  lVar2 = *(long *)(*(long *)(this + 0x18) + 0xf18);
  plVar1 = (long *)(lVar2 + 0x240);
  *plVar1 = *plVar1 - (ulong)*(uint *)(this + 0x78);
  plVar1 = (long *)(lVar2 + 0x248);
  *plVar1 = *plVar1 - (ulong)*(uint *)(this + 0x90);
  if (*(int *)(this + 0x50) != *(int *)(this + 0x54)) {
    dismissPendingUsageStats(this);
  }
  if (*(long **)(this + 0x68) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x68) + 0x28))();
    *(undefined8 *)(this + 0x68) = 0;
  }
  uVar4 = (ulong)lusage_entries;
  uVar3 = *(undefined8 *)(this + 0x88);
  *(undefined8 *)(this + 0x88) = 0;
  _IOFreeTypeVarImpl(&deallocUsageMem()::kalloc_type_view_199,uVar3,uVar4 * 0x58);
  return;
}



// IGTelemetryUsage::dismissPendingUsageStats()

void __thiscall IGTelemetryUsage::dismissPendingUsageStats(IGTelemetryUsage *this)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  long lVar5;
  
  uVar4 = (ulong)*(uint *)(this + 0x50);
  uVar3 = *(uint *)(this + 0x54);
  if (*(uint *)(this + 0x50) != uVar3) {
    do {
      lVar1 = *(long *)(this + 0x88);
      lVar5 = uVar4 * 0x58;
      lVar2 = *(long *)(lVar1 + 0x18 + lVar5);
      if (lVar2 != 0) {
        _OSDecrementAtomic(lVar2 + 8);
        uVar4 = (ulong)*(uint *)(this + 0x50);
        uVar3 = *(uint *)(this + 0x54);
      }
      *(undefined8 *)(lVar1 + lVar5 + 0x18) = 0;
      uVar4 = (ulong)((int)uVar4 + 1) % (ulong)lusage_entries;
      *(uint *)(this + 0x50) = (uint)uVar4;
    } while ((uint)uVar4 != uVar3);
  }
  return;
}



// IGTelemetryUsage::free()

void __thiscall IGTelemetryUsage::free(IGTelemetryUsage *this,void *param_1)

{
  deallocUsageMem(this);
  if (*(long *)(this + 0x20) != 0) {
    _OSDecrementAtomic(*(long *)(this + 0x20) + 8);
    *(undefined8 *)(this + 0x20) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0004c718. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGTelemetryUsage::writePipelineFlush(IGHardwareRingBuffer*)

void __thiscall
IGTelemetryUsage::writePipelineFlush(IGTelemetryUsage *this,IGHardwareRingBuffer *param_1)

{
  char cVar1;
  undefined7 extraout_var;
  ulong local_58 [7];
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  local_58[5] = 0;
  local_58[4] = 0;
  local_58[3] = 0;
  local_58[2] = 0;
  local_58[1] = 0;
  local_58[0] = 0;
  cVar1 = IGTelemetryKMD::CoreSendPipeControl
                    (*(long *)(this + 0x18) + 0xf36,local_58,0x200000,0,0,0);
  IGHardwareRingBuffer::writeBuffer(param_1,(long)local_58,(int)CONCAT71(extraout_var,cVar1) * 6);
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryUsage::logUsage(IGHardwareContext*, unsigned long long)

void __cdecl IGTelemetryUsage::logUsage(IGTelemetryUsage *param_1,undefined8 param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  
  if (*(int *)(param_1 + 0x50) != *(int *)(param_1 + 0x54)) {
    checkForCompletedSamples(param_1,param_2,0,0);
    if (_graphicsTracePointEnable != 0) {
      iVar1 = *(int *)(param_1 + 0x54);
      iVar2 = *(int *)(param_1 + 0x50);
      uVar3 = iVar1 - iVar2 >> 0x1f & lusage_entries;
      dtHookTrace();
      if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
        _kernel_debug(0x85a0fff8,(long)(int)(uVar3 + (iVar1 - iVar2)),(ulong)(byte)param_1[0x48],
                      *(uintptr_t *)(param_1 + 0x10),0,0);
        return;
      }
    }
  }
  return;
}



// IGTelemetryUsage::checkForCompletedSamples(unsigned long long, unsigned long long, unsigned long
// long)

ulong __thiscall
IGTelemetryUsage::checkForCompletedSamples
          (IGTelemetryUsage *this,undefined8 param_2_00,long param_2,long param_3)

{
  int *piVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  long lVar5;
  uint64_t uVar6;
  uint uVar7;
  uint uVar8;
  ulong uVar9;
  uintptr_t arg3;
  long lVar10;
  long *plVar11;
  undefined8 unaff_R15;
  ulong uVar12;
  ulong local_48;
  
  lVar2 = *(long *)(*(long *)(*(long *)(this + 0x18) + 0xf18) + 0x260);
  if (*(long *)(this + 0x30) == lVar2) {
    uVar8 = *(uint *)(this + 0x50);
    uVar4 = *(uint *)(this + 0x54);
    if (uVar8 != uVar4) {
      local_48 = 0;
      do {
        lVar2 = *(long *)(this + 0x70);
        uVar9 = (ulong)uVar8;
        piVar1 = (int *)(uVar9 * 0x38 + lVar2);
        lVar3 = *(long *)(this + 0x88);
        lVar10 = uVar9 * 0x58;
        arg3 = (uintptr_t)*(int *)(lVar3 + lVar10);
        uVar7 = *(int *)(*(long *)(this + 0x28) + arg3 * 0x40) - *(int *)(lVar3 + 4 + lVar10);
        if ((param_2 == 0 && param_3 == 0) || ((uVar7 & 0x80000000) != 0)) {
          if (-1 < (int)uVar7) goto LAB_0004c8ef;
LAB_0004c956:
          uVar12 = 0;
          if ((uVar4 + 1) % lusage_entries == uVar8) {
            *(long *)(this + 0x60) = *(long *)(this + 0x60) + 1;
            if (_graphicsTracePointEnable != 0) {
              dtHookTrace();
              if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
                _kernel_debug(0x85a0fffc,5,*(uintptr_t *)(this + 0x60),1,0,0);
              }
              if ((_graphicsTracePointEnable != 0) &&
                 (*(int *)(*(long *)(this + 0x18) + 0xe48) != 0)) {
                if (local_48 == 0) {
                  uVar6 = _mach_absolute_time();
                  local_48 = uVar6 + 500000;
                }
                uVar6 = _mach_absolute_time();
                if (uVar6 < local_48) {
                  uVar8 = *(uint *)(this + 0x50);
                  goto LAB_0004ca11;
                }
                if (_graphicsTracePointEnable != 0) {
                  dtHookTrace();
                  if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
                    _kernel_debug(0x85a0fffc,6,(ulong)(byte)this[0x48],arg3,
                                  (ulong)*(uint *)(this + 0x50),0);
                  }
                }
              }
            }
            plVar11 = (long *)(lVar3 + uVar9 * 0x58 + 0x18);
            lVar2 = *plVar11;
            if (lVar2 != 0) {
              _OSDecrementAtomic(lVar2 + 8);
            }
            *plVar11 = 0;
            *(uint *)(this + 0x50) = (*(int *)(this + 0x50) + 1U) % lusage_entries;
            uVar12 = 1;
            if (_graphicsTracePointEnable != 0) {
              dtHookTrace();
              if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
                _kernel_debug(0x85a0fffc,7,(ulong)(byte)this[0x48],arg3,
                              (ulong)*(uint *)(this + 0x50),0);
              }
            }
          }
          goto LAB_0004ca30;
        }
        lVar5 = IGAccelTraceStreamManager::combineHiLoStopTic((long)piVar1);
        if (((ulong)(param_3 - lVar5) >> 0x23 & 1) != 0) {
          uVar8 = *(uint *)(this + 0x50);
          uVar4 = *(uint *)(this + 0x54);
          goto LAB_0004c956;
        }
LAB_0004c8ef:
        if ((*piVar1 != -0x21524111) && (*(int *)(lVar2 + 8 + uVar9 * 0x38) != -0x21524111)) {
          processSample(this,piVar1,lVar3 + lVar10);
        }
        lVar2 = *(long *)(lVar3 + 0x18 + lVar10);
        if (lVar2 != 0) {
          _OSDecrementAtomic(lVar2 + 8);
        }
        *(undefined8 *)(lVar3 + lVar10 + 0x18) = 0;
        uVar8 = (*(int *)(this + 0x50) + 1U) % lusage_entries;
        *(uint *)(this + 0x50) = uVar8;
LAB_0004ca11:
        uVar4 = *(uint *)(this + 0x54);
      } while (uVar8 != uVar4);
    }
    uVar12 = 0;
  }
  else {
    *(long *)(this + 0x30) = lVar2;
    dismissPendingUsageStats(this);
    uVar12 = CONCAT71((int7)((ulong)unaff_R15 >> 8),1);
  }
LAB_0004ca30:
  return uVar12 & 0xffffffff;
}



// IGTelemetryUsage::processSample(TelemetrySampleUsageGPU*, TelemetrySampleUsageMeta*)

void __thiscall IGTelemetryUsage::processSample(IGTelemetryUsage *this,int *param_1,long param_2)

{
  long *plVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uintptr_t arg1;
  long lVar12;
  long lVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  ulong arg2;
  uintptr_t arg2_00;
  uintptr_t arg2_01;
  ulong arg2_02;
  
  if (*(long *)(param_2 + 0x18) != 0) {
    lVar13 = IGAccelTraceStreamManager::get_fullTicTimestampFromSampleUsageGPU
                       ((IGAccelTraceStreamManager *)(*(long *)(this + 0x18) + 0xe18),(long)param_1)
    ;
    uVar14 = (ulong)(lVar13 * 10000) / _g_timestampFreqPerDenominator;
    uVar15 = ((ulong)(uint)(param_1[2] - *param_1) * 10000) / _g_timestampFreqPerDenominator;
    if ((_graphicsTracePointEnable != 0) && (*(int *)(*(long *)(this + 0x18) + 0xe48) != 0)) {
      uVar16 = IGAccelTraceStream::addEvent
                         (*(IGAccelTraceStream **)
                           (*(long *)(this + 0x18) + 0xe20 + (ulong)(byte)this[0x48] * 8),
                          *(uint *)(param_2 + 0x28),uVar14 - uVar15,*(ulong *)(param_2 + 0x30),
                          *(ulong *)(param_2 + 0x38),*(ulong *)(param_2 + 0x40),
                          *(ulong *)(param_2 + 0x48));
      if (uVar16 == 0) {
        return;
      }
      arg1 = *(uintptr_t *)(param_2 + 0x30);
      arg2_02 = (ulong)*(uint *)(&DAT_00001154 + *(long *)(this + 0x18));
      uVar2 = param_1[4];
      uVar3 = param_1[5];
      uVar4 = param_1[6];
      uVar5 = param_1[8];
      uVar6 = param_1[10];
      uVar7 = param_1[0xc];
      uVar8 = param_1[7];
      uVar9 = param_1[9];
      uVar10 = param_1[0xb];
      uVar11 = param_1[0xd];
      uVar16 = (uVar8 - uVar4) * arg2_02;
      if (uVar16 == 0) {
        arg2 = 0;
        arg2_00 = 0;
      }
      else {
        arg2 = ((ulong)(uVar9 - uVar5) * 100) / uVar16;
        arg2_00 = ((ulong)(uVar10 - uVar6) * 100) / uVar16;
      }
      if (uVar3 == uVar2) {
        arg2_01 = 0;
      }
      else {
        arg2_01 = ((ulong)(uVar11 - uVar7) * 100) / (ulong)(uVar3 - uVar2);
      }
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug(0x85a00221,arg1,arg2_02,(ulong)uVar5,(ulong)uVar4,0);
        }
        if (_graphicsTracePointEnable != 0) {
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            _kernel_debug(0x85a00225,arg1,arg2_02,(ulong)uVar6,(ulong)uVar4,0);
          }
          if ((_graphicsTracePointEnable != 0) &&
             (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
            _kernel_debug(0x85a00229,arg1,0,(ulong)uVar7,(ulong)uVar2,0);
          }
        }
      }
      dtHookBeginExecOnGPU();
      IGAccelTraceStream::addEvent
                (*(IGAccelTraceStream **)
                  (*(long *)(this + 0x18) + 0xe20 + (ulong)(byte)this[0x48] * 8),
                 *(uint *)(param_2 + 0x2c),uVar14,*(ulong *)(param_2 + 0x30),
                 *(ulong *)(param_2 + 0x38),*(ulong *)(param_2 + 0x40),*(ulong *)(param_2 + 0x48));
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug(0x85a00222,arg1,arg2,(ulong)uVar9,(ulong)uVar8,0);
        }
        if (_graphicsTracePointEnable != 0) {
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            _kernel_debug(0x85a00226,arg1,arg2_00,(ulong)uVar10,(ulong)uVar8,0);
          }
          if ((_graphicsTracePointEnable != 0) &&
             (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
            _kernel_debug(0x85a0022a,arg1,arg2_01,(ulong)uVar11,(ulong)uVar3,0);
          }
        }
      }
      dtHookEndExecOnGPU();
    }
    lVar13 = *(long *)(this + 0x18);
    if ((*(uint *)(&DAT_000011c0 + lVar13) & 0x1c00000) != 0xc00000) {
      if (*(int *)(param_2 + 0x10) == 2) {
        _gpu_accumulate_time(2,0,this[0x48],uVar15,uVar14);
        lVar13 = *(long *)(this + 0x18);
        uVar16 = (ulong)(byte)this[0x48];
      }
      else {
        lVar12 = *(long *)(param_2 + 0x18);
        uVar16 = (ulong)(byte)this[0x48];
        plVar1 = (long *)(lVar12 + 0x10 + uVar16 * 8);
        *plVar1 = *plVar1 + uVar15;
        *(ulong *)(lVar12 + 0x38 + uVar16 * 8) = uVar14;
      }
      plVar1 = (long *)(*(long *)(lVar13 + 0xe10) + 400 + uVar16 * 0x70);
      *plVar1 = *plVar1 + uVar15;
    }
    *(ulong *)(this + 0x58) = uVar14;
  }
  return;
}



// IGTelemetryUsage::reportGlobalUsage()

void __thiscall IGTelemetryUsage::reportGlobalUsage(IGTelemetryUsage *this)

{
  IntelAccelerator *pIVar1;
  undefined8 uVar2;
  long lVar3;
  uint64_t uVar4;
  undefined *puVar5;
  long lVar6;
  
  uVar4 = _mach_absolute_time();
  if (*(ulong *)(*(long *)(*(long *)(this + 0x18) + 0xf18) + 0x218) <= uVar4) {
    puVar5 = ___idvarGetParam(0x1b);
    pIVar1 = *(IntelAccelerator **)(this + 0x18);
    *(uint64_t *)(*(long *)(pIVar1 + 0xf18) + 0x218) = (long)puVar5 * 1000000 + uVar4;
    IntelAccelerator::SafeForceWake(pIVar1,1);
    pIVar1 = *(IntelAccelerator **)(this + 0x18);
    *(undefined4 *)(*(long *)(pIVar1 + 0xf18) + 0x220) =
         *(undefined4 *)((long)&nlist_00145948.n_strx + *(long *)(pIVar1 + 0x1270));
    lVar6 = 0;
    IntelAccelerator::SafeForceWake(pIVar1,0);
    uVar2 = *(undefined8 *)(this + 0x10);
    lVar3 = *(long *)(*(long *)(this + 0x18) + 0xe10);
    do {
      *(undefined8 *)(lVar3 + 0x1a8 + lVar6) = *(undefined8 *)(lVar3 + 400 + lVar6);
      *(undefined8 *)(lVar3 + 0x1b0 + lVar6) = *(undefined8 *)(lVar3 + 0x198 + lVar6);
      *(undefined8 *)(lVar3 + 0x1f8 + lVar6) = uVar2;
      lVar6 = lVar6 + 0x70;
    } while (lVar6 != 0x230);
  }
  return;
}



// IGTelemetryUsage::reportUsageToOS()

void __thiscall IGTelemetryUsage::reportUsageToOS(IGTelemetryUsage *this)

{
  uint64_t uVar1;
  long lVar2;
  long lVar3;
  ulong uVar4;
  
  uVar1 = _mach_absolute_time();
  lVar2 = *(long *)(this + 0x20);
  if (*(ulong *)(lVar2 + 0xb8) <= uVar1) {
    *(uint64_t *)(lVar2 + 0xb8) = uVar1 + 500000000;
    uVar4 = 0;
    do {
      lVar3 = *(long *)(lVar2 + 0x10 + uVar4 * 8) - *(long *)(lVar2 + 0x60 + uVar4 * 8);
      if (lVar3 != 0) {
        *(uint64_t *)(lVar2 + 0x38 + uVar4 * 8) = uVar1;
        _gpu_accumulate_time(1,0,uVar4 & 0xffffffff,lVar3,uVar1);
        lVar2 = *(long *)(this + 0x20);
        *(undefined8 *)(lVar2 + 0x60 + uVar4 * 8) = *(undefined8 *)(lVar2 + 0x10 + uVar4 * 8);
        *(undefined8 *)(lVar2 + 0x88 + uVar4 * 8) = *(undefined8 *)(lVar2 + 0x38 + uVar4 * 8);
      }
      uVar4 = uVar4 + 1;
    } while (uVar4 != 5);
  }
  return;
}



// IGTelemetryUsage::startSample(IGHardwareRingBuffer*, unsigned int, unsigned int, unsigned long
// long, unsigned long long, unsigned long long, unsigned long long)

ulong __thiscall
IGTelemetryUsage::startSample
          (IGTelemetryUsage *this,IGHardwareRingBuffer *param_1,undefined4 param_2,
          undefined4 param_3,undefined8 param_4,undefined8 param_5,undefined8 param_6,
          undefined8 param_7)

{
  int iVar1;
  int iVar2;
  long lVar3;
  char cVar4;
  undefined *puVar5;
  undefined8 uVar6;
  ulong uVar7;
  ulong *puVar8;
  uint64_t uVar9;
  long lVar10;
  uint uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  
  if (*(long *)(this + 0x68) != 0) {
    puVar5 = ___idvarGetParam(0xb);
    if (((ulong)puVar5 & (long)(1 << ((byte)this[0x48] & 0x1f))) != 0) {
      lVar13 = *(long *)(this + 0x18);
      if (*(long *)(lVar13 + 0xec0) == 0) {
        uVar6 = _current_thread();
        uVar7 = _thread_tid(uVar6);
        puVar8 = *(ulong **)(this + 0x20);
        if (puVar8 == (ulong *)0x0) {
LAB_0004d1e7:
          puVar8 = IGTelemetryManager::getThreadInfo(*(IGTelemetryManager **)(lVar13 + 0xf18),uVar7)
          ;
          *(ulong **)(this + 0x20) = puVar8;
        }
        else if (uVar7 != *puVar8) {
          _OSDecrementAtomic(puVar8 + 1);
          lVar13 = *(long *)(this + 0x18);
          goto LAB_0004d1e7;
        }
        uVar9 = _mach_absolute_time();
        *(uint64_t *)(*(long *)(this + 0x20) + 0xc0) = uVar9;
        if ((_graphicsTracePointEnable == 0) || (*(int *)(*(long *)(this + 0x18) + 0xe48) == 0)) {
          cVar4 = IGScheduler::schedulerType
                            ((byte)(*(uint *)(&DAT_000011c0 + *(long *)(this + 0x18)) >> 0x16) & 7);
          if (cVar4 == '\x01') goto LAB_0004d239;
          this[0x38] = (IGTelemetryUsage)0x1;
        }
        else {
LAB_0004d239:
          this[0x38] = (IGTelemetryUsage)0x0;
          if ((*(int *)(this + 0x54) + 1U) % lusage_entries == *(uint *)(this + 0x50)) {
            *(long *)(this + 0x60) = *(long *)(this + 0x60) + 1;
            goto LAB_0004d1a3;
          }
        }
        reportUsageToOS(this);
        reportGlobalUsage(this);
        uVar7 = CONCAT71((int7)(uVar7 >> 8),1);
        if (this[0x38] == (IGTelemetryUsage)0x0) {
          lVar13 = *(long *)(this + 0x70);
          lVar12 = (ulong)*(uint *)(this + 0x54) * 0x38;
          lVar3 = *(long *)(this + 0x88);
          lVar14 = (ulong)*(uint *)(this + 0x54) * 0x58;
          *(undefined4 *)(lVar13 + lVar12) = 0xdeadbeef;
          *(undefined4 *)(lVar13 + 8 + lVar12) = 0xdeadbeef;
          *(undefined4 *)(lVar3 + lVar14) = *(undefined4 *)(param_1 + 0x38);
          *(undefined4 *)(lVar3 + 4 + lVar14) = param_3;
          if (*(long *)(this + 0x20) == 0) {
            lVar10 = 0;
          }
          else {
            _OSIncrementAtomic(*(long *)(this + 0x20) + 8);
            lVar10 = *(long *)(this + 0x20);
          }
          *(long *)(lVar3 + 0x18 + lVar14) = lVar10;
          *(undefined4 *)(lVar3 + 0x10 + lVar14) = 1;
          *(undefined4 *)(lVar3 + 0x28 + lVar14) = param_2;
          *(undefined8 *)(lVar3 + 0x30 + lVar14) = param_4;
          *(undefined8 *)(lVar3 + 0x38 + lVar14) = param_5;
          *(undefined8 *)(lVar3 + 0x40 + lVar14) = param_6;
          *(undefined8 *)(lVar3 + 0x48 + lVar14) = param_7;
          *(undefined8 *)(lVar3 + 0x50 + lVar14) = *(undefined8 *)(*(long *)(this + 0x18) + 0xe58);
          uVar6 = *(undefined8 *)(this + 0x10);
          *(undefined8 *)(lVar10 + 0xb0) = uVar6;
          *(undefined8 *)(lVar3 + 8 + lVar14) = uVar6;
          IGHardwareRingBuffer::sampleTimestamp
                    (param_1,((lVar13 + lVar12) - *(long *)(this + 0x70)) + *(long *)(this + 0x80));
          if (_graphicsTracePointEnable != 0) {
            iVar1 = *(int *)(this + 0x54);
            iVar2 = *(int *)(this + 0x50);
            uVar11 = iVar1 - iVar2 >> 0x1f & lusage_entries;
            dtHookTrace();
            if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
              _kernel_debug(0x85a0fff4,(long)(int)(uVar11 + (iVar1 - iVar2)),(ulong)(byte)this[0x48]
                            ,*(uintptr_t *)(this + 0x10),**(uintptr_t **)(this + 0x20),0);
            }
          }
        }
        goto LAB_0004d1a6;
      }
    }
  }
LAB_0004d1a3:
  uVar7 = 0;
LAB_0004d1a6:
  return uVar7 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryUsage::stopSample(IGHardwareRingBuffer*, unsigned int, unsigned int)

void __cdecl
IGTelemetryUsage::stopSample
          (IGTelemetryUsage *param_1,IGHardwareRingBuffer *param_2,undefined4 param_3)

{
  long lVar1;
  undefined *puVar2;
  long lVar3;
  
  if ((param_1[0x38] == (IGTelemetryUsage)0x0) && (*(long *)(param_1 + 0x68) != 0)) {
    puVar2 = ___idvarGetParam(0xb);
    if ((((ulong)puVar2 & (long)(1 << ((byte)param_1[0x48] & 0x1f))) != 0) &&
       (*(long *)(*(long *)(param_1 + 0x18) + 0xec0) == 0)) {
      if ((_graphicsTracePointEnable != 0) && (param_1[0x48] == (IGTelemetryUsage)0x0)) {
        writePipelineFlush(param_1,param_2);
      }
      lVar1 = *(long *)(param_1 + 0x88);
      lVar3 = (ulong)*(uint *)(param_1 + 0x54) * 0x58;
      if (*(long *)(lVar1 + 0x18 + lVar3) != 0) {
        IGHardwareRingBuffer::sampleTimestampHiLoHi
                  (param_2,(ulong)*(uint *)(param_1 + 0x54) * 0x38 + *(long *)(param_1 + 0x80));
        *(undefined4 *)(lVar1 + 0x2c + lVar3) = param_3;
        *(uint *)(param_1 + 0x54) = (*(int *)(param_1 + 0x54) + 1U) % lusage_entries;
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryUsage::frameCalcGPUBusy(IntelAccelerator*, unsigned int)

void __cdecl IGTelemetryUsage::frameCalcGPUBusy(long param_1,uint param_2)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  uint64_t uVar4;
  ulong uVar5;
  long lVar6;
  uint32_t debugid;
  uintptr_t arg3;
  long lVar7;
  
  uVar4 = _mach_absolute_time();
  debugid = 0x85a00120;
  lVar7 = 0;
  do {
    if ((param_1 != 0) && (lVar1 = *(long *)(param_1 + 0xe10), lVar1 != 0)) {
      *(uint64_t *)(lVar1 + 0x198 + lVar7 * 4) = uVar4;
      lVar2 = *(long *)(lVar1 + 400 + lVar7 * 4);
      uVar5 = 0;
      arg3 = lVar2 - *(long *)(lVar1 + 0x1c0 + lVar7 * 4);
      if (arg3 != 0) {
        lVar6 = uVar4 - *(long *)(lVar1 + 0x1c8 + lVar7 * 4);
        if (lVar6 < 0) {
          return;
        }
        uVar5 = 100;
        if (lVar6 != 0) {
          uVar5 = (long)(arg3 * 100) / lVar6;
        }
      }
      if (99 < (uint)uVar5) {
        uVar5 = 100;
      }
      *(long *)(lVar1 + 0x1b8 + lVar7 * 4) = *(long *)(lVar1 + 0x1b8 + lVar7 * 4) + 1;
      uVar3 = (uint)uVar5;
      *(uint *)(lVar1 + 0x1d0 + lVar7 * 4) = uVar3;
      *(long *)(lVar1 + 0x1c0 + lVar7 * 4) = lVar2;
      *(uint64_t *)(lVar1 + 0x1c8 + lVar7 * 4) = uVar4;
      if (*(uint *)(lVar1 + 0x1d4 + lVar7 * 4) < uVar3) {
        *(uint *)(lVar1 + 0x1d4 + lVar7 * 4) = uVar3;
      }
      if (_graphicsTracePointEnable != 0) {
        dtHookTrace();
        if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
          _kernel_debug(debugid,uVar5 & 0xffffffff,*(uintptr_t *)(lVar1 + 0x1b8 + lVar7 * 4),arg3,
                        (ulong)param_2,0);
        }
      }
    }
    debugid = debugid + 4;
    lVar7 = lVar7 + 0x1c;
  } while (lVar7 != 0x8c);
  return;
}



// IGTelemetryUsage::MetaClass::~MetaClass()

void __thiscall IGTelemetryUsage::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGTelemetryUsage_cpp(void)

{
  lusage_entries = (uint)(*(int *)__got::_page_size * 10) / 0x38;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGTelemetryUsage::gMetaClass,"IGTelemetryUsage",
             (OSMetaClass *)__got::gMetaClass,0x98);
  IGTelemetryUsage::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGTelemetryUsage::gMetaClass);
  return;
}



// IGAccelBlockFence::MetaClass::MetaClass()

void __thiscall IGAccelBlockFence::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelBlockFence",(OSMetaClass *)__got::gMetaClass,0xf8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelBlockFence::MetaClass::~MetaClass()

void __thiscall IGAccelBlockFence::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelBlockFence::IGAccelBlockFence(OSMetaClass const*)

void __thiscall IGAccelBlockFence::IGAccelBlockFence(IGAccelBlockFence *this,OSMetaClass *param_1)

{
  IOAccelBlockFence::IOAccelBlockFence((IOAccelBlockFence *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelBlockFence;
  return;
}



// IGAccelBlockFence::IGAccelBlockFence(OSMetaClass const*)

void __thiscall IGAccelBlockFence::IGAccelBlockFence(IGAccelBlockFence *this,OSMetaClass *param_1)

{
  IOAccelBlockFence::IOAccelBlockFence((IOAccelBlockFence *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelBlockFence;
  return;
}



// IGAccelBlockFence::~IGAccelBlockFence()

void __thiscall IGAccelBlockFence::~IGAccelBlockFence(IGAccelBlockFence *this)

{
  IOAccelBlockFence::~IOAccelBlockFence((IOAccelBlockFence *)this);
  return;
}



// IGAccelBlockFence::~IGAccelBlockFence()

void __thiscall IGAccelBlockFence::~IGAccelBlockFence(IGAccelBlockFence *this)

{
  IOAccelBlockFence::~IOAccelBlockFence((IOAccelBlockFence *)this);
  return;
}



// IGAccelBlockFence::~IGAccelBlockFence()

void __thiscall IGAccelBlockFence::~IGAccelBlockFence(IGAccelBlockFence *this)

{
  IOAccelBlockFence::~IOAccelBlockFence((IOAccelBlockFence *)this);
  _OSObject_typed_operator_delete(&IGAccelBlockFence_ktv,this,0xf8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelBlockFence::operator delete(void*, unsigned long)

void __cdecl IGAccelBlockFence::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelBlockFence_ktv,param_1,param_2);
  return;
}



// IGAccelBlockFence::getMetaClass() const

undefined8 * IGAccelBlockFence::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelBlockFence::MetaClass::MetaClass()

void __thiscall IGAccelBlockFence::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelBlockFence",(OSMetaClass *)__got::gMetaClass,0xf8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelBlockFence::MetaClass::alloc() const

IOAccelBlockFence * IGAccelBlockFence::MetaClass::alloc(void)

{
  IOAccelBlockFence *this;
  
  this = (IOAccelBlockFence *)_OSObject_typed_operator_new(&IGAccelBlockFence_ktv,0xf8);
  IOAccelBlockFence::IOAccelBlockFence(this,(OSMetaClass *)&IGAccelBlockFence::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelBlockFence;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelBlockFence::operator new(unsigned long)

void * __thiscall IGAccelBlockFence::operator_new(IGAccelBlockFence *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelBlockFence_ktv,this);
  return pvVar1;
}



// IGAccelBlockFence::IGAccelBlockFence()

void __thiscall IGAccelBlockFence::IGAccelBlockFence(IGAccelBlockFence *this)

{
  IOAccelBlockFence::IOAccelBlockFence((IOAccelBlockFence *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelBlockFence;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelBlockFence::IGAccelBlockFence()

void __thiscall IGAccelBlockFence::IGAccelBlockFence(IGAccelBlockFence *this)

{
  IOAccelBlockFence::IOAccelBlockFence((IOAccelBlockFence *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelBlockFence;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelBlockFence::init(IOGraphicsAccelerator2*, IOAccelSubmitter2*, IOAccelBlockFencePort2*,
// unsigned long long, unsigned long long)

undefined4 __cdecl IGAccelBlockFence::init(long param_1)

{
  undefined4 uVar1;
  uint64_t uVar2;
  
  uVar1 = (**(code **)(__got::vtable + 0x138))();
  uVar2 = _mach_absolute_time();
  *(uint64_t *)(param_1 + 0xe0) = uVar2;
  *(uint64_t *)(param_1 + 0xe8) = uVar2;
  *(undefined4 *)(param_1 + 0xf0) = 0;
  *(undefined1 *)(param_1 + 0xf4) = 0;
  return uVar1;
}



// IGAccelBlockFence::getHostTime(unsigned long long*, unsigned long long*)

void __thiscall
IGAccelBlockFence::getHostTime(IGAccelBlockFence *this,undefined8 *param_1,undefined8 *param_2)

{
  IGBlockFenceManager::getTime
            (*(IGBlockFenceManager **)(&DAT_00001268 + *(long *)(this + 0x10)),(long)this);
  *param_1 = *(undefined8 *)(this + 0xe0);
  *param_2 = *(undefined8 *)(this + 0xe8);
  return;
}



// IGBlockFenceManager::getTime(IGAccelBlockFence*)

void __thiscall IGBlockFenceManager::getTime(IGBlockFenceManager *this,long param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  long lVar7;
  long lVar8;
  
  if (*(char *)(param_1 + 0xf4) != '\0') {
    lVar8 = *(long *)(this + 0x20);
    lVar7 = (ulong)*(uint *)(param_1 + 0xf0) * 0x1c;
    iVar1 = *(int *)(lVar8 + 0xc + lVar7);
    iVar2 = *(int *)(lVar8 + 4 + lVar7);
    iVar3 = *(int *)(lVar8 + 8 + lVar7);
    iVar5 = iVar1;
    if (iVar3 < 0) {
      iVar5 = iVar2;
    }
    if (iVar2 == iVar1) {
      iVar5 = iVar2;
    }
    iVar1 = *(int *)(lVar8 + 0x10 + lVar7);
    iVar2 = *(int *)(lVar8 + 0x18 + lVar7);
    iVar4 = *(int *)(lVar8 + 0x14 + lVar7);
    iVar6 = iVar2;
    if (iVar4 < 0) {
      iVar6 = iVar1;
    }
    if (iVar1 == iVar2) {
      iVar6 = iVar1;
    }
    lVar8 = *(long *)(this + 8);
    lVar7 = IGTimeConverter::RawGpuToCpuNsec
                      ((IGTimeConverter *)(lVar8 + 0xed0),CONCAT44(iVar5,iVar3));
    *(long *)(param_1 + 0xe0) = lVar7;
    lVar8 = IGTimeConverter::RawGpuToCpuNsec
                      ((IGTimeConverter *)(lVar8 + 0xed0),CONCAT44(iVar6,iVar4));
    *(long *)(param_1 + 0xe8) = lVar8;
    lVar8 = *(long *)(this + 0x20);
    lVar7 = (ulong)*(uint *)(param_1 + 0xf0) * 0x1c;
    *(undefined4 *)(lVar8 + 0xc + lVar7) = 0;
    *(undefined8 *)(lVar8 + 4 + lVar7) = 0;
    lVar8 = *(long *)(this + 0x20);
    lVar7 = (ulong)*(uint *)(param_1 + 0xf0) * 0x1c;
    *(undefined4 *)(lVar8 + 0x18 + lVar7) = 0;
    *(undefined8 *)(lVar8 + 0x10 + lVar7) = 0;
    *(undefined1 *)(*(long *)(this + 0x20) + (ulong)*(uint *)(param_1 + 0xf0) * 0x1c) = 0;
  }
  return;
}



// IGBlockFenceManager::initWithAccelerator(IntelAccelerator*)

undefined8 __thiscall
IGBlockFenceManager::initWithAccelerator(IGBlockFenceManager *this,long param_1)

{
  IGMappedBuffer *this_00;
  IGSharedMappedBuffer *this_01;
  long lVar1;
  undefined8 uVar2;
  
  *(long *)(this + 8) = param_1;
  *(undefined8 *)(this + 0x10) = 0x400000000249;
  *(undefined8 *)(this + 0x18) = 0;
  uVar2 = 0;
  this_01 = IGSharedMappedBuffer::withOptions(*(long *)(param_1 + 0x150),0x4000,1,0);
  *(IGSharedMappedBuffer **)(this + 0x18) = this_01;
  if (this_01 != (IGSharedMappedBuffer *)0x0) {
    lVar1 = IGSharedMappedBuffer::getVirtualAddress(this_01);
    *(long *)(this + 0x20) = lVar1;
    this_00 = *(IGMappedBuffer **)(this + 0x18);
    if (lVar1 == 0) {
      if (this_00 != (IGMappedBuffer *)0x0) {
        (**(code **)(*(long *)this_00 + 0x28))();
      }
      *(undefined8 *)(this + 0x18) = 0;
      uVar2 = 0;
    }
    else {
      uVar2 = IGMappedBuffer::getGPUVirtualAddress(this_00);
      *(undefined8 *)(this + 0x28) = uVar2;
      *(undefined4 *)(this + 0x30) = 0;
      ___bzero(*(undefined8 *)(this + 0x20),*(undefined4 *)(this + 0x14));
      uVar2 = 1;
    }
  }
  return uVar2;
}



// IGBlockFenceManager::getTimestamp(HiLoHi*)

undefined8 __thiscall IGBlockFenceManager::getTimestamp(IGBlockFenceManager *this,int *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = *param_1;
  iVar2 = param_1[2];
  if (param_1[1] < 0) {
    iVar2 = iVar1;
  }
  if (iVar1 == param_1[2]) {
    iVar2 = iVar1;
  }
  return CONCAT44(iVar2,param_1[1]);
}



// IGTimeConverter::RawGpuToCpuNsec(unsigned long long)

long __thiscall IGTimeConverter::RawGpuToCpuNsec(IGTimeConverter *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  uint uVar6;
  ulong uVar7;
  long lVar8;
  long lVar9;
  uint uVar10;
  long lVar11;
  
  lVar1 = *(long *)(this + 0x28);
  lVar5 = -1;
  if (lVar1 != 0) {
    lVar9 = *(long *)(this + 8);
    if (1000000000 < (ulong)(*(long *)(lVar1 + 0x110) - lVar9)) {
      do {
        uVar7 = (ulong)(*(int *)(lVar1 + 0x8c) - 1U & 0xf);
        lVar2 = *(long *)(lVar1 + 0x90 + uVar7 * 8);
        lVar3 = *(long *)(lVar1 + 0x110 + uVar7 * 8);
      } while (0xc < (uint)(*(int *)(lVar1 + 0x8c) - *(int *)(lVar1 + 0x8c)));
      lVar4 = *(long *)(this + 0x18);
      lVar11 = lVar3 - lVar4;
      if (lVar11 != 0) {
        lVar8 = lVar2 - *(long *)(this + 0x10);
        if (lVar8 != 0) {
          *(long *)this = *(long *)(this + 0x10);
          *(long *)(this + 8) = lVar4;
          *(long *)(this + 0x10) = lVar2;
          *(long *)(this + 0x18) = lVar3;
          *(double *)(this + 0x20) = (double)lVar11 / (double)lVar8;
          lVar9 = lVar4;
        }
      }
    }
    uVar10 = (uint)(param_1 >> 0x22);
    uVar6 = uVar10 & 3;
    uVar7 = (ulong)uVar6;
    if (*(long *)(lVar1 + 0x68 + uVar7 * 8) == 0) {
      if (uVar7 == 0) {
        *(long *)(lVar1 + 0x68) = *(long *)(lVar1 + 0x80) + 0x10;
      }
      else {
        *(undefined8 *)(lVar1 + 0x68 + uVar7 * 8) =
             *(undefined8 *)(lVar1 + 0x68 + (ulong)(uVar6 - 1) * 8);
      }
      *(undefined8 *)(lVar1 + 0x68 + (ulong)(uVar10 + 1 & 3) * 8) = 0;
      lVar9 = *(long *)(this + 8);
    }
    if ((lVar9 != 0) && (*(long *)this != 0)) {
      lVar5 = (lVar9 + ((*(long *)(lVar1 + 0x68 + uVar7 * 8) << 0x20 | param_1 & 0xfffffffff) *
                       10000) / _g_timestampFreqPerDenominator) - *(long *)this;
    }
  }
  return lVar5;
}



// IGBlockFenceManager::incrementTailWithFence(IGAccelBlockFence*)

void __thiscall IGBlockFenceManager::incrementTailWithFence(IGBlockFenceManager *this,long param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = *(uint *)(this + 0x30);
  *(uint *)(param_1 + 0xf0) = uVar1;
  *(undefined1 *)(*(long *)(this + 0x20) + (ulong)uVar1 * 0x1c) = 1;
  uVar2 = 0;
  if (uVar1 + 1 < *(uint *)(this + 0x10)) {
    uVar2 = uVar1 + 1;
  }
  *(uint *)(this + 0x30) = uVar2;
  return;
}



// IGBlockFenceManager::getTailStartTimeWriteAddress()

long __thiscall IGBlockFenceManager::getTailStartTimeWriteAddress(IGBlockFenceManager *this)

{
  return *(long *)(this + 0x28) + (ulong)*(uint *)(this + 0x30) * 0x1c + 4;
}



// IGBlockFenceManager::getTailEndTimeWriteAddress()

long __thiscall IGBlockFenceManager::getTailEndTimeWriteAddress(IGBlockFenceManager *this)

{
  return *(long *)(this + 0x28) + (ulong)*(uint *)(this + 0x30) * 0x1c + 0x10;
}



// IGBlockFenceManager::getBlockFenceEndTimeWriteAddress(IGAccelBlockFence*)

long __thiscall
IGBlockFenceManager::getBlockFenceEndTimeWriteAddress(IGBlockFenceManager *this,long param_1)

{
  return *(long *)(this + 0x28) + (ulong)*(uint *)(param_1 + 0xf0) * 0x1c + 0x10;
}



// IGAccelBlockFence::MetaClass::~MetaClass()

void __thiscall IGAccelBlockFence::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelBlockFence_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelBlockFence::gMetaClass,"IGAccelBlockFence",
             (OSMetaClass *)__got::gMetaClass,0xf8);
  IGAccelBlockFence::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelBlockFence::gMetaClass);
  return;
}



// IGHardwareRingBufferBlit::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferBlit::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferBlit",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferBlit::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferBlit::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRingBufferBlit::IGHardwareRingBufferBlit(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferBlit::IGHardwareRingBufferBlit
          (IGHardwareRingBufferBlit *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferBlit;
  return;
}



// IGHardwareRingBufferBlit::IGHardwareRingBufferBlit(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferBlit::IGHardwareRingBufferBlit
          (IGHardwareRingBufferBlit *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferBlit;
  return;
}



// IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit()

void __thiscall IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit(IGHardwareRingBufferBlit *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit()

void __thiscall IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit(IGHardwareRingBufferBlit *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit()

void __thiscall IGHardwareRingBufferBlit::~IGHardwareRingBufferBlit(IGHardwareRingBufferBlit *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  _OSObject_typed_operator_delete(&IGHardwareRingBufferBlit_ktv,this,0x8e0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBufferBlit::operator delete(void*, unsigned long)

void __cdecl IGHardwareRingBufferBlit::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRingBufferBlit_ktv,param_1,param_2);
  return;
}



// IGHardwareRingBufferBlit::getMetaClass() const

undefined1 * IGHardwareRingBufferBlit::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRingBufferBlit::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferBlit::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferBlit",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferBlit::MetaClass::alloc() const

IGHardwareRingBuffer * IGHardwareRingBufferBlit::MetaClass::alloc(void)

{
  IGHardwareRingBuffer *this;
  
  this = (IGHardwareRingBuffer *)_OSObject_typed_operator_new(&IGHardwareRingBufferBlit_ktv,0x8e0);
  IGHardwareRingBuffer::IGHardwareRingBuffer
            (this,(OSMetaClass *)&IGHardwareRingBufferBlit::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferBlit;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareRingBufferBlit::operator new(unsigned long)

void * __thiscall IGHardwareRingBufferBlit::operator_new(IGHardwareRingBufferBlit *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRingBufferBlit_ktv,this);
  return pvVar1;
}



// IGHardwareRingBufferBlit::IGHardwareRingBufferBlit()

void __thiscall IGHardwareRingBufferBlit::IGHardwareRingBufferBlit(IGHardwareRingBufferBlit *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferBlit;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferBlit::IGHardwareRingBufferBlit()

void __thiscall IGHardwareRingBufferBlit::IGHardwareRingBufferBlit(IGHardwareRingBufferBlit *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferBlit;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferBlit::init(IGHardwareContext*)

ulong __thiscall IGHardwareRingBufferBlit::init(IGHardwareRingBufferBlit *this,long param_1)

{
  int iVar1;
  int iVar2;
  ulong uVar3;
  undefined8 uVar4;
  
  uVar3 = IGHardwareRingBuffer::init((IGHardwareRingBuffer *)this,param_1);
  if ((char)uVar3 != '\0') {
    *(undefined8 *)(this + 0x58) = 0x222440002203c;
    *(undefined4 *)(this + 0x70) = 4;
    *(undefined8 **)(this + 0x78) = &_bcsResetRegisters;
    iVar1 = (**(code **)(*(long *)this + 0x128))(this);
    iVar2 = (**(code **)(*(long *)this + 0x148))(this);
    *(int *)(this + 0x3c) = iVar2 + iVar1 + 4;
    if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
      uVar4 = IGHardwareRingBuffer::getSerializeSubmissionSpace((IGHardwareRingBuffer *)this);
      *(int *)(this + 0x3c) = *(int *)(this + 0x3c) + (int)uVar4;
    }
  }
  return uVar3 & 0xffffffff;
}



// IGHardwareRingBufferBlit::waitForSemaphore(unsigned int, unsigned int)

void __thiscall
IGHardwareRingBufferBlit::waitForSemaphore
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint param_10,uint param_11,undefined8 param_12,char *param_13,char *param_14)

{
  long lVar1;
  bool bVar2;
  int iVar3;
  undefined7 extraout_var;
  undefined8 uVar4;
  long lVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar8;
  long local_60;
  ulong local_58;
  long local_50;
  undefined4 local_48;
  ulong local_44;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  bVar2 = IGHardwareRingBuffer::getGTTWriteMode(this);
  lVar1 = *(long *)((long)this + 0x28);
  uVar6 = (ulong)(*(int *)((long)this + 0x38) + 0x40) * 0x40 + lVar1;
  local_48 = (undefined4)((uVar6 & 0xfffffffffff8) >> 0x20);
  local_50 = ((ulong)bVar2 << 0x22) + ((uVar6 & 0xfffffff8) << 0x20) + 0x13004003;
  local_44 = CONCAT44(param_11,param_10) & 0xffffffffffff;
  bVar2 = IGHardwareRingBuffer::getGTTWriteMode(this);
  lVar5 = (ulong)((int)CONCAT71(extraout_var,bVar2) == 1) * 0x400000;
  local_60 = ((ulong)param_10 << 0x20) + lVar5 + 0xe009002;
  local_58 = (ulong)param_11 * 0x40 + lVar1 & 0xfffffffffffc;
  iVar3 = IGHardwareRingBuffer::getSemaphoreWaitPollSpace(this,param_11);
  uVar7 = iVar3 + 9;
  uVar4 = extraout_RDX;
  uVar8 = extraout_XMM0_Qa;
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    uVar4 = IGHardwareRingBuffer::getSerializeSubmissionSpace(this);
    uVar7 = uVar7 + (int)uVar4;
    uVar4 = extraout_RDX_00;
    uVar8 = extraout_XMM0_Qa_00;
  }
  IGHardwareRingBuffer::waitForSpace
            (uVar8,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this,uVar7,uVar4,lVar5
             ,param_13,param_14);
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    IGHardwareRingBuffer::serializeSubmission(this);
  }
  IGHardwareRingBuffer::insertSemaphoreWaitPoll(this,param_10,param_11);
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_50,5);
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_60,4);
  *(int *)((long)this + 0x4c) = *(int *)((long)this + 0x4c) + 1;
  (**(code **)(*(long *)this + 0x138))(this);
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBufferBlit::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferBlit::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareRingBufferBlit_cpp(void)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  _bcsResetRegisters = 0;
  DAT_001365c8 = 0;
  DAT_001365d0 = 0;
  lVar3 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                     0x120);
  lVar5 = DAT_001365d0;
  if (lVar3 != 0) {
    if (DAT_001365d0 != 0) {
      if (_bcsResetRegisters != 0) {
        lVar6 = 0;
        lVar4 = _bcsResetRegisters;
        do {
          *(undefined4 *)(lVar3 + 0x20 + lVar6) = *(undefined4 *)(lVar5 + 0x20 + lVar6);
          *(undefined8 *)(lVar3 + 0x18 + lVar6) = *(undefined8 *)(lVar5 + 0x18 + lVar6);
          *(undefined8 *)(lVar3 + 0x10 + lVar6) = *(undefined8 *)(lVar5 + 0x10 + lVar6);
          uVar1 = *(undefined8 *)(lVar5 + lVar6);
          *(undefined8 *)(lVar3 + 8 + lVar6) = *(undefined8 *)(lVar5 + 8 + lVar6);
          *(undefined8 *)(lVar3 + lVar6) = uVar1;
          lVar6 = lVar6 + 0x24;
          lVar4 = lVar4 + -1;
        } while (lVar4 != 0);
      }
      auVar2._8_8_ = 0;
      auVar2._0_8_ = DAT_001365c8;
      lVar4 = SUB168(ZEXT816(0x24) * auVar2,0);
      if (lVar4 < 0) {
        lVar4 = -0x8000000000000000;
      }
      lVar6 = -0x8000000000000000;
      if (SUB168(ZEXT816(0x24) * auVar2,8) == 0) {
        lVar6 = lVar4;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)
                          ::kalloc_type_view_29,lVar5,lVar6);
    }
    DAT_001365c8 = 8;
    lVar5 = 0;
    DAT_001365d0 = lVar3;
    do {
      *(undefined4 *)(lVar3 + 0x20 + lVar5) = *(undefined4 *)((long)&DAT_00113480 + lVar5);
      *(undefined8 *)(lVar3 + 0x18 + lVar5) = *(undefined8 *)((long)&DAT_00113478 + lVar5);
      *(undefined8 *)(lVar3 + 0x10 + lVar5) = *(undefined8 *)("BCS_BLT_MODE" + lVar5 + 6);
      uVar1 = *(undefined8 *)((long)&bcsRegisters + lVar5);
      *(undefined8 *)(lVar3 + 8 + lVar5) = *(undefined8 *)(&DAT_00113468 + lVar5);
      *(undefined8 *)(lVar3 + lVar5) = uVar1;
      lVar5 = lVar5 + 0x24;
    } while (lVar5 != 0x120);
    _bcsResetRegisters = 8;
  }
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRingBufferBlit::gMetaClass,"IGHardwareRingBufferBlit",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRingBufferBlit::gMetaClass);
  if (DAT_001365d0 != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = DAT_001365c8;
    lVar2 = SUB168(ZEXT816(0x24) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x24) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)::
                        kalloc_type_view_29,DAT_001365d0,lVar3);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IntelMTLRenderFunctions::execute(IntelMTLRender::eTokens, IGAccelCommandQueue&,
// IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IGHeapsAccess&, IOGraphicsAccelerator2&, IGHardwareContext&,
// IOAccelEvent&)

ulong __cdecl
IntelMTLRenderFunctions::execute
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,int param_9,
          IGAccelCommandQueue *param_10,long param_11,long param_12,long param_13,
          IGAccelCommandDescriptor *param_14,IGHeapsAccess *param_15,IntelAccelerator *param_16,
          undefined8 param_17,long param_18)

{
  IGAccelResource IVar1;
  ushort uVar2;
  undefined4 uVar3;
  IGAccelTask *pIVar4;
  int *piVar5;
  bool bVar6;
  char cVar7;
  byte bVar8;
  byte bVar9;
  int iVar10;
  undefined4 uVar11;
  undefined7 extraout_var;
  long *plVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  ulong uVar16;
  long lVar17;
  ulong uVar18;
  long *plVar19;
  int iVar20;
  ulong uVar21;
  ulong uVar22;
  uint uVar23;
  ushort *puVar24;
  IGAccelCommandDescriptor *pIVar25;
  undefined4 uVar26;
  ushort uVar27;
  IntelAccelerator *pIVar28;
  ulong uVar29;
  IGAccelResource *pIVar30;
  undefined4 uVar31;
  ulong *puVar32;
  long lVar33;
  long *plVar34;
  ulong *puVar35;
  bool bVar36;
  undefined8 uVar37;
  ulong *local_90;
  ulong local_78;
  long local_70;
  undefined4 local_64;
  long local_60;
  IntelAccelerator *local_58;
  ulong *local_50;
  IGAccelCommandDescriptor *local_48;
  IGAccelResource *local_40;
  long local_38;
  
  bVar8 = 0;
  uVar18 = 0;
  switch(param_9) {
  case 0x10000:
    if (0x1b < param_13 - param_12) {
      uVar18 = process_token_BindCommandBuffer((long *)param_10,param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10001:
    if (((*(int *)(param_10 + 0x620) == 0) && (param_10[0x839] == (IGAccelCommandQueue)0x0)) &&
       (((*(ushort *)(param_12 + 0x18) & 0x5ff) == 0 &&
        ((uint)*(ushort *)(param_12 + 0x22) + (uint)*(ushort *)(param_12 + 0x20) == 0)))) {
      uVar18 = process_token_CommandBufferEnd_SaveState
                         (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_10,param_11,param_12,(long)param_14,param_16,param_18);
      return uVar18;
    }
    local_60 = param_12;
    local_48 = param_14;
    local_38 = param_11;
    IGAccelCommandQueue::replayKernelCommand((long *)param_10);
    pIVar25 = local_48;
    if (param_13 - local_60 < 0x26) {
      return 10;
    }
    uVar27 = *(ushort *)(local_60 + 0x20);
    local_40 = (IGAccelResource *)(ulong)*(ushort *)(local_60 + 0x22);
    uVar2 = *(ushort *)(local_60 + 0x24);
    if ((((long)local_40 + (ulong)uVar27 + 1 >> 1) + (ulong)uVar2 * 6) * 4 + 0x28 <=
        (ulong)(param_13 - local_60)) {
      *(undefined8 *)(local_48 + 0x38) = *(undefined8 *)(param_10 + 0x608);
      local_50 = (ulong *)(local_60 + (ulong)uVar2 * 0x18 + 0x28);
      local_58 = param_16;
      barrierSubmission((long)param_10,(long)param_16,(long)local_48,param_18,uVar27,(long)local_50)
      ;
      uVar11 = 0;
      if (param_10[0x839] == (IGAccelCommandQueue)0x0) {
        uVar11 = *(undefined4 *)(local_60 + 0xc);
      }
      *(undefined4 *)(pIVar25 + 0x30) = uVar11;
      pIVar25[0x69] = (IGAccelCommandDescriptor)(*(int *)(local_60 + 0x10) != 0);
      pIVar25[0x6b] = (IGAccelCommandDescriptor)(*(byte *)(local_60 + 0x14) & 1);
      if ((_graphicsTracePointEnable != 0) || (*(long *)(*(long *)(local_58 + 0xf18) + 0x250) != 0))
      {
        IGAccelTraceStreamManager::gpuReadFullTimeTuple
                  ((IGAccelTraceStreamManager *)(local_58 + 0xe18),1000000000,1);
        pIVar25 = local_48;
      }
      plVar19 = *(long **)(*(long *)(pIVar25 + 0x50) + 0xb0);
      (**(code **)(*plVar19 + 0x148))(plVar19);
      (**(code **)(*plVar19 + 0x130))(plVar19,pIVar25);
      (**(code **)(*plVar19 + 0x140))(plVar19,param_18);
      uVar37 = (**(code **)(*plVar19 + 0x140))
                         (plVar19,*(long *)(*(long *)(pIVar25 + 0x58) + 0x40) + 0x38);
      if (-1 < *(int *)(param_10 + 0x820)) {
        lVar33 = -1;
        do {
          uVar37 = IGAccelSegmentResourceList::removeFromChannel
                             (*(long *)(param_10 + lVar33 * 8 + 0x7a8));
          *(undefined8 *)(param_10 + lVar33 * 8 + 0x7a8) = 0;
          lVar33 = lVar33 + 1;
        } while (lVar33 < *(int *)(param_10 + 0x820));
      }
      *(undefined4 *)(param_10 + 0x820) = 0xffffffff;
      pIVar25 = local_48;
      lVar33 = local_38;
      lVar17 = local_60;
      if (local_40 != (IGAccelResource *)0x0) {
        lVar13 = (long)local_50 + (ulong)uVar27 * 2;
        uVar18 = 0;
        pIVar30 = local_40;
        do {
          uVar27 = *(ushort *)(lVar13 + uVar18 * 2);
          if (uVar27 != 0) {
            lVar14 = *(long *)(param_10 + 0x5b8);
            if (((uint)uVar27 < *(uint *)(lVar14 + 0x70)) && (*(long *)(lVar14 + 0x68) != 0)) {
              uVar37 = (**(code **)(*plVar19 + 0x140))
                                 (plVar19,*(long *)(lVar14 + 0x68) +
                                          (ulong)((uint)uVar27 *
                                                 *(int *)(*(long *)(lVar14 + 0x78) + 0xcf4)) * 0x40)
              ;
              pIVar25 = local_48;
              lVar33 = local_38;
              lVar17 = local_60;
              pIVar30 = local_40;
            }
          }
          uVar18 = uVar18 + 1;
        } while (pIVar30 != (IGAccelResource *)uVar18);
      }
      if (param_10[0x824] == (IGAccelCommandQueue)0x0) {
        uVar18 = process_StoreActions
                           (uVar37,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar33,
                            lVar17,(long)pIVar25,local_58,param_18);
        return uVar18;
      }
      return 0;
    }
    return 10;
  case 0x10002:
    if (0x13 < param_13 - param_12) {
      IGAccelCommandQueue::processParallelCommandBuffer
                (param_10,*(undefined4 *)(param_12 + 0xc),*(undefined4 *)(param_12 + 0x10));
      return 0;
    }
    break;
  case 0x10003:
    if (0x1f < param_13 - param_12) {
      cVar7 = process_token_IndirectStateBaseAddress<>(param_11,param_12,(long)param_14,param_15);
      return CONCAT71(extraout_var,cVar7);
    }
    break;
  case 0x10004:
    if (0x13 < param_13 - param_12) {
      uVar18 = (ulong)*(uint *)(param_12 + 0x10);
      if (((uVar18 * 0x18 + 0x18 <= (ulong)(param_13 - param_12)) &&
          (lVar33 = *(long *)(param_15 + 0x60), lVar33 != 0)) && (*(uint *)(param_12 + 0x10) < 9)) {
        if (uVar18 == 0) {
          return 0;
        }
        local_78 = 0;
        local_58 = param_16;
        local_48 = param_14;
        local_38 = param_11;
        do {
          pIVar28 = local_58;
          local_50 = (ulong *)(local_78 * 3);
          uVar23 = *(uint *)(param_12 + 0x20 + local_78 * 0x18);
          if (*(uint *)(param_11 + 0xc) <= uVar23) {
            return 9;
          }
          pIVar30 = *(IGAccelResource **)(*(long *)(param_11 + 0x10) + (ulong)uVar23 * 8);
          if (pIVar30 == (IGAccelResource *)0x0) {
            return 9;
          }
          plVar19 = (long *)(param_12 + local_78 * 0x18 + 0x18);
          lVar17 = *plVar19;
          local_40 = pIVar30;
          if (lVar17 == 0) {
            lVar17 = IOAccelResource2::getStorageResource();
            plVar34 = (long *)(lVar17 + 0x180);
          }
          else {
            plVar34 = *(long **)(pIVar30 + 0x240);
            while( true ) {
              if (plVar34 == (long *)0x0) goto switchD_0004e237_caseD_10015;
              if (*plVar34 == lVar17) break;
              plVar34 = (long *)plVar34[0x15];
            }
          }
          local_70 = 0;
          local_64 = 0;
          IGAccelResource::get_tex_data(pIVar30,&local_70,&local_64);
          uVar21 = (ulong)*(uint *)(param_12 + 0x24 + (long)local_50 * 8);
          if (*(long *)(param_15 + 0x68) + -0x40 < (long)uVar21) {
            return 8;
          }
          puVar35 = (ulong *)(uVar21 + lVar33);
          if (puVar35 == (ulong *)0x0) {
            return 8;
          }
          puVar35[4] = puVar35[4] + local_70;
          if ((int)plVar34[8] != 0) {
            bVar8 = *(byte *)((long)plVar34 + 0xa1);
            if ((bVar8 & 8) == 0) {
              bVar36 = true;
              if ((*(ushort *)(param_12 + 0x2a + (long)local_50 * 8) < 2) &&
                 (*(byte *)(param_12 + 0x2e + (long)local_50 * 8) < 2)) {
                bVar36 = (*(byte *)(param_12 + 0x2f + (long)local_50 * 8) & 2) == 0;
              }
            }
            else {
              bVar36 = false;
            }
            uVar23 = (uint)*puVar35 >> 0x12 & 0x3ff;
            lVar17 = param_12 + (long)local_50 * 8;
            puVar24 = (ushort *)(lVar17 + 0x28);
            bVar9 = *(byte *)(lVar17 + 0x2f);
            if ((bVar9 & 1) == 0) {
              if ((bVar9 & 8) == 0) {
                bVar8 = IGAccelResource::isDisplayableIOSurface();
                if ((bVar8 == 0) ||
                   ((local_58[0x1474] != (IntelAccelerator)0x0 &&
                    (local_58[0xf25] == (IntelAccelerator)0x0)))) {
                  bVar6 = true;
                  if ((*(char *)(param_12 + 0x2d + (long)local_50 * 8) != '\0') || (*puVar24 != 0))
                  goto LAB_0004e6b8;
                  if (((char)plVar34[0x14] == '\x01') || (*(uint *)((long)plVar34 + 0x4c) == uVar23)
                     ) {
                    *(undefined1 *)(plVar34 + 0x14) = 3;
                    *(byte *)((long)plVar34 + 0xa1) = *(byte *)((long)plVar34 + 0xa1) | 8;
                    *(uint *)((long)plVar34 + 0x4c) = uVar23;
                  }
                }
                else {
                  *(undefined1 *)(plVar34 + 0x14) = 1;
                  *(byte *)((long)plVar34 + 0xa1) = *(byte *)((long)plVar34 + 0xa1) & 0xfb;
                }
                bVar6 = false;
              }
              else {
                *(undefined1 *)(plVar34 + 0x14) = 1;
                *(byte *)((long)plVar34 + 0xa1) = bVar8 & 0xfb;
                bVar6 = false;
              }
            }
            else {
              *(undefined1 *)(plVar34 + 0x14) = 2;
              *(byte *)((long)plVar34 + 0xa1) = bVar8 | 0xc;
              *(uint *)((long)plVar34 + 0x4c) = uVar23;
              lVar17 = *(long *)(local_48 + 0x58);
              if (lVar17 == 0) {
                return 8;
              }
              uVar21 = *(long *)(lVar17 + 200 + (ulong)(*(long *)(lVar17 + 0x88) == 0) * 8) -
                       (ulong)*(uint *)(local_48 + 0x6c);
              if (uVar21 < 0x58) {
                return 8;
              }
              uVar29 = (ulong)*(uint *)(param_12 + 8);
              if (uVar21 - 0x58 >> 2 < uVar29) {
                return 8;
              }
              lVar17 = *(long *)(local_48 + 0x20);
              if (lVar17 == 0) {
                return 8;
              }
              uVar16 = puVar35[4];
              uVar23 = *(uint *)(plVar34 + 10);
              uVar21 = uVar16 + uVar23;
              *(uint *)(lVar17 + 8 + uVar29 * 4) =
                   (uint)(uVar21 >> 0x20) & 0xffff | *(uint *)(lVar17 + 8 + uVar29 * 4) & 0xffff0000
              ;
              *(ulong *)(lVar17 + uVar29 * 4) =
                   *(ulong *)(lVar17 + uVar29 * 4) & 0x3ffffffff | (uVar21 >> 2) << 0x22;
              uVar21 = uVar16 + uVar23 + 8;
              *(uint *)(lVar17 + 0x34 + uVar29 * 4) =
                   (uint)(uVar21 >> 0x20) & 0xffff |
                   *(uint *)(lVar17 + 0x34 + uVar29 * 4) & 0xffff0000;
              *(ulong *)(lVar17 + 0x2c + uVar29 * 4) =
                   *(ulong *)(lVar17 + 0x2c + uVar29 * 4) & 0x3ffffffff | (uVar21 >> 2) << 0x22;
              bVar6 = false;
            }
LAB_0004e6b8:
            if (1 < *(byte *)(plVar34 + 0x14)) {
              if (bVar36) {
                bVar8 = *(byte *)(param_12 + 0x2e + (long)local_50 * 8);
                uVar27 = *(ushort *)(param_12 + 0x2a + (long)local_50 * 8);
                if (uVar27 != 0) {
                  lVar17 = param_12 + (long)local_50 * 8;
                  pIVar4 = *(IGAccelTask **)(local_48 + 8);
                  uVar23 = 0;
                  do {
                    if (((*(char *)(lVar17 + 0x2e) != '\x01') ||
                        ((*(byte *)(lVar17 + 0x2f) & 1) == 0)) || (uVar23 != *puVar24)) {
                      IGAccelResource::submitCCSResolve
                                (local_40,(long)plVar34,local_58,pIVar4,0,2,uVar23,
                                 ~(ushort)(-1 << (bVar8 & 0x1f)),(IGAccelResource *)0x0);
                      uVar27 = *(ushort *)(lVar17 + 0x2a);
                    }
                    uVar23 = uVar23 + 1;
                  } while (uVar23 < uVar27);
                }
              }
              uVar27 = *puVar24;
              bVar8 = *(byte *)(param_12 + 0x2d + (long)local_50 * 8);
              puVar24 = (ushort *)(plVar34[0xb] + (ulong)uVar27 * 2);
              *puVar24 = *puVar24 | (ushort)(1 << (bVar8 & 0x1f));
              bVar8 = bVar8 & 0x1f;
              puVar24 = (ushort *)(plVar34[0xc] + (ulong)uVar27 * 2);
              *puVar24 = *puVar24 & ((ushort)(-2 << bVar8) | (ushort)(0xfffffffe >> 0x20 - bVar8));
            }
            if (bVar6) {
              *(byte *)(puVar35 + 3) = (byte)puVar35[3] & 0xf8;
              puVar35[5] = puVar35[5] & 0xfff;
              pIVar28 = local_58;
            }
            else {
              IGAccelResource::fillSurfaceStateAuxInfo(local_40,(long)plVar34,(long)puVar35,1);
              pIVar28 = local_58;
            }
          }
          lVar17 = *(long *)(pIVar28 + 0x1290);
          bVar8 = IGAccelResource::isDisplayableIOSurface();
          param_11 = local_38;
          if (bVar8 == 0) {
            if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(*puVar35 >> 0x38) & 0x7e)) &
                0x30) != 0) {
              lVar13 = IOAccelResource2::getStorageResource();
              uVar21 = *(ulong *)(lVar13 + 200 + (ulong)(*(long *)(lVar13 + 0x88) == 0) * 8);
              if (*(ulong *)(lVar17 + 0x108) * 2 < uVar21) {
                uVar29 = puVar35[1];
                uVar16 = *puVar35 & 0x81ffffffffffffff;
                uVar21 = 0x3200000000000000;
              }
              else {
                uVar16 = *puVar35 & 0x81ffffffffffffff;
                uVar29 = puVar35[1];
                if (*(ulong *)(lVar17 + 0x108) >> 1 < uVar21) {
                  uVar21 = 0x3000000000000000;
                }
                else {
                  uVar21 = 0x2400000000000000;
                }
              }
              uVar16 = uVar16 | uVar21;
              goto LAB_0004e90d;
            }
          }
          else {
            uVar16 = *puVar35 & 0x81ffffffffffffff;
            uVar29 = puVar35[1];
LAB_0004e90d:
            *puVar35 = uVar16;
            puVar35[1] = uVar29;
          }
          if (*plVar19 == 0) {
            IVar1 = *(IGAccelResource *)(param_12 + 0x2c + (long)local_50 * 8);
            if ((byte)local_40[0xac] <= (byte)IVar1) break;
            (**(code **)(*(long *)local_40 + 0x168))
                      (local_40,IVar1,*(undefined1 *)(param_12 + 0x2d + (long)local_50 * 8));
          }
          local_78 = local_78 + 1;
          if (local_78 == uVar18) {
            return 0;
          }
        } while( true );
      }
    }
    break;
  case 0x10005:
    if (param_13 - param_12 < 0x10) {
      return 10;
    }
    uVar18 = (ulong)*(uint *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < uVar18 * 0xc + 0x10) {
      return 10;
    }
    if (0x21 < *(uint *)(param_12 + 0xc)) {
      return 10;
    }
    uVar21 = (ulong)*(uint *)(param_12 + 8) + 1;
    uVar29 = (long)(uVar21 * 0x80000000) >> 0x1f;
    if (uVar29 != uVar21) {
      return 8;
    }
    if ((long)uVar29 < 0) {
      return 8;
    }
    lVar33 = *(long *)(param_14 + 0x58);
    if (lVar33 == 0) {
      return 8;
    }
    uVar21 = *(long *)(lVar33 + 200 + (ulong)(*(long *)(lVar33 + 0x88) == 0) * 8) -
             (ulong)*(uint *)(param_14 + 0x6c);
    if (uVar21 < uVar18 * 0x10) {
      return 8;
    }
    if (uVar21 + uVar18 * -0x10 >> 2 < (uVar29 & 0x1ffffffff)) {
      return 8;
    }
    if (*(long *)(param_14 + 0x20) == 0) {
      return 8;
    }
    if (uVar18 == 0) {
      return 0;
    }
    local_48 = (IGAccelCommandDescriptor *)(uVar18 * 0xc);
    lVar33 = 0;
    piVar5 = (int *)(*(long *)(param_14 + 0x20) + (ulong)*(uint *)(param_12 + 8) * 4);
    local_60 = param_12;
    local_38 = param_11;
    do {
      uVar23 = *(uint *)(local_60 + 0x10 + lVar33);
      if (*(uint *)(local_38 + 0xc) <= uVar23) {
        return 9;
      }
      lVar17 = *(long *)(*(long *)(local_38 + 0x10) + (ulong)uVar23 * 8);
      if (lVar17 == 0) {
        return 9;
      }
      uVar23 = *(uint *)(local_60 + 0x14 + lVar33);
      iVar10 = *(int *)(local_60 + 0x18 + lVar33);
      lVar13 = (**(code **)(**(long **)(lVar17 + 0x40) + 0x130))();
      cVar7 = *(char *)(lVar17 + 0x14);
      if (cVar7 == '\0') {
LAB_0004eaee:
        uVar18 = *(ulong *)(lVar17 + 0xf8);
      }
      else if (cVar7 == -0x7e) {
        uVar18 = (ulong)*(uint *)(lVar17 + 0xfc);
      }
      else {
        if (cVar7 == -0x80) goto LAB_0004eaee;
        uVar18 = 0;
      }
      *(ulong *)(piVar5 + 2) = lVar13 + (ulong)uVar23 + uVar18;
      piVar5[4] = iVar10 - uVar23;
      lVar33 = lVar33 + 0xc;
      piVar5 = piVar5 + 4;
      if (local_48 == (IGAccelCommandDescriptor *)lVar33) {
        return 0;
      }
    } while( true );
  case 0x10006:
    if (0x27 < param_13 - param_12) {
      uVar18 = process_token_BindDepthBuffer(param_11,param_12,(long)param_14,param_16);
      return uVar18;
    }
    break;
  case 0x10007:
    if (0x17 < param_13 - param_12) {
      uVar18 = process_token_BindIndexBuffer<>(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10008:
    if (0x23 < param_13 - param_12) {
      uVar18 = process_token_BindIndirectBuffer<>(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10009:
    if (param_13 - param_12 < 0x14) {
      return 10;
    }
    local_48 = (IGAccelCommandDescriptor *)(ulong)*(uint *)(param_12 + 0x10);
    if ((ulong)(param_13 - param_12) < (long)local_48 * 0x18 + 0x18U) {
      return 10;
    }
    lVar33 = ((ulong)(*(int *)(param_12 + 0x14) != 0) * 2 + 1) * 0x10;
    local_58 = *(IntelAccelerator **)(param_15 + lVar33 + 0x50);
    if (local_58 == (IntelAccelerator *)0x0) {
      return 10;
    }
    if (local_48 == (IGAccelCommandDescriptor *)0x0) {
      return 0;
    }
    local_40 = (IGAccelResource *)(param_15 + lVar33 + 0x58);
    uVar18 = 0;
    local_60 = param_12;
    do {
      uVar23 = *(uint *)(param_12 + 0x20 + uVar18 * 0x18);
      if (*(uint *)(param_11 + 0xc) <= uVar23) {
        return 9;
      }
      pIVar30 = *(IGAccelResource **)(*(long *)(param_11 + 0x10) + (ulong)uVar23 * 8);
      if (pIVar30 == (IGAccelResource *)0x0) {
        return 9;
      }
      uVar21 = (ulong)*(uint *)(param_12 + 0x24 + uVar18 * 0x18);
      if (*(long *)local_40 + -0x40 < (long)uVar21) {
        return 8;
      }
      lVar33 = uVar21 + (long)local_58;
      if (lVar33 == 0) {
        return 8;
      }
      if ((*(byte *)(param_12 + 0x2c + uVar18 * 0x18) & 1) == 0) {
        local_70 = 0;
        local_64 = 0;
        IGAccelResource::get_tex_data(pIVar30,&local_70,&local_64);
        *(ulong *)(lVar33 + 0x20) = (ulong)*(uint *)(local_60 + 0x28 + uVar18 * 0x18) + local_70;
        param_12 = local_60;
      }
      lVar17 = *(long *)(param_12 + uVar18 * 0x18 + 0x18);
      if (lVar17 == 0) {
        lVar17 = IOAccelResource2::getStorageResource();
        plVar19 = (long *)(lVar17 + 0x180);
LAB_0004ed12:
        IGAccelResource::fillSurfaceStateAuxInfo(pIVar30,(long)plVar19,lVar33,0);
      }
      else {
        for (plVar19 = *(long **)(pIVar30 + 0x240); plVar19 != (long *)0x0;
            plVar19 = (long *)plVar19[0x15]) {
          if (*plVar19 == lVar17) goto LAB_0004ed12;
        }
        *(byte *)(lVar33 + 0x18) = *(byte *)(lVar33 + 0x18) & 0xf8;
      }
      uVar18 = uVar18 + 1;
      if ((IGAccelCommandDescriptor *)uVar18 == local_48) {
        return 0;
      }
    } while( true );
  case 0x1000a:
    if (0x1f < param_13 - param_12) {
      uVar18 = process_token_BindStencilBuffer(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x1000b:
    if (0x17 < param_13 - param_12) {
      uVar18 = process_token_BindHiZBuffer(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x1000c:
    if (param_13 - param_12 < 0x14) {
      return 10;
    }
    uVar23 = *(uint *)(param_12 + 0x10);
    if ((ulong)(param_13 - param_12) < (ulong)uVar23 * 0xc + 0x14) {
      return 10;
    }
    local_48 = *(IGAccelCommandDescriptor **)(param_15 + 0x60);
    if (local_48 == (IGAccelCommandDescriptor *)0x0) {
      return 10;
    }
    if (0x21 < uVar23) {
      return 10;
    }
    if (uVar23 == 0) {
      return 0;
    }
    local_50 = (ulong *)((ulong)uVar23 * 0xc);
    lVar33 = 0;
    local_58 = param_16;
    local_38 = param_11;
    do {
      uVar23 = *(uint *)(param_12 + 0x14 + lVar33);
      if (*(uint *)(local_38 + 0xc) <= uVar23) {
        return 9;
      }
      pIVar30 = *(IGAccelResource **)(*(long *)(local_38 + 0x10) + (ulong)uVar23 * 8);
      if (pIVar30 == (IGAccelResource *)0x0) {
        return 9;
      }
      local_70 = 0;
      local_64 = 0;
      IGAccelResource::get_tex_data(pIVar30,&local_70,&local_64);
      uVar18 = (ulong)*(uint *)(param_12 + 0x18 + lVar33);
      if (*(long *)(param_15 + 0x68) + -0x40 < (long)uVar18) {
        return 8;
      }
      puVar35 = (ulong *)(uVar18 + (long)local_48);
      if (puVar35 == (ulong *)0x0) {
        return 8;
      }
      puVar35[4] = (ulong)*(uint *)(param_12 + 0x1c + lVar33) + local_70;
      local_40 = *(IGAccelResource **)(local_58 + 0x1290);
      bVar8 = IGAccelResource::isDisplayableIOSurface();
      if (bVar8 == 0) {
        if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(*puVar35 >> 0x38) & 0x7e)) & 0x30)
            != 0) {
          lVar17 = IOAccelResource2::getStorageResource();
          uVar18 = *(ulong *)(lVar17 + 200 + (ulong)(*(long *)(lVar17 + 0x88) == 0) * 8);
          if (*(ulong *)((long)local_40 + 0x108) * 2 < uVar18) {
            uVar21 = puVar35[1];
            uVar29 = *puVar35 & 0x81ffffffffffffff;
            uVar18 = 0x3200000000000000;
          }
          else {
            uVar29 = *puVar35 & 0x81ffffffffffffff;
            uVar21 = puVar35[1];
            if (*(ulong *)((long)local_40 + 0x108) >> 1 < uVar18) {
              uVar18 = 0x3000000000000000;
            }
            else {
              uVar18 = 0x2400000000000000;
            }
          }
          uVar29 = uVar29 | uVar18;
          goto LAB_0004ef69;
        }
      }
      else {
        uVar29 = *puVar35 & 0x81ffffffffffffff;
        uVar21 = puVar35[1];
LAB_0004ef69:
        *puVar35 = uVar29;
        puVar35[1] = uVar21;
      }
      lVar33 = lVar33 + 0xc;
      if (local_50 == (ulong *)lVar33) {
        return 0;
      }
    } while( true );
  case 0x1000d:
    if (param_13 - param_12 < 0x14) {
      return 10;
    }
    uVar23 = *(uint *)(param_12 + 0x10);
    if ((ulong)(param_13 - param_12) < (ulong)uVar23 * 0xc + 0x14) {
      return 10;
    }
    local_48 = *(IGAccelCommandDescriptor **)(param_15 + 0x60);
    if (local_48 == (IGAccelCommandDescriptor *)0x0) {
      return 10;
    }
    if (0x20 < uVar23) {
      return 10;
    }
    if (uVar23 == 0) {
      return 0;
    }
    local_50 = (ulong *)((ulong)uVar23 * 0xc);
    lVar33 = 0;
    local_58 = param_16;
    local_38 = param_11;
    do {
      uVar23 = *(uint *)(param_12 + 0x14 + lVar33);
      if (*(uint *)(local_38 + 0xc) <= uVar23) {
        return 9;
      }
      pIVar30 = *(IGAccelResource **)(*(long *)(local_38 + 0x10) + (ulong)uVar23 * 8);
      if (pIVar30 == (IGAccelResource *)0x0) {
        return 9;
      }
      local_70 = 0;
      local_64 = 0;
      IGAccelResource::get_tex_data(pIVar30,&local_70,&local_64);
      uVar18 = (ulong)*(uint *)(param_12 + 0x18 + lVar33);
      if ((*(long *)(param_15 + 0x68) + -0x40 < (long)uVar18) ||
         (puVar35 = (ulong *)(uVar18 + (long)local_48), puVar35 == (ulong *)0x0)) {
        return 8;
      }
      puVar35[4] = (ulong)*(uint *)(param_12 + 0x1c + lVar33) + local_70;
      local_40 = *(IGAccelResource **)(local_58 + 0x1290);
      bVar8 = IGAccelResource::isDisplayableIOSurface();
      if (bVar8 == 0) {
        if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(*puVar35 >> 0x38) & 0x7e)) & 0x30)
            != 0) {
          lVar17 = IOAccelResource2::getStorageResource();
          uVar18 = *(ulong *)(lVar17 + 200 + (ulong)(*(long *)(lVar17 + 0x88) == 0) * 8);
          if (*(ulong *)((long)local_40 + 0x108) * 2 < uVar18) {
            uVar21 = puVar35[1];
            uVar29 = *puVar35 & 0x81ffffffffffffff;
            uVar18 = 0x3200000000000000;
          }
          else {
            uVar29 = *puVar35 & 0x81ffffffffffffff;
            uVar21 = puVar35[1];
            if (*(ulong *)((long)local_40 + 0x108) >> 1 < uVar18) {
              uVar18 = 0x3000000000000000;
            }
            else {
              uVar18 = 0x2400000000000000;
            }
          }
          uVar29 = uVar29 | uVar18;
          goto LAB_0004f164;
        }
      }
      else {
        uVar29 = *puVar35 & 0x81ffffffffffffff;
        uVar21 = puVar35[1];
LAB_0004f164:
        *puVar35 = uVar29;
        puVar35[1] = uVar21;
      }
      lVar33 = lVar33 + 0xc;
      if (local_50 == (ulong *)lVar33) {
        return 0;
      }
    } while( true );
  case 0x1000e:
    if (0x13 < param_13 - param_12) {
      uVar18 = process_token_VisibilityQueryBegin(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x1000f:
    if (0x13 < param_13 - param_12) {
      uVar18 = process_token_VisibilityQueryEnd(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10010:
    *(undefined8 *)(param_14 + 0x50) = param_17;
    if (0x13 < param_13 - param_12) {
      lVar33 = (ulong)*(uint *)(param_12 + 0x10) * 0x10;
      if (lVar33 + 0x18U <= (ulong)(param_13 - param_12)) {
        if (*(uint *)(param_11 + 0xc) <= *(uint *)(param_12 + 0xc)) {
          return 9;
        }
        local_38 = *(long *)(*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0xc) * 8);
        if (local_38 == 0) {
          return 9;
        }
        if (*(uint *)(param_12 + 0x10) == 0) {
          return 0;
        }
        local_58 = *(IntelAccelerator **)
                    (*(long *)(param_14 + 0x58) + 200 +
                    (ulong)(*(long *)(*(long *)(param_14 + 0x58) + 0x88) == 0) * 8);
        local_50 = *(ulong **)(local_38 + 200 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8);
        lVar17 = 0;
        local_60 = param_12;
        local_48 = param_14;
        while (uVar18 = (ulong)*(uint *)(param_12 + 0x18 + lVar17), uVar18 + 0x10 < local_58) {
          lVar13 = *(long *)(param_14 + 0x58);
          if (lVar13 == 0) {
            return 8;
          }
          uVar21 = *(long *)(lVar13 + 200 + (ulong)(*(long *)(lVar13 + 0x88) == 0) * 8) -
                   (ulong)*(uint *)(param_14 + 0x6c);
          if (uVar21 < 0x10) {
            return 8;
          }
          if (uVar21 - 0x10 >> 2 < uVar18) {
            return 8;
          }
          lVar13 = *(long *)(param_14 + 0x20);
          if (lVar13 == 0) {
            return 8;
          }
          uVar37 = *(undefined8 *)(lVar13 + uVar18 * 4);
          uVar23 = (uint)uVar37;
          if ((uVar23 & 0xe0000000) == 0x60000000) {
            if (uVar21 < 0x18) {
              return 8;
            }
            if (uVar21 - 0x18 >> 2 < uVar18) {
              return 8;
            }
            if ((((uVar23 & 0x1fff0000) != 0x1a000000) ||
                ((~(uint)((ulong)uVar37 >> 0x2e) & 1) != 0)) ||
               (local_40 = *(IGAccelResource **)(param_12 + 0x20 + lVar17),
               local_50 <= (long)local_40 + 4U)) break;
            iVar10 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
            cVar7 = *(char *)(local_38 + 0x14);
            if (cVar7 == '\0') {
LAB_0004f3a2:
              iVar20 = (int)*(undefined8 *)(local_38 + 0xf8);
            }
            else if (cVar7 == -0x7e) {
              iVar20 = *(int *)(local_38 + 0xfc);
            }
            else {
              if (cVar7 == -0x80) goto LAB_0004f3a2;
              iVar20 = 0;
            }
            *(uint *)(lVar13 + 8 + uVar18 * 4) =
                 *(uint *)(lVar13 + 8 + uVar18 * 4) & 3 |
                 iVar20 + iVar10 + (int)local_40 & 0xfffffffcU;
            lVar14 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
            cVar7 = *(char *)(local_38 + 0x14);
            if (cVar7 == '\0') {
LAB_0004f4cf:
              uVar21 = *(ulong *)(local_38 + 0xf8);
            }
            else if (cVar7 == -0x7e) {
              uVar21 = (ulong)*(uint *)(local_38 + 0xfc);
            }
            else {
              if (cVar7 == -0x80) goto LAB_0004f4cf;
              uVar21 = 0;
            }
            *(int *)(lVar13 + 0xc + uVar18 * 4) = (int)(lVar14 + (long)local_40 + uVar21 >> 0x20);
            param_14 = local_48;
          }
          else {
            uVar23 = uVar23 >> 0x17 & 0x3f;
            if (uVar23 == 0x28) {
              local_40 = *(IGAccelResource **)(param_12 + 0x20 + lVar17);
              if (local_50 <= (long)local_40 + 4U) break;
              lVar14 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
              cVar7 = *(char *)(local_38 + 0x14);
              if (cVar7 == '\0') {
LAB_0004f472:
                uVar21 = *(ulong *)(local_38 + 0xf8);
              }
              else if (cVar7 == -0x7e) {
                uVar21 = (ulong)*(uint *)(local_38 + 0xfc);
              }
              else {
                if (cVar7 == -0x80) goto LAB_0004f472;
                uVar21 = 0;
              }
              lVar14 = lVar14 + (long)local_40 + uVar21;
              *(short *)(lVar13 + 8 + uVar18 * 4) = (short)((ulong)lVar14 >> 0x20);
              *(ulong *)(lVar13 + uVar18 * 4) =
                   *(ulong *)(lVar13 + uVar18 * 4) & 0x3fffffffff |
                   (ulong)((uint)lVar14 & 0xffffffc0) << 0x20;
              param_12 = local_60;
            }
            else {
              if ((uVar23 != 0x24) ||
                 (local_40 = *(IGAccelResource **)(param_12 + 0x20 + lVar17),
                 local_50 <= (long)local_40 + 4U)) break;
              lVar14 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
              cVar7 = *(char *)(local_38 + 0x14);
              if (cVar7 == '\0') {
LAB_0004f414:
                uVar21 = *(ulong *)(local_38 + 0xf8);
              }
              else if (cVar7 == -0x7e) {
                uVar21 = (ulong)*(uint *)(local_38 + 0xfc);
              }
              else {
                if (cVar7 == -0x80) goto LAB_0004f414;
                uVar21 = 0;
              }
              *(ulong *)(lVar13 + 8 + uVar18 * 4) =
                   *(ulong *)(lVar13 + 8 + uVar18 * 4) & 0xffff000000000003 |
                   lVar14 + (long)local_40 + uVar21 & 0xfffffffffffc;
              param_12 = local_60;
            }
          }
          lVar17 = lVar17 + 0x10;
          if (lVar33 == lVar17) {
            return 0;
          }
        }
      }
    }
    break;
  case 0x10011:
    if (0x13 < param_13 - param_12) {
      uVar18 = process_token_GatherPoolAlloc(param_11,param_12,(long)param_14,(long)param_15);
      return uVar18;
    }
    break;
  case 0x10012:
    if (0x13 < param_13 - param_12) {
      uVar18 = process_token_BindingTablePoolAlloc(param_11,param_12,(long)param_14,(long)param_15);
      return uVar18;
    }
    break;
  case 0x10013:
    if (0x27 < param_13 - param_12) {
      uVar18 = process_token_BindIndirectBufferTess(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10014:
    if (param_13 - param_12 < 0x10) {
      return 10;
    }
    uVar18 = (ulong)*(uint *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < uVar18 * 8 + 0x14) {
      return 10;
    }
    if (*(uint *)(param_12 + 0x10) < *(uint *)(param_12 + 0xc)) {
      return 10;
    }
    if (uVar18 != 0) {
      uVar21 = 0;
      while( true ) {
        uVar23 = *(uint *)(param_12 + 0x14 + uVar21 * 8);
        if (*(uint *)(param_11 + 0xc) <= uVar23) {
          return 9;
        }
        if (*(long *)(*(long *)(param_11 + 0x10) + (ulong)uVar23 * 8) == 0) break;
        uVar21 = uVar21 + 1;
        if (uVar18 == uVar21) {
          return 0;
        }
      }
      return 9;
    }
    return 0;
  case 0x10015:
  case 0x10016:
  case 0x10019:
  case 0x1001a:
  case 0x1001b:
  case 0x1001c:
    break;
  case 0x10017:
    if (0xf < param_13 - param_12) {
      uVar18 = process_token_SkipDrawIfDepthResourceCleared<>(param_11,param_12,(long)param_14);
      return uVar18;
    }
    break;
  case 0x10018:
    if (0x13 < param_13 - param_12) {
      if (*(uint *)(param_11 + 0xc) <= *(uint *)(param_12 + 0xc)) {
        return 9;
      }
      lVar33 = *(long *)(*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0xc) * 8);
      if (lVar33 != 0) {
        *(bool *)(lVar33 + 0x26c) = *(int *)(param_12 + 0x10) != 0;
        return 0;
      }
      return 9;
    }
    break;
  case 0x1001d:
    if (param_13 - param_12 < 0x10) {
      return 10;
    }
    pIVar25 = (IGAccelCommandDescriptor *)(ulong)*(uint *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < (long)pIVar25 * 0x70 + 0x10U) {
      return 10;
    }
    if (pIVar25 == (IGAccelCommandDescriptor *)0x0) {
      return 0;
    }
    uVar18 = 0;
    local_60 = param_12;
    local_48 = pIVar25;
    local_38 = param_11;
    do {
      lVar33 = uVar18 * 0x70;
      uVar23 = *(uint *)(param_12 + 0x18 + lVar33);
      if (*(uint *)(param_11 + 0xc) <= uVar23) {
        return 9;
      }
      lVar17 = *(long *)(*(long *)(param_11 + 0x10) + (ulong)uVar23 * 8);
      if (lVar17 == 0) {
        return 9;
      }
      lVar13 = *(long *)(param_12 + lVar33 + 0x10);
      if (lVar13 == 0) {
        return 9;
      }
      for (plVar19 = *(long **)(lVar17 + 0x240); plVar19 != (long *)0x0;
          plVar19 = (long *)plVar19[0x15]) {
        if (*plVar19 == lVar13) goto LAB_0004f88e;
      }
      plVar12 = (long *)_IOMallocTypeImpl(IGAccelResource::ResourceInfoEntry::operator_new);
      *plVar12 = lVar13;
      *(undefined2 *)(plVar12 + 0x10) = 0;
      plVar12[0x15] = *(long *)(lVar17 + 0x240);
      *(long **)(lVar17 + 0x240) = plVar12;
      plVar19 = (long *)(local_60 + 0x30 + lVar33);
      uVar11 = *(undefined4 *)((long)plVar19 + -0x14);
      uVar26 = (undefined4)plVar19[-2];
      iVar10 = *(int *)((long)plVar19 + -0xc);
      uVar3 = *(undefined4 *)((long)plVar19 + -4);
      uVar31 = (undefined4)plVar19[-1];
      uVar23 = iVar10 + (uint)(iVar10 == 0);
      uVar21 = (ulong)uVar23;
      plVar34 = plVar12 + 1;
      for (lVar33 = 10; lVar33 != 0; lVar33 = lVar33 + -1) {
        *plVar34 = *plVar19;
        plVar19 = plVar19 + (ulong)bVar8 * -2 + 1;
        plVar34 = plVar34 + (ulong)bVar8 * -2 + 1;
      }
      *(short *)(plVar12 + 0x10) = (short)uVar23;
      if ((uVar23 & 0xffff) < 7) {
        plVar19 = plVar12 + 0xd;
      }
      else {
        local_58 = (IntelAccelerator *)CONCAT44(local_58._4_4_,uVar26);
        local_40 = (IGAccelResource *)CONCAT44(local_40._4_4_,uVar31);
        plVar19 = (long *)_IOMallocZeroData((uVar23 & 0xffff) << 2);
        uVar21 = (ulong)*(ushort *)(plVar12 + 0x10);
        uVar26 = local_58._0_4_;
        uVar31 = (int)local_40;
      }
      plVar12[0xb] = (long)plVar19;
      plVar12[0xc] = (long)plVar19 + (uVar21 & 0xffff) * 2;
      if (((char)plVar12[0x14] == '\0') && ((int)plVar12[8] != 0)) {
        *(undefined1 *)(plVar12 + 0x14) = 1;
      }
      *(undefined4 *)((long)plVar12 + 0x8c) = uVar11;
      *(undefined4 *)(plVar12 + 0x12) = uVar26;
      *(int *)((long)plVar12 + 0x94) = iVar10;
      *(undefined4 *)(plVar12 + 0x13) = uVar3;
      *(undefined4 *)(plVar12 + 0x11) = uVar31;
      pIVar25 = local_48;
      param_11 = local_38;
      param_12 = local_60;
LAB_0004f88e:
      uVar18 = uVar18 + 1;
      if ((IGAccelCommandDescriptor *)uVar18 == pIVar25) {
        return 0;
      }
    } while( true );
  case 0x1001e:
    if (param_13 - param_12 < 0x10) {
      return 10;
    }
    uVar18 = (ulong)*(uint *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < uVar18 * 0x18 + 0x18) {
      return 10;
    }
    lVar33 = *(long *)(param_14 + 0x58);
    if (lVar33 == 0) {
      return 8;
    }
    uVar21 = *(long *)(lVar33 + 200 + (ulong)(*(long *)(lVar33 + 0x88) == 0) * 8) -
             (ulong)*(uint *)(param_14 + 0x6c);
    if (uVar21 < 0xc) {
      return 8;
    }
    if (uVar21 - 0xc >> 2 < (ulong)*(uint *)(param_12 + 8)) {
      return 8;
    }
    if (*(long *)(param_14 + 0x20) == 0) {
      return 8;
    }
    lVar33 = *(long *)(param_15 + 0x60);
    if (lVar33 == 0) {
      return 10;
    }
    local_90 = (ulong *)(*(long *)(param_14 + 0x20) + (ulong)*(uint *)(param_12 + 8) * 4);
    if (uVar18 != 0) {
      lVar17 = (ulong)*(uint *)(param_12 + 0x10) + (long)local_90;
      bVar36 = true;
      local_40 = (IGAccelResource *)0x0;
      local_58 = param_16;
      local_60 = param_12;
      local_38 = param_11;
      do {
        lVar13 = *(long *)(local_60 + 0x18 + (long)local_40 * 0x18);
        uVar23 = *(uint *)(local_60 + 0x20 + (long)local_40 * 0x18);
        local_50 = (ulong *)(ulong)*(uint *)(local_60 + 0x24 + (long)local_40 * 0x18);
        uVar21 = (ulong)*(ushort *)(local_60 + 0x28 + (long)local_40 * 0x18);
        bVar8 = *(byte *)(local_60 + 0x2a + (long)local_40 * 0x18);
        bVar9 = *(byte *)(local_60 + 0x2b + (long)local_40 * 0x18);
        puVar35 = (ulong *)IGAccelCommandDescriptor::checkVirtualOffset(param_14,lVar17,0xc);
        if (puVar35 == (ulong *)0x0) {
          return 8;
        }
        lVar17 = *(long *)(param_14 + 0x58);
        if (lVar17 == 0) {
          return 8;
        }
        uVar29 = *(long *)(lVar17 + 200 + (ulong)(*(long *)(lVar17 + 0x88) == 0) * 8) -
                 (ulong)*(uint *)(param_14 + 0x6c);
        if (uVar29 < 0xc) {
          return 8;
        }
        uVar16 = ((ulong)(uint)puVar35[1] & 3) << 0x1e | *puVar35 >> 0x22;
        if (uVar29 - 0xc >> 2 < uVar16) {
          return 8;
        }
        lVar17 = *(long *)(param_14 + 0x20);
        if (lVar17 == 0) {
          return 8;
        }
        if (*(uint *)(local_38 + 0xc) <= uVar23) {
          return 9;
        }
        pIVar30 = *(IGAccelResource **)(*(long *)(local_38 + 0x10) + (ulong)uVar23 * 8);
        if (pIVar30 == (IGAccelResource *)0x0) {
          return 9;
        }
        if (lVar13 == 0) {
          lVar13 = IOAccelResource2::getStorageResource();
          plVar19 = (long *)(lVar13 + 0x180);
        }
        else {
          plVar19 = *(long **)(pIVar30 + 0x240);
          if (plVar19 == (long *)0x0) {
            plVar19 = (long *)0x0;
          }
          else {
            do {
              if (*plVar19 == lVar13) goto LAB_0004fab9;
              plVar19 = (long *)plVar19[0x15];
            } while (plVar19 != (long *)0x0);
            plVar19 = (long *)0x0;
          }
        }
LAB_0004fab9:
        pIVar28 = local_58;
        if ((*(long *)(param_15 + 0x68) + -0x40 < (long)local_50) ||
           (puVar32 = (ulong *)((long)local_50 + lVar33), puVar32 == (ulong *)0x0)) {
          if (bVar36) {
            return 8;
          }
          break;
        }
        if ((((plVar19 == (long *)0x0) || (*(byte *)(plVar19 + 0x14) < 2)) ||
            ((*(ushort *)(plVar19[0xb] + uVar21 * 2) >> (bVar8 & 0x1f) & 1) == 0)) ||
           (((bVar9 & 2) != 0 &&
            ((*(uint *)((long)plVar19 + 0x4c) == ((uint)*puVar32 >> 0x12 & 0x3ff) ||
             (*(byte *)(plVar19 + 0x14) == 2)))))) {
          uVar21 = ((ulong)(uint)puVar35[1] << 0x1e | *puVar35 >> 0x22) +
                   (*(ulong *)(param_14 + 0x60) >> 2);
          *puVar35 = *puVar35 & 0x3ffffffff | uVar21 << 0x22;
          *(int *)(puVar35 + 1) = (int)(uVar21 >> 0x1e);
        }
        else {
          if (local_90 != (ulong *)0x0) {
            *(undefined4 *)(local_90 + 1) = 0;
            *local_90 = 0;
          }
          *(undefined4 *)(puVar35 + 1) = 0;
          *puVar35 = 0;
          local_48 = param_14;
          if ((bVar9 & 1) == 0) {
            local_70 = 0;
            local_64 = 0;
            IGAccelResource::get_tex_data(pIVar30,&local_70,&local_64);
            puVar32[4] = puVar32[4] + local_70;
          }
          IGAccelResource::fillSurfaceStateAuxInfo(pIVar30,(long)plVar19,(long)puVar32,0);
          lVar13 = *(long *)(pIVar28 + 0x1290);
          bVar9 = IGAccelResource::isDisplayableIOSurface();
          uVar29 = *puVar32;
          uVar22 = puVar32[1];
          local_50 = puVar32;
          if (bVar9 == 0) {
            if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(uVar29 >> 0x38) & 0x7e)) &
                0x30) != 0) {
              lVar14 = IOAccelResource2::getStorageResource();
              uVar15 = *(ulong *)(lVar14 + 200 + (ulong)(*(long *)(lVar14 + 0x88) == 0) * 8);
              if (*(ulong *)(lVar13 + 0x108) * 2 < uVar15) {
                uVar22 = local_50[1];
                uVar29 = *local_50 & 0x81ffffffffffffff;
                uVar15 = 0x3200000000000000;
              }
              else {
                uVar29 = *local_50 & 0x81ffffffffffffff;
                uVar22 = local_50[1];
                if (*(ulong *)(lVar13 + 0x108) >> 1 < uVar15) {
                  uVar15 = 0x3000000000000000;
                }
                else {
                  uVar15 = 0x2400000000000000;
                }
              }
              uVar29 = uVar29 | uVar15;
              goto LAB_0004fd11;
            }
          }
          else {
            uVar29 = uVar29 & 0x81ffffffffffffff;
LAB_0004fd11:
            *local_50 = uVar29;
            local_50[1] = uVar22;
          }
          uVar23 = *(uint *)((long)plVar19 + 0x4c);
          local_50[1] = uVar22;
          *local_50 = uVar29 & 0xfffffffff803ffff | (ulong)((uVar23 & 0x1ff) << 0x12);
          *(undefined1 *)(plVar19 + 0x14) = 1;
          *(byte *)((long)plVar19 + 0xa1) = *(byte *)((long)plVar19 + 0xa1) & 0xfb;
          uVar27 = ~(ushort)(1 << (bVar8 & 0x1f));
          puVar24 = (ushort *)(plVar19[0xb] + uVar21 * 2);
          *puVar24 = *puVar24 & uVar27;
          puVar24 = (ushort *)(plVar19[0xc] + uVar21 * 2);
          *puVar24 = *puVar24 & uVar27;
          local_90 = (ulong *)0x0;
          param_14 = local_48;
        }
        lVar17 = lVar17 + uVar16 * 4;
        local_40 = (IGAccelResource *)((long)local_40 + 1);
        bVar36 = local_40 < uVar18;
      } while (local_40 != (IGAccelResource *)uVar18);
    }
    if (local_90 == (ulong *)0x0) {
      return 0;
    }
    uVar21 = *(ulong *)(param_14 + 0x60);
    uVar18 = *local_90;
    local_40 = (IGAccelResource *)local_90;
    goto LAB_00050375;
  case 0x1001f:
    if (param_13 - param_12 < 0xe) {
      return 10;
    }
    uVar18 = (ulong)*(ushort *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < uVar18 * 0x10 + 0x20) {
      return 10;
    }
    lVar33 = *(long *)(param_14 + 0x58);
    if (lVar33 == 0) {
      return 8;
    }
    uVar21 = *(long *)(lVar33 + 200 + (ulong)(*(long *)(lVar33 + 0x88) == 0) * 8) -
             (ulong)*(uint *)(param_14 + 0x6c);
    if (uVar21 < 0xc) {
      return 8;
    }
    uVar29 = (ulong)*(uint *)(param_12 + 8);
    if (uVar21 - 0xc >> 2 < uVar29) {
      return 8;
    }
    lVar33 = *(long *)(param_14 + 0x20);
    if (lVar33 == 0) {
      return 8;
    }
    local_40 = (IGAccelResource *)(lVar33 + uVar29 * 4);
    puVar35 = (ulong *)(lVar33 + uVar29 * 4 + 0xc);
    if (uVar18 != 0) {
      uVar21 = 0;
      local_60 = param_12;
      local_48 = param_14;
      local_38 = param_11;
      do {
        uVar29 = uVar21 + 1;
        uVar16 = 0x38;
        if (uVar18 <= uVar29) {
          uVar16 = (ulong)(*(short *)(param_12 + 0xe) != 0) << 6;
        }
        lVar33 = *(long *)(param_14 + 0x58);
        if (lVar33 == 0) {
          return 8;
        }
        uVar22 = *(long *)(lVar33 + 200 + (ulong)(*(long *)(lVar33 + 0x88) == 0) * 8) -
                 (ulong)*(uint *)(param_14 + 0x6c);
        if (uVar22 < uVar16) {
          return 8;
        }
        uVar15 = (ulong)((int)puVar35[1] << 0x1e | (uint)(*puVar35 >> 0x22));
        if (uVar22 - uVar16 >> 2 < uVar15) {
          return 8;
        }
        local_58 = *(IntelAccelerator **)(param_14 + 0x20);
        if (local_58 == (IntelAccelerator *)0x0) {
          return 8;
        }
        lVar33 = uVar21 * 0x10;
        uVar23 = *(uint *)(param_12 + 0x28 + lVar33);
        if (*(uint *)(param_11 + 0xc) <= uVar23) {
          return 9;
        }
        lVar17 = *(long *)(*(long *)(param_11 + 0x10) + (ulong)uVar23 * 8);
        if (lVar17 == 0) {
          return 9;
        }
        lVar13 = *(long *)(param_12 + lVar33 + 0x20);
        if (lVar13 == 0) {
          lVar17 = IOAccelResource2::getStorageResource();
          plVar19 = (long *)(lVar17 + 0x180);
          param_14 = local_48;
          param_11 = local_38;
          param_12 = local_60;
LAB_0004ff11:
          if (((*(byte *)((long)plVar19 + 0xa1) & 1) == 0) ||
             ((*(ushort *)(plVar19[0xb] + (ulong)*(ushort *)(param_12 + 0x2c + lVar33) * 2) >>
               (*(byte *)(param_12 + 0x2e + lVar33) & 0x1f) & 1) == 0)) goto LAB_0004ffc1;
          if (local_40 != (IGAccelResource *)0x0) {
            *(undefined4 *)((long)local_40 + 8) = 0;
            *(ulong *)local_40 = 0;
          }
          *(undefined4 *)(puVar35 + 1) = 0;
          *puVar35 = 0;
          if ((*(byte *)(param_12 + 0x2f + lVar33) & 2) != 0) {
            *(undefined4 *)(puVar35 + 6) = *(undefined4 *)((long)plVar19 + 0x9c);
            *(uint *)((long)puVar35 + 0x34) =
                 *(uint *)((long)puVar35 + 0x34) & 0xfffffffe |
                 (uint)((~*(byte *)((long)plVar19 + 0xa1) & 3) == 0);
          }
          uVar21 = (ulong)*(ushort *)(param_12 + lVar33 + 0x2c);
          bVar8 = *(byte *)(param_12 + lVar33 + 0x2e) & 0x1f;
          uVar27 = (ushort)(-2 << bVar8) | (ushort)(0xfffffffe >> 0x20 - bVar8);
          puVar24 = (ushort *)(plVar19[0xb] + uVar21 * 2);
          *puVar24 = *puVar24 & uVar27;
          puVar24 = (ushort *)(plVar19[0xc] + uVar21 * 2);
          *puVar24 = *puVar24 & uVar27;
          local_40 = (IGAccelResource *)0x0;
        }
        else {
          for (plVar19 = *(long **)(lVar17 + 0x240); plVar19 != (long *)0x0;
              plVar19 = (long *)plVar19[0x15]) {
            if (*plVar19 == lVar13) goto LAB_0004ff11;
          }
LAB_0004ffc1:
          uVar21 = ((ulong)(uint)puVar35[1] << 0x1e | *puVar35 >> 0x22) +
                   (*(ulong *)(param_14 + 0x60) >> 2);
          *puVar35 = *puVar35 & 0x3ffffffff | uVar21 << 0x22;
          *(int *)(puVar35 + 1) = (int)(uVar21 >> 0x1e);
        }
        puVar35 = (ulong *)((long)local_58 + uVar15 * 4);
        uVar21 = uVar29;
      } while (uVar29 != uVar18);
    }
    if (local_40 == (IGAccelResource *)0x0) {
      if (*(short *)(param_12 + 0xe) == 0) {
        return 0;
      }
      if (*(uint *)(param_12 + 0x18) < *(uint *)(param_11 + 0xc)) {
        pIVar30 = *(IGAccelResource **)
                   (*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0x18) * 8);
        if (pIVar30 != (IGAccelResource *)0x0) {
          plVar19 = IGAccelResource::getResourceInfoEntry(pIVar30,*(long *)(param_12 + 0x10));
          lVar33 = IOAccelResource2::getGPUVirtualAddressForUserProcess((IOAccelResource2 *)pIVar30)
          ;
          puVar35[1] = puVar35[1] & 0xffff000000000000 | lVar33 + puVar35[1] & 0xffffffffffff;
          *(long *)((long)puVar35 + 0x34) = *(long *)((long)puVar35 + 0x34) + lVar33;
          *(undefined4 *)((long)puVar35 + 0x24) = *(undefined4 *)((long)plVar19 + 0x9c);
          *(uint *)(puVar35 + 5) =
               (uint)puVar35[5] & 0xfffffffe | (uint)((~*(byte *)((long)plVar19 + 0xa1) & 3) == 0);
          return 0;
        }
        return 9;
      }
      return 9;
    }
    uVar21 = *(ulong *)(param_14 + 0x60);
    uVar18 = *(ulong *)local_40;
LAB_00050375:
    uVar21 = ((ulong)(uint)*(ulong *)((long)local_40 + 8) << 0x1e | uVar18 >> 0x22) + (uVar21 >> 2);
    *(ulong *)local_40 = uVar18 & 0x3ffffffff | uVar21 << 0x22;
    *(int *)((long)local_40 + 8) = (int)(uVar21 >> 0x1e);
    return 0;
  case 0x10020:
    if (0x2f < param_13 - param_12) {
      uVar18 = process_token_ConditionalResolveHiZMulti
                         ((long *)param_10,param_16,param_11,param_12,param_14,param_18);
      return uVar18;
    }
    break;
  case 0x10021:
    goto switchD_0004e237_caseD_10021;
  default:
    if (param_9 == 0x21) {
      return 0;
    }
  }
switchD_0004e237_caseD_10015:
  uVar18 = 10;
switchD_0004e237_caseD_10021:
  return uVar18;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindCommandBuffer(IGAccelCommandQueue&, IGAccelSegmentResourceList&,
// IOAccelKernelCommand const&, IGAccelCommandDescriptor&, IGHeapsAccess&, IOGraphicsAccelerator2&)

long __cdecl process_token_BindCommandBuffer(long *param_1,long param_2,long param_3,long param_4)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  
  if ((((int)param_1[0xc4] != 0) || (param_1[0xee] == 0)) || (*(short *)(param_1[0xee] + 2) != 1)) {
    IGAccelCommandQueue::replayKernelCommand(param_1);
  }
  lVar3 = 9;
  if ((*(uint *)(param_3 + 0xc) < *(uint *)(param_2 + 0xc)) &&
     (lVar4 = *(long *)(*(long *)(param_2 + 0x10) + (ulong)*(uint *)(param_3 + 0xc) * 8), lVar4 != 0
     )) {
    uVar1 = *(uint *)(param_3 + 0x10);
    uVar7 = (ulong)uVar1;
    uVar6 = *(ulong *)(lVar4 + 200 + (ulong)(*(long *)(lVar4 + 0x88) == 0) * 8);
    lVar3 = 10;
    if ((uVar7 < uVar6) && (uVar5 = (ulong)*(uint *)(param_3 + 8), uVar5 < uVar6 >> 2)) {
      lVar3 = (**(code **)(**(long **)(lVar4 + 0x40) + 0x128))();
      lVar3 = lVar3 + uVar7;
      *(long *)(param_4 + 0x60) = lVar3;
      if ((*(byte *)(param_3 + 0x18) & 1) == 0) {
        *(long *)(param_4 + 0x18) = lVar3;
        param_1[0xf3] = lVar4;
      }
      else {
        lVar2 = *(long *)(param_4 + 0x58);
        if (lVar2 == 0) {
          return 8;
        }
        uVar6 = *(long *)(lVar2 + 200 + (ulong)(*(long *)(lVar2 + 0x88) == 0) * 8) -
                (ulong)*(uint *)(param_4 + 0x6c);
        if (uVar6 < 0xc) {
          return 8;
        }
        if (uVar6 - 0xc >> 2 < uVar5) {
          return 8;
        }
        lVar2 = *(long *)(param_4 + 0x20);
        if (lVar2 == 0) {
          return 8;
        }
        *(int *)(lVar2 + 8 + uVar5 * 4) = (int)((ulong)lVar3 >> 0x20);
        *(ulong *)(lVar2 + uVar5 * 4) =
             *(ulong *)(lVar2 + uVar5 * 4) & 0x3ffffffff | (ulong)((uint)lVar3 & 0xfffffffc) << 0x20
        ;
      }
      if (*(long *)(param_4 + 0x20) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0x20) = 0;
      }
      *(long *)(param_4 + 0x58) = lVar4;
      *(uint *)(param_4 + 0x6c) = uVar1;
      lVar4 = IOAccelResource2::getKernelData();
      lVar3 = lVar4 + uVar7;
      if (lVar4 == 0) {
        lVar3 = 0;
      }
      *(long *)(param_4 + 0x20) = lVar3;
      lVar3 = (ulong)(lVar3 == 0) << 3;
    }
  }
  return lVar3;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandQueue::replayKernelCommand(bool)

void __cdecl IGAccelCommandQueue::replayKernelCommand(long *param_1)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  bool bVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  long lVar10;
  uint uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  
  lVar13 = param_1[0xee];
  if (lVar13 == 0) {
    return;
  }
  uVar1 = *(uint *)(lVar13 + 4);
  lVar14 = param_1[0xd6];
  uVar3 = *(undefined8 *)(lVar14 + 0x18);
  uVar4 = *(undefined8 *)(lVar14 + 0x50);
  uVar5 = *(undefined8 *)(lVar14 + 0x58);
  uVar2 = *(uint *)(param_1 + 0x104);
  if ((int)uVar2 < 0) {
    uVar11 = *(uint *)(lVar14 + 0x6c);
  }
  else {
    lVar10 = param_1[(ulong)uVar2 + 0xf4];
    uVar11 = *(uint *)(lVar14 + 0x6c);
    if (lVar10 != 0) {
      *(uint *)(param_1 + 0x104) = uVar2 - 1;
      bVar6 = false;
      goto LAB_00050656;
    }
  }
  bVar6 = true;
  lVar10 = 0;
LAB_00050656:
  lVar9 = param_1[0xed];
  lVar7 = param_1[0xc4];
  if (*(long *)(lVar14 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar14 + 0x20) = 0;
    lVar14 = param_1[0xd6];
  }
  *(long *)(lVar14 + 0x50) = param_1[0xef];
  *(long *)(lVar14 + 0x18) = param_1[0xf1];
  *(long *)(lVar14 + 0x58) = param_1[0xf0];
  uVar2 = *(uint *)(param_1 + 0xf2);
  *(uint *)(lVar14 + 0x6c) = uVar2;
  lVar8 = IOAccelResource2::getKernelData();
  lVar12 = (ulong)uVar2 + lVar8;
  if (lVar8 == 0) {
    lVar12 = 0;
  }
  *(long *)(lVar14 + 0x20) = lVar12;
  param_1[0xed] = 0;
  param_1[0xee] = 0;
  param_1[0xef] = 0;
  param_1[0xf0] = 0;
  param_1[0xf1] = 0;
  *(undefined4 *)(param_1 + 0xf2) = 0;
  param_1[0xf3] = 0;
  *(undefined4 *)(param_1 + 0xc4) = 1;
  *(undefined1 *)((long)param_1 + 0x824) = 1;
  (**(code **)(*param_1 + 0xa08))(param_1,lVar9,lVar13,(ulong)uVar1 + lVar13);
  *(undefined1 *)((long)param_1 + 0x824) = 0;
  lVar13 = param_1[0xd6];
  if (*(long *)(lVar13 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar13 + 0x20) = 0;
    lVar13 = param_1[0xd6];
  }
  *(uint *)(param_1 + 0xc4) = (uint)((int)lVar7 != 0);
  *(undefined8 *)(lVar13 + 0x50) = uVar4;
  *(undefined8 *)(lVar13 + 0x18) = uVar3;
  *(undefined8 *)(lVar13 + 0x58) = uVar5;
  *(uint *)(lVar13 + 0x6c) = uVar11;
  lVar9 = IOAccelResource2::getKernelData();
  lVar14 = (ulong)uVar11 + lVar9;
  if (lVar9 == 0) {
    lVar14 = 0;
  }
  *(long *)(lVar13 + 0x20) = lVar14;
  if (!bVar6) {
    lVar13 = param_1[0x104];
    *(int *)(param_1 + 0x104) = (int)lVar13 + 1;
    param_1[(long)(int)lVar13 + 0xf5] = lVar10;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// process_token_CommandBufferEnd_SaveState(IGAccelCommandQueue&, IGAccelSegmentResourceList&,
// IOAccelKernelCommand const&, IGAccelCommandDescriptor&, IOGraphicsAccelerator2&, IOAccelEvent&)

undefined8 __cdecl
process_token_CommandBufferEnd_SaveState
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6_00,undefined8 param_7,undefined8 param_8,
          long param_9,long param_10,long param_11,long param_12,IntelAccelerator *param_13,
          long param_14)

{
  uint uVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  undefined4 uVar6;
  uint uVar7;
  undefined8 *puVar8;
  ulong *puVar9;
  
  lVar4 = *(long *)(param_9 + 0x770);
  if (lVar4 != 0) {
    lVar3 = IOAccelResource2::getKernelData();
    puVar9 = (ulong *)(lVar3 + *(long *)(*(long *)(param_9 + 0x780) + 200 +
                                        (ulong)(*(long *)(*(long *)(param_9 + 0x780) + 0x88) == 0) *
                                        8));
    uVar7 = *(uint *)(param_9 + 0x790);
    uVar1 = *(uint *)(lVar4 + 8);
    lVar3 = IOAccelResource2::getKernelData();
    puVar8 = (undefined8 *)((ulong)uVar7 + (ulong)uVar1 * 4 + lVar3);
    if (lVar3 == 0) {
      puVar8 = (undefined8 *)0x0;
    }
    if (puVar8 == (undefined8 *)0x0) {
      return 8;
    }
    if ((*(byte *)(lVar4 + 0x19) & 8) != 0) {
      lVar4 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(param_12 + 8));
      if (puVar9 < puVar8 + 6) {
        return 10;
      }
      uVar5 = lVar4 + 0x10;
      *puVar8 = 0x1052217a000004;
      uVar7 = (uint)uVar5 & 0xfffffffc;
      *(uint *)(puVar8 + 1) = uVar7;
      uVar6 = (undefined4)(uVar5 >> 0x20);
      *(undefined4 *)((long)puVar8 + 0xc) = uVar6;
      puVar8[2] = 0;
      puVar8[3] = 0x1044987a000004;
      *(uint *)(puVar8 + 4) = uVar7;
      *(undefined4 *)((long)puVar8 + 0x24) = uVar6;
      puVar8[5] = 0;
      if ((*(uint *)(param_13 + 0xf52) >> 0x15 & 1) != 0) {
        if (puVar9 < puVar8 + 0x1a) {
          return 10;
        }
        uVar6 = (undefined4)((uVar5 & 0xfffffffffffc) >> 0x20);
        uVar5 = (uVar5 & 0xfffffffc) << 0x20 | 0x10000003;
        *(undefined4 *)(puVar8 + 7) = uVar6;
        puVar8[6] = uVar5;
        *(undefined8 *)((long)puVar8 + 0x3c) = 0;
        *(undefined4 *)((long)puVar8 + 0x4c) = uVar6;
        *(ulong *)((long)puVar8 + 0x44) = uVar5;
        puVar8[10] = 0;
        *(undefined4 *)(puVar8 + 0xc) = uVar6;
        puVar8[0xb] = uVar5;
        *(undefined8 *)((long)puVar8 + 100) = 0;
        *(undefined4 *)((long)puVar8 + 0x74) = uVar6;
        *(ulong *)((long)puVar8 + 0x6c) = uVar5;
        puVar8[0xf] = 0;
        *(undefined4 *)(puVar8 + 0x11) = uVar6;
        puVar8[0x10] = uVar5;
        *(undefined8 *)((long)puVar8 + 0x8c) = 0;
        *(undefined4 *)((long)puVar8 + 0x9c) = uVar6;
        *(ulong *)((long)puVar8 + 0x94) = uVar5;
        puVar8[0x14] = 0;
        *(undefined4 *)(puVar8 + 0x16) = uVar6;
        puVar8[0x15] = uVar5;
        *(undefined8 *)((long)puVar8 + 0xb4) = 0;
        *(undefined4 *)((long)puVar8 + 0xc4) = uVar6;
        *(ulong *)((long)puVar8 + 0xbc) = uVar5;
        puVar8[0x19] = 0;
      }
    }
    if (*(long *)(param_9 + 0x798) == *(long *)(param_9 + 0x780)) {
      if (puVar9 < puVar8 + 0x1c) {
        return 10;
      }
      *(undefined4 *)((long)puVar8 + 0xdc) = 0;
    }
    else {
      if (puVar9 < (ulong *)((long)puVar8 + 0xdc)) {
        return 10;
      }
      puVar8[0x1a] = 0x18800101;
      *(undefined4 *)(puVar8 + 0x1b) = 0;
      uVar2 = *(undefined8 *)(param_12 + 0x18);
      *(int *)(puVar8 + 0x1b) = (int)((ulong)uVar2 >> 0x20);
      puVar8[0x1a] = (ulong)((uint)uVar2 & 0xfffffffc) << 0x20 | 0x18800101;
    }
    param_1_00 = IOAccelResource2::releaseKernelData();
  }
  *(long *)(param_9 + 0x768) = param_10;
  *(long *)(param_9 + 0x770) = param_11;
  *(undefined8 *)(param_9 + 0x778) = *(undefined8 *)(param_12 + 0x50);
  *(undefined8 *)(param_9 + 0x780) = *(undefined8 *)(param_12 + 0x58);
  *(undefined4 *)(param_9 + 0x790) = *(undefined4 *)(param_12 + 0x6c);
  if (*(long *)(param_9 + 0x788) == 0) {
    *(undefined8 *)(param_9 + 0x788) = *(undefined8 *)(param_12 + 0x18);
  }
  *(undefined8 *)(param_9 + 0x798) = 0;
  if ((*(byte *)(param_11 + 0x19) & 3) != 0) {
    process_StoreActions
              (param_1_00,param_2_00,param_3_00,param_4_00,param_5_00,param_6_00,param_7,param_8,
               param_10,param_11,param_12,param_13,param_14);
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// eIOAccelCommandQueueError
// process_token_IndirectStateBaseAddress<IntelMTLRender::sIndirectStateBaseAddress,
// false>(IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IGAccelCommandDescriptor&,
// IGHeapsAccess&, IOGraphicsAccelerator2&)

char __cdecl
process_token_IndirectStateBaseAddress<>
          (long param_1,long param_2,long param_3,IGHeapsAccess *param_4)

{
  uint uVar1;
  IGAccelResource *this;
  IGAccelResource *pIVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  IGAccelResource *pIVar5;
  bool bVar6;
  char cVar7;
  ulong uVar8;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  long *plVar12;
  ulong uVar13;
  ulong uVar14;
  ulong local_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  IGAccelResource *local_58;
  IGAccelResource *local_50;
  IGAccelResource *local_48;
  ulong local_40;
  undefined4 local_34;
  
  uVar1 = *(uint *)(param_1 + 0xc);
  if (uVar1 <= *(uint *)(param_2 + 0xc)) {
    return '\t';
  }
  lVar10 = *(long *)(param_1 + 0x10);
  this = *(IGAccelResource **)(lVar10 + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (this == (IGAccelResource *)0x0) {
    return '\t';
  }
  if (uVar1 <= *(uint *)(param_2 + 0x10)) {
    return '\t';
  }
  local_58 = *(IGAccelResource **)(lVar10 + (ulong)*(uint *)(param_2 + 0x10) * 8);
  if (local_58 == (IGAccelResource *)0x0) {
    return '\t';
  }
  if (uVar1 <= *(uint *)(param_2 + 0x14)) {
    return '\t';
  }
  pIVar2 = *(IGAccelResource **)(lVar10 + (ulong)*(uint *)(param_2 + 0x14) * 8);
  if (pIVar2 == (IGAccelResource *)0x0) {
    return '\t';
  }
  if (uVar1 <= *(uint *)(param_2 + 0x18)) {
    return '\t';
  }
  local_50 = *(IGAccelResource **)(lVar10 + (ulong)*(uint *)(param_2 + 0x18) * 8);
  if (local_50 == (IGAccelResource *)0x0) {
    return '\t';
  }
  local_34 = 0;
  local_78 = 0;
  local_70 = 0;
  local_68 = 0;
  local_60 = 0;
  IGAccelResource::get_tex_data(this,(long *)&local_78,&local_34);
  local_48 = pIVar2;
  IGAccelResource::get_tex_data(pIVar2,(long *)&local_68,&local_34);
  pIVar2 = local_58;
  IGAccelResource::get_tex_data(local_58,(long *)&local_70,&local_34);
  IGAccelResource::get_tex_data(local_50,(long *)&local_60,&local_34);
  plVar12 = *(long **)(this + 0x88);
  if (plVar12 == (long *)0x0) {
    plVar12 = *(long **)(this + 0x80);
  }
  local_40 = (**(code **)(*plVar12 + 0x120))();
  plVar12 = *(long **)(pIVar2 + 0x88);
  if (plVar12 == (long *)0x0) {
    plVar12 = *(long **)(pIVar2 + 0x80);
  }
  uVar8 = (**(code **)(*plVar12 + 0x120))();
  plVar12 = *(long **)(local_50 + 0x88);
  if (plVar12 == (long *)0x0) {
    plVar12 = *(long **)(local_50 + 0x80);
  }
  uVar9 = (**(code **)(*plVar12 + 0x120))();
  pIVar2 = local_58;
  if (*(char *)(param_2 + 0x1c) == '\0') {
    uVar13 = local_78 >> 0xc;
  }
  else {
    local_78 = 0;
    local_40 = 0xfffff000;
    uVar13 = 0;
  }
  lVar10 = *(long *)(param_3 + 0x58);
  if (lVar10 == 0) {
    return '\b';
  }
  uVar11 = *(long *)(lVar10 + 200 + (ulong)(*(long *)(lVar10 + 0x88) == 0) * 8) -
           (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar11 < 0x58) {
    return '\b';
  }
  uVar14 = (ulong)*(uint *)(param_2 + 8);
  if (uVar11 - 0x58 >> 2 < uVar14) {
    return '\b';
  }
  lVar10 = *(long *)(param_3 + 0x20);
  if (lVar10 == 0) {
    return '\b';
  }
  uVar11 = *(ulong *)__got::_page_size;
  auVar3._8_8_ = 0;
  auVar3._0_8_ = uVar11;
  auVar4._8_8_ = 0;
  auVar4._0_8_ = local_40;
  *(ulong *)(lVar10 + uVar14 * 4) = (uVar13 << 0x2c | 0x61010014) + 0x70100000000;
  *(undefined8 *)(lVar10 + 0x20 + uVar14 * 4) = 0;
  *(ulong *)(lVar10 + 8 + uVar14 * 4) = (uVar13 >> 0x14) + 0x6e000000000000;
  *(ulong *)(lVar10 + 0x10 + uVar14 * 4) = local_68 & 0xfffffffffffff000 | 0x701;
  *(ulong *)(lVar10 + 0x18 + uVar14 * 4) = local_70 & 0xfffffffffffff000 | 0x701;
  *(ulong *)(lVar10 + 0x28 + uVar14 * 4) = uVar13 * 0x1000 + 0x461;
  *(ulong *)(lVar10 + 0x40 + uVar14 * 4) = (local_60 & 0xfffffffffffff000) + 0x481;
  *(undefined8 *)(lVar10 + 0x50 + uVar14 * 4) = 0;
  *(ulong *)(lVar10 + 0x38 + uVar14 * 4) = SUB168(auVar4 / auVar3,0) << 0x2c | 0x1fffff001;
  *(ulong *)(lVar10 + 0x30 + uVar14 * 4) =
       uVar8 / uVar11 << 0x2c | (ulong)(SUB164(auVar4 / auVar3,0) & 0xfffff) << 0xc | 0x100000001;
  *(ulong *)(lVar10 + 0x48 + uVar14 * 4) =
       (ulong)(((uint)(uVar9 >> 6) & 0x3ffffff) - 1 & 0xfffff) << 0xc;
  local_40 = uVar11;
  if (param_4[0x49] == (IGHeapsAccess)0x0) {
LAB_00050ece:
    pIVar5 = local_48;
    (**(code **)(*(long *)local_48 + 0x170))(local_48);
    *(IGAccelResource **)(param_4 + 0x20) = pIVar5;
    *(undefined4 *)(param_4 + 4) = *(undefined4 *)(*(long *)(pIVar5 + 0x38) + 0x100);
    lVar10 = IOAccelResource2::getKernelData();
    *(long *)(param_4 + 0x60) = lVar10;
    *(undefined8 *)(param_4 + 0x68) =
         *(undefined8 *)
          (*(long *)(param_4 + 0x20) + 200 +
          (ulong)(*(long *)(*(long *)(param_4 + 0x20) + 0x88) == 0) * 8);
    param_4[0x49] = (IGHeapsAccess)(lVar10 != 0);
    if (lVar10 != 0) goto LAB_00050f21;
LAB_0005108e:
    cVar7 = '\t';
  }
  else {
    if (*(int *)(param_4 + 4) != *(int *)(*(long *)(local_48 + 0x38) + 0x100)) {
      if (*(long *)(param_4 + 0x60) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0x60) = 0;
        *(undefined8 *)(param_4 + 0x68) = 0;
      }
      if (*(long **)(param_4 + 0x20) != (long *)0x0) {
        (**(code **)(**(long **)(param_4 + 0x20) + 0x178))();
      }
      *(undefined8 *)(param_4 + 0x20) = 0;
      param_4[0x49] = (IGHeapsAccess)0x0;
      *(undefined4 *)(param_4 + 4) = 0;
      goto LAB_00050ece;
    }
LAB_00050f21:
    if (param_4[0x48] == (IGHeapsAccess)0x0) {
LAB_00050f78:
      (**(code **)(*(long *)this + 0x170))(this);
      *(IGAccelResource **)(param_4 + 0x18) = this;
      *(undefined4 *)param_4 = *(undefined4 *)(*(long *)(this + 0x38) + 0x100);
      lVar10 = IOAccelResource2::getKernelData();
      *(long *)(param_4 + 0x50) = lVar10;
      *(undefined8 *)(param_4 + 0x58) =
           *(undefined8 *)
            (*(long *)(param_4 + 0x18) + 200 +
            (ulong)(*(long *)(*(long *)(param_4 + 0x18) + 0x88) == 0) * 8);
      param_4[0x48] = (IGHeapsAccess)(lVar10 != 0);
      if (lVar10 == 0) goto LAB_0005108e;
    }
    else if (*(int *)param_4 != *(int *)(*(long *)(this + 0x38) + 0x100)) {
      if (*(long *)(param_4 + 0x50) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0x50) = 0;
        *(undefined8 *)(param_4 + 0x58) = 0;
      }
      if (*(long **)(param_4 + 0x18) != (long *)0x0) {
        (**(code **)(**(long **)(param_4 + 0x18) + 0x178))();
      }
      *(undefined8 *)(param_4 + 0x18) = 0;
      param_4[0x48] = (IGHeapsAccess)0x0;
      *(undefined4 *)param_4 = 0;
      goto LAB_00050f78;
    }
    if (param_4[0x4a] == (IGHeapsAccess)0x0) {
LAB_00051024:
      (**(code **)(*(long *)pIVar2 + 0x170))(pIVar2);
      *(IGAccelResource **)(param_4 + 0x28) = pIVar2;
      *(undefined4 *)(param_4 + 8) = *(undefined4 *)(*(long *)(pIVar2 + 0x38) + 0x100);
      lVar10 = IOAccelResource2::getKernelData();
      *(long *)(param_4 + 0x70) = lVar10;
      *(undefined8 *)(param_4 + 0x78) =
           *(undefined8 *)
            (*(long *)(param_4 + 0x28) + 200 +
            (ulong)(*(long *)(*(long *)(param_4 + 0x28) + 0x88) == 0) * 8);
      param_4[0x4a] = (IGHeapsAccess)(lVar10 != 0);
      if (lVar10 == 0) goto LAB_0005108e;
    }
    else if (*(int *)(param_4 + 8) != *(int *)(*(long *)(pIVar2 + 0x38) + 0x100)) {
      if (*(long *)(param_4 + 0x70) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0x70) = 0;
        *(undefined8 *)(param_4 + 0x78) = 0;
      }
      if (*(long **)(param_4 + 0x28) != (long *)0x0) {
        (**(code **)(**(long **)(param_4 + 0x28) + 0x178))();
      }
      *(undefined8 *)(param_4 + 0x28) = 0;
      param_4[0x4a] = (IGHeapsAccess)0x0;
      *(undefined4 *)(param_4 + 8) = 0;
      goto LAB_00051024;
    }
    bVar6 = IGHeapsAccess::lock(param_4,3,(long *)local_50);
    cVar7 = !bVar6 * '\t';
  }
  return cVar7;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindingTablePoolAlloc(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IGHeapsAccess&, IOGraphicsAccelerator2&)

undefined8 __cdecl
process_token_BindingTablePoolAlloc(long param_1,long param_2,long param_3,long param_4)

{
  uint uVar1;
  IGAccelResource *this;
  undefined4 uVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  long *plVar6;
  undefined4 local_34;
  long local_30;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  this = *(IGAccelResource **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (this == (IGAccelResource *)0x0) {
    return 9;
  }
  local_30 = 0;
  local_34 = 0;
  IGAccelResource::get_tex_data(this,&local_30,&local_34);
  plVar6 = *(long **)(this + 0x88);
  if (plVar6 == (long *)0x0) {
    plVar6 = *(long **)(this + 0x80);
  }
  uVar2 = (**(code **)(*plVar6 + 0x120))();
  lVar3 = *(long *)(param_3 + 0x58);
  if (lVar3 == 0) {
    return 8;
  }
  uVar5 = *(long *)(lVar3 + 200 + (ulong)(*(long *)(lVar3 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar5 < 0x10) {
    return 8;
  }
  uVar4 = (ulong)*(uint *)(param_2 + 8);
  if (uVar4 <= uVar5 - 0x10 >> 2) {
    lVar3 = *(long *)(param_3 + 0x20);
    if (lVar3 == 0) {
      return 8;
    }
    uVar1 = *(uint *)(param_2 + 0x10);
    *(undefined4 *)(lVar3 + 0xc + uVar4 * 4) = uVar2;
    *(ulong *)(lVar3 + 4 + uVar4 * 4) = (ulong)uVar1 + local_30 & 0xffffffffffffff81 | 0x46;
    if (*(char *)(param_4 + 0x4c) != '\0') {
      if (*(int *)(param_4 + 0x10) == *(int *)(*(long *)(this + 0x38) + 0x100)) {
        return 0;
      }
      if (*(long *)(param_4 + 0x90) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0x90) = 0;
        *(undefined8 *)(param_4 + 0x98) = 0;
      }
      if (*(long **)(param_4 + 0x38) != (long *)0x0) {
        (**(code **)(**(long **)(param_4 + 0x38) + 0x178))();
      }
      *(undefined8 *)(param_4 + 0x38) = 0;
      *(undefined1 *)(param_4 + 0x4c) = 0;
      *(undefined4 *)(param_4 + 0x10) = 0;
    }
    (**(code **)(*(long *)this + 0x170))(this);
    *(IGAccelResource **)(param_4 + 0x38) = this;
    *(undefined4 *)(param_4 + 0x10) = *(undefined4 *)(*(long *)(this + 0x38) + 0x100);
    lVar3 = IOAccelResource2::getKernelData();
    *(long *)(param_4 + 0x90) = lVar3;
    *(undefined8 *)(param_4 + 0x98) =
         *(undefined8 *)
          (*(long *)(param_4 + 0x38) + 200 +
          (ulong)(*(long *)(*(long *)(param_4 + 0x38) + 0x88) == 0) * 8);
    *(bool *)(param_4 + 0x4c) = lVar3 != 0;
    if (lVar3 != 0) {
      return 0;
    }
    return 9;
  }
  return 8;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_GatherPoolAlloc(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IGHeapsAccess&, IOGraphicsAccelerator2&)

undefined8 __cdecl
process_token_GatherPoolAlloc(long param_1,long param_2,long param_3,long param_4)

{
  uint uVar1;
  IGAccelResource *this;
  undefined4 uVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  long *plVar6;
  undefined4 local_34;
  long local_30;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  this = *(IGAccelResource **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (this == (IGAccelResource *)0x0) {
    return 9;
  }
  local_30 = 0;
  local_34 = 0;
  IGAccelResource::get_tex_data(this,&local_30,&local_34);
  plVar6 = *(long **)(this + 0x88);
  if (plVar6 == (long *)0x0) {
    plVar6 = *(long **)(this + 0x80);
  }
  uVar2 = (**(code **)(*plVar6 + 0x120))();
  lVar3 = *(long *)(param_3 + 0x58);
  if (lVar3 == 0) {
    return 8;
  }
  uVar5 = *(long *)(lVar3 + 200 + (ulong)(*(long *)(lVar3 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar5 < 0x10) {
    return 8;
  }
  uVar4 = (ulong)*(uint *)(param_2 + 8);
  if (uVar4 <= uVar5 - 0x10 >> 2) {
    lVar3 = *(long *)(param_3 + 0x20);
    if (lVar3 == 0) {
      return 8;
    }
    uVar1 = *(uint *)(param_2 + 0x10);
    *(undefined4 *)(lVar3 + 0xc + uVar4 * 4) = uVar2;
    *(ulong *)(lVar3 + 4 + uVar4 * 4) = (ulong)uVar1 + local_30 & 0xffffffffffffff81 | 0x46;
    if (*(char *)(param_4 + 0x4d) != '\0') {
      if (*(int *)(param_4 + 0x14) == *(int *)(*(long *)(this + 0x38) + 0x100)) {
        return 0;
      }
      if (*(long *)(param_4 + 0xa0) != 0) {
        IOAccelResource2::releaseKernelData();
        *(undefined8 *)(param_4 + 0xa0) = 0;
        *(undefined8 *)(param_4 + 0xa8) = 0;
      }
      if (*(long **)(param_4 + 0x40) != (long *)0x0) {
        (**(code **)(**(long **)(param_4 + 0x40) + 0x178))();
      }
      *(undefined8 *)(param_4 + 0x40) = 0;
      *(undefined1 *)(param_4 + 0x4d) = 0;
      *(undefined4 *)(param_4 + 0x14) = 0;
    }
    (**(code **)(*(long *)this + 0x170))(this);
    *(IGAccelResource **)(param_4 + 0x40) = this;
    *(undefined4 *)(param_4 + 0x14) = *(undefined4 *)(*(long *)(this + 0x38) + 0x100);
    lVar3 = IOAccelResource2::getKernelData();
    *(long *)(param_4 + 0xa0) = lVar3;
    *(undefined8 *)(param_4 + 0xa8) =
         *(undefined8 *)
          (*(long *)(param_4 + 0x40) + 200 +
          (ulong)(*(long *)(*(long *)(param_4 + 0x40) + 0x88) == 0) * 8);
    *(bool *)(param_4 + 0x4d) = lVar3 != 0;
    if (lVar3 != 0) {
      return 0;
    }
    return 9;
  }
  return 8;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindDepthBuffer(IGAccelCommandQueue&, IGAccelSegmentResourceList&,
// IOAccelKernelCommand const&, IGAccelCommandDescriptor&, IOGraphicsAccelerator2&, IOAccelEvent&)

undefined8 __cdecl
process_token_BindDepthBuffer(long param_1,long param_2,long param_3,IntelAccelerator *param_4)

{
  IGAccelResource IVar1;
  byte bVar2;
  IGAccelResource *this;
  IGAccelTask *pIVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  byte bVar7;
  ulong uVar8;
  ulong uVar9;
  ulong uVar10;
  long *plVar11;
  bool bVar12;
  undefined4 uVar13;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  this = *(IGAccelResource **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (this == (IGAccelResource *)0x0) {
    return 9;
  }
  pIVar3 = *(IGAccelTask **)(param_3 + 8);
  if (*(long *)(param_2 + 0x10) == 0) {
    lVar4 = IOAccelResource2::getStorageResource();
    plVar11 = (long *)(lVar4 + 0x180);
  }
  else {
    plVar11 = *(long **)(this + 0x240);
    while( true ) {
      if (plVar11 == (long *)0x0) {
        return 10;
      }
      if (*plVar11 == *(long *)(param_2 + 0x10)) break;
      plVar11 = (long *)plVar11[0x15];
    }
  }
  lVar4 = *(long *)(param_3 + 0x58);
  if (lVar4 == 0) {
    return 8;
  }
  uVar8 = *(long *)(lVar4 + 200 + (ulong)(*(long *)(lVar4 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar8 < 0x20) {
    return 8;
  }
  uVar10 = (ulong)*(uint *)(param_2 + 8);
  if (uVar8 - 0x20 >> 2 < uVar10) {
    return 8;
  }
  lVar4 = *(long *)(param_3 + 0x20);
  if (lVar4 == 0) {
    return 8;
  }
  uVar9 = 0x2c;
  if ((*(byte *)(lVar4 + 6 + uVar10 * 4) & 0x40) == 0) {
    uVar9 = 0x20;
  }
  if (uVar8 < uVar9) {
    return 8;
  }
  if (uVar8 - uVar9 >> 2 < uVar10) {
    return 8;
  }
  lVar5 = (**(code **)(**(long **)(this + 0x40) + 0x130))();
  IVar1 = this[0x14];
  if (IVar1 != (IGAccelResource)0x0) {
    if (IVar1 == (IGAccelResource)0x82) {
      uVar8 = (ulong)*(uint *)(this + 0xfc);
      goto LAB_00051562;
    }
    if (IVar1 != (IGAccelResource)0x80) {
      uVar8 = 0;
      goto LAB_00051562;
    }
  }
  uVar8 = *(ulong *)(this + 0xf8);
LAB_00051562:
  uVar9 = *(ulong *)(lVar4 + 8 + uVar10 * 4);
  *(ulong *)(lVar4 + 8 + uVar10 * 4) =
       uVar9 & 0xffff000000000000 | uVar8 + lVar5 + uVar9 & 0xffffffffffff;
  bVar7 = *(byte *)((long)plVar11 + 0xa1);
  if ((*(ulong *)(lVar4 + uVar10 * 4) >> 0x36 & 1) == 0) {
    *(byte *)((long)plVar11 + 0xa1) = bVar7 & 0xfc;
  }
  else {
    uVar13 = *(undefined4 *)(param_2 + 0x18);
    bVar2 = *(byte *)(param_2 + 0x23);
    *(byte *)((long)plVar11 + 0xa1) = bVar7 | 0x11;
    if ((bVar2 & 1) == 0) {
      uVar13 = *(undefined4 *)((long)plVar11 + 0x9c);
    }
    else {
      *(byte *)((long)plVar11 + 0xa1) = bVar7 | 0x13;
      *(undefined4 *)((long)plVar11 + 0x9c) = uVar13;
    }
    *(undefined4 *)(lVar4 + 0x24 + uVar10 * 4) = uVar13;
    *(uint *)(lVar4 + 0x28 + uVar10 * 4) =
         *(uint *)(lVar4 + 0x28 + uVar10 * 4) & 0xfffffffe |
         (uint)((~*(byte *)((long)plVar11 + 0xa1) & 3) == 0);
    if (*(short *)(param_2 + 0x1e) == 1) {
      bVar12 = *(char *)(param_2 + 0x22) == '\x01';
    }
    else {
      bVar12 = false;
    }
    bVar7 = (bVar12 ^ 1U | (*(byte *)(param_2 + 0x23) & 1) == 0) & (bVar7 & 0x10) == 0;
    if ((*(byte *)(param_2 + 0x23) & 4) == 0) {
      bVar12 = false;
    }
    else {
      bVar12 = (*(ushort *)(plVar11[0xc] + (ulong)*(ushort *)(param_2 + 0x1c) * 2) >>
                (*(byte *)(param_2 + 0x21) & 0x1f) & 1) != 0;
    }
    if ((bVar12 | bVar7) == 1) {
      IGAccelResource::submitDepthResolve
                (this,(long)plVar11,param_4,pIVar3,0,(ulong)(bVar7 | 0x10),
                 *(ushort *)(param_2 + 0x1c),*(ushort *)(param_2 + 0x1c),
                 (ushort)(1 << (*(byte *)(param_2 + 0x21) & 0x1f)),(int *)0x0);
    }
  }
  uVar6 = 0;
  if (*(long *)(param_2 + 0x10) == 0) {
    uVar6 = 10;
    if ((byte)*(IGAccelResource *)(param_2 + 0x20) < (byte)this[0xac]) {
      (**(code **)(*(long *)this + 0x168))
                (this,*(IGAccelResource *)(param_2 + 0x20),*(undefined1 *)(param_2 + 0x21));
      uVar6 = 0;
    }
  }
  return uVar6;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindStencilBuffer(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&)

undefined8 __cdecl process_token_BindStencilBuffer(long param_1,long param_2,long param_3)

{
  char cVar1;
  uint uVar2;
  long *plVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  plVar3 = *(long **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (plVar3 == (long *)0x0) {
    return 9;
  }
  lVar4 = *(long *)(param_3 + 0x58);
  if (lVar4 == 0) {
    return 8;
  }
  uVar6 = *(long *)(lVar4 + 200 + (ulong)(*(long *)(lVar4 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar6 < 0x14) {
    return 8;
  }
  uVar2 = *(uint *)(param_2 + 8);
  if (uVar6 - 0x14 >> 2 < (ulong)uVar2) {
    return 8;
  }
  lVar4 = *(long *)(param_3 + 0x20);
  if (lVar4 == 0) {
    return 8;
  }
  if (*(long *)(param_2 + 0x10) == 0) {
    IOAccelResource2::getStorageResource();
    if (*(long *)(param_2 + 0x10) == 0) {
      (**(code **)(*plVar3 + 0x168))(plVar3,0,0);
    }
  }
  else {
    plVar7 = (long *)plVar3[0x48];
    while( true ) {
      if (plVar7 == (long *)0x0) {
        return 10;
      }
      if (*plVar7 == *(long *)(param_2 + 0x10)) break;
      plVar7 = (long *)plVar7[0x15];
    }
  }
  lVar5 = (**(code **)(*(long *)plVar3[8] + 0x130))();
  cVar1 = *(char *)((long)plVar3 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar6 = (ulong)*(uint *)((long)plVar3 + 0xfc);
      goto LAB_000517da;
    }
    if (cVar1 != -0x80) {
      uVar6 = 0;
      goto LAB_000517da;
    }
  }
  uVar6 = plVar3[0x1f];
LAB_000517da:
  plVar3 = (long *)(lVar4 + 8 + (ulong)uVar2 * 4);
  *plVar3 = *plVar3 + uVar6 + lVar5;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindHiZBuffer(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&)

undefined8 __cdecl process_token_BindHiZBuffer(long param_1,long param_2,long param_3)

{
  char cVar1;
  uint uVar2;
  long *plVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  plVar3 = *(long **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (plVar3 == (long *)0x0) {
    return 9;
  }
  lVar4 = *(long *)(param_3 + 0x58);
  if (lVar4 == 0) {
    return 8;
  }
  uVar6 = *(long *)(lVar4 + 200 + (ulong)(*(long *)(lVar4 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar6 < 0x14) {
    return 8;
  }
  uVar2 = *(uint *)(param_2 + 8);
  if (uVar6 - 0x14 >> 2 < (ulong)uVar2) {
    return 8;
  }
  lVar4 = *(long *)(param_3 + 0x20);
  if (lVar4 == 0) {
    return 8;
  }
  if (*(long *)(param_2 + 0x10) == 0) {
    IOAccelResource2::getStorageResource();
    if (*(long *)(param_2 + 0x10) == 0) {
      (**(code **)(*plVar3 + 0x168))(plVar3,0,0);
    }
  }
  else {
    plVar7 = (long *)plVar3[0x48];
    while( true ) {
      if (plVar7 == (long *)0x0) {
        return 10;
      }
      if (*plVar7 == *(long *)(param_2 + 0x10)) break;
      plVar7 = (long *)plVar7[0x15];
    }
  }
  lVar5 = (**(code **)(*(long *)plVar3[8] + 0x130))();
  cVar1 = *(char *)((long)plVar3 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar6 = (ulong)*(uint *)((long)plVar3 + 0xfc);
      goto LAB_000518f6;
    }
    if (cVar1 != -0x80) {
      uVar6 = 0;
      goto LAB_000518f6;
    }
  }
  uVar6 = plVar3[0x1f];
LAB_000518f6:
  plVar3 = (long *)(lVar4 + 8 + (ulong)uVar2 * 4);
  *plVar3 = *plVar3 + uVar6 + lVar5;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// eIOAccelCommandQueueError process_token_BindIndexBuffer<IntelMTLRender::sBindIndexBuffer,
// false>(IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IGAccelCommandDescriptor&,
// IOGraphicsAccelerator2&)

undefined8 __cdecl process_token_BindIndexBuffer<>(long param_1,long param_2,long param_3)

{
  char cVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  ulong uVar7;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  lVar3 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (lVar3 == 0) {
    return 9;
  }
  lVar4 = *(long *)(param_3 + 0x58);
  if (lVar4 == 0) {
    return 8;
  }
  uVar6 = *(long *)(lVar4 + 200 + (ulong)(*(long *)(lVar4 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar6 < 0x14) {
    return 8;
  }
  uVar7 = (ulong)*(uint *)(param_2 + 8);
  if (uVar6 - 0x14 >> 2 < uVar7) {
    return 8;
  }
  lVar4 = *(long *)(param_3 + 0x20);
  if (lVar4 == 0) {
    return 8;
  }
  lVar5 = (**(code **)(**(long **)(lVar3 + 0x40) + 0x130))();
  cVar1 = *(char *)(lVar3 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar6 = (ulong)*(uint *)(lVar3 + 0xfc);
      goto LAB_000519c1;
    }
    if (cVar1 != -0x80) {
      uVar6 = 0;
      goto LAB_000519c1;
    }
  }
  uVar6 = *(ulong *)(lVar3 + 0xf8);
LAB_000519c1:
  uVar2 = *(uint *)(param_2 + 0x14);
  *(ulong *)(lVar4 + 8 + uVar7 * 4) = uVar6 + lVar5 + (ulong)uVar2;
  *(uint *)(lVar4 + 0x10 + uVar7 * 4) = *(int *)(param_2 + 0x10) - uVar2;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// eIOAccelCommandQueueError process_token_BindIndirectBuffer<IntelMTLRender::sBindIndirectBuffer,
// false>(IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IGAccelCommandDescriptor&,
// IOGraphicsAccelerator2&, IGHardwareContext&)

undefined8 __cdecl process_token_BindIndirectBuffer<>(long param_1,long param_2,long param_3)

{
  char cVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  ulong uVar6;
  ulong uVar7;
  uint uVar8;
  ulong uVar9;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0x10)) {
    return 9;
  }
  lVar3 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0x10) * 8);
  if (lVar3 == 0) {
    return 9;
  }
  lVar4 = (**(code **)(**(long **)(lVar3 + 0x40) + 0x130))();
  cVar1 = *(char *)(lVar3 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar7 = (ulong)*(uint *)(lVar3 + 0xfc);
      goto LAB_00051a51;
    }
    if (cVar1 != -0x80) {
      uVar7 = 0;
      goto LAB_00051a51;
    }
  }
  uVar7 = *(ulong *)(lVar3 + 0xf8);
LAB_00051a51:
  uVar2 = *(uint *)(param_2 + 0xc);
  uVar8 = uVar2 & 0xff;
  uVar5 = 10;
  if (uVar8 < 6) {
    uVar6 = 0x50;
    if ((uVar2 >> 8 & 1) != 0) {
      uVar6 = (ulong)(uVar8 << 4);
    }
    lVar3 = *(long *)(param_3 + 0x58);
    uVar5 = 8;
    if ((((lVar3 != 0) &&
         (uVar9 = *(long *)(lVar3 + 200 + (ulong)(*(long *)(lVar3 + 0x88) == 0) * 8) -
                  (ulong)*(uint *)(param_3 + 0x6c), uVar6 <= uVar9)) &&
        ((ulong)*(uint *)(param_2 + 8) <= uVar9 - uVar6 >> 2)) && (*(long *)(param_3 + 0x20) != 0))
    {
      uVar7 = (ulong)*(uint *)(param_2 + 0x14) + uVar7 + lVar4 >> 2;
      lVar3 = *(long *)(param_3 + 0x20) + (ulong)*(uint *)(param_2 + 8) * 4;
      if ((uVar2 >> 8 & 1) == 0) {
        *(ulong *)(lVar3 + 8) =
             (*(ulong *)(lVar3 + 8) & 0xffff000000000003) + (uVar7 & 0x3fffffffffff) * 4;
        *(ulong *)(lVar3 + 0x18) =
             (*(ulong *)(lVar3 + 0x18) & 0xffff000000000003) + (uVar7 + 1 & 0x3fffffffffff) * 4;
        uVar6 = uVar7 + 2 & 0x3fffffffffff;
        *(ulong *)(lVar3 + 0x28) = (*(ulong *)(lVar3 + 0x28) & 0xffff000000000003) + uVar6 * 4;
        *(ulong *)(lVar3 + 0x38) = (*(ulong *)(lVar3 + 0x38) & 0xffff000000000003) + uVar6 * 4;
        *(ulong *)(lVar3 + 0x48) =
             (*(ulong *)(lVar3 + 0x48) & 0xffff000000000003) + (uVar7 + 3 & 0x3fffffffffff) * 4;
      }
      else if (uVar8 != 0) {
        lVar4 = 0;
        do {
          *(undefined8 *)(lVar3 + lVar4) = *(undefined8 *)(lVar3 + lVar4);
          *(ulong *)(lVar3 + 8 + lVar4) =
               *(ulong *)(lVar3 + 8 + lVar4) & 0xffff000000000003 | (uVar7 & 0x3fffffffffff) << 2;
          lVar4 = lVar4 + 0x10;
          uVar7 = uVar7 + 1;
        } while ((uVar2 & 0xff) << 4 != (int)lVar4);
        return 0;
      }
      uVar5 = 0;
    }
  }
  return uVar5;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_BindIndirectBufferTess(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&, IGHardwareContext&)

undefined8 __cdecl process_token_BindIndirectBufferTess(long param_1,long param_2,long param_3)

{
  undefined8 *puVar1;
  char cVar2;
  uint uVar3;
  long lVar4;
  long lVar5;
  IGAccelResource *this;
  long lVar6;
  ulong uVar7;
  uint uVar8;
  uint uVar9;
  ulong uVar10;
  ulong uVar11;
  undefined4 local_3c;
  long local_38;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0x10)) {
    return 9;
  }
  lVar4 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0x10) * 8);
  if (lVar4 == 0) {
    return 9;
  }
  lVar6 = (**(code **)(**(long **)(lVar4 + 0x40) + 0x130))();
  cVar2 = *(char *)(lVar4 + 0x14);
  if (cVar2 == '\0') {
LAB_00051c27:
    uVar7 = *(ulong *)(lVar4 + 0xf8);
  }
  else if (cVar2 == -0x7e) {
    uVar7 = (ulong)*(uint *)(lVar4 + 0xfc);
  }
  else {
    if (cVar2 == -0x80) goto LAB_00051c27;
    uVar7 = 0;
  }
  uVar3 = *(uint *)(param_2 + 0xc);
  uVar8 = uVar3 & 0xff;
  if (4 < uVar8) {
    return 10;
  }
  uVar9 = uVar3 & 0x100;
  uVar11 = (ulong)uVar8 * 0x10 + 0x20;
  if (uVar9 == 0) {
    uVar11 = (ulong)uVar8 * 0x10;
  }
  lVar5 = *(long *)(param_3 + 0x58);
  if (lVar5 == 0) {
    return 8;
  }
  uVar10 = *(long *)(lVar5 + 200 + (ulong)(*(long *)(lVar5 + 0x88) == 0) * 8) -
           (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar10 < uVar11) {
    return 8;
  }
  if (uVar10 - uVar11 >> 2 < (ulong)*(uint *)(param_2 + 8)) {
    return 8;
  }
  if (*(long *)(param_3 + 0x20) == 0) {
    return 8;
  }
  lVar5 = *(long *)(param_3 + 0x20) + (ulong)*(uint *)(param_2 + 8) * 4;
  uVar11 = 0;
  if (uVar8 != 0) {
    uVar11 = 0;
    uVar7 = (ulong)*(uint *)(param_2 + 0x14) + uVar7 + lVar6 >> 2;
    do {
      puVar1 = (undefined8 *)(lVar5 + uVar11 * 4);
      *puVar1 = *puVar1;
      *(ulong *)(lVar5 + 8 + uVar11 * 4) =
           *(ulong *)(lVar5 + 8 + uVar11 * 4) & 0xffff000000000003 | (uVar7 & 0x3fffffffffff) << 2;
      uVar11 = uVar11 + 4;
      uVar7 = uVar7 + 1;
    } while ((uVar3 & 0xff) << 2 != (int)uVar11);
    uVar9 = *(uint *)(param_2 + 0xc) & 0x100;
  }
  if (uVar9 == 0) {
    return 0;
  }
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0x20)) {
    return 9;
  }
  this = *(IGAccelResource **)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0x20) * 8);
  if (this == (IGAccelResource *)0x0) {
    return 9;
  }
  local_38 = 0;
  local_3c = 0;
  IGAccelResource::get_tex_data(this,&local_38,&local_3c);
  *(ulong *)(lVar5 + 8 + (uVar11 & 0xffffffff) * 4) =
       (*(ulong *)(lVar5 + 8 + (uVar11 & 0xffffffff) * 4) & 0xffff000000000003) +
       ((ulong)*(uint *)(param_2 + 0x24) + local_38 >> 2 & 0x3fffffffffff) * 4;
  uVar7 = (ulong)((int)uVar11 + 4);
  lVar6 = (**(code **)(**(long **)(lVar4 + 0x40) + 0x130))();
  cVar2 = *(char *)(lVar4 + 0x14);
  if (cVar2 != '\0') {
    if (cVar2 == -0x7e) {
      uVar11 = (ulong)*(uint *)(lVar4 + 0xfc);
      goto LAB_00051e10;
    }
    if (cVar2 != -0x80) {
      uVar11 = 0;
      goto LAB_00051e10;
    }
  }
  uVar11 = *(ulong *)(lVar4 + 0xf8);
LAB_00051e10:
  uVar3 = *(uint *)(param_2 + 0x14);
  uVar8 = *(uint *)(param_2 + 0x18);
  puVar1 = (undefined8 *)(lVar5 + uVar7 * 4);
  *puVar1 = *puVar1;
  *(ulong *)(lVar5 + 8 + uVar7 * 4) =
       *(ulong *)(lVar5 + 8 + uVar7 * 4) & 0xffff000000000003 |
       ((ulong)uVar8 + (ulong)uVar3 + uVar11 + lVar6 >> 2 & 0x3fffffffffff) << 2;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_VisibilityQueryBegin(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&)

undefined8 __cdecl process_token_VisibilityQueryBegin(long param_1,long param_2,long param_3)

{
  char cVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  lVar2 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (lVar2 == 0) {
    return 9;
  }
  lVar3 = *(long *)(param_3 + 0x58);
  if (lVar3 == 0) {
    return 8;
  }
  uVar5 = *(long *)(lVar3 + 200 + (ulong)(*(long *)(lVar3 + 0x88) == 0) * 8) -
          (ulong)*(uint *)(param_3 + 0x6c);
  if (uVar5 < 0x18) {
    return 8;
  }
  uVar6 = (ulong)*(uint *)(param_2 + 8);
  if (uVar5 - 0x18 >> 2 < uVar6) {
    return 8;
  }
  lVar3 = *(long *)(param_3 + 0x20);
  if (lVar3 == 0) {
    return 8;
  }
  lVar4 = (**(code **)(**(long **)(lVar2 + 0x40) + 0x130))();
  cVar1 = *(char *)(lVar2 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar5 = (ulong)*(uint *)(lVar2 + 0xfc);
      goto LAB_00051f08;
    }
    if (cVar1 != -0x80) {
      uVar5 = 0;
      goto LAB_00051f08;
    }
  }
  uVar5 = *(ulong *)(lVar2 + 0xf8);
LAB_00051f08:
  *(uint *)(lVar3 + 8 + uVar6 * 4) =
       *(uint *)(lVar3 + 8 + uVar6 * 4) & 3 |
       *(int *)(param_2 + 0x10) + (int)(uVar5 + lVar4) & 0xfffffffcU;
  *(int *)(lVar3 + 0xc + uVar6 * 4) =
       (int)((ulong)*(uint *)(param_2 + 0x10) + uVar5 + lVar4 >> 0x20);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_VisibilityQueryEnd(IGAccelSegmentResourceList&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&)

undefined8 __cdecl process_token_VisibilityQueryEnd(long param_1,long param_2,long param_3)

{
  char cVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  
  if (*(uint *)(param_1 + 0xc) <= *(uint *)(param_2 + 0xc)) {
    return 9;
  }
  lVar2 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8);
  if (lVar2 == 0) {
    return 9;
  }
  lVar3 = (**(code **)(**(long **)(lVar2 + 0x40) + 0x130))();
  cVar1 = *(char *)(lVar2 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar5 = (ulong)*(uint *)(lVar2 + 0xfc);
      goto LAB_00051fa8;
    }
    if (cVar1 != -0x80) {
      uVar5 = 0;
      goto LAB_00051fa8;
    }
  }
  uVar5 = *(ulong *)(lVar2 + 0xf8);
LAB_00051fa8:
  lVar2 = *(long *)(param_3 + 0x58);
  uVar4 = 8;
  if ((((lVar2 != 0) &&
       (uVar7 = *(long *)(lVar2 + 200 + (ulong)(*(long *)(lVar2 + 0x88) == 0) * 8) -
                (ulong)*(uint *)(param_3 + 0x6c), 0x6b < uVar7)) &&
      (uVar6 = (ulong)*(uint *)(param_2 + 8), uVar6 <= uVar7 - 0x6c >> 2)) &&
     (lVar2 = *(long *)(param_3 + 0x20), lVar2 != 0)) {
    lVar3 = uVar5 + lVar3;
    *(ulong *)(lVar2 + 0x20 + uVar6 * 4) =
         (*(ulong *)(lVar2 + 0x20 + uVar6 * 4) & 0xffff000000000003) +
         ((ulong)*(uint *)(param_2 + 0x10) + lVar3 >> 2 & 0x3fffffffffff) * 4;
    *(ulong *)(lVar2 + 0x30 + uVar6 * 4) =
         (*(ulong *)(lVar2 + 0x30 + uVar6 * 4) & 0xffff000000000003) +
         ((ulong)*(uint *)(param_2 + 0x10) + lVar3 + 4 >> 2 & 0x3fffffffffff) * 4;
    *(ulong *)(lVar2 + 0x54 + uVar6 * 4) =
         (*(ulong *)(lVar2 + 0x54 + uVar6 * 4) & 0xffff000000000003) +
         ((ulong)*(uint *)(param_2 + 0x10) + lVar3 >> 2 & 0x3fffffffffff) * 4;
    *(ulong *)(lVar2 + 100 + uVar6 * 4) =
         (*(ulong *)(lVar2 + 100 + uVar6 * 4) & 0xffff000000000003) +
         (lVar3 + (ulong)*(uint *)(param_2 + 0x10) + 4 >> 2 & 0x3fffffffffff) * 4;
    uVar4 = 0;
  }
  return uVar4;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// eIOAccelCommandQueueError
// process_token_SkipDrawIfDepthResourceCleared<IntelMTLRender::sSkipDrawIfDepthResourceCleared,
// false>(IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IGAccelCommandDescriptor&)

undefined8 __cdecl
process_token_SkipDrawIfDepthResourceCleared<>(long param_1,long param_2,long param_3)

{
  long lVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong uVar4;
  
  uVar2 = 9;
  if (((*(uint *)(param_2 + 0xc) < *(uint *)(param_1 + 0xc)) &&
      (lVar1 = *(long *)(*(long *)(param_1 + 0x10) + (ulong)*(uint *)(param_2 + 0xc) * 8),
      lVar1 != 0)) && (uVar2 = 0, *(char *)(lVar1 + 0x26c) == '\0')) {
    lVar1 = *(long *)(param_3 + 0x58);
    uVar2 = 8;
    if (((lVar1 != 0) &&
        (uVar4 = *(long *)(lVar1 + 200 + (ulong)(*(long *)(lVar1 + 0x88) == 0) * 8) -
                 (ulong)*(uint *)(param_3 + 0x6c), 0x27 < uVar4)) &&
       ((uVar3 = (ulong)*(uint *)(param_2 + 8), uVar3 <= uVar4 - 0x28 >> 2 &&
        (lVar1 = *(long *)(param_3 + 0x20), lVar1 != 0)))) {
      uVar2 = 0;
      *(undefined8 *)(lVar1 + 0x20 + uVar3 * 4) = 0;
      *(undefined8 *)(lVar1 + 0x18 + uVar3 * 4) = 0;
      *(undefined8 *)(lVar1 + 0x10 + uVar3 * 4) = 0;
      *(undefined8 *)(lVar1 + 8 + uVar3 * 4) = 0;
      *(undefined8 *)(lVar1 + uVar3 * 4) = 0;
    }
  }
  return uVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_ConditionalResolveHiZMulti(IGAccelCommandQueue&, IOGraphicsAccelerator2&,
// IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IGAccelCommandDescriptor&,
// IGHeapsAccess&, IOAccelEvent&)

undefined8 __cdecl
process_token_ConditionalResolveHiZMulti
          (long *param_1,IntelAccelerator *param_2,long param_3,long param_4,
          IGAccelCommandDescriptor *param_5,long param_6)

{
  ushort *puVar1;
  IGAccelResource *pIVar2;
  IGAccelTask *pIVar3;
  ulong uVar4;
  ulong uVar5;
  uint uVar6;
  long lVar7;
  long *plVar8;
  long lVar9;
  uint uVar10;
  ulong uVar11;
  ulong *puVar12;
  ushort uVar13;
  ulong uVar14;
  uint uVar15;
  uint uVar16;
  ushort uVar17;
  ulong *puVar18;
  ulong uVar19;
  byte bVar20;
  bool bVar21;
  
  if ((*(uint *)(param_3 + 0xc) <= *(uint *)(param_4 + 0xc)) ||
     (pIVar2 = *(IGAccelResource **)
                (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0xc) * 8),
     pIVar2 == (IGAccelResource *)0x0)) {
    return 9;
  }
  if (*(long *)(param_4 + 0x10) == 0) {
    lVar7 = IOAccelResource2::getStorageResource();
    plVar8 = (long *)(lVar7 + 0x180);
  }
  else {
    for (plVar8 = *(long **)(pIVar2 + 0x240); plVar8 != (long *)0x0; plVar8 = (long *)plVar8[0x15])
    {
      if (*plVar8 == *(long *)(param_4 + 0x10)) goto LAB_000521cd;
    }
    plVar8 = (long *)0x0;
  }
LAB_000521cd:
  if ((*(byte *)(param_4 + 0x1e) & 8) != 0) {
    if (plVar8 == (long *)0x0) {
      return 0;
    }
    if ((*(byte *)((long)plVar8 + 0xa1) & 1) != 0) {
      bVar20 = (byte)*(undefined4 *)(param_4 + 0x1c);
      pIVar3 = *(IGAccelTask **)(param_5 + 8);
      uVar13 = (ushort)(1L << ((bVar20 - 1) + *(char *)(param_4 + 0x1d) & 0x3f));
      IGAccelCommandQueue::replayKernelCommand(param_1);
      uVar14 = IGAccelResource::submitDepthResolve
                         (pIVar2,(long)plVar8,param_2,pIVar3,param_6,0x18,
                          *(ushort *)(param_4 + 0x18),
                          (*(short *)(param_4 + 0x1a) + *(ushort *)(param_4 + 0x18)) - 1,
                          (short)(-1L << (bVar20 & 0x3f)) + uVar13 | uVar13,(int *)0x0);
      if ((char)uVar14 != '\0') {
        return 0;
      }
      return 10;
    }
    return 0;
  }
  lVar7 = *(long *)(param_5 + 0x58);
  if (lVar7 == 0) {
    return 8;
  }
  uVar14 = *(long *)(lVar7 + 200 + (ulong)(*(long *)(lVar7 + 0x88) == 0) * 8) -
           (ulong)*(uint *)(param_5 + 0x6c);
  if (uVar14 < 0xc) {
    return 8;
  }
  if (uVar14 - 0xc >> 2 < (ulong)*(uint *)(param_4 + 8)) {
    return 8;
  }
  if (*(long *)(param_5 + 0x20) == 0) {
    return 8;
  }
  puVar18 = (ulong *)(*(long *)(param_5 + 0x20) + (ulong)*(uint *)(param_4 + 8) * 4);
  if ((plVar8 != (long *)0x0) && ((*(byte *)((long)plVar8 + 0xa1) & 1) != 0)) {
    uVar10 = *(uint *)(param_4 + 0x1c);
    bVar20 = *(byte *)(param_4 + 0x1d);
    bVar21 = *(ushort *)(param_4 + 0x1a) < 7;
    if (bVar21) {
      uVar6 = *(uint *)(param_4 + 0x18);
      uVar16 = *(ushort *)(param_4 + 0x1a) + uVar6;
      if ((ushort)uVar6 < (ushort)uVar16) {
        uVar15 = (uint)(1L << (bVar20 + ((byte)uVar10 - 1) & 0x3f));
        uVar14 = (ulong)(uVar6 & 0xffff);
        do {
          uVar14 = uVar14 + 1;
          bVar21 = ((uint)*(ushort *)(plVar8[0xb] + -2 + uVar14 * 2) &
                   ((int)(-1L << ((byte)uVar10 & 0x3f)) + uVar15 | uVar15)) == 0;
          if (!bVar21) break;
        } while (uVar14 < (uVar16 & 0xffff));
      }
    }
    if (bVar21) {
      puVar12 = (ulong *)0x0;
    }
    else {
      if ((*(byte *)(param_4 + 0x1e) & 2) == 0) {
        puVar12 = (ulong *)((long)puVar18 + 0xc);
      }
      else {
        *(undefined4 *)(puVar18 + 6) = *(undefined4 *)((long)plVar8 + 0x9c);
        *(uint *)((long)puVar18 + 0x34) =
             *(uint *)((long)puVar18 + 0x34) & 0xfffffffe |
             (uint)((~*(byte *)((long)plVar8 + 0xa1) & 3) == 0);
        puVar12 = (ulong *)((long)puVar18 + 0x54);
        uVar10 = (uint)*(byte *)(param_4 + 0x1c);
        bVar20 = *(byte *)(param_4 + 0x1d);
      }
      if (bVar20 != 0) {
        uVar10 = uVar10 & 0xff;
        uVar6 = bVar20 + uVar10;
        bVar21 = true;
        do {
          uVar13 = *(ushort *)(param_4 + 0x18);
          uVar14 = (ulong)uVar13;
          uVar17 = *(short *)(param_4 + 0x1a) + uVar13;
          if (uVar13 < uVar17) {
            bVar20 = (byte)uVar10 & 0x1f;
            uVar13 = (ushort)(-2 << bVar20) | (ushort)(0xfffffffe >> 0x20 - bVar20);
            do {
              if (((puVar12 == (ulong *)0x0) || (lVar7 = *(long *)(param_5 + 0x58), lVar7 == 0)) ||
                 (uVar19 = *(long *)(lVar7 + 200 + (ulong)(*(long *)(lVar7 + 0x88) == 0) * 8) -
                           (ulong)*(uint *)(param_5 + 0x6c), uVar19 < 0xc)) {
LAB_00052552:
                if (bVar21) {
                  return 8;
                }
                puVar12 = (ulong *)0x0;
                goto LAB_00052569;
              }
              uVar4 = (ulong)(uint)puVar12[1] << 0x1e;
              uVar5 = *puVar12 >> 0x22;
              uVar11 = uVar4 & 0xffffffff | uVar5;
              if ((uVar19 - 0xc >> 2 < uVar11) || (lVar7 = *(long *)(param_5 + 0x20), lVar7 == 0))
              goto LAB_00052552;
              if ((1 << ((byte)uVar10 & 0x1f) & (uint)*(ushort *)(plVar8[0xb] + uVar14 * 2)) == 0) {
                uVar19 = (*(ulong *)(param_5 + 0x60) >> 2) + (uVar4 | uVar5);
                *(int *)(puVar12 + 1) = (int)(uVar19 >> 0x1e);
                *puVar12 = *puVar12 & 0x3ffffffff | uVar19 << 0x22;
              }
              else {
                if (puVar18 != (ulong *)0x0) {
                  *(undefined4 *)(puVar18 + 1) = 0;
                  *puVar18 = 0;
                }
                *(undefined4 *)(puVar12 + 1) = 0;
                *puVar12 = 0;
                puVar1 = (ushort *)(plVar8[0xb] + uVar14 * 2);
                *puVar1 = *puVar1 & uVar13;
                puVar1 = (ushort *)(plVar8[0xc] + uVar14 * 2);
                *puVar1 = *puVar1 & uVar13;
                puVar18 = (ulong *)0x0;
              }
              puVar12 = (ulong *)(lVar7 + uVar11 * 4);
              uVar14 = uVar14 + 1;
            } while (uVar17 != uVar14);
          }
          uVar10 = uVar10 + 1;
          bVar21 = uVar10 < uVar6;
        } while (uVar6 != uVar10);
      }
    }
LAB_00052569:
    if (puVar18 == (ulong *)0x0) {
      if ((*(byte *)(param_4 + 0x1e) & 4) == 0) {
        return 0;
      }
      if (puVar12 == (ulong *)0x0) {
        return 8;
      }
      lVar7 = IGAccelCommandDescriptor::checkVirtualOffset(param_5,(long)puVar12,0x40);
      if (lVar7 == 0) {
        return 8;
      }
      if (*(uint *)(param_4 + 0x28) < *(uint *)(param_3 + 0xc)) {
        pIVar2 = *(IGAccelResource **)
                  (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0x28) * 8);
        if (pIVar2 != (IGAccelResource *)0x0) {
          plVar8 = IGAccelResource::getResourceInfoEntry(pIVar2,*(long *)(param_4 + 0x20));
          lVar9 = IOAccelResource2::getGPUVirtualAddressForUserProcess((IOAccelResource2 *)pIVar2);
          *(ulong *)(lVar7 + 8) =
               *(ulong *)(lVar7 + 8) & 0xffff000000000000 |
               lVar9 + *(ulong *)(lVar7 + 8) & 0xffffffffffff;
          *(long *)((long)puVar12 + 0x34) = *(long *)((long)puVar12 + 0x34) + lVar9;
          *(undefined4 *)((long)puVar12 + 0x24) = *(undefined4 *)((long)plVar8 + 0x9c);
          *(uint *)(puVar12 + 5) =
               (uint)puVar12[5] & 0xfffffffe | (uint)((~*(byte *)((long)plVar8 + 0xa1) & 3) == 0);
          return 0;
        }
        return 9;
      }
      return 9;
    }
  }
  uVar14 = ((ulong)(uint)puVar18[1] << 0x1e | *puVar18 >> 0x22) + (*(ulong *)(param_5 + 0x60) >> 2);
  *puVar18 = *puVar18 & 0x3ffffffff | uVar14 << 0x22;
  *(int *)(puVar18 + 1) = (int)(uVar14 >> 0x1e);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// barrierSubmission(IGAccelCommandQueue&, IntelAccelerator&, IGAccelCommandDescriptor&,
// IOAccelEvent&, unsigned short, unsigned short const*)

void __cdecl
barrierSubmission(long param_1,long param_2,long param_3,undefined8 param_4,ushort param_5,
                 long param_6)

{
  undefined *puVar1;
  ushort uVar2;
  undefined4 uVar3;
  long *plVar4;
  IGAccelTask *this;
  long *plVar5;
  byte bVar6;
  byte bVar7;
  char cVar8;
  char cVar9;
  uint uVar10;
  ulong uVar11;
  IGHardwareExtendedContext *pIVar12;
  byte bVar13;
  bool bVar14;
  long lVar15;
  byte bVar16;
  bool bVar17;
  bool bVar18;
  
  plVar4 = *(long **)(param_2 + 0x380);
  this = *(IGAccelTask **)(param_3 + 8);
  uVar3 = *(undefined4 *)(*(long *)(*(long *)(param_3 + 0x50) + 0xb0) + 0x20);
  puVar1 = &DAT_00001218 + param_2;
  bVar6 = (**(code **)(*plVar4 + 0x1c0))(plVar4,param_4,puVar1,uVar3);
  if (*(int *)(param_1 + 0x820) < 0) {
    bVar16 = 1;
  }
  else {
    bVar16 = 1;
    lVar15 = -1;
    do {
      uVar11 = IGAccelSegmentResourceList::mergeEventsToBarrierExcluding
                         (*(IGAccelSegmentResourceList **)(param_1 + 0x7a8 + lVar15 * 8),puVar1,
                          uVar3);
      bVar16 = bVar16 & (byte)uVar11;
      lVar15 = lVar15 + 1;
    } while (lVar15 < *(int *)(param_1 + 0x820));
  }
  if (param_5 != 0) {
    plVar5 = *(long **)(*(long *)(param_1 + 0x5c0) + 0x380);
    uVar11 = 0;
    do {
      uVar2 = *(ushort *)(param_6 + uVar11 * 2);
      if (uVar2 != 0) {
        lVar15 = *(long *)(param_1 + 0x5b8);
        if (((uint)uVar2 < *(uint *)(lVar15 + 0x70)) && (*(long *)(lVar15 + 0x68) != 0)) {
          bVar7 = (**(code **)(*plVar5 + 0x1c8))
                            (plVar5,*(long *)(lVar15 + 0x68) +
                                    (ulong)((uint)uVar2 * *(int *)(*(long *)(lVar15 + 0x78) + 0xcf4)
                                           ) * 0x40,puVar1,uVar3);
          bVar16 = bVar16 & bVar7;
        }
      }
      uVar11 = uVar11 + 1;
    } while (param_5 != uVar11);
  }
  cVar8 = (**(code **)(*plVar4 + 0x1c8))(plVar4,param_1 + 0x668,puVar1,uVar3);
  if (*(long *)(this + 0x10) == 0) {
    _IOLog("[IGPU] IG error, pTask not vaild\n");
    _kprintf("[IGPU] IG error, pTask not vaild\n");
    if (*(long *)(this + 0x10) != 0) goto LAB_00052829;
LAB_0005287e:
    bVar18 = true;
  }
  else {
LAB_00052829:
    pIVar12 = IGAccelTask::getBlit2DContext(this,'\x01');
    if (pIVar12 == (IGHardwareExtendedContext *)0x0) goto LAB_0005287e;
    pIVar12 = IGAccelTask::getBlit2DContext(this,'\x01');
    cVar9 = (**(code **)(*plVar4 + 0x1c8))(plVar4,*(long *)(pIVar12 + 0xb0) + 0x138,puVar1,uVar3);
    if (cVar9 == '\0') goto LAB_0005287e;
    bVar18 = false;
  }
  if ((*(long *)(this + 0x10) == 0) ||
     (pIVar12 = IGAccelTask::getBlit3DContext(this,'\x01'),
     pIVar12 == (IGHardwareExtendedContext *)0x0)) {
LAB_000528d9:
    bVar7 = 0;
  }
  else {
    pIVar12 = IGAccelTask::getBlit3DContext(this,'\x01');
    cVar9 = (**(code **)(*plVar4 + 0x1c8))(plVar4,*(long *)(pIVar12 + 0xb0) + 0x138,puVar1,uVar3);
    bVar7 = 1;
    if (cVar9 == '\0') goto LAB_000528d9;
  }
  if ((*(long *)(this + 0x10) == 0) ||
     (lVar15 = IGAccelTask::getDepthResolveContext(this,'\x01'), lVar15 == 0)) {
LAB_00052932:
    bVar13 = 0;
  }
  else {
    lVar15 = IGAccelTask::getDepthResolveContext(this,'\x01');
    cVar9 = (**(code **)(*plVar4 + 0x1c8))(plVar4,*(long *)(lVar15 + 0xb0) + 0x138,puVar1,uVar3);
    bVar13 = 1;
    if (cVar9 == '\0') goto LAB_00052932;
  }
  if ((*(long *)(this + 0x10) != 0) &&
     (lVar15 = IGAccelTask::getColorResolveContext(this,'\x01'), lVar15 != 0)) {
    lVar15 = IGAccelTask::getColorResolveContext(this,'\x01');
    cVar9 = (**(code **)(*plVar4 + 0x1c8))(plVar4,*(long *)(lVar15 + 0xb0) + 0x138,puVar1,uVar3);
    if (cVar9 != '\0') goto LAB_00052982;
  }
  bVar13 = 0;
LAB_00052982:
  if ((bVar16 == 0 || bVar18) || cVar8 != '\x01') {
    bVar7 = 0;
  }
  else {
    bVar7 = bVar7 & bVar13;
  }
  bVar6 = bVar6 & bVar7;
  uVar10 = *(uint *)(param_1 + 0x820);
  if (-1 < (int)uVar10) {
    lVar15 = 0;
    bVar18 = false;
    do {
      bVar14 = bVar18;
      bVar17 = *(char *)(*(long *)(param_1 + 0x7a0 + lVar15 * 8) + 0x78) != '\0';
      lVar15 = lVar15 + 1;
      bVar18 = (bool)(bVar14 | bVar17);
    } while ((ulong)uVar10 + 1 != lVar15);
    if (bVar14 || bVar17) {
      pIVar12 = IGAccelTask::getBlit2DContext(*(IGAccelTask **)(param_2 + 0x150),'\x01');
      bVar16 = (**(code **)(*plVar4 + 0x1c8))(plVar4,*(long *)(pIVar12 + 0xb0) + 0x138,puVar1);
      bVar6 = bVar6 & bVar16;
      uVar10 = *(uint *)(param_1 + 0x820);
    }
    if (-1 < (int)uVar10) {
      uVar11 = 0;
      bVar16 = 0;
      do {
        bVar7 = bVar16;
        bVar18 = *(char *)(*(long *)(param_1 + 0x7a0 + uVar11 * 8) + 0x79) != '\0';
        uVar11 = uVar11 + 1;
        bVar16 = bVar7 | bVar18;
      } while (uVar10 + 1 != uVar11);
      if ((bool)(bVar7 | bVar18)) {
        pIVar12 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)(param_2 + 0x150),'\x01');
        bVar16 = (**(code **)(*plVar4 + 0x1c8))
                           (plVar4,*(long *)(pIVar12 + 0xb0) + 0x138,puVar1,uVar3);
        bVar6 = bVar6 & bVar16;
      }
    }
  }
  if ((bVar6 == 0) &&
     (lVar15 = *(long *)(*(long *)(param_3 + 0x50) + 0xb0),
     cVar8 = (**(code **)(*plVar4 + 0x1f0))(plVar4,0,puVar1,lVar15,*(undefined4 *)(lVar15 + 0x20)),
     cVar8 == '\0')) {
                    // WARNING: Could not recover jumptable at 0x00052ae4. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*plVar4 + 0x188))(plVar4,puVar1);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// process_StoreActions(IGAccelSegmentResourceList&, IntelMTLRender::sCommandBufferEnd const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&, IOAccelEvent&)

ulong __cdecl
process_StoreActions
          (undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6,undefined8 param_7,undefined8 param_8,
          long param_9,long param_10,long param_11,IntelAccelerator *param_12,long param_13)

{
  long lVar1;
  ushort *puVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  ushort uVar6;
  IGAccelResource *this;
  long lVar7;
  byte bVar8;
  ulong uVar9;
  long lVar10;
  long *plVar11;
  long *plVar12;
  uint uVar13;
  ushort uVar14;
  ushort uVar15;
  ushort uVar16;
  int iVar17;
  ulong uVar18;
  bool bVar19;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  
  lVar1 = param_10 + 0x28;
  uVar6 = *(ushort *)(param_10 + 0x18);
  bVar3 = *(byte *)(param_10 + 0x1a);
  bVar4 = *(byte *)(param_10 + 0x1b);
  uVar16 = uVar6 & 0xff;
  if (uVar16 == 0) {
    uVar18 = 0;
    uVar9 = 0;
  }
  else {
    uVar9 = 0;
    uVar18 = 0;
    uVar13 = 0;
    do {
      if ((uVar16 >> (uVar13 & 0x1f) & 1) != 0) {
        uVar9 = process_MSAABufferResolve
                          (param_1_00,param_2_00,param_3_00,param_4_00,param_5_00,param_6,param_7,
                           param_8,param_9,param_11,param_12,(long *)(lVar1 + uVar18 * 0x18),
                           (long *)(lVar1 + (ulong)((int)uVar18 + 1) * 0x18),3,0,param_13);
        uVar9 = uVar9 & 0xffffffff;
        uVar18 = (ulong)((int)uVar18 + 2);
        param_1_00 = extraout_XMM0_Qa;
      }
      uVar16 = uVar16 & ~(ushort)(1 << ((byte)uVar13 & 0x1f));
    } while ((uVar16 != 0) && (bVar19 = uVar13 < 7, uVar13 = uVar13 + 1, bVar19));
  }
  if ((uVar6 & 0x300) == 0) goto LAB_00052d6c;
  iVar17 = (int)uVar18;
  uVar13 = *(uint *)(param_10 + 0x30 + uVar18 * 0x18);
  if (*(uint *)(param_9 + 0xc) <= uVar13) {
    return 9;
  }
  this = *(IGAccelResource **)(*(long *)(param_9 + 0x10) + (ulong)uVar13 * 8);
  if (this == (IGAccelResource *)0x0) {
    return 9;
  }
  plVar12 = (long *)(uVar18 * 0x18 + lVar1);
  lVar10 = *plVar12;
  if (lVar10 == 0) {
    lVar10 = IOAccelResource2::getStorageResource();
    plVar11 = (long *)(lVar10 + 0x180);
    param_1_00 = extraout_XMM0_Qa_00;
  }
  else {
    for (plVar11 = *(long **)(this + 0x240); plVar11 != (long *)0x0; plVar11 = (long *)plVar11[0x15]
        ) {
      if (*plVar11 == lVar10) goto LAB_00052c2f;
    }
    plVar11 = (long *)0x0;
  }
LAB_00052c2f:
  if (*(int *)((long)plVar11 + 0x1c) == 0) {
    if ((uVar6 >> 8 & 1) != 0) goto LAB_00052d31;
  }
  else {
    uVar16 = *(ushort *)(param_10 + 0x34 + uVar18 * 0x18);
    uVar14 = (*(short *)(param_10 + 0x26) + uVar16) - 1;
    if ((*(byte *)((long)plVar11 + 0xa1) & 1) == 0) {
      if (uVar16 <= uVar14) {
        bVar5 = *(byte *)(param_10 + 0x37 + uVar18 * 0x18);
        bVar8 = bVar5 & 0x1f;
        lVar10 = plVar11[0xb];
        lVar7 = plVar11[0xc];
        uVar15 = uVar16;
        do {
          puVar2 = (ushort *)(lVar10 + (ulong)uVar15 * 2);
          *puVar2 = *puVar2 & ((ushort)(-2 << bVar8) | (ushort)(0xfffffffe >> 0x20 - bVar8));
          puVar2 = (ushort *)(lVar7 + (ulong)uVar15 * 2);
          *puVar2 = *puVar2 | (ushort)(1 << (bVar5 & 0x1f));
          uVar15 = uVar15 + 1;
        } while (uVar15 <= uVar14);
      }
    }
    else if (uVar16 <= uVar14) {
      bVar5 = *(byte *)(param_10 + 0x37 + uVar18 * 0x18);
      lVar10 = plVar11[0xb];
      lVar7 = plVar11[0xc];
      bVar8 = bVar5 & 0x1f;
      uVar15 = uVar16;
      do {
        puVar2 = (ushort *)(lVar10 + (ulong)uVar15 * 2);
        *puVar2 = *puVar2 | (ushort)(1 << (bVar5 & 0x1f));
        puVar2 = (ushort *)(lVar7 + (ulong)uVar15 * 2);
        *puVar2 = *puVar2 & ((ushort)(-2 << bVar8) | (ushort)(0xfffffffe >> 0x20 - bVar8));
        uVar15 = uVar15 + 1;
      } while (uVar15 <= uVar14);
    }
    if ((uVar6 >> 8 & 1) != 0) {
      IGAccelResource::submitDepthResolve
                (this,(long)plVar11,param_12,*(IGAccelTask **)(param_11 + 8),param_13,0x18,uVar16,
                 uVar14,(ushort)(1 << (*(byte *)(param_10 + 0x37 + uVar18 * 0x18) & 0x1f)),
                 (int *)0x0);
      param_1_00 = extraout_XMM0_Qa_01;
LAB_00052d31:
      uVar9 = process_MSAABufferResolve
                        (param_1_00,param_2_00,param_3_00,param_4_00,param_5_00,param_6,param_7,
                         param_8,param_9,param_11,param_12,plVar12,
                         (long *)((ulong)(iVar17 + 1) * 0x18 + lVar1),(ulong)bVar3,1,param_13);
      uVar9 = uVar9 & 0xffffffff;
      uVar18 = (ulong)(iVar17 + 2);
      param_1_00 = extraout_XMM0_Qa_02;
      goto LAB_00052d6c;
    }
  }
  uVar18 = (ulong)(iVar17 + 1);
LAB_00052d6c:
  if ((uVar6 >> 10 & 1) != 0) {
    uVar9 = process_MSAABufferResolve
                      (param_1_00,param_2_00,param_3_00,param_4_00,param_5_00,param_6,param_7,
                       param_8,param_9,param_11,param_12,(long *)(uVar18 * 0x18 + lVar1),
                       (long *)((ulong)((int)uVar18 + 1) * 0x18 + lVar1),(ulong)bVar4,2,param_13);
  }
  return uVar9;
}



// WARNING: Unknown calling convention: __cdecl
// process_MSAABufferResolve(IGAccelSegmentResourceList&, IGAccelCommandDescriptor&,
// IOGraphicsAccelerator2&, IntelMTLRender::sResolveResourceDesc const&,
// IntelMTLRender::sResolveResourceDesc const&, IntelMTLRender::eResolveFilter, BufferType,
// IOAccelEvent&)

undefined8 __cdecl
process_MSAABufferResolve
          (undefined8 param_1,undefined8 param_2,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6,undefined8 param_7,undefined8 param_8,
          long param_9,long param_10,IntelAccelerator *param_11,long *param_12,long *param_13,
          char *param_14,int param_15,undefined8 param_16)

{
  undefined4 uVar1;
  IGAccelResource *pIVar2;
  byte bVar3;
  undefined4 uVar4;
  undefined6 uVar5;
  undefined8 uVar6;
  ulong uVar7;
  ushort uVar8;
  IGAccelResource *pIVar9;
  undefined8 *puVar10;
  byte bVar11;
  long lVar12;
  uint uVar13;
  byte bVar14;
  undefined8 uVar15;
  long *plVar16;
  long *plVar17;
  float fVar18;
  float extraout_XMM0_Db;
  float fVar19;
  float fVar20;
  float fVar21;
  long local_200;
  undefined8 local_1f8;
  undefined8 local_1f0;
  undefined8 local_1e8;
  long local_1e0;
  undefined8 local_1d8;
  long local_1d0;
  undefined8 local_1c8;
  IGAccelResource *local_1c0;
  long local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  long local_198;
  undefined8 local_190;
  long local_188;
  undefined8 local_180;
  IGAccelResource *local_178;
  undefined8 local_170;
  undefined8 local_168;
  undefined1 local_160;
  undefined4 local_15e;
  undefined4 local_158;
  uint local_154;
  undefined8 local_150;
  undefined1 local_148;
  ulong local_140;
  ulong local_138;
  long local_130;
  ulong local_128;
  ulong local_120;
  long local_118;
  undefined8 local_f8;
  undefined8 local_f0;
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  IntelAccelerator *local_c8;
  long local_c0;
  long *local_b8;
  ulong local_b0;
  ulong local_a8;
  undefined8 *local_a0;
  long *local_98;
  uint local_8c;
  IGAccelResource *local_88;
  IGAccelResource *local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  long local_38;
  
  fVar21 = (float)((ulong)param_3_00 >> 0x20);
  uVar13 = (uint)param_14;
  local_38 = *(long *)__got::___stack_chk_guard;
  uVar15 = 9;
  if (*(uint *)(param_9 + 0xc) <= *(uint *)(param_12 + 1)) goto LAB_00053575;
  pIVar2 = *(IGAccelResource **)(*(long *)(param_9 + 0x10) + (ulong)*(uint *)(param_12 + 1) * 8);
  if (((pIVar2 == (IGAccelResource *)0x0) || (*(uint *)(param_9 + 0xc) <= *(uint *)(param_13 + 1)))
     || (local_80 = *(IGAccelResource **)
                     (*(long *)(param_9 + 0x10) + (ulong)*(uint *)(param_13 + 1) * 8),
        local_80 == (IGAccelResource *)0x0)) goto LAB_00053575;
  local_98 = param_12;
  local_8c = uVar13;
  local_88 = pIVar2;
  if (*param_12 == 0) {
    lVar12 = IOAccelResource2::getStorageResource();
    plVar16 = (long *)(lVar12 + 0x180);
  }
  else {
    for (plVar16 = *(long **)(pIVar2 + 0x240); plVar16 != (long *)0x0;
        plVar16 = (long *)plVar16[0x15]) {
      if (*plVar16 == *param_12) goto LAB_00052e80;
    }
    plVar16 = (long *)0x0;
  }
LAB_00052e80:
  local_c8 = param_11;
  local_c0 = param_10;
  local_b8 = param_13;
  if (*param_13 == 0) {
    lVar12 = IOAccelResource2::getStorageResource();
    plVar17 = (long *)(lVar12 + 0x180);
  }
  else {
    for (plVar17 = *(long **)(local_80 + 0x240); plVar17 != (long *)0x0;
        plVar17 = (long *)plVar17[0x15]) {
      if (*plVar17 == *param_13) goto LAB_00052ed3;
    }
    plVar17 = (long *)0x0;
  }
LAB_00052ed3:
  ___bzero(&local_200,0x138);
  IGVector<>::grow((IGVector<> *)&local_140,4);
  local_128 = 0;
  local_120 = 0;
  local_118 = 0;
  IGVector<>::grow((IGVector<> *)&local_128,4);
  pIVar2 = local_88;
  local_200 = 0;
  local_1f8 = 0;
  local_1f0 = 0;
  local_1e8 = 0;
  local_1e0 = 0;
  local_1d8 = 0;
  local_1d0 = 0;
  local_1c0 = (IGAccelResource *)0x0;
  local_1c8 = 0x100000000;
  local_1b8 = 0;
  local_1b0 = 0;
  local_1a8 = 0;
  local_1a0 = 0;
  local_198 = 0;
  local_190 = 0;
  local_188 = 0;
  local_178 = (IGAccelResource *)0x0;
  local_180 = 0x100000000;
  local_170 = 0;
  local_168 = 0;
  local_15e = 0;
  local_160 = 0;
  local_158 = 0;
  local_150 = 0;
  local_148 = 0;
  local_140 = 0;
  local_128 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  local_d8 = 0;
  local_d0 = 0;
  AddSrcResourceEvents((IGVector<> *)&local_140,(long)local_88);
  pIVar9 = (IGAccelResource *)IOAccelResource2::getStorageResource();
  if (pIVar9 != pIVar2) {
    AddSrcResourceEvents((IGVector<> *)&local_140,(long)pIVar9);
  }
  pIVar2 = local_80;
  AddDstResourceEvents((IGVector<> *)&local_140,(long)local_80);
  pIVar9 = (IGAccelResource *)IOAccelResource2::getStorageResource();
  if (pIVar9 != pIVar2) {
    AddDstResourceEvents((IGVector<> *)&local_140,(long)pIVar9);
  }
  local_1c0 = local_88;
  local_178 = pIVar2;
  local_1f0 = CONCAT44(local_1f0._4_4_,0x23);
  local_1a8 = CONCAT44(local_1a8._4_4_,5);
  if ((local_140 != local_138) ||
     (uVar15 = IGVector<>::grow((IGVector<> *)&local_140,local_140 * 2), (char)uVar15 != '\0')) {
    *(undefined8 *)(local_130 + local_140 * 8) = param_16;
    local_140 = local_140 + 1;
  }
  if ((local_128 != local_120) ||
     (uVar15 = IGVector<>::grow((IGVector<> *)&local_128,local_128 * 2), (char)uVar15 != '\0')) {
    *(undefined8 *)(local_118 + local_128 * 8) = param_16;
    local_128 = local_128 + 1;
  }
  IGAccelResource::get_tex_data(local_88,&local_200,(undefined4 *)&local_1f8);
  uVar15 = 10;
  if (local_200 != 0) {
    local_200 = local_200 + (ulong)*(uint *)(plVar16 + 0x11);
    local_1f0 = CONCAT44(*(undefined4 *)((long)plVar16 + 0x8c),(undefined4)local_1f0);
    local_1e8._0_6_ = CONCAT24(*(undefined2 *)((long)local_98 + 0xc),(int)plVar16[0x12]);
    local_1f8 = CONCAT44(local_1f8._4_4_,(int)plVar16[1]);
    local_1c8 = CONCAT44(local_1c8._4_4_,(int)plVar16[7]);
    IGAccelResource::get_tex_data(pIVar2,&local_1b8,(undefined4 *)&local_1b0);
    uVar6 = local_180;
    if (local_1b8 != 0) {
      local_1b8 = local_1b8 + (ulong)*(uint *)(plVar17 + 0x11);
      local_1a8 = CONCAT44(*(undefined4 *)((long)plVar17 + 0x8c),(undefined4)local_1a8);
      local_1a0._0_6_ = CONCAT24(*(undefined2 *)((long)local_b8 + 0xc),(int)plVar17[0x12]);
      local_1a0 = (ulong)CONCAT16(*(undefined1 *)((long)local_b8 + 0xf),(undefined6)local_1a0);
      uVar1 = (undefined4)plVar17[1];
      local_1b0 = CONCAT44(local_1b0._4_4_,uVar1);
      local_180 = CONCAT44(CONCAT31(local_180._5_3_,(char)plVar17[0x13]),(int)plVar17[7]);
      uVar7 = local_180;
      uVar5 = (undefined6)local_1f8;
      uVar4 = (undefined4)local_1f8;
      if (param_15 == 0) {
        if ((local_1c0 != (IGAccelResource *)0x0) && (1 < *(byte *)(plVar16 + 0x14))) {
          local_1c8 = local_1c8 | 0x10000000000;
          if ((*(byte *)((long)plVar16 + 0xa1) & 4) == 0) {
            local_1d0 = 0;
          }
          else {
            local_1d0 = (ulong)*(uint *)(plVar16 + 10) + local_200;
          }
          local_1e0 = local_200 + (ulong)*(uint *)(plVar16 + 8);
          local_1d8 = CONCAT44(local_1d8._4_4_,*(undefined4 *)((long)plVar16 + 0x44));
        }
        if ((local_178 != (IGAccelResource *)0x0) && (1 < *(byte *)(plVar17 + 0x14))) {
          local_180._5_1_ = SUB81(uVar6,5);
          local_180._6_2_ = SUB82(uVar6,6);
          local_180._0_5_ = (undefined5)uVar7;
          local_180 = CONCAT26(local_180._6_2_,CONCAT15(local_180._5_1_,(undefined5)local_180)) |
                      0x10000000000;
          if ((*(byte *)((long)plVar17 + 0xa1) & 4) == 0) {
            local_188 = 0;
          }
          else {
            local_188 = (ulong)*(uint *)(plVar17 + 10) + local_1b8;
          }
          local_198 = local_1b8 + (ulong)*(uint *)(plVar17 + 8);
          local_190 = CONCAT44(local_190._4_4_,*(undefined4 *)((long)plVar17 + 0x44));
        }
        local_180._0_6_ =
             CONCAT15(local_180._5_1_ & 0xf7 | *(char *)((long)plVar17 + 0x56) * '\x02' & 8U,
                      (undefined5)local_180);
LAB_000532b4:
        local_1f8 = CONCAT26((short)local_98[2],uVar5);
        local_1b0 = CONCAT26((short)local_b8[2],(undefined6)local_1b0);
        local_1f8._0_5_ = CONCAT14(*(undefined1 *)((long)plVar16 + 0x14),uVar4);
        local_1b0._0_5_ = CONCAT14(*(undefined1 *)((long)plVar17 + 0x14),uVar1);
        bVar14 = 0;
      }
      else {
        if (param_15 != 2) goto LAB_000532b4;
        local_1b0 = CONCAT26(0x143,(undefined6)local_1b0);
        local_1f8 = CONCAT26(0x143,uVar5);
        local_1b0._0_5_ = CONCAT14(1,uVar1);
        local_1f8._0_5_ = CONCAT14(1,uVar4);
        local_154 = *(uint *)((long)plVar16 + 0x2c);
        local_200 = local_200 + (ulong)local_154;
        local_1b8 = local_1b8 + (ulong)*(uint *)((long)plVar17 + 0x2c);
        bVar14 = 4;
      }
      if (*local_b8 == 0) {
        (**(code **)(*(long *)local_80 + 0x168))(local_80,0,*(undefined1 *)((long)local_b8 + 0xf));
      }
      local_1f8._0_6_ = CONCAT15(*(undefined1 *)((long)plVar16 + 0x16),(undefined5)local_1f8);
      local_1b0._0_6_ = CONCAT15(1,(undefined5)local_1b0);
      uVar8 = (ushort)local_15e;
      if (param_15 == 0) {
        uVar8 = uVar8 & 0xfbf8 | 1;
      }
      else {
        if ((char)local_8c == '\x02') {
          uVar8 = uVar8 & 0xfff8 | 5;
        }
        else if ((local_8c & 0xff) == 1) {
          uVar8 = uVar8 & 0xfff8 | 4;
        }
        else {
          uVar8 = uVar8 & 0xfff8;
        }
        uVar8 = uVar8 | 0x400;
      }
      bVar3 = (param_15 == 1) * '\x02';
      bVar11 = local_1c8._5_1_ & 0xf9;
      local_1c8._0_6_ = CONCAT15(bVar11 | bVar3 | bVar14,(undefined5)local_1c8);
      local_180._0_6_ = CONCAT15(local_180._5_1_ & 0xf9 | bVar3 | bVar14,(undefined5)local_180);
      local_a0 = (undefined8 *)0x0;
      local_a8 = 0;
      local_b0 = 0;
      local_15e._0_2_ = uVar8;
      puVar10 = (undefined8 *)
                _IOMallocTypeVarImpl
                          (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                            kalloc_type_view_24,0x20);
      if (puVar10 != (undefined8 *)0x0) {
        local_a8 = 1;
        local_b0 = 1;
        local_a0 = puVar10;
      }
      fVar18 = (float)(int)((float)(local_1f0 >> 0x20) + 0.5);
      fVar20 = (float)(local_1e8 & 0xffffffff) + 0.5;
      fVar19 = (float)(int)fVar20;
      uVar15 = 0;
      *puVar10 = 0;
      *(float *)(puVar10 + 1) = fVar18;
      *(float *)((long)puVar10 + 0xc) = fVar19;
      puVar10[2] = 0;
      puVar10[3] = puVar10[1];
      local_15e = CONCAT22(local_15e._2_2_,(ushort)local_15e) & 0xffffff87 | 0x18;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      local_60 = 0;
      local_78 = 0x6000000080;
      local_70 = 0x2000000040;
      local_68 = 0x800000010;
      local_160 = *(undefined1 *)((long)&local_78 + (ulong)(*(uint *)(plVar17 + 2) >> 4 & 0x3c));
      IntelAccelerator::submitBlit
                (CONCAT44((float)(int)extraout_XMM0_Db,fVar18),CONCAT44((float)(int)fVar21,fVar19),
                 CONCAT44(fVar21,fVar20),param_4_00,param_5_00,param_6,param_7,param_8,local_c8,
                 &local_200,&local_b0,*(IGAccelTask **)(local_c0 + 8),0,param_14);
      if (local_a0 != (undefined8 *)0x0) {
        lVar12 = local_a8 << 5;
        if (lVar12 < 0) {
          lVar12 = -0x8000000000000000;
        }
        if (local_a8 >> 0x3b != 0) {
          lVar12 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                            kalloc_type_view_29,local_a0,lVar12);
      }
    }
  }
  if (local_118 != 0) {
    lVar12 = local_120 * 8;
    if (lVar12 < 0) {
      lVar12 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_120) {
      lVar12 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_118,lVar12);
  }
  if (local_130 != 0) {
    lVar12 = local_138 * 8;
    if (lVar12 < 0) {
      lVar12 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_138) {
      lVar12 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_130,lVar12);
  }
LAB_00053575:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar15;
}



// IGAccelResource::getResourceInfoEntry(unsigned long long)

long * __thiscall IGAccelResource::getResourceInfoEntry(IGAccelResource *this,long param_1)

{
  long lVar1;
  long *plVar2;
  
  if (param_1 == 0) {
    lVar1 = IOAccelResource2::getStorageResource();
    plVar2 = (long *)(lVar1 + 0x180);
  }
  else {
    for (plVar2 = *(long **)(this + 0x240); plVar2 != (long *)0x0; plVar2 = (long *)plVar2[0x15]) {
      if (*plVar2 == param_1) {
        return plVar2;
      }
    }
    plVar2 = (long *)0x0;
  }
  return plVar2;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcResourceEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x16);
    lVar4 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)param_1;
    if (lVar3 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar3 * 2);
      if ((char)uVar2 != '\0') {
        lVar3 = *(long *)param_1;
        goto LAB_000536db;
      }
    }
    else {
LAB_000536db:
      *(long *)param_1 = lVar3 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar3 * 8) = (ulong)bVar1 * 0x40 + lVar4;
    }
    lVar4 = (ulong)*(byte *)(param_2 + 0x15) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    lVar4 = *(long *)(param_2 + 0x90);
  }
  lVar3 = *(long *)(param_1 + 0x18);
  if (lVar3 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
    if ((char)uVar2 == '\0') goto LAB_00053730;
    lVar3 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar3 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4;
LAB_00053730:
  lVar4 = *(long *)(param_2 + 0x40);
  if (lVar4 != 0) {
    lVar3 = *(long *)(param_1 + 0x18);
    if (lVar3 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar3 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar3 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4 + 0x38;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar5 = *(long *)param_1;
    if (lVar5 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar5 * 2);
      if ((char)uVar2 != '\0') {
        lVar5 = *(long *)param_1;
        goto LAB_000537b9;
      }
    }
    else {
LAB_000537b9:
      *(long *)param_1 = lVar5 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar4 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_000537f5;
    }
    else {
LAB_000537f5:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(param_1 + 0x18,lVar6 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_0005383e;
    }
    else {
LAB_0005383e:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_0005388b;
    lVar5 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_0005388b:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



// IGHeapsAccess::lock(kHeapType, IGAccelResource*)

bool __thiscall IGHeapsAccess::lock(IGHeapsAccess *this,ulong param_1,long *param_2)

{
  long lVar1;
  ulong uVar2;
  
  uVar2 = param_1 & 0xffffffff;
  if (this[uVar2 + 0x48] != (IGHeapsAccess)0x0) {
    if (*(int *)(this + uVar2 * 4) == *(int *)(param_2[7] + 0x100)) {
      return true;
    }
    lVar1 = uVar2 * 0x10;
    if (*(long *)(this + lVar1 + 0x50) != 0) {
      IOAccelResource2::releaseKernelData();
      *(undefined8 *)(this + lVar1 + 0x50) = 0;
      *(undefined8 *)(this + lVar1 + 0x58) = 0;
    }
    if (*(long **)(this + uVar2 * 8 + 0x18) != (long *)0x0) {
      (**(code **)(**(long **)(this + uVar2 * 8 + 0x18) + 0x178))();
    }
    *(undefined8 *)(this + uVar2 * 8 + 0x18) = 0;
    this[uVar2 + 0x48] = (IGHeapsAccess)0x0;
    *(undefined4 *)(this + uVar2 * 4) = 0;
  }
  (**(code **)(*param_2 + 0x170))(param_2);
  *(long **)(this + uVar2 * 8 + 0x18) = param_2;
  *(undefined4 *)(this + uVar2 * 4) = *(undefined4 *)(param_2[7] + 0x100);
  lVar1 = IOAccelResource2::getKernelData();
  *(long *)(this + uVar2 * 0x10 + 0x50) = lVar1;
  *(undefined8 *)(this + uVar2 * 0x10 + 0x58) =
       *(undefined8 *)
        (*(long *)(this + uVar2 * 8 + 0x18) + 200 +
        (ulong)(*(long *)(*(long *)(this + uVar2 * 8 + 0x18) + 0x88) == 0) * 8);
  this[uVar2 + 0x48] = (IGHeapsAccess)(lVar1 != 0);
  return lVar1 != 0;
}



// IOAccelResource2::getGPUVirtualAddressForUserProcess() const

long __thiscall IOAccelResource2::getGPUVirtualAddressForUserProcess(IOAccelResource2 *this)

{
  IOAccelResource2 IVar1;
  long lVar2;
  ulong uVar3;
  
  lVar2 = (**(code **)(**(long **)(this + 0x40) + 0x130))();
  IVar1 = this[0x14];
  if (IVar1 != (IOAccelResource2)0x0) {
    if (IVar1 == (IOAccelResource2)0x82) {
      uVar3 = (ulong)*(uint *)(this + 0xfc);
      goto LAB_00053a03;
    }
    if (IVar1 != (IOAccelResource2)0x80) {
      uVar3 = 0;
      goto LAB_00053a03;
    }
  }
  uVar3 = *(ulong *)(this + 0xf8);
LAB_00053a03:
  return uVar3 + lVar2;
}



// IGAccelCommandDescriptor::checkVirtualOffset(void*, unsigned long)

long __thiscall
IGAccelCommandDescriptor::checkVirtualOffset
          (IGAccelCommandDescriptor *this,long param_1,ulong param_2)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(this + 0x58);
  if ((lVar1 == 0) ||
     (uVar2 = *(long *)(lVar1 + 200 + (ulong)(*(long *)(lVar1 + 0x88) == 0) * 8) -
              (ulong)*(uint *)(this + 0x6c), uVar2 < param_2)) {
    lVar1 = 0;
  }
  else {
    uVar3 = (ulong)(param_1 - *(long *)(this + 0x20)) >> 2 & 0xffffffff;
    lVar1 = 0;
    if (uVar3 <= uVar2 - param_2 >> 2) {
      lVar1 = *(long *)(this + 0x20) + uVar3 * 4;
    }
  }
  return lVar1;
}



// IGScheduler::MetaClass::MetaClass()

void __thiscall IGScheduler::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGScheduler",(OSMetaClass *)__got::gMetaClass,0x458)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler::MetaClass::~MetaClass()

void __thiscall IGScheduler::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGScheduler::IGScheduler(OSMetaClass const*)

void __thiscall IGScheduler::IGScheduler(IGScheduler *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGScheduler;
  return;
}



// IGScheduler::~IGScheduler()

void __thiscall IGScheduler::~IGScheduler(IGScheduler *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGScheduler::~IGScheduler()

void __thiscall IGScheduler::~IGScheduler(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGScheduler::~IGScheduler()

void __thiscall IGScheduler::~IGScheduler(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGScheduler::getMetaClass() const

undefined1 * IGScheduler::getMetaClass(void)

{
  return &gMetaClass;
}



// IGScheduler::MetaClass::MetaClass()

void __thiscall IGScheduler::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass((OSMetaClass *)this,"IGScheduler",(OSMetaClass *)__got::gMetaClass,0x458)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGScheduler::MetaClass::alloc() const

undefined8 IGScheduler::MetaClass::alloc(void)

{
  return 0;
}



// IGScheduler::operator new(unsigned long)

void * __thiscall IGScheduler::operator_new(IGScheduler *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGScheduler_ktv,this);
  return pvVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::operator delete(void*, unsigned long)

void __cdecl IGScheduler::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGScheduler_ktv,param_1,param_2);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::create(IntelAccelerator*)

IGGuC * __cdecl IGScheduler::create(long param_1)

{
  uint uVar1;
  IGGuC *pIVar2;
  IGScheduler5 *pIVar3;
  IGScheduler4 *pIVar4;
  
  uVar1 = *(uint *)(&DAT_000011c0 + param_1) >> 0x16 & 7;
  if (uVar1 == 5) {
    pIVar3 = IGScheduler5::withAccelerator(param_1);
    return (IGGuC *)pIVar3;
  }
  if (uVar1 != 4) {
    if (uVar1 == 3) {
      pIVar2 = IGGuC::withAccelerator(param_1);
      return pIVar2;
    }
    create();
    return (IGGuC *)0x0;
  }
  pIVar4 = IGScheduler4::withAccelerator(param_1);
  return (IGGuC *)pIVar4;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::schedulerType(unsigned char)

undefined1 __cdecl IGScheduler::schedulerType(byte param_1)

{
  undefined1 uVar1;
  
  uVar1 = (char)(0x10202000000 >> (param_1 * '\b' & 0x3f));
  if (5 < param_1) {
    uVar1 = 0;
  }
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::schedulerName(unsigned char)

char * __cdecl IGScheduler::schedulerName(char param_1)

{
  if ((byte)(param_1 - 3U) < 3) {
    return &DAT_001136d0 + *(int *)(&DAT_001136d0 + (long)(char)(param_1 - 3U) * 4);
  }
  return "Unknown Scheduler";
}



// IGScheduler::initWithOptions(unsigned int, unsigned long long, IOGraphicsAccelerator2*)

undefined8 __thiscall
IGScheduler::initWithOptions(IGScheduler *this,uint param_1,undefined8 param_2,long param_3)

{
  char cVar1;
  long lVar2;
  long *plVar3;
  IGSemaphoreWaitBufferQueue *pIVar4;
  undefined **ppuVar5;
  ulong uVar6;
  
  cVar1 = (**(code **)(__got::vtable + 0x98))();
  if (cVar1 != '\0') {
    *(uint *)(this + 0xc) = param_1;
    *(long *)(this + 0x10) = param_3;
    *(undefined8 *)(this + 0x18) = param_2;
    this[0x20] = (IGScheduler)0x0;
    *(undefined8 *)(this + 0x450) = 0;
    *(undefined4 *)(this + 0x230) = 0xffffffff;
    if (((param_1 & 2) == 0) || ((*(uint *)(&DAT_000011c0 + param_3) & 0x18000) != 0)) {
      *(undefined8 *)(this + 0x228) = 0;
      ___bzero(this + 0x28,0x200);
    }
    else {
      *(undefined8 *)(this + 0x228) = 0x2b;
      ___bzero(this + 0x28,0x200);
      uVar6 = 0;
      do {
        ppuVar5 = &IG_STAMP_INDEX_TO_HWCS_LUT;
        if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x10)) & 0x18000) != 0) {
          ppuVar5 = (undefined **)&IG_STAMP_INDEX_TO_HWCS_LUT_SCI;
        }
        pIVar4 = IGSemaphoreWaitBufferQueue::withOptions
                           (*(undefined1 *)((long)ppuVar5 + (uVar6 & 0xffffffff)),
                            *(undefined8 *)(*(long *)(this + 0x10) + 0x380));
        *(IGSemaphoreWaitBufferQueue **)(this + uVar6 * 8 + 0x28) = pIVar4;
        if (pIVar4 == (IGSemaphoreWaitBufferQueue *)0x0) goto LAB_00053cba;
        uVar6 = uVar6 + 1;
      } while (uVar6 < *(ulong *)(this + 0x228));
    }
    lVar2 = OSSet::withCapacity(2);
    *(long *)(this + 0x438) = lVar2;
    if (lVar2 != 0) {
      lVar2 = IOTimerEventSource::timerEventSource((OSObject *)this,handlePeriodicTimerInterrupt);
      *(long *)(this + 0x448) = lVar2;
      if (lVar2 != 0) {
        plVar3 = (long *)(**(code **)(**(long **)(this + 0x10) + 0x688))();
        (**(code **)(*plVar3 + 0x140))(plVar3,*(undefined8 *)(this + 0x448));
        lVar2 = _IOLockAlloc();
        *(long *)(this + 0x440) = lVar2;
        if (lVar2 != 0) {
          return CONCAT71((int7)((ulong)lVar2 >> 8),1);
        }
      }
    }
LAB_00053cba:
    finalize(this);
  }
  return 0;
}



// IGScheduler::finalize()

void __thiscall IGScheduler::finalize(IGScheduler *this)

{
  long lVar1;
  long *plVar2;
  ulong uVar3;
  ulong uVar4;
  
  if (*(long **)(this + 0x448) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x448) + 0x218))();
    lVar1 = (**(code **)(*(long *)this + 0x228))(this);
    if (lVar1 != 0) {
      plVar2 = (long *)(**(code **)(*(long *)this + 0x228))(this);
      (**(code **)(*plVar2 + 0x148))(plVar2,*(undefined8 *)(this + 0x448));
    }
    if (*(long **)(this + 0x448) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x448) + 0x28))();
    }
    *(undefined8 *)(this + 0x448) = 0;
  }
  if (*(long **)(this + 0x438) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x438) + 0x28))();
  }
  *(undefined8 *)(this + 0x438) = 0;
  if (*(long *)(this + 0x440) != 0) {
    _IOLockFree();
    *(undefined8 *)(this + 0x440) = 0;
  }
  uVar3 = *(ulong *)(this + 0x228);
  if (uVar3 != 0) {
    uVar4 = 0;
    do {
      if (*(long **)(this + uVar4 * 8 + 0x28) != (long *)0x0) {
        (**(code **)(**(long **)(this + uVar4 * 8 + 0x28) + 0x28))();
        uVar3 = *(ulong *)(this + 0x228);
      }
      *(undefined8 *)(this + uVar4 * 8 + 0x28) = 0;
      uVar4 = uVar4 + 1;
    } while (uVar4 < uVar3);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::handlePeriodicTimerInterrupt(IOTimerEventSource*)

void __cdecl IGScheduler::handlePeriodicTimerInterrupt(long param_1)

{
  long *plVar1;
  long *plVar2;
  long lVar3;
  
  _IOLockLock(*(undefined8 *)(param_1 + 0x440));
  plVar1 = (long *)OSCollectionIterator::withCollection(*(OSCollection **)(param_1 + 0x438));
  if (plVar1 != (long *)0x0) {
    while (plVar2 = (long *)(**(code **)(*plVar1 + 0x128))(plVar1), plVar2 != (long *)0x0) {
      (**(code **)(*plVar2 + 0x1e0))(plVar2,0,0,0);
    }
    (**(code **)(*plVar1 + 0x28))(plVar1);
  }
  lVar3 = (**(code **)(**(long **)(param_1 + 0x438) + 0x1f0))();
  if (lVar3 != 0) {
    (**(code **)(**(long **)(param_1 + 0x448) + 0x1d8))(*(long **)(param_1 + 0x448),1000);
  }
  _IOLockUnlock(*(undefined8 *)(param_1 + 0x440));
  return;
}



// IGScheduler::free()

void __thiscall IGScheduler::free(IGScheduler *this,void *param_1)

{
  finalize(this);
                    // WARNING: Could not recover jumptable at 0x00053ed0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGScheduler::canLoadFirmware(IntelAccelerator*)

ulong __cdecl IGScheduler::canLoadFirmware(IntelAccelerator *param_1)

{
  undefined1 uVar1;
  uint uVar2;
  ulong uVar3;
  undefined7 extraout_var;
  
  uVar2 = *(uint *)(param_1 + 0x11c0) >> 0x16 & 7;
  if (uVar2 == 4) {
    uVar1 = IGScheduler4::canLoadFirmware();
    return CONCAT71(extraout_var,uVar1);
  }
  if (uVar2 == 3) {
    uVar3 = IGGuC::canLoadFirmware(param_1);
    return uVar3;
  }
  return 0;
}



// IGScheduler::initFirmware()

undefined8 __thiscall IGScheduler::initFirmware(IGScheduler *this)

{
  char cVar1;
  undefined8 uVar2;
  
  uVar2 = 0xe00002c7;
  if ((((byte)this[0xc] & 1) != 0) && (uVar2 = 0, this[0x20] == (IGScheduler)0x0)) {
    cVar1 = (**(code **)(*(long *)this + 0x230))(this);
    uVar2 = 0xe00002bc;
    if (cVar1 != '\0') {
      this[0x20] = (IGScheduler)0x1;
      uVar2 = 0;
    }
  }
  return uVar2;
}



// IGScheduler::loadFirmware()

undefined8 IGScheduler::loadFirmware(void)

{
  return 0;
}



// IGScheduler::enableOption(unsigned int)

void __thiscall IGScheduler::enableOption(IGScheduler *this,uint param_1)

{
  *(uint *)(this + 0xc) = *(uint *)(this + 0xc) | param_1;
  return;
}



// IGScheduler::disableOption(unsigned int)

void __thiscall IGScheduler::disableOption(IGScheduler *this,uint param_1)

{
  *(uint *)(this + 0xc) = *(uint *)(this + 0xc) & ~param_1;
  return;
}



// IGScheduler::getNextStampIndex(IGHwCsType)

undefined4 __thiscall IGScheduler::getNextStampIndex(undefined8 param_1_00,undefined4 param_2)

{
  return param_2;
}



// IGScheduler::releaseSemaphoreWaitBuffers(IGAccelTask*)

void __thiscall IGScheduler::releaseSemaphoreWaitBuffers(IGScheduler *this,long param_1)

{
  ulong uVar1;
  
  if (*(long *)(this + 0x228) != 0) {
    uVar1 = 0;
    do {
      IGSemaphoreWaitBufferQueue::releaseBuffers
                (*(IGSemaphoreWaitBufferQueue **)(this + uVar1 * 8 + 0x28),param_1);
      uVar1 = uVar1 + 1;
    } while (uVar1 < *(ulong *)(this + 0x228));
  }
  return;
}



// IGScheduler::getSemaphoreWaitBuffer(IGAccelFIFOChannel*, unsigned int, int)

void __thiscall
IGScheduler::getSemaphoreWaitBuffer(IGScheduler *this,long *param_1,undefined4 param_2,uint param_3)

{
  IGSemaphoreWaitBufferQueue::getBuffer
            (*(IGSemaphoreWaitBufferQueue **)(this + (long)(int)param_1[4] * 8 + 0x28),param_1,
             param_2,param_3);
  return;
}



// IGScheduler::getWorkLoop() const

void __thiscall IGScheduler::getWorkLoop(IGScheduler *this)

{
                    // WARNING: Could not recover jumptable at 0x00053fc8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(this + 0x10) + 0x688))();
  return;
}



// IGScheduler::updateKnobs()

void IGScheduler::updateKnobs(void)

{
  return;
}



// IGScheduler::systemWillSleep()

void __thiscall IGScheduler::systemWillSleep(IGScheduler *this)

{
  _IOLockLock(*(undefined8 *)(this + 0x440));
  (**(code **)(**(long **)(this + 0x448) + 0x218))();
  (**(code **)(**(long **)(this + 0x448) + 0x158))();
  *(undefined8 *)(this + 0x450) = 0;
  _IOLockUnlock(*(undefined8 *)(this + 0x440));
  return;
}



// IGScheduler::systemDidWake()

void IGScheduler::systemDidWake(void)

{
  return;
}



// IGScheduler::enablePeriodicEventTimerInterrupt(IOInterruptEventSource*)

void __thiscall IGScheduler::enablePeriodicEventTimerInterrupt(IGScheduler *this,undefined8 param_1)

{
  long lVar1;
  
  _IOLockLock(*(undefined8 *)(this + 0x440));
  (**(code **)(**(long **)(this + 0x438) + 0x1c0))(*(long **)(this + 0x438),param_1);
  lVar1 = *(long *)(this + 0x450);
  *(long *)(this + 0x450) = lVar1 + 1;
  if (lVar1 == 0) {
    (**(code **)(**(long **)(this + 0x448) + 0x150))();
    (**(code **)(**(long **)(this + 0x448) + 0x1d8))(*(long **)(this + 0x448),1000);
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x440));
  return;
}



// IGScheduler::disablePeriodicEventTimerInterrupt(IOInterruptEventSource*)

void __thiscall
IGScheduler::disablePeriodicEventTimerInterrupt(IGScheduler *this,undefined8 param_1)

{
  long lVar1;
  
  _IOLockLock(*(undefined8 *)(this + 0x440));
  (**(code **)(**(long **)(this + 0x438) + 0x1d8))(*(long **)(this + 0x438),param_1);
  lVar1 = *(long *)(this + 0x450);
  *(long *)(this + 0x450) = lVar1 + -1;
  if (lVar1 == 1) {
    (**(code **)(**(long **)(this + 0x448) + 0x158))();
  }
  _IOLockUnlock(*(undefined8 *)(this + 0x440));
  return;
}



// IGScheduler::haltCommandStreamer(IGHwCsType)

void __thiscall IGScheduler::haltCommandStreamer(IGScheduler *this,uint param_1)

{
  uint uVar1;
  IntelAccelerator *this_00;
  uint uVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  uVar1 = *(uint *)(&DAT_00128ecd + (ulong)param_1 * 0x79);
  *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x10)) + (ulong)uVar1) = 0x10001;
  uVar2 = 0x2711;
  do {
    this_00 = *(IntelAccelerator **)(this + 0x10);
    if ((*(uint *)(*(long *)(this_00 + 0x1270) + (ulong)uVar1) & 2) != 0) goto LAB_000541a0;
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,10,1000);
    _thread_block(0);
    uVar2 = uVar2 - 1;
  } while (1 < uVar2);
  this_00 = *(IntelAccelerator **)(this + 0x10);
LAB_000541a0:
  IntelAccelerator::SafeForceWake(this_00,0,7);
  return;
}



// IGScheduler::resumeCommandStreamer(IGHwCsType)

void __thiscall IGScheduler::resumeCommandStreamer(IGScheduler *this,uint param_1)

{
  IntelAccelerator *this_00;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x10),1,7);
  this_00 = *(IntelAccelerator **)(this + 0x10);
  *(undefined4 *)
   (*(long *)(this_00 + 0x1270) + (ulong)*(uint *)(&DAT_00128ecd + (ulong)param_1 * 0x79)) = 0x10000
  ;
  IntelAccelerator::SafeForceWake(this_00,0,7);
  return;
}



// IGScheduler::MetaClass::~MetaClass()

void __thiscall IGScheduler::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGScheduler_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGScheduler::gMetaClass,"IGScheduler",(OSMetaClass *)__got::gMetaClass,
             0x458);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGScheduler::gMetaClass);
  return;
}



// dtHookDidFlip(unsigned long long)

void dtHookDidFlip(void)

{
  return;
}



// dtHookSwCtxCreation(long long, unsigned int)

void dtHookSwCtxCreation(void)

{
  return;
}



// dtHookSwCtxDestroy(long long, unsigned int)

void dtHookSwCtxDestroy(void)

{
  return;
}



// dtHookPrepareQueueKMD(long long, unsigned int, unsigned int, int, unsigned int)

void dtHookPrepareQueueKMD(void)

{
  return;
}



// dtHookSubmitQueueKMD(long long, unsigned int, unsigned int, int, unsigned int, unsigned long
// long, unsigned long long)

void dtHookSubmitQueueKMD(void)

{
  return;
}



// dtHookWriteStamp(long long, unsigned int, int, unsigned int)

void dtHookWriteStamp(void)

{
  return;
}



// dtHookSubmitBatchBuffer(long long, unsigned int, int, unsigned int)

void dtHookSubmitBatchBuffer(void)

{
  return;
}



// dtHookSubmitToRing(long long, unsigned int, int, unsigned int)

void dtHookSubmitToRing(void)

{
  return;
}



// dtHookCompleteExecute(unsigned int, int, unsigned int)

void dtHookCompleteExecute(void)

{
  return;
}



// dtHookRemoveQueueKMD(unsigned int, int, unsigned int)

void dtHookRemoveQueueKMD(void)

{
  return;
}



// dtHookSubmitExecList(long long, unsigned int, int, unsigned int)

void dtHookSubmitExecList(void)

{
  return;
}



// dtHookCompleteExecList(long long, unsigned int, int, unsigned int, unsigned long long)

void dtHookCompleteExecList(void)

{
  return;
}



// dtHookBeginExecOnGPU(unsigned long long, long long, unsigned int, int, unsigned int)

void dtHookBeginExecOnGPU(void)

{
  return;
}



// dtHookEndExecOnGPU(unsigned long long, long long, unsigned int, int, unsigned int)

void dtHookEndExecOnGPU(void)

{
  return;
}



// dtHookTrace(unsigned int, unsigned long, unsigned long, unsigned long, unsigned long)

void dtHookTrace(void)

{
  return;
}



// IGTelemetryManager::~IGTelemetryManager()

void __thiscall IGTelemetryManager::~IGTelemetryManager(IGTelemetryManager *this)

{
  long lVar1;
  
  *(undefined ***)this = &__const::~IGTelemetryManager;
  if (*(IGPerfCounterConfig **)(this + 0x288) != (IGPerfCounterConfig *)0x0) {
    IGPerfCounterConfig::~IGPerfCounterConfig(*(IGPerfCounterConfig **)(this + 0x288));
    _IOFreeTypeImpl(IGPerfCounterConfig::operator_delete);
    *(undefined8 *)(this + 0x288) = 0;
  }
  lVar1 = 0;
  do {
    if (*(long **)(this + lVar1 * 8 + 0x18) != (long *)0x0) {
      (**(code **)(**(long **)(this + lVar1 * 8 + 0x18) + 0x28))();
    }
    *(undefined8 *)(this + lVar1 * 8 + 0x18) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x40);
  IGSupportMDAPI::finalizeOaBuffer
            ((IGSupportMDAPI *)(this + 0x2d8),'\0',(undefined4 *)(this + 0x10));
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x340));
  return;
}



// IGPerfCounterConfig::~IGPerfCounterConfig()

void __thiscall IGPerfCounterConfig::~IGPerfCounterConfig(IGPerfCounterConfig *this)

{
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),1);
  restoreMSR(this);
  if (*(int *)(this + 0xc) == 0) {
    restoreClockGatingState(this);
  }
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),0);
  IGPerfCounterRestoreOnRC6Exit::clearRc6WABatchBufferPointer
            ((IGPerfCounterRestoreOnRC6Exit *)(this + 0x8f8));
  if (*(long **)(this + 0x900) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x900) + 0x28))();
    *(undefined8 *)(this + 0x900) = 0;
  }
  return;
}



// IGTelemetryManager::~IGTelemetryManager()

void __thiscall IGTelemetryManager::~IGTelemetryManager(IGTelemetryManager *this)

{
  long lVar1;
  
  *(undefined ***)this = &__const::~IGTelemetryManager;
  if (*(IGPerfCounterConfig **)(this + 0x288) != (IGPerfCounterConfig *)0x0) {
    IGPerfCounterConfig::~IGPerfCounterConfig(*(IGPerfCounterConfig **)(this + 0x288));
    _IOFreeTypeImpl(IGPerfCounterConfig::operator_delete);
    *(undefined8 *)(this + 0x288) = 0;
  }
  lVar1 = 0;
  do {
    if (*(long **)(this + lVar1 * 8 + 0x18) != (long *)0x0) {
      (**(code **)(**(long **)(this + lVar1 * 8 + 0x18) + 0x28))();
    }
    *(undefined8 *)(this + lVar1 * 8 + 0x18) = 0;
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x40);
  IGSupportMDAPI::finalizeOaBuffer
            ((IGSupportMDAPI *)(this + 0x2d8),'\0',(undefined4 *)(this + 0x10));
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x340));
  return;
}



// IGTelemetryManager::~IGTelemetryManager()

void __thiscall IGTelemetryManager::~IGTelemetryManager(IGTelemetryManager *this)

{
  ~IGTelemetryManager(this);
  _IOFreeTypeImpl(operator_delete,this);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryManager::printDashboard(unsigned long long)

undefined4 __cdecl IGTelemetryManager::printDashboard(IGTelemetryManager *param_1)

{
  int param3;
  undefined *puVar1;
  int local_1c;
  
  _kprintf("\n");
  _kprintf("Telemetry disable=%d\n",*(uint *)(&DAT_000011c0 + *(long *)(param_1 + 600)) >> 0x1c & 1)
  ;
  puVar1 = ___idvarGetParam(0x2b);
  _kprintf("Telemetry sysctl.mode=x%llX vs x%llX=m_mode isCounterConfig=%d sysctl.ref=%d ref=%d\n",
           (ulonglong)puVar1,*(ulonglong *)(param_1 + 0x270),(uint)(*(long *)(param_1 + 0x288) != 0)
           ,*(int *)(param_1 + 0x280),*(int *)(param_1 + 0x278));
  _kprintf("%s %s %d=configValid isTelemetryConfigured=%d\n","rel","",(uint)(byte)param_1[0x290],
           (uint)(byte)param_1[0x291]);
  puVar1 = ___idvarGetParam(0xb);
  _kprintf("GPU Usage mask=x%llX  KTraceEnable=%d\n",(ulonglong)puVar1,
           (uint)(*(long *)(*(long *)(param_1 + 600) + 0xec0) != 0));
  _kprintf("IOAF.KtraceEnable=%d isCollectionDisabled=x%llX\n",
           *(int *)__got::___ktrace_kernel_enabled,
           (ulong)(byte)__got::___ktrace_enable_filter[0x14] |
           (ulong)((byte)*__got::___ktrace_enable_filter & 8));
  local_1c = 0;
  param3 = countThreadInfoRefs(param_1,&local_1c);
  _kprintf("\n%10lld ThreadInfo structs. nStale=%d >=? %d=nUnUsed\n",*(longlong *)(param_1 + 0x350),
           local_1c,param3);
  _kprintf("%8lld = maxQueued for GPU Usage/KTrace\n",*(longlong *)(param_1 + 0x298));
  *(undefined8 *)(param_1 + 0x298) = 0;
  _kprintf("%10lld = usageBytesLocked for GPU Usage/KTrace\n",*(longlong *)(param_1 + 0x240));
  _kprintf("%10lld = usageBytesMeta for GPU Usage/KTrace\n",*(longlong *)(param_1 + 0x248));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(param_1 + 600),1);
  _kprintf("%d = forceDisableRC6\n",*(uint *)(&DAT_000011c0 + *(long *)(param_1 + 600)) >> 0x1b & 1)
  ;
  _kprintf("%d = m_oaContextControlValue\n",*(int *)(param_1 + 0x10));
  _kprintf("x%8X = OA_CONTROL\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 600)) + 0x2b00));
  _kprintf("x%8X = OA_CONTEXT_CONTROL\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 600)) + 0x2360));
  _kprintf("x%8X = OA_REG_GPU_TICKS\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 600)) + 0x2910));
  _kprintf("x%8X = EU_BusyTics\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 600)) + 0x2800));
  _kprintf("x%8X = EuActive_GPU\n",
           *(uint *)(*(long *)(&DAT_00001270 + *(long *)(param_1 + 600)) + 0x2838));
  _kprintf("x%8X = GT_GFX_RC6\n",
           *(uint *)(&DAT_00138108 + *(long *)(&DAT_00001270 + *(long *)(param_1 + 600))));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(param_1 + 600),0);
  IGAccelTraceStreamManager::curTimesDashboard
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 600) + 0xe18));
  if ((*(long *)(&DAT_00001290 + *(long *)(param_1 + 600)) == 0) ||
     (*(char *)(*(long *)(&DAT_00001290 + *(long *)(param_1 + 600)) + 0x20) == '\0')) {
    _kprintf("    NO EDRAM\n");
  }
  else {
    _kprintf("    has EDRAM = %d\n",1);
  }
  if (*(long *)(param_1 + 0x288) != 0) {
    _kprintf("%d = m_validSavedMSR\n",*(int *)(*(long *)(param_1 + 0x288) + 8));
  }
  return *(undefined4 *)(param_1 + 0x278);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryManager::threadInfoDashboard(unsigned long long)

void __cdecl IGTelemetryManager::threadInfoDashboard(IGTelemetryManager *param_1)

{
  int param3;
  int local_1c;
  
  local_1c = 0;
  param3 = countThreadInfoRefs(param_1,&local_1c);
  _kprintf("\n%10lld ThreadInfo structs. nStale=%d >=? %d=nUnUsed\n",*(longlong *)(param_1 + 0x350),
           local_1c,param3);
  return;
}



// IGTelemetryManager::dashboardOperation(unsigned long long)

void IGTelemetryManager::dashboardOperation(void)

{
  return;
}



// IGTelemetryManager::controlTracing(unsigned long long, unsigned long long)

void IGTelemetryManager::controlTracing(void)

{
  return;
}



// IGTelemetryManager::initWithAccelerator(IntelAccelerator*, unsigned int)

void __thiscall
IGTelemetryManager::initWithAccelerator
          (IGTelemetryManager *this,IntelAccelerator *param_1,undefined4 param_2)

{
  long *plVar1;
  undefined8 uVar2;
  
  *(IntelAccelerator **)(this + 600) = param_1;
  *(IntelAccelerator **)(this + 0x2d8) = param_1;
  *(undefined8 *)(this + 0x228) = *(undefined8 *)(param_1 + 0xe10);
  IntelAccelerator::SafeForceWake(param_1,1);
  *(uint *)(this + 0x2a0) =
       (*(uint *)((long)&nlist_00145998.n_strx + *(long *)(&DAT_00001270 + *(long *)(this + 600))) &
       0xff) * 0x32;
  IntelAccelerator::SafeForceWake(param_1,0);
  IGHashTable<>::clear((IGHashTable<> *)(this + 0x340));
  IntelAccelerator::SafeForceWake(param_1,1);
  *(undefined4 *)(*(long *)(param_1 + 0x1270) + 0x2360) = 1;
  IntelAccelerator::SafeForceWake(param_1,0);
  *(undefined4 *)(this + 0x10) = 1;
  *(undefined4 *)(this + 0xc) = param_2;
  IGSupportMDAPI::initializeOaBuffer((IGSupportMDAPI *)(this + 0x2d8),0,0,0,(uint *)0x0,1,'\0');
  IGSupportMDAPI::enableOaBufferCollection
            ((IGSupportMDAPI *)(this + 0x2d8),(undefined4 *)(this + 0x10));
  plVar1 = (long *)OSArray::withCapacity(1);
  uVar2 = OSString::withCString("MetalStatistics");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,0,uVar2);
  uVar2 = OSString::withCString("autocorr1/ComputeBasic");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,1,uVar2);
  uVar2 = OSString::withCString("autocorr1/ComputeExtended");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,2,uVar2);
  uVar2 = OSString::withCString("autocorr1/ComputeL3Cache");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,3,uVar2);
  uVar2 = OSString::withCString("autocorr1/HDCAndSF");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,4,uVar2);
  uVar2 = OSString::withCString("autocorr1/L3_1");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,5,uVar2);
  uVar2 = OSString::withCString("autocorr1/L3_2");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,6,uVar2);
  uVar2 = OSString::withCString("autocorr1/L3_3");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,7,uVar2);
  uVar2 = OSString::withCString("autocorr1/RasterizerAndPixelBackend");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,8,uVar2);
  uVar2 = OSString::withCString("autocorr1/RenderBasic");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,9,uVar2);
  uVar2 = OSString::withCString("autocorr1/RenderPipeProfile");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,10,uVar2);
  uVar2 = OSString::withCString("autocorr1/TDL_1");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,0xb,uVar2);
  uVar2 = OSString::withCString("autocorr1/TDL_2");
  (**(code **)(*plVar1 + 0x1c0))(plVar1,0xc,uVar2);
  (**(code **)(*(long *)param_1 + 0x268))(param_1,"MetalStatisticsName",plVar1);
                    // WARNING: Could not recover jumptable at 0x00054a82. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*plVar1 + 0x28))(plVar1);
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::clear()

int __thiscall IGHashTable<>::clear(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  char *pcVar6;
  ulong uVar7;
  
  lVar4 = *(long *)(this + 8);
  if ((lVar4 != 0) && (*(long *)(lVar4 + 8) != 0)) {
    lVar5 = *(long *)(lVar4 + 0x10);
    uVar7 = 0;
    do {
      lVar1 = *(long *)(lVar5 + uVar7 * 0x18);
      if (lVar1 != 0) {
        for (lVar4 = *(long *)(lVar1 + 0x10); lVar4 != 0; lVar4 = *(long *)(lVar4 + 0x10)) {
          if (*(long *)(lVar4 + 0x18) != lVar1 + 0x10) {
            pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_00054b8e;
          }
          if (**(long **)(lVar1 + 0x18) != lVar1) goto LAB_00054b87;
          *(long **)(lVar4 + 0x18) = *(long **)(lVar1 + 0x18);
          **(long **)(lVar1 + 0x18) = lVar4;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar4;
        }
        plVar2 = *(long **)(lVar1 + 0x18);
        if (*plVar2 != lVar1) {
LAB_00054b87:
          pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00054b8e:
                    // WARNING: Subroutine does not return
          _panic(pcVar6,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar7 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        lVar4 = *(long *)(this + 8);
        lVar5 = *(long *)(lVar4 + 0x10);
      }
      *(undefined8 *)(lVar5 + 0x10 + uVar7 * 0x18) = 0;
      uVar7 = uVar7 + 1;
    } while (uVar7 < *(ulong *)(lVar4 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  iVar3 = shrinkIfNeeded(this);
  return iVar3;
}



// IGTelemetryManager::setupOnlyOA_ENABLE(unsigned int)

void __thiscall IGTelemetryManager::setupOnlyOA_ENABLE(IGTelemetryManager *this,undefined4 param_1)

{
  *(undefined4 *)(this + 0xc) = param_1;
  return;
}



// IGTelemetryManager::telemetryRetain()

void __thiscall IGTelemetryManager::telemetryRetain(IGTelemetryManager *this)

{
  int iVar1;
  
  iVar1 = *(int *)(this + 0x278);
  *(int *)(this + 0x278) = iVar1 + 1;
  if (iVar1 != 0) {
    return;
  }
  kmdTelemetryInitContext(*(long *)(this + 600),(undefined *)((long)&MACH_HEADER.magic + 3));
  IGAccelTraceStreamManager::resyncTimeTuples
            ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18));
  return;
}



// IGTelemetryManager::telemetryRelease()

void __thiscall
IGTelemetryManager::telemetryRelease(IGTelemetryManager *this,int param_1,int param_2)

{
  int iVar1;
  IGTelemetryKMD *this_00;
  int extraout_EDX;
  
  iVar1 = *(int *)(this + 0x278);
  *(int *)(this + 0x278) = iVar1 + -1;
  if (iVar1 < 2) {
    this_00 = *(IGTelemetryKMD **)(this + 0x250);
    if (this_00 != (IGTelemetryKMD *)0x0) {
      IGTelemetryKMD::shutdown(this_00,param_1,param_2);
      (**(code **)(*(long *)this_00 + 8))(this_00);
      *(undefined8 *)(this + 0x250) = 0;
      param_2 = extraout_EDX;
    }
    shutdown(this,param_1,param_2);
    *(undefined4 *)(this + 0x278) = 0;
  }
  return;
}



// IGTelemetryManager::cleanupContext()

void __thiscall IGTelemetryManager::cleanupContext(IGTelemetryManager *this,int param_1,int param_2)

{
  shutdown(this,param_1,param_2);
  return;
}



// IGTelemetryManager::setSysctlRefCount(unsigned int)

void __thiscall IGTelemetryManager::setSysctlRefCount(IGTelemetryManager *this,int param_1)

{
  *(uint *)(this + 0x280) = (uint)(param_1 != 0);
  return;
}



// IGTelemetryManager::getStatisticsGlobalUsage(IGAccelStatisticsGlobalUsage*)

void __thiscall
IGTelemetryManager::getStatisticsGlobalUsage(IGTelemetryManager *this,undefined8 *param_1)

{
  long lVar1;
  long lVar2;
  uint64_t uVar3;
  long lVar4;
  
  *(undefined4 *)(param_1 + 0x14) = *(undefined4 *)(this + 0x2a0);
  *(undefined4 *)((long)param_1 + 0xa4) = *(undefined4 *)(this + 0x220);
  uVar3 = _mach_absolute_time();
  lVar1 = *(long *)(this + 600);
  lVar4 = 0;
  do {
    param_1[10] = *param_1;
    param_1[0xf] = param_1[5];
    if ((lVar1 != 0) && (lVar2 = *(long *)(lVar1 + 0xe10), lVar2 != 0)) {
      *param_1 = *(undefined8 *)(lVar2 + 400 + lVar4 * 2);
      param_1[5] = uVar3;
    }
    param_1 = param_1 + 1;
    lVar4 = lVar4 + 0x70;
  } while (lVar4 != 0x230);
  return;
}



// IGTelemetryManager::initGlobalUsage()

void __thiscall IGTelemetryManager::initGlobalUsage(IGTelemetryManager *this)

{
  undefined4 uVar1;
  undefined4 uVar2;
  IntelAccelerator *this_00;
  long lVar3;
  uint uVar4;
  uint uVar5;
  ulong uVar6;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
  this_00 = *(IntelAccelerator **)(this + 600);
  *(undefined4 *)(this + 0x2c0) = *(undefined4 *)(*(long *)(this_00 + 0x1270) + 0xa248);
  lVar3 = *(long *)(this_00 + 0x1270);
  uVar1 = *(undefined4 *)(lVar3 + 0xa25c);
  uVar4 = *(uint *)(lVar3 + 0x44074);
  uVar2 = *(undefined4 *)(lVar3 + 0xa26c);
  IntelAccelerator::SafeForceWake(this_00,0);
  uVar4 = (uVar4 & 0x3ff) * 1000000 + 1000000 >> ((byte)uVar2 >> 1 & 3 ^ 7);
  uVar6 = (ulong)uVar4;
  uVar5 = 1000000000;
  if (uVar4 == (uVar4 / 10) * 10) {
    uVar5 = 1000000000;
    do {
      uVar6 = uVar6 / 10;
      uVar4 = (uint)uVar6;
      uVar5 = uVar5 / 10;
    } while (uVar4 == (int)(uVar6 / 10) * 10);
  }
  *(uint *)(this + 0x2c4) = uVar5 << ((byte)~(byte)uVar1 >> 4 & 3);
  *(uint *)(this + 0x2c8) = uVar4;
  return;
}



// IGTelemetryManager::calcGlobalUsage(unsigned long long)

void __thiscall IGTelemetryManager::calcGlobalUsage(IGTelemetryManager *this,long param_1)

{
  int iVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  ulong uVar5;
  
  if (*(int *)(this + 0x2c4) == 0) {
    initGlobalUsage(this);
  }
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
  iVar1 = *(int *)((long)&nlist_00145958.n_value +
                  *(long *)(*(IntelAccelerator **)(this + 600) + 0x1270));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),0);
  lVar2 = *(long *)(this + 0x2a8);
  uVar4 = (ulong)(uint)(iVar1 - *(int *)(this + 0x2b0));
  if (((byte)this[0x2c0] & 4) == 0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
    uVar3 = *(uint *)((long)&nlist_00145948.n_strx +
                     *(long *)(*(IntelAccelerator **)(this + 600) + 0x1270));
    uVar5 = 0;
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),0);
    uVar3 = (uVar3 >> 8 & 0xff) * 0x32;
    if (uVar3 < 3) goto LAB_00054ecd;
    uVar3 = uVar3 / 3;
    uVar4 = uVar4 * 4000;
  }
  else {
    uVar3 = *(uint *)(this + 0x2c8);
    uVar4 = *(uint *)(this + 0x2c4) * uVar4;
  }
  uVar5 = uVar4 / uVar3;
LAB_00054ecd:
  uVar4 = 1;
  if (param_1 - lVar2 != 0) {
    uVar4 = param_1 - lVar2;
  }
  if (uVar5 < uVar4) {
    uVar4 = uVar5;
  }
  *(ulong *)(this + 0x2b8) = uVar4 + *(long *)(this + 0x2b8);
  *(long *)(this + 0x2a8) = param_1;
  *(int *)(this + 0x2b0) = iVar1;
  return;
}



// IGTelemetryManager::enterDebugger(char const*, char const*, char const*, unsigned int)

void __thiscall
IGTelemetryManager::enterDebugger
          (IGTelemetryManager *this,char *param_1,char *param_2,char *param_3,int param_4)

{
  undefined8 uVar1;
  ulonglong param1;
  
  uVar1 = _current_thread();
  param1 = _thread_tid(uVar1);
  _kprintf("x%llX] %s\n",param1,param_1);
  _kprintf("file: %s : %d\n",param_2,param_4);
  _kprintf("func: %s\n",param_3);
  _PE_enter_debugger(param_1);
  return;
}



// IGTelemetryManager::prepareTelemetry(unsigned int)

void __thiscall IGTelemetryManager::prepareTelemetry(IGTelemetryManager *this,int param_1)

{
  int iVar1;
  IGPerfCounterConfig *pIVar2;
  long lVar3;
  dword *pdVar4;
  IGSharedMappedBuffer *this_00;
  undefined8 uVar5;
  
  if (*(long *)(this + 0x288) != 0) {
    return;
  }
  this[0x290] = (IGTelemetryManager)0x0;
  (**(code **)(**(long **)(*(long *)(this + 600) + 0x380) + 0x158))();
  pIVar2 = (IGPerfCounterConfig *)_IOMallocTypeImpl(IGPerfCounterConfig::operator_new);
  *(undefined8 *)pIVar2 = 0;
  *(undefined4 *)(pIVar2 + 0x908) = 0;
  *(undefined8 *)(pIVar2 + 0x910) = 0;
  *(undefined8 *)(pIVar2 + 0x918) = 0;
  *(undefined4 *)(pIVar2 + 0x950) = 0;
  *(undefined4 *)(pIVar2 + 0x940) = 0;
  *(undefined4 *)(pIVar2 + 0xa0) = 0;
  *(undefined8 *)(pIVar2 + 0xb8) = 0;
  *(undefined4 *)(pIVar2 + 0x8c0) = 0xe458;
  *(undefined4 *)(pIVar2 + 0x8c8) = 0xe558;
  *(undefined4 *)(pIVar2 + 0x8d0) = 0xe658;
  *(undefined4 *)(pIVar2 + 0x8d8) = 0xe758;
  *(undefined4 *)(pIVar2 + 0x8e0) = 0xe45c;
  *(undefined4 *)(pIVar2 + 0x8e8) = 0xe55c;
  *(undefined4 *)(pIVar2 + 0x8f0) = 0xe65c;
  lVar3 = 0x8c4;
  do {
    *(undefined4 *)(pIVar2 + lVar3) = 0;
    lVar3 = lVar3 + 8;
  } while (lVar3 != 0x8fc);
  *(undefined8 *)(pIVar2 + 8) = 0;
  *(IGPerfCounterConfig **)(this + 0x288) = pIVar2;
  pdVar4 = &section_000002e0.flags;
  if (param_1 == 0) {
    pdVar4 = (dword *)___idvarGetParam(0x2b);
    pIVar2 = *(IGPerfCounterConfig **)(this + 0x288);
  }
  *(dword **)(this + 0x270) = pdVar4;
  lVar3 = *(long *)(this + 600);
  *(long *)(pIVar2 + 0x98) = lVar3;
  IGPerfCounterConfig::startChangingConfig(pIVar2);
  IGPerfCounterConfig::saveMSR(pIVar2);
  *(long *)(pIVar2 + 0x8f8) = lVar3;
  this_00 = IGSharedMappedBuffer::withOptions(*(long *)(lVar3 + 0x150),0x4000,1,0);
  *(IGSharedMappedBuffer **)(pIVar2 + 0x900) = this_00;
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(this_00);
  *(long *)(pIVar2 + 0x920) = lVar3;
  *(long *)(pIVar2 + 0x928) = lVar3 + 0x2000;
  lVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(pIVar2 + 0x900));
  *(long *)(pIVar2 + 0x930) = lVar3;
  *(long *)(pIVar2 + 0x938) = lVar3 + 0x2000;
  *(undefined4 *)(pIVar2 + 0x940) = 0x2000;
  *(undefined4 *)(pIVar2 + 0x908) = 0;
  *(undefined8 *)(pIVar2 + 0x910) = *(undefined8 *)(pIVar2 + 0x920);
  *(long *)(pIVar2 + 0x918) = lVar3;
  *(undefined4 *)(pIVar2 + 0x950) = 0;
  *(undefined8 *)(pIVar2 + 0x948) = *(undefined8 *)(pIVar2 + 0x920);
  IGPerfCounterConfig::saveClockGatingState(pIVar2);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(pIVar2 + 0x98),1);
  IGPerfCounterConfig::configMSR(pIVar2);
  IGPerfCounterConfig::configPerfcntForSQFull(*(long *)(pIVar2 + 0x98));
  IGPerfCounterConfig::configSpmGpmEuMetrics(*(long *)(pIVar2 + 0x98));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(pIVar2 + 0x98),0);
  operation(this,0xc,0,(long *)0x0,0,0);
  iVar1 = IGPerfCounterConfig::createDefaultConfig(*(IGPerfCounterConfig **)(this + 0x288));
  if (iVar1 != 0) {
    this[0x291] = (IGTelemetryManager)0x0;
    operation(this,0xd,0,(long *)0x0,0,0);
    return;
  }
  IGPerfCounterConfig::ConfigurePerfRegisters
            (*(IGPerfCounterConfig **)(this + 0x288),
             *(IGPerfCounterRestoreOnRC6Exit **)(this + 0x270),
             (long)(*(IGPerfCounterConfig **)(this + 0x288) + 0xa0),param_1);
  if (((byte)this[0x270] & 0x20) != 0) {
    operation(this,0xd,0,(long *)0x0,0,0);
  }
  if (param_1 == 0) {
    *(undefined2 *)(this + 0x290) = 0x101;
    uVar5 = _IOLockAlloc();
    *(undefined8 *)(this + 0x368) = uVar5;
  }
  else {
    pIVar2 = *(IGPerfCounterConfig **)(this + 0x288);
    if (pIVar2 != (IGPerfCounterConfig *)0x0) {
      IGPerfCounterConfig::~IGPerfCounterConfig(pIVar2);
      _IOFreeTypeImpl(IGPerfCounterConfig::operator_delete,pIVar2);
    }
    *(undefined8 *)(this + 0x288) = 0;
  }
  patchSafeContext(this);
  return;
}



// IGTelemetryManager::operation(unsigned long long, long long, TelemetryOperation*,
// TelemetryConnection*, task*)

ulong __thiscall
IGTelemetryManager::operation
          (IGTelemetryManager *this,ulong param_1,long param_2,long *param_3,long param_4,
          ulonglong param_5)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined *puVar5;
  undefined4 extraout_var;
  uint *puVar6;
  undefined8 uVar7;
  uint uVar8;
  ulong uVar9;
  ulong extraout_RDX;
  long lVar10;
  byte bVar11;
  ulong uVar12;
  long lVar13;
  undefined **ppuVar14;
  IGPerfCounterConfig *this_00;
  IntelAccelerator *this_01;
  int iVar15;
  IGSupportMDAPI *pIVar16;
  undefined1 auVar17 [16];
  long local_88;
  long local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  long local_58;
  uint local_4c;
  uint local_48 [4];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_60 = 0;
  local_68 = 0;
  local_70 = 0;
  local_78 = 0;
  local_80 = 0;
  local_88 = 0;
  if (param_3 == (long *)0x0) {
    param_3 = &local_88;
    local_60 = 0xffffffffffffffff;
    local_80 = param_2;
  }
  local_58 = param_4;
  if (*(long *)(this + 0x288) == 0) {
    prepareTelemetry(this,0);
    uVar9 = 0xffffffffffffffff;
    if (this[0x290] != (IGTelemetryManager)0x1) goto switchD_000553d0_caseD_1;
  }
  puVar5 = ___idvarGetParam(0x2b);
  if (((param_1 == 2) && (puVar5 != (undefined *)0x0)) &&
     (uVar9 = *(ulong *)(this + 0x270), ((uVar9 ^ (ulong)puVar5) & 0xfffffffffff8ffe0) != 0)) {
    param_3[1] = **(long **)(this + 0x288);
    param_3[2] = uVar9;
    param_3[3] = (long)puVar5;
    param_3[4] = 0x7001f;
    uVar9 = 0xfffffffffffffffd;
    goto switchD_000553d0_caseD_1;
  }
  if ((param_1 == 2) && (param_2 - 1000U < 999)) {
    uVar2 = IGSupportMDAPI::getDeviceInfo((IGSupportMDAPI *)(this + 0x2d8),param_2,param_3 + 5);
    param_3[2] = CONCAT44(extraout_var,uVar2);
    uVar9 = -(ulong)(param_3[5] != 0);
    goto switchD_000553d0_caseD_1;
  }
  iVar3 = 0;
  iVar15 = 0;
  uVar9 = 0xffffffffffffffff;
  if (0x19 < param_1) {
    switch(param_1) {
    case 0x7d9:
      uVar2 = IGSupportMDAPI::getOaBufferDataSize((IGSupportMDAPI *)(this + 0x2d8));
      param_3[2] = (ulong)uVar2;
      auVar17 = IGSupportMDAPI::estimateTimeUntilHalfFullOaBufferUs
                          ((long *)(this + 0x2d8),uVar2,extraout_RDX);
      param_3[3] = (ulong)auVar17._0_4_;
      iVar3 = 0;
      break;
    case 0x7da:
    case 0x7db:
      puVar6 = (uint *)_IOMallocTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                                          ::kalloc_type_view_1901);
      uVar2 = *(uint *)(param_3 + 8);
      param_3[5] = -1;
      if (*(int *)((long)param_3 + 0x3c) != 1) {
        if (*(int *)((long)param_3 + 0x3c) == 2) {
          ppuVar14 = &operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                      ::kalloc_type_view_1912;
        }
        else {
          this[8] = (IGTelemetryManager)0x0;
          ppuVar14 = &operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                      ::kalloc_type_view_1964;
        }
        _IOFreeTypeImpl(ppuVar14,puVar6);
        uVar9 = 0xfffffffffffffff3;
        goto switchD_000553d0_caseD_1;
      }
      if ((param_3[6] == -1) && (*param_3 != 0x7da)) {
        *(undefined8 *)(this + 0x2d0) = 0xffffffffffffffff;
        _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                         ::kalloc_type_view_1932,puVar6);
        uVar9 = 6;
        goto switchD_000553d0_caseD_1;
      }
      if (uVar2 == 0) {
        _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                         ::kalloc_type_view_1939,puVar6);
        uVar9 = 0xfffffffffffffff0;
        goto switchD_000553d0_caseD_1;
      }
      if (0x100 < uVar2) {
        _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                         ::kalloc_type_view_1944,puVar6);
        uVar9 = 0xfffffffffffffff4;
        goto switchD_000553d0_caseD_1;
      }
      param_3[2] = -1;
      uVar7 = IGPerfCounterConfig::InitPerfRegisterTable
                        (*(IGPerfCounterConfig **)(this + 0x288),(long)(param_3 + 10),uVar2,puVar6,
                         (undefined1 *)param_3);
      if ((int)uVar7 != 0) {
        this[8] = (IGTelemetryManager)0x0;
        _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                         ::kalloc_type_view_1957,puVar6);
        uVar9 = (ulong)(int)uVar7;
        goto switchD_000553d0_caseD_1;
      }
      if (param_1 != 0x7da) {
        *(undefined8 *)(this + 0x2d0) = 0xffffffffffffffff;
        uVar7 = IGPerfCounterConfig::CompareAndUseNewConfig
                          (*(IGPerfCounterConfig **)(this + 0x288),
                           *(int *)(this + 0x280) + 1 < *(int *)(this + 0x278),(ulong)uVar2,puVar6,
                           *(IGPerfCounterRestoreOnRC6Exit **)(this + 0x270),
                           *(IGPerfCounterConfig **)(this + 0x288) + 0xa0,(long)param_3);
        if ((int)uVar7 == 0) {
          *(long *)(this + 0x2d0) = param_3[6];
        }
        _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                         ::kalloc_type_view_1993,puVar6);
        patchSafeContext(this);
        uVar9 = (ulong)(int)uVar7;
        goto switchD_000553d0_caseD_1;
      }
      this[8] = (IGTelemetryManager)0x0;
      _IOFreeTypeImpl(&operation(unsigned_long_long,long_long,TelemetryOperation*,TelemetryConnection*,task*)
                       ::kalloc_type_view_1971,puVar6);
      goto LAB_00055854;
    case 0x7dc:
    case 0x7dd:
    case 0x7de:
      goto switchD_000553d0_caseD_1;
    case 0x7df:
      IGAccelTraceStreamManager::readFullTicTimestamps
                ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18),(ulong *)(param_3 + 4)
                 ,(uint64_t *)(param_3 + 3));
      goto LAB_000555e0;
    case 0x7e0:
      uVar9 = IGTimeConverter::gpuGetFullTicsGivenRawTics
                        (param_3[3],(long *)(*(long *)(this + 0x228) + 0x68));
      param_3[4] = uVar9;
      iVar3 = 0;
      break;
    default:
      if (param_1 != 0xd2) goto switchD_000553d0_caseD_1;
      param_3[5] = *(long *)(this + 0x238);
    }
    goto switchD_000553d0_caseD_0;
  }
  uVar12 = (long)&switchD_000553d0::switchdataD_00055cbc +
           (long)(int)(&switchD_000553d0::switchdataD_00055cbc)[param_1];
  switch(param_1) {
  case 0:
  case 8:
  case 9:
  case 0x14:
  case 0x15:
    break;
  default:
    goto switchD_000553d0_caseD_1;
  case 2:
    if (1999 < param_2) {
      if (0x7e2 < param_2) {
        if (param_2 == 0x7e3) {
          iVar3 = IGSupportMDAPI::mapOABufferMemoryDirect
                            ((IGSupportMDAPI *)(this + 0x2d8),param_3 + 3,param_5);
LAB_00055c35:
          uVar9 = (ulong)iVar3;
          goto switchD_000553d0_caseD_1;
        }
        if (param_2 == 0x7e4) {
          local_48[0] = 0;
          local_4c = 0;
          uVar9 = IGSupportMDAPI::getOABufferPointers
                            ((IGSupportMDAPI *)(this + 0x2d8),(int *)local_48,(int *)&local_4c);
          if ((int)uVar9 == 0) {
            param_3[3] = (ulong)local_48[0];
            param_3[4] = (ulong)local_4c;
          }
          uVar9 = uVar9 & 0xffffffff;
          goto switchD_000553d0_caseD_1;
        }
        if (param_2 != 0xbbc) goto switchD_000553d0_caseD_1;
        uVar9 = *(ulong *)(this + 0x2d0);
        goto LAB_00055850;
      }
      if (param_2 == 2000) {
        lVar10 = *(long *)(&DAT_00001270 + *(long *)(this + 600));
        local_48[0] = *(uint *)((long)&nlist_00144ff8.n_value + lVar10 + 4);
        local_48[1] = *(undefined4 *)((long)&nlist_00145008.n_strx + lVar10);
        local_48[2] = *(undefined4 *)(&nlist_00145008.n_type + lVar10);
        local_48[3] = 0;
        uVar2 = *(uint *)((long)&nlist_00144ff8.n_value + lVar10);
        uVar4 = *(uint *)((long)local_48 + (ulong)(uVar2 & 0xc));
        uVar8 = uVar4 & 0xff;
        uVar4 = uVar4 >> 8 & 0xff;
        uVar2 = *(uint *)((long)local_48 + (ulong)(uVar2 >> 2 & 0xc));
        lVar13 = (ulong)(uVar8 + uVar4 != 0) + 1;
        lVar10 = 3;
        if ((uVar2 >> 8 & 0xff) + (uVar2 & 0xff) == 0) {
          lVar10 = lVar13;
        }
        if (uVar4 + uVar8 == 0) {
          lVar10 = lVar13;
        }
        param_3[2] = lVar10;
      }
      else {
        if (param_2 != 0x7d1) goto switchD_000553d0_caseD_1;
        IGAccelTraceStreamManager::readFullTicTimestamps
                  ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18),
                   (ulong *)(param_3 + 3),(uint64_t *)(param_3 + 4));
      }
      goto LAB_00055854;
    }
    switch(param_2) {
    case 600:
      uVar9 = (ulong)*(byte *)(*(long *)(&DAT_00001290 + *(long *)(this + 600)) + 0x20);
      if (*(long *)(&DAT_00001290 + *(long *)(this + 600)) == 0) {
        uVar9 = 0;
      }
      param_3[2] = uVar9;
      goto LAB_00055854;
    case 0x259:
      uVar9 = (ulong)(*(int *)(&DAT_00001150 + *(long *)(this + 600)) + 1);
      break;
    case 0x25a:
      uVar9 = (ulong)*(uint *)(&DAT_00001154 + *(long *)(this + 600));
      break;
    case 0x25b:
      uVar9 = (ulong)*(uint *)(&DAT_000011a0 + *(long *)(this + 600));
      break;
    case 0x25c:
      uVar9 = 0;
      uVar12 = (ulong)*(uint *)(&DAT_00001188 + *(long *)(this + 600)) /
               (ulong)*(uint *)(&DAT_00001190 + *(long *)(this + 600));
LAB_00055872:
      param_3[2] = uVar12;
      goto switchD_000553d0_caseD_1;
    case 0x25d:
      param_3[2] = 7;
      goto LAB_00055854;
    default:
      if (param_2 != 500) goto switchD_000553d0_caseD_1;
      uVar9 = (ulong)(byte)this[0x290];
    }
LAB_00055850:
    param_3[2] = uVar9;
LAB_00055854:
    uVar9 = 0;
    goto switchD_000553d0_caseD_1;
  case 3:
    lVar10 = *(long *)(this + 0x250);
    if ((lVar10 != 0) && (uVar12 = param_2 - 700, uVar12 < 9)) {
      *(long *)(lVar10 + -0x1b8 + param_2 * 8) = param_3[2];
      goto LAB_00055854;
    }
    if ((lVar10 != 0) && (uVar12 = param_2 - 0x2ee, uVar12 < 9)) {
      *(long *)(lVar10 + -0x300 + param_2 * 8) = param_3[2];
      goto LAB_00055854;
    }
    if (param_2 < 0x7d2) {
      if (param_2 != 500) {
        if (param_2 == 0x1f5) {
          iVar3 = iVar15;
          if (*(int *)(this + 0x278) <= *(int *)(this + 0x280)) break;
          telemetryRelease(this,(int)uVar12,(int)lVar10);
        }
        else {
          if (param_2 != 0x1f6) goto switchD_000553d0_caseD_1;
          sampleToShmem(this,*(ulong *)(this + 0x270));
        }
        goto LAB_000555e0;
      }
      uVar12 = (ulong)(byte)this[0x290];
      if (uVar12 != 1) goto LAB_00055872;
      if (lVar10 == 0) {
        kmdTelemetryInitContext(*(long *)(this + 600),(undefined *)((long)&MACH_HEADER.magic + 3));
      }
      param_3[2] = 1;
      goto LAB_00055854;
    }
    switch(param_2) {
    default:
      goto switchD_000553d0_caseD_1;
    case 0x7d5:
      **(undefined8 **)(this + 0x288) = 0;
      uVar7 = IGSupportMDAPI::finalizeOaBuffer
                        ((IGSupportMDAPI *)(this + 0x2d8),'\x01',(undefined4 *)(this + 0x10));
      iVar3 = (int)uVar7;
      break;
    case 0x7d6:
      uVar2 = *(uint *)(param_3 + 2);
      pIVar16 = (IGSupportMDAPI *)(this + 0x2d8);
      uVar4 = IGSupportMDAPI::encodeOaBufferTimerPeriod(pIVar16,uVar2);
      uVar9 = IGSupportMDAPI::decodeOaBufferTimerPeriod(pIVar16,(byte)uVar4);
      IGSupportMDAPI::setOaBufferTimer(pIVar16,(uint)(uVar2 != 0),uVar4);
      iVar3 = 0;
      param_3[2] = uVar9 & 0xffffffff;
      break;
    case 0x7d7:
      uVar7 = IGSupportMDAPI::enableOaBufferCollection
                        ((IGSupportMDAPI *)(this + 0x2d8),(undefined4 *)(this + 0x10));
      iVar3 = (int)uVar7;
      break;
    case 0x7d8:
      uVar7 = IGSupportMDAPI::disableOABufferCollection
                        ((IGSupportMDAPI *)(this + 0x2d8),(undefined4 *)(this + 0x10));
      iVar3 = (int)uVar7;
      break;
    case 0x7dc:
      if (local_58 == 0) {
        uVar9 = 0xfffffffffffffff9;
        goto switchD_000553d0_caseD_1;
      }
      iVar3 = iVar15;
      if ((bool)*(char *)(local_58 + 10) != (param_3[2] != 0)) {
        lVar10 = (-(ulong)(param_3[2] == 0) | 1) + (long)*(int *)(this + 0x27c);
        *(int *)(this + 0x27c) = (int)lVar10;
        IGAccelTraceStreamManager::ktraceStateChanged
                  ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18),1,lVar10);
        iVar3 = 0;
        *(bool *)(local_58 + 10) = param_3[2] != 0;
      }
      break;
    case 0x7e1:
      puVar1 = (undefined *)param_3[2];
      if (puVar1 != puVar5) {
        ___idvarSetParamLocked(0x2b,puVar1,1);
      }
      iVar3 = 0;
      if ((*(undefined **)(this + 0x270) != puVar1) &&
         (*(undefined **)(this + 0x270) = puVar1, ((ulong)puVar1 & 0x300) != 0)) {
        IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
        IGPerfCounterConfig::SendAllPrologs
                  (*(IGPerfCounterConfig **)(this + 0x288),(uint)*(undefined8 *)(this + 0x270));
        goto LAB_00055559;
      }
      break;
    case 0x7e2:
      pIVar16 = (IGSupportMDAPI *)(this + 0x2d8);
      uVar2 = IGSupportMDAPI::encodeOaBufferTimerPeriod(pIVar16,*(uint *)(param_3 + 2));
      uVar9 = IGSupportMDAPI::decodeOaBufferTimerPeriod(pIVar16,(byte)uVar2);
      IGSupportMDAPI::setOaBufferTimerState
                (pIVar16,(uint)(param_3[4] != 0),uVar2,*(uint *)(param_3 + 3));
      param_3[2] = uVar9 & 0xffffffff;
    case 0x7d2:
      uVar2 = *(uint *)(*(IntelAccelerator **)(this + 600) + 0x1180);
      uVar4 = *(uint *)(param_3 + 4);
      if (uVar2 < *(uint *)(param_3 + 4)) {
        uVar4 = uVar2;
      }
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
      if (uVar4 == 0) {
        this_01 = *(IntelAccelerator **)(this + 600);
      }
      else {
        this_01 = *(IntelAccelerator **)(this + 600);
        *(uint *)(*(long *)(this_01 + 0x1270) + 0xa008) =
             ((uint)((ulong)(uVar4 * 3) * 0x51eb851f >> 0x20) & 0xfffffff0) << 0x13;
      }
      this[0x338] = (IGTelemetryManager)(uVar4 != 0);
LAB_00055560:
      bVar11 = 0;
LAB_00055562:
      IntelAccelerator::SafeForceWake(this_01,bVar11);
LAB_000555e0:
      iVar3 = 0;
      break;
    case 0x7e5:
      uVar7 = IGSupportMDAPI::setOABufferPointers
                        ((IGSupportMDAPI *)(this + 0x2d8),(int)param_3[3],(int)param_3[4],
                         *(uint *)(param_3 + 2) & 3);
      iVar3 = (int)uVar7;
      goto LAB_00055c35;
    }
    break;
  case 10:
    this_00 = *(IGPerfCounterConfig **)(this + 0x288);
    iVar3 = iVar15;
    if (this_00 != (IGPerfCounterConfig *)0x0) {
      iVar3 = 1;
LAB_000554f5:
      IGPerfCounterConfig::setUncorePerfCounterEnableFlag(this_00,iVar3);
      goto LAB_000555e0;
    }
    break;
  case 0xb:
    this_00 = *(IGPerfCounterConfig **)(this + 0x288);
    iVar3 = iVar15;
    if (this_00 != (IGPerfCounterConfig *)0x0) {
      iVar3 = 0;
      goto LAB_000554f5;
    }
    break;
  case 0xc:
    iVar3 = iVar15;
    if (((uint)*(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) >> 0x1b & 1) != 0) break;
    *(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) =
         *(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) | 0x8000000;
    this_01 = *(IntelAccelerator **)(this + 600);
    bVar11 = 1;
    goto LAB_00055562;
  case 0xd:
    iVar3 = iVar15;
    if (((uint)*(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) >> 0x1b & 1) == 0) break;
    *(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) =
         *(ulong *)(&DAT_000011c0 + *(long *)(this + 600)) & 0xfffffffff7ffffff;
LAB_00055559:
    this_01 = *(IntelAccelerator **)(this + 600);
    goto LAB_00055560;
  case 0x17:
    IGPerfCounterConfig::SetClockGating
              (*(IGPerfCounterConfig **)(this + 0x288),(uint)(param_3[1] != 0));
    goto LAB_000555e0;
  case 0x19:
    uVar9 = *(ulong *)(this + 0x238);
    param_3[5] = uVar9;
    *(ulong *)(this + 0x238) = uVar9 | 1;
  }
switchD_000553d0_caseD_0:
  uVar9 = (ulong)iVar3;
switchD_000553d0_caseD_1:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return uVar9;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGTelemetryManager::patchSafeContext()

void __thiscall IGTelemetryManager::patchSafeContext(IGTelemetryManager *this)

{
  long lVar1;
  
  if (*(long **)(&DAT_00001298 + *(long *)(this + 600)) != (long *)0x0) {
    lVar1 = (**(code **)(**(long **)(&DAT_00001298 + *(long *)(this + 600)) + 0x2e0))();
    configureFlexEUCounters(this,(int *)(&DAT_00001140 + lVar1),0x1910);
    patchOAContextControl(this,(int *)(&DAT_00001140 + lVar1),0x1910);
  }
  this[8] = (IGTelemetryManager)0x0;
  return;
}



// IGTelemetryManager::disableCollection()

void __thiscall IGTelemetryManager::disableCollection(IGTelemetryManager *this)

{
  *(undefined8 *)(this + 0x230) = 1;
  return;
}



// IGTelemetryManager::enableCollection()

void __thiscall IGTelemetryManager::enableCollection(IGTelemetryManager *this)

{
  if (*(IGPerfCounterConfig **)(this + 0x288) != (IGPerfCounterConfig *)0x0) {
    IGPerfCounterConfig::resendCurrentConfig
              (*(IGPerfCounterConfig **)(this + 0x288),(uint)*(undefined8 *)(this + 0x270));
  }
  *(undefined8 *)(this + 0x230) = 0;
  return;
}



// IGTelemetryManager::shutdown()

int __thiscall IGTelemetryManager::shutdown(IGTelemetryManager *this,int param_1,int param_2)

{
  int in_EAX;
  int iVar1;
  undefined *puVar2;
  undefined4 in_register_00000014;
  undefined4 in_register_00000034;
  
  if (*(long *)(this + 0x288) != 0) {
    *(undefined2 *)(this + 0x290) = 0;
    (**(code **)(**(long **)(*(long *)(this + 600) + 0x380) + 0x158))
              (*(long **)(*(long *)(this + 600) + 0x380),CONCAT44(in_register_00000034,param_1),
               CONCAT44(in_register_00000014,param_2));
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
    if (*(long *)(this + 0x288) != 0) {
      IGPerfCounterRestoreOnRC6Exit::clearRc6WABatchBufferPointer
                ((IGPerfCounterRestoreOnRC6Exit *)(*(long *)(this + 0x288) + 0x8f8));
    }
    if ((*(byte *)(*(long *)(this + 600) + 0xc78) & 2) != 0) {
      IGPerfCounterConfig::SendAllPrologs(*(IGPerfCounterConfig **)(this + 0x288),0x300);
      operation(this,0xd,0,(long *)0x0,0,0);
    }
    if (*(IGPerfCounterConfig **)(this + 0x288) != (IGPerfCounterConfig *)0x0) {
      IGPerfCounterConfig::~IGPerfCounterConfig(*(IGPerfCounterConfig **)(this + 0x288));
      _IOFreeTypeImpl(IGPerfCounterConfig::operator_delete);
      *(undefined8 *)(this + 0x288) = 0;
    }
    if (*(long *)(this + 0x368) != 0) {
      _IOLockFree();
    }
    puVar2 = ___idvarGetParam(10);
    *(int *)(this + 0xc) = (int)puVar2;
    *(undefined8 *)(this + 0x238) = 0;
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),0);
    this[0x338] = (IGTelemetryManager)0x0;
    iVar1 = IGAccelTraceStreamManager::ktraceStateChanged
                      ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18),1,0);
    return iVar1;
  }
  return in_EAX;
}



// IGTelemetryManager::checkArgs(TelemetryOperation*, TelemetryOperation*, unsigned long long,
// unsigned long long*)

undefined8 __thiscall
IGTelemetryManager::checkArgs
          (IGTelemetryManager *this,ulong *param_1,undefined8 param_2,long param_3,ulong *param_4)

{
  uint uVar1;
  
  if (*param_4 < 0x30) {
    return 0xe00002c2;
  }
  if (param_3 != 0x30) {
    if ((*param_1 & 0xfffffffffffffffe) != 0x7da) {
      return 0xe00002c2;
    }
    if (*(int *)((long)param_1 + 0x3c) == 1) {
      uVar1 = (uint)param_1[8];
      if (0x100 < uVar1) {
        return 0xe00002c2;
      }
    }
    else {
      if (*(int *)((long)param_1 + 0x3c) != 2) {
        return 0xe00002c2;
      }
      uVar1 = (uint)param_1[8];
      if (0x40 < uVar1) {
        return 0xe00002c2;
      }
      if (uVar1 != *(uint *)((long)param_1 + 0x44)) {
        return 0xe00002c2;
      }
    }
    if (param_1[6] != 0xffffffffffffffff) {
      if (uVar1 == 0) {
        return 0xe00002c2;
      }
      if (*(int *)((long)param_1 + 0x44) - 0x41U < 0xffffffc0) {
        return 0xe00002c2;
      }
    }
  }
  *param_4 = 0x30;
  return 0;
}



// IGTelemetryManager::setLLCSB(int)

void IGTelemetryManager::setLLCSB(void)

{
  return;
}



// IGTelemetryManager::telemetryOperationWrapper(TelemetryConnection&, TelemetryOperation*,
// TelemetryOperation*, unsigned long long, unsigned long long*, task*)

ulong __thiscall
IGTelemetryManager::telemetryOperationWrapper
          (IGTelemetryManager *this,long param_1,ulong *param_2,ulong *param_3,long param_4,
          ulong *param_5,ulonglong param_6)

{
  long *plVar1;
  ulong uVar2;
  bool bVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  
  uVar4 = checkArgs(this,param_2,param_2,param_4,param_5);
  if ((int)uVar4 != 0) {
    return uVar4;
  }
  plVar1 = *(long **)(this + 600);
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  bVar3 = false;
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  if (*param_2 == 3) {
    if (param_2[1] == 0x7d5) {
      bVar3 = true;
      if ((*(char *)(param_1 + 9) == '\0') && (*(int *)(this + 0x30c) != 0)) {
        param_3[4] = param_2[4];
        param_3[3] = param_2[3];
        param_3[2] = param_2[2];
        uVar6 = *param_2;
        param_3[1] = param_2[1];
        *param_3 = uVar6;
        param_3[5] = 0xfffffffffffffffa;
        IOGraphicsAccelerator2::acceleratorUnlock(*(IOGraphicsAccelerator2 **)(this + 600));
        goto LAB_0005618c;
      }
    }
    else {
      bVar3 = false;
    }
  }
  if (*(char *)(param_1 + 8) == '\0') {
    *(undefined1 *)(param_1 + 8) = 1;
    telemetryRetain(this);
    if ((*(ulong **)(this + 0x288) != (ulong *)0x0) &&
       (*(int *)(this + 0x278) == *(int *)(this + 0x280) + 1)) {
      **(ulong **)(this + 0x288) = param_2[4];
    }
  }
  uVar6 = *param_2;
  uVar5 = operation(this,uVar6,param_2[1],(long *)param_2,param_1,param_6);
  param_2[5] = uVar5;
  uVar2 = param_2[1];
  *param_3 = *param_2;
  param_3[1] = uVar2;
  param_3[2] = param_2[2];
  param_3[3] = param_2[3];
  param_3[4] = param_2[4];
  param_3[5] = uVar5;
  if (uVar5 == 6) {
    telemetryRelease(this,(int)uVar6,(int)uVar2);
    *(undefined1 *)(param_1 + 8) = 0;
    param_3[5] = 0;
    if (bVar3) {
LAB_00056156:
      *(undefined1 *)(param_1 + 9) = 0;
    }
  }
  else if ((bool)(bVar3 & uVar5 == 0)) goto LAB_00056156;
  plVar1 = *(long **)(this + 600);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
LAB_0005618c:
  return uVar4 & 0xffffffff;
}



// IOGraphicsAccelerator2::acceleratorUnlock()

void __thiscall IOGraphicsAccelerator2::acceleratorUnlock(IOGraphicsAccelerator2 *this)

{
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  return;
}



// IGTelemetryManager::sampleToShmem(unsigned long long)

void __thiscall IGTelemetryManager::sampleToShmem(IGTelemetryManager *this,ulong param_1)

{
  long lVar1;
  IntelAccelerator *this_00;
  long lVar2;
  undefined8 uVar3;
  uint64_t uVar4;
  undefined *puVar5;
  ulong local_48;
  undefined8 local_40;
  undefined8 local_38;
  undefined8 local_30;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  uVar4 = _mach_absolute_time();
  *(uint64_t *)(*(long *)(this + 0x228) + 0x20) = uVar4;
  if ((param_1 & 0x20) != 0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
  }
  local_30 = 0;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0;
  readEDRAMCounters(this,&local_48);
  lVar1 = *(long *)(this + 0x228);
  *(ulong *)(lVar1 + 0x28) = local_48;
  *(undefined8 *)(lVar1 + 0x30) = local_40;
  *(undefined8 *)(lVar1 + 0x38) = local_38;
  *(undefined8 *)(lVar1 + 0x40) = local_30;
  uVar3 = rdmsr(0x621);
  lVar1 = *(long *)(this + 0x228);
  *(ulong *)(lVar1 + 0x48) = (ulong)(((uint)uVar3 & 0x7f) * 100);
  this_00 = *(IntelAccelerator **)(this + 600);
  lVar2 = *(long *)(this_00 + 0x1270);
  *(ulong *)(lVar1 + 0x50) =
       (ulong)(((*(uint *)((long)&nlist_00145948.n_strx + lVar2) >> 8 & 0xff) * 0x32) / 3);
  *(ulong *)(lVar1 + 0x58) = (ulong)(*(uint *)(lVar2 + 0xa01c) >> 7 & 0x7f) * 0x32;
  if ((param_1 & 0x20) != 0) {
    IntelAccelerator::SafeForceWake(this_00,0);
  }
  puVar5 = ___idvarGetParam(0x30);
  *(undefined **)(*(long *)(this + 0x228) + 0x60) = puVar5;
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGTelemetryManager::updateKTraceRefCount(int)

void __thiscall IGTelemetryManager::updateKTraceRefCount(IGTelemetryManager *this,int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(this + 0x27c);
  *(int *)(this + 0x27c) = (int)((long)param_1 + (long)iVar1);
  IGAccelTraceStreamManager::ktraceStateChanged
            ((IGAccelTraceStreamManager *)(*(long *)(this + 600) + 0xe18),1,
             (long)param_1 + (long)iVar1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTimeConverter::gpuGetFullTicsGivenRawTics(unsigned long long, unsigned long long volatile*)

ulong __cdecl IGTimeConverter::gpuGetFullTicsGivenRawTics(ulong param_1,long *param_2)

{
  uint uVar1;
  uint uVar3;
  ulong uVar2;
  
  uVar3 = (uint)(param_1 >> 0x22);
  uVar1 = uVar3 & 3;
  uVar2 = (ulong)uVar1;
  if (param_2[uVar2] == 0) {
    if (uVar2 == 0) {
      *param_2 = param_2[3] + 0x10;
    }
    else {
      param_2[uVar2] = param_2[uVar1 - 1];
    }
    param_2[uVar3 + 1 & 3] = 0;
  }
  return param_2[uVar2] << 0x20 | param_1 & 0xfffffffff;
}



// IGTelemetryManager::patchContextImageRCS(SGfxHardwareContextImageRCS*)

void __thiscall IGTelemetryManager::patchContextImageRCS(IGTelemetryManager *this,long param_1)

{
  configureFlexEUCounters(this,(int *)(&DAT_00001140 + param_1),0x1910);
  patchOAContextControl(this,(int *)(&DAT_00001140 + param_1),0x1910);
  return;
}



// IGTelemetryManager::configureFlexEUCounters(unsigned int*, int)

void __thiscall
IGTelemetryManager::configureFlexEUCounters(IGTelemetryManager *this,int *param_1,int param_2)

{
  uint uVar1;
  undefined4 *puVar2;
  ulong uVar3;
  ulong uVar4;
  uint uVar5;
  bool bVar6;
  
  if (((&DAT_000011c3)[*(long *)(this + 600)] & 0x10) == 0) {
    if (*(long *)(this + 0x288) == 0) {
      uVar1 = 6;
      puVar2 = &_g_defaultFlexEU;
    }
    else {
      puVar2 = *(undefined4 **)(*(long *)(this + 0x288) + 0xb8);
      bVar6 = puVar2 == (undefined4 *)0x0;
      if (bVar6) {
        puVar2 = &_g_defaultFlexEU;
      }
      uVar1 = bVar6 ^ 7;
    }
    if (*param_1 != 0x5000000) {
      if (param_2 < 0x74c) {
        if (param_2 < 0xf) {
          return;
        }
      }
      else if ((((param_1[0x73e] == 0xe458) && (param_1[0x740] == 0xe558)) &&
               (param_1[0x742] == 0xe658)) &&
              (((param_1[0x744] == 0xe758 && (param_1[0x746] == 0xe45c)) &&
               ((param_1[0x748] == 0xe55c && (param_1[0x74a] == 0xe65c)))))) {
        uVar3 = 0x73e;
        if (FindFlexEUsInEngContextBuffer(unsigned_int*,int)::found == '\0') {
          FindFlexEUsInEngContextBuffer(unsigned_int*,int)::found = '\x01';
        }
LAB_00056531:
        uVar4 = 0;
        uVar5 = 0;
        while( true ) {
          if (param_1[(uVar3 & 0xffffffff) + uVar4 * 2] == puVar2[(ulong)uVar5 * 2]) {
            param_1[(uVar3 & 0xffffffff) + uVar4 * 2 + 1] = puVar2[(ulong)uVar5 * 2 + 1];
            uVar5 = uVar5 + 1;
          }
          if (5 < uVar4) break;
          uVar4 = uVar4 + 1;
          if (uVar1 <= uVar5) {
            return;
          }
        }
        return;
      }
      uVar3 = 0;
      do {
        if ((((param_1[uVar3] == 0xe458) && (param_1[uVar3 + 2] == 0xe558)) &&
            ((param_1[uVar3 + 4] == 0xe658 &&
             (((param_1[uVar3 + 6] == 0xe758 && (param_1[uVar3 + 8] == 0xe45c)) &&
              (param_1[uVar3 + 10] == 0xe55c)))))) && (param_1[uVar3 + 0xc] == 0xe65c)) {
          if ((int)uVar3 < 0) {
            return;
          }
          goto LAB_00056531;
        }
        uVar3 = uVar3 + 1;
      } while (param_2 - 0xe != uVar3);
    }
  }
  return;
}



// IGTelemetryManager::patchOAContextControl(unsigned int*, int)

void __thiscall
IGTelemetryManager::patchOAContextControl(IGTelemetryManager *this,int *param_1,uint param_2)

{
  IntelAccelerator *this_00;
  ulong uVar1;
  
  if (((byte)(*(IntelAccelerator **)(this + 600))[0x11c3] & 0x10) != 0) {
    return;
  }
  if (*param_1 != 0x5000000) {
    if ((int)param_2 < 0xd5) {
      if ((int)param_2 < 1) goto LAB_000565d8;
    }
    else if (param_1[0xd4] == 0x2360) {
      uVar1 = 0xd4;
      if (FindOAContextControlInEngContextBuffer(unsigned_int*,int)::found == '\0') {
        FindOAContextControlInEngContextBuffer(unsigned_int*,int)::found = '\x01';
      }
LAB_00056607:
      *(undefined4 *)((long)param_1 + ((long)((uVar1 << 0x20) + 0x100000000) >> 0x1e)) =
           *(undefined4 *)(this + 0x10);
      return;
    }
    uVar1 = 0;
    do {
      if (param_1[uVar1] == 0x2360) {
        if ((int)uVar1 != -1) goto LAB_00056607;
        break;
      }
      uVar1 = uVar1 + 1;
    } while (param_2 != uVar1);
  }
LAB_000565d8:
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 600),1);
  this_00 = *(IntelAccelerator **)(this + 600);
  *(undefined4 *)(*(long *)(this_00 + 0x1270) + 0x2360) = 1;
  IntelAccelerator::SafeForceWake(this_00,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryManager::onConnectionStop(TelemetryConnection&, task*)

void __cdecl
IGTelemetryManager::onConnectionStop(IGTelemetryManager *param_1,long param_2,int param_3)

{
  int extraout_EDX;
  int extraout_EDX_00;
  int iVar1;
  long lVar2;
  
  lVar2 = param_2;
  if (*(char *)(param_2 + 10) != '\0') {
    iVar1 = *(int *)(param_1 + 0x27c);
    *(int *)(param_1 + 0x27c) = (int)((long)iVar1 + -1);
    lVar2 = 1;
    IGAccelTraceStreamManager::ktraceStateChanged
              ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 600) + 0xe18),1,(long)iVar1 + -1);
    *(undefined1 *)(param_2 + 10) = 0;
    param_3 = extraout_EDX;
  }
  iVar1 = (int)lVar2;
  if (*(char *)(param_2 + 9) != '\0') {
    **(undefined8 **)(param_1 + 0x288) = 0;
    iVar1 = 1;
    IGSupportMDAPI::finalizeOaBuffer
              ((IGSupportMDAPI *)(param_1 + 0x2d8),'\x01',(undefined4 *)(param_1 + 0x10));
    *(undefined1 *)(param_2 + 9) = 0;
    param_3 = extraout_EDX_00;
  }
  if (*(char *)(param_2 + 8) != '\0') {
    telemetryRelease(param_1,iVar1,param_3);
    *(undefined1 *)(param_2 + 8) = 0;
  }
  return;
}



// IGTelemetryManager::readEDRAMCounters(unsigned long long*)

void __thiscall IGTelemetryManager::readEDRAMCounters(IGTelemetryManager *this,ulong *param_1)

{
  long lVar1;
  
  if ((*(long *)(&DAT_00001290 + *(long *)(this + 600)) == 0) ||
     (*(char *)(*(long *)(&DAT_00001290 + *(long *)(this + 600)) + 0x20) == '\0')) {
    lVar1 = 0;
    do {
      param_1[lVar1] = 0;
      lVar1 = lVar1 + 1;
    } while (lVar1 != 4);
  }
  else {
    lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 600));
    *param_1 = (ulong)(uint)(*(int *)(&DAT_00117250 + lVar1) + *(int *)(&DAT_00117260 + lVar1));
    param_1[1] = (ulong)(uint)(*(int *)(&DAT_00117254 + lVar1) + *(int *)(&DAT_00117264 + lVar1));
    param_1[2] = 0;
    param_1[3] = 0;
  }
  return;
}



// IGTelemetryManager::telemetryInitOaBuffer(TelemetryConnection&, MDAPIInitOABufferOp*,
// MDAPIInitOABufferOp*, unsigned long long, unsigned long long*)

undefined4 __thiscall
IGTelemetryManager::telemetryInitOaBuffer
          (IGTelemetryManager *this,long param_1,undefined8 *param_2,undefined8 *param_3,
          long param_4,ulong *param_5)

{
  IGSupportMDAPI *this_00;
  long *plVar1;
  uint uVar2;
  int iVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_34;
  
  uVar5 = 0xffffffff;
  if ((((param_2 != (undefined8 *)0x0) && (param_3 != (undefined8 *)0x0)) &&
      (param_5 != (ulong *)0x0)) && ((uVar5 = 0xe00002c2, param_4 == 0x20 && (0x1f < *param_5)))) {
    param_3[3] = param_2[3];
    param_3[2] = param_2[2];
    uVar4 = *param_2;
    param_3[1] = param_2[1];
    *param_3 = uVar4;
    plVar1 = *(long **)(this + 600);
    _OSIncrementAtomic(plVar1 + 0x12);
    _IOLockLock(plVar1[0x11]);
    _OSDecrementAtomic(plVar1 + 0x12);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
    _IOLockLock(*(undefined8 *)(this + 0x368));
    if ((*(char *)(param_1 + 9) == '\0') && (*(int *)(this + 0x30c) != 0)) {
      *(undefined4 *)((long)param_3 + 0x1c) = 0xfffffffa;
      _IOLockUnlock(*(undefined8 *)(this + 0x368));
      plVar1 = *(long **)(this + 600);
      (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(plVar1[0x11]);
      uVar5 = 0xe00002bc;
    }
    else {
      *(undefined1 *)(param_1 + 9) = 1;
      if (*(char *)(param_1 + 8) == '\0') {
        *(undefined1 *)(param_1 + 8) = 1;
        telemetryRetain(this);
      }
      local_38 = *(int *)((long)param_3 + 0xc);
      local_34 = *(uint *)(param_3 + 2);
      local_3c = *(uint *)((long)param_3 + 0x14);
      this_00 = (IGSupportMDAPI *)(this + 0x2d8);
      uVar2 = IGSupportMDAPI::encodeOaBufferSize(this_00,*(uint *)(param_3 + 1));
      iVar3 = IGSupportMDAPI::decodeOaBufferSize(this_00,(byte)uVar2);
      local_40 = 0;
      uVar4 = IGSupportMDAPI::initializeOaBuffer
                        (this_00,local_34,local_38,uVar2,&local_40,local_3c,'\x01');
      *(int *)((long)param_3 + 0x1c) = (int)uVar4;
      *(int *)(param_3 + 1) = iVar3;
      *(uint *)(param_3 + 3) = local_40;
      _IOLockUnlock(*(undefined8 *)(this + 0x368));
      plVar1 = *(long **)(this + 600);
      uVar5 = 0;
      (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(plVar1[0x11]);
    }
  }
  return uVar5;
}



// IGTelemetryManager::telemetryReadOaBuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*,
// unsigned long long, unsigned long long*, TelemetryConnection&)

ulong __thiscall
IGTelemetryManager::telemetryReadOaBuffer
          (IGTelemetryManager *this,long param_1,int *param_2,long param_3,long *param_4,
          long param_5)

{
  long *plVar1;
  ulong uVar2;
  
  uVar2 = 0xffffffff;
  if ((((param_1 != 0) && (param_2 != (int *)0x0)) && (param_4 != (long *)0x0)) &&
     (((uVar2 = 0xfffffff9, *param_4 == 0xc && (param_3 == 0x20)) && (*(int *)(param_1 + 8) != 0))))
  {
    plVar1 = *(long **)(this + 600);
    _OSIncrementAtomic();
    _IOLockLock(plVar1[0x11]);
    _OSDecrementAtomic(plVar1 + 0x12);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
    if (*(char *)(param_5 + 8) == '\0') {
      *(undefined1 *)(param_5 + 8) = 1;
      telemetryRetain(this);
    }
    uVar2 = IGSupportMDAPI::readOABuffer((IGSupportMDAPI *)(this + 0x2d8),param_1,param_2);
    plVar1 = *(long **)(this + 600);
    (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar1[0x11]);
    param_2[2] = (int)uVar2;
    uVar2 = uVar2 & 0xffffffff;
  }
  return uVar2;
}



// IGTelemetryManager::telemetryMapOaBufferMemory(IntelDeviceMapStatsMemInOut*,
// IntelDeviceMapStatsMemInOut*, unsigned long long, unsigned long long*, task*)

undefined4 __thiscall
IGTelemetryManager::telemetryMapOaBufferMemory
          (IGTelemetryManager *this,long *param_1,long *param_2,long param_3,undefined8 *param_4,
          ulonglong param_5)

{
  long lVar1;
  undefined4 uVar2;
  
  uVar2 = 0xffffffff;
  if (((param_1 != (long *)0x0) && (param_2 != (long *)0x0)) && (param_4 != (undefined8 *)0x0)) {
    *param_4 = 0x10;
    uVar2 = 0xe00002c2;
    if (param_3 == 0x10) {
      lVar1 = *param_1;
      param_2[1] = param_1[1];
      *param_2 = lVar1;
      uVar2 = IGSupportMDAPI::mapOABufferMemory((IGSupportMDAPI *)(this + 0x2d8),param_2,param_5);
      return uVar2;
    }
  }
  return uVar2;
}



// IGTelemetryManager::getThreadInfo(unsigned long long)

ulong * __thiscall IGTelemetryManager::getThreadInfo(IGTelemetryManager *this,ulong param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  ulong *puVar4;
  uint64_t uVar5;
  void *pvVar6;
  ulong *local_30;
  ulong local_28;
  
  if (((&DAT_000011c3)[*(long *)(this + 600)] & 0x10) == 0) {
    lVar1 = *(long *)(*(long *)(this + 0x348) + 0x10);
    local_28 = param_1;
    uVar2 = IGHashTable<>::slotIndex((IGHashTable<> *)(this + 0x340),&local_28);
    pvVar6 = *(void **)(lVar1 + CONCAT44(extraout_var,uVar2) * 0x18);
    if (pvVar6 != (void *)0x0) {
      do {
        iVar3 = _memcmp(pvVar6,&local_28,8);
        if (iVar3 == 0) {
          puVar4 = *(ulong **)((long)pvVar6 + 8);
          if (puVar4 != (ulong *)0x0) {
            _OSIncrementAtomic(puVar4 + 1);
            return puVar4;
          }
          goto LAB_00056b54;
        }
        pvVar6 = *(void **)((long)pvVar6 + 0x10);
      } while (pvVar6 != (void *)0x0);
    }
    puVar4 = (ulong *)_IOMallocTypeImpl(&getThreadInfo(unsigned_long_long)::kalloc_type_view_2830);
    local_30 = puVar4;
    if (puVar4 == (ulong *)0x0) {
      getThreadInfo();
      puVar4 = (ulong *)0x0;
    }
    else {
      *puVar4 = local_28;
      *(undefined4 *)(puVar4 + 1) = 1;
      uVar5 = _mach_absolute_time();
      puVar4[0x17] = uVar5;
      puVar4[0x18] = uVar5;
      IGHashTable<>::add((IGHashTable<> *)(this + 0x340),&local_28,(ulong *)&local_30);
    }
  }
  else {
LAB_00056b54:
    puVar4 = (ulong *)0x0;
  }
  return puVar4;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::add(unsigned long long const&, PerThreadInfo* const&)

void __thiscall IGHashTable<>::add(IGHashTable<> *this,ulong *param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  undefined4 extraout_var;
  ulong *puVar8;
  
  if (*(long *)(this + 8) != 0) {
    uVar1 = *(ulong *)(*(long *)(this + 8) + 8);
    if ((((uVar1 < 0x4000) && (this[0x20] != (IGHashTable<>)0x0)) &&
        (uVar2 = *(ulong *)(this + 0x10), uVar2 != 0)) &&
       ((0x32 < ((uVar2 - *(long *)(this + 0x18)) * 100) / uVar2 &&
        (0x19 < (ulong)(*(long *)(this + 0x18) * 100) / uVar1)))) {
      resizeAndRehash(this,uVar1 * 2);
    }
    uVar7 = slotIndex(this,param_1);
    puVar8 = (ulong *)_IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::
                                         kalloc_type_view_14);
    if (puVar8 != (ulong *)0x0) {
      *puVar8 = *param_1;
      puVar8[1] = *param_2;
      puVar8[2] = 0;
      lVar6 = CONCAT44(extraout_var,uVar7) * 0x18;
      puVar3 = *(undefined8 **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + lVar6);
      puVar8[3] = (ulong)puVar3;
      *puVar3 = puVar8;
      lVar4 = *(long *)(*(long *)(this + 8) + 0x10);
      *(ulong **)(lVar4 + 8 + lVar6) = puVar8 + 2;
      lVar5 = *(long *)(lVar4 + 0x10 + lVar6);
      *(long *)(lVar4 + 0x10 + lVar6) = lVar5 + 1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) + (ulong)(lVar5 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
    }
  }
  return;
}



// IGTelemetryManager::countThreadInfoRefs(unsigned int&)

int __thiscall IGTelemetryManager::countThreadInfoRefs(IGTelemetryManager *this,int *param_1)

{
  uint64_t uVar1;
  int iVar2;
  long local_68;
  long local_60;
  undefined8 local_58;
  IGTelemetryManager *local_50;
  undefined8 local_48;
  long local_40;
  int *local_38;
  
  uVar1 = _mach_absolute_time();
  *param_1 = 0;
  local_50 = this + 0x340;
  iVar2 = 0;
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  local_40 = 0;
  local_48 = 1;
  local_38 = param_1;
  IGHashTable<>::Iterator::next((Iterator *)&local_68);
  if ((local_68 != **(long **)(this + 0x348)) || (local_60 != 0)) {
    iVar2 = 0;
    do {
      iVar2 = iVar2 + (uint)(*(int *)(*(long *)(local_60 + 8) + 8) == 0);
      if (*(long *)(*(long *)(local_60 + 8) + 0xc0) + 1000000000U < uVar1) {
        *local_38 = *local_38 + 1;
      }
      IGHashTable<>::Iterator::next((Iterator *)&local_68);
    } while ((local_68 != **(long **)(this + 0x348)) || (local_60 != 0));
  }
  if (local_40 != 0) {
    IGHashTable<>::shrinkIfNeeded((IGHashTable<> *)local_50);
  }
  return iVar2;
}



// IGTelemetryManager::deleteThreadInfo(PerThreadInfo*)

void __thiscall IGTelemetryManager::deleteThreadInfo(IGTelemetryManager *this,long param_1)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  IGTelemetryManager *pIVar4;
  ulong uVar5;
  long *plVar6;
  long lVar7;
  ulong uVar8;
  char *pcVar9;
  ulong local_68;
  long local_60;
  undefined8 local_58;
  IGTelemetryManager *local_50;
  undefined8 local_48;
  long local_40;
  uint64_t local_38;
  
  uVar5 = _mach_absolute_time();
  if (param_1 != 0) {
    _OSDecrementAtomic(param_1 + 8);
  }
  local_50 = this + 0x340;
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  local_40 = 0;
  local_48 = 1;
  IGHashTable<>::Iterator::next((Iterator *)&local_68);
  local_38 = uVar5;
  if (local_68 != **(ulong **)(this + 0x348)) goto LAB_00056dcd;
  do {
    if (local_60 == 0) {
      if (local_40 == 0) {
        return;
      }
      IGHashTable<>::shrinkIfNeeded((IGHashTable<> *)local_50);
      return;
    }
LAB_00056dcd:
    do {
      lVar3 = local_60;
      uVar2 = local_68;
      lVar1 = *(long *)(local_60 + 8);
      if ((*(int *)(lVar1 + 8) == 0) && (*(long *)(lVar1 + 0xc0) + 1000000000U < uVar5)) {
        uVar5 = 0;
        do {
          lVar7 = *(long *)(lVar1 + 0x10 + uVar5 * 8) - *(long *)(lVar1 + 0x60 + uVar5 * 8);
          if (lVar7 != 0) {
            _gpu_accumulate_time
                      (2,0,uVar5 & 0xffffffff,lVar7,*(undefined8 *)(lVar1 + 0x38 + uVar5 * 8));
          }
          pIVar4 = local_50;
          uVar5 = uVar5 + 1;
        } while (uVar5 != 5);
        plVar6 = *(long **)(lVar3 + 0x18);
        local_60 = *(long *)plVar6[1];
        if (local_60 == 0) {
          if ((int)uVar2 < 1) {
LAB_00056e73:
            local_48 = CONCAT71(local_48._1_7_,1);
          }
          else {
            uVar5 = uVar2 & 0xffffffff;
            do {
              if ((long)uVar5 < 1) goto LAB_00056e73;
              uVar5 = uVar5 - 1;
              uVar8 = uVar5 & 0xffffffff;
            } while (*(long *)(*(long *)(*(long *)(local_50 + 8) + 0x10) + 0x10 + uVar8 * 0x18) == 0
                    );
            local_60 = **(long **)(*(long *)(*(long *)(*(long *)(local_50 + 8) + 0x10) + 8 +
                                            uVar8 * 0x18) + 8);
            local_68 = uVar8;
          }
        }
        lVar1 = *(long *)(lVar3 + 0x10);
        if (lVar1 == 0) {
          if (*plVar6 != lVar3) {
LAB_00056f5f:
            pcVar9 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00056f6f:
                    // WARNING: Subroutine does not return
            _panic(pcVar9,lVar3,0x1f2,"IGHash.h",0x1f2);
          }
          *(long **)(*(long *)(*(long *)(local_50 + 8) + 0x10) + 8 + uVar2 * 0x18) = plVar6;
        }
        else {
          if (*(long *)(lVar1 + 0x18) != lVar3 + 0x10) {
            pcVar9 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_00056f6f;
          }
          if (*plVar6 != lVar3) goto LAB_00056f5f;
          *(long **)(lVar1 + 0x18) = plVar6;
          plVar6 = *(long **)(lVar3 + 0x18);
        }
        *plVar6 = lVar1;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar3);
        plVar6 = (long *)(*(long *)(*(long *)(pIVar4 + 8) + 0x10) + 0x10 + uVar2 * 0x18);
        *plVar6 = *plVar6 + -1;
        *(ulong *)(pIVar4 + 0x18) = *(long *)(pIVar4 + 0x18) - (ulong)(*plVar6 == 0);
        *(long *)(pIVar4 + 0x10) = *(long *)(pIVar4 + 0x10) + -1;
        local_40 = local_40 + 1;
        _IOFreeTypeImpl(&deleteThreadInfo(PerThreadInfo*)::kalloc_type_view_2913);
        uVar5 = local_38;
      }
      IGHashTable<>::Iterator::next((Iterator *)&local_68);
    } while (local_68 != **(ulong **)(this + 0x348));
  } while( true );
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  
  *(undefined ***)this = &__const::~IGHashTable;
  clear(this);
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 != (IGVector<> *)0x0) {
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// IGPerfCounterRestoreOnRC6Exit::clearRc6WABatchBufferPointer()

void __thiscall
IGPerfCounterRestoreOnRC6Exit::clearRc6WABatchBufferPointer(IGPerfCounterRestoreOnRC6Exit *this)

{
  int iVar1;
  IntelAccelerator *this_00;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
  this_00 = *(IntelAccelerator **)this;
  iVar1 = *(int *)(*(long *)(this_00 + 0x1270) + 0x2058);
  while (iVar1 != 0) {
    (**(code **)(**(long **)(this_00 + 0x380) + 0x158))();
    *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)this) + 0x2058) = 0;
    _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
    _thread_block(0);
    this_00 = *(IntelAccelerator **)this;
    iVar1 = *(int *)(*(long *)(this_00 + 0x1270) + 0x2058);
  }
  IntelAccelerator::SafeForceWake(this_00,0);
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::shrinkIfNeeded()

void __thiscall IGHashTable<>::shrinkIfNeeded(IGHashTable<> *this)

{
  ulong uVar1;
  
  if ((this[0x20] != (IGHashTable<>)0x0) && (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) {
    if ((((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 < 0xc) &&
       ((ulong)(*(long *)(this + 0x18) * 100) / *(ulong *)(*(long *)(this + 8) + 8) < 0xc)) {
      resizeAndRehash(this,*(ulong *)(*(long *)(this + 8) + 8) >> 1);
      return;
    }
  }
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::resizeAndRehash(unsigned long)

undefined8 __thiscall IGHashTable<>::resizeAndRehash(IGHashTable<> *this,ulong param_1)

{
  IGVector<> *this_00;
  ulong uVar1;
  long lVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  ulong *puVar5;
  long lVar6;
  ulong uVar7;
  undefined8 *puVar8;
  undefined8 uVar9;
  ulong uVar10;
  long *plVar11;
  char *pcVar12;
  long lVar13;
  
  this_00 = *(IGVector<> **)(this + 8);
  puVar5 = (ulong *)_IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14)
  ;
  *puVar5 = 0;
  puVar5[1] = 0;
  puVar5[2] = 0;
  if (param_1 == 0) {
    *(ulong **)(this + 8) = puVar5;
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
  }
  else {
    auVar3._8_8_ = 0;
    auVar3._0_8_ = param_1;
    lVar6 = SUB168(auVar3 * ZEXT816(0x18),0);
    if (lVar6 < 0) {
      lVar6 = -0x8000000000000000;
    }
    if (SUB168(auVar3 * ZEXT816(0x18),8) != 0) {
      lVar6 = -0x8000000000000000;
    }
    uVar7 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar6);
    if (uVar7 == 0) {
      param_1 = puVar5[1];
    }
    else {
      uVar10 = puVar5[2];
      if (uVar10 != 0) {
        if (*puVar5 != 0) {
          lVar6 = 0;
          uVar10 = 0;
          do {
            uVar1 = puVar5[2];
            *(undefined8 *)(uVar7 + 0x10 + lVar6) = *(undefined8 *)(uVar1 + 0x10 + lVar6);
            uVar9 = *(undefined8 *)(uVar1 + lVar6);
            *(undefined8 *)(uVar7 + 8 + lVar6) = *(undefined8 *)(uVar1 + 8 + lVar6);
            *(undefined8 *)(uVar7 + lVar6) = uVar9;
            uVar10 = uVar10 + 1;
            lVar6 = lVar6 + 0x18;
          } while (uVar10 < *puVar5);
          uVar10 = puVar5[2];
        }
        auVar4._8_8_ = 0;
        auVar4._0_8_ = puVar5[1];
        lVar6 = SUB168(ZEXT816(0x18) * auVar4,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar13 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar4,8) == 0) {
          lVar13 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           uVar10,lVar13);
      }
      puVar5[2] = uVar7;
      puVar5[1] = param_1;
      *puVar5 = param_1;
    }
    *(ulong **)(this + 8) = puVar5;
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    if (param_1 != 0) {
      puVar8 = (undefined8 *)puVar5[2];
      do {
        *puVar8 = 0;
        puVar8[1] = puVar8;
        puVar8[2] = 0;
        puVar8 = puVar8 + 3;
        param_1 = param_1 - 1;
      } while (param_1 != 0);
    }
  }
  lVar6 = *(long *)this_00;
  if (lVar6 != 0) {
    lVar13 = 0;
    do {
      for (puVar5 = *(ulong **)(*(long *)(this_00 + 0x10) + lVar13 * 0x18); puVar5 != (ulong *)0x0;
          puVar5 = (ulong *)puVar5[2]) {
        add(this,puVar5,puVar5 + 1);
      }
      lVar13 = lVar13 + 1;
    } while (lVar13 != lVar6);
  }
  uVar7 = *(ulong *)(this_00 + 8);
  if (uVar7 != 0) {
    lVar6 = *(long *)(this_00 + 0x10);
    uVar10 = 0;
    do {
      lVar13 = *(long *)(lVar6 + uVar10 * 0x18);
      if (lVar13 != 0) {
        do {
          lVar2 = *(long *)(lVar13 + 0x10);
          if (lVar2 == 0) {
            plVar11 = *(long **)(lVar13 + 0x18);
            if (*plVar11 != lVar13) {
LAB_0005730d:
              pcVar12 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0005731d:
                    // WARNING: Subroutine does not return
              _panic(pcVar12,lVar13,0x230,"IGHash.h",0x230);
            }
            *(long **)(lVar6 + 8 + uVar10 * 0x18) = plVar11;
          }
          else {
            if (*(long *)(lVar2 + 0x18) != lVar13 + 0x10) {
              pcVar12 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
              goto LAB_0005731d;
            }
            if (**(long **)(lVar13 + 0x18) != lVar13) goto LAB_0005730d;
            *(long **)(lVar2 + 0x18) = *(long **)(lVar13 + 0x18);
            plVar11 = *(long **)(lVar13 + 0x18);
          }
          *plVar11 = lVar2;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar6 = *(long *)(this_00 + 0x10);
          lVar13 = *(long *)(lVar6 + uVar10 * 0x18);
        } while (lVar13 != 0);
        uVar7 = *(ulong *)(this_00 + 8);
      }
      uVar10 = uVar10 + 1;
    } while (uVar10 < uVar7);
  }
  *(undefined8 *)this_00 = 0;
  IGVector<>::~IGVector(this_00);
  uVar9 = _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19
                          ,this_00);
  return CONCAT71((int7)((ulong)uVar9 >> 8),1);
}



// IGVector<IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::slotIndex(unsigned long long const&) const

uint __thiscall IGHashTable<>::slotIndex(IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  ulong uVar2;
  byte bVar3;
  ulong uVar4;
  ulong uVar5;
  
  lVar1 = 0;
  if (*(ulong *)(*(long *)(this + 8) + 8) != 0) {
    for (; (*(ulong *)(*(long *)(this + 8) + 8) >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
    }
  }
  uVar5 = *param_1;
  uVar2 = uVar5 >> 0x38 | (uVar5 & 0xff000000000000) >> 0x28 | (uVar5 & 0xff0000000000) >> 0x18;
  uVar4 = POPCOUNT(uVar5) << 0x3f |
          uVar2 | (uVar5 & 0xff00000000) >> 8 | (uVar5 & 0xff000000) << 8 |
          (uVar5 & 0xff0000) << 0x18 | (uVar5 & 0xff00) << 0x28 | uVar5 << 0x38;
  bVar3 = (byte)lVar1;
  uVar5 = uVar4 >> 3 ^ uVar5 << 0x3b ^ uVar5 << 0x17 ^ uVar4 >> 0x25 ^
          ((((uVar5 >> 0x38) << 0x39 | uVar5 >> 0x25) + (uVar2 << 0x2f ^ uVar5 >> 0xb)) -
          (uVar4 >> 0x15 ^ uVar5 * -0x20)) + (-uVar4 >> 0xb ^ uVar5 << 0x29 ^ 0xffffffffffffffc5);
  return ((uint)uVar5 ^ (uint)(uVar5 >> (bVar3 & 0x3f)) ^ (int)(uVar5 >> (-bVar3 & 0x3f)) * 0x3df) &
         ~(-1 << (bVar3 & 0x1f));
}



// IGHashTable<unsigned long long, PerThreadInfo*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Iterator::next()

void __thiscall IGHashTable<>::Iterator::next(Iterator *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  ulong *puVar4;
  long *plVar5;
  
  if (this[0x20] == (Iterator)0x0) {
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
    if (*(ulong *)this == uVar3) {
      return;
    }
    if ((*(long *)(this + 8) != 0) &&
       (lVar1 = *(long *)(*(long *)(this + 8) + 0x10), *(long *)(this + 8) = lVar1, lVar1 != 0)) {
      return;
    }
    uVar2 = *(ulong *)this + 1;
    *(ulong *)this = uVar2;
  }
  else {
    uVar2 = 0;
    *(undefined8 *)this = 0;
    *(undefined8 *)(this + 8) = 0;
    this[0x20] = (Iterator)0x0;
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
  }
  if (uVar2 < uVar3) {
    plVar5 = (long *)(puVar4[2] + uVar2 * 0x18 + 0x10);
    do {
      uVar2 = uVar2 + 1;
      if (*plVar5 != 0) {
        *(long *)(this + 8) = plVar5[-2];
        return;
      }
      *(ulong *)this = uVar2;
      plVar5 = plVar5 + 3;
    } while (uVar2 != uVar3);
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IntelMTLBlitFunctions::execute(IntelMTLBlit::eTokens, IGAccelCommandQueue&,
// IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IGHeapsAccess&, IOGraphicsAccelerator2&, IGHardwareContext&,
// IOAccelEvent&)

undefined8 __cdecl
IntelMTLBlitFunctions::execute
          (undefined8 param_1,ulong param_2,ulong param_3,ulong param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,int param_9,long *param_10,
          long param_11,long param_12,long param_13,char *param_14,long param_15,
          IntelAccelerator *param_16,undefined8 param_17,undefined8 param_18)

{
  ushort *puVar1;
  undefined1 auVar2 [16];
  ushort uVar3;
  IGAccelTask *pIVar4;
  char cVar5;
  byte bVar6;
  ushort uVar7;
  long lVar8;
  long *plVar9;
  float *pfVar10;
  IGAccelResource *pIVar11;
  undefined8 uVar12;
  long lVar13;
  long *plVar14;
  byte bVar15;
  uint *puVar16;
  ulong uVar17;
  ulong uVar18;
  ulong uVar19;
  long lVar20;
  IGAccelResource *pIVar21;
  char *pcVar22;
  ulong *puVar23;
  uint uVar24;
  undefined8 uVar25;
  ulong uVar26;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  float fVar27;
  float fVar28;
  float fVar29;
  long local_1c0;
  undefined1 local_1b8 [6];
  undefined2 uStack_1b2;
  long local_1b0;
  ulong local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  undefined8 local_188;
  undefined8 local_180;
  long local_178;
  undefined1 local_170 [6];
  undefined2 uStack_16a;
  long local_168;
  ulong local_160;
  undefined8 local_158;
  undefined8 local_150;
  undefined8 local_148;
  undefined8 local_140;
  undefined8 local_138;
  undefined8 local_130;
  undefined8 local_128;
  undefined1 local_120;
  ushort local_11e;
  undefined2 local_11c;
  undefined4 local_118;
  undefined8 local_110;
  undefined1 local_108;
  ulong local_100;
  ulong local_f8;
  long local_f0;
  ulong local_e8;
  ulong local_e0;
  long local_d8;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined4 local_84;
  ulong local_80;
  ulong local_78;
  IGAccelTask *local_70;
  ulong local_68;
  ulong local_60;
  long local_58;
  IGAccelResource *local_50;
  IGAccelResource *local_48;
  IGAccelTask *local_40;
  long local_38;
  
  uVar25 = 0;
  local_38 = param_12;
  switch(param_9) {
  case 0x30000:
    if (0x17 < param_13 - param_12) {
      if (*(uint *)(param_11 + 0xc) <= *(uint *)(param_12 + 0xc)) {
        return 9;
      }
      if (*(long *)(*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0xc) * 8) != 0) {
        plVar9 = (long *)IOAccelResource2::getStorageResource();
        cVar5 = IOAccelResource2::requirePageoff();
        if (cVar5 != '\0') {
          IGAccelCommandQueue::replayKernelCommand(param_10);
          (**(code **)(*plVar9 + 0x260))(plVar9,0x3f,0xffffffff);
          (**(code **)(**(long **)(param_16 + 0x380) + 0x1c8))
                    (*(long **)(param_16 + 0x380),
                     (ulong)*(byte *)((long)plVar9 + 0x15) * 0x40 + plVar9[7],param_18,0);
          (**(code **)(**(long **)(param_16 + 0x380) + 0x1c8))
                    (*(long **)(param_16 + 0x380),
                     (ulong)*(byte *)((long)plVar9 + 0x16) * 0x40 + plVar9[7],param_18,0);
          return 0;
        }
        return 0;
      }
      return 9;
    }
    break;
  case 0x30001:
    if ((0x37 < param_13 - param_12) && (lVar20 = *(long *)(param_15 + 0x60), lVar20 != 0)) {
      if (*(uint *)(param_12 + 0x20) < *(uint *)(param_11 + 0xc)) {
        pIVar21 = *(IGAccelResource **)
                   (*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0x20) * 8);
      }
      else {
        pIVar21 = (IGAccelResource *)0x0;
      }
      if (*(uint *)(param_11 + 0xc) <= *(uint *)(param_12 + 0x24)) {
        return 9;
      }
      if (pIVar21 == (IGAccelResource *)0x0) {
        return 9;
      }
      pIVar11 = *(IGAccelResource **)
                 (*(long *)(param_11 + 0x10) + (ulong)*(uint *)(param_12 + 0x24) * 8);
      if (pIVar11 == (IGAccelResource *)0x0) {
        return 9;
      }
      lVar8 = *(long *)(param_15 + 0x68) + -0x40;
      if (lVar8 < (long)(ulong)*(uint *)(param_12 + 0x28)) {
        return 8;
      }
      local_40 = (IGAccelTask *)((ulong)*(uint *)(param_12 + 0x28) + lVar20);
      if (local_40 == (IGAccelTask *)0x0) {
        return 8;
      }
      if (lVar8 < (long)(ulong)*(uint *)(param_12 + 0x2c)) {
        return 8;
      }
      puVar23 = (ulong *)(lVar20 + (ulong)*(uint *)(param_12 + 0x2c));
      if (puVar23 == (ulong *)0x0) {
        return 8;
      }
      local_1c0 = 0;
      local_68 = 0;
      local_80 = local_80 & 0xffffffff00000000;
      local_78 = local_78 & 0xffffffff00000000;
      IGAccelResource::get_tex_data(pIVar21,&local_1c0,(undefined4 *)&local_80);
      local_48 = pIVar11;
      IGAccelResource::get_tex_data(pIVar11,(long *)&local_68,(undefined4 *)&local_78);
      local_50 = pIVar21;
      if (*(long *)(local_38 + 0x10) == 0) {
        lVar20 = IOAccelResource2::getStorageResource();
        plVar9 = (long *)(lVar20 + 0x180);
      }
      else {
        for (plVar9 = *(long **)(pIVar21 + 0x240); plVar9 != (long *)0x0;
            plVar9 = (long *)plVar9[0x15]) {
          if (*plVar9 == *(long *)(local_38 + 0x10)) goto LAB_000580a8;
        }
        plVar9 = (long *)0x0;
      }
LAB_000580a8:
      pIVar21 = local_48;
      if (*(long *)(local_38 + 0x18) == 0) {
        lVar20 = IOAccelResource2::getStorageResource();
        plVar14 = (long *)(lVar20 + 0x180);
LAB_000580ec:
        if (((int)plVar14[8] != 0) || (*(int *)((long)plVar14 + 0x1c) != 0)) {
          if (*(short *)(local_38 + 0x32) == 0) {
            uVar17 = (ulong)*(ushort *)(local_38 + 0x30);
            if ((*(int *)((long)plVar14 + 0x1c) == 0) && (*(ushort *)(local_38 + 0x30) == 0)) {
              if (*(short *)(local_38 + 0x34) == 0) {
                puVar1 = (ushort *)plVar14[0xb];
                if (*(byte *)(plVar14 + 0x14) < 2) {
                  *puVar1 = *puVar1 & 0xfffe;
                  *(ushort *)plVar14[0xc] = *(ushort *)plVar14[0xc] | 1;
                }
                else {
                  *puVar1 = *puVar1 | 1;
                  *(ushort *)plVar14[0xc] = *(ushort *)plVar14[0xc] & 0xfffe;
                }
                goto LAB_00058183;
              }
              uVar17 = 0;
            }
            bVar15 = (byte)*(short *)(local_38 + 0x34);
            bVar6 = bVar15 & 0x1f;
            puVar1 = (ushort *)(plVar14[0xb] + uVar17 * 2);
            *puVar1 = *puVar1 & ((ushort)(-2 << bVar6) | (ushort)(0xfffffffe >> 0x20 - bVar6));
            puVar1 = (ushort *)(plVar14[0xc] + uVar17 * 2);
            *puVar1 = *puVar1 | (ushort)(1 << (bVar15 & 0x1f));
          }
          else {
            uVar7 = *(ushort *)(local_38 + 0x30);
            lVar20 = plVar14[0xb];
            lVar8 = plVar14[0xc];
            do {
              uVar3 = (ushort)*(undefined4 *)(local_38 + 0x34);
              puVar1 = (ushort *)(lVar20 + (ulong)uVar7 * 2);
              *puVar1 = *puVar1 & ~uVar3;
              puVar1 = (ushort *)(lVar8 + (ulong)uVar7 * 2);
              *puVar1 = *puVar1 | uVar3;
              uVar7 = uVar7 + 1;
            } while ((uint)uVar7 <
                     (uint)*(ushort *)(local_38 + 0x32) + (uint)*(ushort *)(local_38 + 0x30));
          }
        }
LAB_00058183:
        uVar24 = 0;
        if ((*(byte *)((long)plVar14 + 0x56) & 8) != 0) {
          uVar24 = (uint)*(ushort *)(local_38 + 0x30) +
                   (*(ushort *)(local_38 + 0x30) / 3 & 0xfffffffe) * -3 & 0xffff;
        }
      }
      else {
        for (plVar14 = *(long **)(local_48 + 0x240); plVar14 != (long *)0x0;
            plVar14 = (long *)plVar14[0x15]) {
          if (*plVar14 == *(long *)(local_38 + 0x18)) goto LAB_000580ec;
        }
        plVar14 = (long *)0x0;
        uVar24 = 0;
      }
      (**(code **)(*(long *)pIVar21 + 0x168))(pIVar21,uVar24,*(undefined2 *)(local_38 + 0x34));
      *(long *)((long)local_40 + 0x20) = *(long *)((long)local_40 + 0x20) + local_1c0;
      puVar23[4] = puVar23[4] + local_68;
      lVar20 = *(long *)(param_16 + 0x1290);
      bVar6 = IGAccelResource::isDisplayableIOSurface();
      pIVar21 = local_50;
      if (bVar6 == 0) {
        if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(*puVar23 >> 0x38) & 0x7e)) & 0x30)
            == 0) goto LAB_000582bc;
        lVar8 = IOAccelResource2::getStorageResource();
        uVar17 = *(ulong *)(lVar8 + 200 + (ulong)(*(long *)(lVar8 + 0x88) == 0) * 8);
        if (*(ulong *)(lVar20 + 0x108) * 2 < uVar17) {
          uVar19 = puVar23[1];
          uVar17 = *puVar23 & 0x81ffffffffffffff;
          uVar18 = 0x3200000000000000;
        }
        else {
          uVar18 = *puVar23 & 0x81ffffffffffffff;
          uVar19 = puVar23[1];
          if (*(ulong *)(lVar20 + 0x108) >> 1 < uVar17) {
            uVar17 = 0x3000000000000000;
          }
          else {
            uVar17 = 0x2400000000000000;
          }
        }
        uVar18 = uVar18 | uVar17;
      }
      else {
        uVar19 = puVar23[1];
        uVar18 = *puVar23 & 0x81ffffffffffffff;
      }
      *puVar23 = uVar18;
      puVar23[1] = uVar19;
LAB_000582bc:
      uVar17 = puVar23[3];
      if ((*(byte *)((long)local_40 + 0x18) & 7) != 0) {
        IGAccelResource::fillSurfaceStateAuxInfo(pIVar21,(long)plVar9,(long)local_40,0);
      }
      if ((uVar17 & 7) != 0) {
        IGAccelResource::fillSurfaceStateAuxInfo(local_48,(long)plVar14,(long)puVar23,1);
      }
      return 0;
    }
    break;
  case 0x30002:
    if (0x1f < param_13 - param_12) {
      pcVar22 = param_14;
      IGAccelCommandQueue::replayKernelCommand(param_10);
      lVar20 = local_38;
      if (*(uint *)(param_11 + 0xc) <= *(uint *)(local_38 + 0xc)) {
        return 9;
      }
      plVar9 = *(long **)(*(long *)(param_11 + 0x10) + (ulong)*(uint *)(local_38 + 0xc) * 8);
      if (plVar9 == (long *)0x0) {
        return 9;
      }
      local_40 = *(IGAccelTask **)(param_14 + 8);
      uVar17 = 0;
      lVar8 = local_38;
      (**(code **)(*plVar9 + 0x168))(plVar9,0,0);
      ___bzero(&local_1c0,0x138);
      IGVector<>::grow((IGVector<> *)&local_100,4);
      local_e8 = 0;
      local_e0 = 0;
      local_d8 = 0;
      IGVector<>::grow((IGVector<> *)&local_e8,4);
      local_1c0 = 0;
      _local_1b8 = 0;
      local_1b0 = 0;
      local_1a8 = 0;
      local_1a0 = 0;
      local_198 = 0;
      local_190 = 0;
      local_180 = 0;
      local_188 = 0x100000000;
      local_178 = 0;
      _local_170 = 0;
      local_168 = 0;
      local_160 = 0;
      local_158 = 0;
      local_150 = 0;
      local_148 = 0;
      local_138 = 0;
      local_140 = 0x100000000;
      local_130 = 0;
      local_128 = 0;
      local_11c = 0;
      local_110 = 0;
      local_108 = 0;
      local_100 = 0;
      local_e8 = 0;
      local_b8 = 0;
      local_b0 = 0;
      local_a8 = 0;
      local_a0 = 0;
      local_98 = 0;
      local_90 = 0;
      local_118 = *(undefined4 *)(lVar20 + 0x10);
      local_120 = *(undefined1 *)(lVar20 + 0x1c);
      local_11e = 3;
      local_178 = (**(code **)(*(long *)plVar9[8] + 0x130))();
      cVar5 = *(char *)((long)plVar9 + 0x14);
      if (cVar5 == '\0') {
LAB_000577a3:
        uVar17 = plVar9[0x1f];
      }
      else if (cVar5 == -0x7e) {
        uVar17 = (ulong)*(uint *)((long)plVar9 + 0xfc);
      }
      else if (cVar5 == -0x80) goto LAB_000577a3;
      local_178 = uVar17 + local_178;
      local_150 = CONCAT44(*(undefined4 *)(local_38 + 0x18),(undefined4)local_150);
      local_170._0_5_ = CONCAT14(0,*(uint *)(local_38 + 0x14));
      uVar26 = (ulong)*(uint *)(local_38 + 4) + 0xfffffffe0;
      lVar13 = 0;
      local_58 = 0;
      local_60 = 0;
      local_68 = 0;
      uVar18 = uVar26 >> 4 & 0xffffffff;
      uVar17 = local_68;
      uVar19 = local_60;
      lVar20 = local_58;
      if ((uVar18 != 0) &&
         (lVar13 = _IOMallocTypeVarImpl
                             (&IGIOMallocAllocatorPolicy<_blit_rect>::allocate(unsigned_long)::
                               kalloc_type_view_24,uVar18 << 4), uVar17 = uVar18, uVar19 = uVar18,
         lVar20 = lVar13, lVar13 == 0)) {
        lVar13 = 0;
        uVar17 = local_68;
        uVar19 = local_60;
        lVar20 = local_58;
      }
      local_58 = lVar20;
      local_60 = uVar19;
      local_68 = uVar17;
      if ((uVar26 & 0xffffffff0) != 0) {
        lVar20 = 0;
        do {
          fVar27 = (float)*(uint *)(local_38 + 0x24 + lVar20);
          param_2 = (ulong)(uint)fVar27;
          fVar28 = (float)*(uint *)(local_38 + 0x28 + lVar20);
          param_3 = (ulong)(uint)fVar28;
          fVar29 = (float)*(uint *)(local_38 + 0x2c + lVar20);
          param_4 = (ulong)(uint)fVar29;
          *(float *)(lVar13 + lVar20) = (float)*(uint *)(local_38 + 0x20 + lVar20);
          *(float *)(lVar13 + 4 + lVar20) = fVar27;
          *(float *)(lVar13 + 8 + lVar20) = fVar28;
          *(float *)(lVar13 + 0xc + lVar20) = fVar29;
          lVar20 = lVar20 + 0x10;
          uVar18 = uVar18 - 1;
        } while (uVar18 != 0);
      }
      AddDstResourceEvents((IGVector<> *)&local_100,(long)plVar9);
      plVar14 = (long *)IOAccelResource2::getStorageResource();
      uVar25 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
      if (plVar14 != plVar9) {
        uVar25 = AddDstResourceEvents((IGVector<> *)&local_100,(long)plVar14);
      }
      if (local_100 == local_f8) {
        uVar12 = IGVector<>::grow((IGVector<> *)&local_100,local_100 * 2);
        uVar25 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03);
        if ((char)uVar12 != '\0') goto LAB_00057fa8;
      }
      else {
LAB_00057fa8:
        *(undefined8 *)(local_f0 + local_100 * 8) = param_18;
        local_100 = local_100 + 1;
      }
      IntelAccelerator::submitFill
                (uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_16,
                 (long)&local_1c0,&local_68,local_40,lVar8,pcVar22);
      if (local_58 != 0) {
        lVar20 = local_60 << 4;
        if (lVar20 < 0) {
          lVar20 = -0x8000000000000000;
        }
        if (local_60 >> 0x3c != 0) {
          lVar20 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<_blit_rect>::
                            deallocate(_blit_rect*,unsigned_long)::kalloc_type_view_29,local_58,
                           lVar20);
      }
      if (local_d8 != 0) {
        lVar20 = local_e0 * 8;
        if (lVar20 < 0) {
          lVar20 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_e0) {
          lVar20 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                            kalloc_type_view_29,local_d8,lVar20);
      }
      if (local_f0 == 0) {
        return 0;
      }
      lVar20 = local_f8 * 8;
      if (lVar20 < 0) {
        lVar20 = -0x8000000000000000;
      }
      if (0x1fffffffffffffff < local_f8) {
        lVar20 = -0x8000000000000000;
      }
LAB_0005807a:
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                          kalloc_type_view_29,local_f0,lVar20);
      return 0;
    }
    break;
  case 0x30003:
    if (0x57 < param_13 - param_12) {
      pcVar22 = param_14;
      IGAccelCommandQueue::replayKernelCommand(param_10);
      uVar17 = (param_13 - param_12) - 0x58;
      auVar2._8_8_ = 0;
      auVar2._0_8_ = uVar17;
      local_48 = SUB168(auVar2 * ZEXT816(0xaaaaaaaaaaaaaaab),8);
      if (*(uint *)(local_38 + 0x20) < *(uint *)(param_11 + 0xc)) {
        local_40 = *(IGAccelTask **)
                    (*(long *)(param_11 + 0x10) + (ulong)*(uint *)(local_38 + 0x20) * 8);
      }
      else {
        local_40 = (IGAccelTask *)0x0;
      }
      if (*(uint *)(param_11 + 0xc) <= *(uint *)(local_38 + 0x24)) {
        return 9;
      }
      if (local_40 == (IGAccelTask *)0x0) {
        return 9;
      }
      pIVar21 = *(IGAccelResource **)
                 (*(long *)(param_11 + 0x10) + (ulong)*(uint *)(local_38 + 0x24) * 8);
      if (pIVar21 == (IGAccelResource *)0x0) {
        return 9;
      }
      local_70 = *(IGAccelTask **)(param_14 + 8);
      uVar24 = 0;
      local_80 = 0;
      local_78 = 0;
      local_84 = 0;
      IGAccelResource::get_tex_data((IGAccelResource *)local_40,(long *)&local_80,&local_84);
      local_50 = pIVar21;
      IGAccelResource::get_tex_data(pIVar21,(long *)&local_78,&local_84);
      ___bzero(&local_1c0,0x138);
      IGVector<>::grow((IGVector<> *)&local_100,4);
      local_e8 = 0;
      local_e0 = 0;
      local_d8 = 0;
      IGVector<>::grow((IGVector<> *)&local_e8,4);
      pIVar21 = local_50;
      local_1a0 = 0;
      local_198 = 0;
      local_190 = 0;
      local_180 = 0;
      local_188 = 0x100000000;
      local_158 = 0;
      local_150 = 0;
      local_148 = 0;
      local_138 = 0;
      local_140 = 0x100000000;
      local_130 = 0;
      local_128 = 0;
      local_11c = 0;
      local_118 = 0;
      local_110 = 0;
      local_108 = 0;
      local_100 = 0;
      local_e8 = 0;
      local_b8 = 0;
      local_90 = 0;
      local_98 = 0;
      local_a0 = 0;
      local_a8 = 0;
      local_b0 = 0;
      lVar20 = *(long *)(local_38 + 0x18);
      local_11e = (ushort)(*(long *)(local_38 + 0x10) != 0 || lVar20 != 0) << 0xc | 8;
      local_1b0 = (ulong)*(uint *)(local_38 + 0x2c) << 0x20;
      local_1a8 = (ulong)*(uint *)(local_38 + 0x30);
      local_1c0 = *(uint *)(local_38 + 0x28) + local_80;
      _local_1b8 = CONCAT26(*(undefined2 *)(local_38 + 0x48),
                            CONCAT15(0,CONCAT14(*(undefined1 *)(local_38 + 0x50),
                                                *(undefined4 *)(local_38 + 0x34))));
      local_168 = (ulong)*(uint *)(local_38 + 0x3c) << 0x20;
      local_160 = (ulong)*(uint *)(local_38 + 0x40);
      local_178 = *(uint *)(local_38 + 0x38) + local_78;
      local_170._0_5_ = CONCAT14(*(undefined1 *)(local_38 + 0x51),*(undefined4 *)(local_38 + 0x44));
      _local_170 = CONCAT26(*(undefined2 *)(local_38 + 0x48),CONCAT15(0,local_170._0_5_));
      local_120 = *(undefined1 *)(local_38 + 0x4e);
      if (lVar20 == 0) {
        lVar20 = IOAccelResource2::getStorageResource();
        plVar9 = (long *)(lVar20 + 0x180);
LAB_00057b7d:
        if ((*(int *)((long)plVar9 + 0x1c) != 0) || ((int)plVar9[8] != 0)) {
          uVar7 = *(ushort *)(local_38 + 0x4c);
          bVar6 = *(byte *)(local_38 + 0x4f);
          bVar15 = bVar6 & 0x1f;
          puVar1 = (ushort *)(plVar9[0xb] + (ulong)uVar7 * 2);
          *puVar1 = *puVar1 & ((ushort)(-2 << bVar15) | (ushort)(0xfffffffe >> 0x20 - bVar15));
          puVar1 = (ushort *)(plVar9[0xc] + (ulong)uVar7 * 2);
          *puVar1 = *puVar1 | (ushort)(1 << (bVar6 & 0x1f));
        }
        if ((*(byte *)((long)plVar9 + 0x56) & 8) != 0) {
          uVar24 = (uint)*(ushort *)(local_38 + 0x4c) +
                   (*(ushort *)(local_38 + 0x4c) / 3 & 0xfffffffe) * -3 & 0xffff;
        }
      }
      else {
        for (plVar9 = *(long **)(local_50 + 0x240); plVar9 != (long *)0x0;
            plVar9 = (long *)plVar9[0x15]) {
          if (*plVar9 == lVar20) goto LAB_00057b7d;
        }
      }
      (**(code **)(*(long *)pIVar21 + 0x168))(pIVar21,uVar24,*(undefined1 *)(local_38 + 0x4f));
      local_58 = 0;
      local_60 = 0;
      local_68 = 0;
      if (0x17 < uVar17) {
        uVar19 = (ulong)local_48 >> 4;
        lVar20 = uVar19 << 5;
        if (lVar20 < 0) {
          lVar20 = -0x8000000000000000;
        }
        if (2 < (uint)(uVar17 >> 0x3e)) {
          lVar20 = -0x8000000000000000;
        }
        lVar20 = _IOMallocTypeVarImpl
                           (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                             kalloc_type_view_24,lVar20);
        if (lVar20 != 0) {
          puVar16 = (uint *)(local_38 + 0x58);
          pfVar10 = (float *)(lVar20 + 0x1c);
          uVar17 = uVar19;
          do {
            uVar24 = puVar16[1];
            fVar27 = (float)puVar16[4];
            param_3 = (ulong)(uint)fVar27;
            fVar28 = (float)puVar16[5];
            param_4 = (ulong)(uint)fVar28;
            pfVar10[-7] = (float)*puVar16;
            pfVar10[-6] = (float)uVar24;
            pfVar10[-5] = fVar27;
            pfVar10[-4] = fVar28;
            uVar24 = puVar16[3];
            param_2 = (ulong)(uint)(float)uVar24;
            pfVar10[-3] = (float)puVar16[2];
            pfVar10[-2] = (float)uVar24;
            pfVar10[-1] = fVar27;
            *pfVar10 = fVar28;
            pfVar10 = pfVar10 + 8;
            puVar16 = puVar16 + 6;
            uVar17 = uVar17 - 1;
            local_68 = uVar19;
            local_60 = uVar19;
            local_58 = lVar20;
          } while (uVar17 != 0);
        }
      }
      pIVar4 = local_40;
      AddSrcResourceEvents((IGVector<> *)&local_100,(long)local_40);
      pIVar11 = (IGAccelResource *)IOAccelResource2::getStorageResource();
      if (pIVar11 != (IGAccelResource *)pIVar4) {
        AddSrcResourceEvents((IGVector<> *)&local_100,(long)pIVar11);
      }
      AddDstResourceEvents((IGVector<> *)&local_100,(long)pIVar21);
      pIVar11 = (IGAccelResource *)IOAccelResource2::getStorageResource();
      uVar25 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      if (pIVar11 != pIVar21) {
        uVar25 = AddDstResourceEvents((IGVector<> *)&local_100,(long)pIVar11);
      }
      if (local_100 == local_f8) {
        uVar12 = IGVector<>::grow((IGVector<> *)&local_100,local_100 * 2);
        uVar25 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
        if ((char)uVar12 != '\0') goto LAB_00057d44;
      }
      else {
LAB_00057d44:
        *(undefined8 *)(local_f0 + local_100 * 8) = param_18;
        local_100 = local_100 + 1;
      }
      if (local_e8 == local_e0) {
        uVar12 = IGVector<>::grow((IGVector<> *)&local_e8,local_e8 * 2);
        uVar25 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
        if ((char)uVar12 != '\0') goto LAB_00057d96;
      }
      else {
LAB_00057d96:
        *(undefined8 *)(local_d8 + local_e8 * 8) = param_18;
        local_e8 = local_e8 + 1;
      }
      IntelAccelerator::submitBlit
                (uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_16,&local_1c0,
                 &local_68,local_70,0,pcVar22);
      if (local_58 != 0) {
        lVar20 = local_60 << 5;
        if (lVar20 < 0) {
          lVar20 = -0x8000000000000000;
        }
        if (local_60 >> 0x3b != 0) {
          lVar20 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                            kalloc_type_view_29,local_58,lVar20);
      }
      if (local_d8 != 0) {
        lVar20 = local_e0 * 8;
        if (lVar20 < 0) {
          lVar20 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_e0) {
          lVar20 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                            kalloc_type_view_29,local_d8,lVar20);
      }
      if (local_f0 == 0) {
        return 0;
      }
      lVar20 = local_f8 * 8;
      if (lVar20 < 0) {
        lVar20 = -0x8000000000000000;
      }
      if (0x1fffffffffffffff < local_f8) {
        lVar20 = -0x8000000000000000;
      }
      goto LAB_0005807a;
    }
    break;
  case 0x30004:
    if (param_13 - param_12 < 0x10) {
      return 10;
    }
    uVar17 = (ulong)*(uint *)(param_12 + 0xc);
    if ((ulong)(param_13 - param_12) < uVar17 * 8 + 0x14) {
      return 10;
    }
    if (*(uint *)(param_12 + 0x10) < *(uint *)(param_12 + 0xc)) {
      return 10;
    }
    if (uVar17 != 0) {
      uVar19 = 0;
      while( true ) {
        uVar24 = *(uint *)(param_12 + 0x14 + uVar19 * 8);
        if (*(uint *)(param_11 + 0xc) <= uVar24) {
          return 9;
        }
        if (*(long *)(*(long *)(param_11 + 0x10) + (ulong)uVar24 * 8) == 0) break;
        uVar19 = uVar19 + 1;
        if (uVar17 == uVar19) {
          return 0;
        }
      }
      return 9;
    }
    return 0;
  case 0x30005:
    goto switchD_00057518_caseD_30005;
  default:
    if (param_9 == 5) {
      return 0;
    }
  }
  uVar25 = 10;
switchD_00057518_caseD_30005:
  return uVar25;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandQueue::replayKernelCommand(bool)

void __cdecl IGAccelCommandQueue::replayKernelCommand(long *param_1)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  bool bVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  long lVar10;
  uint uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  
  lVar13 = param_1[0xee];
  if (lVar13 == 0) {
    return;
  }
  uVar1 = *(uint *)(lVar13 + 4);
  lVar14 = param_1[0xd6];
  uVar3 = *(undefined8 *)(lVar14 + 0x18);
  uVar4 = *(undefined8 *)(lVar14 + 0x50);
  uVar5 = *(undefined8 *)(lVar14 + 0x58);
  uVar2 = *(uint *)(param_1 + 0x104);
  if ((int)uVar2 < 0) {
    uVar11 = *(uint *)(lVar14 + 0x6c);
  }
  else {
    lVar10 = param_1[(ulong)uVar2 + 0xf4];
    uVar11 = *(uint *)(lVar14 + 0x6c);
    if (lVar10 != 0) {
      *(uint *)(param_1 + 0x104) = uVar2 - 1;
      bVar6 = false;
      goto LAB_000583be;
    }
  }
  bVar6 = true;
  lVar10 = 0;
LAB_000583be:
  lVar9 = param_1[0xed];
  lVar7 = param_1[0xc4];
  if (*(long *)(lVar14 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar14 + 0x20) = 0;
    lVar14 = param_1[0xd6];
  }
  *(long *)(lVar14 + 0x50) = param_1[0xef];
  *(long *)(lVar14 + 0x18) = param_1[0xf1];
  *(long *)(lVar14 + 0x58) = param_1[0xf0];
  uVar2 = *(uint *)(param_1 + 0xf2);
  *(uint *)(lVar14 + 0x6c) = uVar2;
  lVar8 = IOAccelResource2::getKernelData();
  lVar12 = (ulong)uVar2 + lVar8;
  if (lVar8 == 0) {
    lVar12 = 0;
  }
  *(long *)(lVar14 + 0x20) = lVar12;
  param_1[0xed] = 0;
  param_1[0xee] = 0;
  param_1[0xef] = 0;
  param_1[0xf0] = 0;
  param_1[0xf1] = 0;
  *(undefined4 *)(param_1 + 0xf2) = 0;
  param_1[0xf3] = 0;
  *(undefined4 *)(param_1 + 0xc4) = 1;
  *(undefined1 *)((long)param_1 + 0x824) = 1;
  (**(code **)(*param_1 + 0xa08))(param_1,lVar9,lVar13,(ulong)uVar1 + lVar13);
  *(undefined1 *)((long)param_1 + 0x824) = 0;
  lVar13 = param_1[0xd6];
  if (*(long *)(lVar13 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar13 + 0x20) = 0;
    lVar13 = param_1[0xd6];
  }
  *(uint *)(param_1 + 0xc4) = (uint)((int)lVar7 != 0);
  *(undefined8 *)(lVar13 + 0x50) = uVar4;
  *(undefined8 *)(lVar13 + 0x18) = uVar3;
  *(undefined8 *)(lVar13 + 0x58) = uVar5;
  *(uint *)(lVar13 + 0x6c) = uVar11;
  lVar9 = IOAccelResource2::getKernelData();
  lVar14 = (ulong)uVar11 + lVar9;
  if (lVar9 == 0) {
    lVar14 = 0;
  }
  *(long *)(lVar13 + 0x20) = lVar14;
  if (!bVar6) {
    lVar13 = param_1[0x104];
    *(int *)(param_1 + 0x104) = (int)lVar13 + 1;
    param_1[(long)(int)lVar13 + 0xf5] = lVar10;
  }
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar5 = *(long *)param_1;
    if (lVar5 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar5 * 2);
      if ((char)uVar2 != '\0') {
        lVar5 = *(long *)param_1;
        goto LAB_0005864f;
      }
    }
    else {
LAB_0005864f:
      *(long *)param_1 = lVar5 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar4 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_0005868b;
    }
    else {
LAB_0005868b:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(param_1 + 0x18,lVar6 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_000586d4;
    }
    else {
LAB_000586d4:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_00058721;
    lVar5 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_00058721:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcResourceEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x16);
    lVar4 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)param_1;
    if (lVar3 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar3 * 2);
      if ((char)uVar2 != '\0') {
        lVar3 = *(long *)param_1;
        goto LAB_000587a6;
      }
    }
    else {
LAB_000587a6:
      *(long *)param_1 = lVar3 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar3 * 8) = (ulong)bVar1 * 0x40 + lVar4;
    }
    lVar4 = (ulong)*(byte *)(param_2 + 0x15) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    lVar4 = *(long *)(param_2 + 0x90);
  }
  lVar3 = *(long *)(param_1 + 0x18);
  if (lVar3 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
    if ((char)uVar2 == '\0') goto LAB_000587fb;
    lVar3 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar3 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4;
LAB_000587fb:
  lVar4 = *(long *)(param_2 + 0x40);
  if (lVar4 != 0) {
    lVar3 = *(long *)(param_1 + 0x18);
    if (lVar3 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar3 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar3 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4 + 0x38;
  }
  return;
}



// IGTelemetryKMD::init(IntelAccelerator*, unsigned long long)

void __thiscall IGTelemetryKMD::init(IGTelemetryKMD *this,long param_1,undefined8 param_2)

{
  long lVar1;
  int iVar2;
  
  *(long *)(this + 0xb0) = param_1;
  lVar1 = *(long *)(param_1 + 0xf18);
  *(long *)(this + 0x1bec8) = lVar1;
  iVar2 = internalContextId + 1;
  *(int *)(this + 0x1beb8) = internalContextId;
  internalContextId = iVar2;
  *(IGTelemetryKMD **)(lVar1 + 0x250) = this;
  IGTelemetryGPU::init((IGTelemetryGPU *)this);
  this[0x38] = (IGTelemetryKMD)((byte)this[0x38] | 4);
  *(undefined8 *)(this + 0x30) = param_2;
  *(undefined **)(this + 0x768) = &DAT_00001140 + param_1;
  *(long *)(this + 0x770) = param_1 + 0xf36;
  *(undefined8 *)(this + 0x1bec0) = 0;
  allocMem(this);
  return;
}



// IGTelemetryKMD::allocMem()

void __thiscall IGTelemetryKMD::allocMem(IGTelemetryKMD *this)

{
  IGMappedBuffer *this_00;
  IGSharedMappedBuffer *this_01;
  long lVar1;
  undefined8 uVar2;
  
  *(undefined4 *)(this + 0x1bef0) = 0x17000;
  *(undefined8 *)(this + 0x1bee8) = 0;
  this_01 = IGSharedMappedBuffer::withOptions(*(long *)(*(long *)(this + 0xb0) + 0x150),0x17000,1,0)
  ;
  *(IGSharedMappedBuffer **)(this + 0x1bee0) = this_01;
  if (this_01 != (IGSharedMappedBuffer *)0x0) {
    lVar1 = IGSharedMappedBuffer::getVirtualAddress(this_01);
    *(long *)(this + 0x1bee8) = lVar1;
    this_00 = *(IGMappedBuffer **)(this + 0x1bee0);
    if (lVar1 == 0) {
      if (this_00 != (IGMappedBuffer *)0x0) {
        (**(code **)(*(long *)this_00 + 0x28))();
      }
      *(undefined8 *)(this + 0x1bee0) = 0;
    }
    else {
      uVar2 = IGMappedBuffer::getGPUVirtualAddress(this_00);
      *(undefined8 *)(this + 0x1bef8) = uVar2;
      *(undefined8 *)(this + 0x1bec0) = *(undefined8 *)(this + 0x1bee8);
    }
  }
  return;
}



// IGTelemetryKMD::shutdown()

int __thiscall IGTelemetryKMD::shutdown(IGTelemetryKMD *this,int param_1,int param_2)

{
  int iVar1;
  
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(this + 0x28);
  iVar1 = IGTelemetryGPU::shutdown((int)this,param_1);
  if (*(long **)(this + 0x1bee0) != (long *)0x0) {
    iVar1 = (**(code **)(**(long **)(this + 0x1bee0) + 0x28))();
    *(undefined8 *)(this + 0x1bee0) = 0;
  }
  return iVar1;
}



// IGTelemetryKMD::dismissPendingSamples()

void __thiscall IGTelemetryKMD::dismissPendingSamples(IGTelemetryKMD *this)

{
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(this + 0x28);
  return;
}



// IGTelemetryKMD::deallocMem()

void __thiscall IGTelemetryKMD::deallocMem(IGTelemetryKMD *this)

{
  if (*(long **)(this + 0x1bee0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x1bee0) + 0x28))();
    *(undefined8 *)(this + 0x1bee0) = 0;
  }
  return;
}



// IGTelemetryKMD::getDeviceConnection()

undefined8 __thiscall IGTelemetryKMD::getDeviceConnection(IGTelemetryKMD *this)

{
  return *(undefined8 *)(this + 0x1bed8);
}



// IGTelemetryKMD::getOperationConnection()

undefined8 __thiscall IGTelemetryKMD::getOperationConnection(IGTelemetryKMD *this)

{
  return *(undefined8 *)(this + 0x1bed0);
}



// IGTelemetryKMD::getOperationIndex(TelemetryOperationIndex)

undefined8 IGTelemetryKMD::getOperationIndex(void)

{
  return 0;
}



// IGTelemetryKMD::sample(unsigned long long)

void __thiscall
IGTelemetryKMD::sample
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          ulong param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  undefined *puVar1;
  undefined8 uVar2;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  long local_40;
  undefined8 local_38;
  undefined8 local_30;
  
  puVar1 = ___idvarGetParam(0x2c);
  if (((ulong)puVar1 & param_10) != 0) {
    checkForCompletedSamples(this);
    local_30 = 0;
    local_38 = 0;
    local_40 = 0;
    local_48 = 0;
    local_50 = 0;
    local_58 = 0;
    initWriteSampleInfo(this,(long)&local_58);
    *(undefined4 *)((long)this + 0x1bf00) = 0;
    *(undefined8 *)(local_40 + 0x228) = 0;
    *(undefined8 *)(local_40 + 0x238) = 0;
    uVar2 = IGTelemetryGPU::writeSampleRequestToGPU(this,param_10,&local_58);
    IntelAccelerator::submitMainRingCommand
              (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               *(void **)((long)this + 0xb0),(long)this + 0x1bf04,
               *(uint *)((long)this + 0x1bf00) >> 2,param_12,param_13,param_14);
    *(long *)((long)this + 0x28) = *(long *)((long)this + 0x28) + 1;
  }
  return;
}



// IGTelemetryKMD::checkForCompletedSamples()

void __thiscall IGTelemetryKMD::checkForCompletedSamples(IGTelemetryKMD *this)

{
  long lVar1;
  undefined8 local_50;
  undefined8 local_48;
  long local_40;
  undefined8 local_38;
  undefined8 local_30;
  undefined8 local_28;
  
  lVar1 = *(long *)(this + 0x20);
  if (lVar1 != *(long *)(this + 0x28)) {
    do {
      local_28 = 0;
      local_30 = 0;
      local_38 = 0;
      local_40 = 0;
      local_48 = 0;
      local_50 = 0;
      (**(code **)(*(long *)this + 0xc0))(this,lVar1,&local_50);
      if (*(long *)(local_40 + 0x358) == *(long *)(local_40 + 0x350)) {
        IGTelemetryShared::emitSample((long *)this);
        lVar1 = *(long *)(this + 0x20) + 1;
        *(long *)(this + 0x20) = lVar1;
      }
      else {
        if ((ulong)(*(long *)(this + 0x28) - *(long *)(this + 0x20)) < 0x3f) {
          return;
        }
        (**(code **)(*(long *)this + 0x58))(this);
        lVar1 = *(long *)(this + 0x20);
      }
    } while (lVar1 != *(long *)(this + 0x28));
  }
  return;
}



// IGTelemetryKMD::initWriteSampleInfo(TelemetrySampleInfo*)

void __thiscall IGTelemetryKMD::initWriteSampleInfo(IGTelemetryKMD *this,long param_1)

{
  (**(code **)(*(long *)this + 0xc0))(this,*(undefined8 *)(this + 0x28),param_1);
  ___bzero(*(undefined8 *)(param_1 + 0x10),0x5c0);
  ___bzero(*(undefined8 *)(param_1 + 0x18),0x6a8);
  return;
}



// IGTelemetryKMD::sampleTimestamp32(unsigned long long)

void IGTelemetryKMD::sampleTimestamp32(void)

{
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryKMD::writeSampleReportPerfCount(TelemetrySampleInfo*, TelemetryItem*)

undefined8 __cdecl IGTelemetryKMD::writeSampleReportPerfCount(IGTelemetryKMD *param_1,long *param_2)

{
  SendReportPerfCount(param_1,param_2);
  return 0x100;
}



// IGTelemetryKMD::SendReportPerfCount(TelemetrySampleInfo*)

void __thiscall IGTelemetryKMD::SendReportPerfCount(IGTelemetryKMD *this,long *param_1)

{
  uint uVar1;
  ulong uVar2;
  
  uVar2 = param_1[1];
  uVar1 = *(uint *)(this + 0x1bf00);
  *(ulong *)(this + (ulong)uVar1 + 0x1bf0c) = *param_1 << 0x20 | uVar2 >> 0x20 & 0xffffffff0000ffff;
  *(ulong *)(this + (ulong)uVar1 + 0x1bf04) =
       (ulong)((uint)uVar2 & 0xffffffc0) << 0x20 | 0x114000002;
  *(uint *)(this + 0x1bf00) = uVar1 + 0x10;
  return;
}



// IGTelemetryKMD::submitBufferBytes(void*, unsigned int)

void __thiscall IGTelemetryKMD::submitBufferBytes(IGTelemetryKMD *this,void *param_1,uint param_2)

{
  _memmove(this + (ulong)*(uint *)(this + 0x1bf00) + 0x1bf04,param_1,(ulong)param_2);
  *(uint *)(this + 0x1bf00) = *(int *)(this + 0x1bf00) + param_2;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryKMD::writeSamplePipeStats(TelemetrySampleInfo*, TelemetryItem*)

long __cdecl
IGTelemetryKMD::writeSamplePipeStats
          (IGTelemetryKMD *param_1,long param_2,long param_3,undefined8 param_4)

{
  uint uVar1;
  
  uVar1 = (**(code **)(*(long *)param_1 + 0x30))(param_1,1);
  SendStoreRegisterToMemoryList(param_1,*(ulong *)(param_2 + 8),uVar1 * 2,param_4,param_3);
  return (ulong)uVar1 << 3;
}



// IGTelemetryKMD::SendStoreRegisterToMemoryList(unsigned long long, unsigned int, unsigned int,
// TelemetryItem const*)

void __thiscall
IGTelemetryKMD::SendStoreRegisterToMemoryList
          (IGTelemetryKMD *this,ulong param_1,uint param_2,undefined8 param_4_00,long param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  uint *puVar6;
  
  if (param_2 != 0) {
    uVar3 = *(uint *)(this + 0x1bf00);
    puVar6 = (uint *)(param_4 + 0x24);
    uVar4 = 0;
    do {
      uVar1 = *puVar6;
      *(ulong *)(this + (ulong)uVar3 + 0x1bf0c) = param_1 & 0x3fffffffc;
      *(ulong *)(this + (ulong)uVar3 + 0x1bf04) = (ulong)(uVar1 & 0x3fffffc) << 0x20 | 0x12400002;
      uVar1 = uVar3 + 0x10;
      uVar5 = param_1 + 8;
      uVar2 = puVar6[-1];
      if (uVar2 != 0) {
        *(ulong *)(this + (ulong)uVar1 + 0x1bf0c) = uVar5 & 0x3fffffffc;
        *(ulong *)(this + (ulong)uVar1 + 0x1bf04) =
             (ulong)(uVar2 >> 2 & 0xffffff) << 0x22 | 0x12400002;
        uVar5 = param_1 + 0x10;
        uVar4 = uVar4 + 1;
        uVar1 = uVar3 + 0x20;
      }
      uVar3 = uVar1;
      uVar4 = uVar4 + 1;
      puVar6 = puVar6 + 10;
      param_1 = uVar5;
    } while (uVar4 < param_2);
    *(uint *)(this + 0x1bf00) = uVar3;
  }
  return;
}



// IGTelemetryKMD::writeSampleGPUReg(TelemetrySampleInfo*, unsigned int, TelemetryItem*)

long __thiscall
IGTelemetryKMD::writeSampleGPUReg(IGTelemetryKMD *this,long param_1,uint param_2,undefined8 param_3)

{
  SendStoreRegisterToMemoryList(this,*(ulong *)(param_1 + 8),param_2,param_3,param_3);
  return (ulong)param_2 << 3;
}



// IGTelemetryKMD::SendStoreRegisterToMemory(unsigned int, unsigned long long)

void __thiscall
IGTelemetryKMD::SendStoreRegisterToMemory(IGTelemetryKMD *this,uint param_1,ulong param_2)

{
  uint uVar1;
  
  uVar1 = *(uint *)(this + 0x1bf00);
  *(ulong *)(this + (ulong)uVar1 + 0x1bf0c) = param_2 & 0x3fffffffc;
  *(ulong *)(this + (ulong)uVar1 + 0x1bf04) = (ulong)(param_1 >> 2 & 0xffffff) << 0x22 | 0x12400002;
  *(uint *)(this + 0x1bf00) = uVar1 + 0x10;
  return;
}



// IGTelemetryKMD::writeSampleTimestampAndTag(TelemetrySampleInfo*)

undefined8 __thiscall
IGTelemetryKMD::writeSampleTimestampAndTag(IGTelemetryKMD *this,ulong *param_1)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  long lVar4;
  
  uVar1 = *param_1;
  uVar2 = param_1[2];
  *(undefined8 *)(uVar2 + 0x350) = 0xdeadbead;
  *(ulong *)(uVar2 + 0x358) = uVar1;
  lVar3 = *(long *)(this + 0x1bec0);
  lVar4 = *(long *)(this + 0x1bef8);
  SendPipeControl(this,0,3,0xdeadbeef,(uVar2 - lVar3) + lVar4 + 0x300);
  SendPipeControl(this,0,1,uVar1,((uVar2 + 0x350) - lVar3) + lVar4);
  return 0xc0;
}



// IGTelemetryKMD::SendPipeControl(FLUSH_TYPE, unsigned int, unsigned long long, unsigned long long)

void __thiscall
IGTelemetryKMD::SendPipeControl
          (IGTelemetryKMD *this,uint param_1,uint param_2,ulong param_3,undefined8 param_4)

{
  uint uVar1;
  char cVar2;
  undefined7 extraout_var;
  ulong local_58 [7];
  
  local_58[6] = *(ulong *)__got::___stack_chk_guard;
  local_58[5] = 0;
  local_58[4] = 0;
  local_58[3] = 0;
  local_58[2] = 0;
  local_58[1] = 0;
  local_58[0] = 0;
  cVar2 = CoreSendPipeControl(*(long *)(this + 0x770),local_58,param_1,param_2,param_3,param_4);
  uVar1 = (int)CONCAT71(extraout_var,cVar2) * 0x18;
  _memcpy(this + (ulong)*(uint *)(this + 0x1bf00) + 0x1bf04,local_58,(ulong)uVar1);
  *(uint *)(this + 0x1bf00) = *(int *)(this + 0x1bf00) + uVar1;
  if (*(long *)__got::___stack_chk_guard == local_58[6]) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryKMD::CoreSendPipeControl(_WA_TABLE*, SGfxPipeControl*, FLUSH_TYPE, unsigned int,
// unsigned long long, unsigned long long)

char __cdecl
IGTelemetryKMD::CoreSendPipeControl
          (long param_1,ulong *param_2,uint param_3,uint param_4,ulong param_5,undefined8 param_6)

{
  ulong *puVar1;
  uint uVar2;
  ulong uVar3;
  ulong uVar4;
  undefined4 uVar5;
  ulong uVar6;
  ulong uVar7;
  byte bVar8;
  ulong uVar9;
  ulong uVar10;
  uint uVar11;
  ulong uVar12;
  ulong uVar13;
  bool bVar14;
  bool bVar15;
  
  uVar11 = param_3 & 1;
  bVar14 = (param_3 & 0x33) == 0;
  bVar15 = (param_3 & 0x4c) == 0;
  if (((param_3 & 0x30000c) == 0x200000) && ((param_3 & 0x800000) == 0 && param_4 == 0)) {
    bVar8 = 1;
  }
  else {
    bVar8 = (byte)(*(ulong *)(param_1 + 0xa4) >> 0x16) & uVar11 != 0;
  }
  param_2[1] = 0;
  param_2[2] = 0;
  *param_2 = 0x10000007a000004;
  *(undefined4 *)(param_2 + 1) = 0;
  param_2[4] = 0;
  param_2[5] = 0;
  param_2[3] = 0x10000007a000004;
  *(undefined4 *)(param_2 + 4) = 0;
  uVar4 = (ulong)(param_3 >> 2 & 1) << 0x2c;
  uVar3 = (ulong)(param_3 >> 3 & 1) << 0x20;
  uVar9 = (ulong)(param_3 >> 6 & 1) << 0x25;
  uVar6 = (ulong)(param_3 >> 0x14 & 1) << 0x2d;
  if ((param_3 & 0xc) != 0) {
    uVar6 = 0;
  }
  if (uVar11 == 0 && (bVar15 || bVar14)) {
    *param_2 = uVar3 | uVar9 | (ulong)(param_3 >> 0x15 & 1) << 0x34 | uVar4 | uVar6 |
               0x10000007a000004;
    *(undefined4 *)(param_2 + 1) = 0;
  }
  else {
    *param_2 = uVar3 | uVar9 | (ulong)uVar11 << 0x21 | uVar4 | uVar6 | 0x11040007a000004;
    param_2[1] = 0x10;
    param_2[2] = 0;
  }
  bVar14 = uVar11 != 0 || !bVar15 && !bVar14;
  uVar3 = (ulong)bVar14;
  puVar1 = param_2 + uVar3 * 3;
  uVar6 = *puVar1;
  uVar2 = (uint)puVar1[1];
  if (((*(uint *)(param_1 + 0x2c) >> 0x12 & 1) != 0) &&
     ((uVar6 & 0x10f00300000000) == 0x10000000000000)) {
    uVar6 = uVar6 | 0x100000000000;
    *puVar1 = uVar6;
    *(uint *)(puVar1 + 1) = uVar2;
  }
  uVar13 = (ulong)uVar11 << 0x22;
  uVar7 = (ulong)(param_3 >> 1 & 1) << 0x2a;
  uVar9 = (ulong)(param_3 >> 4 & 1) << 0x23;
  uVar10 = (ulong)(param_3 >> 5 & 1) << 0x24;
  uVar12 = (ulong)uVar11 << 0x2b;
  uVar4 = (ulong)(param_3 >> 0x17 & 1) << 0x21;
  if (bVar8 == 0) {
    uVar6 = uVar4 | uVar12 | uVar10 | uVar9 | uVar7 | uVar6 & 0xffff33e1ffffffff | uVar13 |
            (ulong)(param_4 & 3) << 0x2e;
    uVar11 = (uVar2 & 3) + ((uint)param_6 & 0xfffffffc);
    *puVar1 = uVar6;
    *(uint *)(puVar1 + 1) = uVar11;
    uVar5 = (undefined4)((ulong)param_6 >> 0x20);
  }
  else {
    uVar11 = uVar2 & 3 | 0x10;
    uVar6 = uVar4 | uVar12 | uVar10 | uVar9 | uVar7 | uVar6 & 0xffff33e1ffffffff | uVar13 |
            0x400000000000;
    *puVar1 = uVar6;
    *(uint *)(puVar1 + 1) = uVar11;
    uVar5 = 0;
    param_5 = 0;
  }
  *(undefined4 *)((long)param_2 + uVar3 * 0x18 + 0xc) = uVar5;
  param_2[uVar3 * 3 + 2] = param_5;
  if (((*(byte *)(param_1 + 0x14) & 8) != 0) && ((uVar6 & 0x10000000000000) == 0)) {
    if ((uVar6 >> 0x2c & 1) == 0) {
      if ((uVar6 & 0xc00000000000) == 0) goto LAB_0005915b;
      uVar3 = 0x200000000000;
    }
    else {
      uVar3 = 0x200000000;
    }
    *puVar1 = uVar6 | uVar3;
    *(uint *)(puVar1 + 1) = uVar11;
  }
LAB_0005915b:
  return bVar14 + '\x01';
}



// IGTelemetryKMD::flushCommands()

void IGTelemetryKMD::flushCommands(void)

{
  return;
}



// IGTelemetryKMD::getShaderIDs(TelemetrySampleInfo*)

void __thiscall IGTelemetryKMD::getShaderIDs(IGTelemetryKMD *this,long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(param_1 + 0x18);
  *(undefined8 *)(lVar1 + 0x268) = 0;
  *(undefined8 *)(lVar1 + 600) = 0;
  *(undefined8 *)(lVar1 + 0x260) = 0;
  *(undefined8 *)(lVar1 + 0x270) = 0;
  *(undefined8 *)(lVar1 + 0x278) = 0;
  *(undefined8 *)(lVar1 + 0x280) = 0;
  *(undefined8 *)(lVar1 + 0x288) = 0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// kmdTelemetryInitContext(IntelAccelerator*, unsigned long long)

void __cdecl kmdTelemetryInitContext(long param_1,undefined *param_2)

{
  undefined *puVar1;
  IGTelemetryKMD *this;
  undefined *puVar2;
  
  puVar1 = ___idvarGetParam(0x2b);
  puVar2 = puVar1;
  if (puVar1 == (undefined *)0x0) {
    puVar2 = param_2;
  }
  if (param_2 == (undefined *)0x0) {
    puVar2 = puVar1;
  }
  if ((puVar2 != (undefined *)0x0) && (*(long *)(*(long *)(param_1 + 0xf18) + 0x250) == 0)) {
    this = (IGTelemetryKMD *)_IOMallocTypeImpl(IGTelemetryKMD::operator_new);
    *(undefined8 *)(this + 0x78) = 0;
    *(undefined8 *)(this + 0x80) = 0;
    *(undefined8 *)(this + 0x88) = 0;
    *(undefined8 *)(this + 0x90) = 0;
    *(undefined8 *)(this + 0x98) = 0x3ff0000000000000;
    *(undefined8 *)(this + 0xa0) = 0;
    *(undefined8 *)(this + 0x28) = 1;
    *(undefined8 *)(this + 0x20) = 1;
    *(undefined8 *)(this + 0xb8) = 0;
    *(undefined8 *)(this + 0x778) = 0x6a8000003c0;
    *(undefined ***)this = &__const::~IGTelemetryKMD;
    IGTelemetryKMD::init(this,param_1,puVar2);
    return;
  }
  return;
}



// IGTelemetryKMD::~IGTelemetryKMD()

void __thiscall IGTelemetryKMD::~IGTelemetryKMD(IGTelemetryKMD *this)

{
  *(undefined ***)this = &__const::~IGTelemetry;
  return;
}



// IGTelemetryKMD::~IGTelemetryKMD()

void __thiscall IGTelemetryKMD::~IGTelemetryKMD(IGTelemetryKMD *this)

{
  *(undefined ***)this = &__const::~IGTelemetry;
  _IOFreeTypeImpl(operator_delete,this);
  return;
}



// IGTelemetryKMD::sendLoadRegisterImmediate(TelemetrySampleInfo*, unsigned int, unsigned int)

void IGTelemetryKMD::sendLoadRegisterImmediate(void)

{
  return;
}



// IGTelemetryKMD::getNameAPI()

char * IGTelemetryKMD::getNameAPI(void)

{
  return "KMD";
}



// IGTelemetryKMD::getFrameAPI()

undefined8 __thiscall IGTelemetryKMD::getFrameAPI(IGTelemetryKMD *this)

{
  return *(undefined8 *)(this + 8);
}



// IGTelemetryKMD::getInternalContextId()

undefined4 __thiscall IGTelemetryKMD::getInternalContextId(IGTelemetryKMD *this)

{
  return *(undefined4 *)(this + 0x1beb8);
}



// IGTelemetryKMD::getSamplePointers(unsigned long long, TelemetrySampleInfo*)

void __thiscall
IGTelemetryKMD::getSamplePointers(IGTelemetryKMD *this,undefined8 param_1,undefined8 *param_2)

{
  long lVar1;
  ulong uVar2;
  
  *param_2 = param_1;
  uVar2 = (ulong)((uint)param_1 & 0x3f);
  lVar1 = uVar2 * 0x5c0;
  param_2[2] = *(long *)(this + 0x1bec0) + lVar1;
  param_2[1] = lVar1 + *(long *)(this + 0x1bef8);
  param_2[3] = this + uVar2 * 0x6a8 + 0x14b8;
  return;
}



// IGTelemetry::~IGTelemetry()

void __thiscall IGTelemetry::~IGTelemetry(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGTelemetry::~IGTelemetry()

void __thiscall IGTelemetry::~IGTelemetry(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGAccelGLContext::MetaClass::MetaClass()

void __thiscall IGAccelGLContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelGLContext",(OSMetaClass *)__got::gMetaClass,0x1360);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelGLContext::MetaClass::~MetaClass()

void __thiscall IGAccelGLContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelGLContext::IGAccelGLContext(OSMetaClass const*)

void __thiscall IGAccelGLContext::IGAccelGLContext(IGAccelGLContext *this,OSMetaClass *param_1)

{
  IOAccelGLContext2::IOAccelGLContext2((IOAccelGLContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelGLContext;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x1270));
  *(char **)(this + 0x12d0) = "IGAccelGLContext";
  *(undefined2 *)(this + 0x12d8) = 0;
  this[0x12da] = (IGAccelGLContext)0x0;
  *(undefined8 *)(this + 0x12e0) = 0;
  *(undefined8 *)(this + 0x12e8) = 0;
  *(undefined8 *)(this + 0x12f0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12e0),4);
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::IGHashTable()

void __thiscall IGHashTable<>::IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  long lVar1;
  undefined8 *puVar2;
  
  *(undefined ***)this = &__const::~IGHashTable;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  this[0x20] = (IGHashTable<>)0x1;
  this_00 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_00,0x10);
  *(IGVector<> **)(this + 8) = this_00;
  if ((this_00 != (IGVector<> *)0x0) && (lVar1 = *(long *)(this_00 + 8), lVar1 != 0)) {
    puVar2 = *(undefined8 **)(this_00 + 0x10);
    do {
      *puVar2 = 0;
      puVar2[1] = puVar2;
      puVar2[2] = 0;
      puVar2 = puVar2 + 3;
      lVar1 = lVar1 + -1;
    } while (lVar1 != 0);
  }
  return;
}



// IGAccelGLContext::IGAccelGLContext(OSMetaClass const*)

void __thiscall IGAccelGLContext::IGAccelGLContext(IGAccelGLContext *this,OSMetaClass *param_1)

{
  IGAccelGLContext(this,param_1);
  return;
}



// IGAccelGLContext::~IGAccelGLContext()

void __thiscall IGAccelGLContext::~IGAccelGLContext(IGAccelGLContext *this)

{
  *(undefined ***)this = &__const::~IGAccelGLContext;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12e0));
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x1270));
  IOAccelGLContext2::~IOAccelGLContext2((IOAccelGLContext2 *)this);
  return;
}



// IGVector<IGAccelResource*, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 3;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3d != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGAccelResource**,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IGAccelGLContext::~IGAccelGLContext()

void __thiscall IGAccelGLContext::~IGAccelGLContext(IGAccelGLContext *this)

{
  *(undefined ***)this = &__const::~IGAccelGLContext;
  IGVector<>::~IGVector((IGVector<> *)(this + 0x12e0));
  IGHashTable<>::~IGHashTable((IGHashTable<> *)(this + 0x1270));
  IOAccelGLContext2::~IOAccelGLContext2((IOAccelGLContext2 *)this);
  return;
}



// IGAccelGLContext::~IGAccelGLContext()

void __thiscall IGAccelGLContext::~IGAccelGLContext(IGAccelGLContext *this)

{
  ~IGAccelGLContext(this);
  _OSObject_typed_operator_delete(&IGAccelGLContext_ktv,this,&DAT_00001360);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::operator delete(void*, unsigned long)

void __cdecl IGAccelGLContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelGLContext_ktv,param_1,param_2);
  return;
}



// IGAccelGLContext::getMetaClass() const

undefined8 * IGAccelGLContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelGLContext::MetaClass::MetaClass()

void __thiscall IGAccelGLContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelGLContext",(OSMetaClass *)__got::gMetaClass,0x1360);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelGLContext::MetaClass::alloc() const

IGAccelGLContext * IGAccelGLContext::MetaClass::alloc(void)

{
  IGAccelGLContext *this;
  
  this = (IGAccelGLContext *)_OSObject_typed_operator_new(&IGAccelGLContext_ktv,&DAT_00001360);
  IGAccelGLContext(this);
  return this;
}



// IGAccelGLContext::operator new(unsigned long)

void * __thiscall IGAccelGLContext::operator_new(IGAccelGLContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelGLContext_ktv,this);
  return pvVar1;
}



// IGAccelGLContext::IGAccelGLContext()

void __thiscall IGAccelGLContext::IGAccelGLContext(IGAccelGLContext *this)

{
  IGAccelGLContext(this);
  return;
}



// IGAccelGLContext::IGAccelGLContext()

void __thiscall IGAccelGLContext::IGAccelGLContext(IGAccelGLContext *this)

{
  IOAccelGLContext2::IOAccelGLContext2((IOAccelGLContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelGLContext;
  IGHashTable<>::IGHashTable((IGHashTable<> *)(this + 0x1270));
  *(char **)(this + 0x12d0) = "IGAccelGLContext";
  *(undefined2 *)(this + 0x12d8) = 0;
  this[0x12da] = (IGAccelGLContext)0x0;
  *(undefined8 *)(this + 0x12e0) = 0;
  *(undefined8 *)(this + 0x12e8) = 0;
  *(undefined8 *)(this + 0x12f0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0x12e0),4);
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelGLContext::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelGLContext::getTargetAndMethodForIndex(IGAccelGLContext *this,undefined8 *param_1,int param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 - 0x200U < 6) {
    return (ulong)(param_2 - 0x200U) * 0x30 + *(long *)(this + 0x1248);
  }
                    // WARNING: Could not recover jumptable at 0x00059687. Too many branches
                    // WARNING: Treating indirect jump as call
  lVar1 = (**(code **)(__got::vtable + 0x950))();
  return lVar1;
}



// IGAccelGLContext::populateContextConfig(IOAccelContextConfig*)

void __thiscall IGAccelGLContext::populateContextConfig(IGAccelGLContext *this,undefined4 *param_1)

{
  *param_1 = 0xf5;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::attach(IOService*)

void __cdecl IGAccelGLContext::attach(long param_1)

{
  (**(code **)(__got::vtable + 0x680))();
  *(undefined ***)(&DAT_00001248 + param_1) = &attach(IOService*)::methodDescs;
  return;
}



// IGAccelGLContext::map_user_memory(IntelGLMapUserMemoryIn*, IntelGLMapUserMemoryOut*, unsigned
// long long, unsigned long long*)

undefined8 __thiscall
IGAccelGLContext::map_user_memory
          (IGAccelGLContext *this,ulong *param_1,ulong *param_2,long param_3,undefined8 *param_4)

{
  IOGraphicsAccelerator2 *pIVar1;
  ulong *puVar2;
  char cVar3;
  undefined8 uVar4;
  IOMemoryDescriptor *pIVar5;
  long *plVar6;
  long *plVar7;
  ulong uVar8;
  long lVar9;
  long *local_48;
  undefined8 *local_40;
  ulong *local_38;
  
  if (param_3 != 0x10) {
    return 0xe00002c2;
  }
  if (*(long *)(this + 0x5a0) == 0) {
    return 0xe00002c2;
  }
  if ((*param_1 & *(long *)__got::_page_size - 1U) != 0) {
    return 0xe00002c2;
  }
  plVar6 = *(long **)(this + 0x5a8);
  local_40 = param_4;
  local_38 = param_2;
  _OSIncrementAtomic(plVar6 + 0x12);
  _IOLockLock(plVar6[0x11]);
  _OSDecrementAtomic(plVar6 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar6 + 0x850))(plVar6,"",0);
  uVar4 = IGHashTable<>::contains((IGHashTable<> *)(this + 0x1270),param_1);
  if ((char)uVar4 != '\0') {
    plVar6 = *(long **)(this + 0x5a8);
    (**(code **)(*plVar6 + 0x858))(plVar6,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar6[0x11]);
    return 0xe00002c2;
  }
  pIVar5 = (IOMemoryDescriptor *)
           IOMemoryDescriptor::withAddressRange
                     (*param_1,(ulong)(uint)param_1[1],0x10001,
                      *(task **)(*(long *)(this + 0x5a0) + 0x80));
  pIVar1 = *(IOGraphicsAccelerator2 **)(this + 0x5a8);
  if (pIVar5 == (IOMemoryDescriptor *)0x0) {
    (**(code **)(*(long *)pIVar1 + 0x858))(pIVar1,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(*(undefined8 *)(pIVar1 + 0x88));
    return 0xe00002be;
  }
  plVar6 = (long *)IOAccelSysMemory::withMemoryDescriptor(pIVar1,(IOAccelResource2 *)0x0,pIVar5);
  (**(code **)(*(long *)pIVar5 + 0x28))(pIVar5);
  if (plVar6 == (long *)0x0) {
    plVar6 = *(long **)(this + 0x5a8);
    (**(code **)(*plVar6 + 0x858))(plVar6,"",0);
    IOGraphicsAccelerator2::unlock_busy();
    _IOLockUnlock(plVar6[0x11]);
    return 0xe00002bd;
  }
  *(byte *)((long)plVar6 + 0xc) = *(byte *)((long)plVar6 + 0xc) & 0xfe;
  uVar4 = (**(code **)(*(long *)this + 0x968))(this);
  plVar7 = (long *)(**(code **)(*plVar6 + 0x138))(plVar6,uVar4,7);
  local_48 = plVar7;
  if (plVar7 == (long *)0x0) {
    lVar9 = *plVar6;
  }
  else {
    cVar3 = (**(code **)(*plVar7 + 0x138))(plVar7);
    if ((cVar3 != '\0') ||
       (cVar3 = IOGraphicsAccelerator2::freeToPrepareMapping(*(IOAccelMemoryMap **)(this + 0x5a8)),
       cVar3 != '\0')) {
      puVar2 = local_38;
      *local_38 = *param_1;
      uVar8 = (**(code **)(*plVar7 + 0x128))(plVar7);
      puVar2[1] = uVar8;
      if (local_40 != (undefined8 *)0x0) {
        *local_40 = 0x10;
      }
      IGHashTable<>::add((IGHashTable<> *)(this + 0x1270),param_1,(ulong *)&local_48);
      uVar4 = 0;
      goto LAB_0005992c;
    }
    (**(code **)(*plVar7 + 0x28))(plVar7);
    lVar9 = *plVar6;
  }
  (**(code **)(lVar9 + 0x28))(plVar6);
  uVar4 = 0xe00002bc;
LAB_0005992c:
  IOGraphicsAccelerator2::acceleratorUnlock(*(IOGraphicsAccelerator2 **)(this + 0x5a8));
  return uVar4;
}



// IGAccelGLContext::unmap_user_memory(IntelGLUnmapUserMemoryIn*, unsigned long long)

undefined8 __thiscall
IGAccelGLContext::unmap_user_memory(IGAccelGLContext *this,ulong *param_1,long param_2)

{
  IGHashTable<> *this_00;
  long lVar1;
  void *pvVar2;
  uint uVar3;
  int iVar4;
  undefined8 uVar5;
  long *plVar6;
  undefined4 extraout_var;
  char *pcVar8;
  undefined8 uVar9;
  void *pvVar10;
  long lVar7;
  
  if (param_2 != 8) {
    return 0xe00002c2;
  }
  plVar6 = *(long **)(this + 0x5a8);
  _OSIncrementAtomic(plVar6 + 0x12);
  _IOLockLock(plVar6[0x11]);
  _OSDecrementAtomic(plVar6 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar6 + 0x850))(plVar6,"",0);
  this_00 = (IGHashTable<> *)(this + 0x1270);
  uVar5 = IGHashTable<>::contains(this_00,param_1);
  uVar9 = 0xe00002c2;
  if ((char)uVar5 == '\0') goto LAB_00059b08;
  plVar6 = (long *)IGHashTable<>::operator[](this_00,param_1);
  plVar6 = (long *)*plVar6;
  IGAccelEventMachine::finishEvent
            (*(IGAccelEventMachine **)(*(long *)(this + 0x5a8) + 0x380),this + 0x5d0,0x41);
  (**(code **)(*plVar6 + 0x140))(plVar6);
  (**(code **)(*(long *)plVar6[3] + 0x28))();
  (**(code **)(*plVar6 + 0x28))(plVar6);
  lVar1 = *(long *)(this + 0x1278);
  if (lVar1 != 0) {
    uVar3 = IGHashTable<>::slotIndex(this_00,param_1);
    lVar7 = CONCAT44(extraout_var,uVar3);
    pvVar2 = *(void **)(*(long *)(lVar1 + 0x10) + lVar7 * 0x18);
    do {
      pvVar10 = pvVar2;
      if (pvVar10 == (void *)0x0) goto LAB_00059b05;
      pvVar2 = *(void **)((long)pvVar10 + 0x10);
      iVar4 = _memcmp(pvVar10,param_1,8);
    } while (iVar4 != 0);
    lVar1 = *(long *)((long)pvVar10 + 0x10);
    if (lVar1 == 0) {
      plVar6 = *(long **)((long)pvVar10 + 0x18);
      if ((void *)*plVar6 != pvVar10) {
LAB_00059b4a:
        pcVar8 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00059b5a:
                    // WARNING: Subroutine does not return
        _panic(pcVar8,pvVar10,0x312,"IGHash.h",0x312);
      }
      *(long **)(*(long *)(*(long *)(this + 0x1278) + 0x10) + 8 + lVar7 * 0x18) = plVar6;
    }
    else {
      if (*(long *)(lVar1 + 0x18) != (long)pvVar10 + 0x10) {
        pcVar8 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00059b5a;
      }
      if ((void *)**(long **)((long)pvVar10 + 0x18) != pvVar10) goto LAB_00059b4a;
      *(long **)(lVar1 + 0x18) = *(long **)((long)pvVar10 + 0x18);
      plVar6 = *(long **)((long)pvVar10 + 0x18);
    }
    *plVar6 = lVar1;
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                     kalloc_type_view_19,pvVar10);
    plVar6 = (long *)(*(long *)(*(long *)(this + 0x1278) + 0x10) + 0x10 + lVar7 * 0x18);
    *plVar6 = *plVar6 + -1;
    *(ulong *)(this + 0x1288) = *(long *)(this + 0x1288) - (ulong)(*plVar6 == 0);
    *(long *)(this + 0x1280) = *(long *)(this + 0x1280) + -1;
    IGHashTable<>::shrinkIfNeeded(this_00);
  }
LAB_00059b05:
  uVar9 = 0;
LAB_00059b08:
  plVar6 = *(long **)(this + 0x5a8);
  (**(code **)(*plVar6 + 0x858))(plVar6,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar6[0x11]);
  return uVar9;
}



// IGAccelGLContext::telemetryOperation(TelemetryOperation*, TelemetryOperation*, unsigned long
// long, unsigned long long*)

void __thiscall
IGAccelGLContext::telemetryOperation
          (IGAccelGLContext *this,ulong *param_1,ulong *param_2,long param_3,ulong *param_4)

{
  IGTelemetryManager *this_00;
  ulonglong uVar1;
  
  this_00 = *(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18);
  uVar1 = (**(code **)(*(long *)this + 0x960))();
  IGTelemetryManager::telemetryOperationWrapper
            (this_00,(long)(this + 0x12d0),param_1,param_2,param_3,param_4,uVar1);
  return;
}



// IGAccelGLContext::telemetryInitOABuffer(MDAPIInitOABufferOp*, MDAPIInitOABufferOp*, unsigned long
// long, unsigned long long*)

void __thiscall
IGAccelGLContext::telemetryInitOABuffer
          (IGAccelGLContext *this,undefined8 *param_1,undefined8 *param_2,long param_3,
          ulong *param_4)

{
  IGTelemetryManager::telemetryInitOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),(long)(this + 0x12d0),param_1
             ,param_2,param_3,param_4);
  return;
}



// IGAccelGLContext::telemetryReadOABuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*, unsigned
// long long, unsigned long long*)

void __thiscall
IGAccelGLContext::telemetryReadOABuffer
          (IGAccelGLContext *this,long param_1,int *param_2,long param_3,long *param_4)

{
  IGTelemetryManager::telemetryReadOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),param_1,param_2,param_3,
             param_4,(long)(this + 0x12d0));
  return;
}



// IGAccelGLContext::telemetryMapOABufferMemory(IntelDeviceMapStatsMemInOut*,
// IntelDeviceMapStatsMemInOut*, unsigned long long, unsigned long long*)

void __thiscall
IGAccelGLContext::telemetryMapOABufferMemory
          (IGAccelGLContext *this,long *param_1,long *param_2,long param_3,undefined8 *param_4)

{
  IGTelemetryManager *this_00;
  ulonglong uVar1;
  
  this_00 = *(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18);
  uVar1 = (**(code **)(*(long *)this + 0x960))();
  IGTelemetryManager::telemetryMapOaBufferMemory(this_00,param_1,param_2,param_3,param_4,uVar1);
  return;
}



// IGAccelGLContext::contextStart()

undefined4 __thiscall IGAccelGLContext::contextStart(IGAccelGLContext *this)

{
  long lVar1;
  undefined4 uVar2;
  long lVar3;
  
  uVar2 = (**(code **)(__got::vtable + 0x9f0))();
  if ((char)uVar2 != '\0') {
    lVar1 = *(long *)(*(long *)(this + 0x5a8) + 0xe50);
    lVar3 = 1;
    if (-2 < lVar1) {
      lVar3 = lVar1 + 1;
    }
    *(long *)(*(long *)(this + 0x5a8) + 0xe50) = lVar3;
    *(long *)(this + 0x1350) = lVar3;
    dtHookSwCtxCreation();
    this[0x12c8] = (IGAccelGLContext)0x0;
    *(undefined ***)(this + 0x1240) = &contextStart()::s_cTokenInfo;
    *(undefined8 *)(this + 0x1268) = 0;
    *(undefined4 *)(this + 0x1238) = 0xffffffff;
    IGHashTable<>::clear((IGHashTable<> *)(this + 0x1270));
    *(undefined4 *)(this + 0x1250) = 0;
    *(undefined8 *)(this + 0x1258) = 0;
    *(undefined8 *)(this + 0x1260) = 0;
    *(undefined8 *)(this + 0x12a0) = 0;
    *(undefined8 *)(this + 0x12a8) = 0;
    *(undefined8 *)(this + 0x12b0) = 0;
    *(undefined8 *)(this + 0x12b8) = 0;
    *(undefined4 *)(this + 0x1358) = 0xffffffff;
    this[0x135c] = (IGAccelGLContext)0x0;
    (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x140))
              (*(long **)(*(long *)(this + 0x5a8) + 0x380),this + 0x12f8);
    *(undefined8 *)(this + 0x12e0) = 0;
  }
  return uVar2;
}



// IGAccelGLContext::process_token_TexSubImage2D(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_TexSubImage2D
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  uint uVar1;
  int iVar2;
  long lVar3;
  IntelAccelerator *pIVar4;
  IOAccelShared2 *pIVar5;
  bool bVar6;
  char cVar7;
  undefined1 uVar8;
  ulong uVar9;
  undefined8 uVar10;
  IGAccelTask *pIVar11;
  IGAccelResource *pIVar12;
  uint uVar13;
  uint *puVar14;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar15;
  undefined4 uVar16;
  float fVar17;
  undefined4 uVar18;
  float fVar19;
  undefined4 uVar20;
  long *plVar21;
  IOAccelShared2 *local_1f0;
  undefined8 local_1e8;
  undefined8 local_1e0;
  undefined8 local_1d8;
  undefined8 local_1d0;
  undefined8 local_1c8;
  undefined8 local_1c0;
  undefined8 local_1b8;
  IGAccelResource *local_1b0;
  long local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  uint local_190 [10];
  IGAccelResource *local_168;
  undefined8 local_160;
  undefined8 local_158;
  undefined1 local_150;
  undefined4 local_14e;
  undefined4 local_148;
  undefined8 local_140;
  undefined1 local_138;
  undefined8 local_130 [3];
  undefined8 local_118 [6];
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  ulong local_b8 [2];
  undefined8 *local_a8;
  uint local_a0;
  uint local_9c;
  long local_98;
  long local_90;
  ulong local_88;
  ulong local_80;
  undefined4 local_78;
  uint local_74;
  int local_70;
  uint local_6c;
  uint local_68;
  uint local_64;
  uint local_60;
  undefined4 local_5c;
  IOAccelShared2 *local_58;
  IGAccelResource *local_50;
  uint local_44;
  uint local_40;
  int local_3c;
  IGAccelResource *local_38;
  undefined4 uVar22;
  
  uVar20 = (undefined4)((ulong)param_4 >> 0x20);
  uVar18 = (undefined4)((ulong)param_3 >> 0x20);
  uVar16 = (undefined4)((ulong)param_2 >> 0x20);
  lVar3 = *(long *)(param_10 + 0x18);
  uVar13 = (uint)this;
  if (*(ulong *)((long)this + 0x628) < lVar3 + 0x5cU) {
    IOAccelContext2::setContextError(uVar13);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  uVar1 = *(uint *)(lVar3 + 0x20);
  if (*(char *)(param_10 + 0x3c) == '\0') {
    local_1f0 = (IOAccelShared2 *)0x0;
    cVar7 = IOAccelContext2::lookupResource(uVar13,(void **)(ulong)uVar1);
    if (cVar7 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_1f0);
    return;
  }
  local_80 = (ulong)*(uint *)(lVar3 + 0x24);
  local_88 = (ulong)*(uint *)(lVar3 + 0x28);
  local_58 = (IOAccelShared2 *)CONCAT44(local_58._4_4_,*(undefined4 *)(lVar3 + 0x30));
  local_5c = *(undefined4 *)(lVar3 + 0x34);
  local_60 = *(uint *)(lVar3 + 0x3c);
  local_64 = *(uint *)(lVar3 + 0x50);
  local_68 = *(uint *)(lVar3 + 0x54);
  iVar2 = *(int *)(lVar3 + 0x58);
  local_50 = (IGAccelResource *)0x0;
  plVar21 = &local_98;
  local_98 = 0;
  bVar6 = get_buffer_address(this,param_10,*(uint *)(lVar3 + 8),*(int *)(lVar3 + 0x10),0,
                             (long *)&local_50,plVar21);
  uVar22 = (undefined4)((ulong)plVar21 >> 0x20);
  if (!bVar6) {
    return;
  }
  local_38 = (IGAccelResource *)0x0;
  local_3c = iVar2;
  cVar7 = IOAccelContext2::lookupResource(uVar13,(void **)(ulong)uVar1);
  pIVar5 = local_58;
  if ((cVar7 == '\0') || ((byte)local_38[0xac] <= (uint)local_58)) {
    IOAccelContext2::setContextError(uVar13);
    return;
  }
  cVar7 = (**(code **)(*(long *)this + 0xa40))
                    (this,param_10,local_38,1,*(undefined8 *)((long)this + 0x12c0),1,
                     CONCAT44(uVar22,1));
  if (cVar7 == '\0') {
    if ((local_38 != (IGAccelResource *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
      *(undefined1 *)(param_10 + 0x3c) = 0;
      *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
      goto LAB_0005a360;
    }
  }
  else {
    local_90 = 0;
    local_78 = 0;
    local_44 = 0;
    local_40 = 0;
    local_74 = 0;
    IGAccelResource::get_tex_data(local_38,&local_90,&local_78);
    if (local_90 != 0) {
      local_70 = *(int *)(lVar3 + 0x40);
      local_6c = *(uint *)(lVar3 + 0x44);
      local_a0 = *(uint *)(lVar3 + 0x48);
      local_9c = *(uint *)(lVar3 + 0x4c);
      puVar14 = &local_74;
      uVar9 = IGAccelResource::get_modtex_info
                        (local_38,&local_a0,&local_9c,&local_44,&local_40,puVar14,&local_70,
                         &local_6c);
      if ((char)uVar9 != '\0') {
        (**(code **)(*(long *)this + 0xa38))(this,param_10);
        (**(code **)(*(long *)local_38 + 0x168))(local_38,(ulong)pIVar5 & 0xffffffff,local_5c);
        ___bzero((blit3d_params_t *)&local_1f0,0x138);
        blit3d_params_t::blit3d_params_t((blit3d_params_t *)&local_1f0);
        local_1b0 = (IGAccelResource *)0x0;
        local_1c0 = 0;
        local_1c8 = 0;
        local_1d0 = 0;
        local_1d8 = 0;
        local_1e0 = 0;
        local_1e8 = 0;
        local_1f0 = (IOAccelShared2 *)0x0;
        local_1b8 = 0x100000000;
        local_1a8 = 0;
        local_1a0 = 0;
        local_198 = 0;
        local_190[0] = 0;
        local_190[1] = 0;
        local_190[2] = 0;
        local_190[3] = 0;
        local_190[4] = 0;
        local_190[5] = 0;
        local_190[6] = 0;
        local_190[7] = 0;
        local_168 = (IGAccelResource *)0x0;
        local_190[8] = 0;
        local_190[9] = 1;
        local_160 = 0;
        local_158 = 0;
        local_14e = 0;
        local_150 = 0;
        local_148 = 0;
        local_140 = 0;
        local_138 = 0;
        local_130[0] = 0;
        local_118[0] = 0;
        local_e8 = 0;
        local_e0 = 0;
        local_d8 = 0;
        local_d0 = 0;
        local_c8 = 0;
        local_c0 = 0;
        pIVar12 = local_50;
        if (local_50 == (IGAccelResource *)0x0) {
          pIVar12 = *(IGAccelResource **)((long)this + 0xfe8);
        }
        AddSrcDstEvents((IGVector<> *)local_130,(long)pIVar12,(long)local_38);
        iVar2 = local_3c;
        local_a8 = (undefined8 *)0x0;
        local_b8[1] = 0;
        local_b8[0] = 0;
        uVar10 = IGVector<>::grow((IGVector<> *)local_b8,1);
        if ((char)uVar10 != '\0') {
          local_b8[0] = 1;
        }
        local_58 = (IOAccelShared2 *)
                   addDstMcsResourceData(this,param_10,(long)&local_1f0,local_60,iVar2 != 0);
        local_1d8 = CONCAT44(local_1d8._4_4_,*(undefined4 *)(lVar3 + 0x1c));
        local_1f0 = (IOAccelShared2 *)((ulong)*(uint *)(lVar3 + 0xc) + local_98);
        local_1e8 = CONCAT26((short)local_40,CONCAT24(0x100,*(undefined4 *)(lVar3 + 0x14)));
        local_1e0 = CONCAT44(*(undefined4 *)(lVar3 + 0x18),0x23);
        local_1b0 = local_50;
        if (local_50 == (IGAccelResource *)0x0) {
          local_1b0 = local_38;
        }
        local_190[0] = (uint)*(ushort *)(local_38 + 0xb2);
        local_1a8 = local_90;
        local_1a0 = CONCAT26((short)local_40,CONCAT15(1,CONCAT14((undefined1)local_44,local_78)));
        local_198 = CONCAT44((uint)*(ushort *)(local_38 + 0xb0),5);
        local_168 = local_38;
        IGAccelResource::getBufferWidthHeight
                  (local_38,(uint *)((long)&local_198 + 4),local_190,local_40);
        fVar15 = (float)local_68;
        *local_a8 = 0;
        *(float *)(local_a8 + 1) = (float)local_64;
        *(float *)((long)local_a8 + 0xc) = fVar15;
        fVar17 = (float)(uint)((int)local_80 + local_70);
        fVar19 = (float)((int)local_88 + local_6c);
        *(float *)(local_a8 + 2) = fVar17;
        *(float *)((long)local_a8 + 0x14) = fVar19;
        *(float *)(local_a8 + 3) = (float)local_64;
        *(float *)((long)local_a8 + 0x1c) = fVar15;
        local_150 = *(undefined1 *)(lVar3 + 0x38);
        if (local_50 != (IGAccelResource *)0x0) {
          (**(code **)(*(long *)this + 0xa48))
                    (this,param_10,local_50,*(undefined8 *)((long)this + 0x12c0));
        }
        (**(code **)(*(long *)this + 0xa48))
                  (this,param_10,local_38,*(undefined8 *)((long)this + 0x12c0));
        pIVar4 = *(IntelAccelerator **)((long)this + 0x5a8);
        pIVar11 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        IntelAccelerator::submitBlit
                  (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar16,fVar15),
                   CONCAT44(uVar18,fVar17),CONCAT44(uVar20,fVar19),param_5,param_6,param_7,param_8,
                   pIVar4,(long *)&local_1f0,local_b8,pIVar11,0,(char *)puVar14);
        if (*(long *)((long)this + 0x630) == 0) {
          IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
        }
        if ((local_58 != (IOAccelShared2 *)0x0) && (*(long *)((long)this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(local_58);
        }
        (**(code **)(*(long *)this + 0xa30))(this,param_10);
        iVar2 = *(int *)(*(long *)((long)this + 0x12c0) + 0x20);
        if ((iVar2 == *(int *)(local_38 + 0x9c)) ||
           ((local_50 != (IGAccelResource *)0x0 && (iVar2 == *(int *)(local_50 + 0x9c))))) {
          plVar21 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
          uVar8 = (**(code **)(*plVar21 + 0x1c8))
                            (plVar21,(ulong)(byte)*(IOAccelShared2 *)(local_38 + 0x15) * 0x40 +
                                     *(long *)(local_38 + 0x38),&DAT_000012f8 + (long)this);
          *(undefined1 *)((long)this + 0x1338) = uVar8;
        }
        IGVector<>::~IGVector((IGVector<> *)local_b8);
        IGVector<>::~IGVector((IGVector<> *)local_118);
        IGVector<>::~IGVector((IGVector<> *)local_130);
        return;
      }
    }
  }
  IOAccelContext2::setContextError(uVar13);
LAB_0005a360:
  streamErrorCleanup(this,param_10,(IOAccelShared2 *)local_38);
  return;
}



// IGAccelGLContext::process_token_BufferSubData(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BufferSubData
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  int iVar1;
  IntelAccelerator *pIVar2;
  long *plVar3;
  bool bVar4;
  char cVar5;
  undefined1 uVar6;
  uint uVar7;
  undefined8 uVar8;
  IGAccelTask *pIVar9;
  IOAccelShared2 *pIVar10;
  long lVar11;
  char *pcVar12;
  uint uVar13;
  float fVar14;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar15;
  undefined4 uVar16;
  IOAccelShared2 **ppIVar17;
  IOAccelShared2 *local_1d0;
  uint5 local_1c8;
  undefined3 uStack_1c3;
  undefined2 uStack_1c2;
  undefined8 local_1c0;
  undefined8 local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  IOAccelShared2 *local_190;
  long local_188;
  undefined8 local_180;
  undefined8 local_178;
  undefined8 local_170;
  undefined8 local_168;
  undefined8 local_160;
  undefined8 local_158;
  undefined8 local_150;
  IOAccelShared2 *local_148;
  undefined8 local_140;
  undefined8 local_138;
  undefined1 local_130;
  uint local_12e;
  undefined4 local_128;
  undefined8 local_120;
  undefined1 local_118;
  undefined8 local_110;
  ulong local_108;
  long local_100;
  undefined8 local_f8;
  ulong local_f0;
  long local_e8;
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined4 local_94;
  IOAccelShared2 *local_90;
  long local_88;
  ulong local_80;
  ulong local_78;
  long local_70;
  long local_68;
  undefined8 local_60;
  long local_58;
  undefined8 local_50;
  float local_44;
  IOAccelShared2 *local_40;
  IGAccelResource *local_38;
  undefined4 uVar18;
  
  uVar16 = (undefined4)((ulong)param_2 >> 0x20);
  lVar11 = *(long *)(param_10 + 0x18);
  uVar7 = (uint)this;
  if (*(ulong *)((long)this + 0x628) < lVar11 + 0x20U) {
    IOAccelContext2::setContextError(uVar7);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_10 + 0x3c) == '\0') {
    local_1d0 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)*(uint *)(lVar11 + 0x14));
    if (cVar5 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_1d0);
    return;
  }
  local_40 = (IOAccelShared2 *)0x0;
  ppIVar17 = &local_90;
  local_90 = (IOAccelShared2 *)0x0;
  bVar4 = get_buffer_address(this,param_10,*(uint *)(lVar11 + 8),*(int *)(lVar11 + 0x10),0,
                             (long *)&local_40,(long *)ppIVar17);
  uVar18 = (undefined4)((ulong)ppIVar17 >> 0x20);
  if (!bVar4) {
    return;
  }
  local_38 = (IGAccelResource *)0x0;
  cVar5 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)*(uint *)(lVar11 + 0x14));
  if (cVar5 == '\0') {
    IOAccelContext2::setContextError(uVar7);
    return;
  }
  pcVar12 = (char *)((long)&MACH_HEADER.magic + 1);
  cVar5 = (**(code **)(*(long *)this + 0xa40))
                    (this,param_10,local_38,1,*(undefined8 *)((long)this + 0x12c0),1,
                     CONCAT44(uVar18,1));
  if (cVar5 == '\0') {
    if ((local_38 != (IGAccelResource *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
      *(undefined1 *)(param_10 + 0x3c) = 0;
      *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
      goto LAB_0005a6da;
    }
  }
  else {
    local_88 = 0;
    local_94 = 0;
    IGAccelResource::get_tex_data(local_38,&local_88,&local_94);
    if (local_88 != 0) {
      (**(code **)(*(long *)this + 0xa38))(this,param_10);
      (**(code **)(*(long *)local_38 + 0x168))(local_38,0,0);
      ___bzero(&local_1d0,0x138);
      IGVector<>::grow((IGVector<> *)&local_110,4);
      local_f8 = 0;
      local_f0 = 0;
      local_e8 = 0;
      IGVector<>::grow((IGVector<> *)&local_f8,4);
      local_1d0 = (IOAccelShared2 *)0x0;
      _local_1c8 = 0;
      local_1c0 = 0;
      local_1b8 = 0;
      local_1b0 = 0;
      local_1a8 = 0;
      local_1a0 = 0;
      local_190 = (IOAccelShared2 *)0x0;
      local_198 = 0x100000000;
      local_188 = 0;
      local_180 = 0;
      local_178 = 0;
      local_170 = 0;
      local_168 = 0;
      local_160 = 0;
      local_158 = 0;
      local_148 = (IOAccelShared2 *)0x0;
      local_150 = 0x100000000;
      local_140 = 0;
      local_138 = 0;
      local_12e = 0;
      local_130 = 0;
      local_128 = 0;
      local_120 = 0;
      local_118 = 0;
      local_110 = 0;
      local_f8 = 0;
      local_c8 = 0;
      local_c0 = 0;
      local_b8 = 0;
      local_b0 = 0;
      local_a8 = 0;
      local_a0 = 0;
      pIVar10 = local_40;
      if (local_40 == (IOAccelShared2 *)0x0) {
        pIVar10 = *(IOAccelShared2 **)((long)this + 0xfe8);
      }
      AddSrcDstEvents((IGVector<> *)&local_110,(long)pIVar10,(long)local_38);
      local_70 = 0;
      local_78 = 0;
      local_80 = 0;
      IGVector<>::grow((IGVector<> *)&local_80,4);
      uVar7 = *(uint *)(lVar11 + 0x1c);
      if (uVar7 < 0x1001) {
        uVar13 = 1;
        fVar15 = 1.0;
        uVar16 = 0;
      }
      else {
        uVar13 = uVar7 >> 0xc;
        fVar15 = (float)uVar13;
        if ((uVar7 & 0xfff) != 0) {
          fVar14 = (float)(uVar7 & 0xfff);
          local_68 = (ulong)(uint)fVar15 << 0x20;
          local_60 = CONCAT44(0x3f800000,fVar14);
          local_58 = (ulong)(uint)fVar15 << 0x20;
          local_50 = CONCAT44(0x3f800000,fVar14);
          local_44 = fVar15;
          IGVector<>::add((IGVector<> *)&local_80,&local_68);
          uVar16 = 0;
          uVar13 = uVar13 + 1;
          fVar15 = local_44;
        }
        uVar7 = 0x1000;
      }
      local_1d0 = local_90;
      local_1a8 = CONCAT44(*(undefined4 *)(lVar11 + 0xc),(undefined4)local_1a8);
      local_1b8 = CONCAT44(local_1b8._4_4_,uVar13);
      local_1c8 = (uint5)uVar7;
      _local_1c8 = CONCAT26(0x143,_local_1c8);
      local_1c0 = CONCAT44(uVar7,0x23);
      local_190 = local_40;
      if (local_40 == (IOAccelShared2 *)0x0) {
        local_190 = (IOAccelShared2 *)local_38;
      }
      local_68 = 0;
      local_60 = CONCAT44(fVar15,(float)uVar7);
      local_170 = local_1b8;
      local_168 = local_1b0;
      local_158 = local_1a0;
      local_150 = local_198;
      local_180 = _local_1c8;
      local_188 = local_88;
      local_160 = CONCAT44(*(undefined4 *)(lVar11 + 0x18),(undefined4)local_1a8);
      local_178 = CONCAT44(uVar7,5);
      local_148 = (IOAccelShared2 *)local_38;
      local_58 = 0;
      local_50 = CONCAT44(fVar15,(float)uVar7);
      if ((local_80 != local_78) ||
         (uVar8 = IGVector<>::grow((IGVector<> *)&local_80,local_80 * 2), (char)uVar8 != '\0')) {
        lVar11 = local_80 * 0x20;
        *(undefined8 *)(local_70 + 0x18 + lVar11) = local_50;
        *(long *)(local_70 + 0x10 + lVar11) = local_58;
        *(undefined8 *)(local_70 + 8 + lVar11) = local_60;
        *(long *)(local_70 + lVar11) = local_68;
        local_80 = local_80 + 1;
      }
      local_130 = 1;
      local_12e = local_12e & 0xffffffe7 | 8;
      if (local_40 != (IOAccelShared2 *)0x0) {
        (**(code **)(*(long *)this + 0xa48))
                  (this,param_10,local_40,*(undefined8 *)((long)this + 0x12c0));
      }
      (**(code **)(*(long *)this + 0xa48))
                (this,param_10,local_38,*(undefined8 *)((long)this + 0x12c0));
      pIVar2 = *(IntelAccelerator **)((long)this + 0x5a8);
      pIVar9 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
      IntelAccelerator::submitBlit
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar16,fVar15),param_3,param_4
                 ,param_5,param_6,param_7,param_8,pIVar2,(long *)&local_1d0,&local_80,pIVar9,0,
                 pcVar12);
      if ((local_40 != (IOAccelShared2 *)0x0) && (*(long *)((long)this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_40);
      }
      if (*(long *)((long)this + 0x630) == 0) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
      }
      (**(code **)(*(long *)this + 0xa30))(this,param_10);
      iVar1 = *(int *)(*(long *)((long)this + 0x12c0) + 0x20);
      if ((iVar1 == *(int *)(local_38 + 0x9c)) ||
         ((local_40 != (IOAccelShared2 *)0x0 && (iVar1 == *(int *)(local_40 + 0x9c))))) {
        plVar3 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        uVar6 = (**(code **)(*plVar3 + 0x1c8))
                          (plVar3,(ulong)(byte)*(IOAccelShared2 *)(local_38 + 0x15) * 0x40 +
                                  *(long *)(local_38 + 0x38),&DAT_000012f8 + (long)this);
        *(undefined1 *)((long)this + 0x1338) = uVar6;
      }
      if (local_70 != 0) {
        lVar11 = local_78 << 5;
        if (lVar11 < 0) {
          lVar11 = -0x8000000000000000;
        }
        if (local_78 >> 0x3b != 0) {
          lVar11 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                            kalloc_type_view_29,local_70,lVar11);
      }
      if (local_e8 != 0) {
        lVar11 = local_f0 * 8;
        if (lVar11 < 0) {
          lVar11 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_f0) {
          lVar11 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                            kalloc_type_view_29,local_e8,lVar11);
      }
      if (local_100 == 0) {
        return;
      }
      lVar11 = local_108 * 8;
      if (lVar11 < 0) {
        lVar11 = -0x8000000000000000;
      }
      if (0x1fffffffffffffff < local_108) {
        lVar11 = -0x8000000000000000;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                          kalloc_type_view_29,local_100,lVar11);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar7);
LAB_0005a6da:
  streamErrorCleanup(this,param_10,(IOAccelShared2 *)local_38);
  return;
}



// IGAccelGLContext::process_token_CopyPixelsSrc(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_CopyPixelsSrc(IGAccelGLContext *this,long param_1)

{
  IGAccelResource IVar1;
  char cVar2;
  short sVar3;
  long lVar4;
  long lVar5;
  IntelAccelerator *pIVar6;
  IOAccelShared2 *pIVar7;
  char cVar8;
  IGAccelGLContext IVar9;
  ushort uVar10;
  int iVar11;
  ulong uVar12;
  long lVar13;
  undefined8 uVar14;
  IGAccelTask *pIVar15;
  IOAccelShared2 *pIVar16;
  short sVar17;
  int iVar18;
  char *pcVar19;
  uint uVar20;
  bool bVar21;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar22;
  undefined4 uVar23;
  float fVar24;
  undefined4 uVar25;
  float fVar26;
  undefined4 uVar27;
  undefined8 in_XMM4_Qa;
  undefined8 in_XMM5_Qa;
  undefined8 in_XMM6_Qa;
  undefined8 in_XMM7_Qa;
  IOAccelShared2 *local_238;
  undefined8 local_230;
  ulong local_228;
  undefined8 local_220;
  undefined8 local_218;
  undefined8 local_210;
  undefined8 local_208;
  undefined8 local_200;
  long local_1f8;
  long local_1f0;
  undefined8 local_1e8;
  undefined8 local_1e0;
  uint local_1d8 [10];
  IGAccelResource *local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined1 local_198;
  uint local_196;
  undefined4 local_190;
  undefined8 local_188;
  undefined1 local_180;
  undefined8 local_178 [3];
  undefined8 local_160 [6];
  undefined8 local_130;
  undefined8 local_128;
  undefined8 local_120;
  undefined8 local_118;
  undefined8 local_110;
  undefined8 local_108;
  undefined8 local_100;
  IOAccelShared2 *local_f8;
  undefined8 local_f0;
  undefined8 local_e8;
  long local_e0;
  ulong local_d8 [2];
  float *local_c8;
  int local_c0;
  int local_bc;
  long local_b8;
  IOAccelShared2 *local_b0;
  long local_a8;
  long local_a0;
  IOAccelShared2 *local_98;
  undefined4 local_90;
  int local_8c;
  int local_88;
  int local_84;
  IOAccelShared2 *local_80;
  uint local_78 [2];
  uint local_70;
  uint local_6c;
  int local_68;
  int local_64;
  int local_60;
  int local_5c;
  int local_58;
  int local_54;
  undefined2 local_50;
  undefined2 local_4e;
  int local_4c;
  int local_48;
  uint local_44;
  int local_40;
  int local_3c;
  IGAccelResource *local_38;
  
  lVar4 = *(long *)(param_1 + 0x18);
  uVar20 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar4 + 0x40U) {
    IOAccelContext2::setContextError(uVar20);
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_1 + 0x3c) == '\0') {
    local_238 = (IOAccelShared2 *)0x0;
    cVar8 = IOAccelContext2::lookupResource(uVar20,(void **)(ulong)*(uint *)(lVar4 + 0x14));
    if ((cVar8 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_238);
    }
    if (*(uint *)(lVar4 + 0x18) != 0) {
      local_238 = (IOAccelShared2 *)0x0;
      cVar8 = IOAccelContext2::lookupResource(uVar20,(void **)(ulong)*(uint *)(lVar4 + 0x18));
      if ((cVar8 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_238);
      }
    }
    if (*(uint *)(lVar4 + 8) == 0) {
      return;
    }
    local_238 = (IOAccelShared2 *)0x0;
    cVar8 = IOAccelContext2::lookupResource(uVar20,(void **)(ulong)*(uint *)(lVar4 + 8));
    if (cVar8 == '\0') {
      return;
    }
    if (*(long *)(this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_238);
    return;
  }
  if (*(long *)(this + 0x5c0) == 0) {
    return;
  }
  local_38 = (IGAccelResource *)0x0;
  cVar8 = IOAccelContext2::lookupResource(uVar20,(void **)(ulong)*(uint *)(lVar4 + 0x14));
  if (cVar8 == '\0') {
LAB_0005ad49:
    IOAccelContext2::setContextError(uVar20);
    return;
  }
  IVar1 = *(IGAccelResource *)(lVar4 + 0x28);
  if ((byte)local_38[0xac] <= (byte)IVar1) goto LAB_0005ad49;
  cVar8 = (**(code **)(*(long *)this + 0xa40))
                    (this,param_1,local_38,1,*(undefined8 *)(this + 0x12c0),1,1);
  if (cVar8 == '\0') {
    if ((local_38 != (IGAccelResource *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
      *(undefined1 *)(param_1 + 0x3c) = 0;
      this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
      goto LAB_0005ad86;
    }
  }
  else {
    local_78[0] = 1;
    local_78[1] = 1;
    local_b8 = 0;
    local_90 = 0;
    local_70 = 0;
    local_44 = 0;
    local_6c = 0;
    local_68 = 0;
    local_64 = 0;
    IGAccelResource::get_tex_data(local_38,&local_b8,&local_90);
    if ((local_b8 != 0) &&
       (uVar12 = IGAccelResource::get_tex_info
                           (local_38,(uint)(byte)IVar1,(uint)*(byte *)(lVar4 + 0x29),
                            *(uint *)(lVar4 + 0x24),local_78,local_78 + 1,&local_70,&local_44,
                            &local_6c,&local_68,&local_64), (char)uVar12 != '\0')) {
      (**(code **)(*(long *)local_38 + 0x168))(local_38,IVar1,*(undefined1 *)(lVar4 + 0x29));
      iVar11 = IOAccelSurface::convertGLIndexToBufferIndex
                         (*(undefined8 *)(this + 0x5c0),*(undefined4 *)(lVar4 + 0x38));
      local_e0 = 0;
      local_e8 = 0;
      local_f0 = 0;
      local_f8 = (IOAccelShared2 *)0x0;
      local_100 = 0;
      getSurfaceBufferInfo(&local_100,(long)this,iVar11);
      if ((char)local_100 != '\0') {
        uVar10 = getIntelSurfaceFormat
                           ((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(this + 0x5c0)),iVar11);
        local_a0 = *(long *)(local_e0 + 0xb8);
        if (local_a0 == 0) {
          local_a0 = *(long *)(local_e0 + 0xc0);
        }
        local_98 = local_f8;
        local_a8 = local_e0;
        lVar13 = IOAccelResource2::getStorageResource();
        if ((local_44 == 0x10a) || (uVar20 = (uint)uVar10, local_44 == 0xd8)) {
          uVar20 = local_44;
        }
        lVar5 = *(long *)(this + 0x5c0);
        sVar3 = *(short *)(&DAT_000011bc + lVar5);
        if ((*(short *)(&DAT_000011b8 + lVar5) != sVar3) ||
           (sVar17 = *(short *)(&DAT_000011be + lVar5), *(short *)(&DAT_000011ba + lVar5) != sVar17)
           ) {
          sVar17 = *(short *)(&DAT_000011ba + lVar5);
          sVar3 = *(short *)(&DAT_000011b8 + lVar5);
        }
        local_4c = (int)sVar3;
        local_4e = *(undefined2 *)(lVar13 + 0x194);
        local_48 = (int)sVar17;
        if (local_4c == 0) {
          local_4c = 1;
        }
        local_50 = (undefined2)uVar20;
        if (sVar17 == 0) {
          local_48 = 1;
        }
        local_8c = *(int *)(lVar4 + 0xc);
        local_88 = local_8c + *(int *)(lVar4 + 0x2c);
        local_3c = *(int *)(lVar4 + 0x10);
        local_40 = local_3c + *(int *)(lVar4 + 0x30);
        local_60 = *(int *)(lVar4 + 0x1c);
        local_c0 = local_60 + *(int *)(lVar4 + 0x2c);
        local_84 = *(int *)(lVar4 + 0x20);
        local_bc = local_84 + *(int *)(lVar4 + 0x30);
        clip_src_dst_surfaces
                  (&local_4c,&local_48,(int *)local_78,(int *)(local_78 + 1),&local_8c,&local_88,
                   &local_3c,&local_40,&local_60,&local_c0,&local_84,&local_bc);
        local_60 = local_60 + local_68;
        local_c0 = local_68 + local_c0;
        local_84 = local_84 + local_64;
        local_bc = local_64 + local_bc;
        local_5c = local_c0;
        local_58 = local_bc;
        local_54 = local_84;
        ___bzero((blit3d_params_t *)&local_238,0x138);
        blit3d_params_t::blit3d_params_t((blit3d_params_t *)&local_238);
        local_1f8 = 0;
        local_208 = 0;
        local_210 = 0;
        local_218 = 0;
        local_220 = 0;
        local_228 = 0;
        local_230 = 0;
        local_238 = (IOAccelShared2 *)0x0;
        local_200 = 0x100000000;
        local_1f0 = 0;
        local_1e8 = 0;
        local_1e0 = 0;
        local_1d8[0] = 0;
        local_1d8[1] = 0;
        local_1d8[2] = 0;
        local_1d8[3] = 0;
        local_1d8[4] = 0;
        local_1d8[5] = 0;
        local_1d8[6] = 0;
        local_1d8[7] = 0;
        local_1b0 = (IGAccelResource *)0x0;
        local_1d8[8] = 0;
        local_1d8[9] = 1;
        local_1a8 = 0;
        local_1a0 = 0;
        local_196 = 0;
        local_198 = 0;
        local_190 = 0;
        local_188 = 0;
        local_180 = 0;
        local_178[0] = 0;
        local_160[0] = 0;
        local_130 = 0;
        local_128 = 0;
        local_120 = 0;
        local_118 = 0;
        local_110 = 0;
        local_108 = 0;
        AddSrcDstEvents((IGVector<> *)local_178,local_a8,(long)local_38);
        AddUpdateEvent((long)local_178,local_f0);
        local_b0 = (IOAccelShared2 *)
                   addSrcMcsResourceData
                             (this,param_1,(long)&local_238,*(uint *)(lVar4 + 8),
                              *(byte *)(lVar4 + 0x34) & 1);
        local_80 = (IOAccelShared2 *)
                   addDstMcsResourceData
                             (this,param_1,(long)&local_238,*(uint *)(lVar4 + 0x18),
                              (*(byte *)(lVar4 + 0x34) & 2) >> 1);
        local_228 = (ulong)CONCAT24(*(undefined2 *)(local_a8 + 0xb0),(undefined4)local_228);
        local_220 = CONCAT44(local_220._4_4_,(uint)*(ushort *)(local_a8 + 0xb2));
        local_1e0 = (ulong)CONCAT24(*(undefined2 *)(local_38 + 0xb0),(undefined4)local_1e0);
        local_1d8[0] = (uint)*(ushort *)(local_38 + 0xb2);
        IGAccelResource::getBufferWidthHeight
                  (local_38,(uint *)((long)&local_1e0 + 4),local_1d8,local_44);
        local_c8 = (float *)0x0;
        local_d8[1] = 0;
        local_d8[0] = 0;
        uVar14 = IGVector<>::grow((IGVector<> *)local_d8,1);
        uVar20 = local_196;
        if ((char)uVar14 != '\0') {
          local_d8[0] = 1;
        }
        bVar21 = *(char *)(lVar4 + 0x3c) != '\0';
        if (bVar21) {
          local_3c = local_48 - local_3c;
          local_40 = local_48 - local_40;
          local_196 = local_196 | 0x400000;
        }
        local_238 = local_98;
        cVar8 = *(char *)(lVar4 + 0x2a);
        local_230 = CONCAT26(local_50,CONCAT15(cVar8,CONCAT14((char)local_4e,(int)local_a0)));
        local_228 = CONCAT44(local_228._4_4_,0x23);
        local_1f8 = local_e0;
        iVar11 = local_40;
        iVar18 = local_3c;
        if (!bVar21 && (uVar20 & 0x400000) == 0) {
          iVar11 = local_3c;
          iVar18 = local_40;
        }
        *local_c8 = (float)local_8c;
        local_c8[1] = (float)iVar11;
        local_c8[2] = (float)(local_88 - local_8c);
        local_c8[3] = (float)(iVar18 - iVar11);
        local_1f0 = local_b8;
        cVar2 = *(char *)(lVar4 + 0x2b);
        local_1e8 = CONCAT26((undefined2)local_44,
                             CONCAT15(cVar2,CONCAT14((undefined1)local_70,local_90)));
        local_1e0 = CONCAT44(local_1e0._4_4_,5);
        uVar23 = 0;
        fVar22 = (float)local_54;
        uVar25 = 0;
        fVar24 = (float)(local_5c - local_60);
        pcVar19 = (char *)(ulong)(uint)(local_58 - local_54);
        uVar27 = 0;
        fVar26 = (float)(local_58 - local_54);
        local_1b0 = local_38;
        local_c8[4] = (float)local_60;
        local_c8[5] = fVar22;
        local_c8[6] = fVar24;
        local_c8[7] = fVar26;
        local_198 = (undefined1)local_6c;
        if (cVar8 != cVar2) {
          local_196 = local_196 & 0xfffffff8 | 1;
        }
        (**(code **)(*(long *)this + 0xa38))(this,param_1);
        (**(code **)(*(long *)this + 0xa48))(this,param_1,local_38,*(undefined8 *)(this + 0x12c0));
        pIVar6 = *(IntelAccelerator **)(this + 0x5a8);
        pIVar15 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        IntelAccelerator::submitBlit
                  (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar23,fVar22),
                   CONCAT44(uVar25,fVar24),CONCAT44(uVar27,fVar26),in_XMM4_Qa,in_XMM5_Qa,in_XMM6_Qa,
                   in_XMM7_Qa,pIVar6,(long *)&local_238,local_d8,pIVar15,0,pcVar19);
        pIVar7 = local_b0;
        if (*(long *)(this + 0x630) == 0) {
          IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
        }
        if ((local_80 != (IOAccelShared2 *)0x0) && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(local_80);
        }
        if ((pIVar7 != (IOAccelShared2 *)0x0) && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(pIVar7);
        }
        (**(code **)(*(long *)this + 0xa30))(this,param_1);
        iVar11 = *(int *)(*(long *)(this + 0x12c0) + 0x20);
        pIVar16 = (IOAccelShared2 *)local_38;
        if (((iVar11 == *(int *)(local_38 + 0x9c)) ||
            ((pIVar7 != (IOAccelShared2 *)0x0 &&
             (pIVar16 = pIVar7, iVar11 == *(int *)(pIVar7 + 0x9c))))) ||
           ((local_80 != (IOAccelShared2 *)0x0 &&
            (pIVar16 = local_80, iVar11 == *(int *)(local_80 + 0x9c))))) {
          IVar9 = (IGAccelGLContext)
                  (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                            (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                             (ulong)(byte)pIVar16[0x15] * 0x40 + *(long *)(pIVar16 + 0x38),
                             this + 0x12f8);
          this[0x1338] = IVar9;
        }
        IGVector<>::~IGVector((IGVector<> *)local_d8);
        IGVector<>::~IGVector((IGVector<> *)local_160);
        IGVector<>::~IGVector((IGVector<> *)local_178);
        return;
      }
      goto LAB_0005ad86;
    }
  }
  IOAccelContext2::setContextError(uVar20);
LAB_0005ad86:
  streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_38);
  return;
}



// IGAccelGLContext::process_token_CopyPixelsSrcFBO(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_CopyPixelsSrcFBO(IGAccelGLContext *this,long param_1)

{
  IGAccelResource IVar1;
  byte bVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  long lVar6;
  IntelAccelerator *pIVar7;
  IOAccelShared2 *pIVar8;
  IOAccelShared2 *pIVar9;
  char cVar10;
  IGAccelGLContext IVar11;
  ulong uVar12;
  undefined8 uVar13;
  IGAccelTask *pIVar14;
  IGAccelResource *pIVar15;
  uint uVar16;
  char *pcVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar18;
  undefined4 uVar19;
  float fVar20;
  undefined4 uVar21;
  float fVar22;
  undefined4 uVar23;
  undefined8 in_XMM4_Qa;
  undefined8 in_XMM5_Qa;
  undefined8 in_XMM6_Qa;
  undefined8 in_XMM7_Qa;
  IOAccelShared2 *local_240;
  undefined8 local_238;
  undefined8 local_230;
  uint local_228 [10];
  IGAccelResource *local_200;
  long local_1f8;
  undefined8 local_1f0;
  undefined8 local_1e8;
  uint local_1e0 [10];
  IOAccelShared2 *local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined1 local_1a0;
  uint local_19e;
  undefined4 local_198;
  undefined8 local_190;
  undefined1 local_188;
  undefined8 local_180 [3];
  undefined8 local_168 [6];
  undefined8 local_138;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 local_120;
  undefined8 local_118;
  undefined8 local_110;
  ulong local_108 [2];
  float *local_f8;
  int local_f0;
  uint local_ec;
  IOAccelShared2 *local_e8;
  long local_e0;
  undefined4 local_d8;
  undefined4 local_d4;
  uint local_d0;
  int local_cc;
  int local_c8;
  int local_c4;
  int local_c0;
  uint local_bc;
  uint local_b8;
  uint local_b4;
  int local_b0;
  uint local_ac;
  int local_a8;
  int local_a4;
  IOAccelShared2 *local_a0;
  IOAccelShared2 *local_98;
  uint local_90 [2];
  uint local_88;
  uint local_84;
  int local_80;
  int local_7c [3];
  uint local_70;
  uint local_6c;
  int local_68;
  int local_64;
  uint local_60;
  int local_5c;
  uint local_58;
  uint local_54;
  uint local_50;
  uint local_4c;
  IOAccelShared2 *local_48;
  byte local_39;
  IGAccelResource *local_38;
  
  lVar6 = *(long *)(param_1 + 0x18);
  uVar16 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar6 + 0x48U) {
    IOAccelContext2::setContextError(uVar16);
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  uVar3 = *(uint *)(lVar6 + 8);
  uVar4 = *(uint *)(lVar6 + 0x18);
  if (*(char *)(param_1 + 0x3c) == '\0') {
    local_240 = (IOAccelShared2 *)0x0;
    cVar10 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar6 + 0x14));
    if ((cVar10 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_240);
    }
    if (uVar4 != 0) {
      local_240 = (IOAccelShared2 *)0x0;
      cVar10 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)uVar4);
      if ((cVar10 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_240);
      }
    }
    if (uVar3 == 0) {
      return;
    }
    local_240 = (IOAccelShared2 *)0x0;
    cVar10 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)uVar3);
    if (cVar10 == '\0') {
      return;
    }
    if (*(long *)(this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_240);
    return;
  }
  local_98 = (IOAccelShared2 *)CONCAT44(local_98._4_4_,*(undefined4 *)(lVar6 + 0x38));
  local_4c = *(uint *)(lVar6 + 0x3c);
  local_54 = *(uint *)(lVar6 + 0x40);
  local_50 = *(uint *)(lVar6 + 0x44);
  local_a0 = (IOAccelShared2 *)CONCAT44(local_a0._4_4_,*(undefined4 *)(lVar6 + 0x24));
  IVar1 = *(IGAccelResource *)(lVar6 + 0x28);
  bVar2 = *(byte *)(lVar6 + 0x29);
  local_39 = *(byte *)(lVar6 + 0x34);
  local_38 = (IGAccelResource *)0x0;
  local_bc = uVar3;
  local_b8 = uVar4;
  cVar10 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar6 + 0x14));
  if ((cVar10 == '\0') || ((byte)local_38[0xac] <= (byte)IVar1)) {
    IOAccelContext2::setContextError(uVar16);
    return;
  }
  cVar10 = (**(code **)(*(long *)this + 0xa40))
                     (this,param_1,local_38,1,*(undefined8 *)(this + 0x12c0),1,1);
  if (cVar10 == '\0') {
    if ((local_38 != (IGAccelResource *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
      *(undefined1 *)(param_1 + 0x3c) = 0;
      this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
      pIVar15 = local_38;
      goto LAB_0005bc9b;
    }
  }
  else {
    local_90[0] = 1;
    local_90[1] = 1;
    local_e0 = 0;
    local_d8 = 0;
    local_88 = 0;
    local_58 = 0;
    local_84 = 0;
    local_80 = 0;
    local_7c[0] = 0;
    IGAccelResource::get_tex_data(local_38,&local_e0,&local_d8);
    if (local_e0 != 0) {
      uVar12 = IGAccelResource::get_tex_info
                         (local_38,(uint)(byte)IVar1,(uint)bVar2,(uint)local_a0,local_90,
                          local_90 + 1,&local_88,&local_58,&local_84,&local_80,local_7c);
      if ((char)uVar12 != '\0') {
        (**(code **)(*(long *)local_38 + 0x168))(local_38,IVar1,bVar2);
        local_48 = (IOAccelShared2 *)0x0;
        cVar10 = IOAccelContext2::lookupResource(uVar16,(void **)((ulong)local_98 & 0xffffffff));
        if ((cVar10 != '\0') && (local_4c < (byte)local_48[0xac])) {
          cVar10 = (**(code **)(*(long *)this + 0xa40))
                             (this,param_1,local_48,1,*(undefined8 *)(this + 0x12c0),0,1);
          if (cVar10 == '\0') {
            if ((local_48 == (IOAccelShared2 *)0x0) ||
               (((byte)*(IGAccelResource *)(local_48 + 0xe) & 0x10) != 0)) goto LAB_0005bcd5;
            *(undefined1 *)(param_1 + 0x3c) = 0;
            this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
          }
          else {
            local_7c[1] = 1;
            local_7c[2] = 1;
            local_e8 = (IOAccelShared2 *)0x0;
            local_d4 = 0;
            local_70 = 0;
            local_6c = 0;
            local_d0 = 0;
            local_68 = 0;
            local_64 = 0;
            IGAccelResource::get_tex_data((IGAccelResource *)local_48,(long *)&local_e8,&local_d4);
            if ((local_e8 != (IOAccelShared2 *)0x0) &&
               (uVar12 = IGAccelResource::get_tex_info
                                   ((IGAccelResource *)local_48,local_4c,local_54,local_50,
                                    (uint *)(local_7c + 1),(uint *)(local_7c + 2),&local_70,
                                    &local_6c,&local_d0,&local_68,&local_64), (char)uVar12 != '\0'))
            {
              local_cc = *(int *)(lVar6 + 0xc);
              local_f0 = local_cc + *(int *)(lVar6 + 0x2c);
              local_60 = *(uint *)(lVar6 + 0x10);
              local_ec = local_60 + *(int *)(lVar6 + 0x30);
              local_5c = *(int *)(lVar6 + 0x1c);
              local_c8 = local_5c + *(int *)(lVar6 + 0x2c);
              local_c4 = *(int *)(lVar6 + 0x20);
              local_c0 = local_c4 + *(int *)(lVar6 + 0x30);
              clip_src_dst_surfaces
                        (local_7c + 1,local_7c + 2,(int *)local_90,(int *)(local_90 + 1),&local_cc,
                         &local_f0,(int *)&local_60,(int *)&local_ec,&local_5c,&local_c8,&local_c4,
                         &local_c0);
              local_cc = local_cc + local_68;
              local_f0 = local_68 + local_f0;
              local_ac = local_60 + local_64;
              local_ec = local_64 + local_ec;
              local_b0 = local_5c + local_80;
              local_c8 = local_80 + local_c8;
              local_c4 = local_c4 + local_7c[0];
              local_c0 = local_7c[0] + local_c0;
              local_b4 = local_ec;
              local_a8 = local_c0;
              local_a4 = local_c4;
              local_60 = local_ac;
              local_5c = local_b0;
              local_54 = local_c8;
              local_50 = local_cc;
              local_4c = local_f0;
              ___bzero((blit3d_params_t *)&local_240,0x138);
              blit3d_params_t::blit3d_params_t((blit3d_params_t *)&local_240);
              local_200 = (IGAccelResource *)0x0;
              local_228[6] = 0;
              local_228[7] = 0;
              local_228[4] = 0;
              local_228[5] = 0;
              local_228[2] = 0;
              local_228[3] = 0;
              local_228[0] = 0;
              local_228[1] = 0;
              local_230 = 0;
              local_238 = 0;
              local_240 = (IOAccelShared2 *)0x0;
              local_228[8] = 0;
              local_228[9] = 1;
              local_1f8 = 0;
              local_1f0 = 0;
              local_1e8 = 0;
              local_1e0[0] = 0;
              local_1e0[1] = 0;
              local_1e0[2] = 0;
              local_1e0[3] = 0;
              local_1e0[4] = 0;
              local_1e0[5] = 0;
              local_1e0[6] = 0;
              local_1e0[7] = 0;
              local_1b8 = (IOAccelShared2 *)0x0;
              local_1e0[8] = 0;
              local_1e0[9] = 1;
              local_1b0 = 0;
              local_1a8 = 0;
              local_19e = 0;
              local_1a0 = 0;
              local_198 = 0;
              local_190 = 0;
              local_188 = 0;
              local_180[0] = 0;
              local_168[0] = 0;
              local_138 = 0;
              local_130 = 0;
              local_128 = 0;
              local_120 = 0;
              local_118 = 0;
              local_110 = 0;
              AddSrcDstEvents((IGVector<> *)local_180,(long)local_48,(long)local_38);
              bVar2 = local_39;
              local_a0 = (IOAccelShared2 *)
                         addSrcMcsResourceData(this,param_1,(long)&local_240,local_bc,local_39 & 1);
              local_98 = (IOAccelShared2 *)
                         addDstMcsResourceData
                                   (this,param_1,(long)&local_240,local_b8,(bVar2 & 2) >> 1);
              local_f8 = (float *)0x0;
              local_108[1] = 0;
              local_108[0] = 0;
              uVar13 = IGVector<>::grow((IGVector<> *)local_108,1);
              if ((char)uVar13 != '\0') {
                local_108[0] = 1;
              }
              local_240 = local_e8;
              local_228[0] = (uint)*(ushort *)(local_48 + 0xb2);
              local_238 = CONCAT26((short)local_6c,
                                   CONCAT15(*(undefined1 *)(lVar6 + 0x2a),
                                            CONCAT14((undefined1)local_70,local_d4)));
              local_230 = CONCAT44((uint)*(ushort *)(local_48 + 0xb0),0x23);
              local_200 = (IGAccelResource *)local_48;
              local_1f8 = local_e0;
              local_1e0[0] = (uint)*(ushort *)(local_38 + 0xb2);
              local_1f0 = CONCAT26((undefined2)local_58,
                                   CONCAT15(*(undefined1 *)(lVar6 + 0x2b),
                                            CONCAT14((undefined1)local_88,local_d8)));
              local_1e8 = CONCAT44((uint)*(ushort *)(local_38 + 0xb0),5);
              local_1b8 = (IOAccelShared2 *)local_38;
              IGAccelResource::getBufferWidthHeight
                        ((IGAccelResource *)local_48,(uint *)((long)&local_230 + 4),local_228,
                         local_6c);
              IGAccelResource::getBufferWidthHeight
                        (local_38,(uint *)((long)&local_1e8 + 4),local_1e0,local_58);
              pcVar17 = (char *)(ulong)local_ac;
              uVar16 = local_b4;
              iVar5 = local_ac - local_b4;
              if ((local_19e & 0x400000) == 0) {
                uVar16 = local_ac;
                iVar5 = local_b4 - local_ac;
              }
              *local_f8 = (float)(int)local_50;
              local_f8[1] = (float)(int)uVar16;
              local_f8[2] = (float)(int)(local_4c - local_50);
              local_f8[3] = (float)iVar5;
              uVar19 = 0;
              fVar18 = (float)local_a4;
              uVar21 = 0;
              fVar20 = (float)(int)(local_54 - local_b0);
              uVar23 = 0;
              fVar22 = (float)(local_a8 - local_a4);
              local_f8[4] = (float)local_b0;
              local_f8[5] = fVar18;
              local_f8[6] = fVar20;
              local_f8[7] = fVar22;
              local_1a0 = (undefined1)local_84;
              if (*(char *)(lVar6 + 0x2a) != *(char *)(lVar6 + 0x2b)) {
                local_19e = local_19e & 0xfffffff8 | 1;
              }
              (**(code **)(*(long *)this + 0xa38))(this,param_1);
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,local_48,*(undefined8 *)(this + 0x12c0));
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,local_38,*(undefined8 *)(this + 0x12c0));
              pIVar7 = *(IntelAccelerator **)(this + 0x5a8);
              pIVar14 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
              IntelAccelerator::submitBlit
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar19,fVar18),
                         CONCAT44(uVar21,fVar20),CONCAT44(uVar23,fVar22),in_XMM4_Qa,in_XMM5_Qa,
                         in_XMM6_Qa,in_XMM7_Qa,pIVar7,(long *)&local_240,local_108,pIVar14,0,pcVar17
                        );
              pIVar9 = local_98;
              if (*(long *)(this + 0x630) == 0) {
                IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
              }
              pIVar8 = local_a0;
              if ((pIVar9 != (IOAccelShared2 *)0x0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease(pIVar9);
              }
              if ((pIVar8 != (IOAccelShared2 *)0x0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease(pIVar8);
              }
              (**(code **)(*(long *)this + 0xa30))(this,param_1);
              iVar5 = *(int *)(*(long *)(this + 0x12c0) + 0x20);
              pIVar15 = local_38;
              if ((((iVar5 == *(int *)(local_48 + 0x9c)) || (iVar5 == *(int *)(local_38 + 0x9c))) ||
                  ((pIVar8 != (IOAccelShared2 *)0x0 &&
                   (pIVar15 = (IGAccelResource *)pIVar8, iVar5 == *(int *)(pIVar8 + 0x9c))))) ||
                 ((pIVar9 != (IOAccelShared2 *)0x0 &&
                  (pIVar15 = (IGAccelResource *)pIVar9, iVar5 == *(int *)(pIVar9 + 0x9c))))) {
                IVar11 = (IGAccelGLContext)
                         (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                   (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                    (ulong)(byte)((IOAccelShared2 *)pIVar15)[0x15] * 0x40 +
                                    *(long *)((IOAccelShared2 *)pIVar15 + 0x38),this + 0x12f8);
                this[0x1338] = IVar11;
              }
              IGVector<>::~IGVector((IGVector<> *)local_108);
              IGVector<>::~IGVector((IGVector<> *)local_168);
              IGVector<>::~IGVector((IGVector<> *)local_180);
              return;
            }
LAB_0005bcd5:
            IOAccelContext2::setContextError(uVar16);
          }
          streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_38);
          pIVar15 = (IGAccelResource *)local_48;
          goto LAB_0005bc9b;
        }
      }
    }
  }
  IOAccelContext2::setContextError(uVar16);
  pIVar15 = local_38;
LAB_0005bc9b:
  streamErrorCleanup(this,param_1,(IOAccelShared2 *)pIVar15);
  return;
}



// IGAccelGLContext::process_token_BlitFramebuffer(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_BlitFramebuffer(IGAccelGLContext *this,long param_1)

{
  ushort *puVar1;
  uint uVar2;
  IntelAccelerator *pIVar3;
  ushort uVar4;
  double dVar5;
  ushort uVar6;
  char cVar7;
  IGAccelGLContext IVar8;
  int iVar9;
  ulong uVar10;
  long lVar11;
  IOAccelShared2 *pIVar12;
  long lVar13;
  IOAccelShared2 *pIVar14;
  undefined8 uVar15;
  IGAccelTask *pIVar16;
  IOAccelShared2 *pIVar17;
  byte bVar18;
  float *pfVar19;
  uint *puVar20;
  long lVar21;
  IGAccelGLContext *this_00;
  byte bVar22;
  uint uVar23;
  uint *puVar24;
  byte bVar25;
  uint uVar26;
  uint uVar27;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar28;
  float fVar29;
  undefined8 extraout_XMM1_Qa;
  undefined1 auVar30 [12];
  undefined1 auVar31 [12];
  float fVar32;
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  float fVar35;
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  IOAccelShared2 *local_2e8;
  undefined8 local_2e0;
  undefined8 local_2d8;
  undefined8 local_2d0;
  undefined8 local_2c8;
  undefined8 local_2c0;
  undefined8 local_2b8;
  undefined8 local_2b0;
  IOAccelShared2 *local_2a8;
  IOAccelShared2 *local_2a0;
  undefined8 local_298;
  undefined8 local_290;
  undefined8 local_288;
  undefined8 local_280;
  undefined8 local_278;
  undefined8 local_270;
  undefined8 local_268;
  IOAccelShared2 *local_260;
  undefined8 local_258;
  undefined8 local_250;
  undefined1 local_248;
  undefined4 local_246;
  undefined4 local_240;
  undefined8 local_238;
  undefined1 local_230;
  undefined8 local_228;
  ulong local_220;
  long local_218;
  ulong local_210;
  ulong local_208;
  long local_200;
  undefined8 local_1f0;
  undefined8 local_1e8;
  undefined8 local_1e0;
  undefined8 local_1d8;
  undefined8 local_1d0;
  undefined8 local_1c8;
  undefined8 local_1c0;
  undefined8 local_1b8;
  ulong local_1b0;
  IOAccelShared2 *local_1a8;
  float *local_1a0;
  undefined8 local_198;
  IOAccelShared2 *local_190;
  undefined1 local_188 [16];
  undefined1 local_178 [16];
  undefined1 local_168 [16];
  undefined1 local_158 [16];
  uint local_148 [5];
  uint local_134;
  uint local_130;
  uint local_12c;
  IOAccelShared2 *local_128;
  IOAccelShared2 *local_120;
  undefined1 local_118 [16];
  undefined1 local_108 [16];
  undefined1 local_f8 [16];
  undefined1 local_e8 [12];
  uint uStack_dc;
  uint local_cc;
  uint local_c8;
  uint local_c4;
  uint local_c0;
  uint local_bc;
  uint local_b8;
  undefined4 local_b4;
  IOAccelShared2 *local_b0;
  IGAccelGLContext *local_a8;
  float *local_a0;
  double local_98;
  int local_90;
  uint local_8c;
  uint local_88;
  int local_84;
  uint local_80;
  uint local_7c;
  uint local_78;
  uint local_74;
  uint local_70;
  uint local_6c;
  uint local_68;
  uint local_64;
  uint local_60;
  uint local_5c;
  IOAccelShared2 *local_58;
  long local_50;
  ushort local_42;
  IOAccelShared2 *local_40;
  ushort local_32;
  
  lVar21 = *(long *)(param_1 + 0x18);
  uVar23 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar21 + 0x80U) {
    IOAccelContext2::setContextError(uVar23);
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  uVar26 = *(uint *)(lVar21 + 8);
  local_c0 = *(uint *)(lVar21 + 0x1c);
  uVar27 = *(uint *)(lVar21 + 0x74);
  uVar2 = *(uint *)(lVar21 + 0x78);
  if (*(char *)(param_1 + 0x3c) == '\0') {
    if (local_c0 != 0) {
      local_2e8 = (IOAccelShared2 *)0x0;
      cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)local_c0);
      if ((cVar7 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_2e8);
      }
    }
    if (uVar26 != 0) {
      local_2e8 = (IOAccelShared2 *)0x0;
      cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)uVar26);
      if ((cVar7 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_2e8);
      }
    }
    if (uVar2 != 0) {
      local_2e8 = (IOAccelShared2 *)0x0;
      cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)uVar2);
      if ((cVar7 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_2e8);
      }
    }
    if (uVar27 == 0) {
      return;
    }
    local_2e8 = (IOAccelShared2 *)0x0;
    cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)uVar27);
    if (cVar7 == '\0') {
      return;
    }
    if (*(long *)(this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_2e8);
    return;
  }
  local_b8 = *(uint *)(lVar21 + 0x10);
  local_130 = *(uint *)(lVar21 + 0x14);
  puVar24 = (uint *)(ulong)local_130;
  local_12c = *(uint *)(lVar21 + 0x18);
  local_a0 = (float *)CONCAT44(local_a0._4_4_,*(undefined4 *)(lVar21 + 0x24));
  local_98 = (double)CONCAT44(local_98._4_4_,*(undefined4 *)(lVar21 + 0x28));
  local_b0 = (IOAccelShared2 *)(ulong)*(uint *)(lVar21 + 0x2c);
  local_b4 = *(undefined4 *)(lVar21 + 0x30);
  local_42 = *(ushort *)(lVar21 + 0x54);
  local_32 = *(ushort *)(lVar21 + 0x56);
  if (((local_c0 == 0) || (uVar26 == 0)) && (*(long *)(this + 0x5c0) == 0)) {
    return;
  }
  local_6c = (uint)*(ushort *)(lVar21 + 0x7c);
  local_40 = (IOAccelShared2 *)0x0;
  local_58 = (IOAccelShared2 *)0x0;
  local_168 = ZEXT416(*(uint *)(lVar21 + 0x34));
  _local_e8 = ZEXT416(*(uint *)(lVar21 + 0x38));
  local_158 = ZEXT416(*(uint *)(lVar21 + 0x3c));
  local_f8 = ZEXT416(*(uint *)(lVar21 + 0x40));
  local_178 = ZEXT416(*(uint *)(lVar21 + 0x44));
  local_108 = ZEXT416(*(uint *)(lVar21 + 0x48));
  local_188 = ZEXT416(*(uint *)(lVar21 + 0x4c));
  local_118 = ZEXT416(*(uint *)(lVar21 + 0x50));
  local_148[0] = 1;
  local_148[1] = 1;
  local_128 = (IOAccelShared2 *)0x0;
  local_90 = 0;
  local_8c = 0;
  local_78 = 0;
  local_74 = 0;
  local_cc = 0;
  local_88 = 0;
  local_68 = 0;
  local_60 = 0;
  local_148[4] = uVar27;
  local_134 = uVar2;
  local_bc = uVar26;
  local_a8 = this;
  local_50 = param_1;
  ___bzero(&local_2e8,0x138);
  IGVector<>::grow((IGVector<> *)&local_228,4);
  local_210 = 0;
  local_208 = 0;
  local_200 = 0;
  IGVector<>::grow((IGVector<> *)&local_210,4);
  this_00 = local_a8;
  local_2e8 = (IOAccelShared2 *)0x0;
  local_2e0 = 0;
  local_2d8 = 0;
  local_2d0 = 0;
  local_2c8 = 0;
  local_2c0 = 0;
  local_2b8 = 0;
  local_2a8 = (IOAccelShared2 *)0x0;
  local_2b0 = 0x100000000;
  local_2a0 = (IOAccelShared2 *)0x0;
  local_298 = 0;
  local_290 = 0;
  local_288 = 0;
  local_280 = 0;
  local_278 = 0;
  local_270 = 0;
  local_260 = (IOAccelShared2 *)0x0;
  local_268 = 0x100000000;
  local_258 = 0;
  local_250 = 0;
  local_246 = 0;
  local_248 = 0;
  local_240 = 0;
  local_238 = 0;
  local_230 = 0;
  local_228 = 0;
  local_210 = 0;
  local_1e0 = 0;
  local_1d8 = 0;
  local_1d0 = 0;
  local_1c8 = 0;
  local_1c0 = 0;
  local_1b8 = 0;
  if (local_c0 != 0) {
    uVar23 = (uint)local_a8;
    cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)local_c0);
    if ((cVar7 == '\0') || (uVar26 = (uint)local_a0, (byte)local_40[0xac] <= (uint)local_a0)) {
      IOAccelContext2::setContextError(uVar23);
      goto LAB_0005c622;
    }
    cVar7 = (**(code **)(*(long *)this_00 + 0xa40))
                      (this_00,local_50,local_40,1,*(long *)(this_00 + 0x12c0),1,1);
    if (cVar7 == '\0') {
      if ((local_40 == (IOAccelShared2 *)0x0) || (((byte)local_40[0xe] & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar23);
        pIVar14 = local_40;
        lVar11 = local_50;
      }
      else {
        *(undefined1 *)(local_50 + 0x3c) = 0;
        this_00[0x63b] = (IGAccelGLContext)((byte)this_00[0x63b] | 4);
        pIVar14 = local_40;
        lVar11 = local_50;
      }
LAB_0005d1df:
      streamErrorCleanup(this_00,lVar11,pIVar14);
      goto LAB_0005c622;
    }
    AddDstEvents((IGVector<> *)&local_228,(long)local_40);
    IGAccelResource::get_tex_data((IGAccelResource *)local_40,(long *)&local_128,&local_90);
    if (local_128 != (IOAccelShared2 *)0x0) {
      puVar24 = local_148 + 1;
      uVar10 = IGAccelResource::get_tex_info
                         ((IGAccelResource *)local_40,uVar26,local_98._0_4_,(uint)local_b0,local_148
                          ,puVar24,&local_8c,&local_78,&local_74,&local_cc,&local_88);
      if ((char)uVar10 != '\0') {
        local_78 = *(uint *)(lVar21 + 0x5c);
        local_68 = (uint)*(ushort *)(local_40 + 0xb0);
        local_60 = (uint)*(ushort *)(local_40 + 0xb2);
        if (local_32 < 2) {
          IGAccelResource::getBufferWidthHeight
                    ((IGAccelResource *)local_40,&local_68,&local_60,local_78);
        }
        dVar5 = local_98;
        (**(code **)(*(long *)local_40 + 0x168))
                  (local_40,(ulong)local_a0 & 0xffffffff,(ulong)local_98 & 0xffffffff);
        lVar11 = IOAccelResource2::getStorageResource();
        puVar1 = (ushort *)(*(long *)(lVar11 + 0x1d8) + (long)local_b0 * 2);
        *puVar1 = *puVar1 | (ushort)(1 << (SUB81(dVar5,0) & 0x1f));
        bVar25 = SUB81(dVar5,0) & 0x1f;
        puVar1 = (ushort *)(*(long *)(lVar11 + 0x1e0) + (long)local_b0 * 2);
        *puVar1 = *puVar1 & ((ushort)(-2 << bVar25) | (ushort)(0xfffffffe >> 0x20 - bVar25));
        (**(code **)(*(long *)this_00 + 0xa48))
                  (this_00,local_50,local_40,*(long *)(this_00 + 0x12c0));
        local_290 = CONCAT44(local_290._4_4_,5);
        local_260 = local_40;
        goto LAB_0005c461;
      }
    }
LAB_0005c5fb:
    IOAccelContext2::setContextError((uint)this_00);
    pIVar12 = local_40;
    lVar11 = local_50;
LAB_0005c613:
    streamErrorCleanup(this_00,lVar11,pIVar12);
    goto LAB_0005c622;
  }
  iVar9 = IOAccelSurface::convertGLIndexToBufferIndex
                    (*(long *)(local_a8 + 0x5c0),*(undefined4 *)(lVar21 + 0x20));
  local_190 = (IOAccelShared2 *)0x0;
  local_198 = 0;
  local_1a0 = (float *)0x0;
  local_1a8 = (IOAccelShared2 *)0x0;
  local_1b0 = 0;
  getSurfaceBufferInfo(&local_1b0,(long)this_00,iVar9);
  pIVar14 = local_190;
  if (local_1b0._0_1_ == (IGVector<>)0x0) goto LAB_0005c622;
  AddDstResourceEvents((IGVector<> *)&local_228,(long)local_190);
  pIVar12 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
  if (pIVar12 != pIVar14) {
    AddDstResourceEvents((IGVector<> *)&local_228,(long)pIVar12);
  }
  pfVar19 = local_1a0;
  if ((local_210 != local_208) ||
     (uVar15 = IGVector<>::grow((IGVector<> *)&local_210,local_210 * 2), (char)uVar15 != '\0')) {
    *(float **)(local_200 + local_210 * 8) = pfVar19;
    local_210 = local_210 + 1;
  }
  this_00 = local_a8;
  if (iVar9 - 8U < 3) {
    uVar10 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(local_a8 + 0x5c0)) & 0x17000000
                    ) - 0x1000000;
    local_78 = 0xd9;
    if (uVar10 < 0x7000000) {
      puVar20 = (uint *)(&DAT_00113898 + (uVar10 >> 0x16));
LAB_0005c3c3:
      local_78 = *puVar20;
    }
  }
  else {
    uVar10 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(local_a8 + 0x5c0)) & 0xf) - 3;
    local_78 = 0xc0;
    if (uVar10 < 0xd) {
      puVar20 = (uint *)(&DAT_001138b4 + uVar10 * 4);
      goto LAB_0005c3c3;
    }
  }
  local_128 = local_1a8;
  lVar11 = *(long *)(pIVar14 + 0xb8);
  if (lVar11 == 0) {
    lVar11 = *(long *)(pIVar14 + 0xc0);
  }
  local_90 = (int)lVar11;
  local_74 = (uint)(byte)pIVar14[0xd8];
  lVar11 = IOAccelResource2::getStorageResource();
  local_8c = (uint)*(ushort *)(lVar11 + 0x194);
  lVar11 = IOAccelResource2::getStorageResource();
  **(ushort **)(lVar11 + 0x1d8) = **(ushort **)(lVar11 + 0x1d8) | 1;
  **(ushort **)(lVar11 + 0x1e0) = **(ushort **)(lVar11 + 0x1e0) & 0xfffe;
  local_68 = (uint)*(ushort *)(pIVar14 + 0xb0);
  local_60 = (uint)*(ushort *)(pIVar14 + 0xb2);
  local_290 = local_290 & 0xffffffff00000000;
  local_260 = pIVar14;
LAB_0005c461:
  local_148[2] = 1;
  local_148[3] = 1;
  local_120 = (IOAccelShared2 *)0x0;
  local_84 = 0;
  local_80 = 0;
  local_70 = 0;
  local_c8 = 0;
  local_c4 = 0;
  local_7c = 0;
  local_64 = 0;
  local_5c = 0;
  if (local_bc == 0) {
    iVar9 = IOAccelSurface::convertGLIndexToBufferIndex
                      (*(undefined8 *)(this_00 + 0x5c0),*(undefined4 *)(lVar21 + 0xc));
    local_190 = (IOAccelShared2 *)0x0;
    local_198 = 0;
    local_1a0 = (float *)0x0;
    local_1a8 = (IOAccelShared2 *)0x0;
    local_1b0 = 0;
    getSurfaceBufferInfo(&local_1b0,(long)this_00,iVar9);
    pIVar14 = local_190;
    pIVar12 = local_40;
    lVar11 = local_50;
    if (local_1b0._0_1_ == (IGVector<>)0x0) goto LAB_0005c613;
    AddSrcResourceEvents((IGVector<> *)&local_228,(long)local_190);
    pIVar12 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
    if (pIVar12 != pIVar14) {
      AddSrcResourceEvents((IGVector<> *)&local_228,(long)pIVar12);
    }
    pfVar19 = local_1a0;
    if (local_210 == local_208) {
      local_a0 = local_1a0;
      uVar15 = IGVector<>::grow((IGVector<> *)&local_210,local_210 * 2);
      pfVar19 = local_a0;
      if ((char)uVar15 != '\0') goto LAB_0005c7c1;
    }
    else {
LAB_0005c7c1:
      *(float **)(local_200 + local_210 * 8) = pfVar19;
      local_210 = local_210 + 1;
    }
    lVar11 = local_50;
    this_00 = local_a8;
    if (iVar9 - 8U < 3) {
      uVar10 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(local_a8 + 0x5c0)) &
                      0x17000000) - 0x1000000;
      local_70 = 0xd9;
      if (uVar10 < 0x7000000) {
        puVar20 = (uint *)(&DAT_00113898 + (uVar10 >> 0x16));
LAB_0005c834:
        local_70 = *puVar20;
      }
    }
    else {
      uVar10 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(local_a8 + 0x5c0)) & 0xf) - 3
      ;
      local_70 = 0xc0;
      if (uVar10 < 0xd) {
        puVar20 = (uint *)(&DAT_001138b4 + uVar10 * 4);
        goto LAB_0005c834;
      }
    }
    local_120 = local_1a8;
    lVar13 = *(long *)(pIVar14 + 0xb8);
    if (lVar13 == 0) {
      lVar13 = *(long *)(pIVar14 + 0xc0);
    }
    local_84 = (int)lVar13;
    lVar13 = IOAccelResource2::getStorageResource();
    local_80 = (uint)*(ushort *)(lVar13 + 0x194);
    local_64 = (uint)*(ushort *)(pIVar14 + 0xb0);
    local_5c = (uint)*(ushort *)(pIVar14 + 0xb2);
    local_2a8 = pIVar14;
  }
  else {
    uVar23 = (uint)this_00;
    cVar7 = IOAccelContext2::lookupResource(uVar23,(void **)(ulong)local_bc);
    lVar11 = local_50;
    if ((cVar7 == '\0') || ((byte)local_58[0xac] <= local_b8)) goto LAB_0005c5fb;
    cVar7 = (**(code **)(*(long *)this_00 + 0xa40))
                      (this_00,local_50,local_58,1,*(undefined8 *)(this_00 + 0x12c0),0,1);
    if (cVar7 == '\0') {
      if ((local_58 == (IOAccelShared2 *)0x0) || (((byte)local_58[0xe] & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar23);
      }
      else {
        *(undefined1 *)(lVar11 + 0x3c) = 0;
        this_00[0x63b] = (IGAccelGLContext)((byte)this_00[0x63b] | 4);
      }
      streamErrorCleanup(this_00,lVar11,local_40);
      pIVar14 = local_58;
      goto LAB_0005d1df;
    }
    AddSrcEvents((IGVector<> *)&local_228,(long)local_58);
    IGAccelResource::get_tex_data((IGAccelResource *)local_58,(long *)&local_120,&local_84);
    if (local_120 == (IOAccelShared2 *)0x0) {
LAB_0005d184:
      IOAccelContext2::setContextError(uVar23);
      streamErrorCleanup(this_00,lVar11,local_40);
      pIVar12 = local_58;
      goto LAB_0005c613;
    }
    puVar24 = local_148 + 3;
    uVar10 = IGAccelResource::get_tex_info
                       ((IGAccelResource *)local_58,local_b8,local_130,local_12c,local_148 + 2,
                        puVar24,&local_80,&local_70,&local_c8,&local_c4,&local_7c);
    if ((char)uVar10 == '\0') goto LAB_0005d184;
    local_70 = *(uint *)(lVar21 + 0x58);
    local_64 = (uint)*(ushort *)(local_58 + 0xb0);
    local_5c = (uint)*(ushort *)(local_58 + 0xb2);
    if (local_42 < 2) {
      IGAccelResource::getBufferWidthHeight
                ((IGAccelResource *)local_58,&local_64,&local_5c,local_70);
    }
    (**(code **)(*(long *)this_00 + 0xa48))
              (this_00,lVar11,local_58,*(undefined8 *)(this_00 + 0x12c0));
    local_2a8 = local_58;
  }
  uVar23 = local_6c;
  local_2d8 = CONCAT44(local_2d8._4_4_,0x23);
  fVar28 = (float)local_158._0_4_ - (float)local_168._0_4_;
  uVar26 = -(uint)(fVar28 < -fVar28);
  fVar29 = (float)local_188._0_4_ - (float)local_178._0_4_;
  uVar27 = -(uint)(fVar29 < -fVar29);
  fVar28 = (float)(~uVar26 & (uint)fVar28 | (uint)-fVar28 & uVar26) -
           (float)(~uVar27 & (uint)fVar29 | (uint)-fVar29 & uVar27);
  uVar26 = -(uint)(fVar28 < -fVar28);
  local_98 = (double)(float)(~uVar26 & (uint)fVar28 | (uint)-fVar28 & uVar26);
  fVar28 = (float)local_f8._0_4_ - (float)local_e8._0_4_;
  uVar26 = -(uint)(fVar28 < -fVar28);
  fVar29 = (float)local_118._0_4_ - (float)local_108._0_4_;
  uVar27 = -(uint)(fVar29 < -fVar29);
  fVar28 = (float)(~uVar26 & (uint)fVar28 | (uint)-fVar28 & uVar26) -
           (float)(~uVar27 & (uint)fVar29 | (uint)-fVar29 & uVar27);
  uVar26 = -(uint)(fVar28 < -fVar28);
  local_a0 = (float *)(double)(float)(~uVar26 & (uint)fVar28 | (uint)-fVar28 & uVar26);
  local_b0 = (IOAccelShared2 *)
             addSrcMcsResourceData
                       (this_00,lVar11,(long)&local_2e8,local_148[4],(byte)((local_6c & 0xff) >> 7))
  ;
  pIVar14 = (IOAccelShared2 *)
            addDstMcsResourceData(this_00,lVar11,(long)&local_2e8,local_134,(byte)(uVar23 >> 8) & 1)
  ;
  (**(code **)(*(long *)this_00 + 0xa38))(this_00,lVar11);
  uVar6 = local_42;
  if ((double)local_a0 <= 1e-05) {
    auVar30 = ZEXT812(0);
    if (0.0 <= (float)local_e8._0_4_) {
      auVar30._4_8_ = 0;
      auVar30._0_4_ = local_e8._0_4_;
    }
    local_e8._0_4_ = (undefined4)(int)(auVar30._0_4_ + 0.5);
    local_e8._4_4_ = 0;
    local_e8._8_4_ = (undefined4)(int)auVar30._8_4_;
    uStack_dc = 0;
    fVar28 = (float)local_5c;
    if ((float)local_f8._0_4_ <= (float)local_5c) {
      fVar28 = (float)local_f8._0_4_;
    }
    local_f8 = ZEXT416((uint)(float)(int)(fVar28 + 0.5));
    fVar28 = 0.0;
    if (0.0 <= (float)local_108._0_4_) {
      fVar28 = (float)local_108._0_4_;
    }
    local_108._0_4_ = (undefined4)(int)(fVar28 + 0.5);
    local_108._4_4_ = 0;
    local_108._8_4_ = 0;
    local_108._12_4_ = 0;
    fVar28 = (float)local_60;
    if ((float)local_118._0_4_ <= (float)local_60) {
      fVar28 = (float)local_118._0_4_;
    }
    local_118._0_4_ = (undefined4)(int)(fVar28 + 0.5);
    local_118._4_4_ = 0;
    local_118._8_4_ = 0;
    local_118._12_4_ = 0;
  }
  else {
  }
  if (local_98 <= 1e-05) {
    auVar31 = ZEXT812(0);
    if (0.0 <= (float)local_168._0_4_) {
      auVar31._4_8_ = 0;
      auVar31._0_4_ = local_168._0_4_;
    }
    local_168._0_4_ = (undefined4)(int)(auVar31._0_4_ + 0.5);
    local_168._4_4_ = 0;
    local_168._8_4_ = (float)(int)auVar31._8_4_;
    local_168._12_4_ = 0;
    fVar28 = (float)local_64;
    if ((float)local_158._0_4_ <= (float)local_64) {
      fVar28 = (float)local_158._0_4_;
    }
    local_158 = ZEXT416((uint)(float)(int)(fVar28 + 0.5));
    fVar28 = 0.0;
    if (0.0 <= (float)local_178._0_4_) {
      fVar28 = (float)local_178._0_4_;
    }
    local_178._0_4_ = (undefined4)(int)(fVar28 + 0.5);
    local_178._4_4_ = 0;
    local_178._8_4_ = 0;
    local_178._12_4_ = 0;
    fVar28 = (float)local_68;
    if ((float)local_188._0_4_ <= (float)local_68) {
      fVar28 = (float)local_188._0_4_;
    }
    local_188._0_4_ = (undefined4)(int)(fVar28 + 0.5);
    local_188._4_4_ = 0;
    local_188._8_4_ = 0;
    local_188._12_4_ = 0;
  }
  bVar25 = (byte)local_6c >> 3 & 1;
  if ((local_c0 == 0) && (((&DAT_000011b2)[*(long *)(this_00 + 0x5c0)] & 0x70) == 0)) {
    local_108._0_4_ = (float)local_60 - (float)local_108._0_4_;
    local_118._0_4_ = (float)local_60 - (float)local_118._0_4_;
    bVar25 = bVar25 ^ 1;
    local_108._4_4_ = 0;
    local_108._8_4_ = 0;
    local_108._12_4_ = 0;
    local_118._4_4_ = 0;
    local_118._8_4_ = 0;
    local_118._12_4_ = 0;
  }
  if ((*(int *)(lVar21 + 8) == 0) && (((&DAT_000011b2)[*(long *)(this_00 + 0x5c0)] & 0x70) == 0)) {
    _local_e8 = ZEXT416((uint)((float)local_5c - (float)local_e8._0_4_));
    bVar25 = bVar25 ^ 1;
    local_f8 = ZEXT416((uint)((float)local_5c - (float)local_f8._0_4_));
  }
  local_2d8 = CONCAT44(local_64,(undefined4)local_2d8);
  local_2d0 = CONCAT44(local_2d0._4_4_,local_5c);
  local_290 = CONCAT44(local_68,(undefined4)local_290);
  local_288 = CONCAT44(local_288._4_4_,local_60);
  local_2e0._0_6_ = CONCAT15((char)local_42,(undefined5)local_2e0);
  local_298._0_6_ = CONCAT15((char)local_32,(undefined5)local_298);
  bVar18 = (byte)((*(ushort *)(lVar21 + 0x7c) & 0x40) >> 6);
  bVar22 = local_2b0._5_1_ & 0xf9;
  local_2b0._0_6_ =
       CONCAT15((local_c8 == 1 & bVar18) << 2 | bVar22 | (local_c8 != 1 & bVar18) * '\x02',
                (undefined5)local_2b0);
  bVar22 = local_268._5_1_ & 0xf9;
  local_268._0_6_ =
       CONCAT15(bVar22 | (local_74 != 1 & bVar18) * '\x02' |
                (*(byte *)(lVar21 + 0x7c) >> 6 & local_74 == 1) << 2,(undefined5)local_268);
  uVar4 = (ushort)local_246;
  local_246._2_2_ = (ushort)((uint)local_246 >> 0x10);
  local_246._0_2_ =
       uVar4 & 0xfa18 | (ushort)local_b4 & 7 | (ushort)((*(uint *)(lVar21 + 0x7c) & 0x20) << 5) |
       (ushort)((*(uint *)(lVar21 + 0x60) & 3) << 5) | (ushort)((*(uint *)(lVar21 + 0x7c) & 1) << 7)
       | (ushort)((*(uint *)(lVar21 + 0x7c) & 2) << 7);
  local_258 = *(undefined8 *)(lVar21 + 100);
  local_250 = *(undefined8 *)(lVar21 + 0x6c);
  local_1a0 = (float *)0x0;
  local_1a8 = (IOAccelShared2 *)0x0;
  local_1b0 = 0;
  uVar15 = IGVector<>::grow((IGVector<> *)&local_1b0,1);
  pIVar12 = local_b0;
  if ((char)uVar15 != '\0') {
    local_1b0 = 1;
  }
  local_2e8 = local_120;
  local_2b0 = CONCAT44(local_2b0._4_4_,local_84);
  local_2e0._0_5_ = CONCAT14((undefined1)local_80,local_84);
  local_2e0 = CONCAT26((undefined2)local_70,(undefined6)local_2e0);
  if (uVar6 < 2) {
    fVar28 = (float)local_168._0_4_ + (float)local_c4;
    fVar29 = (float)local_e8._0_4_ + (float)local_7c;
    fVar35 = (float)local_f8._0_4_ + (float)local_7c;
    fVar32 = (float)local_158._0_4_ + (float)local_c4;
  }
  else {
    local_2e8 = local_120 + local_84 * local_7c;
    fVar28 = (float)local_168._0_4_;
    fVar29 = (float)local_e8._0_4_;
    fVar35 = (float)local_f8._0_4_;
    fVar32 = (float)local_158._0_4_;
  }
  if (fVar28 <= fVar32) {
    *local_1a0 = fVar28;
    fVar28 = fVar32 - fVar28;
  }
  else {
    *local_1a0 = fVar32;
    fVar28 = fVar28 - fVar32;
  }
  local_1a0[2] = fVar28;
  fVar28 = fVar35;
  if (fVar29 <= fVar35) {
    fVar28 = fVar29;
  }
  auVar38._4_4_ = local_e8._4_4_ & local_f8._4_4_;
  auVar38._0_4_ = (uint)(fVar29 - fVar35) & -(uint)(fVar35 < fVar29);
  auVar38._8_4_ = local_e8._8_4_ & local_f8._8_4_;
  auVar38._12_4_ = uStack_dc & local_f8._12_4_;
  auVar38 = ZEXT416(~-(uint)(fVar35 < fVar29) & (uint)(fVar35 - fVar29)) | auVar38;
  local_1a0[1] = fVar28;
  local_1a0[3] = auVar38._0_4_;
  local_2a0 = local_128;
  local_268 = CONCAT44(local_268._4_4_,local_90);
  local_298._0_5_ = CONCAT14((undefined1)local_8c,local_90);
  local_298 = CONCAT26((undefined2)local_78,(undefined6)local_298);
  if (local_32 < 2) {
    auVar36._4_12_ = local_108._4_12_;
    auVar36._0_4_ = local_108._0_4_ + (float)local_88;
    auVar33._4_12_ = local_118._4_12_;
    auVar33._0_4_ = local_118._0_4_ + (float)local_88;
    fVar28 = (float)local_178._0_4_ + (float)local_cc;
    fVar29 = (float)local_188._0_4_ + (float)local_cc;
  }
  else {
    local_2a0 = local_128 + local_90 * local_88;
    auVar33 = local_118;
    auVar36 = local_108;
    fVar28 = (float)local_178._0_4_;
    fVar29 = (float)local_188._0_4_;
  }
  fVar35 = fVar29;
  if (fVar28 <= fVar29) {
    fVar35 = fVar28;
  }
  auVar37._4_4_ = local_178._4_4_ & local_188._4_4_;
  auVar37._0_4_ = (uint)(fVar28 - fVar29) & -(uint)(fVar29 < fVar28);
  auVar37._8_4_ = local_178._8_4_ & local_188._8_4_;
  auVar37._12_4_ = local_178._12_4_ & local_188._12_4_;
  auVar37 = ZEXT416(~-(uint)(fVar29 < fVar28) & (uint)(fVar29 - fVar28)) | auVar37;
  local_1a0[4] = fVar35;
  local_1a0[6] = auVar37._0_4_;
  fVar35 = auVar36._0_4_;
  fVar29 = auVar33._0_4_;
  uVar23 = auVar33._4_4_;
  uVar26 = auVar33._8_4_;
  uVar27 = auVar33._12_4_;
  if (fVar35 <= fVar29) {
    auVar33._4_12_ = auVar33._4_12_;
    auVar33._0_4_ = fVar35;
  }
  auVar34._4_4_ = auVar36._4_4_ & uVar23;
  auVar34._0_4_ = (uint)(fVar35 - fVar29) & -(uint)(fVar29 < fVar35);
  auVar34._8_4_ = auVar36._8_4_ & uVar26;
  auVar34._12_4_ = auVar36._12_4_ & uVar27;
  auVar34 = ZEXT416(~-(uint)(fVar29 < fVar35) & (uint)(fVar29 - fVar35)) | auVar34;
  local_1a0[5] = auVar33._0_4_;
  local_1a0[7] = auVar34._0_4_;
  local_248 = (undefined1)local_74;
  if ((*(byte *)(lVar21 + 0x7c) & 0x10) != 0) {
    local_246._0_2_ = (ushort)local_246 | 0x218;
    local_1f0 = *(undefined8 *)(this_00 + 0x1340);
    local_1e8 = *(undefined8 *)(this_00 + 0x1348);
  }
  local_246 = CONCAT22((byte)(bVar25 << 6) | local_246._2_2_ |
                       (ushort)((*(uint *)(lVar21 + 0x7c) & 4) << 3),(ushort)local_246);
  pIVar3 = *(IntelAccelerator **)(this_00 + 0x5a8);
  uVar23 = local_178._4_4_;
  pIVar16 = (IGAccelTask *)(**(code **)(*(long *)this_00 + 0x968))(this_00);
  IntelAccelerator::submitBlit
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),extraout_XMM1_Qa,auVar33._0_8_,
             auVar34._0_8_,auVar36._0_8_,auVar37._0_8_,CONCAT44(uVar23,fVar28),auVar38._0_8_,pIVar3,
             (long *)&local_2e8,&local_1b0,pIVar16,0,(char *)puVar24);
  if ((local_40 != (IOAccelShared2 *)0x0) && (*(long *)(this_00 + 0x630) == 0)) {
    IOAccelResource2::clientRelease(local_40);
  }
  if ((local_58 != (IOAccelShared2 *)0x0) && (*(long *)(this_00 + 0x630) == 0)) {
    IOAccelResource2::clientRelease(local_58);
  }
  if ((pIVar14 != (IOAccelShared2 *)0x0) && (*(long *)(this_00 + 0x630) == 0)) {
    IOAccelResource2::clientRelease(pIVar14);
  }
  if ((pIVar12 != (IOAccelShared2 *)0x0) && (*(long *)(this_00 + 0x630) == 0)) {
    IOAccelResource2::clientRelease(pIVar12);
  }
  (**(code **)(*(long *)this_00 + 0xa30))(this_00,local_50);
  iVar9 = *(int *)(*(long *)(this_00 + 0x12c0) + 0x20);
  if (((((local_58 != (IOAccelShared2 *)0x0) &&
        (pIVar17 = local_58, iVar9 == *(int *)(local_58 + 0x9c))) ||
       ((local_40 != (IOAccelShared2 *)0x0 &&
        (pIVar17 = local_40, iVar9 == *(int *)(local_40 + 0x9c))))) ||
      ((pIVar12 != (IOAccelShared2 *)0x0 && (pIVar17 = pIVar12, iVar9 == *(int *)(pIVar12 + 0x9c))))
      ) || ((pIVar14 != (IOAccelShared2 *)0x0 &&
            (pIVar17 = pIVar14, iVar9 == *(int *)(pIVar14 + 0x9c))))) {
    IVar8 = (IGAccelGLContext)
            (**(code **)(**(long **)(*(long *)(this_00 + 0x5a8) + 0x380) + 0x1c8))
                      (*(long **)(*(long *)(this_00 + 0x5a8) + 0x380),
                       (ulong)(byte)pIVar17[0x15] * 0x40 + *(long *)(pIVar17 + 0x38),
                       this_00 + 0x12f8);
    this_00[0x1338] = IVar8;
  }
  if (local_1a0 != (float *)0x0) {
    lVar21 = (long)local_1a8 << 5;
    if (lVar21 < 0) {
      lVar21 = -0x8000000000000000;
    }
    if ((ulong)local_1a8 >> 0x3b != 0) {
      lVar21 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_1a0,lVar21);
  }
LAB_0005c622:
  if (local_200 != 0) {
    lVar21 = local_208 * 8;
    if (lVar21 < 0) {
      lVar21 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_208) {
      lVar21 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_200,lVar21);
  }
  if (local_218 != 0) {
    lVar21 = local_220 * 8;
    if (lVar21 < 0) {
      lVar21 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_220) {
      lVar21 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_218,lVar21);
  }
  return;
}



// IGAccelGLContext::process_token_AsyncReadDrawBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_AsyncReadDrawBuffer
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  IOAccelShared2 IVar1;
  uint uVar2;
  IntelAccelerator *pIVar3;
  long *plVar4;
  IGAccelResource *this_00;
  char cVar5;
  undefined1 uVar6;
  ushort uVar7;
  int iVar8;
  undefined8 uVar9;
  ulong uVar10;
  IOAccelShared2 *pIVar11;
  long lVar12;
  IGAccelTask *pIVar13;
  IOAccelShared2 *pIVar14;
  long lVar15;
  uint uVar16;
  uint *puVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar18;
  undefined4 uVar19;
  float fVar20;
  undefined4 uVar21;
  float fVar22;
  undefined4 uVar23;
  IOAccelShared2 *local_1f0;
  IOAccelShared2 *local_1e8;
  undefined8 local_1e0;
  undefined8 local_1d8;
  IGAccelResource *local_1d0;
  IOAccelShared2 *local_1c8;
  undefined8 local_1c0;
  undefined8 local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  IGAccelResource *local_188;
  long local_180;
  uint5 local_178;
  undefined3 uStack_173;
  undefined2 uStack_172;
  undefined8 local_170;
  undefined8 local_168;
  undefined8 local_160;
  undefined8 local_158;
  undefined8 local_150;
  undefined8 local_148;
  IOAccelShared2 *local_140;
  undefined8 local_138;
  undefined8 local_130;
  IGAccelResource local_128;
  uint local_126;
  undefined4 local_120;
  undefined8 local_118;
  undefined1 local_110;
  undefined8 local_108;
  ulong local_100;
  long local_f8;
  undefined8 local_f0;
  ulong local_e8;
  long local_e0;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  ulong local_90;
  ulong local_88;
  float *local_80;
  uint local_78 [5];
  uint local_64;
  uint local_60;
  uint local_5c;
  IOAccelShared2 *local_58;
  uint local_50;
  uint local_4c;
  IOAccelShared2 *local_48;
  IOAccelShared2 *local_40;
  uint local_34;
  
  uVar23 = (undefined4)((ulong)param_4 >> 0x20);
  uVar21 = (undefined4)((ulong)param_3 >> 0x20);
  uVar19 = (undefined4)((ulong)param_2 >> 0x20);
  lVar15 = *(long *)(param_10 + 0x18);
  uVar16 = (uint)this;
  if (*(ulong *)((long)this + 0x628) < lVar15 + 0x44U) {
    IOAccelContext2::setContextError(uVar16);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_10 + 0x3c) == '\0') {
    local_1c8 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar15 + 0x24));
    if (cVar5 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_1c8);
    return;
  }
  if ((*(int *)(lVar15 + 0xc) == 0) && (*(long *)((long)this + 0x5c0) == 0)) {
    return;
  }
  uVar2 = *(uint *)(lVar15 + 0x18);
  local_40 = (IOAccelShared2 *)0x0;
  cVar5 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar15 + 0x24));
  if (cVar5 == '\0') {
    IOAccelContext2::setContextError(uVar16);
    return;
  }
  puVar17 = (uint *)((long)&MACH_HEADER.magic + 1);
  cVar5 = (**(code **)(*(long *)this + 0xa40))
                    (this,param_10,local_40,1,*(undefined8 *)((long)this + 0x12c0),1,1);
  if (cVar5 == '\0') {
    if ((local_40 == (IOAccelShared2 *)0x0) || (((byte)local_40[0xe] & 0x10) != 0)) {
      IOAccelContext2::setContextError(uVar16);
    }
    else {
      *(undefined1 *)(param_10 + 0x3c) = 0;
      *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
    }
    streamErrorCleanup(this,param_10,local_40);
    return;
  }
  ___bzero(&local_1c8,0x138);
  IGVector<>::grow((IGVector<> *)&local_108,4);
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  IGVector<>::grow((IGVector<> *)&local_f0,4);
  local_80 = (float *)0x0;
  local_88 = 0;
  local_90 = 0;
  uVar9 = IGVector<>::grow((IGVector<> *)&local_90,1);
  if ((char)uVar9 != '\0') {
    local_90 = 1;
  }
  local_50 = 0;
  local_4c = 0;
  local_1c8 = (IOAccelShared2 *)0x0;
  local_1c0 = 0;
  local_1b8 = 0;
  local_1b0 = 0;
  local_1a8 = 0;
  local_1a0 = 0;
  local_198 = 0;
  local_188 = (IGAccelResource *)0x0;
  local_190 = 0x100000000;
  local_180 = 0;
  _local_178 = 0;
  local_170 = 0;
  local_168 = 0;
  local_160 = 0;
  local_158 = 0;
  local_150 = 0;
  local_140 = (IOAccelShared2 *)0x0;
  local_148 = 0x100000000;
  local_138 = 0;
  local_130 = 0;
  local_128 = (IGAccelResource)0x0;
  local_120 = 0;
  local_118 = 0;
  local_110 = 0;
  local_108 = 0;
  local_f0 = 0;
  local_c0 = 0;
  local_b8 = 0;
  local_b0 = 0;
  local_a8 = 0;
  local_a0 = 0;
  local_98 = 0;
  local_126 = 0;
  local_48 = (IOAccelShared2 *)0x0;
  if (*(uint *)(lVar15 + 0xc) == 0) {
    iVar8 = IOAccelSurface::convertGLIndexToBufferIndex
                      (*(undefined8 *)((long)this + 0x5c0),*(undefined4 *)(lVar15 + 8));
    local_1d0 = (IGAccelResource *)0x0;
    local_1d8 = 0;
    local_1e0 = 0;
    local_1e8 = (IOAccelShared2 *)0x0;
    local_1f0 = (IOAccelShared2 *)0x0;
    local_58 = (IOAccelShared2 *)CONCAT44(local_58._4_4_,iVar8);
    getSurfaceBufferInfo(&local_1f0,(long)this,iVar8);
    this_00 = local_1d0;
    if ((char)local_1f0 != '\0') {
      local_34 = uVar2;
      if (*(char *)(lVar15 + 0x40) != '\0') {
        local_34 = (uint)*(ushort *)(local_1d0 + 0xb2) - (uVar2 + *(int *)(lVar15 + 0x38));
        local_126 = local_126 | 0x400000;
      }
      AddSrcEvents((IGVector<> *)&local_108,(long)local_1d0);
      AddUpdateEvent((long)&local_108,local_1e0);
      uVar7 = getIntelSurfaceFormat
                        ((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)((long)this + 0x5c0)),
                         (uint)local_58);
      local_58 = (IOAccelShared2 *)CONCAT44(local_58._4_4_,(uint)uVar7);
      local_128 = this_00[0xd8];
      local_1c8 = local_1e8;
      lVar12 = *(long *)(this_00 + 0xb8);
      if (lVar12 == 0) {
        lVar12 = *(long *)(this_00 + 0xc0);
      }
      local_1c0 = CONCAT44(local_1c0._4_4_,(int)lVar12);
      lVar12 = IOAccelResource2::getStorageResource();
      local_1c0._0_5_ = CONCAT14(*(undefined1 *)(lVar12 + 0x194),(undefined4)local_1c0);
      local_1c0 = CONCAT26(uVar7,(undefined6)local_1c0);
      local_1b8 = CONCAT44(local_1b8._4_4_,0x23);
      local_188 = this_00;
      local_50 = (uint)*(ushort *)(this_00 + 0xb0);
      local_4c = (uint)*(ushort *)(this_00 + 0xb2);
      IGAccelResource::getBufferWidthHeight(this_00,&local_50,&local_4c,(uint)local_58);
      local_58 = (IOAccelShared2 *)0x0;
LAB_0005d793:
      (**(code **)(*(long *)this + 0xa38))(this,param_10);
      pIVar14 = local_40;
      local_1b8 = CONCAT44(local_50,(undefined4)local_1b8);
      local_1b0 = CONCAT44(local_1b0._4_4_,local_4c);
      local_170 = CONCAT44(*(undefined4 *)(lVar15 + 0x1c),(undefined4)local_170);
      local_168 = CONCAT44(local_168._4_4_,*(undefined4 *)(lVar15 + 0x20));
      AddDstResourceEvents((IGVector<> *)&local_108,(long)local_40);
      pIVar11 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
      if (pIVar11 != pIVar14) {
        AddDstResourceEvents((IGVector<> *)&local_108,(long)pIVar11);
      }
      pIVar14 = local_40;
      lVar12 = (**(code **)(**(long **)(local_40 + 0x40) + 0x130))();
      IVar1 = pIVar14[0x14];
      if (IVar1 == (IOAccelShared2)0x0) {
LAB_0005d828:
        uVar10 = *(ulong *)(pIVar14 + 0xf8);
      }
      else if (IVar1 == (IOAccelShared2)0x82) {
        uVar10 = (ulong)*(uint *)(pIVar14 + 0xfc);
      }
      else {
        if (IVar1 == (IOAccelShared2)0x80) goto LAB_0005d828;
        uVar10 = 0;
      }
      local_180 = (ulong)*(uint *)(lVar15 + 0x30) + uVar10 + lVar12;
      local_178 = (uint5)*(uint *)(lVar15 + 0x2c);
      _local_178 = CONCAT26(*(undefined2 *)(lVar15 + 0x28),_local_178);
      local_170 = CONCAT44(local_170._4_4_,5);
      local_140 = local_40;
      fVar18 = (float)local_34;
      fVar20 = (float)*(uint *)(lVar15 + 0x34);
      fVar22 = (float)*(uint *)(lVar15 + 0x38);
      *local_80 = (float)*(uint *)(lVar15 + 0x14);
      local_80[1] = fVar18;
      local_80[2] = fVar20;
      local_80[3] = fVar22;
      local_80[4] = 0.0;
      local_80[5] = 0.0;
      local_80[6] = fVar20;
      local_80[7] = fVar22;
      (**(code **)(*(long *)this + 0xa48))
                (this,param_10,local_40,*(undefined8 *)((long)this + 0x12c0));
      pIVar3 = *(IntelAccelerator **)((long)this + 0x5a8);
      pIVar13 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
      IntelAccelerator::submitBlit
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar19,fVar18),
                 CONCAT44(uVar21,fVar20),CONCAT44(uVar23,fVar22),param_5,param_6,param_7,param_8,
                 pIVar3,(long *)&local_1c8,&local_90,pIVar13,0,(char *)puVar17);
      if (*(long *)((long)this + 0x630) == 0) {
        IOAccelResource2::clientRelease(local_40);
      }
      if ((local_58 != (IOAccelShared2 *)0x0) && (*(long *)((long)this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_58);
      }
      (**(code **)(*(long *)this + 0xa30))(this,param_10);
      iVar8 = *(int *)(*(long *)((long)this + 0x12c0) + 0x20);
      if (((local_40 != (IOAccelShared2 *)0x0) &&
          (pIVar14 = local_40, iVar8 == *(int *)(local_40 + 0x9c))) ||
         ((local_48 != (IOAccelShared2 *)0x0 &&
          (pIVar14 = local_48, iVar8 == *(int *)(local_48 + 0x9c))))) {
        plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        uVar6 = (**(code **)(*plVar4 + 0x1c8))
                          (plVar4,(ulong)(byte)pIVar14[0x15] * 0x40 + *(long *)(pIVar14 + 0x38),
                           &DAT_000012f8 + (long)this);
        *(undefined1 *)((long)this + 0x1338) = uVar6;
      }
      goto LAB_0005d88b;
    }
LAB_0005d834:
    IOAccelContext2::setContextError(uVar16);
    pIVar14 = local_40;
  }
  else {
    cVar5 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar15 + 0xc));
    if (cVar5 == '\0') goto LAB_0005d834;
    local_34 = uVar2;
    cVar5 = (**(code **)(*(long *)this + 0xa40))
                      (this,param_10,local_48,1,*(undefined8 *)((long)this + 0x12c0),0,1);
    if (cVar5 == '\0') {
      if ((local_48 == (IOAccelShared2 *)0x0) || (((byte)local_48[0xe] & 0x10) != 0))
      goto LAB_0005d860;
      *(undefined1 *)(param_10 + 0x3c) = 0;
      *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
    }
    else {
      AddSrcEvents((IGVector<> *)&local_108,(long)local_48);
      local_78[0] = 1;
      local_78[1] = 1;
      local_1f0 = (IOAccelShared2 *)0x0;
      local_78[2] = 0;
      local_64 = 0;
      local_60 = 0;
      local_5c = 0;
      local_78[3] = 0;
      local_78[4] = 0;
      IGAccelResource::get_tex_data((IGAccelResource *)local_48,(long *)&local_1f0,local_78 + 2);
      if (local_1f0 != (IOAccelShared2 *)0x0) {
        puVar17 = local_78 + 1;
        uVar10 = IGAccelResource::get_tex_info
                           ((IGAccelResource *)local_48,0,0,0,local_78,puVar17,&local_64,&local_60,
                            &local_5c,local_78 + 3,local_78 + 4);
        if ((char)uVar10 != '\0') {
          local_58 = (IOAccelShared2 *)
                     addSrcMcsResourceData
                               (this,param_10,(long)&local_1c8,*(uint *)(lVar15 + 0x10),
                                *(int *)(lVar15 + 0x3c) != 0);
          local_128 = local_5c._0_1_;
          local_1c8 = local_1f0;
          local_1c0._0_5_ = CONCAT14((undefined1)local_64,local_78[2]);
          local_1c0 = CONCAT26((short)local_60,(undefined6)local_1c0);
          local_1b8 = CONCAT44(local_1b8._4_4_,0x23);
          local_188 = (IGAccelResource *)local_48;
          local_50 = (uint)*(ushort *)(local_48 + 0xb0);
          local_4c = (uint)*(ushort *)(local_48 + 0xb2);
          IGAccelResource::getBufferWidthHeight
                    ((IGAccelResource *)local_48,&local_50,&local_4c,local_60);
          (**(code **)(*(long *)this + 0xa48))
                    (this,param_10,local_48,*(undefined8 *)((long)this + 0x12c0));
          goto LAB_0005d793;
        }
      }
LAB_0005d860:
      IOAccelContext2::setContextError(uVar16);
    }
    streamErrorCleanup(this,param_10,local_40);
    pIVar14 = local_48;
  }
  streamErrorCleanup(this,param_10,pIVar14);
LAB_0005d88b:
  if (local_80 != (float *)0x0) {
    lVar15 = local_88 << 5;
    if (lVar15 < 0) {
      lVar15 = -0x8000000000000000;
    }
    if (local_88 >> 0x3b != 0) {
      lVar15 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_80,lVar15);
  }
  if (local_e0 != 0) {
    lVar15 = local_e8 * 8;
    if (lVar15 < 0) {
      lVar15 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_e8) {
      lVar15 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_e0,lVar15);
  }
  if (local_f8 != 0) {
    lVar15 = local_100 * 8;
    if (lVar15 < 0) {
      lVar15 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_100) {
      lVar15 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_f8,lVar15);
  }
  return;
}



// IGAccelGLContext::process_token_TexPBOUpload(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_TexPBOUpload
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  long lVar4;
  IntelAccelerator *pIVar5;
  long *plVar6;
  undefined4 *puVar7;
  char cVar8;
  undefined1 uVar9;
  ulong uVar10;
  undefined8 uVar11;
  long lVar12;
  IGAccelTask *pIVar13;
  IOAccelShared2 *pIVar14;
  IOAccelShared2 *pIVar15;
  uint uVar16;
  uint *puVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar18;
  undefined4 uVar19;
  float fVar20;
  undefined4 uVar21;
  undefined8 in_stack_fffffffffffffdf8;
  IOAccelShared2 *local_1f0;
  uint5 local_1e8;
  undefined3 uStack_1e3;
  undefined2 uStack_1e2;
  undefined8 local_1e0;
  undefined8 local_1d8;
  undefined8 local_1d0;
  undefined8 local_1c8;
  undefined8 local_1c0;
  undefined8 local_1b8;
  IOAccelResource2 *local_1b0;
  long local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  uint local_190 [10];
  IGAccelResource *local_168;
  undefined8 local_160;
  undefined8 local_158;
  undefined1 local_150;
  undefined4 local_14e;
  undefined4 local_148;
  undefined8 local_140;
  undefined1 local_138;
  undefined8 local_130 [3];
  undefined8 local_118 [6];
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  ulong local_b8 [2];
  undefined4 *local_a8;
  uint local_a0;
  uint local_9c;
  long local_98;
  ulong local_90;
  ulong local_88;
  undefined4 local_7c;
  uint local_78;
  int local_74;
  uint local_70;
  uint local_6c;
  int local_68;
  undefined4 local_64;
  IOAccelShared2 *local_60;
  ulong local_58;
  uint local_4c;
  uint local_48;
  float local_44;
  IOAccelShared2 *local_40;
  IOAccelShared2 *local_38;
  
  uVar19 = (undefined4)((ulong)in_stack_fffffffffffffdf8 >> 0x20);
  uVar21 = (undefined4)((ulong)param_3 >> 0x20);
  lVar4 = *(long *)(param_10 + 0x18);
  uVar16 = (uint)this;
  if (*(ulong *)((long)this + 0x628) < lVar4 + 0x54U) {
    IOAccelContext2::setContextError(uVar16);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  uVar1 = *(uint *)(lVar4 + 0x18);
  if (*(char *)(param_10 + 0x3c) == '\0') {
    local_1f0 = (IOAccelShared2 *)0x0;
    cVar8 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)uVar1);
    if (cVar8 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_1f0);
    return;
  }
  local_60 = (IOAccelShared2 *)(ulong)*(uint *)(lVar4 + 0x14);
  local_6c = *(uint *)(lVar4 + 0x1c);
  local_88 = (ulong)*(uint *)(lVar4 + 0x20);
  local_90 = (ulong)*(uint *)(lVar4 + 0x24);
  uVar2 = *(uint *)(lVar4 + 0x2c);
  local_64 = *(undefined4 *)(lVar4 + 0x30);
  local_44 = *(float *)(lVar4 + 0x4c);
  local_58 = (ulong)*(uint *)(lVar4 + 0x50);
  local_68 = *(int *)(lVar4 + 0x38);
  local_40 = (IOAccelShared2 *)0x0;
  cVar8 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)*(uint *)(lVar4 + 8));
  if (cVar8 == '\0') {
LAB_0005e09c:
    IOAccelContext2::setContextError(uVar16);
  }
  else {
    uVar11 = CONCAT44(uVar19,1);
    cVar8 = (**(code **)(*(long *)this + 0xa40))
                      (this,param_10,local_40,1,*(undefined8 *)((long)this + 0x12c0),0,uVar11);
    uVar19 = (undefined4)((ulong)uVar11 >> 0x20);
    if (cVar8 == '\0') {
      if ((local_40 == (IOAccelShared2 *)0x0) ||
         (pIVar15 = local_40, ((byte)local_40[0xe] & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar16);
        pIVar15 = local_40;
      }
      else {
LAB_0005e0f6:
        *(undefined1 *)(param_10 + 0x3c) = 0;
        *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
      }
    }
    else {
      local_38 = (IOAccelShared2 *)0x0;
      cVar8 = IOAccelContext2::lookupResource(uVar16,(void **)(ulong)uVar1);
      if ((cVar8 == '\0') || ((byte)local_38[0xac] <= uVar2)) goto LAB_0005e09c;
      cVar8 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_10,local_38,1,*(undefined8 *)((long)this + 0x12c0),1,
                         CONCAT44(uVar19,1));
      if (cVar8 == '\0') {
        if ((local_38 != (IOAccelShared2 *)0x0) &&
           (pIVar15 = local_38, ((byte)*(IGAccelResource *)(local_38 + 0xe) & 0x10) == 0))
        goto LAB_0005e0f6;
      }
      else {
        local_98 = 0;
        local_7c = 0;
        local_4c = 0;
        local_48 = 0;
        local_78 = 0;
        IGAccelResource::get_tex_data((IGAccelResource *)local_38,&local_98,&local_7c);
        if (local_98 != 0) {
          local_74 = *(int *)(lVar4 + 0x3c);
          local_70 = *(uint *)(lVar4 + 0x40);
          local_a0 = *(uint *)(lVar4 + 0x44);
          local_9c = *(uint *)(lVar4 + 0x48);
          puVar17 = &local_78;
          uVar10 = IGAccelResource::get_modtex_info
                             ((IGAccelResource *)local_38,&local_a0,&local_9c,&local_4c,&local_48,
                              puVar17,&local_74,&local_70);
          if ((char)uVar10 != '\0') {
            (**(code **)(*(long *)this + 0xa38))(this,param_10);
            (**(code **)(*(long *)local_38 + 0x168))(local_38,uVar2,local_64);
            ___bzero((blit3d_params_t *)&local_1f0,0x138);
            blit3d_params_t::blit3d_params_t((blit3d_params_t *)&local_1f0);
            local_1b0 = (IOAccelResource2 *)0x0;
            local_1c0 = 0;
            local_1c8 = 0;
            local_1d0 = 0;
            local_1d8 = 0;
            local_1e0 = 0;
            _local_1e8 = 0;
            local_1f0 = (IOAccelShared2 *)0x0;
            local_1b8 = 0x100000000;
            local_1a8 = 0;
            local_1a0 = 0;
            local_198 = 0;
            local_190[0] = 0;
            local_190[1] = 0;
            local_190[2] = 0;
            local_190[3] = 0;
            local_190[4] = 0;
            local_190[5] = 0;
            local_190[6] = 0;
            local_190[7] = 0;
            local_168 = (IGAccelResource *)0x0;
            local_190[8] = 0;
            local_190[9] = 1;
            local_160 = 0;
            local_158 = 0;
            local_14e = 0;
            local_150 = 0;
            local_148 = 0;
            local_140 = 0;
            local_138 = 0;
            local_130[0] = 0;
            local_118[0] = 0;
            local_e8 = 0;
            local_e0 = 0;
            local_d8 = 0;
            local_d0 = 0;
            local_c8 = 0;
            local_c0 = 0;
            AddSrcDstEvents((IGVector<> *)local_130,(long)local_40,(long)local_38);
            local_a8 = (undefined4 *)0x0;
            local_b8[1] = 0;
            local_b8[0] = 0;
            uVar11 = IGVector<>::grow((IGVector<> *)local_b8,1);
            if ((char)uVar11 != '\0') {
              local_b8[0] = 1;
            }
            local_1e0._4_4_ = (uint)local_44;
            local_1d8 = CONCAT44(local_1d8._4_4_,(int)local_58 + (int)local_60);
            local_198 = (ulong)CONCAT24(*(undefined2 *)(local_38 + 0xb0),(undefined4)local_198);
            local_190[0] = (uint)*(ushort *)(local_38 + 0xb2);
            IGAccelResource::getBufferWidthHeight
                      ((IGAccelResource *)local_38,(uint *)((long)&local_198 + 4),local_190,local_48
                      );
            lVar12 = IOAccelResource2::getGPUVirtualAddressForUserProcess
                               ((IOAccelResource2 *)local_40);
            puVar7 = local_a8;
            local_1f0 = (IOAccelShared2 *)((ulong)*(uint *)(lVar4 + 0xc) + lVar12);
            local_1e8 = (uint5)*(uint *)(lVar4 + 0x10);
            _local_1e8 = CONCAT26((undefined2)local_48,_local_1e8);
            local_1e0 = CONCAT44(local_1e0._4_4_,0x23);
            local_1b0 = (IOAccelResource2 *)local_40;
            local_44 = (float)(uint)local_44;
            fVar20 = (float)(local_58 & 0xffffffff);
            local_58 = CONCAT44(local_58._4_4_,fVar20);
            *local_a8 = 0;
            local_a8[1] = (float)((ulong)local_60 & 0xffffffff);
            local_a8[2] = local_44;
            local_a8[3] = fVar20;
            local_1a8 = local_98;
            local_1a0._0_5_ = CONCAT14((undefined1)local_4c,local_7c);
            local_1a0 = CONCAT26((undefined2)local_48,(undefined6)local_1a0);
            local_198 = CONCAT44(local_198._4_4_,5);
            local_168 = (IGAccelResource *)local_38;
            local_60 = (IOAccelShared2 *)
                       addDstMcsResourceData(this,param_10,(long)&local_1f0,local_6c,local_68 != 0);
            uVar19 = 0;
            fVar18 = (float)((int)local_90 + local_70);
            puVar7[4] = (float)(uint)((int)local_88 + local_74);
            puVar7[5] = fVar18;
            puVar7[6] = local_44;
            puVar7[7] = (undefined4)local_58;
            local_150 = *(undefined1 *)(lVar4 + 0x34);
            (**(code **)(*(long *)this + 0xa48))
                      (this,param_10,local_40,*(undefined8 *)((long)this + 0x12c0));
            (**(code **)(*(long *)this + 0xa48))
                      (this,param_10,local_38,*(undefined8 *)((long)this + 0x12c0));
            pIVar5 = *(IntelAccelerator **)((long)this + 0x5a8);
            pIVar13 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
            IntelAccelerator::submitBlit
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar19,fVar18),
                       CONCAT44(uVar21,fVar20),param_4,param_5,param_6,param_7,param_8,pIVar5,
                       (long *)&local_1f0,local_b8,pIVar13,0,(char *)puVar17);
            if ((*(long *)((long)this + 0x630) == 0) &&
               (IOAccelResource2::clientRelease(local_38), *(long *)((long)this + 0x630) == 0)) {
              IOAccelResource2::clientRelease(local_40);
            }
            pIVar15 = local_60;
            if ((local_60 != (IOAccelShared2 *)0x0) && (*(long *)((long)this + 0x630) == 0)) {
              IOAccelResource2::clientRelease(local_60);
            }
            (**(code **)(*(long *)this + 0xa30))(this,param_10);
            iVar3 = *(int *)(*(long *)((long)this + 0x12c0) + 0x20);
            pIVar14 = local_38;
            if (((iVar3 == *(int *)(local_38 + 0x9c)) ||
                ((local_40 != (IOAccelShared2 *)0x0 && (iVar3 == *(int *)(local_40 + 0x9c))))) ||
               ((pIVar15 != (IOAccelShared2 *)0x0 &&
                (pIVar14 = pIVar15, iVar3 == *(int *)(pIVar15 + 0x9c))))) {
              plVar6 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
              uVar9 = (**(code **)(*plVar6 + 0x1c8))
                                (plVar6,(ulong)(byte)pIVar14[0x15] * 0x40 +
                                        *(long *)(pIVar14 + 0x38),&DAT_000012f8 + (long)this);
              *(undefined1 *)((long)this + 0x1338) = uVar9;
            }
            IGVector<>::~IGVector((IGVector<> *)local_b8);
            IGVector<>::~IGVector((IGVector<> *)local_118);
            IGVector<>::~IGVector((IGVector<> *)local_130);
            return;
          }
        }
      }
      IOAccelContext2::setContextError(uVar16);
      pIVar15 = local_38;
    }
    streamErrorCleanup(this,param_10,pIVar15);
  }
  return;
}



// IGAccelGLContext::process_token_BlitLibSetup2D(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BlitLibSetup2D
          (undefined8 param_1,ulong param_2,ulong param_3,ulong param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,long param_10)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  IntelAccelerator *pIVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  IGAccelResource *pIVar8;
  char cVar9;
  byte bVar10;
  IGAccelGLContext IVar11;
  undefined2 uVar12;
  int iVar13;
  uint uVar14;
  IOAccelShared2 *pIVar15;
  long lVar16;
  IGAccelResource *pIVar17;
  undefined8 uVar18;
  IGAccelTask *pIVar19;
  ushort uVar20;
  undefined2 *puVar21;
  IOAccelShared2 *pIVar22;
  long lVar23;
  uint uVar24;
  IGAccelGLContext *this_00;
  float *pfVar25;
  char *in_R9;
  uint uVar26;
  ulong uVar27;
  undefined4 uVar28;
  ulong uVar29;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  float fVar30;
  float fVar31;
  float fVar32;
  IOAccelShared2 *local_218;
  undefined8 local_210;
  undefined8 local_208;
  uint local_200 [10];
  IOAccelShared2 *local_1d8;
  ulong local_1d0;
  undefined8 local_1c8;
  undefined8 local_1c0;
  uint local_1b8 [2];
  long local_1b0;
  undefined8 local_1a8;
  long local_1a0;
  ulong local_198;
  IOAccelShared2 *local_190;
  undefined8 local_188;
  undefined8 local_180;
  byte local_178;
  undefined4 local_176;
  undefined4 local_170;
  undefined8 local_168;
  undefined1 local_160;
  undefined8 local_158;
  ulong local_150;
  long local_148;
  ulong local_140;
  ulong local_138;
  long local_130;
  undefined8 local_110;
  undefined8 local_108;
  undefined8 local_100;
  undefined8 local_f8;
  undefined8 local_f0;
  undefined8 local_e8;
  ulong local_e0;
  ulong local_d8;
  undefined4 local_cc;
  undefined4 local_c8;
  uint local_c4;
  undefined4 local_c0;
  undefined4 local_bc;
  undefined4 local_b8;
  undefined4 local_b4;
  IGAccelGLContext *local_b0;
  ulong local_a8;
  ulong local_a0;
  long local_98;
  undefined8 local_90;
  IGAccelResource *local_88;
  undefined4 local_7c;
  undefined4 local_78;
  uint local_74;
  ulong local_70;
  undefined8 local_68;
  uint local_5c;
  IOAccelShared2 *local_58;
  long local_50;
  IOAccelShared2 *local_48;
  long local_40;
  undefined1 local_38;
  undefined1 local_37;
  undefined1 local_36;
  undefined1 local_35;
  uint local_34;
  
  lVar23 = *(long *)(param_10 + 0x18);
  uVar26 = (uint)this;
  if ((*(ulong *)((long)this + 0x628) < lVar23 + 100U) ||
     (*(ulong *)((long)this + 0x628) < lVar23 + 0x30U)) {
    IOAccelContext2::setContextError(uVar26);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  uVar14 = *(uint *)(lVar23 + 8);
  uVar1 = *(uint *)(lVar23 + 0xc);
  uVar20 = *(ushort *)(lVar23 + 0x2c);
  local_34 = (uint)uVar20;
  if (*(char *)(param_10 + 0x3c) == '\0') {
    if (((uVar14 != 0) && ((uVar20 & 0x20) == 0)) && ((uVar20 & 8) == 0)) {
      local_218 = (IOAccelShared2 *)0x0;
      cVar9 = IOAccelContext2::lookupResource(uVar26,(void **)(ulong)uVar14);
      if ((cVar9 != '\0') && (*(long *)((long)this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_218);
      }
    }
    if (uVar1 == 0) {
      return;
    }
    if ((uVar20 & 0x10) != 0) {
      return;
    }
    local_218 = (IOAccelShared2 *)0x0;
    cVar9 = IOAccelContext2::lookupResource(uVar26,(void **)(ulong)uVar1);
    if (cVar9 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_218);
    return;
  }
  local_68 = (ulong)*(uint *)(lVar23 + 0x30);
  local_70 = CONCAT44(local_70._4_4_,*(undefined4 *)(lVar23 + 0x40));
  local_40 = CONCAT44(local_40._4_4_,*(undefined4 *)(lVar23 + 0x34));
  local_78 = *(undefined4 *)(lVar23 + 0x38);
  local_7c = *(undefined4 *)(lVar23 + 0x3c);
  local_37 = *(undefined1 *)(lVar23 + 0x45);
  local_38 = *(undefined1 *)(lVar23 + 0x44);
  local_c8 = *(undefined4 *)(lVar23 + 0x20);
  local_d8 = (ulong)*(uint *)(lVar23 + 0x48);
  local_b8 = *(undefined4 *)(lVar23 + 0x4c);
  local_b4 = *(undefined4 *)(lVar23 + 0x50);
  local_bc = *(undefined4 *)(lVar23 + 0x54);
  local_35 = *(undefined1 *)(lVar23 + 0x5d);
  local_c0 = *(undefined4 *)(lVar23 + 0x58);
  local_36 = *(undefined1 *)(lVar23 + 0x5c);
  local_74 = (uint)*(byte *)(lVar23 + 0x28);
  local_c4 = (uint)*(byte *)(lVar23 + 0x29);
  local_cc = *(undefined4 *)(lVar23 + 0x24);
  bVar10 = *(byte *)(lVar23 + 0x60);
  local_e0 = (ulong)*(ushort *)(lVar23 + 0x62);
  local_b0 = this;
  local_5c = uVar1;
  local_50 = param_10;
  ___bzero(&local_218,0x138);
  IGVector<>::grow((IGVector<> *)&local_158,4);
  local_140 = 0;
  local_138 = 0;
  local_130 = 0;
  IGVector<>::grow((IGVector<> *)&local_140,4);
  lVar16 = local_40;
  this_00 = local_b0;
  local_218 = (IOAccelShared2 *)0x0;
  local_210 = 0;
  local_208 = 0;
  local_200[0] = 0;
  local_200[1] = 0;
  local_200[2] = 0;
  local_200[3] = 0;
  local_200[4] = 0;
  local_200[5] = 0;
  local_200[6] = 0;
  local_200[7] = 0;
  local_1d8 = (IOAccelShared2 *)0x0;
  local_200[8] = 0;
  local_200[9] = 1;
  local_1d0 = 0;
  local_1c8 = 0;
  local_1c0 = 0;
  local_1b8[0] = 0;
  local_1b8[1] = 0;
  local_1b0 = 0;
  local_1a8 = 0;
  local_1a0 = 0;
  local_190 = (IOAccelShared2 *)0x0;
  local_198 = 0x100000000;
  local_188 = 0;
  local_180 = 0;
  local_176 = 0;
  local_178 = 0;
  local_170 = 0;
  local_168 = 0;
  local_160 = 0;
  local_158 = 0;
  local_140 = 0;
  local_110 = 0;
  local_108 = 0;
  local_100 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_58 = (IOAccelShared2 *)0x0;
  uVar26 = (uint)local_b0;
  if ((local_34 & 0x20) == 0) {
    if (uVar14 == 0) {
      if (*(long *)(local_b0 + 0x5c0) == 0) goto LAB_0005ef2a;
      iVar13 = IOAccelSurface::convertGLIndexToBufferIndex(*(long *)(local_b0 + 0x5c0),local_c8);
      local_88 = (IGAccelResource *)0x0;
      local_90 = 0;
      local_98 = 0;
      local_a0 = 0;
      local_a8 = 0;
      getSurfaceBufferInfo(&local_a8,(long)this_00,iVar13);
      pIVar8 = local_88;
      if (local_a8._0_1_ != (IGVector<>)0x0) {
        local_70 = CONCAT44(local_70._4_4_,iVar13);
        local_40 = local_98;
        local_218 = (IOAccelShared2 *)(local_68 + local_a0);
        local_208 = (ulong)CONCAT24(*(undefined2 *)(local_88 + 0xb0),(undefined4)local_208);
        local_200[0] = (uint)*(ushort *)(local_88 + 0xb2);
        lVar16 = *(long *)(local_88 + 0xb8);
        if (lVar16 == 0) {
          lVar16 = *(long *)(local_88 + 0xc0);
        }
        local_210 = CONCAT44(local_210._4_4_,(int)lVar16);
        lVar16 = IOAccelResource2::getStorageResource();
        local_210._0_5_ = CONCAT14(*(undefined1 *)(lVar16 + 0x194),(undefined4)local_210);
        uVar12 = getIntelSurfaceFormat
                           ((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(this_00 + 0x5c0)),
                            (int)local_70);
        local_210._0_6_ = CONCAT15(1,(undefined5)local_210);
        local_210 = CONCAT26(uVar12,(undefined6)local_210);
        local_208 = CONCAT44(local_208._4_4_,0x23);
        local_1d8 = (IOAccelShared2 *)pIVar8;
        lVar16 = IOAccelResource2::getStorageResource();
        AddRenderCompression((long *)&local_218,lVar16 + 0x180);
        IGAccelResource::getBufferWidthHeight
                  (pIVar8,(uint *)((long)&local_208 + 4),local_200,(uint)local_210._6_2_);
        AddSrcEvents((IGVector<> *)&local_158,(long)pIVar8);
        AddUpdateEvent((long)&local_158,local_40);
        goto LAB_0005e5a8;
      }
LAB_0005e930:
      IOAccelContext2::setContextError(uVar26);
      pIVar22 = (IOAccelShared2 *)local_88;
      lVar16 = local_50;
    }
    else {
      cVar9 = IOAccelContext2::lookupResource(uVar26,(void **)(ulong)uVar14);
      if ((cVar9 == '\0') || (local_58 == (IOAccelShared2 *)0x0)) goto LAB_0005e6cc;
      in_R9 = (char *)0x0;
      cVar9 = (**(code **)(*(long *)this_00 + 0xa40))
                        (this_00,local_50,local_58,1,*(undefined8 *)(this_00 + 0x12c0),0,1);
      if (cVar9 != '\0') {
        local_a8 = local_a8 & 0xffffffff00000000;
        IGAccelResource::get_tex_data
                  ((IGAccelResource *)local_58,(long *)&local_218,(undefined4 *)&local_a8);
        local_218 = local_218 + local_68;
        local_200[0] = local_78;
        uVar28 = local_7c;
        if ((local_34 & 2) != 0) {
          uVar28 = (undefined4)local_a8;
        }
        local_210._0_5_ = CONCAT14(local_37,uVar28);
        local_210._0_6_ = CONCAT15(local_38,(undefined5)local_210);
        local_210 = CONCAT26((short)local_70,(undefined6)local_210);
        local_208 = CONCAT44((int)lVar16,0x23);
        local_1d8 = local_58;
        AddSrcEvents((IGVector<> *)&local_158,(long)local_58);
        goto LAB_0005e5a8;
      }
      if ((local_58 == (IOAccelShared2 *)0x0) ||
         (((byte)*(IGAccelResource *)(local_58 + 0xe) & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar26);
        pIVar22 = local_58;
        lVar16 = local_50;
      }
      else {
        *(undefined1 *)(local_50 + 0x3c) = 0;
        this_00[0x63b] = (IGAccelGLContext)((byte)this_00[0x63b] | 4);
        pIVar22 = local_58;
        lVar16 = local_50;
      }
    }
LAB_0005ea3d:
    streamErrorCleanup(this_00,lVar16,pIVar22);
    goto LAB_0005ef2a;
  }
  local_218 = (IOAccelShared2 *)get_databuffer_address(local_b0,local_68);
  local_200[0] = local_78;
  local_210._6_2_ = (ushort)local_70;
  local_210._0_6_ = CONCAT24(0x100,local_7c);
  local_208 = CONCAT44((int)local_40,0x23);
  pIVar22 = *(IOAccelShared2 **)(this_00 + 0xfe8);
  local_1d8 = pIVar22;
  AddSrcResourceEvents((IGVector<> *)&local_158,(long)pIVar22);
  pIVar15 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
  if (pIVar15 != pIVar22) {
    AddSrcResourceEvents((IGVector<> *)&local_158,(long)pIVar15);
  }
LAB_0005e5a8:
  local_48 = (IOAccelShared2 *)0x0;
  if (local_5c == 0) {
    if (*(long *)(this_00 + 0x5c0) == 0) goto LAB_0005ef2a;
    iVar13 = IOAccelSurface::convertGLIndexToBufferIndex(*(long *)(this_00 + 0x5c0),local_cc);
    local_88 = (IGAccelResource *)0x0;
    local_90 = 0;
    local_98 = 0;
    local_a0 = 0;
    local_a8 = 0;
    getSurfaceBufferInfo(&local_a8,(long)this_00,iVar13);
    pIVar8 = local_88;
    if (local_a8._0_1_ == (IGVector<>)0x0) goto LAB_0005e930;
    local_40 = local_98;
    local_1d0 = local_d8 + local_a0;
    local_1c0 = (ulong)CONCAT24(*(undefined2 *)(local_88 + 0xb0),(undefined4)local_1c0);
    local_1b8[0] = (uint)*(ushort *)(local_88 + 0xb2);
    lVar16 = *(long *)(local_88 + 0xb8);
    if (lVar16 == 0) {
      lVar16 = *(long *)(local_88 + 0xc0);
    }
    local_1c8 = CONCAT44(local_1c8._4_4_,(int)lVar16);
    lVar16 = IOAccelResource2::getStorageResource();
    local_1c8._0_5_ = CONCAT14(*(undefined1 *)(lVar16 + 0x194),(undefined4)local_1c8);
    if (iVar13 - 8U < 3) {
      uVar29 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(this_00 + 0x5c0)) &
                      0x17000000) - 0x1000000;
      uVar12 = 0xd9;
      if (uVar29 < 0x7000000) {
        puVar21 = (undefined2 *)(&DAT_001138e8 + (uVar29 >> 0x17));
LAB_0005e9ce:
        uVar12 = *puVar21;
      }
    }
    else {
      uVar29 = (ulong)((uint)*(undefined8 *)(&DAT_000011b0 + *(long *)(this_00 + 0x5c0)) & 0xf) - 3;
      uVar12 = 0xc0;
      if (uVar29 < 0xd) {
        puVar21 = (undefined2 *)(&DAT_001138f6 + uVar29 * 2);
        goto LAB_0005e9ce;
      }
    }
    local_1c8._0_6_ = CONCAT15(1,(undefined5)local_1c8);
    local_1c8 = CONCAT26(uVar12,(undefined6)local_1c8);
    local_1c0 = local_1c0 & 0xffffffff00000000;
    local_190 = (IOAccelShared2 *)pIVar8;
    lVar16 = IOAccelResource2::getStorageResource();
    if ((local_190 != (IOAccelShared2 *)0x0) && (1 < *(byte *)(lVar16 + 0x220))) {
      local_198 = local_198 | 0x10000000000;
      if ((*(byte *)(lVar16 + 0x221) & 4) == 0) {
        local_1a0 = 0;
      }
      else {
        local_1a0 = *(uint *)(lVar16 + 0x1d0) + local_1d0;
      }
      local_1b0 = local_1d0 + *(uint *)(lVar16 + 0x1c0);
      local_1a8 = CONCAT44(local_1a8._4_4_,*(undefined4 *)(lVar16 + 0x1c4));
    }
    IGAccelResource::getBufferWidthHeight
              (pIVar8,(uint *)((long)&local_1c0 + 4),local_1b8,(uint)local_1c8._6_2_);
    AddDstResourceEvents((IGVector<> *)&local_158,(long)pIVar8);
    pIVar17 = (IGAccelResource *)IOAccelResource2::getStorageResource();
    if (pIVar17 != pIVar8) {
      AddDstResourceEvents((IGVector<> *)&local_158,(long)pIVar17);
    }
    if ((local_140 != local_138) ||
       (uVar18 = IGVector<>::grow((IGVector<> *)&local_140,local_140 * 2), lVar16 = local_50,
       (char)uVar18 != '\0')) {
      *(long *)(local_130 + local_140 * 8) = local_40;
      lVar16 = local_50;
      local_140 = local_140 + 1;
    }
  }
  else {
    cVar9 = IOAccelContext2::lookupResource(uVar26,(void **)(ulong)local_5c);
    lVar16 = local_50;
    if (((cVar9 == '\0') || (local_48 == (IOAccelShared2 *)0x0)) ||
       ((byte)local_48[0xac] <= (byte)SUB41(local_74,0))) {
LAB_0005e6cc:
      IOAccelContext2::setContextError(uVar26);
      goto LAB_0005ef2a;
    }
    in_R9 = (char *)((long)&MACH_HEADER.magic + 1);
    cVar9 = (**(code **)(*(long *)this_00 + 0xa40))
                      (this_00,local_50,local_48,1,*(undefined8 *)(this_00 + 0x12c0),1,1);
    if (cVar9 == '\0') {
      if ((local_48 == (IOAccelShared2 *)0x0) ||
         (((byte)*(IGAccelResource *)(local_48 + 0xe) & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar26);
        pIVar22 = local_48;
      }
      else {
        *(undefined1 *)(lVar16 + 0x3c) = 0;
        this_00[0x63b] = (IGAccelGLContext)((byte)this_00[0x63b] | 4);
        pIVar22 = local_48;
      }
      goto LAB_0005ea3d;
    }
    local_a8 = local_a8 & 0xffffffff00000000;
    IGAccelResource::get_tex_data
              ((IGAccelResource *)local_48,(long *)&local_1d0,(undefined4 *)&local_a8);
    local_1d0 = local_1d0 + local_d8;
    local_1b8[0] = local_b4;
    uVar28 = local_bc;
    if ((local_34 & 4) != 0) {
      uVar28 = (undefined4)local_a8;
    }
    local_1c8._0_5_ = CONCAT14(local_35,uVar28);
    local_1c8._0_6_ = CONCAT15(local_36,(undefined5)local_1c8);
    local_1c8 = CONCAT26((short)local_c0,(undefined6)local_1c8);
    local_1c0 = CONCAT44(local_b8,5);
    local_190 = local_48;
    AddDstEvents((IGVector<> *)&local_158,(long)local_48);
    (**(code **)(*(long *)local_48 + 0x168))(local_48,local_74,local_c4);
  }
  uVar29 = local_e0;
  (**(code **)(*(long *)this_00 + 0xa38))(this_00,lVar16);
  uVar20 = (ushort)local_176 | 0x18;
  if (local_200[4] == 0 && (int)local_1a8 == 0) {
    uVar20 = (ushort)local_176 & 0xffe7 | 8;
  }
  local_176 = CONCAT22(local_176._2_2_,uVar20);
  uVar26 = 1;
  local_5c = 0;
  local_178 = bVar10;
  if ((local_210._4_1_ == '\0') && (((ulong)local_218 & 0x3f) != 0)) {
    uVar14 = (uint)local_218 & 0x3f;
    if ((uVar14 & bVar10 + 0x3f) == 0) {
      uVar26 = 1;
    }
    else {
      iVar13 = 0;
      if (((ulong)local_218 & 0x3f) != 0) {
        for (; (uVar14 >> iVar13 & 1) == 0; iVar13 = iVar13 + 1) {
        }
      }
      uVar26 = (uint)(bVar10 >> ((byte)iVar13 & 0x1f));
      local_208 = CONCAT44(local_208._4_4_ * uVar26,(undefined4)local_208);
      local_1c0 = CONCAT44(local_1c0._4_4_ * uVar26,(undefined4)local_1c0);
      local_178 = (byte)(1 << ((byte)iVar13 & 0x1f));
    }
    local_68 = CONCAT44(local_68._4_4_,(uint)(byte)((ushort)uVar14 / (ushort)local_178));
    local_218 = (IOAccelShared2 *)((ulong)local_218 & 0xffffffffffffffc0);
  }
  else {
    local_68 = (ulong)local_68._4_4_ << 0x20;
  }
  if ((local_1c8._4_1_ == '\0') && (bVar10 = (byte)local_1d0, (local_1d0 & 0x3f) != 0)) {
    local_1d0 = local_1d0 & 0xffffffffffffffc0;
    local_5c = (uint)((bVar10 & 0x3f) / local_178);
  }
  local_98 = 0;
  local_a0 = 0;
  local_a8 = 0;
  if (uVar29 != 0) {
    uVar18 = IGVector<>::grow((IGVector<> *)&local_a8,uVar29);
    if ((char)uVar18 != '\0') {
      local_a8 = uVar29;
    }
    local_70 = *(ulong *)(this_00 + 0x628);
    local_40 = CONCAT44(local_40._4_4_,local_1c0._4_4_);
    pfVar25 = (float *)(local_98 + 0x1c);
    uVar27 = lVar23 + 0x7c;
    uVar5 = param_2;
    uVar6 = param_3;
    uVar7 = param_4;
    do {
      if (local_70 < uVar27) {
        param_2 = uVar5;
        param_3 = uVar6;
        param_4 = uVar7;
        IOAccelContext2::setContextError((uint)this_00);
        *(undefined1 *)(lVar16 + 0x3c) = 0;
        break;
      }
      iVar13 = *(int *)(uVar27 - 0x18);
      iVar2 = *(int *)(uVar27 - 0x10);
      uVar14 = *(uint *)(uVar27 - 8);
      if ((local_208._4_4_ < uVar14 + iVar13) || (local_1c0._4_4_ < uVar14 + iVar2)) {
        uVar14 = local_1c0._4_4_ - iVar2;
        if (local_208._4_4_ - iVar13 < local_1c0._4_4_ - iVar2) {
          uVar14 = local_208._4_4_ - iVar13;
        }
      }
      uVar1 = *(uint *)(uVar27 - 0x14);
      uVar3 = *(uint *)(uVar27 - 0xc);
      uVar24 = *(uint *)(uVar27 - 4);
      if ((local_200[0] < uVar24 + uVar1) || (local_1b8[0] < uVar24 + uVar3)) {
        uVar24 = local_1b8[0] - uVar3;
        if (local_200[0] - uVar1 < local_1b8[0] - uVar3) {
          uVar24 = local_200[0] - uVar1;
        }
      }
      fVar31 = (float)(uVar14 * uVar26);
      uVar6 = (ulong)(uint)fVar31;
      param_3 = (ulong)(uint)fVar31;
      fVar32 = (float)uVar24;
      uVar7 = (ulong)(uint)fVar32;
      param_4 = (ulong)(uint)fVar32;
      pfVar25[-7] = (float)(iVar13 * uVar26 + (int)local_68);
      pfVar25[-6] = (float)uVar1;
      pfVar25[-5] = fVar31;
      in_R9 = (char *)(ulong)(iVar2 * uVar26 + local_5c);
      fVar30 = (float)uVar3;
      uVar5 = (ulong)(uint)fVar30;
      param_2 = (ulong)(uint)fVar30;
      pfVar25[-4] = fVar32;
      pfVar25[-3] = (float)(long)in_R9;
      pfVar25[-2] = fVar30;
      pfVar25[-1] = fVar31;
      *pfVar25 = fVar32;
      pfVar25 = pfVar25 + 8;
      uVar27 = uVar27 + 0x18;
      uVar29 = uVar29 - 1;
      this_00 = local_b0;
      lVar16 = local_50;
    } while (uVar29 != 0);
  }
  if (local_58 != (IOAccelShared2 *)0x0) {
    (**(code **)(*(long *)this_00 + 0xa48))(this_00,lVar16,local_58,*(long *)(this_00 + 0x12c0));
  }
  if (local_48 != (IOAccelShared2 *)0x0) {
    (**(code **)(*(long *)this_00 + 0xa48))(this_00,lVar16,local_48,*(long *)(this_00 + 0x12c0));
  }
  pIVar4 = *(IntelAccelerator **)(this_00 + 0x5a8);
  pIVar19 = (IGAccelTask *)(**(code **)(*(long *)this_00 + 0x968))(this_00);
  IntelAccelerator::submitBlit
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,pIVar4,(long *)&local_218,&local_a8,pIVar19,0,in_R9);
  (**(code **)(*(long *)this_00 + 0xa30))(this_00,lVar16);
  iVar13 = *(int *)(*(long *)(this_00 + 0x12c0) + 0x20);
  if (local_58 != (IOAccelShared2 *)0x0) {
    if (iVar13 == *(int *)(local_58 + 0x9c)) {
      IVar11 = (IGAccelGLContext)
               (**(code **)(**(long **)(*(long *)(this_00 + 0x5a8) + 0x380) + 0x1c8))
                         (*(long **)(*(long *)(this_00 + 0x5a8) + 0x380),
                          (ulong)(byte)local_58[0x16] * 0x40 + *(long *)(local_58 + 0x38),
                          this_00 + 0x12f8,iVar13);
      this_00[0x1338] = IVar11;
    }
    if (((local_34 & 8) == 0) && (*(long *)(this_00 + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_58);
    }
  }
  if (local_48 != (IOAccelShared2 *)0x0) {
    if (iVar13 == *(int *)(local_48 + 0x9c)) {
      IVar11 = (IGAccelGLContext)
               (**(code **)(**(long **)(*(long *)(this_00 + 0x5a8) + 0x380) + 0x1c8))
                         (*(long **)(*(long *)(this_00 + 0x5a8) + 0x380),
                          (ulong)(byte)local_48[0x15] * 0x40 + *(long *)(local_48 + 0x38),
                          this_00 + 0x12f8,iVar13);
      this_00[0x1338] = IVar11;
    }
    if (((local_34 & 0x10) == 0) && (*(long *)(this_00 + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_48);
    }
  }
  if (local_98 != 0) {
    lVar23 = local_a0 << 5;
    if (lVar23 < 0) {
      lVar23 = -0x8000000000000000;
    }
    if (local_a0 >> 0x3b != 0) {
      lVar23 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_98,lVar23);
  }
LAB_0005ef2a:
  if (local_130 != 0) {
    lVar23 = local_138 * 8;
    if (lVar23 < 0) {
      lVar23 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_138) {
      lVar23 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_130,lVar23);
  }
  if (local_148 != 0) {
    lVar23 = local_150 * 8;
    if (lVar23 < 0) {
      lVar23 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_150) {
      lVar23 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_148,lVar23);
  }
  return;
}



// IGAccelGLContext::process_token_BlitLibSetup3D(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_BlitLibSetup3D(IGAccelGLContext *this,long param_1)

{
  undefined4 uVar1;
  long lVar2;
  IGAccelGLContext IVar3;
  char cVar4;
  long lVar5;
  ulong uVar6;
  ulong *puVar7;
  IGAccelResource *pIVar8;
  IGAccelResource *pIVar9;
  IGAccelResource *pIVar10;
  IGAccelResource *pIVar11;
  uint uVar12;
  ulong *puVar13;
  
  lVar2 = *(long *)(param_1 + 0x18);
  uVar12 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar2 + 0x30U) {
    IOAccelContext2::setContextError(uVar12);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else if (*(char *)(param_1 + 0x3c) == '\0') {
    if ((*(uint *)(lVar2 + 0xc) != 0) && ((*(byte *)(lVar2 + 0x2c) & 0x10) == 0)) {
      cVar4 = IOAccelContext2::lookupResource(uVar12,(void **)(ulong)*(uint *)(lVar2 + 0xc));
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
      }
    }
    if ((*(uint *)(lVar2 + 8) != 0) && ((*(byte *)(lVar2 + 0x2c) & 8) == 0)) {
      cVar4 = IOAccelContext2::lookupResource(uVar12,(void **)(ulong)*(uint *)(lVar2 + 8));
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
      }
    }
    if ((*(uint *)(lVar2 + 0x14) != 0) && ((*(byte *)(lVar2 + 0x2c) & 0x10) == 0)) {
      cVar4 = IOAccelContext2::lookupResource(uVar12,(void **)(ulong)*(uint *)(lVar2 + 0x14));
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
      }
    }
    if ((*(uint *)(lVar2 + 0x10) != 0) && ((*(byte *)(lVar2 + 0x2c) & 8) == 0)) {
      cVar4 = IOAccelContext2::lookupResource(uVar12,(void **)(ulong)*(uint *)(lVar2 + 0x10));
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
      }
    }
  }
  else {
    uVar12 = *(uint *)(lVar2 + 0x18);
    uVar6 = *(ulong *)(this + 0x12b0);
    if ((uVar6 < uVar12) || (*(long **)(this + 0x12a8) == (long *)0x0)) {
      puVar13 = (ulong *)0x0;
    }
    else {
      lVar5 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
      puVar13 = (ulong *)(lVar5 + (ulong)uVar12);
      uVar6 = *(ulong *)(this + 0x12b0);
    }
    uVar12 = *(uint *)(lVar2 + 0x1c);
    if ((uVar6 < uVar12) || (*(long **)(this + 0x12a8) == (long *)0x0)) {
      puVar7 = (ulong *)0x0;
    }
    else {
      lVar5 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
      puVar7 = (ulong *)(lVar5 + (ulong)uVar12);
    }
    pIVar8 = blitAddMcs(this,param_1,*(uint *)(lVar2 + 0x10),1,(long)puVar13);
    if (*(int *)(this + 0x644) == 0) {
      pIVar9 = blitAddResource(this,param_1,1,puVar13);
      if (*(int *)(this + 0x644) == 0) {
        pIVar10 = blitAddMcs(this,param_1,*(uint *)(lVar2 + 0x14),0,(long)puVar7);
        if (*(int *)(this + 0x644) == 0) {
          pIVar11 = blitAddResource(this,param_1,0,puVar7);
          if (*(int *)(this + 0x644) == 0) {
            uVar1 = *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20);
            if (pIVar9 != (IGAccelResource *)0x0) {
              lVar5 = IOAccelResource2::getStorageResource();
              IVar3 = (IGAccelGLContext)
                      (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                 (ulong)*(byte *)(lVar5 + 0x16) * 0x40 + *(long *)(lVar5 + 0x38),
                                 this + 0x12f8,uVar1);
              this[0x1338] = IVar3;
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,pIVar9,*(undefined8 *)(this + 0x12c0));
              if (((*(byte *)(lVar2 + 0x2c) & 8) == 0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease((IOAccelShared2 *)pIVar9);
              }
            }
            if (pIVar8 != (IGAccelResource *)0x0) {
              IVar3 = (IGAccelGLContext)
                      (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                 (ulong)(byte)pIVar8[0x16] * 0x40 + *(long *)(pIVar8 + 0x38),
                                 this + 0x12f8,uVar1);
              this[0x1338] = IVar3;
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,pIVar8,*(undefined8 *)(this + 0x12c0));
              if (((*(byte *)(lVar2 + 0x2c) & 8) == 0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease((IOAccelShared2 *)pIVar8);
              }
            }
            if (pIVar11 != (IGAccelResource *)0x0) {
              lVar5 = IOAccelResource2::getStorageResource();
              IVar3 = (IGAccelGLContext)
                      (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                 (ulong)*(byte *)(lVar5 + 0x15) * 0x40 + *(long *)(lVar5 + 0x38),
                                 this + 0x12f8,uVar1);
              this[0x1338] = IVar3;
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,pIVar11,*(undefined8 *)(this + 0x12c0));
              if (((*(byte *)(lVar2 + 0x2c) & 0x10) == 0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease((IOAccelShared2 *)pIVar11);
              }
            }
            if (pIVar10 != (IGAccelResource *)0x0) {
              IVar3 = (IGAccelGLContext)
                      (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                 (ulong)(byte)pIVar10[0x15] * 0x40 + *(long *)(pIVar10 + 0x38),
                                 this + 0x12f8,uVar1);
              this[0x1338] = IVar3;
              (**(code **)(*(long *)this + 0xa48))
                        (this,param_1,pIVar10,*(undefined8 *)(this + 0x12c0));
              if (((*(byte *)(lVar2 + 0x2c) & 0x10) == 0) && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease((IOAccelShared2 *)pIVar10);
                return;
              }
            }
          }
        }
      }
    }
  }
  return;
}



// IGAccelGLContext::process_token_SetFence(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_SetFence(IGAccelGLContext *this,undefined8 *param_1)

{
  int iVar1;
  int iVar2;
  undefined8 *puVar3;
  bool bVar4;
  uint uVar5;
  IGAccelTask *pIVar6;
  undefined4 extraout_var;
  ulong uVar7;
  ulong uVar8;
  
  if (param_1[3] + 0xc <= *(ulong *)(this + 0x628)) {
    uVar5 = 0x34;
    if ((*(uint *)(*(long *)(this + 0x5a8) + 0xf52) >> 0x15 & 1) == 0) {
      uVar5 = 0xc;
    }
    puVar3 = (undefined8 *)*param_1;
    if ((-4 < (long)puVar3 - param_1[1]) &&
       ((int)uVar5 <=
        (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar3 - param_1[1]) >> 2)))) {
      uVar7 = (ulong)*(uint *)(param_1[3] + 8);
      uVar8 = uVar7 * 0x10;
      if ((*(uint *)(this + 0x6c8) <= uVar8) ||
         (uVar7 = uVar7 * 0x40, *(uint *)(this + 0x6d8) <= uVar7)) {
        IOAccelContext2::setContextError((uint)this);
        return;
      }
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        (**(code **)(**(long **)(this + 0x12c0) + 0x150))(*(long **)(this + 0x12c0),0);
        (**(code **)(**(long **)(this + 0x12c0) + 0x148))();
        (**(code **)(**(long **)(this + 0x12c0) + 0x140))
                  (*(long **)(this + 0x12c0),uVar7 + *(long *)(this + 0x6a8));
        puVar3[1] = 0;
        puVar3[2] = 0;
        *puVar3 = 0x11050217a000004;
        *(undefined4 *)(puVar3 + 1) = 0;
        pIVar6 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        uVar5 = IGAccelTask::getScratchGPUVirtualAddress(pIVar6);
        *(uint *)(puVar3 + 1) = *(uint *)(puVar3 + 1) & 3 | uVar5 & 0xfffffffc;
        pIVar6 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        IGAccelTask::getScratchGPUVirtualAddress(pIVar6);
        *(undefined4 *)((long)puVar3 + 0xc) = extraout_var;
        *(byte *)((long)puVar3 + 7) = *(byte *)((long)puVar3 + 7) & 0xfe;
        puVar3[4] = 0;
        puVar3[5] = 0;
        puVar3[3] = 0x11044187a000004;
        *(undefined4 *)(puVar3 + 4) = 0;
        bVar4 = IGHardwareRingBuffer::getGTTWriteMode
                          (*(IGHardwareRingBuffer **)(*(long *)(this + 0x12c0) + 0x130));
        uVar7 = puVar3[3] & 0xfeffffffffffffff | (ulong)bVar4 << 0x38;
        puVar3[3] = uVar7;
        iVar1 = *(int *)(*(long *)(*(long *)(this + 0x12c0) + 0x130) + 0x38);
        iVar2 = *(int *)(*(long *)(*(long *)(this + 0x12c0) + 0x130) + 0x28);
        puVar3[3] = uVar7;
        *(uint *)(puVar3 + 4) = *(uint *)(puVar3 + 4) & 3 | iVar1 * 0x40 + iVar2 & 0xfffffffcU;
        *(int *)((long)puVar3 + 0x24) =
             (int)((ulong)((long)*(int *)(*(long *)(*(long *)(this + 0x12c0) + 0x130) + 0x38) * 0x40
                          + *(long *)(*(long *)(*(long *)(this + 0x12c0) + 0x130) + 0x28)) >> 0x20);
        puVar3[5] = 0;
        *(undefined4 *)(*(long *)(this + 0x6a0) + uVar8) = 0;
        *(int *)(param_1 + 7) = *(int *)(param_1 + 7) + 1;
        return;
      }
      if (puVar3 == (undefined8 *)0x0) {
        return;
      }
      uVar7 = 0;
      do {
        *(undefined4 *)((long)puVar3 + uVar7 * 4) = 0;
        uVar7 = uVar7 + 1;
      } while (uVar5 != uVar7);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_EndPipeControl(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_EndPipeControl(IGAccelGLContext *this,long param_1)

{
  long lVar1;
  task *ptVar2;
  long lVar3;
  long *plVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  ulong local_60;
  ulong *local_58;
  undefined4 local_50;
  IGHashTable<> *local_48;
  undefined1 local_40;
  long local_38;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(ulong *)(this + 0x628) < lVar1 + 0x18U) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else if (*(char *)(param_1 + 0x3c) == '\0') {
    local_50 = 0;
    local_38 = 0;
    local_40 = 1;
    local_48 = (IGHashTable<> *)(this + 0x1270);
    IGHashTable<>::Iterator::next((Iterator *)&local_60);
    local_60 = *local_58;
    if (local_38 != 0) {
      IGHashTable<>::shrinkIfNeeded(local_48);
    }
    plVar4 = (long *)IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x1270),&local_60);
    plVar4 = (long *)*plVar4;
    ptVar2 = (task *)plVar4[3];
    lVar5 = IOAccelSysMemory::lockForCPUAccess(ptVar2,(uint)*(undefined8 *)__got::_kernel_task);
    if (lVar5 == 0) {
      IOAccelContext2::setContextError((uint)this);
    }
    else {
      lVar3 = *(long *)(lVar1 + 8);
      lVar6 = (**(code **)(*plVar4 + 0x128))(plVar4);
      if (((*(byte *)(plVar4 + 2) & 4) != 0) &&
         (uVar7 = lVar3 - lVar6, uVar7 < *(ulong *)__got::_page_size)) {
        *(undefined8 *)(lVar5 + uVar7) = *(undefined8 *)(lVar1 + 0x10);
      }
      IOAccelSysMemory::unlockForCPUAccess(ptVar2);
    }
  }
  else {
    *(undefined8 *)(this + 0x1258) = *(undefined8 *)(lVar1 + 8);
    *(undefined8 *)(this + 0x1260) = *(undefined8 *)(lVar1 + 0x10);
    *(undefined4 *)(this + 0x1250) = 1;
  }
  return;
}



// IGAccelGLContext::process_token_DrawingRectangle(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_DrawingRectangle(IGAccelGLContext *this,long *param_1)

{
  byte bVar1;
  short sVar2;
  ulong *puVar3;
  ulong uVar4;
  long lVar5;
  uint uVar6;
  ulong uVar7;
  uint uVar8;
  
  lVar5 = param_1[3];
  if (*(ulong *)(this + 0x628) < lVar5 + 0xcU) {
LAB_0005f86e:
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar3 = (ulong *)*param_1;
  if (((long)puVar3 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar3 - param_1[1]) >> 2)) < 4))
  goto LAB_0005f86e;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if (puVar3 == (ulong *)0x0) {
      return;
    }
    lVar5 = 0;
    do {
      *(undefined4 *)((long)puVar3 + lVar5 * 4) = 0;
      lVar5 = lVar5 + 1;
    } while (lVar5 != 4);
    return;
  }
  uVar4 = *puVar3;
  *puVar3 = uVar4 & 0xffffffff;
  puVar3[1] = puVar3[1] & 0xffffffff;
  uVar6 = *(uint *)(this + 0x1268);
  if ((uVar6 == 0) || (uVar8 = *(uint *)(this + 0x126c), uVar8 == 0)) {
    uVar4 = uVar4 & 0xffffffff | 0x1000100000000;
    uVar7 = 0;
    goto LAB_0005f8ce;
  }
  bVar1 = *(byte *)(lVar5 + 10);
  if ((bVar1 & 1) == 0) {
    if ((bVar1 & 2) == 0) {
      if ((bVar1 & 4) != 0) {
        sVar2 = *(short *)(lVar5 + 8);
        if (sVar2 != 0x10) {
          if (sVar2 == 8) {
            uVar6 = uVar6 + 1 >> 1;
          }
          else {
            if (sVar2 != 4) goto LAB_0005f8bb;
            uVar6 = uVar6 + 7 >> 3;
          }
        }
        uVar8 = uVar8 + 1 >> 1;
      }
    }
    else {
      uVar6 = uVar6 >> 2;
    }
  }
  else {
    uVar6 = uVar6 >> 1;
  }
LAB_0005f8bb:
  uVar4 = uVar4 & 0xffffffff;
  uVar7 = (ulong)(uVar6 - 1 & 0xffff) | (ulong)(uVar8 - 1 & 0xffff) << 0x10;
LAB_0005f8ce:
  *puVar3 = uVar4;
  puVar3[1] = uVar7;
  return;
}



// IGAccelGLContext::process_token_ScissorRectangleForFastDepthClear(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_ScissorRectangleForFastDepthClear
          (IGAccelGLContext *this,undefined8 *param_1)

{
  long lVar1;
  undefined8 *puVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  
  lVar1 = param_1[3];
  if (lVar1 + 0xcU <= *(ulong *)(this + 0x628)) {
    puVar2 = (undefined8 *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (1 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2))))
    {
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        if (puVar2 == (undefined8 *)0x0) {
          return;
        }
        *puVar2 = 0;
        return;
      }
      lVar3 = (**(code **)(**(long **)(this + 0x12a0) + 0x118))();
      uVar4 = (ulong)*(uint *)(lVar1 + 8);
      if (uVar4 + 8 <= *(ulong *)(this + 0x12b8)) {
        uVar5 = 0x10001;
        if ((7 < *(uint *)(this + 0x1268)) && (3 < *(uint *)(this + 0x126c))) {
          uVar6 = (ulong)((*(uint *)(this + 0x1268) | 7) + 0xfff8 & 0xffff) << 0x20;
          uVar5 = *(ulong *)(uVar4 + lVar3);
          *(ulong *)(uVar4 + lVar3) = uVar5 & 0xffff0000ffffffff | uVar6;
          uVar5 = uVar5 & 0xffffffff | uVar6 |
                  (ulong)((*(uint *)(this + 0x126c) | 3) + 0xfffc) << 0x30;
        }
        *(ulong *)(uVar4 + lVar3) = uVar5;
        return;
      }
      IOAccelContext2::setContextError((uint)this);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_ConstantBufferAddress(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_ConstantBufferAddress(IGAccelGLContext *this,long *param_1)

{
  long lVar1;
  long lVar2;
  IOAccelShared2 *this_00;
  char cVar3;
  uint uVar4;
  undefined4 local_34;
  IOAccelShared2 *local_30;
  
  lVar1 = param_1[3];
  uVar4 = (uint)this;
  if (lVar1 + 0x10U <= *(ulong *)(this + 0x628)) {
    lVar2 = *param_1;
    if ((-4 < lVar2 - param_1[1]) &&
       (10 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar2 - param_1[1]) >> 2)))) {
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        local_30 = (IOAccelShared2 *)0x0;
        local_34 = 0;
        this_00 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x5a0);
        if (((this_00 != (IOAccelShared2 *)0x0) &&
            (*(int *)(*(long *)(this_00 + 0x38) + 0x100) == *(int *)(lVar1 + 8))) &&
           (*(uint *)(lVar1 + 0xc) < 4)) {
          if (*(long *)(this + 0x630) == 0) {
            IOAccelResource2::clientRelease(this_00);
          }
          IGAccelResource::get_tex_data((IGAccelResource *)this_00,(long *)&local_30,&local_34);
          switch(*(undefined4 *)(lVar1 + 0xc)) {
          case 0:
            *(long *)(lVar2 + 0xc) = (long)(local_30 + *(long *)(lVar2 + 0xc));
            return;
          case 1:
            *(long *)(lVar2 + 0x14) = (long)(local_30 + *(long *)(lVar2 + 0x14));
            return;
          case 2:
            *(long *)(lVar2 + 0x1c) = (long)(local_30 + *(long *)(lVar2 + 0x1c));
            return;
          case 3:
            *(long *)(lVar2 + 0x24) = (long)(local_30 + *(long *)(lVar2 + 0x24));
            return;
          default:
            return;
          }
        }
        IOAccelContext2::setContextError(uVar4);
        return;
      }
      local_30 = (IOAccelShared2 *)0x0;
      cVar3 = IOAccelContext2::lookupResource(uVar4,(void **)(ulong)*(uint *)(lVar1 + 8));
      if (cVar3 == '\0') {
        return;
      }
      if (*(long *)(this + 0x630) != 0) {
        return;
      }
      IOAccelResource2::clientRelease(local_30);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar4);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_IndirectStateBaseAddress(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_IndirectStateBaseAddress(IGAccelGLContext *this,long *param_1)

{
  IGAccelGLContext *pIVar1;
  ulong *puVar2;
  ulong uVar3;
  ulong uVar4;
  char cVar5;
  bool bVar6;
  uint uVar7;
  uint uVar8;
  OSMetaClassBase *pOVar9;
  long lVar10;
  undefined8 uVar11;
  OSMetaClassBase *pOVar12;
  long lVar13;
  ulong uVar14;
  long *plVar15;
  ulong uVar16;
  IOAccelShared2 *pIVar17;
  undefined4 local_44;
  IOAccelShared2 *local_40;
  IOAccelShared2 *local_38;
  
  lVar13 = param_1[3];
  uVar8 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar13 + 0x14U) {
LAB_0005fc4e:
    IOAccelContext2::setContextError(uVar8);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar2 = (ulong *)*param_1;
  if (((long)puVar2 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2)) < 0x16))
  goto LAB_0005fc4e;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    local_40 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar8,(void **)(ulong)*(uint *)(lVar13 + 8));
    if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_40);
    }
    local_40 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar8,(void **)(ulong)*(uint *)(lVar13 + 0x10));
    if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_40);
    }
    local_40 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar8,(void **)(ulong)*(uint *)(lVar13 + 0xc));
    if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_40);
    }
    lVar13 = *param_1;
    if (lVar13 == 0) {
      return;
    }
    lVar10 = 0;
    do {
      *(undefined4 *)(lVar13 + lVar10 * 4) = 0;
      lVar10 = lVar10 + 1;
    } while (lVar10 != 0x16);
    return;
  }
  local_40 = (IOAccelShared2 *)0x0;
  local_44 = 0;
  pIVar17 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x590);
  local_38 = pIVar17;
  if (pIVar17 == (IOAccelShared2 *)0x0) {
LAB_0005fd3b:
    uVar11 = bind_texture(this,(long)param_1,*(uint *)(lVar13 + 8),0xb2,'\0',(long *)&local_38);
    pIVar17 = local_38;
    if ((char)uVar11 == '\0') goto LAB_000601de;
  }
  else {
    if (*(int *)(*(long *)(pIVar17 + 0x38) + 0x100) != *(int *)(lVar13 + 8)) {
      unbind_texture((long *)this,param_1,0xb2);
      goto LAB_0005fd3b;
    }
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar17);
    }
  }
  plVar15 = *(long **)((IGAccelResource *)pIVar17 + 0x88);
  if ((plVar15 == (long *)0x0) &&
     (plVar15 = *(long **)((IGAccelResource *)pIVar17 + 0x80), plVar15 == (long *)0x0))
  goto LAB_000601de;
  IGAccelResource::get_tex_data((IGAccelResource *)pIVar17,(long *)&local_40,&local_44);
  pIVar17 = local_40;
  uVar7 = (**(code **)(*plVar15 + 0x120))(plVar15);
  uVar3 = *(ulong *)__got::_page_size;
  local_38 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x598);
  if (local_38 == (IOAccelShared2 *)0x0) {
LAB_0005fe12:
    uVar11 = bind_texture(this,(long)param_1,*(uint *)(lVar13 + 0x10),0xb3,'\0',(long *)&local_38);
    if (((char)uVar11 == '\0') ||
       (((pOVar9 = *(OSMetaClassBase **)(local_38 + 0x88), pOVar9 == (OSMetaClassBase *)0x0 &&
         (pOVar9 = *(OSMetaClassBase **)(local_38 + 0x80), pOVar9 == (OSMetaClassBase *)0x0)) ||
        (pOVar9 = (OSMetaClassBase *)
                  OSMetaClassBase::safeMetaCast(pOVar9,*(OSMetaClass **)__got::metaClass),
        pOVar9 == (OSMetaClassBase *)0x0)))) goto LAB_000601de;
    pIVar1 = this + 0x12a8;
    if (*(long **)(this + 0x12a8) == (long *)0x0) {
LAB_0005feac:
      *(long *)pIVar1 = 0;
      bVar6 = UtilMapMemory((long *)pIVar1,pOVar9);
      if (!bVar6) goto LAB_000601de;
    }
    else {
      lVar10 = (**(code **)(**(long **)(this + 0x12a8) + 0x138))();
      if (lVar10 != *(long *)(pOVar9 + 0xd0)) {
        if (*(long **)pIVar1 != (long *)0x0) {
          (**(code **)(**(long **)pIVar1 + 0x28))();
        }
        goto LAB_0005feac;
      }
    }
    lVar10 = (**(code **)(*(long *)pOVar9 + 0x120))(pOVar9);
    *(long *)(this + 0x12b0) = lVar10 + -0x40;
  }
  else {
    if (*(int *)(*(long *)(local_38 + 0x38) + 0x100) != *(int *)(lVar13 + 0x10)) {
      unbind_texture((long *)this,param_1,0xb3);
      goto LAB_0005fe12;
    }
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(local_38);
    }
  }
  IGAccelResource::get_tex_data((IGAccelResource *)local_38,(long *)&local_40,&local_44);
  uVar14 = (ulong)local_40 & 0xfffffffffffff000;
  local_38 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x5a0);
  if (local_38 != (IOAccelShared2 *)0x0) {
    pOVar9 = *(OSMetaClassBase **)(local_38 + 0x88);
    if ((pOVar9 == (OSMetaClassBase *)0x0) &&
       (pOVar9 = *(OSMetaClassBase **)(local_38 + 0x80), pOVar9 == (OSMetaClassBase *)0x0))
    goto LAB_000601de;
    if (*(int *)(*(long *)(local_38 + 0x38) + 0x100) == *(int *)(lVar13 + 0xc)) {
      if (*(long *)(this + 0x630) == 0) {
        IOAccelResource2::clientRelease(local_38);
      }
      goto LAB_0006004c;
    }
    unbind_texture((long *)this,param_1,0xb4);
  }
  uVar11 = bind_texture(this,(long)param_1,*(uint *)(lVar13 + 0xc),0xb4,'\0',(long *)&local_38);
  if ((((char)uVar11 == '\0') ||
      ((pOVar9 = *(OSMetaClassBase **)(local_38 + 0x88), pOVar9 == (OSMetaClassBase *)0x0 &&
       (pOVar9 = *(OSMetaClassBase **)(local_38 + 0x80), pOVar9 == (OSMetaClassBase *)0x0)))) ||
     (pOVar12 = (OSMetaClassBase *)
                OSMetaClassBase::safeMetaCast(pOVar9,*(OSMetaClass **)__got::metaClass),
     pOVar12 == (OSMetaClassBase *)0x0)) goto LAB_000601de;
  pIVar1 = this + 0x12a0;
  if (*(long **)(this + 0x12a0) == (long *)0x0) {
LAB_0006001b:
    *(long *)pIVar1 = 0;
    bVar6 = UtilMapMemory((long *)pIVar1,pOVar12);
    if (!bVar6) {
LAB_000601de:
      IOAccelContext2::setContextError(uVar8);
      return;
    }
  }
  else {
    lVar13 = (**(code **)(**(long **)(this + 0x12a0) + 0x138))();
    if (lVar13 != *(long *)(pOVar12 + 0xd0)) {
      if (*(long **)pIVar1 != (long *)0x0) {
        (**(code **)(**(long **)pIVar1 + 0x28))();
      }
      goto LAB_0006001b;
    }
  }
  uVar11 = (**(code **)(*(long *)pOVar12 + 0x120))(pOVar12);
  *(undefined8 *)(this + 0x12b8) = uVar11;
LAB_0006004c:
  IGAccelResource::get_tex_data((IGAccelResource *)local_38,(long *)&local_40,&local_44);
  uVar16 = (ulong)local_40 & 0xfffffffffffff000;
  uVar8 = (**(code **)(*(long *)pOVar9 + 0x120))(pOVar9);
  uVar4 = *(ulong *)__got::_page_size;
  puVar2[9] = 0;
  puVar2[8] = 0;
  puVar2[7] = uVar7 / uVar3 << 0x2c | 0x1fffff001;
  puVar2[5] = (ulong)pIVar17 & 0xfffffffffffff000 | 0x461;
  puVar2[4] = 0;
  puVar2[3] = uVar16 | 0x701;
  puVar2[2] = uVar14 | 0x701;
  puVar2[1] = (ulong)pIVar17 >> 0x20 | 0x6e000000000000;
  *puVar2 = ((ulong)pIVar17 >> 0xc) << 0x2c | 0x70161010014;
  puVar2[10] = 0;
  puVar2[6] = uVar8 / uVar4 << 0x2c | (ulong)((uint)(uVar7 / uVar3) & 0xfffff) << 0xc | 0x100000001;
  return;
}



// IGAccelGLContext::process_token_BindingTablePoolAlloc(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindingTablePoolAlloc(IGAccelGLContext *this,long *param_1)

{
  long lVar1;
  ulong *puVar2;
  IOAccelShared2 *pIVar3;
  char cVar4;
  uint uVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined4 local_44;
  ulong local_40;
  IOAccelShared2 *local_38;
  
  lVar1 = param_1[3];
  uVar5 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar1 + 0x10U) {
LAB_000602ec:
    IOAccelContext2::setContextError(uVar5);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar2 = (ulong *)*param_1;
  if (((long)puVar2 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2)) < 4))
  goto LAB_000602ec;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    local_38 = (IOAccelShared2 *)0x0;
    cVar4 = IOAccelContext2::lookupResource(uVar5,(void **)(ulong)*(uint *)(lVar1 + 8));
    if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
      IOAccelResource2::clientRelease(local_38);
    }
    if (*(int *)(lVar1 + 0xc) != 1) {
      return;
    }
    lVar1 = *param_1;
    if (lVar1 == 0) {
      return;
    }
    lVar7 = 0;
    do {
      *(undefined4 *)(lVar1 + lVar7 * 4) = 0;
      lVar7 = lVar7 + 1;
    } while (lVar7 != 4);
    return;
  }
  pIVar3 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x5a8);
  local_38 = pIVar3;
  if (pIVar3 == (IOAccelShared2 *)0x0) {
LAB_0006036f:
    uVar6 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),0xb5,'\0',(long *)&local_38);
    if ((char)uVar6 == '\0') goto LAB_00060430;
  }
  else {
    if (*(int *)(*(long *)(pIVar3 + 0x38) + 0x100) != *(int *)(lVar1 + 8)) {
      unbind_texture((long *)this,param_1,0xb5);
      goto LAB_0006036f;
    }
    (**(code **)(*(long *)pIVar3 + 0x178))(pIVar3);
    cVar4 = (**(code **)(*(long *)this + 0xa40))
                      (this,param_1,pIVar3,0,*(undefined8 *)(this + 0x12c0),0,1);
    if (cVar4 == '\0') {
      if (((byte)pIVar3[0xe] & 0x10) == 0) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
      }
      else {
        IOAccelContext2::setContextError(uVar5);
      }
      streamErrorCleanup(this,param_1,pIVar3);
      return;
    }
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar3);
    }
  }
  if (*(int *)(lVar1 + 0xc) != 1) {
    return;
  }
  local_40 = 0;
  local_44 = 0;
  IGAccelResource::get_tex_data((IGAccelResource *)local_38,(long *)&local_40,&local_44);
  plVar8 = *(long **)(local_38 + 0x88);
  if ((plVar8 != (long *)0x0) || (plVar8 = *(long **)(local_38 + 0x80), plVar8 != (long *)0x0)) {
    uVar5 = (**(code **)(*plVar8 + 0x120))();
    puVar2[1] = (ulong)(uVar5 >> 0xc) << 0x2c | puVar2[1] & 0xfff00000000 | local_40 >> 0x20;
    *puVar2 = *puVar2 & 0xfffffffffff | (ulong)((uint)local_40 & 0xfffff000) << 0x20;
    return;
  }
LAB_00060430:
  IOAccelContext2::setContextError(uVar5);
  return;
}



// IGAccelGLContext::process_token_BindIndexBuffers(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindIndexBuffers(IGAccelGLContext *this,long *param_1)

{
  uint uVar1;
  uint uVar2;
  char cVar3;
  IGAccelGLContext IVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  long lVar8;
  
  lVar6 = param_1[3];
  uVar7 = (uint)this;
  if (lVar6 + 0x18U <= *(ulong *)(this + 0x628)) {
    lVar8 = *param_1;
    if ((-4 < lVar8 - param_1[1]) &&
       (4 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar8 - param_1[1]) >> 2)))) {
      uVar1 = *(uint *)(lVar6 + 8);
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        if ((uVar1 != 0) && (*(int *)(lVar6 + 0x14) == 3)) {
          cVar3 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)uVar1);
          if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
            IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
          }
          lVar8 = *param_1;
        }
        if (lVar8 == 0) {
          return;
        }
        lVar6 = 0;
        do {
          *(undefined4 *)(lVar8 + lVar6 * 4) = 0;
          lVar6 = lVar6 + 1;
        } while (lVar6 != 5);
        return;
      }
      if (uVar1 == 0) {
        return;
      }
      uVar2 = *(uint *)(lVar6 + 0xc);
      if (*(int *)(lVar6 + 0x14) != 1) {
        if (*(int *)(lVar6 + 0x14) != 3) {
          IOAccelContext2::setContextError(uVar7);
          return;
        }
        lVar5 = get_vertexbuffer_address(this,(long)param_1,uVar1,uVar2,0xd8);
        if (lVar5 == 0) {
          return;
        }
        uVar1 = *(uint *)(lVar6 + 8);
        *(long *)(lVar8 + 8) = lVar5;
        *(uint *)(lVar8 + 0x10) = *(int *)(lVar6 + 0x10) - uVar2;
        if (uVar1 == 0) {
          return;
        }
        IOAccelContext2::lookupResource(uVar7,(void **)(ulong)uVar1);
        return;
      }
      lVar5 = get_databuffer_address(this,(ulong)uVar2);
      IVar4 = (IGAccelGLContext)
              (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                        (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                         (ulong)*(byte *)(*(long *)(this + 0xfe8) + 0x16) * 0x40 +
                         *(long *)(*(long *)(this + 0xfe8) + 0x38),this + 0x12f8,
                         *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20));
      this[0x1338] = IVar4;
      if (lVar5 == 0) {
        return;
      }
      *(long *)(lVar8 + 8) = lVar5;
      *(uint *)(lVar8 + 0x10) = *(int *)(lVar6 + 0x10) - uVar2;
      return;
    }
  }
  IOAccelContext2::setContextError(uVar7);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindVertexBuffers(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindVertexBuffers(IGAccelGLContext *this,long *param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  IGAccelGLContext IVar4;
  uint uVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  int *piVar9;
  uint uVar10;
  ulong uVar11;
  uint *puVar12;
  ulong uVar13;
  
  lVar7 = param_1[3];
  uVar10 = (uint)this;
  if (lVar7 + 0x19cU <= *(ulong *)(this + 0x628)) {
    uVar5 = *(uint *)(lVar7 + 8);
    uVar11 = (ulong)uVar5;
    if (uVar5 - 0x22 < 0xffffffdf) {
      IOAccelContext2::setContextError(uVar10);
      return;
    }
    lVar8 = *param_1;
    if ((-4 < lVar8 - param_1[1]) &&
       (uVar5 = uVar5 * 4 + 1,
       (int)uVar5 <= (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar8 - param_1[1]) >> 2)))
       ) {
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        if (lVar8 == 0) {
          return;
        }
        uVar11 = 0;
        do {
          *(undefined4 *)(lVar8 + uVar11 * 4) = 0;
          uVar11 = uVar11 + 1;
        } while (uVar5 != uVar11);
        return;
      }
      if (*(int *)(lVar7 + 0xc) == 0) {
        puVar12 = (uint *)(lVar7 + 0x10);
        lVar8 = lVar8 + 4;
      }
      else {
        uVar5 = *(uint *)(lVar7 + 0x14);
        iVar1 = *(int *)(lVar7 + 0x18);
        lVar6 = get_databuffer_address(this,(ulong)uVar5);
        IVar4 = (IGAccelGLContext)
                (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                          (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                           (ulong)*(byte *)(*(long *)(this + 0xfe8) + 0x16) * 0x40 +
                           *(long *)(*(long *)(this + 0xfe8) + 0x38),this + 0x12f8,
                           *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20));
        this[0x1338] = IVar4;
        *(long *)(lVar8 + 8) = lVar6;
        *(uint *)(lVar8 + 0x10) = iVar1 - uVar5;
        lVar8 = lVar8 + 0x14;
        puVar12 = (uint *)(lVar7 + 0x1c);
        uVar11 = uVar11 - 1;
      }
      if ((long)uVar11 < 1) {
        uVar11 = 0;
      }
      else {
        piVar9 = (int *)(lVar8 + 0xc);
        uVar13 = 0;
        do {
          uVar5 = *puVar12;
          uVar2 = puVar12[1];
          uVar3 = puVar12[2];
          lVar7 = get_vertexbuffer_address
                            (this,(long)param_1,uVar5,uVar2,(ulong)((int)uVar13 + 0xb8));
          if (lVar7 != 0) {
            *(long *)(piVar9 + -2) = lVar7;
            *piVar9 = uVar3 - uVar2;
            IOAccelContext2::lookupResource(uVar10,(void **)(ulong)uVar5);
          }
          uVar13 = uVar13 + 1;
          piVar9 = piVar9 + 4;
          puVar12 = puVar12 + 3;
        } while (uVar11 != uVar13);
        if ((uVar11 & 0xffffffe0) != 0) {
          return;
        }
      }
      lVar7 = uVar11 + 0xb8;
      do {
        if (*(long *)(*(long *)(this + 0x5b8) + lVar7 * 8) == 0) {
          return;
        }
        unbind_texture((long *)this,param_1,(uint)lVar7);
        lVar7 = lVar7 + 1;
      } while (lVar7 != 0xd8);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar10);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindTextures(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_BindTextures(IGAccelGLContext *this,long param_1)

{
  ushort uVar1;
  ushort uVar2;
  char cVar3;
  IGAccelGLContext IVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  ulong uVar8;
  IGAccelTask *this_00;
  IGAccelResource *pIVar9;
  ulong uVar10;
  uint uVar11;
  IGAccelResource *this_01;
  uint *puVar12;
  uint uVar13;
  ulong uVar14;
  ulong uVar15;
  ulong *puVar16;
  ulong local_70;
  IGAccelResource *local_68;
  IOAccelShared2 *local_60;
  ulong local_58;
  int local_4c;
  long local_48;
  ulong local_40;
  IOAccelShared2 *local_38;
  
  lVar7 = *(long *)(param_1 + 0x18);
  uVar11 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar7 + 0x28cU) {
    IOAccelContext2::setContextError(uVar11);
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  uVar1 = *(ushort *)(lVar7 + 10);
  uVar10 = (ulong)uVar1;
  if (uVar10 < 0x11) {
    uVar2 = *(ushort *)(lVar7 + 8);
    local_58 = (ulong)uVar2;
    if (uVar2 < 0x41) {
      if (*(char *)(param_1 + 0x3c) == '\0') {
        if (uVar10 != 0) {
          lVar5 = 0;
          do {
            local_38 = (IOAccelShared2 *)0x0;
            cVar3 = IOAccelContext2::lookupResource
                              (uVar11,(void **)(ulong)*(uint *)(lVar7 + 0xc + lVar5));
            if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
              IOAccelResource2::clientRelease(local_38);
            }
            uVar13 = *(uint *)(lVar7 + 0x1c + lVar5);
            if (uVar13 != 0) {
              local_38 = (IOAccelShared2 *)0x0;
              cVar3 = IOAccelContext2::lookupResource(uVar11,(void **)(ulong)uVar13);
              if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease(local_38);
              }
            }
            lVar5 = lVar5 + 0x14;
          } while (uVar10 * 0x14 != lVar5);
        }
      }
      else {
        local_40 = lVar7;
        local_48 = param_1;
        if (uVar1 < 0x10) {
          uVar15 = (ulong)((uint)uVar1 + (uint)uVar2) * 2;
          uVar14 = 0x10;
          do {
            if (*(long *)(*(long *)(this + 0x5b8) + (uVar15 & 0xffffffff) * 8) == 0) break;
            unbind_texture((long *)this,param_1,(uint)uVar15);
            if (*(long *)(*(long *)(this + 0x5b8) + 8 + uVar15 * 8) != 0) {
              unbind_texture((long *)this,param_1,(uint)uVar15 + 1);
            }
            uVar15 = uVar15 + 2;
            uVar14 = uVar14 - 1;
          } while (uVar10 != uVar14);
          if (uVar10 == 0) {
            return;
          }
        }
        puVar12 = (uint *)(local_40 + 0xc);
        uVar14 = local_58 & 0xffffffff;
        uVar15 = uVar14 * 2;
        local_58 = 0;
        do {
          lVar7 = local_48;
          local_38 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + uVar15 * 8);
          local_68 = (IGAccelResource *)0x0;
          local_60 = (IOAccelShared2 *)0x0;
          local_40 = uVar10;
          cVar3 = IOAccelContext2::lookupResource(uVar11,(void **)(ulong)*puVar12);
          if (cVar3 == '\0') goto LAB_00060e5d;
          if (((local_60 == (IOAccelShared2 *)0x0) || (local_60[0x14] != (IOAccelShared2)0x1)) ||
             (lVar5 = IOAccelResource2::getStorageResource(), lVar5 != 0)) {
            uVar13 = (uint)uVar15;
            if (local_38 == (IOAccelShared2 *)0x0) {
              uVar10 = uVar15 & 0xffffffff;
LAB_00060b10:
              uVar6 = bind_texture(this,lVar7,*puVar12,uVar10 & 0xffffffff,'\0',(long *)&local_38);
              pIVar9 = (IGAccelResource *)local_38;
              if ((char)uVar6 != '\0') goto LAB_00060b31;
            }
            else {
              if (*(uint *)(*(long *)(local_38 + 0x38) + 0x100) != *puVar12) {
                uVar10 = (local_58 + uVar14) * 2;
                unbind_texture((long *)this,lVar7,uVar13);
                goto LAB_00060b10;
              }
              (**(code **)(*(long *)this + 0xa48))
                        (this,lVar7,local_38,*(undefined8 *)(this + 0x12c0));
              cVar3 = (**(code **)(*(long *)this + 0xa40))
                                (this,lVar7,local_38,0,*(undefined8 *)(this + 0x12c0),0,1);
              if (cVar3 == '\0') {
                if ((local_38 == (IOAccelShared2 *)0x0) || (((byte)local_38[0xe] & 0x10) != 0)) {
                  IOAccelContext2::setContextError(uVar11);
                }
                else {
                  *(undefined1 *)(lVar7 + 0x3c) = 0;
                  this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
                }
                streamErrorCleanup(this,lVar7,local_38);
                return;
              }
              if (*(long *)(this + 0x630) == 0) {
                IOAccelResource2::clientRelease(local_38);
              }
              lVar5 = IOAccelResource2::getStorageResource();
              IVar4 = (IGAccelGLContext)
                      (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                                (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                                 (ulong)*(byte *)(lVar5 + 0x16) * 0x40 + *(long *)(lVar5 + 0x38),
                                 this + 0x12f8);
              this[0x1338] = IVar4;
              IOAccelResource2::getStorageResource();
LAB_00060b31:
              if (*(long *)(*(long *)(this + 0x5b8) + 8 + uVar15 * 8) != 0) {
                unbind_texture((long *)this,lVar7,uVar13 + 1);
              }
              if ((puVar12[4] == 0) ||
                 (uVar6 = bind_texture(this,lVar7,puVar12[4],(ulong)(uVar13 + 1),'\0',
                                       (long *)&local_68), pIVar9 = local_68, (char)uVar6 != '\0'))
              {
                local_70 = 0;
                local_4c = 0;
                IGAccelResource::get_tex_data
                          ((IGAccelResource *)local_38,(long *)&local_70,&local_4c);
                uVar13 = puVar12[1];
                if ((*(ulong *)(this + 0x12b0) < (ulong)uVar13) ||
                   (*(long **)(this + 0x12a8) == (long *)0x0)) goto LAB_00060e5d;
                lVar7 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
                puVar16 = (ulong *)(lVar7 + (ulong)uVar13);
                if (puVar16 == (ulong *)0x0) goto LAB_00060e5d;
                puVar16[4] = local_70;
                lVar7 = IOAccelResource2::getStorageResource();
                if (puVar12[3] == 0) {
                  uVar8 = (ulong)(local_4c - 1U & 0x3ffff) << 0x20;
                  uVar10 = puVar16[1];
                  puVar16[1] = uVar10 & 0xfffc0000ffffffff | uVar8;
                  puVar16[1] = uVar10 & 0x1c0000ffffffff | uVar8 |
                               (ulong)(*(ushort *)
                                        (local_38 +
                                        (ulong)((*(ushort *)(lVar7 + 0x1d6) & 3) != 1) * 2 + 0xb2) -
                                      1) << 0x35;
                }
                if (puVar12[2] != 0) {
                  lVar5 = IOAccelResource2::getStorageResource();
                  uVar1 = *(ushort *)(lVar5 + 0x194);
                  *puVar16 = *puVar16 & 0xffffffffffffcfff | (ulong)((uVar1 & 3) << 0xc);
                  *(ulong *)((long)puVar16 + 0x14) =
                       *(ulong *)((long)puVar16 + 0x14) & 0xfffffffffff3ffff |
                       (ulong)((uVar1 & 0xc) << 0x10);
                }
                pIVar9 = local_68;
                this_01 = (IGAccelResource *)local_38;
                if (local_68 != (IGAccelResource *)0x0) {
                  lVar7 = IOAccelResource2::getStorageResource();
                  this_01 = pIVar9;
                }
                IGAccelResource::fillSurfaceStateAuxInfo(this_01,lVar7 + 0x180,(long)puVar16,0);
                goto LAB_00060cda;
              }
            }
            if ((pIVar9 != (IGAccelResource *)0x0) && (((byte)pIVar9[0xe] & 0x10) == 0)) {
              *(undefined1 *)(lVar7 + 0x3c) = 0;
              this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
              return;
            }
LAB_00060e5d:
            IOAccelContext2::setContextError(uVar11);
            return;
          }
          uVar13 = puVar12[1];
          if ((*(ulong *)(this + 0x12b0) < (ulong)uVar13) ||
             (*(long **)(this + 0x12a8) == (long *)0x0)) goto LAB_00060e5d;
          lVar7 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
          lVar7 = lVar7 + (ulong)uVar13;
          if (lVar7 == 0) goto LAB_00060e5d;
          *(byte *)(lVar7 + 3) = *(byte *)(lVar7 + 3) | 0xe0;
          this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
          uVar6 = IGAccelTask::getScratchGPUVirtualAddress(this_00);
          *(undefined8 *)(lVar7 + 0x20) = uVar6;
          *(byte *)(lVar7 + 0x16) = *(byte *)(lVar7 + 0x16) & 0xf3;
          *(byte *)(lVar7 + 1) = *(byte *)(lVar7 + 1) | 0x30;
          *(ulong *)(lVar7 + 8) = *(ulong *)(lVar7 + 8) & 0xfffc0000c000c000 | 0x8000010001;
          if (*(long *)(this + 0x630) == 0) {
            IOAccelResource2::clientRelease(local_60);
          }
LAB_00060cda:
          local_58 = local_58 + 1;
          uVar15 = uVar15 + 2;
          puVar12 = puVar12 + 5;
          uVar10 = local_40 - 1;
        } while (uVar10 != 0);
      }
      return;
    }
  }
  IOAccelContext2::setContextError(uVar11);
  return;
}



// IGAccelGLContext::process_token_UnbindTexture(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_UnbindTexture(IGAccelGLContext *this,long param_1)

{
  char cVar1;
  long lVar2;
  uint uVar3;
  
  lVar2 = *(long *)(param_1 + 0x18);
  uVar3 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar2 + 0x10U) {
    IOAccelContext2::setContextError(uVar3);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else if (*(uint *)(lVar2 + 8) == 0xffffffff) {
    uVar3 = *(uint *)(lVar2 + 0xc);
    if (uVar3 < 0x50) {
      lVar2 = *(long *)(this + 0x5b8);
      if (*(long *)(lVar2 + (ulong)uVar3 * 0x10) != 0) {
        unbind_texture((long *)this,param_1,uVar3 * 2);
        lVar2 = *(long *)(this + 0x5b8);
      }
      uVar3 = uVar3 * 2 | 1;
      if (*(long *)(lVar2 + (ulong)uVar3 * 8) != 0) {
        unbind_texture((long *)this,param_1,uVar3);
        return;
      }
    }
  }
  else {
    cVar1 = IOAccelContext2::lookupResource(uVar3,(void **)(ulong)*(uint *)(lVar2 + 8));
    if (cVar1 == '\0') {
      IOAccelContext2::setContextError(uVar3);
    }
    else if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)0x0);
    }
  }
  return;
}



// IGAccelGLContext::process_token_BindConstantBuffers(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindConstantBuffers(IGAccelGLContext *this,long param_1)

{
  ushort uVar1;
  uint uVar2;
  char cVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  uint uVar10;
  uint *puVar11;
  ulong uVar12;
  ulong *puVar13;
  ulong uVar14;
  long local_48;
  undefined4 local_3c;
  IGAccelResource *local_38;
  
  lVar5 = *(long *)(param_1 + 0x18);
  uVar10 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar5 + 0x18cU) {
    IOAccelContext2::setContextError(uVar10);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else {
    uVar12 = (ulong)*(uint *)(lVar5 + 8);
    if (0x10 < uVar12) {
      IOAccelContext2::setContextError(uVar10);
      return;
    }
    if (*(char *)(param_1 + 0x3c) == '\0') {
      if (uVar12 != 0) {
        lVar6 = 0;
        do {
          local_38 = (IGAccelResource *)0x0;
          cVar3 = IOAccelContext2::lookupResource
                            (uVar10,(void **)(ulong)*(uint *)(lVar5 + 0xc + lVar6));
          if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
            IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
          }
          lVar6 = lVar6 + 0xc;
        } while (uVar12 * 0xc != lVar6);
      }
    }
    else if (uVar12 != 0) {
      puVar11 = (uint *)(lVar5 + 0x14);
      uVar14 = 0xa0;
      do {
        if (*(long *)(*(long *)(this + 0x5b8) + uVar14 * 8) != 0) {
          unbind_texture((long *)this,param_1,(uint)uVar14);
        }
        local_38 = (IGAccelResource *)0x0;
        uVar4 = bind_texture(this,param_1,puVar11[-2],uVar14 & 0xffffffff,'\0',(long *)&local_38);
        if ((char)uVar4 == '\0') {
          return;
        }
        local_48 = 0;
        local_3c = 0;
        IGAccelResource::get_tex_data(local_38,&local_48,&local_3c);
        uVar2 = puVar11[-1];
        if ((*(ulong *)(this + 0x12b0) < (ulong)uVar2) || (*(long **)(this + 0x12a8) == (long *)0x0)
           ) {
LAB_00061293:
          IOAccelContext2::setContextError(uVar10);
          return;
        }
        lVar5 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
        puVar13 = (ulong *)(lVar5 + (ulong)uVar2);
        if (puVar13 == (ulong *)0x0) goto LAB_00061293;
        puVar13[4] = (ulong)*puVar11 + local_48;
        if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + (*(byte *)((long)puVar13 + 7) & 0x7e)) &
            0x30) != 0) {
          lVar5 = *(long *)(&DAT_00001290 + *(long *)(this + 0x5a8));
          lVar6 = IOAccelResource2::getStorageResource();
          uVar9 = *(ulong *)(lVar6 + 200 + (ulong)(*(long *)(lVar6 + 0x88) == 0) * 8);
          if (*(ulong *)(lVar5 + 0x108) * 2 < uVar9) {
            uVar7 = puVar13[1];
            uVar8 = *puVar13 & 0x81ffffffffffffff;
            uVar9 = 0x3200000000000000;
          }
          else {
            uVar8 = *puVar13 & 0x81ffffffffffffff;
            uVar7 = puVar13[1];
            if (*(ulong *)(lVar5 + 0x108) >> 1 < uVar9) {
              uVar9 = 0x3000000000000000;
            }
            else {
              uVar9 = 0x2400000000000000;
            }
          }
          *puVar13 = uVar8 | uVar9;
          puVar13[1] = uVar7;
        }
        lVar5 = IOAccelResource2::getStorageResource();
        uVar1 = *(ushort *)(lVar5 + 0x194);
        *puVar13 = *puVar13 & 0xffffffffffffcfff | (ulong)((uVar1 & 3) << 0xc);
        *(ulong *)((long)puVar13 + 0x14) =
             *(ulong *)((long)puVar13 + 0x14) & 0xfffffffffff3ffff | (ulong)((uVar1 & 0xc) << 0x10);
        lVar5 = IOAccelResource2::getStorageResource();
        IGAccelResource::fillSurfaceStateAuxInfo(local_38,lVar5 + 0x180,(long)puVar13,0);
        puVar11 = puVar11 + 3;
        lVar5 = uVar14 - uVar12;
        uVar14 = uVar14 + 1;
      } while (lVar5 != 0x9f);
    }
  }
  return;
}



// IGAccelGLContext::process_token_BindDrawFBOColor(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindDrawFBOColor(IGAccelGLContext *this,long param_1)

{
  ushort *puVar1;
  IOAccelShared2 IVar2;
  ushort uVar3;
  byte bVar4;
  char cVar5;
  long lVar6;
  ulong *puVar7;
  undefined8 uVar8;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  uint uVar12;
  undefined1 uVar13;
  ulong uVar14;
  IOAccelShared2 *pIVar15;
  ulong uVar16;
  long lVar17;
  uint uVar18;
  byte *pbVar19;
  ulong uVar20;
  long lVar21;
  bool bVar22;
  uint local_7c;
  IOAccelShared2 *local_78;
  long local_70;
  uint local_64;
  long local_60;
  int local_54;
  ulong *local_50;
  long local_48;
  IOAccelShared2 *local_40;
  IOAccelShared2 *local_38;
  
  lVar21 = *(long *)(param_1 + 0x18);
  uVar18 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar21 + 0xacU) {
    IOAccelContext2::setContextError(uVar18);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else {
    uVar3 = *(ushort *)(lVar21 + 8);
    uVar20 = (ulong)uVar3;
    if (0xff < uVar3) {
      IOAccelContext2::setContextError(uVar18);
      return;
    }
    if (*(char *)(param_1 + 0x3c) == '\0') {
      if (uVar3 != 0) {
        uVar16 = 0;
        do {
          if ((uVar20 & 1) != 0) {
            local_38 = (IOAccelShared2 *)0x0;
            cVar5 = IOAccelContext2::lookupResource
                              (uVar18,(void **)(ulong)*(uint *)(lVar21 + 0xc + uVar16 * 0x14));
            if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
              IOAccelResource2::clientRelease(local_38);
            }
            uVar12 = *(uint *)(lVar21 + 0x14 + uVar16 * 0x14);
            if (uVar12 != 0) {
              local_38 = (IOAccelShared2 *)0x0;
              cVar5 = IOAccelContext2::lookupResource(uVar18,(void **)(ulong)uVar12);
              if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
                IOAccelResource2::clientRelease(local_38);
              }
            }
            uVar16 = (ulong)((int)uVar16 + 1);
          }
          uVar12 = (uint)uVar20;
          uVar20 = uVar20 >> 1;
        } while (1 < uVar12);
      }
    }
    else {
      lVar21 = lVar21 + 0xc;
      local_64 = 0;
      uVar16 = 0xdb;
      local_60 = lVar21;
      local_48 = param_1;
      do {
        lVar6 = *(long *)(this + 0x5b8);
        if (*(long *)(lVar6 + uVar16 * 8) != 0) {
          unbind_texture((long *)this,param_1,(uint)uVar16);
          lVar6 = *(long *)(this + 0x5b8);
        }
        if (*(long *)(lVar6 + 8 + uVar16 * 8) != 0) {
          unbind_texture((long *)this,param_1,(uint)(uVar16 + 1));
        }
        if ((uVar20 & 1) != 0) {
          uVar9 = (ulong)local_64;
          local_70 = uVar9 * 5;
          *(uint *)(this + 0x1268) = (uint)*(ushort *)(lVar21 + 0x10 + uVar9 * 0x14);
          *(uint *)(this + 0x126c) = (uint)*(ushort *)(lVar21 + 0x12 + uVar9 * 0x14);
          local_38 = (IOAccelShared2 *)0x0;
          local_54 = 0;
          uVar12 = *(uint *)(lVar21 + 8 + uVar9 * 0x14);
          local_40 = (IOAccelShared2 *)0x0;
          uVar9 = (ulong)*(uint *)(lVar21 + 4 + uVar9 * 0x14);
          if ((*(ulong *)(this + 0x12b0) < uVar9) || (*(long **)(this + 0x12a8) == (long *)0x0)) {
LAB_000618f1:
            IOAccelContext2::setContextError(uVar18);
            return;
          }
          lVar21 = (**(code **)(**(long **)(this + 0x12a8) + 0x118))();
          puVar7 = (ulong *)(lVar21 + uVar9);
          if (puVar7 == (ulong *)0x0) goto LAB_000618f1;
          local_50 = puVar7;
          uVar8 = bind_texture(this,local_48,*(uint *)(local_60 + local_70 * 4),uVar16,'\x01',
                               (long *)&local_40);
          if ((char)uVar8 == '\0') {
            if ((local_40 != (IOAccelShared2 *)0x0) && (((byte)local_40[0xe] & 0x10) == 0)) {
              *(undefined1 *)(local_48 + 0x3c) = 0;
              this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
              return;
            }
            goto LAB_000618f1;
          }
          lVar21 = IOAccelResource2::getStorageResource();
          local_78 = (IOAccelShared2 *)0x0;
          if (uVar12 != 0) {
            uVar8 = bind_texture(this,local_48,uVar12,uVar16 + 1 & 0xffffffff,'\x01',
                                 (long *)&local_78);
            if ((char)uVar8 == '\0') {
              if ((local_78 == (IOAccelShared2 *)0x0) || (((byte)local_78[0xe] & 0x10) != 0)) {
                IOAccelContext2::setContextError(uVar18);
                pIVar15 = local_78;
                lVar17 = local_48;
              }
              else {
                *(undefined1 *)(local_48 + 0x3c) = 0;
                this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
                pIVar15 = local_78;
                lVar17 = local_48;
              }
              goto LAB_00061939;
            }
            (**(code **)(*(long *)local_78 + 0x168))(local_78,0,0);
            IGAccelResource::get_tex_data((IGAccelResource *)local_78,(long *)&local_38,&local_54);
            local_50[5] = (ulong)((uint)local_50[5] & 0xfff) | (ulong)local_38 & 0xfffffffffffff000;
            if (*(ushort *)(lVar21 + 0x196) < 2) {
              uVar9 = *local_50;
              uVar12 = (uint)local_50[3] & 7;
              if (uVar12 == 1) {
                bVar4 = 0xc;
                uVar13 = 2;
              }
              else {
                if (uVar12 != 5) goto LAB_00061528;
                bVar4 = 8;
                uVar13 = 3;
              }
              *(undefined1 *)(lVar21 + 0x220) = uVar13;
              *(byte *)(lVar21 + 0x221) = *(byte *)(lVar21 + 0x221) | bVar4;
              *(uint *)(lVar21 + 0x1cc) = (uint)uVar9 >> 0x12 & 0x3ff;
            }
          }
LAB_00061528:
          IGAccelResource::get_tex_data((IGAccelResource *)local_40,(long *)&local_38,&local_54);
          local_50[4] = (ulong)local_38;
          local_50[1] = local_50[1] & 0xfffc0000ffffffff | (ulong)(local_54 - 1U & 0x3ffff) << 0x20;
          local_7c = 0;
          uVar9 = IGAccelResource::get_modtex_info
                            ((IGAccelResource *)local_40,(uint *)(this + 0x1268),
                             (uint *)(this + 0x126c),&local_7c,&local_7c,&local_7c,&local_7c,
                             &local_7c);
          lVar17 = local_48;
          lVar10 = local_60;
          lVar6 = local_70;
          if ((char)uVar9 == '\0') {
LAB_000618b7:
            IOAccelContext2::setContextError(uVar18);
            pIVar15 = local_40;
LAB_00061939:
            streamErrorCleanup(this,lVar17,pIVar15);
            return;
          }
          if (((byte)local_40[0xac] < 2) || (local_50[1] >> 0x35 == 0)) {
            IVar2 = *(IOAccelShared2 *)(local_60 + local_70 * 4 + 0xc);
            if ((byte)local_40[0xac] <= (byte)IVar2) goto LAB_000618b7;
            (**(code **)(*(long *)local_40 + 0x168))
                      (local_40,IVar2,*(undefined1 *)(local_60 + 0xd + local_70 * 4));
            uVar9 = (ulong)*(ushort *)(lVar10 + 0xe + lVar6 * 4);
            bVar4 = *(byte *)(lVar10 + 0xd + lVar6 * 4);
            puVar1 = (ushort *)(*(long *)(lVar21 + 0x1d8) + uVar9 * 2);
            *puVar1 = *puVar1 | (ushort)(1 << (bVar4 & 0x1f));
            bVar4 = bVar4 & 0x1f;
            puVar1 = (ushort *)(*(long *)(lVar21 + 0x1e0) + uVar9 * 2);
            *puVar1 = *puVar1 & ((ushort)(-2 << bVar4) | (ushort)(0xfffffffe >> 0x20 - bVar4));
          }
          else {
            pbVar19 = (byte *)(local_60 + local_70 * 4 + 0xd);
            bVar4 = *pbVar19;
            uVar9 = 0;
            do {
              (**(code **)(*(long *)local_40 + 0x168))(local_40,uVar9 & 0xffffffff,bVar4);
              bVar4 = *pbVar19;
              puVar1 = (ushort *)(*(long *)(lVar21 + 0x1d8) + uVar9 * 2);
              *puVar1 = *puVar1 | (ushort)(1 << (bVar4 & 0x1f));
              puVar1 = (ushort *)(*(long *)(lVar21 + 0x1e0) + uVar9 * 2);
              *puVar1 = *puVar1 & ((ushort)(-2 << (bVar4 & 0x1f)) |
                                  (ushort)(0xfffffffe >> 0x20 - (bVar4 & 0x1f)));
              uVar9 = uVar9 + 1;
            } while (uVar9 < (byte)local_40[0xac]);
          }
          lVar6 = *(long *)(&DAT_00001290 + *(long *)(this + 0x5a8));
          bVar4 = IGAccelResource::isDisplayableIOSurface();
          uVar9 = *local_50;
          uVar14 = local_50[1];
          if (bVar4 == 0) {
            if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(uVar9 >> 0x38) & 0x7e)) & 0x30
                ) != 0) {
              lVar10 = IOAccelResource2::getStorageResource();
              uVar11 = *(ulong *)(lVar10 + 200 + (ulong)(*(long *)(lVar10 + 0x88) == 0) * 8);
              if (*(ulong *)(lVar6 + 0x108) * 2 < uVar11) {
                uVar14 = local_50[1];
                uVar9 = *local_50 & 0x81ffffffffffffff;
                uVar11 = 0x3200000000000000;
              }
              else {
                uVar9 = *local_50 & 0x81ffffffffffffff;
                uVar14 = local_50[1];
                if (*(ulong *)(lVar6 + 0x108) >> 1 < uVar11) {
                  uVar11 = 0x3000000000000000;
                }
                else {
                  uVar11 = 0x2400000000000000;
                }
              }
              uVar9 = uVar9 | uVar11;
              goto LAB_00061796;
            }
          }
          else {
            uVar9 = uVar9 & 0x81ffffffffffffff;
LAB_00061796:
            *local_50 = uVar9;
            local_50[1] = uVar14;
          }
          uVar3 = *(ushort *)(lVar21 + 0x194);
          local_50[1] = uVar14;
          *local_50 = uVar9 & 0xffffffffffffcfff | (ulong)((uVar3 & 3) << 0xc);
          *(ulong *)((long)local_50 + 0x14) =
               *(ulong *)((long)local_50 + 0x14) & 0xfffffffffff3ffff |
               (ulong)((uVar3 & 0xc) << 0x10);
          local_64 = local_64 + 1;
          param_1 = local_48;
          lVar21 = local_60;
        }
        uVar20 = uVar20 >> 1;
        bVar22 = uVar16 < 0xe9;
        uVar16 = uVar16 + 2;
      } while (bVar22);
    }
  }
  return;
}



// IGAccelGLContext::process_token_BindDrawFBODepth(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindDrawFBODepth(IGAccelGLContext *this,long *param_1)

{
  ushort *puVar1;
  byte bVar2;
  ushort uVar3;
  short sVar4;
  ulong *puVar5;
  IOAccelShared2 *pIVar6;
  int iVar7;
  char cVar8;
  undefined8 uVar9;
  ulong uVar10;
  long lVar11;
  long lVar12;
  ushort uVar13;
  uint uVar14;
  long lVar15;
  uint local_54;
  IGAccelGLContext *local_50;
  IOAccelShared2 *local_48;
  int local_3c;
  IGAccelResource *local_38;
  
  lVar12 = param_1[3];
  uVar14 = (uint)this;
  if (lVar12 + 0x20U <= *(ulong *)(this + 0x628)) {
    puVar5 = (ulong *)*param_1;
    if ((-4 < (long)puVar5 - param_1[1]) &&
       (7 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar5 - param_1[1]) >> 2))))
    {
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        local_48 = (IOAccelShared2 *)0x0;
        cVar8 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar12 + 8));
        if ((cVar8 != '\0') && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(local_48);
        }
        lVar12 = *param_1;
        if (lVar12 == 0) {
          return;
        }
        lVar11 = 0;
        do {
          *(undefined4 *)(lVar12 + lVar11 * 4) = 0;
          lVar11 = lVar11 + 1;
        } while (lVar11 != 8);
        return;
      }
      *(uint *)(this + 0x1268) = (uint)*(ushort *)(lVar12 + 0x12);
      *(uint *)(this + 0x126c) = (uint)*(ushort *)(lVar12 + 0x14);
      local_48 = (IOAccelShared2 *)0x0;
      local_3c = 0;
      local_38 = (IGAccelResource *)0x0;
      if (*(long *)(*(long *)(this + 0x5b8) + 0x758) != 0) {
        unbind_texture((long *)this,param_1,0xeb);
      }
      uVar9 = bind_texture(this,(long)param_1,*(uint *)(lVar12 + 8),0xeb,'\x01',(long *)&local_38);
      if ((char)uVar9 == '\0') {
        if ((local_38 != (IGAccelResource *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
          *(undefined1 *)((long)param_1 + 0x3c) = 0;
          this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
          return;
        }
        IOAccelContext2::setContextError(uVar14);
        return;
      }
      local_50 = this + 0x126c;
      IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
      local_54 = 0;
      uVar10 = IGAccelResource::get_modtex_info
                         (local_38,(uint *)(this + 0x1268),(uint *)local_50,&local_54,&local_54,
                          &local_54,&local_54,&local_54);
      if ((char)uVar10 != '\0') {
        lVar11 = IOAccelResource2::getStorageResource();
        if ((byte)local_38[0xac] < 2) {
          (**(code **)(*(long *)local_38 + 0x168))(local_38,0,*(undefined2 *)(lVar12 + 0xc));
          uVar3 = *(ushort *)(lVar12 + 0xe);
          uVar10 = (ulong)uVar3;
          uVar13 = *(short *)(lVar12 + 0x10) + uVar3 + (ushort)(*(short *)(lVar12 + 0x10) == 0);
          if (uVar3 < uVar13) {
            lVar15 = *(long *)(lVar11 + 0x1d8);
            lVar11 = *(long *)(lVar11 + 0x1e0);
            do {
              bVar2 = *(byte *)(lVar12 + 0xc);
              puVar1 = (ushort *)(lVar15 + uVar10 * 2);
              *puVar1 = *puVar1 | (ushort)(1 << (bVar2 & 0x1f));
              bVar2 = bVar2 & 0x1f;
              puVar1 = (ushort *)(lVar11 + uVar10 * 2);
              *puVar1 = *puVar1 & ((ushort)(-2 << bVar2) | (ushort)(0xfffffffe >> 0x20 - bVar2));
              uVar10 = uVar10 + 1;
            } while (uVar13 != uVar10);
          }
        }
        else if (*(ushort *)(lVar12 + 0x10) < 2) {
          uVar3 = *(ushort *)(lVar12 + 0xe);
          if ((byte)local_38[0xac] <= uVar3) goto LAB_00061c76;
          uVar14 = (uint)uVar3;
          (**(code **)(*(long *)local_38 + 0x168))(local_38,uVar14,*(undefined2 *)(lVar12 + 0xc));
          bVar2 = *(byte *)(lVar12 + 0xc);
          puVar1 = (ushort *)(*(long *)(lVar11 + 0x1d8) + (ulong)uVar14 * 2);
          *puVar1 = *puVar1 | (ushort)(1 << (bVar2 & 0x1f));
          bVar2 = bVar2 & 0x1f;
          puVar1 = (ushort *)(*(long *)(lVar11 + 0x1e0) + (ulong)uVar14 * 2);
          *puVar1 = *puVar1 & ((ushort)(-2 << bVar2) | (ushort)(0xfffffffe >> 0x20 - bVar2));
        }
        else {
          uVar10 = 0;
          do {
            (**(code **)(*(long *)local_38 + 0x168))
                      (local_38,uVar10 & 0xffffffff,*(undefined2 *)(lVar12 + 0xc));
            bVar2 = *(byte *)(lVar12 + 0xc);
            lVar15 = *(ushort *)(lVar12 + 0xe) + uVar10;
            puVar1 = (ushort *)(*(long *)(lVar11 + 0x1d8) + lVar15 * 2);
            *puVar1 = *puVar1 | (ushort)(1 << (bVar2 & 0x1f));
            bVar2 = bVar2 & 0x1f;
            puVar1 = (ushort *)(*(long *)(lVar11 + 0x1e0) + lVar15 * 2);
            *puVar1 = *puVar1 & ((ushort)(-2 << bVar2) | (ushort)(0xfffffffe >> 0x20 - bVar2));
            uVar10 = uVar10 + 1;
          } while ((uint)uVar10 < (uint)(byte)local_38[0xac]);
        }
        lVar11 = IOAccelResource2::getStorageResource();
        if ((ulong)*(uint *)(lVar11 + 0x1a4) != 0) {
          local_3c = *(int *)(lVar11 + 0x1a8);
          local_48 = local_48 + *(uint *)(lVar11 + 0x1a4);
        }
        iVar7 = local_3c;
        pIVar6 = local_48;
        if ((*puVar5 & 0x40000000000000) != 0) {
          local_50 = (IGAccelGLContext *)CONCAT44(local_50._4_4_,*(undefined4 *)(lVar12 + 0x1c));
          sVar4 = *(short *)(lVar12 + 0x1a);
          lVar12 = IOAccelResource2::getStorageResource();
          bVar2 = *(byte *)(lVar12 + 0x221);
          *(byte *)(lVar12 + 0x221) = bVar2 | 0x11;
          if (sVar4 != 0) {
            *(byte *)(lVar12 + 0x221) = bVar2 | 0x13;
            *(undefined4 *)(lVar12 + 0x21c) = local_50._0_4_;
          }
        }
        uVar14 = iVar7 - 1U;
        if (0x3fffe < iVar7 - 1U) {
          uVar14 = 0x3ffff;
        }
        puVar5[1] = (ulong)pIVar6 & 0xffffffffffff | (ulong)*(ushort *)((long)puVar5 + 0xe) << 0x30;
        *puVar5 = *puVar5 & 0xfffc0000ffffffff | (ulong)(uVar14 & 0x1ffff) << 0x20;
        return;
      }
LAB_00061c76:
      IOAccelContext2::setContextError(uVar14);
      streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_38);
      return;
    }
  }
  IOAccelContext2::setContextError(uVar14);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_UnbindDrawFBO(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_UnbindDrawFBO(IGAccelGLContext *this,undefined8 param_1)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  
  lVar2 = 0xdc;
  do {
    lVar1 = *(long *)(this + 0x5b8);
    if (*(long *)(lVar1 + -8 + lVar2 * 8) != 0) {
      unbind_texture((long *)this,param_1,(uint)lVar2 - 1);
      lVar1 = *(long *)(this + 0x5b8);
    }
    if (*(long *)(lVar1 + lVar2 * 8) != 0) {
      unbind_texture((long *)this,param_1,(uint)lVar2);
    }
    uVar3 = lVar2 - 1;
    lVar2 = lVar2 + 2;
  } while (uVar3 < 0xea);
  lVar2 = *(long *)(this + 0x5b8);
  if (*(long *)(lVar2 + 0x760) != 0) {
    unbind_texture((long *)this,param_1,0xec);
    lVar2 = *(long *)(this + 0x5b8);
  }
  if (*(long *)(lVar2 + 0x770) != 0) {
    unbind_texture((long *)this,param_1,0xee);
  }
  *(undefined8 *)(this + 0x1268) = 0;
  return;
}



// IGAccelGLContext::process_token_BindReadFBO(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_BindReadFBO(IGAccelGLContext *this,long param_1)

{
  uint uVar1;
  long lVar2;
  char cVar3;
  undefined8 uVar4;
  uint uVar5;
  IOAccelShared2 *local_30;
  
  lVar2 = *(long *)(param_1 + 0x18);
  uVar5 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar2 + 0x10U) {
    IOAccelContext2::setContextError(uVar5);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else {
    uVar1 = *(uint *)(lVar2 + 8);
    if (*(char *)(param_1 + 0x3c) == '\0') {
      if (uVar1 != 0) {
        local_30 = (IOAccelShared2 *)0x0;
        cVar3 = IOAccelContext2::lookupResource(uVar5,(void **)(ulong)uVar1);
        if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(local_30);
        }
      }
      if (*(uint *)(lVar2 + 0xc) != 0) {
        local_30 = (IOAccelShared2 *)0x0;
        cVar3 = IOAccelContext2::lookupResource(uVar5,(void **)(ulong)*(uint *)(lVar2 + 0xc));
        if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease(local_30);
        }
      }
    }
    else {
      if (*(long *)(*(long *)(this + 0x5b8) + 0x580) != 0) {
        unbind_texture((long *)this,param_1,0xb0);
      }
      if (uVar1 != 0) {
        local_30 = (IOAccelShared2 *)0x0;
        uVar4 = bind_texture(this,param_1,uVar1,0xb0,'\0',(long *)&local_30);
        if ((char)uVar4 == '\0') {
          unbind_texture((long *)this,param_1,0xb0);
        }
      }
      uVar5 = *(uint *)(lVar2 + 0xc);
      if (*(long *)(*(long *)(this + 0x5b8) + 0x588) != 0) {
        unbind_texture((long *)this,param_1,0xb1);
      }
      if (uVar5 != 0) {
        local_30 = (IOAccelShared2 *)0x0;
        uVar4 = bind_texture(this,param_1,uVar5,0xb1,'\0',(long *)&local_30);
        if ((char)uVar4 == '\0') {
          unbind_texture((long *)this,param_1,0xb1);
        }
      }
    }
  }
  return;
}



// IGAccelGLContext::process_token_UnbindReadFBO(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_UnbindReadFBO(IGAccelGLContext *this,undefined8 param_1)

{
  long lVar1;
  
  lVar1 = 0xb0;
  do {
    if (*(long *)(*(long *)(this + 0x5b8) + lVar1 * 8) != 0) {
      unbind_texture((long *)this,param_1,(uint)lVar1);
    }
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0xb2);
  return;
}



// IGAccelGLContext::process_token_BindColorBuffers(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindColorBuffers
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  IGAccelGLContext *pIVar1;
  undefined4 *puVar2;
  ushort uVar3;
  long lVar4;
  IntelAccelerator *pIVar5;
  long *plVar6;
  void *this_00;
  IGAccelResource *pIVar7;
  IGAccelGLContext IVar8;
  bool bVar9;
  char cVar10;
  int iVar11;
  long lVar12;
  undefined8 uVar13;
  long lVar14;
  IGAccelTask *pIVar15;
  byte bVar16;
  ulong uVar17;
  ulong uVar18;
  ulong uVar19;
  ulong uVar20;
  uint uVar21;
  char *pcVar22;
  uint uVar23;
  IGAccelGLContext *pIVar24;
  IGAccelGLContext *pIVar25;
  char *in_R9;
  ulong *puVar26;
  ulong uVar27;
  undefined8 extraout_XMM0_Qa;
  IOAccelShared2 *local_a8;
  ulong local_a0;
  undefined8 local_98;
  undefined8 local_90;
  IGAccelResource *local_88;
  long local_80;
  IGVector<> *local_78;
  char *local_70;
  IGAccelResource *local_68;
  char *local_60;
  ulong local_58;
  IGAccelResource *local_50;
  long local_48;
  int local_40;
  int local_3c;
  IGAccelGLContext *local_38;
  
  lVar4 = *(long *)(param_10 + 0x18);
  if (*(ulong *)((long)this + 0x628) < lVar4 + 0x70U) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)(param_10 + 0x3c) = 0;
  }
  else {
    uVar3 = *(ushort *)(lVar4 + 8);
    uVar27 = (ulong)uVar3;
    if (0xff < uVar3) {
      IOAccelContext2::setContextError((uint)this);
      return;
    }
    local_38 = this;
    if (*(char *)(param_10 + 0x3c) == '\0') {
      if (uVar3 != 0) {
        uVar20 = 0;
        do {
          if ((uVar27 & 1) != 0) {
            uVar23 = *(uint *)(lVar4 + 0x18 + uVar20 * 0xc);
            if (uVar23 != 0) {
              local_a8 = (IOAccelShared2 *)0x0;
              cVar10 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)uVar23);
              this = local_38;
              if ((cVar10 != '\0') && (*(long *)((long)local_38 + 0x630) == 0)) {
                IOAccelResource2::clientRelease(local_a8);
                this = local_38;
              }
            }
            uVar20 = (ulong)((int)uVar20 + 1);
          }
          uVar23 = (uint)uVar27;
          uVar27 = uVar27 >> 1;
        } while (1 < uVar23);
      }
    }
    else {
      if (*(long *)(*(long *)((long)this + 0x5b8) + 0x778) != 0) {
        unbind_texture(this,param_10,0xef);
      }
      if (uVar3 != 0) {
        local_80 = lVar4 + 0x10;
        pIVar25 = local_38 + 0x5d0;
        pIVar1 = local_38 + 0x12f8;
        local_78 = (IGVector<> *)(local_38 + 0x12e0);
        local_68 = (IGAccelResource *)0x0;
        uVar20 = 0;
        pIVar24 = local_38;
        local_48 = param_10;
        do {
          if ((uVar27 & 1) != 0) {
            local_40 = (int)uVar20;
            uVar17 = (ulong)*(uint *)(local_80 + 4 + uVar20 * 0xc);
            if ((uVar17 <= *(ulong *)(pIVar24 + 0x12b0)) &&
               (*(long **)(pIVar24 + 0x12a8) != (long *)0x0)) {
              lVar12 = (**(code **)(**(long **)(pIVar24 + 0x12a8) + 0x118))();
              pIVar24 = local_38;
              puVar26 = (ulong *)(lVar12 + uVar17);
              if (puVar26 != (ulong *)0x0) {
                if (*(long *)(local_38 + 0x10d8) == 0) {
                  *(long *)(local_38 + 0x1268) = 0;
                  pIVar15 = (IGAccelTask *)(**(code **)(*(long *)local_38 + 0x968))(local_38);
                  uVar20 = IGAccelTask::getScratchGPUVirtualAddress(pIVar15);
                  pIVar24 = local_38;
LAB_000622f6:
                  puVar26[4] = uVar20;
                  *(byte *)((long)puVar26 + 0x16) = *(byte *)((long)puVar26 + 0x16) & 0xf3;
                  *puVar26 = *puVar26 & 0xffffffffffffcfff | 0x3000;
                  puVar26[1] = puVar26[1] & 0xfffc0000c000c000 | 0x8000010001;
                }
                else {
                  puVar2 = (undefined4 *)(local_80 + uVar20 * 0xc);
                  *(short *)(local_38 + 0x1238) = (short)*puVar2;
                  iVar11 = IOAccelSurface::convertGLIndexToBufferIndex(*(long *)(local_38 + 0x5c0));
                  local_88 = (IGAccelResource *)0x0;
                  local_90 = 0;
                  local_98 = 0;
                  local_a0 = 0;
                  local_a8 = (IOAccelShared2 *)0x0;
                  getSurfaceBufferInfo(&local_a8,(long)pIVar24,iVar11);
                  pIVar24 = local_38;
                  pIVar7 = local_88;
                  uVar20 = local_a0;
                  if (((char)local_a8 == '\0') || (local_88 == (IGAccelResource *)0x0)) {
                    *(undefined8 *)(local_38 + 0x1268) = 0;
                    pIVar15 = (IGAccelTask *)(**(code **)(*(long *)local_38 + 0x968))(local_38);
                    uVar20 = IGAccelTask::getScratchGPUVirtualAddress(pIVar15);
                    goto LAB_000622f6;
                  }
                  local_50 = (IGAccelResource *)0x0;
                  uVar23 = puVar2[2];
                  if (uVar23 != 0) {
                    uVar13 = bind_texture(local_38,local_48,uVar23,0xef,'\x01',(long *)&local_50);
                    if ((char)uVar13 == '\0') {
                      if ((local_50 != (IGAccelResource *)0x0) &&
                         (((byte)local_50[0xe] & 0x10) == 0)) {
                        *(undefined1 *)(local_48 + 0x3c) = 0;
                        local_38[0x63b] = (IGAccelGLContext)((byte)local_38[0x63b] | 4);
                        return;
                      }
                      uVar23 = (uint)local_38;
                      goto LAB_0006287b;
                    }
                    (**(code **)(*(long *)local_50 + 0x168))(local_50,0,0);
                  }
                  local_60 = (char *)IOAccelResource2::getStorageResource();
                  lVar12 = local_48;
                  if (local_50 == (IGAccelResource *)0x0) {
                    if (*(int *)(local_60 + 0x1c0) != 0) goto LAB_0006236b;
                  }
                  else if (*(ushort *)(local_60 + 0x196) < 2) {
LAB_0006236b:
                    pcVar22 = local_60 + 0x180;
                    uVar23 = (uint)*puVar26 >> 0x12 & 0x3ff;
                    if (((local_60[0x220] == 1) || (*(uint *)(local_60 + 0x1cc) == uVar23)) &&
                       ((*(byte *)(lVar4 + 0xc) & 2) == 0)) {
                      uVar21 = (uint)puVar26[3] & 7;
                      if (uVar21 == 1) {
                        bVar16 = 0xc;
                        cVar10 = '\x02';
LAB_000624d9:
                        local_60[0x220] = cVar10;
                        local_60[0x221] = local_60[0x221] | bVar16;
                        *(uint *)(local_60 + 0x1cc) = uVar23;
                      }
                      else if (uVar21 == 5) {
                        bVar16 = 8;
                        cVar10 = '\x03';
                        goto LAB_000624d9;
                      }
                      **(ushort **)(local_60 + 0x1d8) = **(ushort **)(local_60 + 0x1d8) | 1;
                      **(ushort **)(local_60 + 0x1e0) = **(ushort **)(local_60 + 0x1e0) & 0xfffe;
                      if (local_50 != (IGAccelResource *)0x0) {
                        local_58 = 0;
                        local_3c = 0;
                        IGAccelResource::get_tex_data(local_50,(long *)&local_58,&local_3c);
                        puVar26[5] = (ulong)((uint)puVar26[5] & 0xfff) |
                                     local_58 & 0xfffffffffffff000;
                        *(uint *)(puVar26 + 3) =
                             (local_3c + 0x7fU >> 4) + 0xff8 & 0xff8 | (uint)puVar26[3] & 0xfffff000
                             | uVar21;
                        goto LAB_00062579;
                      }
                    }
                    else {
                      local_70 = pcVar22;
                      if (1 < (byte)local_60[0x220]) {
                        (**(code **)(*(long *)local_38 + 0xa38))(local_38,local_48);
                        pIVar5 = *(IntelAccelerator **)(local_38 + 0x5a8);
                        pIVar15 = (IGAccelTask *)(**(code **)(*(long *)local_38 + 0x968))(local_38);
                        IGAccelResource::submitCCSResolve
                                  (pIVar7,(long)local_70,pIVar5,pIVar15,(long)pIVar25,3,local_50);
                        local_60[0x220] = '\x01';
                        local_60[0x221] = local_60[0x221] & 0xfb;
                        (**(code **)(*(long *)local_38 + 0xa30))(local_38,lVar12);
                        plVar6 = *(long **)(*(long *)(local_38 + 0x5a8) + 0x380);
                        lVar12 = IOAccelResource2::getStorageResource();
                        IVar8 = (IGAccelGLContext)
                                (**(code **)(*plVar6 + 0x1c8))
                                          (plVar6,(ulong)*(byte *)(lVar12 + 0x16) * 0x40 +
                                                  *(long *)(lVar12 + 0x38),pIVar1,
                                           *(undefined4 *)(*(long *)(local_38 + 0x12c0) + 0x20));
                        local_38[0x1338] = IVar8;
                      }
                      pcVar22 = local_70;
                      if (local_50 != (IGAccelResource *)0x0) {
                        puVar26[5] = puVar26[5] & 0xfff;
                        *(uint *)(puVar26 + 3) = (uint)puVar26[3] & 0xfffff000;
                        goto LAB_00062579;
                      }
                    }
                    IGAccelResource::fillSurfaceStateAuxInfo(pIVar7,(long)pcVar22,(long)puVar26,1);
                  }
                  else {
                    local_58 = 0;
                    local_3c = 0;
                    IGAccelResource::get_tex_data(local_50,(long *)&local_58,&local_3c);
                    puVar26[5] = (ulong)((uint)puVar26[5] & 0xfff) | local_58 & 0xfffffffffffff000;
                    *(uint *)(puVar26 + 3) =
                         ((uint)puVar26[3] & 0xfffff000) + ((local_3c + 0x7fU >> 4) + 0xff8 & 0xff8)
                         + 1;
                  }
LAB_00062579:
                  pIVar24 = local_38;
                  bVar9 = IGAccelDisplayMachine::needsFlipWait
                                    (*(IGAccelDisplayMachine **)
                                      (*(long *)(local_38 + 0x5a8) + 0x378),(long)pIVar7);
                  if (bVar9) {
                    local_68 = pIVar7;
                  }
                  uVar17 = *(ulong *)(pIVar24 + 0x12e0);
                  if (uVar17 == 0) {
LAB_000625d8:
                    if (uVar17 == *(ulong *)(pIVar24 + 0x12e8)) {
                      uVar13 = IGVector<>::grow(local_78,uVar17 * 2);
                      pIVar24 = local_38;
                      if ((char)uVar13 == '\0') goto LAB_00062612;
                      uVar17 = *(ulong *)local_78;
                    }
                    *(ulong *)(pIVar24 + 0x12e0) = uVar17 + 1;
                    *(IGAccelResource **)(*(long *)(pIVar24 + 0x12f0) + uVar17 * 8) = pIVar7;
                  }
                  else if ((IGAccelResource *)**(long **)(pIVar24 + 0x12f0) != pIVar7) {
                    uVar18 = 1;
                    do {
                      uVar19 = uVar18;
                      if (uVar17 == uVar19) break;
                      uVar18 = uVar19 + 1;
                    } while ((IGAccelResource *)(*(long **)(pIVar24 + 0x12f0))[uVar19] != pIVar7);
                    if (uVar17 <= uVar19) goto LAB_000625d8;
                  }
LAB_00062612:
                  *(uint *)(pIVar24 + 0x1268) = (uint)*(ushort *)(pIVar7 + 0xb0);
                  *(uint *)(pIVar24 + 0x126c) = (uint)*(ushort *)(pIVar7 + 0xb2);
                  puVar26[4] = uVar20;
                  lVar12 = *(long *)(pIVar7 + 0xb8);
                  if (lVar12 == 0) {
                    lVar12 = *(long *)(pIVar7 + 0xc0);
                  }
                  uVar20 = *puVar26;
                  uVar18 = (ulong)((int)lVar12 - 1U & 0x3ffff) << 0x20;
                  uVar17 = puVar26[1];
                  puVar26[1] = uVar17 & 0xfffc0000ffffffff | uVar18;
                  uVar19 = (ulong)(*(int *)(pIVar24 + 0x1268) - 1U & 0x3fff);
                  puVar26[1] = uVar17 & 0xfffc0000ffffc000 | uVar18 | uVar19;
                  uVar17 = uVar17 & 0xfffc0000c000c000 | uVar18 | uVar19 |
                           (ulong)(*(int *)(pIVar24 + 0x126c) - 1U & 0x3fff) << 0x10;
                  puVar26[1] = uVar17;
                  uVar18 = (ulong)(*(uint *)(local_60 + 0x18c) & 0x7fff) << 0x20;
                  puVar26[1] = uVar17;
                  *puVar26 = uVar20 & 0xffff8000ffffffff | uVar18;
                  uVar3 = *(ushort *)(local_60 + 0x194);
                  puVar26[1] = uVar17;
                  *puVar26 = uVar20 & 0xffff8000ffffcfff | uVar18 | (ulong)((uVar3 & 3) << 0xc);
                  *(ulong *)((long)puVar26 + 0x14) =
                       *(ulong *)((long)puVar26 + 0x14) & 0xfffffffffff3ffff |
                       (ulong)((uVar3 & 0xc) << 0x10);
                  in_R9 = local_60;
                  if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(uVar20 >> 0x38) & 0x7e))
                      & 0x30) != 0) {
                    lVar12 = *(long *)(&DAT_00001290 + *(long *)(pIVar24 + 0x5a8));
                    lVar14 = IOAccelResource2::getStorageResource();
                    uVar20 = *(ulong *)(lVar14 + 200 + (ulong)(*(long *)(lVar14 + 0x88) == 0) * 8);
                    if (*(ulong *)(lVar12 + 0x108) * 2 < uVar20) {
                      uVar17 = puVar26[1];
                      uVar18 = *puVar26 & 0x81ffffffffffffff;
                      uVar20 = 0x3200000000000000;
                    }
                    else {
                      uVar18 = *puVar26 & 0x81ffffffffffffff;
                      uVar17 = puVar26[1];
                      if (*(ulong *)(lVar12 + 0x108) >> 1 < uVar20) {
                        uVar20 = 0x3000000000000000;
                      }
                      else {
                        uVar20 = 0x2400000000000000;
                      }
                    }
                    *puVar26 = uVar18 | uVar20;
                    puVar26[1] = uVar17;
                    pIVar24 = local_38;
                  }
                }
                uVar20 = (ulong)(local_40 + 1);
                param_10 = local_48;
                goto LAB_00062347;
              }
            }
            uVar23 = (uint)pIVar24;
LAB_0006287b:
            IOAccelContext2::setContextError(uVar23);
            return;
          }
LAB_00062347:
          pIVar7 = local_68;
          uVar23 = (uint)uVar27;
          uVar27 = uVar27 >> 1;
        } while (1 < uVar23);
        if (local_68 != (IGAccelResource *)0x0) {
          pIVar25 = pIVar24;
          (**(code **)(*(long *)pIVar24 + 0xa38))(pIVar24,param_10);
          this_00 = *(void **)(pIVar24 + 0x5a8);
          lVar4 = *(long *)(pIVar24 + 0x5c0);
          pIVar15 = (IGAccelTask *)(**(code **)(*(long *)pIVar24 + 0x968))(pIVar24);
          IntelAccelerator::submitPendingWaitIfNeeded
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     this_00,lVar4,(long)pIVar7,pIVar15,(char *)pIVar25,in_R9);
          (**(code **)(*(long *)pIVar24 + 0xa30))(pIVar24,param_10);
        }
      }
    }
  }
  return;
}



// IGAccelGLContext::process_token_BindDepthBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindDepthBuffer(IGAccelGLContext *this,long *param_1)

{
  byte bVar1;
  int iVar2;
  ulong *puVar3;
  uint uVar4;
  long lVar5;
  ulong uVar6;
  int iVar7;
  undefined8 uVar8;
  ulong uVar9;
  long lVar10;
  long lVar11;
  IGAccelTask *this_00;
  ulong uVar12;
  undefined8 local_68;
  ulong local_60;
  undefined8 local_58;
  undefined8 local_50;
  long local_48;
  undefined4 local_3c;
  ulong local_38;
  
  lVar11 = param_1[3];
  if (*(ulong *)(this + 0x628) < lVar11 + 0x18U) {
LAB_00062a61:
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar3 = (ulong *)*param_1;
  if (((long)puVar3 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar3 - param_1[1]) >> 2)) < 8))
  goto LAB_00062a61;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if (puVar3 == (ulong *)0x0) {
      return;
    }
    lVar11 = 0;
    do {
      *(undefined4 *)((long)puVar3 + lVar11 * 4) = 0;
      lVar11 = lVar11 + 1;
    } while (lVar11 != 8);
    return;
  }
  if (*(long *)(this + 0x10d8) != 0) {
    *(short *)(this + 0x123a) = (short)*(undefined4 *)(lVar11 + 8);
    iVar7 = IOAccelSurface::convertGLIndexToBufferIndex(*(undefined8 *)(this + 0x5c0));
    local_48 = 0;
    local_50 = 0;
    local_58 = 0;
    local_60 = 0;
    local_68 = 0;
    getSurfaceBufferInfo(&local_68,(long)this,iVar7);
    if ((char)local_68 != '\0') {
      local_38 = local_60;
      uVar9 = *(ulong *)(this + 0x12e0);
      if (uVar9 == 0) {
LAB_00062a1b:
        if (uVar9 == *(ulong *)(this + 0x12e8)) {
          uVar8 = IGVector<>::grow((IGVector<> *)(this + 0x12e0),uVar9 * 2);
          if ((char)uVar8 == '\0') goto LAB_00062aad;
          uVar9 = *(ulong *)(this + 0x12e0);
        }
        *(ulong *)(this + 0x12e0) = uVar9 + 1;
        *(long *)(*(long *)(this + 0x12f0) + uVar9 * 8) = local_48;
      }
      else if (**(long **)(this + 0x12f0) != local_48) {
        uVar6 = 1;
        do {
          uVar12 = uVar6;
          if (uVar9 == uVar12) break;
          uVar6 = uVar12 + 1;
        } while ((*(long **)(this + 0x12f0))[uVar12] != local_48);
        if (uVar9 <= uVar12) goto LAB_00062a1b;
      }
LAB_00062aad:
      lVar5 = local_48;
      lVar10 = IOAccelResource2::getStorageResource();
      **(ushort **)(lVar10 + 0x1d8) = **(ushort **)(lVar10 + 0x1d8) | 1;
      **(ushort **)(lVar10 + 0x1e0) = **(ushort **)(lVar10 + 0x1e0) & 0xfffe;
      *(uint *)(this + 0x1268) = (uint)*(ushort *)(lVar5 + 0xb0);
      *(uint *)(this + 0x126c) = (uint)*(ushort *)(lVar5 + 0xb2);
      lVar10 = *(long *)(lVar5 + 0xb8);
      if (lVar10 == 0) {
        lVar10 = *(long *)(lVar5 + 0xc0);
      }
      iVar7 = (int)lVar10;
      uVar9 = local_38;
      goto LAB_00062afe;
    }
  }
  *(undefined8 *)(this + 0x1268) = 0;
  uVar9 = 0;
  iVar7 = 0;
LAB_00062afe:
  if (*(long *)(this + 0x5c0) == 0) {
    this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
    local_38 = IGAccelTask::getScratchGPUVirtualAddress(this_00);
    puVar3[2] = puVar3[2] & 0x3ff00000000 | 0xc0070;
    *(ushort *)((long)puVar3 + 0x1e) = *(ushort *)((long)puVar3 + 0x1e) & 0x1f;
    iVar7 = 0x80;
  }
  else {
    local_38 = uVar9;
    if ((*puVar3 & 0x40000000000000) != 0) {
      local_3c = *(undefined4 *)(lVar11 + 0x14);
      iVar2 = *(int *)(lVar11 + 0x10);
      lVar11 = IOAccelResource2::getStorageResource();
      bVar1 = *(byte *)(lVar11 + 0x221);
      *(byte *)(lVar11 + 0x221) = bVar1 | 0x11;
      if (iVar2 != 0) {
        *(byte *)(lVar11 + 0x221) = bVar1 | 0x13;
        *(undefined4 *)(lVar11 + 0x21c) = local_3c;
      }
    }
  }
  uVar4 = iVar7 - 1U;
  if (0x3fffe < iVar7 - 1U) {
    uVar4 = 0x3ffff;
  }
  puVar3[1] = local_38 & 0xffffffffffff | (ulong)*(ushort *)((long)puVar3 + 0xe) << 0x30;
  *puVar3 = *puVar3 & 0xfffc0000ffffffff | (ulong)(uVar4 & 0x1ffff) << 0x20;
  return;
}



// IGAccelGLContext::process_token_GenerateMipmaps(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_GenerateMipmaps
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  IGAccelResource IVar1;
  ushort uVar2;
  ushort uVar3;
  int iVar4;
  long lVar5;
  uint *puVar6;
  uint *puVar7;
  IntelAccelerator *pIVar8;
  long *plVar9;
  IGMappedBuffer *this_00;
  IGAccelResource *pIVar10;
  char cVar11;
  byte bVar12;
  undefined1 uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  undefined8 uVar17;
  IGAccelResource *pIVar18;
  long lVar19;
  long lVar20;
  IGAccelTask *pIVar21;
  IGMappedBuffer *pIVar22;
  uint uVar23;
  ulong uVar24;
  long *plVar25;
  char *pcVar26;
  ulong uVar27;
  ushort *puVar28;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  float fVar29;
  undefined4 uVar30;
  float fVar31;
  undefined4 uVar32;
  float fVar33;
  undefined4 uVar34;
  IOAccelShared2 *local_1e0;
  undefined8 local_1d8;
  undefined4 local_1d0;
  uint uStack_1cc;
  uint local_1c8 [10];
  IGAccelResource *local_1a0;
  long local_198;
  undefined8 local_190;
  undefined4 local_188;
  uint uStack_184;
  uint local_180;
  undefined4 uStack_17c;
  undefined8 local_178;
  undefined8 local_170;
  undefined8 local_168;
  undefined8 local_160;
  IGAccelResource *local_158;
  undefined8 local_150;
  undefined8 local_148;
  undefined1 local_140;
  uint local_13e;
  undefined4 local_138;
  undefined8 local_130;
  undefined1 local_128;
  undefined8 local_120;
  ulong local_118;
  long local_110;
  undefined8 local_108;
  ulong local_100;
  long local_f8;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  ulong local_a8;
  ulong local_a0;
  long local_98;
  ulong local_90;
  ulong local_88;
  float *local_80;
  IGMappedBuffer *local_78;
  ulong local_70;
  long *local_68;
  IGMappedBuffer *local_60;
  uint local_54;
  long local_50;
  uint local_44;
  uint local_40;
  uint local_3c;
  IGAccelResource *local_38;
  
  uVar34 = (undefined4)((ulong)param_4 >> 0x20);
  uVar32 = (undefined4)((ulong)param_3 >> 0x20);
  lVar19 = *(long *)(param_10 + 0x18);
  uVar14 = (uint)this;
  if (*(ulong *)((long)this + 0x628) < lVar19 + 0x1cU) {
    IOAccelContext2::setContextError(uVar14);
    *(undefined1 *)(param_10 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_10 + 0x3c) == '\0') {
    local_1e0 = (IOAccelShared2 *)0x0;
    cVar11 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar19 + 8));
    if (cVar11 == '\0') {
      return;
    }
    if (*(long *)((long)this + 0x630) != 0) {
      return;
    }
    IOAccelResource2::clientRelease(local_1e0);
    return;
  }
  uVar16 = *(uint *)(lVar19 + 0xc);
  local_a0 = (ulong)*(uint *)(lVar19 + 0x10);
  uVar15 = *(uint *)(lVar19 + 0x14);
  iVar4 = *(int *)(lVar19 + 0x18);
  local_38 = (IGAccelResource *)0x0;
  cVar11 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar19 + 8));
  if (((cVar11 == '\0') || (local_38 == (IGAccelResource *)0x0)) || ((byte)local_38[0xac] <= uVar16)
     ) {
    IOAccelContext2::setContextError(uVar14);
    return;
  }
  pcVar26 = (char *)((long)&MACH_HEADER.magic + 1);
  cVar11 = (**(code **)(*(long *)this + 0xa40))
                     (this,param_10,local_38,1,*(undefined8 *)((long)this + 0x12c0),1,1);
  if (cVar11 == '\0') {
    if ((local_38 == (IGAccelResource *)0x0) || (((byte)local_38[0xe] & 0x10) != 0)) {
      IOAccelContext2::setContextError(uVar14);
    }
    else {
      *(undefined1 *)(param_10 + 0x3c) = 0;
      *(byte *)((long)this + 0x63b) = *(byte *)((long)this + 0x63b) | 4;
    }
    streamErrorCleanup(this,param_10,(IOAccelShared2 *)local_38);
    return;
  }
  local_80 = (float *)0x0;
  local_88 = 0;
  local_90 = 0;
  local_68 = this;
  local_50 = param_10;
  local_44 = uVar16;
  uVar17 = IGVector<>::grow((IGVector<> *)&local_90,1);
  if ((char)uVar17 != '\0') {
    local_90 = 1;
  }
  ___bzero(&local_1e0,0x138);
  IGVector<>::grow((IGVector<> *)&local_120,4);
  local_108 = 0;
  local_100 = 0;
  local_f8 = 0;
  IGVector<>::grow((IGVector<> *)&local_108,4);
  pIVar10 = local_38;
  local_1e0 = (IOAccelShared2 *)0x0;
  local_1d8 = 0;
  local_1d0 = 0;
  uStack_1cc = 0;
  local_1c8[0] = 0;
  local_1c8[1] = 0;
  local_1c8[2] = 0;
  local_1c8[3] = 0;
  local_1c8[4] = 0;
  local_1c8[5] = 0;
  local_1c8[6] = 0;
  local_1c8[7] = 0;
  local_1a0 = (IGAccelResource *)0x0;
  local_1c8[8] = 0;
  local_1c8[9] = 1;
  local_198 = 0;
  local_190 = 0;
  local_188 = 0;
  uStack_184 = 0;
  local_180 = 0;
  uStack_17c = 0;
  local_178 = 0;
  local_170 = 0;
  local_168 = 0;
  local_158 = (IGAccelResource *)0x0;
  local_160 = 0x100000000;
  local_150 = 0;
  local_148 = 0;
  local_13e = 0;
  local_140 = 0;
  local_138 = 0;
  local_130 = 0;
  local_128 = 0;
  local_120 = 0;
  local_108 = 0;
  local_d8 = 0;
  local_d0 = 0;
  local_c8 = 0;
  local_c0 = 0;
  local_b8 = 0;
  local_b0 = 0;
  AddDstResourceEvents((IGVector<> *)&local_120,(long)local_38);
  pIVar18 = (IGAccelResource *)IOAccelResource2::getStorageResource();
  if (pIVar18 != pIVar10) {
    AddDstResourceEvents((IGVector<> *)&local_120,(long)pIVar18);
  }
  lVar19 = IOAccelResource2::getStorageResource();
  local_1d8._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_1d8);
  lVar19 = IOAccelResource2::getStorageResource();
  local_1d8 = CONCAT26(*(undefined2 *)(lVar19 + 400),(undefined6)local_1d8);
  uStack_1cc = 0;
  local_1c8[0] = 0;
  local_1d8 = local_1d8 & 0xffffffff00000000;
  local_1e0 = (IOAccelShared2 *)0x0;
  lVar19 = IOAccelResource2::getStorageResource();
  local_190._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_190);
  lVar19 = IOAccelResource2::getStorageResource();
  local_190 = CONCAT26(*(undefined2 *)(lVar19 + 400),(undefined6)local_190);
  uStack_184 = 0;
  local_180 = 0;
  local_190 = local_190 & 0xffffffff00000000;
  local_198 = 0;
  local_140 = 0;
  local_13e = local_13e & 0xffffffe0 | 0x19;
  uStack_1cc = (uint)*(ushort *)(local_38 + 0xb0);
  local_1c8[0] = (uint)*(ushort *)(local_38 + 0xb2);
  IGAccelResource::getBufferWidthHeight(local_38,&uStack_1cc,local_1c8,(uint)local_1d8._6_2_);
  plVar25 = local_68;
  local_54 = uStack_1cc;
  local_40 = local_1c8[0];
  if ((iVar4 == 0) ||
     (uVar2 = *(ushort *)(local_38 + 0xb0),
     (uint)(POPCOUNT((uint)*(ushort *)(local_38 + 0xb4)) |
           POPCOUNT((uint)*(ushort *)(local_38 + 0xb2)) | POPCOUNT((uint)uVar2)) < 2)) {
    local_70 = 0;
    local_78 = (IGMappedBuffer *)0x0;
    local_60 = (IGMappedBuffer *)0x0;
  }
  else {
    lVar19 = IOAccelResource2::getStorageResource();
    uVar3 = *(ushort *)(lVar19 + 0x194);
    lVar19 = IOAccelResource2::getStorageResource();
    uVar14 = alignTileWidthFromFormat((uint)uVar2,(uint)uVar3,(ulong)*(uint *)(lVar19 + 400));
    uVar2 = *(ushort *)(local_38 + 0xb2);
    lVar19 = IOAccelResource2::getStorageResource();
    uVar3 = *(ushort *)(lVar19 + 0x194);
    lVar19 = IOAccelResource2::getStorageResource();
    uVar16 = alignTileHeightFromFormat((uint)uVar2,(uint)uVar3,(ulong)*(uint *)(lVar19 + 400));
    uVar27 = (ulong)((uint)(byte)local_38[0xd8] * uVar16 * uVar14) + 0xfff & 0xfffffffffffff000;
    local_3c = uVar14;
    lVar19 = (**(code **)(*plVar25 + 0x968))(plVar25);
    local_70 = 0;
    pIVar22 = IGMappedBuffer::withOptions(lVar19,uVar27,0,0);
    lVar19 = (**(code **)(*plVar25 + 0x968))(plVar25);
    local_60 = IGMappedBuffer::withOptions(lVar19,uVar27,0,0);
    local_78 = pIVar22;
    if (pIVar22 != (IGMappedBuffer *)0x0) {
      if (local_60 == (IGMappedBuffer *)0x0) {
        local_3c = 0;
      }
      else {
        local_3c = local_3c * (byte)local_38[0xd8];
        local_70 = 1;
      }
      goto LAB_00062f25;
    }
  }
  local_3c = 0;
LAB_00062f25:
  uVar14 = local_44;
  lVar19 = local_50;
  (**(code **)(*plVar25 + 0xa38))(plVar25);
  bVar12 = (char)local_38[0xad] - 1;
  uVar27 = 0;
  if (local_38[0xad] == (IGAccelResource)0x0) {
    bVar12 = 0;
  }
  uVar16 = (uint)bVar12;
  if (uVar15 < bVar12) {
    uVar16 = uVar15;
  }
  uVar15 = (uint)local_a0;
  if (uVar15 < uVar16) {
    uVar14 = ((uVar16 - uVar15) + 1) * uVar14 + uVar15;
    uVar27 = 0;
    do {
      pIVar10 = local_38;
      lVar5 = *(long *)(local_38 + 0x260);
      uVar24 = (ulong)uVar14;
      puVar6 = *(uint **)(lVar5 + 0x20 + uVar24 * 0x28);
      plVar25 = local_68;
      lVar19 = local_50;
      if (puVar6 == (uint *)0x0) break;
      local_98 = (ulong)(uVar14 + 1) * 5;
      puVar7 = *(uint **)(lVar5 + 0x20 + (ulong)(uVar14 + 1) * 0x28);
      local_a8 = uVar27;
      if (puVar7 == (uint *)0x0) break;
      puVar28 = (ushort *)(uVar24 * 0x28 + 0x10 + lVar5);
      local_70 = local_70 & 0xff;
      if ((ushort)((ushort)POPCOUNT((uint)puVar28[4]) |
                  (ushort)POPCOUNT((uint)puVar28[1]) | (ushort)POPCOUNT((uint)*puVar28)) < 2) {
        local_70 = 0;
      }
      local_a0 = (ulong)(uVar15 + 1);
      if ((local_70 & 1) == 0) {
        local_130 = 0;
        local_13e = local_13e & 0xfffffff8 | 1;
        lVar19 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
        uVar15 = local_40;
        IVar1 = pIVar10[0x14];
        if (IVar1 == (IGAccelResource)0x0) {
LAB_0006306a:
          uVar27 = *(ulong *)(pIVar10 + 0xf8);
        }
        else if (IVar1 == (IGAccelResource)0x82) {
          uVar27 = (ulong)*(uint *)(pIVar10 + 0xfc);
        }
        else {
          if (IVar1 == (IGAccelResource)0x80) goto LAB_0006306a;
          uVar27 = 0;
        }
        local_1e0 = (IOAccelShared2 *)
                    ((ulong)*(uint *)(lVar5 + 4 + uVar24 * 0x28) + uVar27 + lVar19);
        local_1d8 = CONCAT44(local_1d8._4_4_,*(undefined4 *)(lVar5 + 0xc + uVar24 * 0x28));
        lVar19 = IOAccelResource2::getStorageResource();
        local_1d8._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_1d8);
        local_1a0 = local_38;
        uVar23 = puVar6[1];
        uVar2 = *puVar28;
        uVar3 = puVar28[1];
        *local_80 = (float)*puVar6;
        local_80[1] = (float)uVar23;
        local_80[2] = (float)uVar2;
        local_80[3] = (float)uVar3;
        uStack_1cc = local_54;
        local_1c8[0] = uVar15;
        uVar27 = local_a8;
      }
      else {
        lVar19 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
        IVar1 = pIVar10[0x14];
        if (IVar1 == (IGAccelResource)0x0) {
LAB_000630a1:
          uVar27 = *(ulong *)(pIVar10 + 0xf8);
        }
        else if (IVar1 == (IGAccelResource)0x82) {
          uVar27 = (ulong)*(uint *)(pIVar10 + 0xfc);
        }
        else {
          if (IVar1 == (IGAccelResource)0x80) goto LAB_000630a1;
          uVar27 = 0;
        }
        local_1e0 = (IOAccelShared2 *)
                    ((ulong)*(uint *)(lVar5 + 4 + uVar24 * 0x28) + uVar27 + lVar19);
        local_1d8 = CONCAT44(local_1d8._4_4_,*(undefined4 *)(lVar5 + 0xc + uVar24 * 0x28));
        uStack_1cc = local_54;
        local_1c8[0] = local_40;
        lVar19 = IOAccelResource2::getStorageResource();
        pIVar22 = local_78;
        local_1d8._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_1d8);
        local_1d0 = 0x23;
        local_1a0 = local_38;
        uVar15 = puVar6[1];
        fVar31 = (float)*puVar28;
        fVar33 = (float)puVar28[1];
        *local_80 = (float)*puVar6;
        local_80[1] = (float)uVar15;
        local_80[2] = fVar31;
        local_80[3] = fVar33;
        local_198 = IGMappedBuffer::getGPUVirtualAddress(local_78);
        local_190 = CONCAT44(local_190._4_4_,local_3c);
        lVar19 = IOAccelResource2::getStorageResource();
        plVar25 = local_68;
        local_190._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_190);
        uStack_184 = (uint)*puVar28;
        local_180 = (uint)puVar28[1];
        local_188 = 5;
        local_158 = (IGAccelResource *)0x0;
        uVar30 = 0;
        fVar29 = (float)local_180;
        local_80[4] = 0.0;
        local_80[5] = 0.0;
        local_80[6] = (float)uStack_184;
        local_80[7] = fVar29;
        local_140 = *(undefined1 *)(lVar5 + 0x1a + local_98 * 8);
        local_130 = 0;
        local_13e = local_13e & 0xfffffff8;
        pIVar8 = (IntelAccelerator *)local_68[0xb5];
        pIVar21 = (IGAccelTask *)(**(code **)(*local_68 + 0x968))(local_68);
        IntelAccelerator::submitBlit
                  (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),CONCAT44(uVar30,fVar29),
                   CONCAT44(uVar32,fVar31),CONCAT44(uVar34,fVar33),param_5,param_6,param_7,param_8,
                   pIVar8,(long *)&local_1e0,&local_90,pIVar21,0,pcVar26);
        local_1e0 = (IOAccelShared2 *)IGMappedBuffer::getGPUVirtualAddress(pIVar22);
        uVar15 = local_3c;
        local_1d8 = CONCAT44(local_1d8._4_4_,local_3c);
        uStack_1cc = (uint)*puVar28;
        local_1c8[0] = (uint)puVar28[1];
        lVar19 = IOAccelResource2::getStorageResource();
        local_1d8._0_5_ = CONCAT14(*(undefined1 *)(lVar19 + 0x194),(undefined4)local_1d8);
        local_1d0 = 0x23;
        local_1a0 = (IGAccelResource *)0x0;
        uVar2 = *puVar28;
        uVar3 = puVar28[1];
        local_80[0] = 0.0;
        local_80[1] = 0.0;
        local_80[2] = (float)uVar2;
        local_80[3] = (float)uVar3;
        local_198 = IGMappedBuffer::getGPUVirtualAddress(local_60);
        local_190 = CONCAT44(local_190._4_4_,uVar15);
        lVar20 = IOAccelResource2::getStorageResource();
        lVar19 = local_98;
        local_190._0_5_ = CONCAT14(*(undefined1 *)(lVar20 + 0x194),(undefined4)local_190);
        uVar15 = (uint)*(ushort *)(lVar5 + 0x10 + local_98 * 8);
        uStack_184 = uVar15 * 2;
        uVar23 = (uint)*(ushort *)(lVar5 + 0x12 + local_98 * 8);
        local_180 = uVar23 * 2;
        local_188 = 5;
        local_158 = (IGAccelResource *)0x0;
        local_80[4] = 0.0;
        local_80[5] = 0.0;
        local_80[6] = (float)uStack_184;
        local_80[7] = (float)local_180;
        local_140 = *(undefined1 *)(lVar5 + 0x1a + local_98 * 8);
        uVar2 = *puVar28;
        uVar3 = puVar28[1];
        uVar30 = 0;
        fVar29 = (float)(int)((uint)uVar3 * (uint)uVar3 * 2);
        local_130 = CONCAT44((float)(int)((uint)uVar3 + uVar23 * -2) / fVar29,
                             (float)(int)((uint)uVar2 + uVar15 * -2) /
                             (float)(int)((uint)uVar2 * (uint)uVar2 * 2));
        local_13e = local_13e & 0xfffffff8 | 1;
        pIVar8 = (IntelAccelerator *)plVar25[0xb5];
        pIVar21 = (IGAccelTask *)(**(code **)(*plVar25 + 0x968))(plVar25);
        uVar15 = local_40;
        IntelAccelerator::submitBlit
                  (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),CONCAT44(uVar30,fVar29),
                   CONCAT44(uVar32,fVar31),CONCAT44(uVar34,fVar33),param_5,param_6,param_7,param_8,
                   pIVar8,(long *)&local_1e0,&local_90,pIVar21,0,pcVar26);
        local_130 = 0;
        local_13e = local_13e & 0xfffffff8 | 1;
        local_1e0 = (IOAccelShared2 *)IGMappedBuffer::getGPUVirtualAddress(local_60);
        local_1d8 = CONCAT44(local_1d8._4_4_,local_3c);
        lVar20 = IOAccelResource2::getStorageResource();
        local_1d8._0_5_ = CONCAT14(*(undefined1 *)(lVar20 + 0x194),(undefined4)local_1d8);
        uStack_1cc = (uint)*(ushort *)(lVar5 + 0x10 + lVar19 * 8) * 2;
        local_1c8[0] = (uint)*(ushort *)(lVar5 + 0x12 + lVar19 * 8) * 2;
        local_1a0 = (IGAccelResource *)0x0;
        local_80[0] = 0.0;
        local_80[1] = 0.0;
        local_80[2] = (float)uStack_1cc;
        local_80[3] = (float)local_1c8[0];
        uVar27 = CONCAT71((int7)((ulong)puVar28 >> 8),1);
      }
      pIVar10 = local_38;
      local_1d0 = 0x23;
      uStack_184 = local_54;
      local_180 = uVar15;
      lVar20 = (**(code **)(**(long **)(local_38 + 0x40) + 0x130))();
      lVar19 = local_98;
      IVar1 = pIVar10[0x14];
      if (IVar1 == (IGAccelResource)0x0) {
LAB_00063550:
        uVar24 = *(ulong *)(pIVar10 + 0xf8);
      }
      else if (IVar1 == (IGAccelResource)0x82) {
        uVar24 = (ulong)*(uint *)(pIVar10 + 0xfc);
      }
      else {
        if (IVar1 == (IGAccelResource)0x80) goto LAB_00063550;
        uVar24 = 0;
      }
      local_198 = (ulong)*(uint *)(lVar5 + 4 + local_98 * 8) + uVar24 + lVar20;
      local_190 = CONCAT44(local_190._4_4_,*(undefined4 *)(lVar5 + 0xc + local_98 * 8));
      lVar20 = IOAccelResource2::getStorageResource();
      plVar25 = local_68;
      local_190._0_5_ = CONCAT14(*(undefined1 *)(lVar20 + 0x194),(undefined4)local_190);
      local_188 = 5;
      local_158 = local_38;
      uVar30 = 0;
      fVar29 = (float)puVar7[1];
      uVar32 = 0;
      fVar31 = (float)*(ushort *)(lVar5 + 0x10 + lVar19 * 8);
      uVar34 = 0;
      fVar33 = (float)*(ushort *)(lVar5 + 0x12 + lVar19 * 8);
      local_80[4] = (float)*puVar7;
      local_80[5] = fVar29;
      local_80[6] = fVar31;
      local_80[7] = fVar33;
      local_140 = *(undefined1 *)(lVar5 + 0x1a + lVar19 * 8);
      pIVar8 = (IntelAccelerator *)local_68[0xb5];
      pIVar21 = (IGAccelTask *)(**(code **)(*local_68 + 0x968))(local_68);
      IntelAccelerator::submitBlit
                (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),CONCAT44(uVar30,fVar29),
                 CONCAT44(uVar32,fVar31),CONCAT44(uVar34,fVar33),param_5,param_6,param_7,param_8,
                 pIVar8,(long *)&local_1e0,&local_90,pIVar21,0,pcVar26);
      uVar24 = local_a0;
      (**(code **)(*(long *)local_38 + 0x168))(local_38,local_44,local_a0 & 0xffffffff);
      uVar14 = uVar14 + 1;
      uVar15 = (uint)uVar24;
      lVar19 = local_50;
    } while (uVar15 != uVar16);
  }
  (**(code **)(*plVar25 + 0xa48))(plVar25,lVar19,local_38,plVar25[600]);
  if ((uVar27 & 1) != 0) {
    IGAccelEventMachine::finishEvent
              (*(IGAccelEventMachine **)(plVar25[0xb5] + 0x380),plVar25 + 0xba,0x41);
  }
  this_00 = local_60;
  pIVar22 = local_78;
  if (local_78 != (IGMappedBuffer *)0x0) {
    plVar9 = (long *)plVar25[600];
    lVar19 = IGMappedBuffer::getAccessEvent(local_78);
    (**(code **)(*plVar9 + 0x140))(plVar9,lVar19);
    (**(code **)(*(long *)pIVar22 + 0x28))(pIVar22);
  }
  if (this_00 != (IGMappedBuffer *)0x0) {
    plVar9 = (long *)plVar25[600];
    lVar19 = IGMappedBuffer::getAccessEvent(this_00);
    (**(code **)(*plVar9 + 0x140))(plVar9,lVar19);
    (**(code **)(*(long *)this_00 + 0x28))(this_00);
  }
  if (plVar25[0xc6] == 0) {
    IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
  }
  (**(code **)(*plVar25 + 0xa30))(plVar25,local_50);
  if ((local_38 != (IGAccelResource *)0x0) &&
     (*(int *)(plVar25[600] + 0x20) == *(int *)(local_38 + 0x9c))) {
    uVar13 = (**(code **)(**(long **)(plVar25[0xb5] + 0x380) + 0x1c8))
                       (*(long **)(plVar25[0xb5] + 0x380),
                        (ulong)(byte)*(IOAccelShared2 *)(local_38 + 0x15) * 0x40 +
                        *(long *)(local_38 + 0x38),plVar25 + 0x25f);
    *(undefined1 *)(plVar25 + 0x267) = uVar13;
  }
  if (local_f8 != 0) {
    lVar19 = local_100 * 8;
    if (lVar19 < 0) {
      lVar19 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_100) {
      lVar19 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_f8,lVar19);
  }
  if (local_110 != 0) {
    lVar19 = local_118 * 8;
    if (lVar19 < 0) {
      lVar19 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_118) {
      lVar19 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_110,lVar19);
  }
  if (local_80 != (float *)0x0) {
    lVar19 = local_88 << 5;
    if (lVar19 < 0) {
      lVar19 = -0x8000000000000000;
    }
    if (local_88 >> 0x3b != 0) {
      lVar19 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_80,lVar19);
  }
  return;
}



// IGAccelGLContext::process_token_ResolveDepthBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_ResolveDepthBuffer(IGAccelGLContext *this,long param_1)

{
  byte bVar1;
  ushort uVar2;
  uint uVar3;
  long lVar4;
  IntelAccelerator *this_00;
  char cVar5;
  int iVar6;
  long lVar7;
  undefined8 uVar8;
  IOAccelShared2 *pIVar9;
  IGAccelResource *pIVar10;
  IGAccelTask *pIVar11;
  ulong uVar12;
  undefined4 uVar13;
  uint uVar14;
  undefined4 uVar15;
  long lVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  IOAccelShared2 *pIVar19;
  IOAccelShared2 *local_168;
  undefined8 local_160;
  IGAccelResource *local_158;
  IOAccelShared2 *local_150;
  undefined8 local_148;
  long local_140;
  undefined4 local_138;
  undefined4 local_134;
  long local_130;
  undefined4 local_128;
  undefined4 local_124;
  long local_120;
  uint local_118;
  undefined4 local_114;
  undefined1 local_110;
  undefined2 local_10f;
  undefined1 local_10d;
  uint local_10c;
  uint local_108;
  undefined4 local_104;
  undefined4 local_100;
  int local_fc;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined4 local_f0;
  undefined4 local_ec;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined4 local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  undefined4 local_d4;
  byte local_d0;
  IGVector<> local_c8 [8];
  ulong local_c0;
  long local_b8;
  ulong local_b0;
  ulong local_a8;
  long local_a0;
  IGAccelGLContext *local_98;
  long local_90;
  IGAccelResource *local_88;
  IOAccelShared2 *local_80;
  uint local_74;
  long local_70;
  IOAccelShared2 *local_68;
  undefined4 local_60;
  int local_5c;
  IGAccelResource *local_58;
  IGAccelResource *local_50;
  uint local_44;
  IGAccelResource *local_40;
  uint local_38;
  char local_31;
  
  lVar4 = *(long *)(param_1 + 0x18);
  uVar14 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar4 + 0x58U) {
    IOAccelContext2::setContextError(uVar14);
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_1 + 0x3c) == '\0') {
    if ((*(byte *)(lVar4 + 0x54) & 1) == 0) {
      return;
    }
    local_168 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar4 + 8));
    if (cVar5 == '\0') {
      return;
    }
    lVar4 = *(long *)(this + 0x630);
    pIVar19 = local_168;
joined_r0x00063b4b:
    if (lVar4 != 0) {
      return;
    }
    IOAccelResource2::clientRelease(pIVar19);
    return;
  }
  uVar2 = *(ushort *)(lVar4 + 0x31);
  bVar1 = *(byte *)(lVar4 + 0x33);
  local_80 = (IOAccelShared2 *)0x0;
  local_40 = (IGAccelResource *)CONCAT44(local_40._4_4_,(uint)*(byte *)(lVar4 + 0x30));
  local_98 = this;
  local_90 = param_1;
  if ((*(byte *)(lVar4 + 0x54) & 1) == 0) {
    if (*(long *)(this + 0x5c0) == 0) {
      return;
    }
    local_44 = (uint)uVar2;
    iVar6 = IOAccelSurface::convertGLIndexToBufferIndex
                      (*(long *)(this + 0x5c0),*(undefined4 *)(lVar4 + 8));
    local_148 = (IOAccelShared2 *)0x0;
    local_150 = (IOAccelShared2 *)0x0;
    local_158 = (IGAccelResource *)0x0;
    local_160 = (IOAccelShared2 *)0x0;
    local_168 = (IOAccelShared2 *)0x0;
    getSurfaceBufferInfo(&local_168,(long)this,iVar6);
    if ((char)local_168 == '\0') goto LAB_00063d7b;
    local_58 = local_158;
    local_80 = local_160;
    pIVar19 = local_148;
  }
  else {
    local_168 = (IOAccelShared2 *)0x0;
    cVar5 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar4 + 8));
    if (cVar5 == '\0') {
      IOAccelContext2::setContextError(uVar14);
LAB_00063d7b:
      IOAccelContext2::setContextError(uVar14);
      return;
    }
    local_44 = (uint)uVar2;
    cVar5 = (**(code **)(*(long *)this + 0xa40))
                      (this,param_1,local_168,1,*(undefined8 *)(this + 0x12c0),1,1);
    pIVar19 = local_168;
    if (cVar5 == '\0') {
      if ((local_168 == (IOAccelShared2 *)0x0) ||
         (((byte)*(IGAccelResource *)(local_168 + 0xe) & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar14);
      }
      else {
        *(undefined1 *)(param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
      }
      streamErrorCleanup(this,param_1,local_168);
      goto LAB_00063d7b;
    }
    if (local_168 == (IOAccelShared2 *)0x0) goto LAB_00063d7b;
    local_168 = (IOAccelShared2 *)((ulong)local_168 & 0xffffffff00000000);
    IGAccelResource::get_tex_data
              ((IGAccelResource *)pIVar19,(long *)&local_80,(undefined4 *)&local_168);
    local_58 = (IGAccelResource *)0x0;
  }
  local_68 = pIVar19;
  lVar7 = IOAccelResource2::getStorageResource();
  pIVar19 = local_68;
  if ((((ulong)local_40 & 1) != 0) && ((*(byte *)(lVar7 + 0x221) & 0x10) != 0)) {
    if ((*(byte *)(lVar4 + 0x54) & 1) == 0) {
      return;
    }
    (**(code **)(*(long *)this + 0xa48))(this,param_1,local_68,*(undefined8 *)(this + 0x12c0));
    lVar4 = *(long *)(this + 0x630);
    goto joined_r0x00063b4b;
  }
  local_44 = local_44 + (uint)bVar1 * 0x10000;
  local_74 = (uint)local_40 | 0x20;
  if (((((*(byte *)(lVar4 + 0x54) & 1) != 0) && (*(int *)(lVar4 + 0xc) == 0)) &&
      (*(int *)(lVar4 + 0x10) == 0)) && (*(int *)(lVar4 + 0x14) == 0)) {
    (**(code **)(*(long *)this + 0xa38))(this,param_1);
    bVar1 = *(byte *)(lVar4 + 0x3c);
    cVar5 = *(char *)(lVar4 + 0x40);
    local_168 = *(IOAccelShared2 **)(lVar4 + 0x20);
    local_160 = (IOAccelShared2 *)
                CONCAT44(*(int *)(lVar4 + 0x24) + *(int *)(lVar4 + 0x2c),
                         *(int *)(lVar4 + 0x20) + *(int *)(lVar4 + 0x28));
    local_40 = *(IGAccelResource **)(this + 0x5a8);
    pIVar11 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
    IGAccelResource::submitDepthResolve
              ((IGAccelResource *)local_68,lVar7 + 0x180,(IntelAccelerator *)local_40,pIVar11,
               (long)(this + 0x5d0),(ulong)(local_44 * 0x100 + local_74),*(ushort *)(lVar4 + 0x44),
               *(ushort *)(lVar4 + 0x48),
               (short)(-1 << (bVar1 & 0x1f)) + (short)(1 << (cVar5 + 1U & 0x1f)),(int *)&local_168);
    local_40 = (IGAccelResource *)0x0;
    local_50 = (IGAccelResource *)0x0;
    pIVar10 = (IGAccelResource *)0x0;
    goto LAB_0006449c;
  }
  local_38 = (uint)local_40 & 8;
  ___bzero(&local_168,0xd0);
  IGVector<>::grow(local_c8,4);
  local_b0 = 0;
  local_a8 = 0;
  local_a0 = 0;
  IGVector<>::grow((IGVector<> *)&local_b0,4);
  pIVar19 = local_68;
  local_10c = (uint)*(ushort *)(local_68 + 0xb0);
  local_108 = (uint)*(ushort *)(local_68 + 0xb2);
  local_104 = 1;
  local_5c = *(int *)(lVar4 + 0x24);
  if ((((&DAT_000011b2)[*(long *)(this + 0x5c0)] & 0x70) == 0) && (((ulong)local_40 & 0x40) == 0)) {
    local_5c = local_108 - (local_5c + *(int *)(lVar4 + 0x2c));
  }
  local_31 = (char)local_38;
  if ((local_b0 != local_a8) ||
     (uVar8 = IGVector<>::grow((IGVector<> *)&local_b0,local_b0 * 2), (char)uVar8 != '\0')) {
    *(IGAccelResource **)(local_a0 + local_b0 * 8) = local_58;
    local_b0 = local_b0 + 1;
  }
  if (local_31 == '\0') {
    AddSrcResourceEvents(local_c8,(long)pIVar19);
    pIVar9 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
    if (pIVar9 != pIVar19) {
      AddSrcResourceEvents(local_c8,(long)pIVar9);
    }
  }
  else {
    AddDstResourceEvents(local_c8,(long)pIVar19);
    pIVar9 = (IOAccelShared2 *)IOAccelResource2::getStorageResource();
    if (pIVar9 != pIVar19) {
      AddDstResourceEvents(local_c8,(long)pIVar9);
    }
  }
  local_150 = local_80;
  lVar7 = *(long *)(pIVar19 + 0xb8);
  if (lVar7 == 0) {
    lVar7 = *(long *)(pIVar19 + 0xc0);
  }
  local_38 = local_38 >> 3 ^ 1;
  local_148 = (IOAccelShared2 *)CONCAT44(local_148._4_4_,(int)lVar7);
  lVar7 = IOAccelResource2::getStorageResource();
  local_148 = (IOAccelShared2 *)CONCAT44(*(undefined4 *)(lVar7 + 0x18c),(undefined4)local_148);
  local_70 = 0;
  local_60 = 0;
  lVar7 = 0;
  uVar17 = 0;
  uVar15 = 0;
  local_58 = (IGAccelResource *)0x0;
  uVar12 = (ulong)local_40 & 0xffffffff;
  if (((ulong)local_40 & 0x10) == 0) {
LAB_00063f8c:
    uVar13 = 0;
    lVar16 = 0;
    uVar18 = 0;
    local_50 = (IGAccelResource *)0x0;
    local_140 = lVar7;
    local_138 = uVar17;
    local_134 = uVar15;
    if ((uVar12 & 4) != 0) {
      if (*(uint *)(lVar4 + 0x10) == 0) {
        lVar16 = 0;
        uVar13 = 0;
        uVar18 = 0;
        local_50 = (IGAccelResource *)0x0;
      }
      else {
        pIVar10 = (IGAccelResource *)
                  process_token_ResolveDepthBuffer(IOAccelCommandStreamInfo&)::$_0::operator()
                            ((__0 *)&local_98,(void **)(ulong)*(uint *)(lVar4 + 0x10),local_38);
        if (pIVar10 == (IGAccelResource *)0x0) {
          IOAccelContext2::setContextError(uVar14);
          local_40 = (IGAccelResource *)0x0;
          local_50 = (IGAccelResource *)0x0;
          goto LAB_0006441a;
        }
        if (local_31 == '\0') {
          AddDstEvents(local_c8,(long)pIVar10);
        }
        else {
          AddSrcEvents(local_c8,(long)pIVar10);
        }
        lVar7 = IOAccelResource2::getStorageResource();
        uVar3 = *(uint *)(lVar7 + 0x1ac);
        lVar7 = IOAccelResource2::getStorageResource();
        local_40 = (IGAccelResource *)(ulong)*(uint *)(lVar7 + 0x1b8);
        lVar7 = IOAccelResource2::getStorageResource();
        uVar18 = *(undefined4 *)(lVar7 + 0x1bc);
        local_50 = pIVar10;
        IGAccelResource::get_tex_data(pIVar10,&local_70,&local_60);
        uVar13 = SUB84(local_40,0);
        lVar16 = (ulong)uVar3 + local_70;
      }
    }
    local_130 = lVar16;
    local_128 = uVar13;
    local_124 = uVar18;
    if (*(uint *)(lVar4 + 0x14) == 0) {
      local_120 = 0;
      local_118 = 0;
      local_114 = 0;
      local_40 = (IGAccelResource *)0x0;
LAB_000642b9:
      local_168 = (IOAccelShared2 *)(*(long *)(this + 0x5a8) + 0xf36);
      local_160 = local_68 + 0x1d8;
      local_110 = (undefined1)local_74;
      local_10d = (undefined1)(local_44 >> 0x10);
      local_10f = (undefined2)local_44;
      local_100 = *(undefined4 *)(lVar4 + 0x20);
      local_fc = local_5c;
      local_f8 = *(undefined4 *)(lVar4 + 0x28);
      local_f4 = *(undefined4 *)(lVar4 + 0x2c);
      local_f0 = *(undefined4 *)(lVar4 + 0x3c);
      local_ec = *(undefined4 *)(lVar4 + 0x40);
      local_e8 = *(undefined4 *)(lVar4 + 0x44);
      local_e4 = *(undefined4 *)(lVar4 + 0x48);
      local_e0 = *(undefined4 *)(lVar4 + 0x38);
      local_dc = *(undefined4 *)(lVar4 + 0x34);
      local_d8 = *(undefined4 *)(lVar4 + 0x4c);
      local_d4 = *(undefined4 *)(lVar4 + 0x50);
      lVar7 = IOAccelResource2::getStorageResource();
      local_d0 = ((&DAT_000011b8)[*(long *)(this + 0x5a8)] & 1) << 4 |
                 local_d0 & 0xe0 | *(byte *)(lVar7 + 0x1d6) >> 2 & 1 |
                 *(char *)(lVar4 + 0x54) * '\x02' & 4U | *(char *)(lVar4 + 0x54) * '\x02' & 8U |
                 ((*(uint *)(lVar4 + 0x34) & 0xfffffffe) == 2) * '\x02';
      (**(code **)(*(long *)this + 0xa38))(this,param_1);
      this_00 = *(IntelAccelerator **)(this + 0x5a8);
      pIVar11 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
      IntelAccelerator::submitDepthResolve(this_00,(long *)&local_168,pIVar11);
    }
    else {
      local_88 = (IGAccelResource *)0x0;
      cVar5 = IOAccelContext2::lookupResource(uVar14,(void **)(ulong)*(uint *)(lVar4 + 0x14));
      if (cVar5 == '\0') {
        IOAccelContext2::setContextError(uVar14);
      }
      else {
        cVar5 = (**(code **)(*(long *)this + 0xa40))
                          (this,param_1,local_88,1,*(undefined8 *)(this + 0x12c0),local_38,1);
        pIVar10 = local_88;
        if (cVar5 == '\0') {
          if ((local_88 == (IGAccelResource *)0x0) || (((byte)local_88[0xe] & 0x10) != 0)) {
            IOAccelContext2::setContextError(uVar14);
          }
          else {
            *(undefined1 *)(param_1 + 0x3c) = 0;
            this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
          }
          streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_88);
        }
        else if (local_88 != (IGAccelResource *)0x0) {
          if (local_31 == '\0') {
            AddDstEvents(local_c8,(long)local_88);
          }
          else {
            AddSrcEvents(local_c8,(long)local_88);
          }
          lVar7 = IOAccelResource2::getStorageResource();
          uVar14 = *(uint *)(lVar7 + 0x1a4);
          lVar7 = IOAccelResource2::getStorageResource();
          local_38 = *(uint *)(lVar7 + 0x1a8);
          local_40 = pIVar10;
          IGAccelResource::get_tex_data(pIVar10,&local_70,&local_60);
          local_120 = (ulong)uVar14 + local_70;
          local_118 = local_38;
          local_114 = local_148._4_4_;
          goto LAB_000642b9;
        }
      }
      IOAccelContext2::setContextError(uVar14);
      local_40 = (IGAccelResource *)0x0;
    }
  }
  else {
    if (*(uint *)(lVar4 + 0xc) == 0) {
      lVar7 = 0;
      uVar17 = 0;
      uVar15 = 0;
      local_58 = (IGAccelResource *)0x0;
      goto LAB_00063f8c;
    }
    pIVar10 = (IGAccelResource *)
              process_token_ResolveDepthBuffer(IOAccelCommandStreamInfo&)::$_0::operator()
                        ((__0 *)&local_98,(void **)(ulong)*(uint *)(lVar4 + 0xc),local_38);
    if (pIVar10 != (IGAccelResource *)0x0) {
      if (local_31 == '\0') {
        AddDstEvents(local_c8,(long)pIVar10);
      }
      else {
        AddSrcEvents(local_c8,(long)pIVar10);
      }
      lVar7 = IOAccelResource2::getStorageResource();
      local_50 = (IGAccelResource *)(ulong)*(uint *)(lVar7 + 0x198);
      lVar7 = IOAccelResource2::getStorageResource();
      uVar17 = *(undefined4 *)(lVar7 + 0x19c);
      lVar7 = IOAccelResource2::getStorageResource();
      uVar15 = *(undefined4 *)(lVar7 + 0x1a0);
      local_58 = pIVar10;
      IGAccelResource::get_tex_data(pIVar10,&local_70,&local_60);
      lVar7 = (long)local_50 + local_70;
      uVar12 = (ulong)local_40 & 0xffffffff;
      goto LAB_00063f8c;
    }
    IOAccelContext2::setContextError(uVar14);
    local_40 = (IGAccelResource *)0x0;
    local_50 = (IGAccelResource *)0x0;
    local_58 = (IGAccelResource *)0x0;
  }
LAB_0006441a:
  if (local_a0 != 0) {
    lVar7 = local_a8 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_a8) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_a0,lVar7);
  }
  pIVar10 = local_58;
  if (local_b8 != 0) {
    lVar7 = local_c0 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_c0) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_b8,lVar7);
    pIVar10 = local_58;
  }
LAB_0006449c:
  pIVar19 = local_68;
  if (((local_68 != (IOAccelShared2 *)0x0) && ((*(byte *)(lVar4 + 0x54) & 1) != 0)) &&
     ((**(code **)(*(long *)this + 0xa48))(this,param_1,local_68,*(undefined8 *)(this + 0x12c0)),
     *(long *)(this + 0x630) == 0)) {
    IOAccelResource2::clientRelease(pIVar19);
  }
  if (pIVar10 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)this + 0xa48))(this,param_1,pIVar10,*(undefined8 *)(this + 0x12c0));
  }
  pIVar10 = local_40;
  if (local_50 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)this + 0xa48))(this,param_1,local_50,*(undefined8 *)(this + 0x12c0));
  }
  if (pIVar10 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)this + 0xa48))(this,param_1,pIVar10,*(undefined8 *)(this + 0x12c0));
  }
  if (*(int *)(this + 0x644) == 0) {
    (**(code **)(*(long *)this + 0xa30))(this,param_1);
  }
  return;
}



// IGAccelGLContext::process_token_BindHizBuffer(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::process_token_BindHizBuffer(IGAccelGLContext *this,long *param_1)

{
  uint uVar1;
  ulong *puVar2;
  uint uVar3;
  IOAccelShared2 *pIVar4;
  char cVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  int *piVar9;
  int local_3c;
  IOAccelShared2 *local_38;
  IGAccelResource *local_30;
  
  lVar7 = param_1[3];
  if (lVar7 + 0xcU <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (4 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2))))
    {
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        local_38 = (IOAccelShared2 *)0x0;
        local_3c = 0;
        local_30 = (IGAccelResource *)0x0;
        if (*(long *)(*(long *)(this + 0x5b8) + 0x760) != 0) {
          unbind_texture((long *)this,param_1,0xec);
        }
        uVar6 = bind_texture(this,(long)param_1,*(uint *)(lVar7 + 8),0xec,'\x01',(long *)&local_30);
        if ((char)uVar6 == '\0') {
          return;
        }
        piVar9 = &local_3c;
        IGAccelResource::get_tex_data(local_30,(long *)&local_38,piVar9);
        (**(code **)(*(long *)local_30 + 0x168))(local_30,0,0);
        pIVar4 = local_38;
        lVar7 = IOAccelResource2::getStorageResource();
        uVar1 = *(uint *)(lVar7 + 0x198);
        lVar7 = IOAccelResource2::getStorageResource();
        if (*(int *)(lVar7 + 0x198) != 0) {
          lVar7 = IOAccelResource2::getStorageResource();
          piVar9 = (int *)(lVar7 + 0x19c);
        }
        uVar3 = *piVar9 - 1U;
        if (0x1fffe < *piVar9 - 1U) {
          uVar3 = 0x1ffff;
        }
        *puVar2 = *puVar2 & 0xfffe0000ffffffff | (ulong)uVar3 << 0x20;
        puVar2[1] = (ulong)(pIVar4 + uVar1);
        return;
      }
      local_38 = (IOAccelShared2 *)0x0;
      cVar5 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)*(uint *)(lVar7 + 8));
      if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      lVar7 = *param_1;
      if (lVar7 == 0) {
        return;
      }
      lVar8 = 0;
      do {
        *(undefined4 *)(lVar7 + lVar8 * 4) = 0;
        lVar8 = lVar8 + 1;
      } while (lVar8 != 5);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindStencilBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindStencilBuffer(IGAccelGLContext *this,long *param_1)

{
  uint uVar1;
  ulong *puVar2;
  IOAccelShared2 *pIVar3;
  char cVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  int *piVar8;
  int local_3c;
  IOAccelShared2 *local_38;
  IGAccelResource *local_30;
  
  lVar6 = param_1[3];
  if (lVar6 + 0xcU <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (4 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2))))
    {
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        local_38 = (IOAccelShared2 *)0x0;
        local_3c = 0;
        local_30 = (IGAccelResource *)0x0;
        if (*(long *)(*(long *)(this + 0x5b8) + 0x770) != 0) {
          unbind_texture((long *)this,param_1,0xee);
        }
        uVar5 = bind_texture(this,(long)param_1,*(uint *)(lVar6 + 8),0xee,'\x01',(long *)&local_30);
        if ((char)uVar5 == '\0') {
          return;
        }
        piVar8 = &local_3c;
        IGAccelResource::get_tex_data(local_30,(long *)&local_38,piVar8);
        (**(code **)(*(long *)local_30 + 0x168))(local_30,0,0);
        lVar6 = IOAccelResource2::getStorageResource();
        pIVar3 = local_38;
        **(ushort **)(lVar6 + 0x1d8) = **(ushort **)(lVar6 + 0x1d8) | 1;
        **(ushort **)(lVar6 + 0x1e0) = **(ushort **)(lVar6 + 0x1e0) & 0xfffe;
        lVar6 = IOAccelResource2::getStorageResource();
        uVar1 = *(uint *)(lVar6 + 0x1ac);
        lVar6 = IOAccelResource2::getStorageResource();
        if (*(int *)(lVar6 + 0x1ac) != 0) {
          lVar6 = IOAccelResource2::getStorageResource();
          piVar8 = (int *)(lVar6 + 0x1b8);
        }
        *puVar2 = *puVar2 & 0xfffe0000ffffffff | (ulong)(*piVar8 - 1U & 0x1ffff) << 0x20;
        puVar2[1] = (ulong)(pIVar3 + uVar1);
        return;
      }
      local_38 = (IOAccelShared2 *)0x0;
      cVar4 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)*(uint *)(lVar6 + 8));
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      lVar6 = *param_1;
      if (lVar6 == 0) {
        return;
      }
      lVar7 = 0;
      do {
        *(undefined4 *)(lVar6 + lVar7 * 4) = 0;
        lVar7 = lVar7 + 1;
      } while (lVar7 != 5);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindDepth32FBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindDepth32FBuffer(IGAccelGLContext *this,long *param_1)

{
  byte bVar1;
  int iVar2;
  ulong *puVar3;
  uint uVar4;
  char cVar5;
  undefined8 uVar6;
  long lVar7;
  IGAccelTask *this_00;
  ulong uVar8;
  long lVar9;
  int iVar10;
  ulong local_40;
  undefined4 local_38;
  int local_34;
  IGAccelResource *local_30;
  
  lVar7 = param_1[3];
  if (lVar7 + 0x18U <= *(ulong *)(this + 0x628)) {
    puVar3 = (ulong *)*param_1;
    if ((-4 < (long)puVar3 - param_1[1]) &&
       (7 < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar3 - param_1[1]) >> 2))))
    {
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        local_30 = (IGAccelResource *)0x0;
        cVar5 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)*(uint *)(lVar7 + 8));
        if ((cVar5 != '\0') && (*(long *)(this + 0x630) == 0)) {
          IOAccelResource2::clientRelease((IOAccelShared2 *)local_30);
        }
        lVar7 = *param_1;
        if (lVar7 == 0) {
          return;
        }
        lVar9 = 0;
        do {
          *(undefined4 *)(lVar7 + lVar9 * 4) = 0;
          lVar9 = lVar9 + 1;
        } while (lVar9 != 8);
        return;
      }
      local_30 = (IGAccelResource *)0x0;
      if (*(long *)(*(long *)(this + 0x5b8) + 0x768) != 0) {
        unbind_texture((long *)this,param_1,0xed);
      }
      local_40 = 0;
      local_34 = 0;
      uVar6 = bind_texture(this,(long)param_1,*(uint *)(lVar7 + 8),0xed,'\x01',(long *)&local_30);
      if ((char)uVar6 == '\0') {
        return;
      }
      IGAccelResource::get_tex_data(local_30,(long *)&local_40,&local_34);
      (**(code **)(*(long *)local_30 + 0x168))(local_30,0,0);
      iVar10 = local_34;
      uVar8 = local_40;
      if (*(long *)(this + 0x5c0) == 0) {
        this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        uVar8 = IGAccelTask::getScratchGPUVirtualAddress(this_00);
        puVar3[2] = puVar3[2] & 0x3ff00000000 | 0xc0070;
        *(ushort *)((long)puVar3 + 0x1e) = *(ushort *)((long)puVar3 + 0x1e) & 0x1f;
        iVar10 = 0x80;
      }
      else if ((*puVar3 & 0x40000000000000) != 0) {
        local_38 = *(undefined4 *)(lVar7 + 0x14);
        iVar2 = *(int *)(lVar7 + 0x10);
        lVar7 = IOAccelResource2::getStorageResource();
        bVar1 = *(byte *)(lVar7 + 0x221);
        *(byte *)(lVar7 + 0x221) = bVar1 | 0x11;
        if (iVar2 != 0) {
          *(byte *)(lVar7 + 0x221) = bVar1 | 0x13;
          *(undefined4 *)(lVar7 + 0x21c) = local_38;
        }
      }
      uVar4 = iVar10 - 1U;
      if (0x3fffe < iVar10 - 1U) {
        uVar4 = 0x3ffff;
      }
      puVar3[1] = uVar8 & 0xffffffffffff | (ulong)*(ushort *)((long)puVar3 + 0xe) << 0x30;
      *puVar3 = *puVar3 & 0xfffc0000ffffffff | (ulong)(uVar4 & 0x1ffff) << 0x20;
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindDrawIndirectBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindDrawIndirectBuffer(IGAccelGLContext *this,long *param_1)

{
  long lVar1;
  ulong *puVar2;
  char cVar3;
  undefined8 uVar4;
  IGAccelTask *this_00;
  ulong uVar5;
  ulong uVar6;
  ulong *puVar7;
  long lVar8;
  uint uVar9;
  ulong uVar10;
  ulong uVar11;
  ulong local_48;
  undefined4 local_3c;
  IGAccelResource *local_38;
  
  lVar1 = param_1[3];
  if (lVar1 + 0x14U <= *(ulong *)(this + 0x628)) {
    puVar2 = (ulong *)*param_1;
    if ((-4 < (long)puVar2 - param_1[1]) &&
       (uVar9 = ((*(uint *)(*(long *)(this + 0x5a8) + 0xf6a) >> 0x15 & 1) * 3 |
                (uint)*(byte *)(lVar1 + 0x10) << 2) + 0x10,
       (int)uVar9 <=
       (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar2 - param_1[1]) >> 2)))) {
      if (*(char *)((long)param_1 + 0x3c) != '\0') {
        local_38 = (IGAccelResource *)0x0;
        local_48 = 0;
        local_3c = 0;
        if (*(long *)(*(long *)(this + 0x5b8) + 0x6c8) != 0) {
          unbind_texture((long *)this,param_1,0xd9);
        }
        uVar4 = bind_texture(this,(long)param_1,*(uint *)(lVar1 + 8),0xd9,'\0',(long *)&local_38);
        if ((char)uVar4 == '\0') {
          return;
        }
        IGAccelResource::get_tex_data(local_38,(long *)&local_48,&local_3c);
        (**(code **)(*(long *)local_38 + 0x168))(local_38,0,0);
        local_48 = *(uint *)(lVar1 + 0xc) + local_48;
        uVar10 = local_48 >> 2;
        lVar8 = 0;
        if ((*(uint *)(*(long *)(this + 0x5a8) + 0xf6a) >> 0x15 & 1) != 0) {
          *puVar2 = *puVar2 & 0xffffffffffbd00ff | 0x20400;
          this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
          uVar5 = IGAccelTask::getScratchGPUVirtualAddress(this_00);
          uVar5 = uVar5 >> 2 & 0x3fffffffffff;
          *puVar2 = *puVar2 & 0x3ffffffff | uVar5 << 0x22;
          *(uint *)(puVar2 + 1) =
               (uint)(uVar5 >> 0x1e) | (uint)*(ushort *)((long)puVar2 + 10) << 0x10;
          lVar8 = 3;
        }
        uVar9 = (uint)lVar8;
        uVar5 = *(ulong *)((long)puVar2 + lVar8 * 4 + 8);
        *(ulong *)((long)puVar2 + lVar8 * 4) =
             *(ulong *)((long)puVar2 + lVar8 * 4) & 0xff800003ffdfffff | 0x243400200000;
        *(ulong *)((long)puVar2 + lVar8 * 4 + 8) =
             (uVar5 & 0xffff000000000003) + (uVar10 & 0x3fffffffffff) * 4;
        uVar6 = (ulong)(uVar9 + 4);
        uVar5 = *(ulong *)((long)puVar2 + uVar6 * 4 + 8);
        *(ulong *)((long)puVar2 + uVar6 * 4) =
             *(ulong *)((long)puVar2 + uVar6 * 4) & 0xff800003ffdfffff | 0x243800200000;
        *(ulong *)((long)puVar2 + uVar6 * 4 + 8) =
             (uVar5 & 0xffff000000000003) + (uVar10 + 1 & 0x3fffffffffff) * 4;
        uVar6 = (ulong)(uVar9 + 8);
        uVar5 = *(ulong *)((long)puVar2 + uVar6 * 4 + 8);
        *(ulong *)((long)puVar2 + uVar6 * 4) =
             *(ulong *)((long)puVar2 + uVar6 * 4) & 0xff800003ffdfffff | 0x243000200000;
        *(ulong *)((long)puVar2 + uVar6 * 4 + 8) =
             (uVar5 & 0xffff000000000003) + (uVar10 + 2 & 0x3fffffffffff) * 4;
        puVar7 = (ulong *)((long)puVar2 + (ulong)(uVar9 + 0xc) * 4);
        uVar5 = *puVar7;
        uVar6 = puVar7[1];
        uVar11 = uVar10 + 3;
        if (*(char *)(lVar1 + 0x10) != '\0') {
          uVar11 = uVar10 + 4;
          *puVar7 = uVar5 & 0xff800003ffdfffff | 0x244000200000;
          puVar7[1] = (uVar10 + 3 & 0x3fffffffffff) << 2 | uVar6 & 0xffff000000000003;
          puVar7 = (ulong *)((long)puVar2 + (ulong)(uVar9 | 0x10) * 4);
          uVar5 = *puVar7;
          uVar6 = puVar7[1];
        }
        *puVar7 = uVar5 & 0xff800003ffffffff | 0x243c00000000;
        puVar7[1] = (uVar6 & 0xffff000000000003) + (uVar11 & 0x3fffffffffff) * 4;
        return;
      }
      local_38 = (IGAccelResource *)0x0;
      cVar3 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)*(uint *)(lVar1 + 8));
      if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
      }
      lVar1 = *param_1;
      if (lVar1 == 0) {
        return;
      }
      uVar10 = 0;
      do {
        *(undefined4 *)(lVar1 + uVar10 * 4) = 0;
        uVar10 = uVar10 + 1;
      } while (uVar9 != uVar10);
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindStreamOutputBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindStreamOutputBuffer(IGAccelGLContext *this,long *param_1)

{
  long lVar1;
  char cVar2;
  undefined8 uVar3;
  long lVar4;
  uint uVar5;
  ulong uVar6;
  int iVar7;
  ulong uVar8;
  ulong local_58;
  undefined4 local_4c;
  ulong local_48;
  uint local_3c;
  IGAccelResource *local_38;
  
  lVar1 = param_1[3];
  uVar5 = (uint)this;
  if (lVar1 + 0x1cU <= *(ulong *)(this + 0x628)) {
    lVar4 = *param_1;
    if ((-4 < lVar4 - param_1[1]) &&
       (0x1f < (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar4 - param_1[1]) >> 2)))) {
      uVar6 = (ulong)*(ushort *)(lVar1 + 8);
      if (0xf < *(ushort *)(lVar1 + 8)) {
        IOAccelContext2::setContextError(uVar5);
        return;
      }
      if (*(char *)((long)param_1 + 0x3c) == '\0') {
        uVar8 = 0;
        iVar7 = 4;
        local_48 = lVar1;
        do {
          if ((uVar6 & 1) != 0) {
            local_38 = (IGAccelResource *)0x0;
            cVar2 = IOAccelContext2::lookupResource
                              (uVar5,(void **)(ulong)*(uint *)(local_48 + 0xc + uVar8 * 4));
            if ((cVar2 != '\0') && (*(long *)(this + 0x630) == 0)) {
              IOAccelResource2::clientRelease((IOAccelShared2 *)local_38);
            }
            uVar8 = (ulong)((int)uVar8 + 1);
          }
          uVar6 = uVar6 >> 1;
          iVar7 = iVar7 + -1;
        } while (iVar7 != 0);
        lVar1 = *param_1;
        if (lVar1 == 0) {
          return;
        }
        lVar4 = 0;
        do {
          *(undefined4 *)(lVar1 + lVar4 * 4) = 0;
          lVar4 = lVar4 + 1;
        } while (lVar4 != 0x20);
        return;
      }
      local_3c = 0;
      uVar8 = 0xf1;
      local_48 = local_48 & 0xffffffff00000000;
      do {
        if (*(long *)(*(long *)(this + 0x5b8) + uVar8 * 8) != 0) {
          unbind_texture((long *)this,param_1,(uint)uVar8);
        }
        if ((uVar6 & 1) != 0) {
          local_38 = (IGAccelResource *)0x0;
          uVar3 = bind_texture(this,(long)param_1,
                               *(uint *)(lVar1 + 0xc + (local_48 & 0xffffffff) * 4),
                               uVar8 & 0xffffffff,'\x01',(long *)&local_38);
          if ((char)uVar3 == '\0') {
            return;
          }
          local_58 = 0;
          local_4c = 0;
          IGAccelResource::get_tex_data(local_38,(long *)&local_58,&local_4c);
          (**(code **)(*(long *)local_38 + 0x168))(local_38,0,0);
          if (local_58 == 0) {
            IOAccelContext2::setContextError(uVar5);
            streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_38);
            return;
          }
          *(ulong *)(lVar4 + 8 + (ulong)local_3c * 4) =
               *(ulong *)(lVar4 + 8 + (ulong)local_3c * 4) & 0xffff000000000003 |
               local_58 & 0xfffffffffffc;
          local_3c = local_3c + 8;
          local_48 = CONCAT44(local_48._4_4_,(int)local_48 + 1);
        }
        uVar8 = uVar8 + 1;
        uVar6 = uVar6 >> 1;
        if (uVar8 == 0xf5) {
          return;
        }
      } while( true );
    }
  }
  IOAccelContext2::setContextError(uVar5);
  *(undefined1 *)((long)param_1 + 0x3c) = 0;
  return;
}



// IGAccelGLContext::process_token_BindQueryBuffer(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindQueryBuffer(IGAccelGLContext *this,long *param_1)

{
  IOAccelShared2 IVar1;
  char cVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  uint uVar7;
  long lVar8;
  IOAccelShared2 *pIVar9;
  IOAccelShared2 *local_38;
  
  lVar5 = param_1[3];
  uVar7 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar5 + 0x14U) {
LAB_00065186:
    IOAccelContext2::setContextError(uVar7);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  lVar8 = *param_1;
  if ((lVar8 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)(lVar8 - param_1[1]) >> 2)) < 0xc))
  goto LAB_00065186;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if ((*(long *)(*(long *)(this + 0x5b8) + 0x6d0) == 0) ||
       (*(uint *)(*(long *)(*(long *)(*(long *)(this + 0x5b8) + 0x6d0) + 0x38) + 0x100) !=
        *(uint *)(lVar5 + 8))) {
      local_38 = (IOAccelShared2 *)0x0;
      cVar2 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)*(uint *)(lVar5 + 8));
      if ((cVar2 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      lVar8 = *param_1;
    }
    if (lVar8 == 0) {
      return;
    }
    lVar5 = 0;
    do {
      *(undefined4 *)(lVar8 + lVar5 * 4) = 0;
      lVar5 = lVar5 + 1;
    } while (lVar5 != 0xc);
    return;
  }
  local_38 = (IOAccelShared2 *)0x0;
  pIVar9 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x6d0);
  if ((pIVar9 == (IOAccelShared2 *)0x0) ||
     (*(int *)(*(long *)(pIVar9 + 0x38) + 0x100) != *(int *)(lVar5 + 8))) {
    unbind_texture((long *)this,param_1,0xda);
    uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar5 + 8),0xda,'\0',(long *)&local_38);
    pIVar9 = local_38;
    if ((char)uVar3 == '\0') {
      if ((local_38 != (IOAccelShared2 *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        return;
      }
      IOAccelContext2::setContextError(uVar7);
      return;
    }
  }
  else {
    local_38 = pIVar9;
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar9);
    }
  }
  lVar4 = (**(code **)(**(long **)(pIVar9 + 0x40) + 0x130))();
  IVar1 = pIVar9[0x14];
  if (IVar1 != (IOAccelShared2)0x0) {
    if (IVar1 == (IOAccelShared2)0x82) {
      uVar6 = (ulong)*(uint *)(pIVar9 + 0xfc);
      goto LAB_000652c5;
    }
    if (IVar1 != (IOAccelShared2)0x80) {
      uVar6 = 0;
      goto LAB_000652c5;
    }
  }
  uVar6 = *(ulong *)(pIVar9 + 0xf8);
LAB_000652c5:
  lVar4 = uVar6 + lVar4;
  *(uint *)(lVar8 + 8) = *(uint *)(lVar8 + 8) & 3 | *(int *)(lVar5 + 0xc) + (int)lVar4 & 0xfffffffcU
  ;
  *(int *)(lVar8 + 0xc) = (int)((ulong)*(uint *)(lVar5 + 0xc) + lVar4 >> 0x20);
  *(uint *)(lVar8 + 0x20) =
       *(uint *)(lVar8 + 0x20) & 3 | *(int *)(lVar5 + 0x10) + (int)lVar4 & 0xfffffffcU;
  *(int *)(lVar8 + 0x24) = (int)((ulong)*(uint *)(lVar5 + 0x10) + lVar4 >> 0x20);
  return;
}



// IGAccelGLContext::process_token_BindQueryBufferMultiple(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindQueryBufferMultiple(IGAccelGLContext *this,ulong *param_1)

{
  IOAccelShared2 IVar1;
  uint uVar2;
  uint uVar3;
  char cVar4;
  undefined8 uVar5;
  long lVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  uint uVar10;
  ulong uVar11;
  uint uVar12;
  IOAccelShared2 *pIVar13;
  IOAccelShared2 *local_38;
  
  uVar7 = param_1[3];
  uVar10 = (uint)this;
  if (*(ulong *)(this + 0x628) < uVar7 + 0x14) {
LAB_0006538e:
    IOAccelContext2::setContextError(uVar10);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  uVar2 = *(uint *)(uVar7 + 0x10);
  uVar12 = uVar2 * 4;
  if ((int)uVar12 < 0) goto LAB_0006538e;
  uVar11 = *param_1;
  uVar9 = param_1[1];
  uVar8 = uVar11 - uVar9;
  if (((long)uVar8 < -3) || ((int)(((uint)param_1[2] >> 2) - (int)(uVar8 >> 2)) < (int)uVar12))
  goto LAB_0006538e;
  uVar3 = *(uint *)(uVar7 + 8);
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if ((*(long *)(*(long *)(this + 0x5b8) + 0x6d0) == 0) ||
       (*(uint *)(*(long *)(*(long *)(*(long *)(this + 0x5b8) + 0x6d0) + 0x38) + 0x100) != uVar3)) {
      local_38 = (IOAccelShared2 *)0x0;
      cVar4 = IOAccelContext2::lookupResource(uVar10,(void **)(ulong)uVar3);
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      uVar11 = *param_1;
    }
    if (uVar12 == 0) {
      return;
    }
    if (uVar11 == 0) {
      return;
    }
    uVar7 = 0;
    do {
      *(undefined4 *)(uVar11 + uVar7 * 4) = 0;
      uVar7 = uVar7 + 1;
    } while (uVar12 != uVar7);
    return;
  }
  uVar12 = *(uint *)(uVar7 + 0xc);
  local_38 = (IOAccelShared2 *)0x0;
  pIVar13 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x6d0);
  if ((pIVar13 == (IOAccelShared2 *)0x0) || (*(uint *)(*(long *)(pIVar13 + 0x38) + 0x100) != uVar3))
  {
    unbind_texture((long *)this,param_1,0xda);
    uVar5 = bind_texture(this,(long)param_1,uVar3,0xda,'\0',(long *)&local_38);
    pIVar13 = local_38;
    if ((char)uVar5 == '\0') {
      if ((local_38 != (IOAccelShared2 *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        return;
      }
      goto LAB_0006558b;
    }
  }
  else {
    local_38 = pIVar13;
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar13);
    }
  }
  lVar6 = (**(code **)(**(long **)(pIVar13 + 0x40) + 0x130))();
  IVar1 = pIVar13[0x14];
  if (IVar1 == (IOAccelShared2)0x0) {
LAB_00065477:
    uVar7 = *(ulong *)(pIVar13 + 0xf8);
  }
  else if (IVar1 == (IOAccelShared2)0x82) {
    uVar7 = (ulong)*(uint *)(pIVar13 + 0xfc);
  }
  else {
    if (IVar1 == (IOAccelShared2)0x80) goto LAB_00065477;
    uVar7 = 0;
  }
  uVar8 = (ulong)uVar2 * 4;
  if (((((uVar8 & 0x300000000) == 0) && (!CARRY4((uint)uVar8,uVar12))) &&
      ((ulong)((uint)uVar8 + uVar12) <=
       *(ulong *)(local_38 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8 + 200))) &&
     (uVar9 <= uVar11)) {
    if ((ulong)uVar2 == 0) {
      return;
    }
    uVar7 = lVar6 + (ulong)uVar12 + uVar7 >> 2;
    uVar9 = 0;
    do {
      *(ulong *)(uVar11 + 8 + (uVar9 & 0xffffffff) * 4) =
           (*(ulong *)(uVar11 + 8 + (uVar9 & 0xffffffff) * 4) & 0xffff000000000003) +
           (uVar7 & 0x3fffffffffff) * 4;
      uVar7 = uVar7 + 1;
      uVar9 = uVar9 + 4;
    } while (uVar8 - uVar9 != 0);
    return;
  }
LAB_0006558b:
  IOAccelContext2::setContextError(uVar10);
  return;
}



// IGAccelGLContext::process_token_BindQueryStoreRegisterToMemoryList(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindQueryStoreRegisterToMemoryList
          (IGAccelGLContext *this,ulong *param_1)

{
  IOAccelShared2 IVar1;
  uint uVar2;
  long lVar3;
  char cVar4;
  uint uVar5;
  ulong uVar6;
  undefined8 uVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  uint uVar12;
  uint uVar13;
  IOAccelShared2 *pIVar14;
  ulong uVar15;
  IOAccelShared2 *local_38;
  
  uVar10 = param_1[3];
  uVar12 = (uint)this;
  if (*(ulong *)(this + 0x628) < uVar10 + 0x218) {
LAB_0006565d:
    IOAccelContext2::setContextError(uVar12);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  uVar11 = (ulong)*(uint *)(uVar10 + 0x10);
  uVar13 = *(uint *)(uVar10 + 0x10) * 4;
  if ((int)uVar13 < 0) goto LAB_0006565d;
  uVar15 = *param_1;
  uVar9 = param_1[1];
  uVar6 = uVar15 - uVar9;
  if (((long)uVar6 < -3) || ((int)(((uint)param_1[2] >> 2) - (int)(uVar6 >> 2)) < (int)uVar13))
  goto LAB_0006565d;
  uVar5 = *(uint *)(uVar10 + 8);
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if ((*(long *)(*(long *)(this + 0x5b8) + 0x6d0) == 0) ||
       (*(uint *)(*(long *)(*(long *)(*(long *)(this + 0x5b8) + 0x6d0) + 0x38) + 0x100) != uVar5)) {
      local_38 = (IOAccelShared2 *)0x0;
      cVar4 = IOAccelContext2::lookupResource(uVar12,(void **)(ulong)uVar5);
      if ((cVar4 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      uVar15 = *param_1;
    }
    if (uVar13 == 0) {
      return;
    }
    if (uVar15 == 0) {
      return;
    }
    uVar10 = 0;
    do {
      *(undefined4 *)(uVar15 + uVar10 * 4) = 0;
      uVar10 = uVar10 + 1;
    } while (uVar13 != uVar10);
    return;
  }
  uVar13 = *(uint *)(uVar10 + 0xc);
  uVar2 = *(uint *)(uVar10 + 0x14);
  local_38 = (IOAccelShared2 *)0x0;
  pIVar14 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x6d0);
  if ((pIVar14 == (IOAccelShared2 *)0x0) || (*(uint *)(*(long *)(pIVar14 + 0x38) + 0x100) != uVar5))
  {
    unbind_texture((long *)this,param_1,0xda);
    uVar7 = bind_texture(this,(long)param_1,uVar5,0xda,'\0',(long *)&local_38);
    pIVar14 = local_38;
    if ((char)uVar7 == '\0') {
      if ((local_38 != (IOAccelShared2 *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        return;
      }
      goto LAB_0006586f;
    }
  }
  else {
    local_38 = pIVar14;
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar14);
    }
  }
  lVar8 = (**(code **)(**(long **)(pIVar14 + 0x40) + 0x130))();
  IVar1 = pIVar14[0x14];
  if (IVar1 == (IOAccelShared2)0x0) {
LAB_0006575b:
    uVar6 = *(ulong *)(pIVar14 + 0xf8);
  }
  else if (IVar1 == (IOAccelShared2)0x82) {
    uVar6 = (ulong)*(uint *)(pIVar14 + 0xfc);
  }
  else {
    if (IVar1 == (IOAccelShared2)0x80) goto LAB_0006575b;
    uVar6 = 0;
  }
  if ((uVar2 == 4) || (uVar2 == 8)) {
    lVar3 = uVar11 * uVar2;
    uVar5 = (uint)lVar3;
    if (((int)((ulong)lVar3 >> 0x20) == 0) &&
       (((!CARRY4(uVar5,uVar13) &&
         ((ulong)(uVar5 + uVar13) <=
          *(ulong *)(local_38 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8 + 200))) &&
        (uVar9 <= uVar15)))) {
      if (uVar11 == 0) {
        return;
      }
      uVar6 = lVar8 + (ulong)uVar13 + uVar6;
      uVar9 = 0;
      uVar12 = 0;
      do {
        if (*(int *)(uVar10 + 0x18 + uVar9 * 4) != 0) {
          *(ulong *)(uVar15 + 8 + (ulong)uVar12 * 4) =
               *(ulong *)(uVar15 + 8 + (ulong)uVar12 * 4) & 0xffff000000000003 |
               uVar6 & 0xfffffffffffc;
          uVar12 = uVar12 + 4;
        }
        uVar6 = uVar6 + uVar2;
        uVar9 = uVar9 + 1;
      } while (uVar11 != uVar9);
      return;
    }
  }
LAB_0006586f:
  IOAccelContext2::setContextError(uVar12);
  return;
}



// IGAccelGLContext::process_token_BindQueryReportPerfCount(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindQueryReportPerfCount(IGAccelGLContext *this,long *param_1)

{
  IOAccelShared2 IVar1;
  char cVar2;
  undefined8 uVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  uint uVar7;
  ulong *puVar8;
  IOAccelShared2 *pIVar9;
  IOAccelShared2 *local_38;
  
  lVar6 = param_1[3];
  uVar7 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar6 + 0x10U) {
LAB_00065984:
    IOAccelContext2::setContextError(uVar7);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar8 = (ulong *)*param_1;
  if (((long)puVar8 - param_1[1] < -3) ||
     ((int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar8 - param_1[1]) >> 2)) < 4))
  goto LAB_00065984;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if ((*(long *)(*(long *)(this + 0x5b8) + 0x6d0) == 0) ||
       (*(uint *)(*(long *)(*(long *)(*(long *)(this + 0x5b8) + 0x6d0) + 0x38) + 0x100) !=
        *(uint *)(lVar6 + 8))) {
      local_38 = (IOAccelShared2 *)0x0;
      cVar2 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)*(uint *)(lVar6 + 8));
      if ((cVar2 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      puVar8 = (ulong *)*param_1;
    }
    if (puVar8 == (ulong *)0x0) {
      return;
    }
    lVar6 = 0;
    do {
      *(undefined4 *)((long)puVar8 + lVar6 * 4) = 0;
      lVar6 = lVar6 + 1;
    } while (lVar6 != 4);
    return;
  }
  local_38 = (IOAccelShared2 *)0x0;
  pIVar9 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x6d0);
  if ((pIVar9 == (IOAccelShared2 *)0x0) ||
     (*(int *)(*(long *)(pIVar9 + 0x38) + 0x100) != *(int *)(lVar6 + 8))) {
    unbind_texture((long *)this,param_1,0xda);
    uVar3 = bind_texture(this,(long)param_1,*(uint *)(lVar6 + 8),0xda,'\0',(long *)&local_38);
    pIVar9 = local_38;
    if ((char)uVar3 == '\0') {
      if ((local_38 != (IOAccelShared2 *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        return;
      }
      goto LAB_00065aeb;
    }
  }
  else {
    local_38 = pIVar9;
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar9);
    }
  }
  lVar4 = (**(code **)(**(long **)(pIVar9 + 0x40) + 0x130))();
  IVar1 = pIVar9[0x14];
  if (IVar1 == (IOAccelShared2)0x0) {
LAB_00065a06:
    uVar5 = *(ulong *)(pIVar9 + 0xf8);
  }
  else if (IVar1 == (IOAccelShared2)0x82) {
    uVar5 = (ulong)*(uint *)(pIVar9 + 0xfc);
  }
  else {
    if (IVar1 == (IOAccelShared2)0x80) goto LAB_00065a06;
    uVar5 = 0;
  }
  if ((ulong)*(uint *)(lVar6 + 0xc) + 0x100 <=
      *(ulong *)(local_38 + (ulong)(*(long *)(local_38 + 0x88) == 0) * 8 + 200)) {
    lVar6 = uVar5 + lVar4 + (ulong)*(uint *)(lVar6 + 0xc);
    *(short *)(puVar8 + 1) = (short)((ulong)lVar6 >> 0x20);
    *puVar8 = *puVar8 & 0x3fffffffff | (ulong)((uint)lVar6 & 0xffffffc0) << 0x20;
    return;
  }
LAB_00065aeb:
  IOAccelContext2::setContextError(uVar7);
  return;
}



// IGAccelGLContext::process_token_BindConditionalQuery(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_BindConditionalQuery(IGAccelGLContext *this,long *param_1)

{
  IOAccelShared2 IVar1;
  long lVar2;
  char cVar3;
  uint uVar4;
  undefined8 uVar5;
  long lVar6;
  IGAccelTask *this_00;
  ulong uVar7;
  uint uVar8;
  ulong *puVar9;
  uint uVar10;
  IOAccelShared2 *pIVar11;
  ulong uVar12;
  IOAccelShared2 *local_38;
  
  lVar2 = param_1[3];
  uVar8 = (uint)this;
  if (*(ulong *)(this + 0x628) < lVar2 + 0x14U) {
LAB_00065b9e:
    IOAccelContext2::setContextError(uVar8);
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  puVar9 = (ulong *)*param_1;
  if (((long)puVar9 - param_1[1] < -3) ||
     (uVar10 = (*(uint *)(*(long *)(this + 0x5a8) + 0xf6a) >> 0x15 & 1) * 3 + 9,
     (int)((*(uint *)(param_1 + 2) >> 2) - (int)((ulong)((long)puVar9 - param_1[1]) >> 2)) <
     (int)uVar10)) goto LAB_00065b9e;
  if (*(char *)((long)param_1 + 0x3c) == '\0') {
    if ((*(long *)(*(long *)(this + 0x5b8) + 0x6d0) == 0) ||
       (*(uint *)(*(long *)(*(long *)(*(long *)(this + 0x5b8) + 0x6d0) + 0x38) + 0x100) !=
        *(uint *)(lVar2 + 8))) {
      local_38 = (IOAccelShared2 *)0x0;
      cVar3 = IOAccelContext2::lookupResource(uVar8,(void **)(ulong)*(uint *)(lVar2 + 8));
      if ((cVar3 != '\0') && (*(long *)(this + 0x630) == 0)) {
        IOAccelResource2::clientRelease(local_38);
      }
      puVar9 = (ulong *)*param_1;
    }
    if (puVar9 == (ulong *)0x0) {
      return;
    }
    uVar12 = 0;
    do {
      *(undefined4 *)((long)puVar9 + uVar12 * 4) = 0;
      uVar12 = uVar12 + 1;
    } while (uVar10 != uVar12);
    return;
  }
  local_38 = (IOAccelShared2 *)0x0;
  pIVar11 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + 0x6d0);
  if ((pIVar11 == (IOAccelShared2 *)0x0) ||
     (*(int *)(*(long *)(pIVar11 + 0x38) + 0x100) != *(int *)(lVar2 + 8))) {
    unbind_texture((long *)this,param_1,0xda);
    uVar5 = bind_texture(this,(long)param_1,*(uint *)(lVar2 + 8),0xda,'\0',(long *)&local_38);
    pIVar11 = local_38;
    if ((char)uVar5 == '\0') {
      if ((local_38 != (IOAccelShared2 *)0x0) && (((byte)local_38[0xe] & 0x10) == 0)) {
        *(undefined1 *)((long)param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        return;
      }
      IOAccelContext2::setContextError(uVar8);
      return;
    }
  }
  else {
    local_38 = pIVar11;
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(pIVar11);
    }
  }
  lVar6 = (**(code **)(**(long **)(pIVar11 + 0x40) + 0x130))();
  IVar1 = pIVar11[0x14];
  if (IVar1 != (IOAccelShared2)0x0) {
    if (IVar1 == (IOAccelShared2)0x82) {
      uVar12 = (ulong)*(uint *)(pIVar11 + 0xfc);
      goto LAB_00065d35;
    }
    if (IVar1 != (IOAccelShared2)0x80) {
      uVar12 = 0;
      goto LAB_00065d35;
    }
  }
  uVar12 = *(ulong *)(pIVar11 + 0xf8);
LAB_00065d35:
  uVar8 = *(uint *)(lVar2 + 0xc);
  uVar10 = *(uint *)(lVar2 + 0x10);
  uVar4 = 0;
  if ((*(uint *)(*(long *)(this + 0x5a8) + 0xf6a) >> 0x15 & 1) != 0) {
    *puVar9 = *puVar9 & 0xffffffffffbd00ff | 0x20400;
    this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
    uVar7 = IGAccelTask::getScratchGPUVirtualAddress(this_00);
    uVar7 = uVar7 >> 2 & 0x3fffffffffff;
    *puVar9 = *puVar9 & 0x3ffffffff | uVar7 << 0x22;
    *(uint *)(puVar9 + 1) = (uint)(uVar7 >> 0x1e) | (uint)*(ushort *)((long)puVar9 + 10) << 0x10;
    uVar4 = 3;
  }
  uVar7 = (ulong)uVar10 + uVar12 + lVar6 >> 2 & 0x3fffffffffff;
  *(ulong *)((long)puVar9 + (ulong)uVar4 * 4 + 8) =
       (*(ulong *)((long)puVar9 + (ulong)uVar4 * 4 + 8) & 0xffff000000000003) + uVar7 * 4;
  *(ulong *)(this + 0x1340) = uVar7;
  uVar12 = (ulong)uVar8 + uVar12 + lVar6 >> 2 & 0x3fffffffffff;
  *(ulong *)((long)puVar9 + (ulong)(uVar4 | 4) * 4 + 8) =
       (*(ulong *)((long)puVar9 + (ulong)(uVar4 | 4) * 4 + 8) & 0xffff000000000003) + uVar12 * 4;
  *(ulong *)(this + 0x1348) = uVar12;
  return;
}



// IGAccelGLContext::process_token_RequestPriorityLevel(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::process_token_RequestPriorityLevel(IGAccelGLContext *this,long param_1)

{
  byte bVar1;
  long lVar2;
  uint param1;
  IGAccelTask *this_00;
  char local_58 [32];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  lVar2 = *(long *)(param_1 + 0x18);
  if (*(ulong *)(this + 0x628) < lVar2 + 0xcU) {
    IOAccelContext2::setContextError((uint)this);
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  else if (*(char *)(param_1 + 0x3c) != '\0') {
    bVar1 = *(byte *)(lVar2 + 9);
    if (3 < bVar1) {
      if (*(long *)__got::___stack_chk_guard == local_38) {
        IOAccelContext2::setContextError((uint)this);
        return;
      }
      goto LAB_00065fce;
    }
    if (bVar1 != *(byte *)(*(long *)(this + 0x1298) + 0x78)) {
      if (((3U >> (bVar1 & 0xf) & 1) == 0) || (this[0x590] != (IGAccelGLContext)0x0)) {
        *(uint *)(this + 0x1358) = (uint)*(byte *)(lVar2 + 8);
        this_00 = (IGAccelTask *)(**(code **)(*(long *)this + 0x968))(this);
        IGAccelTask::setRCSSchedPriority(this_00,bVar1);
        if (*(long *)__got::___stack_chk_guard == local_38) {
          IGHardwareContext::setPriorityUpdated(*(IGHardwareContext **)(this + 0x1298),1);
          return;
        }
        goto LAB_00065fce;
      }
      local_58[8] = '\0';
      local_58[9] = '\0';
      local_58[10] = '\0';
      local_58[0xb] = '\0';
      local_58[0xc] = '\0';
      local_58[0xd] = '\0';
      local_58[0xe] = '\0';
      local_58[0xf] = '\0';
      local_58[0] = '\0';
      local_58[1] = '\0';
      local_58[2] = '\0';
      local_58[3] = '\0';
      local_58[4] = '\0';
      local_58[5] = '\0';
      local_58[6] = '\0';
      local_58[7] = '\0';
      local_58[0x10] = '\0';
      local_58[0x11] = '\0';
      local_58[0x12] = '\0';
      local_58[0x13] = '\0';
      bVar1 = *(byte *)(*(long *)(this + 0x1298) + 0x88);
      param1 = (**(code **)(*(long *)this + 0x970))(this);
      _proc_name(param1,local_58,0x14);
      if (this[0x135c] == (IGAccelGLContext)0x0) {
        _IOLog("[IGPU] [IGPU][GL] (pid=%u,name=%s,windowserver=%d) Priority change requested, but is not entitled!\n"
               ,param1,local_58,bVar1);
        _kprintf("[IGPU] [IGPU][GL] (pid=%u,name=%s,windowserver=%d) Priority change requested, but is not entitled!\n"
                 ,param1,local_58,(uint)bVar1);
        this[0x135c] = (IGAccelGLContext)0x1;
      }
    }
  }
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
LAB_00065fce:
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::clear()

int __thiscall IGHashTable<>::clear(IGHashTable<> *this)

{
  long lVar1;
  long *plVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  char *pcVar6;
  ulong uVar7;
  
  lVar4 = *(long *)(this + 8);
  if ((lVar4 != 0) && (*(long *)(lVar4 + 8) != 0)) {
    lVar5 = *(long *)(lVar4 + 0x10);
    uVar7 = 0;
    do {
      lVar1 = *(long *)(lVar5 + uVar7 * 0x18);
      if (lVar1 != 0) {
        for (lVar4 = *(long *)(lVar1 + 0x10); lVar4 != 0; lVar4 = *(long *)(lVar4 + 0x10)) {
          if (*(long *)(lVar4 + 0x18) != lVar1 + 0x10) {
            pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
            goto LAB_000660dc;
          }
          if (**(long **)(lVar1 + 0x18) != lVar1) goto LAB_000660d5;
          *(long **)(lVar4 + 0x18) = *(long **)(lVar1 + 0x18);
          **(long **)(lVar1 + 0x18) = lVar4;
          _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                           kalloc_type_view_19);
          lVar1 = lVar4;
        }
        plVar2 = *(long **)(lVar1 + 0x18);
        if (*plVar2 != lVar1) {
LAB_000660d5:
          pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_000660dc:
                    // WARNING: Subroutine does not return
          _panic(pcVar6,lVar1,0x339,"IGHash.h",0x339);
        }
        *(long **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + uVar7 * 0x18) = plVar2;
        *plVar2 = 0;
        _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                         kalloc_type_view_19,lVar1);
        lVar4 = *(long *)(this + 8);
        lVar5 = *(long *)(lVar4 + 0x10);
      }
      *(undefined8 *)(lVar5 + 0x10 + uVar7 * 0x18) = 0;
      uVar7 = uVar7 + 1;
    } while (uVar7 < *(ulong *)(lVar4 + 8));
  }
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  iVar3 = shrinkIfNeeded(this);
  return iVar3;
}



// IGAccelGLContext::contextStop()

void __thiscall IGAccelGLContext::contextStop(IGAccelGLContext *this)

{
  IGHashTable<> *this_00;
  long lVar1;
  long *plVar2;
  long local_60;
  ulong *local_58;
  undefined4 local_50;
  IGHashTable<> *local_48;
  undefined1 local_40;
  long local_38;
  ulong local_30;
  
  IGAccelEventMachine::finishEvent
            (*(IGAccelEventMachine **)(*(long *)(this + 0x5a8) + 0x380),this + 0x5d0,0x41);
  if (*(IGHardwareContext **)(this + 0x1298) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x1298),0);
    (**(code **)(**(long **)(this + 0x1298) + 0x28))();
    *(undefined8 *)(this + 0x1298) = 0;
  }
  this_00 = (IGHashTable<> *)(this + 0x1270);
  local_50 = 0;
  local_38 = 0;
  local_40 = 1;
  local_48 = this_00;
  IGHashTable<>::Iterator::next((Iterator *)&local_60);
  lVar1 = **(long **)(this + 0x1278);
  while ((local_60 != lVar1 || (local_58 != (ulong *)0x0))) {
    local_30 = *local_58;
    plVar2 = (long *)IGHashTable<>::operator[](this_00,&local_30);
    plVar2 = (long *)*plVar2;
    (**(code **)(*plVar2 + 0x140))(plVar2);
    (**(code **)(*(long *)plVar2[3] + 0x28))();
    (**(code **)(*plVar2 + 0x28))(plVar2);
    IGHashTable<>::Iterator::next((Iterator *)&local_60);
  }
  if (local_38 != 0) {
    IGHashTable<>::shrinkIfNeeded(local_48);
  }
  IGHashTable<>::clear(this_00);
  if (*(long **)(this + 0x12a0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x12a0) + 0x28))();
  }
  *(undefined8 *)(this + 0x12a0) = 0;
  if (*(long **)(this + 0x12a8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x12a8) + 0x28))();
  }
  *(undefined8 *)(this + 0x12a8) = 0;
  dtHookSwCtxDestroy();
  IGTelemetryManager::onConnectionStop
            (*(IGTelemetryManager **)(*(long *)(this + 0x5a8) + 0xf18),(long)(this + 0x12d0),0);
  (**(code **)(__got::vtable + 0x9f8))(this);
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::operator[](unsigned long long const&)

long __thiscall IGHashTable<>::operator[](IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  IGHashTable<> *this_00;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  void *pvVar4;
  void *pvVar5;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  IGHashTable<> *local_40;
  undefined8 local_38;
  long local_30;
  
  local_48 = 0;
  local_50 = 0;
  local_58 = 0;
  local_30 = 0;
  local_38 = 1;
  local_40 = this;
  Iterator::next((Iterator *)&local_58);
  this_00 = local_40;
  lVar1 = *(long *)(local_40 + 8);
  uVar2 = slotIndex(local_40,param_1);
  pvVar5 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
  pvVar4 = (void *)0x0;
  if (pvVar5 != (void *)0x0) {
    do {
      iVar3 = _memcmp(pvVar5,param_1,8);
      pvVar4 = pvVar5;
      if (iVar3 == 0) break;
      pvVar5 = *(void **)((long)pvVar5 + 0x10);
      pvVar4 = (void *)0x0;
    } while (pvVar5 != (void *)0x0);
  }
  if (local_30 != 0) {
    shrinkIfNeeded(this_00);
  }
  return (long)pvVar4 + 8;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::beginCommandStream(IOAccelCommandStreamInfo&)

void __cdecl IGAccelGLContext::beginCommandStream(long *param_1)

{
  IGHardwareContext *this;
  char cVar1;
  long lVar2;
  
  cVar1 = IGHardwareContext::isPriorityUpdated((IGHardwareContext *)param_1[0x253]);
  if (cVar1 != '\0') {
    this = (IGHardwareContext *)param_1[0x253];
    lVar2 = (**(code **)(*param_1 + 0x968))(param_1);
    IGHardwareContext::updateSchedPriority(this,*(char *)(lVar2 + 0x2b8));
    IGHardwareContext::setPriorityUpdated((IGHardwareContext *)param_1[0x253],0);
  }
  (**(code **)(*(long *)param_1[600] + 0x148))();
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(param_1[0xb5] + 0xe18),param_1[0x26a]);
  dtHookPrepareQueueKMD();
  *(long *)(param_1[0x253] + 0x80) = param_1[0x26a];
  *(undefined1 *)(param_1 + 0x259) = 1;
  return;
}



// IGAccelGLContext::endCommandStream(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelGLContext::endCommandStream
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  long *plVar4;
  undefined1 uVar5;
  char cVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  undefined8 uVar10;
  
  uVar10 = dtHookSubmitQueueKMD();
  *(undefined8 *)(*(long *)((long)this + 0x1298) + 0x80) = *(undefined8 *)((long)this + 0x1350);
  uVar2 = *(uint *)(param_10 + 0x34);
  if (uVar2 == 0) {
    IGAccelFIFOChannel::submitStampCommand
              (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               *(void **)((long)this + 0x12c0));
  }
  else {
    if (uVar2 < 3) {
      IGAccelFIFOChannel::submitStampCommand
                (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(void **)((long)this + 0x12c0));
    }
    else {
      lVar9 = *(long *)((long)this + 0x5a8);
      IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar9 + 0x388) + 0x58),1);
      piVar1 = (int *)(lVar9 + 0x1a4);
      *piVar1 = *piVar1 + uVar2 * 4 + -8;
      uVar3 = *(undefined4 *)(*(long *)((long)this + 0x12c0) + 0x20);
      lVar9 = *(long *)((long)this + 0x5a8);
      if ((*(uint *)(&DAT_000011c0 + lVar9) & 0x18000) == 0) {
        uVar5 = (**(code **)(**(long **)(lVar9 + 0x380) + 0x1c8))
                          (*(long **)(lVar9 + 0x380),&DAT_000011d8 + lVar9,
                           &DAT_000012f8 + (long)this,uVar3);
        *(undefined1 *)((long)this + 0x1338) = uVar5;
      }
      lVar9 = *(long *)((long)this + 0x12e0);
      if (lVar9 != 0) {
        lVar8 = 0;
        do {
          lVar7 = *(long *)(*(long *)((long)this + 0x12f0) + lVar8 * 8);
          plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
          uVar5 = (**(code **)(*plVar4 + 0x1c8))
                            (plVar4,(ulong)*(byte *)(lVar7 + 0x15) * 0x40 + *(long *)(lVar7 + 0x38),
                             &DAT_000012f8 + (long)this,uVar3);
          *(undefined1 *)((long)this + 0x1338) = uVar5;
          lVar8 = lVar8 + 1;
        } while (lVar9 != lVar8);
      }
      lVar9 = *(long *)((long)this + 0xfe8);
      if (lVar9 == 0) {
        cVar6 = *(char *)((long)this + 0x1338);
      }
      else {
        plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        cVar6 = (**(code **)(*plVar4 + 0x1c8))
                          (plVar4,(ulong)*(byte *)(lVar9 + 0x16) * 0x40 + *(long *)(lVar9 + 0x38),
                           &DAT_000012f8 + (long)this,uVar3);
        *(char *)((long)this + 0x1338) = cVar6;
      }
      if (cVar6 == '\0') {
        plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        cVar6 = (**(code **)(*plVar4 + 0x1f0))
                          (plVar4,0,&DAT_000012f8 + (long)this,*(long *)((long)this + 0x12c0),
                           *(undefined4 *)(*(long *)((long)this + 0x12c0) + 0x20));
        if (cVar6 == '\0') {
          plVar4 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
          (**(code **)(*plVar4 + 0x188))(plVar4,&DAT_000012f8 + (long)this);
        }
      }
      lVar9 = *(long *)((long)this + 0xfe0);
      uVar2 = *(uint *)(param_10 + 0x30);
      *(ulong *)(*(long *)((long)this + 0x618) + 0x20) =
           (ulong)(uVar2 & 0xfffffffc) + *(long *)(param_10 + 8);
      lVar7 = (**(code **)(**(long **)(lVar9 + 0x40) + 0x128))();
      lVar8 = *(long *)((long)this + 0x618);
      *(ulong *)(lVar8 + 0x18) = lVar7 + (ulong)uVar2;
      *(int *)(lVar8 + 0x30) = *(int *)(param_10 + 0x34) + -2;
      if (*(int *)((long)this + 0x1250) != 0) {
        if (_graphicsTracePointEnable != 0) {
          dtHookTrace();
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            _kernel_debug(0x85a000e0,0x124,*(uintptr_t *)((long)this + 0x1258),
                          *(uintptr_t *)((long)this + 0x1260),
                          (ulong)(*(int *)(*(long *)((long)this + 0x12c0) + 0x178) + 1),0);
          }
        }
        *(undefined4 *)((long)this + 0x1250) = 0;
        lVar8 = *(long *)((long)this + 0x618);
      }
      (**(code **)(**(long **)((long)this + 0x12c0) + 0x130))(*(long **)((long)this + 0x12c0),lVar8)
      ;
      (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                (*(long **)((long)this + 0x12c0),(long)this + 0x5d0);
      (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                (*(long **)((long)this + 0x12c0),*(long *)(lVar9 + 0x40) + 0x38);
      lVar9 = 0;
      do {
        lVar8 = *(long *)(*(long *)((long)this + 0x5b8) + lVar9 * 8);
        if (lVar8 != 0) {
          (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                    (*(long **)((long)this + 0x12c0),
                     (ulong)*(byte *)(lVar8 + 0x15) * 0x40 + *(long *)(lVar8 + 0x38));
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != 0xda);
      lVar9 = 0;
      do {
        lVar8 = *(long *)(*(long *)((long)this + 0x5b8) + 0x6d0 + lVar9 * 8);
        if (lVar8 != 0) {
          (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                    (*(long **)((long)this + 0x12c0),
                     (ulong)*(byte *)(lVar8 + 0x15) * 0x40 + *(long *)(lVar8 + 0x38));
          lVar8 = *(long *)(*(long *)((long)this + 0x5b8) + 0x6d0 + lVar9 * 8);
          (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                    (*(long **)((long)this + 0x12c0),
                     (ulong)*(byte *)(lVar8 + 0x16) * 0x40 + *(long *)(lVar8 + 0x38));
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != 0x1b);
      lVar9 = *(long *)((long)this + 0xfe8);
      if (lVar9 != 0) {
        (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                  (*(long **)((long)this + 0x12c0),
                   (ulong)*(byte *)(lVar9 + 0x15) * 0x40 + *(long *)(lVar9 + 0x38));
      }
      lVar9 = *(long *)((long)this + 0x12e0);
      if (lVar9 != 0) {
        lVar8 = 0;
        do {
          lVar7 = *(long *)(*(long *)((long)this + 0x12f0) + lVar8 * 8);
          (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                    (*(long **)((long)this + 0x12c0),
                     (ulong)*(byte *)(lVar7 + 0x15) * 0x40 + *(long *)(lVar7 + 0x38));
          (**(code **)(**(long **)((long)this + 0x12c0) + 0x140))
                    (*(long **)((long)this + 0x12c0),
                     (ulong)*(byte *)(lVar7 + 0x16) * 0x40 + *(long *)(lVar7 + 0x38));
          lVar8 = lVar8 + 1;
        } while (lVar9 != lVar8);
      }
    }
    *(int *)(param_10 + 0x30) = *(int *)(param_10 + 0x30) + *(int *)(param_10 + 0x34) * 4;
    *(undefined8 *)(param_10 + 0x34) = 0;
  }
  *(undefined1 *)((long)this + 0x12c8) = 0;
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)((long)this + 0x5a8) + 0xe18));
  return;
}



// IGAccelGLContext::processDataBuffers(unsigned int)

undefined4 __thiscall
IGAccelGLContext::processDataBuffers(IGAccelGLContext *this,undefined4 param_1)

{
  undefined4 uVar1;
  long lVar2;
  IGHardwareContext *pIVar3;
  
  if (*(long *)(this + 0x1298) == 0) {
    IOGraphicsAccelerator2::acceleratorWaitEnabled();
    lVar2 = (**(code **)(*(long *)this + 0x968))(this);
    pIVar3 = IGHardwareContext::withOptions
                       (lVar2,(undefined8 *)&g_cInitGfxHwCtxParamsForGraphicsGL,2);
    *(IGHardwareContext **)(this + 0x1298) = pIVar3;
    if (pIVar3 == (IGHardwareContext *)0x0) {
      return 0x80000000;
    }
    *(undefined8 *)(this + 0x12c0) = *(undefined8 *)(pIVar3 + 0xb0);
  }
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5a8) + 0xe18),
             *(undefined8 *)(this + 0x1350));
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(this + 0x1298) + 0x80) = *(undefined8 *)(this + 0x1350);
  (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x148))
            (*(long **)(*(long *)(this + 0x5a8) + 0x380),this + 0x12f8);
  this[0x1338] = (IGAccelGLContext)0x1;
  uVar1 = (**(code **)(__got::vtable + 0xa38))(this,param_1);
  *(undefined8 *)(this + 0x12e0) = 0;
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x5a8) + 0xe18));
  return uVar1;
}



// IGAccelGLContext::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::processSidebandToken(IGAccelGLContext *this,long param_1)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  code *UNRECOVERED_JUMPTABLE;
  
  if (*(uint *)(param_1 + 0x34) <= (uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0x30)) >> 2)
  {
    if (-0x5701 < (short)*(ushort *)(param_1 + 0x20)) {
                    // WARNING: Could not recover jumptable at 0x00066a18. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(__got::vtable + 0xa20))();
      return;
    }
    lVar1 = *(long *)(this + 0x1240);
    lVar3 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x80) * 0x20;
    uVar2 = *(ulong *)(lVar1 + 0x10 + lVar3);
    if ((uVar2 == 0) || (*(ushort *)(param_1 + 0x22) <= uVar2)) {
      UNRECOVERED_JUMPTABLE = *(code **)(lVar1 + lVar3);
      if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
        UNRECOVERED_JUMPTABLE =
             *(code **)(UNRECOVERED_JUMPTABLE + *(long *)(this + *(long *)(lVar1 + 8 + lVar3)) + -1)
        ;
      }
                    // WARNING: Could not recover jumptable at 0x00066a35. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE)();
      return;
    }
  }
  IOAccelContext2::setContextError((uint)this);
  return;
}



// IGAccelGLContext::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelGLContext::discardSidebandToken(IGAccelGLContext *this,long param_1)

{
  if (*(short *)(param_1 + 0x20) < -0x5700) {
                    // WARNING: Could not recover jumptable at 0x00066a52. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(long *)this + 0xa10))();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00066a5c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa28))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::getDataBufferLimits()

undefined4 * __cdecl IGAccelGLContext::getDataBufferLimits(undefined4 *param_1,undefined8 param_2)

{
  ___bzero(param_1,0x308);
  (**(code **)(__got::vtable + 0xa00))(param_1,param_2);
  *param_1 = 2;
  *(undefined8 *)(param_1 + 2) = 0x100000010;
  *(undefined8 *)(param_1 + 4) = 0x10000;
  *(undefined8 *)(param_1 + 6) = 0x20000;
  param_1[0xb] = 0x300;
  *(undefined8 *)(param_1 + 0xe) = 0x100000008;
  *(undefined8 *)(param_1 + 0x10) = 0x40000;
  *(undefined8 *)(param_1 + 0x12) = 0x200000;
  param_1[0x17] = 0x300;
  return param_1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::getSurfaceBufferInfo(unsigned int)

undefined8 * __cdecl
IGAccelGLContext::getSurfaceBufferInfo(undefined8 *param_1,long param_2,int param_3)

{
  char cVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  ulong uVar5;
  
  param_1[4] = 0;
  param_1[3] = 0;
  param_1[2] = 0;
  param_1[1] = 0;
  *param_1 = 0;
  if (param_3 == 0xffff) {
    return param_1;
  }
  lVar2 = *(long *)(*(long *)(&DAT_000010d8 + param_2) + 0x28 + (long)param_3 * 8);
  param_1[3] = lVar2;
  if (lVar2 == 0) {
    return param_1;
  }
  if (*(long **)(lVar2 + 0x40) == (long *)0x0) {
    return param_1;
  }
  lVar3 = (**(code **)(**(long **)(lVar2 + 0x40) + 0x130))();
  cVar1 = *(char *)(lVar2 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar5 = (ulong)*(uint *)(lVar2 + 0xfc);
      goto LAB_00066b62;
    }
    if (cVar1 != -0x80) {
      uVar5 = 0;
      goto LAB_00066b62;
    }
  }
  uVar5 = *(ulong *)(lVar2 + 0xf8);
LAB_00066b62:
  param_1[1] = uVar5 + lVar3;
  param_1[2] = *(long *)(lVar2 + 0x40) + 0x38;
  uVar4 = IOAccelResource2::getStorageResource();
  param_1[4] = uVar4;
  *(undefined1 *)param_1 = 1;
  return param_1;
}



// IOAccelResource2::getGPUVirtualAddressForUserProcess() const

long __thiscall IOAccelResource2::getGPUVirtualAddressForUserProcess(IOAccelResource2 *this)

{
  IOAccelResource2 IVar1;
  long lVar2;
  ulong uVar3;
  
  lVar2 = (**(code **)(**(long **)(this + 0x40) + 0x130))();
  IVar1 = this[0x14];
  if (IVar1 != (IOAccelResource2)0x0) {
    if (IVar1 == (IOAccelResource2)0x82) {
      uVar3 = (ulong)*(uint *)(this + 0xfc);
      goto LAB_00066bcd;
    }
    if (IVar1 != (IOAccelResource2)0x80) {
      uVar3 = 0;
      goto LAB_00066bcd;
    }
  }
  uVar3 = *(ulong *)(this + 0xf8);
LAB_00066bcd:
  return uVar3 + lVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::addDataBufferToChannel(IOAccelResource2*, unsigned int)

void __cdecl IGAccelGLContext::addDataBufferToChannel(long param_1,long *param_2)

{
                    // WARNING: Could not recover jumptable at 0x00066bf8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_2 + 400))
            (param_2,*(undefined8 *)(&DAT_000012c0 + param_1),0,*(code **)(*param_2 + 400));
  return;
}



// IGAccelGLContext::removeDataBufferFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelGLContext::removeDataBufferFromChannel
          (IGAccelGLContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00066c16. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)(this + 0x12c0),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelGLContext::removeCurrentResourceFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelGLContext::removeCurrentResourceFromChannel
          (IGAccelGLContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00066c34. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)(this + 0x12c0),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelGLContext::compactCurrentResources(IOAccelResource2*)

undefined8 IGAccelGLContext::compactCurrentResources(void)

{
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::addDrawableToChannel(IOAccelDrawable2*)

void __cdecl IGAccelGLContext::addDrawableToChannel(long param_1,long *param_2,undefined8 param_3)

{
                    // WARNING: Could not recover jumptable at 0x00066c5a. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_2 + 0x120))
            (param_2,*(undefined8 *)(&DAT_000012c0 + param_1),param_3,*(code **)(*param_2 + 0x120));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::removeDrawableFromChannel(IOAccelDrawable2*)

void __cdecl
IGAccelGLContext::removeDrawableFromChannel(long param_1,long *param_2,undefined8 param_3)

{
                    // WARNING: Could not recover jumptable at 0x00066c78. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_2 + 0x128))
            (param_2,*(undefined8 *)(&DAT_000012c0 + param_1),param_3,*(code **)(*param_2 + 0x128));
  return;
}



// IGAccelGLContext::updateDrawable()

void IGAccelGLContext::updateDrawable(void)

{
  return;
}



// IGAccelGLContext::setCompatibleSurfaceMode(unsigned long long*, unsigned long long, int)

undefined8 __thiscall
IGAccelGLContext::setCompatibleSurfaceMode
          (IGAccelGLContext *this,ulong *param_1,ulong param_2,uint param_3)

{
  uint uVar1;
  ulong uVar2;
  ulong uVar3;
  
  uVar3 = (ulong)((uint)param_2 & 0x17000000);
  uVar1 = (uint)*param_1;
  if ((param_3 >> 8 & 1) == 0) {
    uVar2 = (ulong)(uVar1 & 0xe8807fc0);
  }
  else {
    uVar2 = *param_1 & 0xffffffffff807fc0;
    if ((uVar1 & 0x17000000) == uVar3) goto LAB_00066cbb;
    if ((uVar3 != 0) && ((ulong)(uVar1 & 0x17000000) != 0)) {
      return 0;
    }
  }
  uVar2 = uVar2 | uVar3;
LAB_00066cbb:
  if ((uVar2 & 0xffffffffe8ffffff) != (param_2 & 0xffffffffe87fc03f)) {
    return 0;
  }
  *param_1 = uVar3 | uVar2 | (ulong)(uVar1 & 0x7f803f);
  return CONCAT71((uint7)(uint3)((uVar1 & 0x7f803f) >> 8),1);
}



// IGAccelGLContext::addVendorSurfaceRequiredBits(unsigned long long)

void IGAccelGLContext::addVendorSurfaceRequiredBits(void)

{
  return;
}



// IGAccelGLContext::get_temp_allocation_info(IOAccelDrawable2*, unsigned int*, unsigned int*)

void __thiscall
IGAccelGLContext::get_temp_allocation_info
          (IGAccelGLContext *this,long param_1,undefined4 *param_2,undefined4 *param_3)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  ulong uVar4;
  bool bVar5;
  ulong uVar6;
  code **ppcVar7;
  ulong *puVar8;
  ulong uVar9;
  code *pcStack_110;
  ulong local_108 [26];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  pcStack_110 = (code *)0x66d3a;
  ___bzero(local_108,0xd0);
  uVar1 = *(uint *)(this + 0x10b8);
  puVar8 = local_108 + 1;
  uVar6 = 0;
  do {
    if ((uVar1 >> ((uint)uVar6 & 0x1f) & 1) != 0) {
      lVar2 = *(long *)(param_1 + 0x28 + uVar6 * 8);
      uVar3 = *(ulong *)(lVar2 + 200 + (ulong)(*(long *)(lVar2 + 0x88) == 0) * 8);
      uVar4 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)) + 0x90);
      uVar9 = uVar4 - uVar3;
      if (uVar4 < uVar3) {
        *puVar8 = 0;
      }
      else {
        *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)) + 0x90) = uVar9;
        puVar8[-1] = uVar9;
        *puVar8 = uVar3;
        if (uVar9 != 0) goto LAB_00066d94;
      }
      *param_2 = 0;
      *param_3 = 0;
      if (0 < (int)(uint)uVar6) goto LAB_00066dd8;
      goto LAB_00066e19;
    }
LAB_00066d94:
    uVar6 = uVar6 + 1;
    puVar8 = puVar8 + 2;
  } while (uVar6 != 0xd);
  *param_2 = 1;
  *param_3 = *(undefined4 *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)) + 0x30);
  uVar6 = 0xd;
LAB_00066dd8:
  uVar1 = *(uint *)(this + 0x10b8);
  ppcVar7 = &pcStack_110 + uVar6 * 2;
  uVar6 = uVar6 & 0xffffffff;
  do {
    if ((uVar1 >> ((uint)(uVar6 - 1) & 0x1f) & 1) != 0) {
      *(long *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)) + 0x90) =
           (long)(*ppcVar7 + *(long *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)) + 0x90));
    }
    ppcVar7 = ppcVar7 + -2;
    bVar5 = 1 < uVar6;
    uVar6 = uVar6 - 1;
  } while (bVar5);
LAB_00066e19:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  pcStack_110 = mapTransferToGARTIfNeeded;
  ___stack_chk_fail();
}



// IGAccelGLContext::mapTransferToGARTIfNeeded()

void IGAccelGLContext::mapTransferToGARTIfNeeded(void)

{
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::contains(unsigned long long const&) const

undefined8 __thiscall IGHashTable<>::contains(IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  undefined8 uVar4;
  void *pvVar5;
  
  lVar1 = *(long *)(this + 8);
  if (lVar1 != 0) {
    uVar2 = slotIndex(this,param_1);
    pvVar5 = *(void **)(*(long *)(lVar1 + 0x10) + CONCAT44(extraout_var,uVar2) * 0x18);
    if (pvVar5 != (void *)0x0) {
      do {
        iVar3 = _memcmp(pvVar5,param_1,8);
        uVar4 = CONCAT71((int7)(CONCAT44(extraout_var_00,iVar3) >> 8),iVar3 == 0);
        if (iVar3 == 0) {
          return uVar4;
        }
        pvVar5 = *(void **)((long)pvVar5 + 0x10);
      } while (pvVar5 != (void *)0x0);
      return uVar4;
    }
  }
  return 0;
}



// IOGraphicsAccelerator2::acceleratorUnlock()

void __thiscall IOGraphicsAccelerator2::acceleratorUnlock(IOGraphicsAccelerator2 *this)

{
  (**(code **)(*(long *)this + 0x858))(this,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(*(undefined8 *)(this + 0x88));
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::add(unsigned long long const&, IGAccelMemoryMap* const&)

void __thiscall IGHashTable<>::add(IGHashTable<> *this,ulong *param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  undefined4 extraout_var;
  ulong *puVar8;
  
  if (*(long *)(this + 8) != 0) {
    uVar1 = *(ulong *)(*(long *)(this + 8) + 8);
    if ((((uVar1 < 0x4000) && (this[0x20] != (IGHashTable<>)0x0)) &&
        (uVar2 = *(ulong *)(this + 0x10), uVar2 != 0)) &&
       ((0x32 < ((uVar2 - *(long *)(this + 0x18)) * 100) / uVar2 &&
        (0x19 < (ulong)(*(long *)(this + 0x18) * 100) / uVar1)))) {
      resizeAndRehash(this,uVar1 * 2);
    }
    uVar7 = slotIndex(this,param_1);
    puVar8 = (ulong *)_IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::
                                         kalloc_type_view_14);
    if (puVar8 != (ulong *)0x0) {
      *puVar8 = *param_1;
      puVar8[1] = *param_2;
      puVar8[2] = 0;
      lVar6 = CONCAT44(extraout_var,uVar7) * 0x18;
      puVar3 = *(undefined8 **)(*(long *)(*(long *)(this + 8) + 0x10) + 8 + lVar6);
      puVar8[3] = (ulong)puVar3;
      *puVar3 = puVar8;
      lVar4 = *(long *)(*(long *)(this + 8) + 0x10);
      *(ulong **)(lVar4 + 8 + lVar6) = puVar8 + 2;
      lVar5 = *(long *)(lVar4 + 0x10 + lVar6);
      *(long *)(lVar4 + 0x10 + lVar6) = lVar5 + 1;
      *(ulong *)(this + 0x18) = *(long *)(this + 0x18) + (ulong)(lVar5 == 0);
      *(long *)(this + 0x10) = *(long *)(this + 0x10) + 1;
    }
  }
  return;
}



// IGAccelGLContext::streamErrorCleanup(IOAccelCommandStreamInfo&, IGAccelResource*)

void __thiscall
IGAccelGLContext::streamErrorCleanup
          (IGAccelGLContext *this,undefined8 param_1,IOAccelShared2 *param_2)

{
  if (param_2 != (IOAccelShared2 *)0x0) {
    if (*(int *)(param_2 + 0x9c) == *(int *)(*(long *)(this + 0x12c0) + 0x20)) {
      (**(code **)(*(long *)this + 0xa48))(this,param_1,param_2);
    }
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease(param_2);
      return;
    }
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x0006711c)
// WARNING: Removing unreachable block (ram,0x00067122)
// IGAccelGLContext::addSrcMcsResourceData(IOAccelCommandStreamInfo&, blit3d_params_t&, unsigned
// int, bool)

undefined8 __thiscall
IGAccelGLContext::addSrcMcsResourceData
          (IGAccelGLContext *this,long param_1,long param_2,uint param_3,byte param_4)

{
  char cVar1;
  long lVar2;
  uint uVar3;
  
  if (param_3 != 0) {
    uVar3 = (uint)this;
    cVar1 = IOAccelContext2::lookupResource(uVar3,(void **)(ulong)param_3);
    if (cVar1 == '\0') {
      IOAccelContext2::setContextError(uVar3);
    }
    else {
      cVar1 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,0,1,*(undefined8 *)(this + 0x12c0),0,1);
      if (cVar1 == '\0') {
        IOAccelContext2::setContextError(uVar3);
        streamErrorCleanup(this,param_1,(IOAccelShared2 *)0x0);
      }
      else {
        AddSrcResourceEvents((IGVector<> *)(param_2 + 0xc0),0);
        lVar2 = IOAccelResource2::getStorageResource();
        if (lVar2 != 0) {
          AddSrcResourceEvents((IGVector<> *)(param_2 + 0xc0),lVar2);
        }
        IGAccelResource::get_tex_data
                  ((IGAccelResource *)0x0,(long *)(param_2 + 0x20),(undefined4 *)(param_2 + 0x28));
        *(byte *)(param_2 + 0x3d) = *(byte *)(param_2 + 0x3d) & 0xfe | param_4;
        (**(code **)(*(long *)this + 0xa48))(this,param_1,0,*(undefined8 *)(this + 0x12c0));
      }
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcEvents(IGVector<> *param_1,long param_2)

{
  long lVar1;
  
  AddSrcResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddSrcResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x000672a8)
// WARNING: Removing unreachable block (ram,0x000672ae)
// IGAccelGLContext::addDstMcsResourceData(IOAccelCommandStreamInfo&, blit3d_params_t&, unsigned
// int, bool)

undefined8 __thiscall
IGAccelGLContext::addDstMcsResourceData
          (IGAccelGLContext *this,long param_1,long param_2,uint param_3,byte param_4)

{
  char cVar1;
  long lVar2;
  uint uVar3;
  
  if (param_3 != 0) {
    uVar3 = (uint)this;
    cVar1 = IOAccelContext2::lookupResource(uVar3,(void **)(ulong)param_3);
    if (cVar1 == '\0') {
      IOAccelContext2::setContextError(uVar3);
    }
    else {
      cVar1 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,0,1,*(undefined8 *)(this + 0x12c0),1,1);
      if (cVar1 == '\0') {
        IOAccelContext2::setContextError(uVar3);
        streamErrorCleanup(this,param_1,(IOAccelShared2 *)0x0);
      }
      else {
        AddDstResourceEvents((IGVector<> *)(param_2 + 0xc0),0);
        lVar2 = IOAccelResource2::getStorageResource();
        if (lVar2 != 0) {
          AddDstResourceEvents((IGVector<> *)(param_2 + 0xc0),lVar2);
        }
        (*pcRam01000007feedfc37)(0,0,0);
        IGAccelResource::get_tex_data
                  ((IGAccelResource *)0x0,(long *)(param_2 + 0x68),(undefined4 *)(param_2 + 0x70));
        *(byte *)(param_2 + 0x85) = *(byte *)(param_2 + 0x85) & 0xfe | param_4;
        (**(code **)(*(long *)this + 0xa48))(this,param_1,0,*(undefined8 *)(this + 0x12c0));
      }
    }
    return 0;
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstEvents(IGVector<> *param_1,long param_2)

{
  long lVar1;
  
  AddDstResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddDstResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// IGAccelGLContext::bind_texture(IOAccelCommandStreamInfo&, unsigned int, unsigned int, bool,
// IGAccelResource**)

undefined8 __thiscall
IGAccelGLContext::bind_texture
          (IGAccelGLContext *this,long param_1,uint param_2,ulong param_4_00,char param_4,
          long *param_5)

{
  byte bVar1;
  long *plVar2;
  char cVar3;
  undefined8 in_RAX;
  undefined4 uVar6;
  long lVar4;
  undefined8 uVar5;
  IOAccelShared2 *pIVar7;
  uint uVar8;
  
  uVar6 = (undefined4)((ulong)in_RAX >> 0x20);
  uVar8 = (uint)this;
  cVar3 = IOAccelContext2::lookupResource(uVar8,(void **)(ulong)param_2);
  if (cVar3 == '\0') {
    IOAccelContext2::setContextError(uVar8);
LAB_00067469:
    uVar5 = 0;
  }
  else {
    plVar2 = (long *)*param_5;
    if (*(char *)(param_1 + 0x3c) == '\0') {
      (**(code **)(*plVar2 + 400))(plVar2,*(undefined8 *)(this + 0x12c0),param_4);
    }
    else {
      cVar3 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,plVar2,0,*(undefined8 *)(this + 0x12c0),param_4,
                         CONCAT44(uVar6,1));
      if (cVar3 == '\0') {
        pIVar7 = (IOAccelShared2 *)*param_5;
        if ((pIVar7 == (IOAccelShared2 *)0x0) || (((byte)pIVar7[0xe] & 0x10) != 0)) {
          IOAccelContext2::setContextError(uVar8);
          pIVar7 = (IOAccelShared2 *)*param_5;
        }
        else {
          *(undefined1 *)(param_1 + 0x3c) = 0;
          this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        }
        streamErrorCleanup(this,param_1,pIVar7);
        goto LAB_00067469;
      }
    }
    (**(code **)(*(long *)*param_5 + 0x20))();
    if (*(long *)(this + 0x630) == 0) {
      IOAccelResource2::clientRelease((IOAccelShared2 *)*param_5);
    }
    *(long *)(*(long *)(this + 0x5b8) + (param_4_00 & 0xffffffff) * 8) = *param_5;
    lVar4 = IOAccelResource2::getStorageResource();
    if (param_4 == '\0') {
      bVar1 = *(byte *)(lVar4 + 0x16);
    }
    else {
      bVar1 = *(byte *)(lVar4 + 0x15);
    }
    uVar5 = (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                      (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                       *(long *)(lVar4 + 0x38) + (ulong)bVar1 * 0x40,this + 0x12f8,
                       *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20));
    this[0x1338] = SUB81(uVar5,0);
    uVar5 = CONCAT71((int7)((ulong)uVar5 >> 8),1);
  }
  return uVar5;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::unbind_texture(IOAccelCommandStreamInfo&, unsigned int, bool)

void __cdecl IGAccelGLContext::unbind_texture(long *param_1,undefined8 param_2,uint param_3)

{
  ulong uVar1;
  
  uVar1 = (ulong)param_3;
  if (*(long *)(param_1[0xb7] + uVar1 * 8) != 0) {
    (**(code **)(*param_1 + 0xa48))();
    (**(code **)(**(long **)(param_1[0xb7] + uVar1 * 8) + 0x28))();
    *(undefined8 *)(param_1[0xb7] + uVar1 * 8) = 0;
  }
  return;
}



// IGAccelGLContext::get_databuffer_address(unsigned int)

long __thiscall IGAccelGLContext::get_databuffer_address(IGAccelGLContext *this,ulong param_1)

{
  char cVar1;
  long lVar2;
  long lVar3;
  ulong uVar4;
  
  lVar2 = *(long *)(this + 0xfe8);
  if (lVar2 == 0) {
    IOAccelContext2::setContextError((uint)this);
  }
  else {
    lVar3 = (**(code **)(**(long **)(lVar2 + 0x40) + 0x130))();
    cVar1 = *(char *)(lVar2 + 0x14);
    if (cVar1 == '\0') {
LAB_0006750d:
      uVar4 = *(ulong *)(lVar2 + 0xf8);
    }
    else if (cVar1 == -0x7e) {
      uVar4 = (ulong)*(uint *)(lVar2 + 0xfc);
    }
    else {
      if (cVar1 == -0x80) goto LAB_0006750d;
      uVar4 = 0;
    }
    lVar3 = uVar4 + lVar3;
    if (lVar3 != 0) goto LAB_00067544;
  }
  IOAccelContext2::setContextError((uint)this);
  lVar3 = 0;
LAB_00067544:
  return (param_1 & 0xffffffff) + lVar3;
}



// IGAccelGLContext::get_vertexbuffer_address(IOAccelCommandStreamInfo&, unsigned int, unsigned int,
// unsigned int)

long __thiscall
IGAccelGLContext::get_vertexbuffer_address
          (IGAccelGLContext *this,long param_1,uint param_2,uint param_3,ulong param_4)

{
  IOAccelShared2 IVar1;
  IOAccelShared2 *pIVar2;
  char cVar3;
  IGAccelGLContext IVar4;
  long lVar5;
  ulong uVar6;
  uint uVar7;
  
  uVar6 = param_4 & 0xffffffff;
  pIVar2 = *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + uVar6 * 8);
  if (pIVar2 != (IOAccelShared2 *)0x0) {
    if (*(uint *)(*(long *)(pIVar2 + 0x38) + 0x100) == param_2) {
      if (*(long *)(this + 0x630) == 0) {
        IOAccelResource2::clientRelease(pIVar2);
      }
      lVar5 = (**(code **)(**(long **)(pIVar2 + 0x40) + 0x130))();
      IVar1 = pIVar2[0x14];
      if (IVar1 != (IOAccelShared2)0x0) {
        if (IVar1 == (IOAccelShared2)0x82) {
          uVar6 = (ulong)*(uint *)(pIVar2 + 0xfc);
          goto LAB_00067774;
        }
        if (IVar1 != (IOAccelShared2)0x80) {
          uVar6 = 0;
          goto LAB_00067774;
        }
      }
      uVar6 = *(ulong *)(pIVar2 + 0xf8);
      goto LAB_00067774;
    }
    (**(code **)(*(long *)this + 0xa48))(this,param_1,pIVar2,*(undefined8 *)(this + 0x12c0));
    (**(code **)(*(long *)pIVar2 + 0x28))(pIVar2);
    *(undefined8 *)(*(long *)(this + 0x5b8) + uVar6 * 8) = 0;
  }
  uVar7 = (uint)this;
  cVar3 = IOAccelContext2::lookupResource(uVar7,(void **)(ulong)param_2);
  if (cVar3 == '\0') {
    IOAccelContext2::setContextError(uVar7);
    return 0;
  }
  cVar3 = (**(code **)(*(long *)this + 0xa40))
                    (this,param_1,pIVar2,1,*(undefined8 *)(this + 0x12c0),0,1);
  if (cVar3 == '\0') {
    if ((pIVar2 == (IOAccelShared2 *)0x0) || (((byte)pIVar2[0xe] & 0x10) != 0)) {
      IOAccelContext2::setContextError(uVar7);
    }
    else {
      *(undefined1 *)(param_1 + 0x3c) = 0;
      this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
    }
    streamErrorCleanup(this,param_1,pIVar2);
    return 0;
  }
  (**(code **)(*(long *)pIVar2 + 0x20))(pIVar2);
  if (*(long *)(this + 0x630) == 0) {
    IOAccelResource2::clientRelease(pIVar2);
  }
  *(IOAccelShared2 **)(*(long *)(this + 0x5b8) + uVar6 * 8) = pIVar2;
  IVar4 = (IGAccelGLContext)
          (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                    (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                     (ulong)(byte)pIVar2[0x16] * 0x40 + *(long *)(pIVar2 + 0x38),this + 0x12f8,
                     *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20));
  this[0x1338] = IVar4;
  lVar5 = (**(code **)(**(long **)(pIVar2 + 0x40) + 0x130))();
  IVar1 = pIVar2[0x14];
  if (IVar1 != (IOAccelShared2)0x0) {
    if (IVar1 == (IOAccelShared2)0x82) {
      uVar6 = (ulong)*(uint *)(pIVar2 + 0xfc);
      goto LAB_00067774;
    }
    if (IVar1 != (IOAccelShared2)0x80) {
      uVar6 = 0;
      goto LAB_00067774;
    }
  }
  uVar6 = *(ulong *)(pIVar2 + 0xf8);
LAB_00067774:
  return lVar5 + (ulong)param_3 + uVar6;
}



// IGAccelGLContext::get_buffer_address(IOAccelCommandStreamInfo&, unsigned int, unsigned int, bool,
// IGAccelResource*&, unsigned long long&)

bool __thiscall
IGAccelGLContext::get_buffer_address
          (IGAccelGLContext *this,long param_1,uint param_2,int param_3,undefined4 param_5_00,
          long *param_5,long *param_6)

{
  undefined4 uVar1;
  IGAccelGLContext IVar2;
  char cVar3;
  long lVar4;
  IGAccelResource *this_00;
  uint uVar5;
  long *plVar6;
  undefined4 local_34;
  
  local_34 = 0;
  uVar1 = *(undefined4 *)(*(long *)(this + 0x12c0) + 0x20);
  uVar5 = (uint)this;
  if (param_3 == 3) {
    cVar3 = IOAccelContext2::lookupResource(uVar5,(void **)(ulong)param_2);
    if ((cVar3 != '\0') && (*param_5 != 0)) {
      cVar3 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,*param_5,1,*(undefined8 *)(this + 0x12c0),param_5_00,1);
      this_00 = (IGAccelResource *)*param_5;
      if (cVar3 == '\0') {
        if ((this_00 == (IGAccelResource *)0x0) || (((byte)this_00[0xe] & 0x10) != 0)) {
          IOAccelContext2::setContextError(uVar5);
          this_00 = (IGAccelResource *)*param_5;
        }
        else {
          *(undefined1 *)(param_1 + 0x3c) = 0;
          this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
        }
        streamErrorCleanup(this,param_1,(IOAccelShared2 *)this_00);
        return false;
      }
      IGAccelResource::get_tex_data(this_00,param_6,&local_34);
      plVar6 = *(long **)(*(long *)(this + 0x5a8) + 0x380);
      lVar4 = *param_5;
      goto LAB_000677f8;
    }
  }
  else if (param_3 == 1) {
    lVar4 = get_databuffer_address(this,0);
    *param_6 = lVar4;
    plVar6 = *(long **)(*(long *)(this + 0x5a8) + 0x380);
    lVar4 = *(long *)(this + 0xfe8);
LAB_000677f8:
    IVar2 = (IGAccelGLContext)
            (**(code **)(*plVar6 + 0x1c8))
                      (plVar6,(ulong)*(byte *)(lVar4 + 0x16) * 0x40 + *(long *)(lVar4 + 0x38),
                       this + 0x12f8,uVar1);
    this[0x1338] = IVar2;
    return *param_6 != 0;
  }
  IOAccelContext2::setContextError(uVar5);
  return false;
}



// IGAccelGLContext::describeDriverAllocations(IOAccelAllocationInfo*)

void __thiscall
IGAccelGLContext::describeDriverAllocations(IGAccelGLContext *this,IOAccelMemory *param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long *plVar4;
  long local_68;
  ulong *local_60;
  undefined4 local_58;
  IGHashTable<> *local_50;
  undefined1 local_48;
  long local_40;
  ulong local_38;
  
  (**(code **)(__got::vtable + 0xb48))();
  lVar1 = *(long *)(this + 0x1298);
  if (lVar1 != 0) {
    (**(code **)(*(long *)this + 0x970))(this);
    IGHardwareContext::describeDriverAllocations(lVar1,param_1);
  }
  local_58 = 0;
  local_40 = 0;
  local_48 = 1;
  local_50 = (IGHashTable<> *)(this + 0x1270);
  IGHashTable<>::Iterator::next((Iterator *)&local_68);
  lVar1 = **(long **)(this + 0x1278);
  while ((local_68 != lVar1 || (local_60 != (ulong *)0x0))) {
    local_38 = *local_60;
    plVar4 = (long *)IGHashTable<>::operator[]((IGHashTable<> *)(this + 0x1270),&local_38);
    lVar2 = *plVar4;
    if ((lVar2 != 0) && (*(char **)(lVar2 + 0x18) != (char *)0x0)) {
      IOAccelAllocationInfo::addString(param_1,*(char **)(lVar2 + 0x18));
      uVar3 = *(undefined8 *)(lVar2 + 0x18);
      (**(code **)(*(long *)this + 0x970))(this);
      IOAccelAllocationInfo::addPID(param_1,(int)uVar3);
    }
    IGHashTable<>::Iterator::next((Iterator *)&local_68);
  }
  if (local_40 != 0) {
    IGHashTable<>::shrinkIfNeeded(local_50);
  }
  return;
}



// blit3d_params_t::blit3d_params_t()

void __thiscall blit3d_params_t::blit3d_params_t(blit3d_params_t *this)

{
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0xc0),4);
  *(undefined8 *)(this + 0xd8) = 0;
  *(undefined8 *)(this + 0xe0) = 0;
  *(undefined8 *)(this + 0xe8) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0xd8),4);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcDstEvents(wait_update_events&, IGAccelResource*, IGAccelResource*)

void __cdecl AddSrcDstEvents(IGVector<> *param_1,long param_2,long param_3)

{
  long lVar1;
  
  AddSrcResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddSrcResourceEvents(param_1,lVar1);
  }
  AddDstResourceEvents(param_1,param_3);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_3) {
    AddDstResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 5;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3b != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::add(rect_pair_t const&)

void __thiscall IGVector<>::add(IGVector<> *this,undefined8 *param_1)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  
  lVar3 = *(long *)this;
  if (lVar3 == *(long *)(this + 8)) {
    uVar2 = grow(this,lVar3 * 2);
    if ((char)uVar2 == '\0') {
      return;
    }
    lVar3 = *(long *)this;
  }
  *(long *)this = lVar3 + 1;
  lVar1 = *(long *)(this + 0x10);
  lVar3 = lVar3 * 0x20;
  *(undefined8 *)(lVar1 + 0x18 + lVar3) = param_1[3];
  *(undefined8 *)(lVar1 + 0x10 + lVar3) = param_1[2];
  uVar2 = *param_1;
  *(undefined8 *)(lVar1 + 8 + lVar3) = param_1[1];
  *(undefined8 *)(lVar1 + lVar3) = uVar2;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// getIntelSurfaceFormat(unsigned long long, unsigned int)

undefined2 __cdecl getIntelSurfaceFormat(uint param_1,int param_2)

{
  undefined2 *puVar1;
  ulong uVar2;
  
  if (param_2 - 8U < 3) {
    uVar2 = (ulong)(param_1 & 0x17000000) - 0x1000000;
    if (0x6ffffff < uVar2) {
      return 0xd9;
    }
    puVar1 = (undefined2 *)(&DAT_001138e8 + (uVar2 >> 0x17));
  }
  else {
    uVar2 = (ulong)(param_1 & 0xf) - 3;
    if (0xc < uVar2) {
      return 0xc0;
    }
    puVar1 = (undefined2 *)(&DAT_001138f6 + uVar2 * 2);
  }
  return *puVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelGLContext::clip_src_dst_surfaces(int&, int&, int&, int&, int&, int&, int&, int&, int&,
// int&, int&, int&)

void __cdecl
IGAccelGLContext::clip_src_dst_surfaces
          (int *param_1,int *param_2,int *param_3,int *param_4,int *param_5,int *param_6,
          int *param_7,int *param_8,int *param_9,int *param_10,int *param_11,int *param_12)

{
  int iVar1;
  
  if (*param_1 < 1) {
    *param_1 = 1;
  }
  if (*param_2 < 1) {
    *param_2 = 1;
  }
  iVar1 = *param_5;
  if (iVar1 < 0) {
    *param_9 = *param_9 - iVar1;
    iVar1 = 0;
LAB_00067c16:
    *param_5 = iVar1;
  }
  else if (*param_1 < iVar1) {
    *param_9 = *param_9 + (*param_1 - iVar1);
    iVar1 = *param_1;
    goto LAB_00067c16;
  }
  iVar1 = *param_6;
  if (iVar1 < 0) {
    *param_10 = *param_10 - iVar1;
    iVar1 = 0;
LAB_00067c3c:
    *param_6 = iVar1;
  }
  else if (*param_1 < iVar1) {
    *param_10 = *param_10 + (*param_1 - iVar1);
    iVar1 = *param_1;
    goto LAB_00067c3c;
  }
  iVar1 = *param_7;
  if (iVar1 < 0) {
    *param_11 = *param_11 - iVar1;
    iVar1 = 0;
LAB_00067c65:
    *param_7 = iVar1;
  }
  else if (*param_2 < iVar1) {
    *param_11 = *param_11 + (*param_2 - iVar1);
    iVar1 = *param_2;
    goto LAB_00067c65;
  }
  iVar1 = *param_8;
  if (iVar1 < 0) {
    *param_12 = *param_12 - iVar1;
    iVar1 = 0;
LAB_00067c88:
    *param_8 = iVar1;
  }
  else if (*param_2 < iVar1) {
    *param_12 = *param_12 + (*param_2 - iVar1);
    iVar1 = *param_2;
    goto LAB_00067c88;
  }
  iVar1 = *param_9;
  if (iVar1 < 0) {
    *param_5 = *param_5 - iVar1;
    iVar1 = 0;
LAB_00067ca5:
    *param_9 = iVar1;
  }
  else if (*param_3 < iVar1) {
    *param_5 = *param_5 + (*param_3 - iVar1);
    iVar1 = *param_3;
    goto LAB_00067ca5;
  }
  iVar1 = *param_10;
  if (iVar1 < 0) {
    *param_6 = *param_6 - iVar1;
    iVar1 = 0;
LAB_00067cc3:
    *param_10 = iVar1;
  }
  else if (*param_3 < iVar1) {
    *param_6 = *param_6 + (*param_3 - iVar1);
    iVar1 = *param_3;
    goto LAB_00067cc3;
  }
  iVar1 = *param_11;
  if (iVar1 < 0) {
    *param_7 = *param_7 - iVar1;
    iVar1 = 0;
  }
  else {
    if (iVar1 <= *param_4) goto LAB_00067cde;
    *param_7 = *param_7 + (*param_4 - iVar1);
    iVar1 = *param_4;
  }
  *param_11 = iVar1;
LAB_00067cde:
  iVar1 = *param_12;
  if (iVar1 < 0) {
    *param_8 = *param_8 - iVar1;
    iVar1 = 0;
  }
  else {
    if (iVar1 <= *param_4) {
      return;
    }
    *param_8 = *param_8 + (*param_4 - iVar1);
    iVar1 = *param_4;
  }
  *param_12 = iVar1;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddUpdateEvent(wait_update_events&, IOAccelEvent*)

void __cdecl AddUpdateEvent(long param_1,undefined8 param_2)

{
  undefined8 uVar1;
  long lVar2;
  
  lVar2 = *(long *)(param_1 + 0x18);
  if (lVar2 == *(long *)(param_1 + 0x20)) {
    uVar1 = IGVector<>::grow((IGVector<> *)(param_1 + 0x18),lVar2 * 2);
    if ((char)uVar1 == '\0') {
      return;
    }
    lVar2 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar2 + 1;
  *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar2 * 8) = param_2;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddRenderCompression(surface_params_t&, IGAccelResource::ResourceInfoEntry const*)

void __cdecl AddRenderCompression(long *param_1,long param_2)

{
  long lVar1;
  
  if (((param_2 != 0) && (param_1[8] != 0)) && (1 < *(byte *)(param_2 + 0xa0))) {
    *(byte *)((long)param_1 + 0x3d) = *(byte *)((long)param_1 + 0x3d) | 1;
    if ((*(byte *)(param_2 + 0xa1) & 4) == 0) {
      lVar1 = 0;
    }
    else {
      lVar1 = (ulong)*(uint *)(param_2 + 0x50) + *param_1;
    }
    param_1[6] = lVar1;
    param_1[4] = *param_1 + (ulong)*(uint *)(param_2 + 0x40);
    *(undefined4 *)(param_1 + 5) = *(undefined4 *)(param_2 + 0x44);
  }
  return;
}



// IGAccelGLContext::blitAddMcs(IOAccelCommandStreamInfo&, unsigned int, bool,
// SGfxRenderSurfaceState*)

IGAccelResource * __thiscall
IGAccelGLContext::blitAddMcs
          (IGAccelGLContext *this,long param_1,uint param_2,byte param_3,long param_4)

{
  char cVar1;
  uint uVar2;
  ulong local_40;
  int local_34;
  IGAccelResource *local_30;
  
  local_30 = (IGAccelResource *)0x0;
  if (param_2 != 0) {
    uVar2 = (uint)this;
    cVar1 = IOAccelContext2::lookupResource(uVar2,(void **)(ulong)param_2);
    if (cVar1 == '\0') {
      IOAccelContext2::setContextError(uVar2);
    }
    else {
      cVar1 = (**(code **)(*(long *)this + 0xa40))
                        (this,param_1,local_30,1,*(undefined8 *)(this + 0x12c0),param_3 ^ 1,1);
      if (cVar1 != '\0') {
        if (param_3 == 0) {
          (**(code **)(*(long *)local_30 + 0x168))(local_30,0,0);
        }
        local_40 = 0;
        local_34 = 0;
        IGAccelResource::get_tex_data(local_30,(long *)&local_40,&local_34);
        *(ulong *)(param_4 + 0x28) =
             (ulong)((uint)*(undefined8 *)(param_4 + 0x28) & 0xfff) | local_40 & 0xfffffffffffff000;
        *(uint *)(param_4 + 0x18) =
             *(uint *)(param_4 + 0x18) & 0xfffff007 | (local_34 + 0x7fU >> 4) + 0xff8 & 0xff8;
        return local_30;
      }
      if ((local_30 == (IGAccelResource *)0x0) || (((byte)local_30[0xe] & 0x10) != 0)) {
        IOAccelContext2::setContextError(uVar2);
      }
      else {
        *(undefined1 *)(param_1 + 0x3c) = 0;
        this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
      }
      streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_30);
    }
  }
  return (IGAccelResource *)0x0;
}



// IGAccelGLContext::blitAddResource(IOAccelCommandStreamInfo&, bool, SGfxRenderSurfaceState*)

IGAccelResource * __thiscall
IGAccelGLContext::blitAddResource
          (IGAccelGLContext *this,long param_1,undefined4 param_3_00,ulong *param_3)

{
  ushort uVar1;
  long lVar2;
  char cVar3;
  byte bVar4;
  int iVar5;
  uint uVar6;
  uint *puVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong uVar13;
  undefined4 *puVar14;
  int *piVar15;
  IGAccelResource *pIVar16;
  undefined8 local_c0;
  long local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  IGAccelResource *local_a0;
  long local_98;
  uint local_90;
  int local_8c;
  IGAccelResource *local_88;
  byte local_7d;
  undefined4 local_7c;
  ulong local_78 [8];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  uVar6 = (uint)this;
  if (param_3 == (ulong *)0x0) {
LAB_00068377:
    IOAccelContext2::setContextError(uVar6);
  }
  else {
    lVar8 = *(long *)(param_1 + 0x18);
    uVar1 = *(ushort *)(lVar8 + 0x2c);
    if ((char)param_3_00 == '\0') {
      puVar7 = (uint *)(lVar8 + 0xc);
      piVar15 = (int *)(lVar8 + 0x14);
      puVar14 = (undefined4 *)(lVar8 + 0x24);
      bVar4 = 2;
      cVar3 = '\0';
    }
    else {
      puVar7 = (uint *)(lVar8 + 8);
      piVar15 = (int *)(lVar8 + 0x10);
      puVar14 = (undefined4 *)(lVar8 + 0x20);
      cVar3 = (char)((uVar1 & 0x20) >> 5);
      bVar4 = 1;
    }
    local_88 = (IGAccelResource *)0x0;
    local_98 = 0;
    if (*puVar7 != 0) {
      if (cVar3 != '\0') {
        lVar8 = get_databuffer_address(this,0);
        param_3[4] = param_3[4] + lVar8;
        pIVar16 = (IGAccelResource *)0x0;
        goto LAB_00068387;
      }
      local_8c = *piVar15;
      local_7d = bVar4;
      local_7c = param_3_00;
      cVar3 = IOAccelContext2::lookupResource(uVar6,(void **)(ulong)*puVar7);
      if ((cVar3 != '\0') && (local_88 != (IGAccelResource *)0x0)) {
        bVar4 = (byte)local_7c ^ 1;
        local_90 = (uint)bVar4;
        cVar3 = (**(code **)(*(long *)this + 0xa40))
                          (this,param_1,local_88,1,*(undefined8 *)(this + 0x12c0),bVar4,1);
        if (cVar3 == '\0') {
          if ((local_88 == (IGAccelResource *)0x0) || (((byte)local_88[0xe] & 0x10) != 0)) {
            IOAccelContext2::setContextError(uVar6);
          }
          else {
            *(undefined1 *)(param_1 + 0x3c) = 0;
            this[0x63b] = (IGAccelGLContext)((byte)this[0x63b] | 4);
          }
          streamErrorCleanup(this,param_1,(IOAccelShared2 *)local_88);
          goto LAB_00068384;
        }
        local_78[0] = local_78[0] & 0xffffffff00000000;
        IGAccelResource::get_tex_data(local_88,&local_98,(undefined4 *)local_78);
        if ((byte)local_7c == '\0') {
          if ((byte)local_88[0xac] <= (byte)*(IGAccelResource *)(lVar8 + 0x28)) goto LAB_00068377;
          (**(code **)(*(long *)local_88 + 0x168))
                    (local_88,*(IGAccelResource *)(lVar8 + 0x28),*(undefined1 *)(lVar8 + 0x29));
        }
        param_3[4] = param_3[4] + local_98;
        if (((uVar1 & 0xff) >> (local_7d & 0x1f) & 1) != 0) {
          param_3[1] = param_3[1] & 0xfffc0000ffffffff |
                       (ulong)((int)local_78[0] - 1U & 0x3ffff) << 0x20;
        }
        lVar8 = IOAccelResource2::getStorageResource();
        uVar1 = *(ushort *)(lVar8 + 0x194);
        *param_3 = *param_3 & 0xffffffffffffcfff | (ulong)((uVar1 & 3) << 0xc);
        *(ulong *)((long)param_3 + 0x14) =
             *(ulong *)((long)param_3 + 0x14) & 0xfffffffffff3ffff | (ulong)((uVar1 & 0xc) << 0x10);
        if ((byte)local_7c == '\0') {
          surfaceStateFillMemoryObjectControlState
                    (param_3,local_88,*(long *)(&DAT_00001290 + *(long *)(this + 0x5a8)),0);
        }
        pIVar16 = local_88;
        if (local_8c == 0) {
          IGAccelResource::fillSurfaceStateAuxInfo(local_88,lVar8 + 0x180,(long)param_3,local_90);
          pIVar16 = local_88;
        }
        goto LAB_00068387;
      }
      goto LAB_00068377;
    }
    if (*(long *)(this + 0x5c0) == 0) {
      *(byte *)((long)param_3 + 3) = *(byte *)((long)param_3 + 3) | 0xe0;
      *(uint *)(param_3 + 1) = (uint)param_3[1] & 0xc000c000;
    }
    else {
      local_8c = *piVar15;
      local_7c = param_3_00;
      iVar5 = IOAccelSurface::convertGLIndexToBufferIndex(*(long *)(this + 0x5c0),*puVar14);
      local_a0 = (IGAccelResource *)0x0;
      local_a8 = 0;
      local_b0 = 0;
      local_b8 = 0;
      local_c0 = 0;
      getSurfaceBufferInfo(&local_c0,(long)this,iVar5);
      pIVar16 = local_a0;
      lVar8 = local_b8;
      if ((char)local_c0 == '\0') goto LAB_00068377;
      (**(code **)(**(long **)(this + 0x12c0) + 0x140))(*(long **)(this + 0x12c0),local_b0);
      (**(code **)(**(long **)(this + 0x12c0) + 0x140))
                (*(long **)(this + 0x12c0),
                 (ulong)(byte)pIVar16[0x16 - (ulong)(byte)local_7c] * 0x40 +
                 *(long *)(pIVar16 + 0x38));
      param_3[4] = param_3[4] + lVar8;
      uVar13 = *param_3;
      uVar10 = param_3[1];
      local_78[6] = 0;
      local_78[5] = 0;
      local_78[4] = 0;
      local_78[3] = 0;
      local_78[0] = 0x6000000080;
      local_78[1] = 0x2000000040;
      local_78[2] = 0x800000010;
      bVar4 = *(byte *)((long)local_78 + (ulong)((uint)(uVar13 >> 0x16) & 0x1c)) >> 3;
      uVar6 = (uint)*(ushort *)(pIVar16 + 0xb0);
      if ((byte)*(undefined2 *)(pIVar16 + 0xd8) <= bVar4) {
        uVar6 = ((uint)*(ushort *)(pIVar16 + 0xb0) * (uint)(byte)*(undefined2 *)(pIVar16 + 0xd8)) /
                (uint)bVar4;
      }
      lVar8 = *(long *)(pIVar16 + 0xb8);
      if (lVar8 == 0) {
        lVar8 = *(long *)(pIVar16 + 0xc0);
      }
      uVar12 = (ulong)((int)lVar8 - 1U & 0x3ffff) << 0x20;
      uVar11 = (ulong)(uVar6 - 1 & 0x3fff);
      *param_3 = uVar13;
      param_3[1] = uVar11 | uVar10 & 0xfffc0000ffffc000 | uVar12;
      uVar1 = *(ushort *)(pIVar16 + 0xb2);
      *param_3 = uVar13;
      param_3[1] = uVar11 | uVar10 & 0xfffc0000c000c000 | uVar12 |
                   (ulong)(uVar1 - 1 & 0x3fff) << 0x10;
      lVar8 = IOAccelResource2::getStorageResource();
      uVar1 = *(ushort *)(lVar8 + 0x194);
      uVar13 = *param_3;
      uVar10 = (ulong)((uVar1 & 3) << 0xc);
      *param_3 = uVar13 & 0xffffffffffffcfff | uVar10;
      *(ulong *)((long)param_3 + 0x14) =
           *(ulong *)((long)param_3 + 0x14) & 0xfffffffffff3ffff | (ulong)((uVar1 & 0xc) << 0x10);
      *param_3 = uVar13 & 0xffff8000ffffcfff | uVar10 |
                 (ulong)(*(uint *)(lVar8 + 0x18c) & 0x7fff) << 0x20;
      bVar4 = (byte)local_7c;
      if ((bVar4 == 0) &&
         ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(uVar13 >> 0x38) & 0x7e)) & 0x30) !=
          0)) {
        lVar2 = *(long *)(&DAT_00001290 + *(long *)(this + 0x5a8));
        lVar9 = IOAccelResource2::getStorageResource();
        uVar13 = *(ulong *)(lVar9 + 200 + (ulong)(*(long *)(lVar9 + 0x88) == 0) * 8);
        if (*(ulong *)(lVar2 + 0x108) * 2 < uVar13) {
          uVar10 = param_3[1];
          uVar13 = *param_3 & 0x81ffffffffffffff;
          uVar11 = 0x3200000000000000;
        }
        else {
          uVar11 = *param_3 & 0x81ffffffffffffff;
          uVar10 = param_3[1];
          if (*(ulong *)(lVar2 + 0x108) >> 1 < uVar13) {
            uVar13 = 0x3000000000000000;
          }
          else {
            uVar13 = 0x2400000000000000;
          }
        }
        bVar4 = (byte)local_7c;
        *param_3 = uVar11 | uVar13;
        param_3[1] = uVar10;
      }
      if (local_8c == 0) {
        IGAccelResource::fillSurfaceStateAuxInfo
                  (pIVar16,lVar8 + 0x180,(long)param_3,(uint)(bVar4 ^ 1));
      }
    }
  }
LAB_00068384:
  pIVar16 = (IGAccelResource *)0x0;
LAB_00068387:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return pIVar16;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// surfaceStateFillMemoryObjectControlState(SGfxRenderSurfaceState&, IGAccelResource*,
// IGMemoryManager*, bool)

void __cdecl
surfaceStateFillMemoryObjectControlState(ulong *param_1,undefined8 param_2,long param_3,int param_4)

{
  ulong uVar1;
  long lVar2;
  ulong uVar3;
  
  if (param_4 == 0) {
    if ((~*(ushort *)(&g_cInitGfxL3ControlRegisters + ((byte)(*param_1 >> 0x38) & 0x7e)) & 0x30) ==
        0) {
      return;
    }
    lVar2 = IOAccelResource2::getStorageResource();
    uVar1 = *(ulong *)(lVar2 + 200 + (ulong)(*(long *)(lVar2 + 0x88) == 0) * 8);
    if (*(ulong *)(param_3 + 0x108) * 2 < uVar1) {
      uVar3 = param_1[1];
      uVar1 = *param_1 & 0x81ffffffffffffff | 0x3200000000000000;
    }
    else {
      uVar3 = param_1[1];
      if (*(ulong *)(param_3 + 0x108) >> 1 < uVar1) {
        uVar1 = 0x3000000000000000;
      }
      else {
        uVar1 = 0x2400000000000000;
      }
      uVar1 = *param_1 & 0x81ffffffffffffff | uVar1;
    }
  }
  else {
    uVar3 = param_1[1];
    uVar1 = *param_1 & 0x81ffffffffffffff;
  }
  *param_1 = uVar1;
  param_1[1] = uVar3;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// UtilMapMemory(IOMemoryMap**, IOAccelMemory*)

bool __cdecl UtilMapMemory(long *param_1,OSMetaClassBase *param_2)

{
  long lVar1;
  
  lVar1 = OSMetaClassBase::safeMetaCast(param_2,*(OSMetaClass **)__got::metaClass);
  lVar1 = IOMemoryDescriptor::createMappingInTask
                    (*(task **)(lVar1 + 0xd0),*(ulonglong *)__got::_kernel_task,0,1,0);
  *param_1 = lVar1;
  return lVar1 != 0;
}



// WARNING: Removing unreachable block (ram,0x000685f8)
// WARNING: Removing unreachable block (ram,0x000685fe)
// IGAccelGLContext::process_token_ResolveDepthBuffer(IOAccelCommandStreamInfo&)::$_0::TEMPNAMEPLACEHOLDERVALUE(unsigned
// int, unsigned int) const

undefined8 __thiscall
IGAccelGLContext::process_token_ResolveDepthBuffer(IOAccelCommandStreamInfo&)::$_0::operator()
          (__0 *this,void **param_2_00,undefined4 param_2)

{
  IGAccelGLContext *this_00;
  char cVar1;
  uint uVar2;
  
  this_00 = *(IGAccelGLContext **)this;
  uVar2 = (uint)this_00;
  cVar1 = IOAccelContext2::lookupResource(uVar2,param_2_00);
  if (cVar1 == '\0') {
    IOAccelContext2::setContextError(uVar2);
  }
  else {
    cVar1 = (**(code **)(*(long *)this_00 + 0xa40))
                      (this_00,*(undefined8 *)(this + 8),0,1,*(undefined8 *)(this_00 + 0x12c0),
                       param_2,1);
    if (cVar1 == '\0') {
      IOAccelContext2::setContextError(uVar2);
      streamErrorCleanup(this_00,*(undefined8 *)(this + 8),(IOAccelShared2 *)0x0);
    }
  }
  return 0;
}



// IGAccelGLContext::getPriorityInfo()

void __thiscall IGAccelGLContext::getPriorityInfo(IGAccelGLContext *this)

{
  if (-1 < *(int *)(this + 0x1358)) {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00068664. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xad8))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// alignTileWidthFromFormat(unsigned int, unsigned int, unsigned int)

uint __cdecl alignTileWidthFromFormat(int param_1,int param_2,ulong param_3)

{
  int iVar1;
  uint uVar2;
  uint local_48 [14];
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  local_48[0xc] = 0;
  local_48[0xd] = 0;
  local_48[10] = 0;
  local_48[0xb] = 0;
  local_48[8] = 0;
  local_48[9] = 0;
  local_48[6] = 0;
  local_48[7] = 0;
  local_48[0] = 0x80;
  local_48[1] = 0x60;
  local_48[2] = 0x40;
  local_48[3] = 0x20;
  local_48[4] = 0x10;
  local_48[5] = 8;
  iVar1 = 1;
  if (param_2 - 1U < 0xb) {
    uVar2 = local_48[(uint)(param_3 >> 6) & 0xf] >> 3 & 0x1f;
    switch(param_2) {
    case 1:
      iVar1 = 0x40;
      break;
    case 2:
      iVar1 = 0x200;
      break;
    case 3:
      iVar1 = 0x80;
      break;
    case 7:
      iVar1 = 0x40;
      if (1 < uVar2) {
        iVar1 = (uint)(4 < uVar2) * 0x80 + 0x80;
      }
      break;
    case 0xb:
      iVar1 = 0x100;
      if (1 < uVar2) {
        iVar1 = (uint)(4 < uVar2) * 0x200 + 0x200;
      }
    }
  }
  if (*(long *)__got::___stack_chk_guard == *(long *)__got::___stack_chk_guard) {
    return -iVar1 & (param_1 + iVar1) - 1U;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// alignTileHeightFromFormat(unsigned int, unsigned int, unsigned int)

uint __cdecl alignTileHeightFromFormat(int param_1,int param_2,ulong param_3)

{
  int iVar1;
  uint uVar2;
  uint local_48 [14];
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  local_48[0xc] = 0;
  local_48[0xd] = 0;
  local_48[10] = 0;
  local_48[0xb] = 0;
  local_48[8] = 0;
  local_48[9] = 0;
  local_48[6] = 0;
  local_48[7] = 0;
  local_48[0] = 0x80;
  local_48[1] = 0x60;
  local_48[2] = 0x40;
  local_48[3] = 0x20;
  local_48[4] = 0x10;
  local_48[5] = 8;
  iVar1 = 1;
  if (param_2 - 1U < 0xb) {
    uVar2 = local_48[(uint)(param_3 >> 6) & 0xf] >> 3 & 0x1f;
    switch(param_2) {
    case 1:
      iVar1 = 0x40;
      break;
    case 2:
      iVar1 = 8;
      break;
    case 3:
      iVar1 = 0x20;
      break;
    case 7:
      iVar1 = 0x40;
      if (1 < uVar2) {
        iVar1 = (uint)(uVar2 < 5) * 0x10 + 0x10;
      }
      break;
    case 0xb:
      iVar1 = 0x100;
      if (1 < uVar2) {
        iVar1 = (uint)(uVar2 < 5) * 0x40 + 0x40;
      }
    }
  }
  if (*(long *)__got::___stack_chk_guard == *(long *)__got::___stack_chk_guard) {
    return -iVar1 & (param_1 + iVar1) - 1U;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelGLContext::MetaClass::~MetaClass()

void __thiscall IGAccelGLContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  IGVector<> *this_00;
  
  *(undefined ***)this = &__const::~IGHashTable;
  clear(this);
  this_00 = *(IGVector<> **)(this + 8);
  if (this_00 != (IGVector<> *)0x0) {
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::~IGHashTable()

void __thiscall IGHashTable<>::~IGHashTable(IGHashTable<> *this)

{
  ~IGHashTable(this);
  _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>*)::kalloc_type_view_19,this
                 );
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcResourceEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x16);
    lVar4 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)param_1;
    if (lVar3 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar3 * 2);
      if ((char)uVar2 != '\0') {
        lVar3 = *(long *)param_1;
        goto LAB_000689ac;
      }
    }
    else {
LAB_000689ac:
      *(long *)param_1 = lVar3 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar3 * 8) = (ulong)bVar1 * 0x40 + lVar4;
    }
    lVar4 = (ulong)*(byte *)(param_2 + 0x15) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    lVar4 = *(long *)(param_2 + 0x90);
  }
  lVar3 = *(long *)(param_1 + 0x18);
  if (lVar3 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
    if ((char)uVar2 == '\0') goto LAB_00068a01;
    lVar3 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar3 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4;
LAB_00068a01:
  lVar4 = *(long *)(param_2 + 0x40);
  if (lVar4 != 0) {
    lVar3 = *(long *)(param_1 + 0x18);
    if (lVar3 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar3 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar3 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4 + 0x38;
  }
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar5 = *(long *)param_1;
    if (lVar5 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar5 * 2);
      if ((char)uVar2 != '\0') {
        lVar5 = *(long *)param_1;
        goto LAB_00068b53;
      }
    }
    else {
LAB_00068b53:
      *(long *)param_1 = lVar5 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar4 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_00068b8f;
    }
    else {
LAB_00068b8f:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(param_1 + 0x18,lVar6 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_00068bd8;
    }
    else {
LAB_00068bd8:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_00068c25;
    lVar5 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_00068c25:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 3;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3d != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IGVector<IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __thiscall IGVector<>::IGVector(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  
  *(undefined8 *)this = 0;
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  if (param_1 != 0) {
    auVar2._8_8_ = 0;
    auVar2._0_8_ = param_1;
    lVar4 = SUB168(auVar2 * ZEXT816(0x18),0);
    if (lVar4 < 0) {
      lVar4 = -0x8000000000000000;
    }
    if (SUB168(auVar2 * ZEXT816(0x18),8) != 0) {
      lVar4 = -0x8000000000000000;
    }
    lVar4 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar4);
    if (lVar4 != 0) {
      lVar5 = *(long *)(this + 0x10);
      if (lVar5 != 0) {
        if (*(long *)this != 0) {
          lVar5 = 0;
          uVar7 = 0;
          do {
            lVar6 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar4 + 0x10 + lVar5) = *(undefined8 *)(lVar6 + 0x10 + lVar5);
            uVar1 = *(undefined8 *)(lVar6 + lVar5);
            *(undefined8 *)(lVar4 + 8 + lVar5) = *(undefined8 *)(lVar6 + 8 + lVar5);
            *(undefined8 *)(lVar4 + lVar5) = uVar1;
            uVar7 = uVar7 + 1;
            lVar5 = lVar5 + 0x18;
          } while (uVar7 < *(ulong *)this);
          lVar5 = *(long *)(this + 0x10);
        }
        auVar3._8_8_ = 0;
        auVar3._0_8_ = *(ulong *)(this + 8);
        lVar6 = SUB168(ZEXT816(0x18) * auVar3,0);
        if (lVar6 < 0) {
          lVar6 = -0x8000000000000000;
        }
        lVar8 = -0x8000000000000000;
        if (SUB168(ZEXT816(0x18) * auVar3,8) == 0) {
          lVar8 = lVar6;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                            deallocate(IGHashTable<>::Slot*,unsigned_long)::kalloc_type_view_29,
                           lVar5,lVar8);
      }
      *(long *)(this + 0x10) = lVar4;
      *(ulong *)(this + 8) = param_1;
      *(ulong *)this = param_1;
    }
  }
  return;
}



// IGVector<IGAccelResource*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IGAccelResource**,unsigned_long)::kalloc_type_view_29
                                   ,lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::shrinkIfNeeded()

void __thiscall IGHashTable<>::shrinkIfNeeded(IGHashTable<> *this)

{
  ulong uVar1;
  
  if ((this[0x20] != (IGHashTable<>)0x0) && (uVar1 = *(ulong *)(this + 0x10), uVar1 != 0)) {
    if ((((uVar1 - *(long *)(this + 0x18)) * 100) / uVar1 < 0xc) &&
       ((ulong)(*(long *)(this + 0x18) * 100) / *(ulong *)(*(long *)(this + 8) + 8) < 0xc)) {
      resizeAndRehash(this,*(ulong *)(*(long *)(this + 8) + 8) >> 1);
      return;
    }
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::resizeAndRehash(unsigned long)

bool __thiscall IGHashTable<>::resizeAndRehash(IGHashTable<> *this,ulong param_1)

{
  IGVector<> *this_00;
  long lVar1;
  IGVector<> *this_01;
  long lVar2;
  undefined8 *puVar3;
  ulong uVar4;
  long *plVar5;
  char *pcVar6;
  ulong *puVar7;
  ulong uVar8;
  long lVar9;
  
  this_00 = *(IGVector<> **)(this + 8);
  this_01 = (IGVector<> *)
            _IOMallocTypeImpl(&IGIOMallocAllocatorPolicy<>::allocate()::kalloc_type_view_14);
  IGVector<>::IGVector(this_01,param_1);
  *(IGVector<> **)(this + 8) = this_01;
  if (this_01 != (IGVector<> *)0x0) {
    *(undefined8 *)(this + 0x10) = 0;
    *(undefined8 *)(this + 0x18) = 0;
    lVar2 = *(long *)(this_01 + 8);
    if (lVar2 != 0) {
      puVar3 = *(undefined8 **)(this_01 + 0x10);
      do {
        *puVar3 = 0;
        puVar3[1] = puVar3;
        puVar3[2] = 0;
        puVar3 = puVar3 + 3;
        lVar2 = lVar2 + -1;
      } while (lVar2 != 0);
    }
    lVar2 = *(long *)this_00;
    if (lVar2 != 0) {
      lVar9 = 0;
      do {
        for (puVar7 = *(ulong **)(*(long *)(this_00 + 0x10) + lVar9 * 0x18); puVar7 != (ulong *)0x0;
            puVar7 = (ulong *)puVar7[2]) {
          add(this,puVar7,puVar7 + 1);
        }
        lVar9 = lVar9 + 1;
      } while (lVar9 != lVar2);
    }
    uVar4 = *(ulong *)(this_00 + 8);
    if (uVar4 != 0) {
      lVar2 = *(long *)(this_00 + 0x10);
      uVar8 = 0;
      do {
        lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
        if (lVar9 != 0) {
          do {
            lVar1 = *(long *)(lVar9 + 0x10);
            if (lVar1 == 0) {
              plVar5 = *(long **)(lVar9 + 0x18);
              if (*plVar5 != lVar9) {
LAB_0006900e:
                pcVar6 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0006901e:
                    // WARNING: Subroutine does not return
                _panic(pcVar6,lVar9,0x230,"IGHash.h",0x230);
              }
              *(long **)(lVar2 + 8 + uVar8 * 0x18) = plVar5;
            }
            else {
              if (*(long *)(lVar1 + 0x18) != lVar9 + 0x10) {
                pcVar6 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
                goto LAB_0006901e;
              }
              if (**(long **)(lVar9 + 0x18) != lVar9) goto LAB_0006900e;
              *(long **)(lVar1 + 0x18) = *(long **)(lVar9 + 0x18);
              plVar5 = *(long **)(lVar9 + 0x18);
            }
            *plVar5 = lVar1;
            _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Node*)::
                             kalloc_type_view_19);
            lVar2 = *(long *)(this_00 + 0x10);
            lVar9 = *(long *)(lVar2 + uVar8 * 0x18);
          } while (lVar9 != 0);
          uVar4 = *(ulong *)(this_00 + 8);
        }
        uVar8 = uVar8 + 1;
      } while (uVar8 < uVar4);
    }
    *(undefined8 *)this_00 = 0;
    IGVector<>::~IGVector(this_00);
    _IOFreeTypeImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGVector<>*)::kalloc_type_view_19,
                    this_00);
  }
  return this_01 != (IGVector<> *)0x0;
}



// IGVector<IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Slot, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x18) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x18) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IGHashTable<>::Slot*,unsigned_long)
                        ::kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::Iterator::next()

void __thiscall IGHashTable<>::Iterator::next(Iterator *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  ulong *puVar4;
  long *plVar5;
  
  if (this[0x20] == (Iterator)0x0) {
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
    if (*(ulong *)this == uVar3) {
      return;
    }
    if ((*(long *)(this + 8) != 0) &&
       (lVar1 = *(long *)(*(long *)(this + 8) + 0x10), *(long *)(this + 8) = lVar1, lVar1 != 0)) {
      return;
    }
    uVar2 = *(ulong *)this + 1;
    *(ulong *)this = uVar2;
  }
  else {
    uVar2 = 0;
    *(undefined8 *)this = 0;
    *(undefined8 *)(this + 8) = 0;
    this[0x20] = (Iterator)0x0;
    puVar4 = *(ulong **)(*(long *)(this + 0x18) + 8);
    uVar3 = *puVar4;
  }
  if (uVar2 < uVar3) {
    plVar5 = (long *)(puVar4[2] + uVar2 * 0x18 + 0x10);
    do {
      uVar2 = uVar2 + 1;
      if (*plVar5 != 0) {
        *(long *)(this + 8) = plVar5[-2];
        return;
      }
      *(ulong *)this = uVar2;
      plVar5 = plVar5 + 3;
    } while (uVar2 != uVar3);
  }
  return;
}



// IGHashTable<unsigned long long, IGAccelMemoryMap*, IGHashTraits<unsigned long long>,
// IGIOMallocAllocatorPolicy>::slotIndex(unsigned long long const&) const

uint __thiscall IGHashTable<>::slotIndex(IGHashTable<> *this,ulong *param_1)

{
  long lVar1;
  ulong uVar2;
  byte bVar3;
  ulong uVar4;
  ulong uVar5;
  
  lVar1 = 0;
  if (*(ulong *)(*(long *)(this + 8) + 8) != 0) {
    for (; (*(ulong *)(*(long *)(this + 8) + 8) >> lVar1 & 1) == 0; lVar1 = lVar1 + 1) {
    }
  }
  uVar5 = *param_1;
  uVar2 = uVar5 >> 0x38 | (uVar5 & 0xff000000000000) >> 0x28 | (uVar5 & 0xff0000000000) >> 0x18;
  uVar4 = POPCOUNT(uVar5) << 0x3f |
          uVar2 | (uVar5 & 0xff00000000) >> 8 | (uVar5 & 0xff000000) << 8 |
          (uVar5 & 0xff0000) << 0x18 | (uVar5 & 0xff00) << 0x28 | uVar5 << 0x38;
  bVar3 = (byte)lVar1;
  uVar5 = uVar4 >> 3 ^ uVar5 << 0x3b ^ uVar5 << 0x17 ^ uVar4 >> 0x25 ^
          ((((uVar5 >> 0x38) << 0x39 | uVar5 >> 0x25) + (uVar2 << 0x2f ^ uVar5 >> 0xb)) -
          (uVar4 >> 0x15 ^ uVar5 * -0x20)) + (-uVar4 >> 0xb ^ uVar5 << 0x29 ^ 0xffffffffffffffc5);
  return ((uint)uVar5 ^ (uint)(uVar5 >> (bVar3 & 0x3f)) ^ (int)(uVar5 >> (-bVar3 & 0x3f)) * 0x3df) &
         ~(-1 << (bVar3 & 0x1f));
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  long lVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar5 = param_1 << 5;
    if (lVar5 < 0) {
      lVar5 = -0x8000000000000000;
    }
    if (param_1 >> 0x3b != 0) {
      lVar5 = -0x8000000000000000;
    }
    lVar5 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar5);
    if (lVar5 != 0) {
      lVar2 = *(long *)(this + 0x10);
      lVar4 = lVar5;
      if (lVar2 != 0) {
        if (*(long *)this != 0) {
          lVar2 = 0;
          uVar3 = 0;
          do {
            lVar4 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar5 + 0x18 + lVar2) = *(undefined8 *)(lVar4 + 0x18 + lVar2);
            *(undefined8 *)(lVar5 + 0x10 + lVar2) = *(undefined8 *)(lVar4 + 0x10 + lVar2);
            uVar1 = *(undefined8 *)(lVar4 + lVar2);
            *(undefined8 *)(lVar5 + 8 + lVar2) = *(undefined8 *)(lVar4 + 8 + lVar2);
            *(undefined8 *)(lVar5 + lVar2) = uVar1;
            uVar3 = uVar3 + 1;
            lVar2 = lVar2 + 0x20;
          } while (uVar3 < *(ulong *)this);
          lVar2 = *(long *)(this + 0x10);
        }
        lVar4 = *(ulong *)(this + 8) << 5;
        if (lVar4 < 0) {
          lVar4 = -0x8000000000000000;
        }
        if (0x7ffffffffffffff < *(ulong *)(this + 8)) {
          lVar4 = -0x8000000000000000;
        }
        lVar4 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(rect_pair_t*,unsigned_long)::kalloc_type_view_29,
                                   lVar2,lVar4);
      }
      *(long *)(this + 0x10) = lVar5;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar4 >> 8),1);
    }
  }
  return 0;
}



void __GLOBAL__sub_I_IGAccelGLContext_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelGLContext::gMetaClass,"IGAccelGLContext",
             (OSMetaClass *)__got::gMetaClass,0x1360);
  IGAccelGLContext::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelGLContext::gMetaClass);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelMTLComputeFunctions::execute(IntelMTLCompute::eTokens, IGAccelCommandQueue&,
// IGAccelSegmentResourceList&, IOAccelKernelCommand const&, IOAccelKernelCommand const&,
// IGAccelCommandDescriptor&, IOGraphicsAccelerator2&, IGHardwareContext&, IOAccelEvent&)

long __cdecl
IntelMTLComputeFunctions::execute
          (int param_1,long *param_2,IGAccelResource *param_3,ulong param_4,long param_5,
          IGAccelResource *param_6,IntelAccelerator *param_7,undefined8 param_8,long param_9)

{
  ushort *puVar1;
  char cVar2;
  IGAccelResource IVar3;
  byte bVar4;
  ushort uVar5;
  uint uVar6;
  undefined4 uVar7;
  undefined8 uVar8;
  byte bVar9;
  byte bVar10;
  ushort uVar11;
  undefined4 uVar12;
  int iVar13;
  long *plVar14;
  long *plVar15;
  long lVar16;
  byte *pbVar17;
  ulong uVar18;
  long lVar19;
  ushort uVar20;
  int iVar21;
  uint *puVar22;
  IGAccelResource *pIVar23;
  ulong uVar24;
  uint uVar25;
  IGAccelResource *pIVar26;
  long lVar27;
  ulong uVar28;
  ulong uVar29;
  long *plVar30;
  undefined4 uVar31;
  ulong uVar32;
  undefined4 uVar33;
  IGAccelResource *this;
  ulong uVar34;
  ulong *puVar35;
  IGAccelResource *pIVar36;
  ushort uVar37;
  IGAccelResource *pIVar38;
  ulong uVar39;
  long lVar40;
  undefined4 local_134;
  long local_130;
  long local_128;
  ushort *local_120;
  long local_118;
  ulong local_110;
  ulong local_108;
  ulong local_100;
  long local_f8;
  long *local_f0;
  long local_e8;
  IGAccelTask *local_e0;
  ulong local_d8;
  IntelAccelerator *local_d0;
  IGAccelResource *local_c8;
  long local_c0;
  long *local_b8;
  IGAccelResource *local_b0;
  IGAccelResource *local_a8;
  IGAccelResource *local_a0;
  IGAccelResource *local_98;
  IGAccelResource *local_90;
  byte local_82;
  bool local_81;
  ulong local_80;
  ulong local_78 [3];
  undefined8 local_60;
  ulong local_58;
  undefined8 local_50;
  ulong local_48;
  undefined8 local_40;
  long local_38;
  
  bVar10 = 0;
  local_38 = *(long *)__got::___stack_chk_guard;
  lVar40 = 0;
  switch(param_1) {
  case 0x40000:
    if ((long)(param_5 - param_4) < 0x1c) goto LAB_000698d9;
    if ((((int)param_2[0xc4] != 0) || (param_2[0xee] == 0)) || (*(short *)(param_2[0xee] + 2) != 4))
    {
      IGAccelCommandQueue::replayKernelCommand(param_2);
    }
    lVar40 = 9;
    if ((*(uint *)(param_4 + 0xc) < *(uint *)(param_3 + 0xc)) &&
       (lVar27 = *(long *)(*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0xc) * 8),
       lVar27 != 0)) {
      uVar25 = *(uint *)(param_4 + 0x10);
      uVar29 = (ulong)uVar25;
      uVar24 = *(ulong *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8);
      lVar40 = 10;
      if ((uVar29 < uVar24) && (uVar18 = (ulong)*(uint *)(param_4 + 8), uVar18 < uVar24 >> 2)) {
        if (*(int *)(param_4 + 0x18) == 0) {
          lVar40 = (**(code **)(**(long **)(lVar27 + 0x40) + 0x128))();
          *(ulong *)(param_6 + 0x18) = lVar40 + uVar29;
          param_2[0xf3] = lVar27;
        }
        else {
          lVar16 = *(long *)(param_6 + 0x58);
          lVar40 = 8;
          if (((lVar16 == 0) ||
              (uVar24 = *(long *)(lVar16 + 200 + (ulong)(*(long *)(lVar16 + 0x88) == 0) * 8) -
                        (ulong)*(uint *)(param_6 + 0x6c), uVar24 < 0xc)) ||
             ((uVar24 - 0xc >> 2 < uVar18 || (lVar16 = *(long *)(param_6 + 0x20), lVar16 == 0))))
          break;
          lVar40 = (**(code **)(**(long **)(lVar27 + 0x40) + 0x128))();
          *(int *)(lVar16 + 8 + uVar18 * 4) = (int)(lVar40 + uVar29 >> 0x20);
          *(ulong *)(lVar16 + uVar18 * 4) =
               *(ulong *)(lVar16 + uVar18 * 4) & 0x3ffffffff |
               (ulong)((uint)(lVar40 + uVar29) & 0xfffffffc) << 0x20;
        }
        if (*(long *)(param_6 + 0x20) != 0) {
          IOAccelResource2::releaseKernelData();
          *(undefined8 *)(param_6 + 0x20) = 0;
        }
        *(long *)(param_6 + 0x58) = lVar27;
        *(uint *)(param_6 + 0x6c) = uVar25;
        lVar27 = IOAccelResource2::getKernelData();
        lVar40 = lVar27 + uVar29;
        if (lVar27 == 0) {
          lVar40 = 0;
        }
        *(long *)(param_6 + 0x20) = lVar40;
        lVar40 = (ulong)(lVar40 == 0) << 3;
      }
    }
    break;
  case 0x40001:
    if ((((int)param_2[0xc4] == 0) && (*(char *)((long)param_2 + 0x839) == '\0')) &&
       ((*(short *)(param_4 + 0x18) == 0 && (*(short *)(param_4 + 0x1a) == 0)))) {
      if (*(long *)__got::___stack_chk_guard == local_38) {
        lVar40 = process_token_CommandBufferEnd_SaveState
                           ((long)param_2,param_3,param_4,(long)param_6);
        return lVar40;
      }
      goto LAB_0006ac01;
    }
    local_b0 = param_6;
    local_80 = param_4;
    IGAccelCommandQueue::replayKernelCommand(param_2);
    lVar40 = 10;
    if (0x1b < (long)(param_5 - local_80)) {
      uVar11 = *(ushort *)(local_80 + 0x18);
      if ((long)((IGAccelResource *)(ulong)*(ushort *)(local_80 + 0x1a) + (long)(ulong)uVar11) * 2 +
          0x1cU <= param_5 - local_80) {
        local_98 = (IGAccelResource *)(ulong)*(ushort *)(local_80 + 0x1a);
        local_90 = (IGAccelResource *)(ulong)uVar11;
        barrierSubmission((long)param_2,(long)param_7,(long)local_b0,param_9,uVar11,local_80 + 0x1c)
        ;
        pIVar36 = local_b0;
        *(long *)(local_b0 + 0x38) = param_2[0xc1];
        uVar12 = 0;
        if (*(char *)((long)param_2 + 0x839) == '\0') {
          uVar12 = *(undefined4 *)(local_80 + 0xc);
        }
        *(undefined4 *)(local_b0 + 0x30) = uVar12;
        local_b0[0x69] = (IGAccelResource)(*(int *)(local_80 + 0x10) != 0);
        plVar15 = *(long **)(*(long *)(local_b0 + 0x50) + 0xb0);
        (**(code **)(*plVar15 + 0x148))(plVar15);
        (**(code **)(*plVar15 + 0x130))(plVar15,pIVar36);
        (**(code **)(*plVar15 + 0x140))(plVar15,param_9);
        (**(code **)(*plVar15 + 0x140))(plVar15,*(long *)(*(long *)(pIVar36 + 0x58) + 0x40) + 0x38);
        if (-1 < (int)param_2[0x104]) {
          lVar40 = -1;
          do {
            IGAccelSegmentResourceList::removeFromChannel(param_2[lVar40 + 0xf5]);
            param_2[lVar40 + 0xf5] = 0;
            lVar40 = lVar40 + 1;
          } while (lVar40 < (int)param_2[0x104]);
        }
        *(undefined4 *)(param_2 + 0x104) = 0xffffffff;
        if (local_98 == (IGAccelResource *)0x0) goto LAB_0006abf9;
        lVar27 = local_80 + (long)local_90 * 2;
        pIVar38 = (IGAccelResource *)0x0;
        lVar40 = 0;
        pIVar36 = local_98;
        do {
          uVar11 = *(ushort *)(lVar27 + 0x1c + (long)pIVar38 * 2);
          if (uVar11 != 0) {
            lVar16 = param_2[0xb7];
            if (((uint)uVar11 < *(uint *)(lVar16 + 0x70)) && (*(long *)(lVar16 + 0x68) != 0)) {
              (**(code **)(*plVar15 + 0x140))
                        (plVar15,*(long *)(lVar16 + 0x68) +
                                 (ulong)((uint)uVar11 * *(int *)(*(long *)(lVar16 + 0x78) + 0xcf4))
                                 * 0x40);
              pIVar36 = local_98;
            }
          }
          pIVar38 = pIVar38 + 1;
        } while (pIVar36 != pIVar38);
      }
    }
    break;
  case 0x40002:
    if ((long)(param_5 - param_4) < 0x24) goto LAB_000698d9;
    lVar40 = 0;
    if (*(int *)(param_4 + 0x20) != 0) {
      uVar25 = *(uint *)(param_3 + 0xc);
      if (*(uint *)(param_4 + 0xc) < uVar25) {
        pIVar36 = *(IGAccelResource **)
                   (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0xc) * 8);
      }
      else {
        pIVar36 = (IGAccelResource *)0x0;
      }
      uVar6 = *(uint *)(param_4 + 0x10);
      if (uVar6 < uVar25) {
        pIVar38 = *(IGAccelResource **)(*(long *)(param_3 + 0x10) + (ulong)uVar6 * 8);
      }
      else {
        pIVar38 = (IGAccelResource *)0x0;
      }
      if (*(uint *)(param_4 + 0x14) < uVar25) {
        pIVar26 = *(IGAccelResource **)
                   (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0x14) * 8);
      }
      else {
        pIVar26 = (IGAccelResource *)0x0;
      }
      if (*(uint *)(param_4 + 0x18) < uVar25) {
        this = *(IGAccelResource **)
                (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0x18) * 8);
      }
      else {
        this = (IGAccelResource *)0x0;
      }
      if (*(uint *)(param_4 + 0x1c) < uVar25) {
        pIVar23 = *(IGAccelResource **)
                   (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0x1c) * 8);
      }
      else {
        pIVar23 = (IGAccelResource *)0x0;
      }
      lVar40 = 9;
      if (((pIVar36 != (IGAccelResource *)0x0) && (pIVar38 != (IGAccelResource *)0x0)) &&
         ((pIVar26 != (IGAccelResource *)0x0 &&
          ((this != (IGAccelResource *)0x0 &&
           (local_98 = pIVar23, local_90 = pIVar26, pIVar23 != (IGAccelResource *)0x0)))))) {
        local_134 = 0;
        local_78[0] = 0;
        local_d8 = 0;
        local_110 = 0;
        local_108 = 0;
        local_100 = 0;
        gSSHResourceID = uVar6;
        local_80 = param_4;
        IGAccelResource::get_tex_data(pIVar36,(long *)local_78,&local_134);
        IGAccelResource::get_tex_data(pIVar38,(long *)&local_d8,&local_134);
        IGAccelResource::get_tex_data(local_90,(long *)&local_110,&local_134);
        IGAccelResource::get_tex_data(this,(long *)&local_108,&local_134);
        IGAccelResource::get_tex_data(local_98,(long *)&local_100,&local_134);
        lVar27 = *(long *)(param_6 + 0x58);
        lVar40 = 8;
        if ((lVar27 != 0) &&
           (((uVar24 = *(long *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8) -
                       (ulong)*(uint *)(param_6 + 0x6c), 0x57 < uVar24 &&
             (uVar29 = (ulong)*(uint *)(local_80 + 8), uVar29 <= uVar24 - 0x58 >> 2)) &&
            (lVar27 = *(long *)(param_6 + 0x20), lVar27 != 0)))) {
          local_80 = (ulong)((uint)*(undefined8 *)(lVar27 + 0x10 + uVar29 * 4) & 0xfff) |
                     local_d8 & 0xfffffffffffff000;
          local_a0 = (IGAccelResource *)
                     ((local_78[0] & 0xfffffffffffff000) +
                      (*(ulong *)(lVar27 + 0x18 + uVar29 * 4) & 0xffe) + 1);
          local_a8 = (IGAccelResource *)
                     ((*(ulong *)(lVar27 + 0x20 + uVar29 * 4) & 0xffe) +
                      (local_78[0] & 0xfffffffffffff000) + 1);
          lVar40 = (local_110 & 0xfffffffffffff000) +
                   (*(ulong *)(lVar27 + 0x28 + uVar29 * 4) & 0xffe) + 1;
          uVar24 = *(ulong *)(lVar27 + 0x30 + uVar29 * 4);
          uVar34 = uVar24 | 0x100000000;
          uVar18 = *(ulong *)(lVar27 + 0x38 + uVar29 * 4);
          *(ulong *)(lVar27 + 0x30 + uVar29 * 4) = uVar34;
          *(ulong *)(lVar27 + 0x38 + uVar29 * 4) = uVar18 | 1;
          *(long *)(lVar27 + 0x28 + uVar29 * 4) = lVar40;
          *(IGAccelResource **)(lVar27 + 0x20 + uVar29 * 4) = local_a8;
          *(IGAccelResource **)(lVar27 + 0x18 + uVar29 * 4) = local_a0;
          *(ulong *)(lVar27 + 0x10 + uVar29 * 4) = local_80;
          uVar39 = local_108 >> 0x20 | (ulong)*(uint *)(lVar27 + 0xc + uVar29 * 4) << 0x20;
          uVar32 = uVar18 & 0xffeffffffff | 1 |
                   (ulong)(*(uint *)(local_90 + (ulong)(*(long *)(local_90 + 0x88) == 0) * 8 + 200)
                          >> 0xc) << 0x2c | 0x100000000;
          uVar28 = (local_108 >> 0xc) << 0x2c | *(ulong *)(lVar27 + uVar29 * 4) & 0xffeffffffff |
                   0x100000000;
          local_90 = *(IGAccelResource **)(lVar27 + 0x48 + uVar29 * 4);
          *(IGAccelResource **)(lVar27 + 0x48 + uVar29 * 4) = local_90;
          uVar18 = *(ulong *)(lVar27 + 0x40 + uVar29 * 4);
          *(ulong *)(lVar27 + 0x40 + uVar29 * 4) = uVar18;
          uVar8 = *(undefined8 *)(lVar27 + 0x50 + uVar29 * 4);
          *(undefined8 *)(lVar27 + 0x50 + uVar29 * 4) = uVar8;
          *(ulong *)(lVar27 + 0x30 + uVar29 * 4) = uVar34;
          *(long *)(lVar27 + 0x28 + uVar29 * 4) = lVar40;
          *(IGAccelResource **)(lVar27 + 0x20 + uVar29 * 4) = local_a8;
          *(IGAccelResource **)(lVar27 + 0x18 + uVar29 * 4) = local_a0;
          *(ulong *)(lVar27 + 0x10 + uVar29 * 4) = local_80;
          *(ulong *)(lVar27 + 8 + uVar29 * 4) = uVar39;
          *(ulong *)(lVar27 + uVar29 * 4) = uVar28;
          *(ulong *)(lVar27 + 0x38 + uVar29 * 4) = uVar32;
          lVar16 = (ulong)(*(uint *)(this + (ulong)(*(long *)(this + 0x88) == 0) * 8 + 200) &
                          0xfffff000) + (uVar24 & 0xffffffff00000ffe | 0x100000000) + 1;
          lVar19 = (local_100 & 0xfffffffffffff000) + (uVar18 & 0xffe) + 1;
          *(IGAccelResource **)(lVar27 + 0x48 + uVar29 * 4) = local_90;
          *(long *)(lVar27 + 0x40 + uVar29 * 4) = lVar19;
          *(undefined8 *)(lVar27 + 0x50 + uVar29 * 4) = uVar8;
          *(ulong *)(lVar27 + 0x38 + uVar29 * 4) = uVar32;
          *(long *)(lVar27 + 0x28 + uVar29 * 4) = lVar40;
          *(IGAccelResource **)(lVar27 + 0x20 + uVar29 * 4) = local_a8;
          *(ulong *)(lVar27 + 0x10 + uVar29 * 4) = local_80;
          *(ulong *)(lVar27 + 8 + uVar29 * 4) = uVar39;
          *(ulong *)(lVar27 + uVar29 * 4) = uVar28;
          *(IGAccelResource **)(lVar27 + 0x18 + uVar29 * 4) = local_a0;
          *(long *)(lVar27 + 0x30 + uVar29 * 4) = lVar16;
          uVar25 = *(uint *)(local_98 + (ulong)(*(long *)(local_98 + 0x88) == 0) * 8 + 200);
          *(long *)(lVar27 + 0x40 + uVar29 * 4) = lVar19;
          *(undefined8 *)(lVar27 + 0x50 + uVar29 * 4) = uVar8;
          *(ulong *)(lVar27 + 0x38 + uVar29 * 4) = uVar32;
          *(long *)(lVar27 + 0x30 + uVar29 * 4) = lVar16;
          *(long *)(lVar27 + 0x28 + uVar29 * 4) = lVar40;
          *(IGAccelResource **)(lVar27 + 0x20 + uVar29 * 4) = local_a8;
          *(IGAccelResource **)(lVar27 + 0x18 + uVar29 * 4) = local_a0;
          *(ulong *)(lVar27 + 0x10 + uVar29 * 4) = local_80;
          *(ulong *)(lVar27 + 8 + uVar29 * 4) = uVar39;
          *(ulong *)(lVar27 + uVar29 * 4) = uVar28;
          *(ulong *)(lVar27 + 0x48 + uVar29 * 4) =
               (ulong)local_90 & 0xffffffff00000fff | (ulong)((uVar25 >> 6) - 1 & 0xfffff) << 0xc;
          local_b0 = this;
          goto LAB_0006abf9;
        }
      }
    }
    break;
  case 0x40003:
    if ((long)(param_5 - param_4) < 0x24) goto LAB_000698d9;
    lVar40 = 9;
    if (*(uint *)(param_4 + 0xc) < *(uint *)(param_3 + 0xc)) {
      lVar27 = *(long *)(*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0xc) * 8);
      if (((lVar27 != 0) && (*(uint *)(param_4 + 0x14) < *(uint *)(param_3 + 0xc))) &&
         (pIVar36 = *(IGAccelResource **)
                     (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0x14) * 8),
         pIVar36 != (IGAccelResource *)0x0)) {
        uVar25 = *(uint *)(param_4 + 0x10);
        lVar16 = (ulong)(*(int *)(param_4 + 0x20) != 0) * 4 + 4;
        lVar40 = 10;
        if ((ulong)uVar25 <=
            (ulong)(*(long *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8) - lVar16))
        {
          local_b0 = (IGAccelResource *)CONCAT44(local_b0._4_4_,*(int *)(param_4 + 0x20));
          uVar6 = *(uint *)(param_4 + 0x18);
          if ((ulong)uVar6 <=
              (ulong)(*(long *)(pIVar36 + (ulong)(*(long *)(pIVar36 + 0x88) == 0) * 8 + 200) -
                     lVar16)) {
            local_d8 = local_d8 & 0xffffffff00000000;
            local_78[0] = 0;
            IGAccelResource::get_tex_data(pIVar36,(long *)local_78,(undefined4 *)&local_d8);
            if ((*(int *)(param_4 + 0x1c) != 0) && (*(long **)(pIVar36 + 0x40) != (long *)0x0)) {
              local_78[0] = (**(code **)(**(long **)(pIVar36 + 0x40) + 0x128))();
            }
            local_78[0] = local_78[0] + uVar6;
            lVar40 = IOAccelResource2::getKernelData();
            puVar35 = (ulong *)((ulong)uVar25 + lVar40);
            if (lVar40 == 0) {
              puVar35 = (ulong *)0x0;
            }
            if (puVar35 == (ulong *)0x0) goto LAB_0006ab4a;
            if ((int)local_b0 == 0) {
              *(int *)puVar35 = (int)local_78[0];
            }
            else {
              *puVar35 = local_78[0];
            }
            goto LAB_0006abf4;
          }
        }
      }
    }
    break;
  case 0x40004:
    lVar40 = 10;
    if ((0x11 < (long)(param_5 - param_4)) &&
       (pIVar36 = (IGAccelResource *)(ulong)*(ushort *)(param_4 + 0x10),
       ((long)pIVar36 << 5 | 0x18U) <= param_5 - param_4)) {
      puVar22 = &gSSHResourceID;
      if ((*(byte *)(param_4 + 0x12) & 1) != 0) {
        puVar22 = (uint *)(param_4 + 0xc);
      }
      if ((*puVar22 < *(uint *)(param_3 + 0xc)) &&
         (lVar27 = *(long *)(*(long *)(param_3 + 0x10) + (ulong)*puVar22 * 8), lVar27 != 0)) {
        local_d0 = param_7;
        local_e8 = param_9;
        local_f0 = param_2;
        local_b0 = param_6;
        local_98 = param_3;
        local_80 = param_4;
        lVar16 = (**(code **)(**(long **)(lVar27 + 0x40) + 0x130))();
        cVar2 = *(char *)(lVar27 + 0x14);
        if (cVar2 == '\0') {
LAB_000698a8:
          uVar24 = *(ulong *)(lVar27 + 0xf8);
        }
        else if (cVar2 == -0x7e) {
          uVar24 = (ulong)*(uint *)(lVar27 + 0xfc);
        }
        else {
          if (cVar2 == -0x80) goto LAB_000698a8;
          uVar24 = 0;
        }
        local_130 = IOAccelResource2::getKernelData();
        if (local_130 == 0) {
LAB_0006ab4a:
          lVar40 = 8;
        }
        else {
          local_f8 = lVar27;
          local_c8 = pIVar36;
          if (pIVar36 != (IGAccelResource *)0x0) {
            local_e0 = *(IGAccelTask **)(local_b0 + 8);
            local_82 = *(byte *)(local_80 + 0x12);
            local_128 = *(long *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8) + -0x40
            ;
            local_118 = lVar16 + uVar24 + 0x18;
            local_81 = true;
            local_90 = (IGAccelResource *)0x0;
            do {
              lVar27 = (long)local_90 * 0x20;
              lVar16 = (ulong)*(ushort *)(local_80 + 0x2c + lVar27) * 0x20;
              if (local_128 < lVar16) goto switchD_00069350_caseD_40008;
              uVar25 = *(uint *)(local_80 + 0x20 + lVar27);
              if ((*(uint *)(local_98 + 0xc) <= uVar25) ||
                 (pIVar36 = *(IGAccelResource **)(*(long *)(local_98 + 0x10) + (ulong)uVar25 * 8),
                 pIVar36 == (IGAccelResource *)0x0)) goto LAB_0006ab3f;
              pIVar38 = (IGAccelResource *)(lVar16 + local_130);
              if ((local_82 & 1) == 0) {
                local_78[0] = 0;
                local_d8 = local_d8 & 0xffffffff00000000;
                IGAccelResource::get_tex_data(pIVar36,(long *)local_78,(undefined4 *)&local_d8);
                *(ulong *)(pIVar38 + 0x20) = *(uint *)(local_80 + 0x24 + lVar27) + local_78[0];
              }
              uVar11 = *(ushort *)(local_80 + 0x2e + lVar27);
              pIVar26 = local_c8;
              local_a0 = pIVar38;
              if ((uVar11 & 2) == 0) {
                local_b8 = (long *)(local_80 + lVar27 + 0x18);
                local_a8 = pIVar36;
                if ((uVar11 & 8) != 0) {
                  if (*local_b8 != 0) {
                    for (plVar15 = *(long **)(pIVar36 + 0x240); plVar15 != (long *)0x0;
                        plVar15 = (long *)plVar15[0x15]) {
                      if (*plVar15 == *local_b8) goto LAB_0006a53e;
                    }
                    goto LAB_0006a986;
                  }
                  local_c0 = lVar27;
                  lVar27 = IOAccelResource2::getStorageResource();
                  plVar15 = (long *)(lVar27 + 0x180);
                  lVar27 = local_c0;
LAB_0006a53e:
                  local_c0 = lVar27;
                  uVar24 = local_80;
                  if ((((*(byte *)((long)plVar15 + 0xa1) & 1) != 0) &&
                      ((*(byte *)((long)local_b8 + 0x16) & 1) == 0)) &&
                     (uVar11 = *(ushort *)(local_80 + 0x2a + local_c0), uVar11 != 0)) {
                    local_120 = (ushort *)(local_c0 + local_80 + 0x28);
                    uVar20 = *local_120;
                    uVar37 = uVar20;
                    do {
                      uVar5 = *(ushort *)(plVar15[0xb] + (ulong)uVar37 * 2);
                      if (uVar5 != 0) {
                        IGAccelCommandQueue::replayKernelCommand(local_f0);
                        IGAccelResource::submitDepthResolve
                                  (local_a8,(long)plVar15,local_d0,local_e0,local_e8,0x18,uVar37,
                                   uVar37,uVar5,(int *)0x0);
                        uVar20 = *local_120;
                        uVar11 = local_120[1];
                        uVar24 = local_80;
                      }
                      uVar37 = uVar37 + 1;
                    } while ((uint)uVar37 < (uint)uVar11 + (uint)uVar20);
                  }
                  bVar10 = local_82;
                  pIVar38 = local_a0;
                  pIVar36 = local_a8;
                  if (*(byte *)(plVar15 + 0x14) < 2) {
LAB_0006a802:
                    local_40 = 0;
                    local_48 = 0;
                    local_50 = 0;
                    local_60 = 0;
                    local_78[2] = 0;
                    local_78[1] = 0;
                    local_78[0] = 0;
                    local_58 = *(ulong *)(pIVar38 + 0x20);
                    pIVar26 = (IGAccelResource *)local_78;
                    if ((bVar10 & 1) == 0) {
                      pIVar26 = pIVar38;
                    }
                    IGAccelResource::fillSurfaceStateAuxInfo
                              (pIVar36,(long)plVar15,(long)pIVar26,
                               *(ushort *)((long)local_b8 + 0x16) >> 2 & 1);
                    uVar24 = local_80;
                  }
                  else {
                    if ((*(byte *)((long)local_b8 + 0x16) & 4) == 0) {
                      if ((*(uint *)((long)plVar15 + 0x4c) != (*(uint *)local_a0 >> 0x12 & 0x3ff))
                         && (*(byte *)(plVar15 + 0x14) != 2)) {
                        if ((*(byte *)plVar15[0xb] & 1) != 0) {
                          IGAccelCommandQueue::replayKernelCommand(local_f0);
                          IGAccelResource::submitCCSResolve
                                    (pIVar36,(long)plVar15,local_d0,local_e0,local_e8,3,0,1,
                                     (IGAccelResource *)0x0);
                          *(ushort *)plVar15[0xb] = *(ushort *)plVar15[0xb] & 0xfffe;
                          *(ushort *)plVar15[0xc] = *(ushort *)plVar15[0xc] & 0xfffe;
                        }
                        *(undefined1 *)(plVar15 + 0x14) = 1;
                        *(byte *)((long)plVar15 + 0xa1) = *(byte *)((long)plVar15 + 0xa1) & 0xfb;
                      }
                      goto LAB_0006a802;
                    }
                    if ((*(short *)(uVar24 + 0x28 + local_c0) == 0) &&
                       (*(char *)(uVar24 + 0x31 + local_c0) == '\0')) {
                      lVar27 = uVar24 + local_c0;
                      pbVar17 = (byte *)plVar15[0xb];
                      if ((*pbVar17 & 1) != 0) {
                        IGAccelCommandQueue::replayKernelCommand(local_f0);
                        IGAccelResource::submitCCSResolve
                                  (local_a8,(long)plVar15,local_d0,local_e0,local_e8,3,
                                   (uint)*(ushort *)(lVar27 + 0x28),
                                   (ushort)(1 << (*(byte *)(lVar27 + 0x31) & 0x1f)),
                                   (IGAccelResource *)0x0);
                        pbVar17 = (byte *)plVar15[0xb];
                      }
                      *(undefined1 *)(plVar15 + 0x14) = 1;
                      *(byte *)((long)plVar15 + 0xa1) = *(byte *)((long)plVar15 + 0xa1) & 0xfb;
                      bVar4 = *(byte *)(lVar27 + 0x31);
                      bVar9 = bVar4 & 0x1f;
                      uVar24 = (ulong)*(ushort *)(lVar27 + 0x28);
                      *(ushort *)(pbVar17 + uVar24 * 2) =
                           *(ushort *)(pbVar17 + uVar24 * 2) &
                           ((ushort)(-2 << bVar9) | (ushort)(0xfffffffe >> 0x20 - bVar9));
                      puVar1 = (ushort *)(plVar15[0xc] + uVar24 * 2);
                      *puVar1 = *puVar1 | (ushort)(1 << (bVar4 & 0x1f));
                      pIVar36 = local_a8;
                      pIVar38 = local_a0;
                      goto LAB_0006a802;
                    }
                    local_40 = 0;
                    local_48 = 0;
                    local_50 = 0;
                    local_60 = 0;
                    local_78[2] = 0;
                    local_78[1] = 0;
                    local_78[0] = 0;
                    pIVar36 = local_a0 + 0x18;
                    if ((local_82 & 1) != 0) {
                      pIVar36 = (IGAccelResource *)&local_60;
                    }
                    local_58 = *(ulong *)(local_a0 + 0x20);
                    *(uint *)pIVar36 = *(uint *)pIVar36 & 0xfffff000;
                  }
                  if ((bVar10 & 1) == 0) {
LAB_0006a97b:
                    uVar11 = *(ushort *)((long)local_b8 + 0x16);
                    lVar27 = local_c0;
                    goto LAB_0006a986;
                  }
                  *(ulong *)(local_a0 + 0x28) =
                       *(ulong *)(local_a0 + 0x28) & 0xfffffffffffffbff |
                       (ulong)((uint)local_50 & 0x400);
                  uVar18 = (local_48 >> 0x20 & 0xffff) << 0x20;
                  uVar29 = *(ulong *)(local_a0 + 0x30);
                  *(ulong *)(local_a0 + 0x30) = uVar29 & 0xffff0000ffffffff | uVar18;
                  *(ulong *)(local_a0 + 0x30) =
                       uVar29 & 0xffff00000000003f | uVar18 | (ulong)((uint)local_48 & 0xffffffc0);
                  lVar27 = *(long *)(local_b0 + 0x58);
                  if ((((lVar27 != 0) &&
                       (uVar29 = *(long *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8
                                          ) - (ulong)*(uint *)(local_b0 + 0x6c), 0xf < uVar29)) &&
                      (uVar18 = (ulong)*(uint *)(uVar24 + 8), uVar18 <= uVar29 - 0x10 >> 2)) &&
                     (lVar27 = *(long *)(local_b0 + 0x20), lVar27 != 0)) {
                    *(undefined4 *)(lVar27 + 0xc + uVar18 * 4) = (undefined4)local_60;
                    lVar16 = (ulong)*(ushort *)(uVar24 + local_c0 + 0x2c) * 0x20 + local_118;
                    *(ulong *)(lVar27 + uVar18 * 4) =
                         *(ulong *)(lVar27 + uVar18 * 4) & 0x3ffffffff |
                         (ulong)((uint)lVar16 & 0xfffffffc) << 0x20;
                    *(uint *)(lVar27 + 8 + uVar18 * 4) =
                         CONCAT22(*(undefined2 *)(lVar27 + 10 + uVar18 * 4),
                                  (short)((ulong)lVar16 >> 0x20));
                    goto LAB_0006a97b;
                  }
                  lVar40 = 8;
LAB_0006abe3:
                  if ((local_81 & 1U) != 0) goto switchD_00069350_caseD_40008;
                  break;
                }
LAB_0006a986:
                pIVar26 = local_c8;
                if (((uVar11 & 4) != 0) &&
                   (bVar10 = IGAccelResource::isDisplayableIOSurface(), bVar10 != 0)) {
                  lVar16 = *(long *)(local_d0 + 0x1290);
                  bVar10 = IGAccelResource::isDisplayableIOSurface();
                  if (bVar10 == 0) {
                    if ((~*(ushort *)
                           (&g_cInitGfxL3ControlRegisters +
                           ((byte)(*(ulong *)local_a0 >> 0x38) & 0x7e)) & 0x30) == 0)
                    goto LAB_0006aa11;
                    lVar19 = IOAccelResource2::getStorageResource();
                    uVar24 = *(ulong *)(lVar19 + 200 + (ulong)(*(long *)(lVar19 + 0x88) == 0) * 8);
                    if (*(ulong *)(lVar16 + 0x108) * 2 < uVar24) {
                      uVar29 = *(ulong *)(local_a0 + 8);
                      uVar24 = *(ulong *)local_a0 & 0x81ffffffffffffff | 0x3200000000000000;
                    }
                    else {
                      uVar29 = *(ulong *)(local_a0 + 8);
                      if (*(ulong *)(lVar16 + 0x108) >> 1 < uVar24) {
                        uVar24 = 0x3000000000000000;
                      }
                      else {
                        uVar24 = 0x2400000000000000;
                      }
                      uVar24 = *(ulong *)local_a0 & 0x81ffffffffffffff | uVar24;
                    }
                  }
                  else {
                    uVar29 = *(ulong *)(local_a0 + 8);
                    uVar24 = *(ulong *)local_a0 & 0x81ffffffffffffff;
                  }
                  *(ulong *)local_a0 = uVar24;
                  *(ulong *)(local_a0 + 8) = uVar29;
                }
LAB_0006aa11:
                pIVar36 = local_a8;
                if (((*(byte *)((long)local_b8 + 0x16) & 4) != 0) && (*local_b8 == 0)) {
                  IVar3 = *(IGAccelResource *)(local_80 + 0x30 + lVar27);
                  if ((byte)local_a8[0xac] <= (byte)IVar3) {
                    lVar40 = 10;
                    goto LAB_0006abe3;
                  }
                  if (local_a8[0xad] != (IGAccelResource)0x0) {
                    uVar25 = 0;
                    do {
                      (**(code **)(*(long *)pIVar36 + 0x168))(pIVar36,IVar3,uVar25);
                      uVar25 = uVar25 + 1;
                    } while (uVar25 < (byte)pIVar36[0xad]);
                  }
                }
              }
              local_90 = local_90 + 1;
              local_81 = local_90 < pIVar26;
            } while (local_90 != pIVar26);
          }
LAB_0006abf4:
          IOAccelResource2::releaseKernelData();
LAB_0006abf9:
          lVar40 = 0;
        }
      }
      else {
LAB_0006ab3f:
        lVar40 = 9;
      }
    }
    break;
  case 0x40005:
    *(undefined8 *)(param_6 + 0x50) = param_8;
    if (0x13 < (long)(param_5 - param_4)) {
      pIVar36 = (IGAccelResource *)((ulong)*(uint *)(param_4 + 0x10) * 0x10);
      if (pIVar36 + 0x18 <= (IGAccelResource *)(param_5 - param_4)) {
        lVar40 = 9;
        if ((*(uint *)(param_4 + 0xc) < *(uint *)(param_3 + 0xc)) &&
           (local_90 = *(IGAccelResource **)
                        (*(long *)(param_3 + 0x10) + (ulong)*(uint *)(param_4 + 0xc) * 8),
           local_90 != (IGAccelResource *)0x0)) {
          lVar40 = 0;
          if (*(uint *)(param_4 + 0x10) != 0) {
            local_a8 = *(IGAccelResource **)
                        (*(long *)(param_6 + 0x58) + 200 +
                        (ulong)(*(long *)(*(long *)(param_6 + 0x58) + 0x88) == 0) * 8);
            local_a0 = *(IGAccelResource **)
                        (local_90 + (ulong)(*(long *)(local_90 + 0x88) == 0) * 8 + 200);
            local_98 = (IGAccelResource *)0x0;
            local_b0 = param_6;
            local_80 = param_4;
            do {
              pIVar38 = local_90;
              uVar24 = (ulong)*(uint *)(local_98 + local_80 + 0x18);
              if (local_a8 <= (IGAccelResource *)(uVar24 + 0x10)) goto LAB_000698d9;
              lVar27 = *(long *)(param_6 + 0x58);
              lVar40 = 8;
              if ((((lVar27 == 0) ||
                   (uVar29 = *(long *)(lVar27 + 200 + (ulong)(*(long *)(lVar27 + 0x88) == 0) * 8) -
                             (ulong)*(uint *)(param_6 + 0x6c), uVar29 < 0x10)) ||
                  (uVar29 - 0x10 >> 2 < uVar24)) ||
                 (lVar27 = *(long *)(param_6 + 0x20), lVar27 == 0)) break;
              uVar8 = *(undefined8 *)(lVar27 + uVar24 * 4);
              uVar25 = (uint)uVar8;
              if ((uVar25 & 0xe0000000) == 0x60000000) {
                if ((uVar29 < 0x18) || (uVar29 - 0x18 >> 2 < uVar24)) break;
                if (((uVar25 & 0x1fff0000) != 0x1a000000) ||
                   (((~(uint)((ulong)uVar8 >> 0x2e) & 1) != 0 ||
                    (lVar40 = *(long *)(local_98 + local_80 + 0x20),
                    local_a0 <= (IGAccelResource *)(lVar40 + 4U))))) goto LAB_000698d9;
                iVar13 = (**(code **)(**(long **)(local_90 + 0x40) + 0x130))();
                IVar3 = pIVar38[0x14];
                if (IVar3 == (IGAccelResource)0x0) {
LAB_00069cef:
                  iVar21 = (int)*(undefined8 *)(pIVar38 + 0xf8);
                }
                else if (IVar3 == (IGAccelResource)0x82) {
                  iVar21 = *(int *)(pIVar38 + 0xfc);
                }
                else {
                  if (IVar3 == (IGAccelResource)0x80) goto LAB_00069cef;
                  iVar21 = 0;
                }
                *(uint *)(lVar27 + 8 + uVar24 * 4) =
                     *(uint *)(lVar27 + 8 + uVar24 * 4) & 3 |
                     iVar21 + iVar13 + (int)lVar40 & 0xfffffffcU;
                lVar16 = (**(code **)(**(long **)(pIVar38 + 0x40) + 0x130))();
                IVar3 = pIVar38[0x14];
                if (IVar3 == (IGAccelResource)0x0) {
LAB_00069e34:
                  uVar29 = *(ulong *)(local_90 + 0xf8);
                }
                else if (IVar3 == (IGAccelResource)0x82) {
                  uVar29 = (ulong)*(uint *)(local_90 + 0xfc);
                }
                else {
                  if (IVar3 == (IGAccelResource)0x80) goto LAB_00069e34;
                  uVar29 = 0;
                }
                *(int *)(lVar27 + 0xc + uVar24 * 4) = (int)(lVar16 + lVar40 + uVar29 >> 0x20);
                param_6 = local_b0;
              }
              else {
                uVar25 = uVar25 >> 0x17 & 0x3f;
                if (uVar25 == 0x28) {
                  local_c8 = *(IGAccelResource **)(local_98 + local_80 + 0x20);
                  if (local_a0 <= local_c8 + 4) goto LAB_000698d9;
                  lVar40 = (**(code **)(**(long **)(local_90 + 0x40) + 0x130))();
                  IVar3 = pIVar38[0x14];
                  if (IVar3 == (IGAccelResource)0x0) {
LAB_00069dd7:
                    uVar29 = *(ulong *)(pIVar38 + 0xf8);
                  }
                  else if (IVar3 == (IGAccelResource)0x82) {
                    uVar29 = (ulong)*(uint *)(pIVar38 + 0xfc);
                  }
                  else {
                    if (IVar3 == (IGAccelResource)0x80) goto LAB_00069dd7;
                    uVar29 = 0;
                  }
                  *(short *)(lVar27 + 8 + uVar24 * 4) =
                       (short)((ulong)(local_c8 + uVar29 + lVar40) >> 0x20);
                  *(ulong *)(lVar27 + uVar24 * 4) =
                       *(ulong *)(lVar27 + uVar24 * 4) & 0x3fffffffff |
                       (ulong)((uint)(local_c8 + uVar29 + lVar40) & 0xffffffc0) << 0x20;
                }
                else {
                  if ((uVar25 != 0x24) ||
                     (local_c8 = *(IGAccelResource **)(local_98 + local_80 + 0x20),
                     local_a0 <= local_c8 + 4)) goto LAB_000698d9;
                  lVar40 = (**(code **)(**(long **)(local_90 + 0x40) + 0x130))();
                  IVar3 = pIVar38[0x14];
                  if (IVar3 == (IGAccelResource)0x0) {
LAB_00069d6d:
                    uVar29 = *(ulong *)(pIVar38 + 0xf8);
                  }
                  else if (IVar3 == (IGAccelResource)0x82) {
                    uVar29 = (ulong)*(uint *)(pIVar38 + 0xfc);
                  }
                  else {
                    if (IVar3 == (IGAccelResource)0x80) goto LAB_00069d6d;
                    uVar29 = 0;
                  }
                  *(ulong *)(lVar27 + 8 + uVar24 * 4) =
                       (*(ulong *)(lVar27 + 8 + uVar24 * 4) & 0xffff000000000003) +
                       ((ulong)(local_c8 + uVar29 + lVar40) >> 2 & 0x3fffffffffff) * 4;
                }
              }
              local_98 = local_98 + 0x10;
              lVar40 = 0;
            } while (pIVar36 != local_98);
          }
        }
        break;
      }
    }
LAB_000698d9:
    lVar40 = 10;
    break;
  case 0x40006:
    lVar40 = 10;
    if (((0xf < (long)(param_5 - param_4)) &&
        (pIVar36 = (IGAccelResource *)(ulong)*(uint *)(param_4 + 0xc),
        (long)pIVar36 * 0x70 + 0x10U <= param_5 - param_4)) &&
       (lVar40 = 0, pIVar36 != (IGAccelResource *)0x0)) {
      pIVar38 = (IGAccelResource *)0x0;
      local_b0 = pIVar36;
      local_98 = param_3;
      local_80 = param_4;
      do {
        lVar27 = (long)pIVar38 * 0x70;
        uVar25 = *(uint *)(param_4 + 0x18 + lVar27);
        lVar40 = 9;
        if (((*(uint *)(param_3 + 0xc) <= uVar25) ||
            (lVar16 = *(long *)(*(long *)(param_3 + 0x10) + (ulong)uVar25 * 8), lVar16 == 0)) ||
           (lVar19 = *(long *)(param_4 + lVar27 + 0x10), lVar19 == 0)) break;
        for (plVar15 = *(long **)(lVar16 + 0x240); plVar15 != (long *)0x0;
            plVar15 = (long *)plVar15[0x15]) {
          if (*plVar15 == lVar19) goto LAB_00069aaa;
        }
        plVar14 = (long *)_IOMallocTypeImpl(IGAccelResource::ResourceInfoEntry::operator_new);
        *plVar14 = lVar19;
        *(undefined2 *)(plVar14 + 0x10) = 0;
        plVar14[0x15] = *(long *)(lVar16 + 0x240);
        *(long **)(lVar16 + 0x240) = plVar14;
        plVar15 = (long *)(local_80 + 0x30 + lVar27);
        uVar12 = *(undefined4 *)((long)plVar15 + -0x14);
        uVar31 = (undefined4)plVar15[-2];
        iVar13 = *(int *)((long)plVar15 + -0xc);
        uVar7 = *(undefined4 *)((long)plVar15 + -4);
        uVar33 = (undefined4)plVar15[-1];
        uVar25 = iVar13 + (uint)(iVar13 == 0);
        uVar24 = (ulong)uVar25;
        plVar30 = plVar14 + 1;
        for (lVar40 = 10; lVar40 != 0; lVar40 = lVar40 + -1) {
          *plVar30 = *plVar15;
          plVar15 = plVar15 + (ulong)bVar10 * -2 + 1;
          plVar30 = plVar30 + (ulong)bVar10 * -2 + 1;
        }
        *(short *)(plVar14 + 0x10) = (short)uVar25;
        if ((uVar25 & 0xffff) < 7) {
          plVar15 = plVar14 + 0xd;
        }
        else {
          local_a8 = (IGAccelResource *)CONCAT44(local_a8._4_4_,uVar33);
          local_90 = (IGAccelResource *)CONCAT44(local_90._4_4_,uVar31);
          plVar15 = (long *)_IOMallocZeroData((uVar25 & 0xffff) << 2);
          uVar24 = (ulong)*(ushort *)(plVar14 + 0x10);
          uVar33 = local_a8._0_4_;
          uVar31 = local_90._0_4_;
        }
        plVar14[0xb] = (long)plVar15;
        plVar14[0xc] = (long)plVar15 + (uVar24 & 0xffff) * 2;
        if (((char)plVar14[0x14] == '\0') && ((int)plVar14[8] != 0)) {
          *(undefined1 *)(plVar14 + 0x14) = 1;
        }
        *(undefined4 *)((long)plVar14 + 0x8c) = uVar12;
        *(undefined4 *)(plVar14 + 0x12) = uVar31;
        *(int *)((long)plVar14 + 0x94) = iVar13;
        *(undefined4 *)(plVar14 + 0x13) = uVar7;
        *(undefined4 *)(plVar14 + 0x11) = uVar33;
        param_3 = local_98;
        pIVar36 = local_b0;
        param_4 = local_80;
LAB_00069aaa:
        pIVar38 = pIVar38 + 1;
        lVar40 = 0;
      } while (pIVar38 != pIVar36);
    }
    break;
  case 0x40007:
    lVar40 = 10;
    if (0xf < (long)(param_5 - param_4)) {
      uVar24 = (ulong)*(uint *)(param_4 + 0xc);
      if (((uVar24 * 8 + 0x14 <= param_5 - param_4) &&
          (*(uint *)(param_4 + 0xc) <= *(uint *)(param_4 + 0x10))) && (lVar40 = 0, uVar24 != 0)) {
        uVar29 = 0;
        do {
          uVar25 = *(uint *)(param_4 + 0x14 + uVar29 * 8);
          lVar40 = 9;
          if ((*(uint *)(param_3 + 0xc) <= uVar25) ||
             (*(long *)(*(long *)(param_3 + 0x10) + (ulong)uVar25 * 8) == 0)) break;
          uVar29 = uVar29 + 1;
          lVar40 = 0;
        } while (uVar24 != uVar29);
      }
    }
    break;
  case 0x40008:
    break;
  default:
    lVar40 = 0;
    if (param_1 != 8) goto LAB_000698d9;
  }
switchD_00069350_caseD_40008:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return lVar40;
  }
LAB_0006ac01:
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelCommandQueue::replayKernelCommand(bool)

void __cdecl IGAccelCommandQueue::replayKernelCommand(long *param_1)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  bool bVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  long lVar10;
  uint uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  
  lVar13 = param_1[0xee];
  if (lVar13 == 0) {
    return;
  }
  uVar1 = *(uint *)(lVar13 + 4);
  lVar14 = param_1[0xd6];
  uVar3 = *(undefined8 *)(lVar14 + 0x18);
  uVar4 = *(undefined8 *)(lVar14 + 0x50);
  uVar5 = *(undefined8 *)(lVar14 + 0x58);
  uVar2 = *(uint *)(param_1 + 0x104);
  if ((int)uVar2 < 0) {
    uVar11 = *(uint *)(lVar14 + 0x6c);
  }
  else {
    lVar10 = param_1[(ulong)uVar2 + 0xf4];
    uVar11 = *(uint *)(lVar14 + 0x6c);
    if (lVar10 != 0) {
      *(uint *)(param_1 + 0x104) = uVar2 - 1;
      bVar6 = false;
      goto LAB_0006aca2;
    }
  }
  bVar6 = true;
  lVar10 = 0;
LAB_0006aca2:
  lVar9 = param_1[0xed];
  lVar7 = param_1[0xc4];
  if (*(long *)(lVar14 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar14 + 0x20) = 0;
    lVar14 = param_1[0xd6];
  }
  *(long *)(lVar14 + 0x50) = param_1[0xef];
  *(long *)(lVar14 + 0x18) = param_1[0xf1];
  *(long *)(lVar14 + 0x58) = param_1[0xf0];
  uVar2 = *(uint *)(param_1 + 0xf2);
  *(uint *)(lVar14 + 0x6c) = uVar2;
  lVar8 = IOAccelResource2::getKernelData();
  lVar12 = (ulong)uVar2 + lVar8;
  if (lVar8 == 0) {
    lVar12 = 0;
  }
  *(long *)(lVar14 + 0x20) = lVar12;
  param_1[0xed] = 0;
  param_1[0xee] = 0;
  param_1[0xef] = 0;
  param_1[0xf0] = 0;
  param_1[0xf1] = 0;
  *(undefined4 *)(param_1 + 0xf2) = 0;
  param_1[0xf3] = 0;
  *(undefined4 *)(param_1 + 0xc4) = 1;
  *(undefined1 *)((long)param_1 + 0x824) = 1;
  (**(code **)(*param_1 + 0xa08))(param_1,lVar9,lVar13,(ulong)uVar1 + lVar13);
  *(undefined1 *)((long)param_1 + 0x824) = 0;
  lVar13 = param_1[0xd6];
  if (*(long *)(lVar13 + 0x20) != 0) {
    IOAccelResource2::releaseKernelData();
    *(undefined8 *)(lVar13 + 0x20) = 0;
    lVar13 = param_1[0xd6];
  }
  *(uint *)(param_1 + 0xc4) = (uint)((int)lVar7 != 0);
  *(undefined8 *)(lVar13 + 0x50) = uVar4;
  *(undefined8 *)(lVar13 + 0x18) = uVar3;
  *(undefined8 *)(lVar13 + 0x58) = uVar5;
  *(uint *)(lVar13 + 0x6c) = uVar11;
  lVar9 = IOAccelResource2::getKernelData();
  lVar14 = (ulong)uVar11 + lVar9;
  if (lVar9 == 0) {
    lVar14 = 0;
  }
  *(long *)(lVar13 + 0x20) = lVar14;
  if (!bVar6) {
    lVar13 = param_1[0x104];
    *(int *)(param_1 + 0x104) = (int)lVar13 + 1;
    param_1[(long)(int)lVar13 + 0xf5] = lVar10;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// process_token_CommandBufferEnd_SaveState(IGAccelCommandQueue&, IGAccelSegmentResourceList&,
// IOAccelKernelCommand const&, IGAccelCommandDescriptor&, IOGraphicsAccelerator2&)

undefined8 __cdecl
process_token_CommandBufferEnd_SaveState
          (long param_1,undefined8 param_2,undefined8 param_3,long param_4)

{
  uint uVar1;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  ulong uVar5;
  
  lVar2 = *(long *)(param_1 + 0x770);
  if (lVar2 != 0) {
    lVar4 = IOAccelResource2::getKernelData();
    uVar5 = lVar4 + *(long *)(*(long *)(param_1 + 0x780) + 200 +
                             (ulong)(*(long *)(*(long *)(param_1 + 0x780) + 0x88) == 0) * 8);
    uVar1 = *(uint *)(param_1 + 0x790);
    lVar4 = IOAccelResource2::getKernelData();
    if (lVar4 == 0) {
      return 8;
    }
    lVar4 = lVar4 + (ulong)uVar1;
    if (lVar4 == 0) {
      return 8;
    }
    lVar4 = lVar4 + (ulong)*(uint *)(lVar2 + 8) * 4;
    if (*(long *)(param_1 + 0x798) == *(long *)(param_1 + 0x780)) {
      if (uVar5 < lVar4 + 0xe0U) {
        return 10;
      }
      *(undefined4 *)(lVar4 + 0xdc) = 0;
    }
    else {
      if (uVar5 < lVar4 + 0xdcU) {
        return 10;
      }
      *(ulong *)(lVar4 + 0xd0) = 0x18800101;
      *(undefined4 *)(lVar4 + 0xd8) = 0;
      uVar3 = *(undefined8 *)(param_4 + 0x18);
      *(int *)(lVar4 + 0xd8) = (int)((ulong)uVar3 >> 0x20);
      *(ulong *)(lVar4 + 0xd0) = (ulong)((uint)uVar3 & 0xfffffffc) << 0x20 | 0x18800101;
    }
    IOAccelResource2::releaseKernelData();
  }
  *(undefined8 *)(param_1 + 0x768) = param_2;
  *(undefined8 *)(param_1 + 0x770) = param_3;
  *(undefined8 *)(param_1 + 0x778) = *(undefined8 *)(param_4 + 0x50);
  *(undefined8 *)(param_1 + 0x780) = *(undefined8 *)(param_4 + 0x58);
  *(undefined4 *)(param_1 + 0x790) = *(undefined4 *)(param_4 + 0x6c);
  if (*(long *)(param_1 + 0x788) == 0) {
    *(undefined8 *)(param_1 + 0x788) = *(undefined8 *)(param_4 + 0x18);
  }
  *(undefined8 *)(param_1 + 0x798) = 0;
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGVector<resetRegisterInfo, IGIOMallocAllocatorPolicy>::IGVector(unsigned long, resetRegisterInfo
// const*)

void __cdecl IGVector<>::IGVector(ulong *param_1,long param_2)

{
  ulong uVar1;
  undefined8 uVar2;
  undefined1 auVar3 [16];
  ulong uVar4;
  long lVar5;
  ulong uVar6;
  long lVar7;
  
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  uVar4 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                     0x120);
  if (uVar4 != 0) {
    uVar6 = param_1[2];
    if (uVar6 != 0) {
      if (*param_1 != 0) {
        lVar5 = 0;
        uVar6 = 0;
        do {
          uVar1 = param_1[2];
          *(undefined4 *)(uVar4 + 0x20 + lVar5) = *(undefined4 *)(uVar1 + 0x20 + lVar5);
          *(undefined8 *)(uVar4 + 0x18 + lVar5) = *(undefined8 *)(uVar1 + 0x18 + lVar5);
          *(undefined8 *)(uVar4 + 0x10 + lVar5) = *(undefined8 *)(uVar1 + 0x10 + lVar5);
          uVar2 = *(undefined8 *)(uVar1 + lVar5);
          *(undefined8 *)(uVar4 + 8 + lVar5) = *(undefined8 *)(uVar1 + 8 + lVar5);
          *(undefined8 *)(uVar4 + lVar5) = uVar2;
          uVar6 = uVar6 + 1;
          lVar5 = lVar5 + 0x24;
        } while (uVar6 < *param_1);
        uVar6 = param_1[2];
      }
      auVar3._8_8_ = 0;
      auVar3._0_8_ = param_1[1];
      lVar5 = SUB168(ZEXT816(0x24) * auVar3,0);
      if (lVar5 < 0) {
        lVar5 = -0x8000000000000000;
      }
      lVar7 = -0x8000000000000000;
      if (SUB168(ZEXT816(0x24) * auVar3,8) == 0) {
        lVar7 = lVar5;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)
                          ::kalloc_type_view_29,uVar6,lVar7);
    }
    param_1[2] = uVar4;
    param_1[1] = 8;
    *param_1 = 0;
    uVar4 = 0;
    do {
      lVar5 = uVar4 * 0x24;
      uVar4 = param_1[2];
      *(undefined4 *)(uVar4 + 0x20 + lVar5) = *(undefined4 *)(param_2 + 0x20 + lVar5);
      *(undefined8 *)(uVar4 + 0x18 + lVar5) = *(undefined8 *)(param_2 + 0x18 + lVar5);
      *(undefined8 *)(uVar4 + 0x10 + lVar5) = *(undefined8 *)(param_2 + 0x10 + lVar5);
      uVar2 = *(undefined8 *)(param_2 + lVar5);
      *(undefined8 *)(uVar4 + 8 + lVar5) = *(undefined8 *)(param_2 + 8 + lVar5);
      *(undefined8 *)(uVar4 + lVar5) = uVar2;
      uVar4 = *param_1 + 1;
      *param_1 = uVar4;
    } while (uVar4 < 8);
  }
  return;
}



// IGVector<resetRegisterInfo, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  if (*(long *)(this + 0x10) != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = *(ulong *)(this + 8);
    lVar2 = SUB168(ZEXT816(0x24) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x24) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar3);
    return;
  }
  return;
}



// IGHardwareRingBufferMedia::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferMedia::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferMedia",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferMedia::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferMedia::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRingBufferMedia::IGHardwareRingBufferMedia(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferMedia::IGHardwareRingBufferMedia
          (IGHardwareRingBufferMedia *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMedia;
  return;
}



// IGHardwareRingBufferMedia::IGHardwareRingBufferMedia(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferMedia::IGHardwareRingBufferMedia
          (IGHardwareRingBufferMedia *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMedia;
  return;
}



// IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia()

void __thiscall
IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia(IGHardwareRingBufferMedia *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia()

void __thiscall
IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia(IGHardwareRingBufferMedia *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia()

void __thiscall
IGHardwareRingBufferMedia::~IGHardwareRingBufferMedia(IGHardwareRingBufferMedia *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  _OSObject_typed_operator_delete(&IGHardwareRingBufferMedia_ktv,this,0x8e0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBufferMedia::operator delete(void*, unsigned long)

void __cdecl IGHardwareRingBufferMedia::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRingBufferMedia_ktv,param_1,param_2);
  return;
}



// IGHardwareRingBufferMedia::getMetaClass() const

undefined1 * IGHardwareRingBufferMedia::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRingBufferMedia::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferMedia::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferMedia",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferMedia::MetaClass::alloc() const

IGHardwareRingBuffer * IGHardwareRingBufferMedia::MetaClass::alloc(void)

{
  IGHardwareRingBuffer *this;
  
  this = (IGHardwareRingBuffer *)_OSObject_typed_operator_new(&IGHardwareRingBufferMedia_ktv,0x8e0);
  IGHardwareRingBuffer::IGHardwareRingBuffer
            (this,(OSMetaClass *)&IGHardwareRingBufferMedia::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMedia;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareRingBufferMedia::operator new(unsigned long)

void * __thiscall IGHardwareRingBufferMedia::operator_new(IGHardwareRingBufferMedia *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRingBufferMedia_ktv,this);
  return pvVar1;
}



// IGHardwareRingBufferMedia::IGHardwareRingBufferMedia()

void __thiscall
IGHardwareRingBufferMedia::IGHardwareRingBufferMedia(IGHardwareRingBufferMedia *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMedia;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferMedia::IGHardwareRingBufferMedia()

void __thiscall
IGHardwareRingBufferMedia::IGHardwareRingBufferMedia(IGHardwareRingBufferMedia *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMedia;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferMedia::init(IGHardwareContext*)

undefined8 __thiscall IGHardwareRingBufferMedia::init(IGHardwareRingBufferMedia *this,long param_1)

{
  int iVar1;
  int iVar2;
  long lVar3;
  undefined *puVar4;
  undefined8 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined8 uVar9;
  
  lVar3 = IGHardwareRingBuffer::init((IGHardwareRingBuffer *)this,param_1);
  if ((char)lVar3 == '\0') {
LAB_0006b317:
    uVar9 = 0;
  }
  else {
    if (*(int *)(param_1 + 0x74) == 0) {
      puVar4 = &_vcsResetRegisters;
      uVar6 = 0x20;
      uVar7 = 0x1c0244;
      uVar8 = 0x1c003c;
    }
    else {
      if (*(int *)(param_1 + 0x74) != 2) goto LAB_0006b317;
      puVar4 = &_vcs2ResetRegisters;
      uVar6 = 0x80;
      uVar7 = 0x1d0244;
      uVar8 = 0x1d003c;
    }
    *(undefined4 *)(this + 0x58) = uVar8;
    *(undefined4 *)(this + 0x5c) = uVar7;
    *(undefined4 *)(this + 0x70) = uVar6;
    *(undefined **)(this + 0x78) = puVar4;
    iVar1 = (**(code **)(*(long *)this + 0x128))(this);
    iVar2 = (**(code **)(*(long *)this + 0x148))(this);
    *(int *)(this + 0x3c) = iVar2 + iVar1 + 4;
    uVar9 = CONCAT71((uint7)(uint3)((uint)iVar1 >> 8),1);
    if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
      uVar5 = IGHardwareRingBuffer::getSerializeSubmissionSpace((IGHardwareRingBuffer *)this);
      *(int *)(this + 0x3c) = *(int *)(this + 0x3c) + (int)uVar5;
    }
  }
  return uVar9;
}



// IGHardwareRingBufferMedia::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferMedia::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareRingBufferMedia_cpp(void)

{
  IGVector<>::IGVector((ulong *)&_vcsResetRegisters,0x1139a0);
  IGVector<>::IGVector((ulong *)&_vcs2ResetRegisters,0x113ac0);
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRingBufferMedia::gMetaClass,"IGHardwareRingBufferMedia",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRingBufferMedia::gMetaClass);
  IGVector<>::~IGVector((IGVector<> *)&_vcs2ResetRegisters);
  IGVector<>::~IGVector((IGVector<> *)&_vcsResetRegisters);
  return;
}



// IGAccelSegmentResourceList::MetaClass::MetaClass()

void __thiscall IGAccelSegmentResourceList::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSegmentResourceList",(OSMetaClass *)__got::gMetaClass,0xd0)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSegmentResourceList::MetaClass::~MetaClass()

void __thiscall IGAccelSegmentResourceList::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelSegmentResourceList::IGAccelSegmentResourceList(OSMetaClass const*)

void __thiscall
IGAccelSegmentResourceList::IGAccelSegmentResourceList
          (IGAccelSegmentResourceList *this,OSMetaClass *param_1)

{
  IOAccelSegmentResourceList::IOAccelSegmentResourceList((IOAccelSegmentResourceList *)this,param_1)
  ;
  *(undefined ***)this = &__const::~IGAccelSegmentResourceList;
  return;
}



// IGAccelSegmentResourceList::IGAccelSegmentResourceList(OSMetaClass const*)

void __thiscall
IGAccelSegmentResourceList::IGAccelSegmentResourceList
          (IGAccelSegmentResourceList *this,OSMetaClass *param_1)

{
  IOAccelSegmentResourceList::IOAccelSegmentResourceList((IOAccelSegmentResourceList *)this,param_1)
  ;
  *(undefined ***)this = &__const::~IGAccelSegmentResourceList;
  return;
}



// IGAccelSegmentResourceList::~IGAccelSegmentResourceList()

void __thiscall
IGAccelSegmentResourceList::~IGAccelSegmentResourceList(IGAccelSegmentResourceList *this)

{
  IOAccelSegmentResourceList::~IOAccelSegmentResourceList((IOAccelSegmentResourceList *)this);
  return;
}



// IGAccelSegmentResourceList::~IGAccelSegmentResourceList()

void __thiscall
IGAccelSegmentResourceList::~IGAccelSegmentResourceList(IGAccelSegmentResourceList *this)

{
  IOAccelSegmentResourceList::~IOAccelSegmentResourceList((IOAccelSegmentResourceList *)this);
  return;
}



// IGAccelSegmentResourceList::~IGAccelSegmentResourceList()

void __thiscall
IGAccelSegmentResourceList::~IGAccelSegmentResourceList(IGAccelSegmentResourceList *this)

{
  IOAccelSegmentResourceList::~IOAccelSegmentResourceList((IOAccelSegmentResourceList *)this);
  _OSObject_typed_operator_delete(&IGAccelSegmentResourceList_ktv,this,0xd0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSegmentResourceList::operator delete(void*, unsigned long)

void __cdecl IGAccelSegmentResourceList::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelSegmentResourceList_ktv,param_1,param_2);
  return;
}



// IGAccelSegmentResourceList::getMetaClass() const

undefined8 * IGAccelSegmentResourceList::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelSegmentResourceList::MetaClass::MetaClass()

void __thiscall IGAccelSegmentResourceList::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSegmentResourceList",(OSMetaClass *)__got::gMetaClass,0xd0)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSegmentResourceList::MetaClass::alloc() const

IOAccelSegmentResourceList * IGAccelSegmentResourceList::MetaClass::alloc(void)

{
  IOAccelSegmentResourceList *this;
  
  this = (IOAccelSegmentResourceList *)
         _OSObject_typed_operator_new(&IGAccelSegmentResourceList_ktv,0xd0);
  IOAccelSegmentResourceList::IOAccelSegmentResourceList
            (this,(OSMetaClass *)&IGAccelSegmentResourceList::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSegmentResourceList;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelSegmentResourceList::operator new(unsigned long)

void * __thiscall IGAccelSegmentResourceList::operator_new(IGAccelSegmentResourceList *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelSegmentResourceList_ktv,this);
  return pvVar1;
}



// IGAccelSegmentResourceList::IGAccelSegmentResourceList()

void __thiscall
IGAccelSegmentResourceList::IGAccelSegmentResourceList(IGAccelSegmentResourceList *this)

{
  IOAccelSegmentResourceList::IOAccelSegmentResourceList
            ((IOAccelSegmentResourceList *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSegmentResourceList;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSegmentResourceList::IGAccelSegmentResourceList()

void __thiscall
IGAccelSegmentResourceList::IGAccelSegmentResourceList(IGAccelSegmentResourceList *this)

{
  IOAccelSegmentResourceList::IOAccelSegmentResourceList
            ((IOAccelSegmentResourceList *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSegmentResourceList;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSegmentResourceList::initWithSharedResourceList(IOAccelShared2*,
// IOAccelSegmentResourceListHeader const*, IOAccelDeviceShmem*, IGAccelFIFOChannel*,
// IGAccelFIFOChannel*)

void __cdecl IGAccelSegmentResourceList::initWithSharedResourceList(long *param_1)

{
  long in_R8;
  long in_R9;
  
  param_1[0x17] = in_R8;
  param_1[0x18] = in_R9;
                    // WARNING: Could not recover jumptable at 0x0006b5ff. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x130))();
  return;
}



// WARNING: Removing unreachable block (ram,0x0006b831)
// IGAccelSegmentResourceList::initWithSharedResourceList(IOAccelShared2*,
// IOAccelSegmentResourceListHeader const*, IOAccelDeviceShmem*)

ulong __thiscall
IGAccelSegmentResourceList::initWithSharedResourceList
          (IGAccelSegmentResourceList *this,long param_1,long param_2,long *param_3)

{
  byte bVar1;
  ushort uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  char cVar7;
  IGAccelSegmentResourceList IVar8;
  long lVar9;
  long lVar10;
  ulong uVar11;
  IGAccelSegmentResourceList *pIVar12;
  int iVar13;
  uint uVar14;
  ulong uVar15;
  bool bVar16;
  ulong local_60;
  long local_48;
  
  uVar15 = 0;
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x60) = 0xffffffffffffffff;
  *(undefined8 *)(this + 0x80) = 0;
  *(undefined8 *)(this + 0x88) = 0;
  *(undefined8 *)(this + 0x90) = 0;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined4 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = *(undefined8 *)(*(long *)(param_1 + 0x78) + 0x380);
  this[0xb0] = (IGAccelSegmentResourceList)0x0;
  *(undefined8 *)(this + 200) = 0;
  iVar3 = *(int *)(param_2 + 0x10);
  uVar4 = *(uint *)(param_2 + 0x14);
  lVar9 = (**(code **)(*param_3 + 0x128))(param_3);
  lVar10 = (**(code **)(*param_3 + 0x118))();
  if ((ulong)(lVar10 + lVar9) < (ulong)uVar4 * 0x58 + param_2 + 0x18) goto LAB_0006b950;
  *(uint *)(this + 0xc) = uVar4 * 8;
  if (uVar4 * 8 == 0) {
LAB_0006b713:
    uVar11 = 0;
    if (uVar4 == 0) {
      local_60 = 0xffffffffffffffff;
    }
    else {
      local_60 = 0xffffffffffffffff;
      iVar13 = 0;
      local_48 = param_2;
      do {
        uVar2 = *(ushort *)(param_2 + 0x6e + uVar11 * 0x58);
        uVar15 = 0;
        if (6 < uVar2) {
LAB_0006b935:
          uVar15 = 0;
          goto LAB_0006b950;
        }
        iVar6 = (int)uVar11;
        if (uVar2 == 0) {
LAB_0006b8e8:
          do {
            *(undefined8 *)(*(long *)(this + 0x10) + (ulong)((uint)uVar15 | iVar6 * 8) * 8) = 0;
            uVar14 = (uint)uVar15 + 1;
            uVar15 = (ulong)uVar14;
          } while (uVar14 != 8);
        }
        else {
          uVar15 = 0;
          do {
            cVar7 = IOAccelShared2::lookupResource
                              ((uint)param_1,(void **)(ulong)*(uint *)(local_48 + 0x18 + uVar15 * 4)
                              );
            if (cVar7 == '\0') goto LAB_0006b935;
            bVar1 = *(byte *)(local_48 + 0x60 + uVar15 * 2);
            *(undefined8 *)(*(long *)(this + 0x10) + (ulong)(iVar6 * 8 | (uint)uVar15) * 8) = 0;
            if (*(long *)(this + 200) == 0) {
              IVar8 = (IGAccelSegmentResourceList)(bVar1 >> 1 & 7);
              this[0xb0] = IVar8;
              pIVar12 = this + 0xb8;
              if ((1 < (byte)IVar8 - 1) &&
                 (pIVar12 = this + 0xc0, IVar8 != (IGAccelSegmentResourceList)0x3))
              goto joined_r0x0006b812;
              *(undefined8 *)(this + 200) = *(undefined8 *)pIVar12;
            }
            else if (this[0xb0] != (IGAccelSegmentResourceList)(bVar1 >> 1 & 7)) {
              IVar8 = (IGAccelSegmentResourceList)(bVar1 & 0x10);
joined_r0x0006b812:
              if (IVar8 == (IGAccelSegmentResourceList)0x0) goto LAB_0006b935;
            }
            bVar16 = (bVar1 & 1) != 0;
            if (bVar16) {
              iVar5 = *(int *)(this + 0x9c);
              *(int *)(this + 0x9c) = iVar5 + 1;
              *(undefined8 *)(*(long *)(this + 0x88) + (long)iVar5 * 8) = 0;
              local_60 = local_60 & -(ulong)((bVar1 & 0x30) != 0);
            }
            else {
              iVar5 = *(int *)(this + 0x98);
              *(int *)(this + 0x98) = iVar5 + 1;
              *(undefined8 *)(*(long *)(this + 0x80) + (long)iVar5 * 8) = 0;
            }
            (*pcRam01000007feedfc5f)(0,*(undefined8 *)(this + 200),bVar16);
            iVar5 = *(int *)(this + 0xa0);
            *(int *)(this + 0xa0) = iVar5 + 1;
            *(undefined8 *)(*(long *)(this + 0x90) + (long)iVar5 * 8) = 0;
            uVar15 = uVar15 + 1;
          } while (uVar2 != uVar15);
          uVar15 = (ulong)(uint)uVar2;
          if (uVar2 < 8) goto LAB_0006b8e8;
        }
        iVar13 = iVar13 + (uint)uVar2;
        uVar11 = (ulong)(iVar6 + 1U);
        local_48 = local_48 + 0x58;
      } while (iVar6 + 1U != uVar4);
      if (iVar13 != iVar3) goto LAB_0006b92d;
    }
    *(undefined8 *)(this + 0x58) = 0;
    *(ulong *)(this + 0x60) = local_60;
    uVar15 = CONCAT71((int7)(uVar15 >> 8),1);
  }
  else {
    lVar9 = _IOMallocTypeVarImpl();
    *(long *)(this + 0x10) = lVar9;
    if (lVar9 != 0) {
      uVar11 = (ulong)*(uint *)(this + 0xc);
      lVar9 = lVar9 + uVar11 * 8;
      *(long *)(this + 0x80) = lVar9;
      lVar9 = lVar9 + uVar11 * 8;
      *(long *)(this + 0x88) = lVar9;
      *(ulong *)(this + 0x90) = lVar9 + uVar11 * 8;
      goto LAB_0006b713;
    }
LAB_0006b92d:
    uVar15 = 0;
  }
LAB_0006b950:
  (**(code **)(*param_3 + 0x120))(param_3);
  return uVar15;
}



// IGAccelSegmentResourceList::free()

void __thiscall IGAccelSegmentResourceList::free(IGAccelSegmentResourceList *this,void *param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(this + 0x10);
  if (lVar1 != 0) {
    *(undefined8 *)(this + 0x80) = 0;
    *(undefined8 *)(this + 0x88) = 0;
    *(undefined8 *)(this + 0x90) = 0;
    *(undefined8 *)(this + 0x10) = 0;
    _IOFreeTypeVarImpl(&free()::kalloc_type_view_263,lVar1,
                       (ulong)(uint)(*(int *)(this + 0xc) << 2) << 3);
  }
                    // WARNING: Could not recover jumptable at 0x0006b9c1. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelSegmentResourceList::prepare()

undefined4 __thiscall IGAccelSegmentResourceList::prepare(IGAccelSegmentResourceList *this)

{
  undefined4 uVar1;
  
  initBlitUsage(this);
  uVar1 = (**(code **)(__got::vtable + 0x130))(this);
  markBlitUsage(this);
  return uVar1;
}



// IGAccelSegmentResourceList::initBlitUsage()

void __thiscall IGAccelSegmentResourceList::initBlitUsage(IGAccelSegmentResourceList *this)

{
  IGHardwareExtendedContext *pIVar1;
  
  pIVar1 = IGAccelTask::getBlit2DContext(*(IGAccelTask **)(this + 0x68),'\x01');
  *(undefined4 *)(this + 0x70) = *(undefined4 *)(*(long *)(pIVar1 + 0xb0) + 0x178);
  pIVar1 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)(this + 0x68),'\x01');
  *(undefined4 *)(this + 0x74) = *(undefined4 *)(*(long *)(pIVar1 + 0xb0) + 0x178);
  return;
}



// IGAccelSegmentResourceList::markBlitUsage()

void __thiscall IGAccelSegmentResourceList::markBlitUsage(IGAccelSegmentResourceList *this)

{
  IGHardwareExtendedContext *pIVar1;
  
  pIVar1 = IGAccelTask::getBlit2DContext(*(IGAccelTask **)(this + 0x68),'\x01');
  this[0x78] = (IGAccelSegmentResourceList)
               (*(int *)(*(long *)(pIVar1 + 0xb0) + 0x178) != *(int *)(this + 0x70));
  pIVar1 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)(this + 0x68),'\x01');
  this[0x79] = (IGAccelSegmentResourceList)
               (*(int *)(*(long *)(pIVar1 + 0xb0) + 0x178) != *(int *)(this + 0x74));
  return;
}



// IGAccelSegmentResourceList::complete()

void IGAccelSegmentResourceList::complete(void)

{
                    // WARNING: Could not recover jumptable at 0x0006baa6. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x138))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSegmentResourceList::removeFromChannel(IOAccelChannel2&)

void __cdecl IGAccelSegmentResourceList::removeFromChannel(long param_1)

{
  long *plVar1;
  long lVar2;
  
  if (0 < *(int *)(param_1 + 0xa0)) {
    lVar2 = 0;
    do {
      plVar1 = *(long **)(*(long *)(param_1 + 0x90) + lVar2 * 8);
      (**(code **)(*plVar1 + 0x198))(plVar1,*(undefined8 *)(param_1 + 200));
      lVar2 = lVar2 + 1;
    } while (lVar2 < *(int *)(param_1 + 0xa0));
  }
  return;
}



// IGAccelSegmentResourceList::mergeEventsToBarrierExcluding(IOAccelEvent*, int)

ulong __thiscall
IGAccelSegmentResourceList::mergeEventsToBarrierExcluding
          (IGAccelSegmentResourceList *this,undefined8 param_1,undefined4 param_2)

{
  byte bVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  byte bVar5;
  undefined8 unaff_R15;
  
  iVar2 = *(int *)(this + 0x98);
  bVar5 = 1;
  if (0 < iVar2) {
    lVar4 = 0;
    do {
      lVar3 = *(long *)(*(long *)(this + 0x80) + lVar4 * 8);
      if ((*(byte *)(lVar3 + 0xf) & 0x10) == 0) {
        bVar1 = (**(code **)(**(long **)(this + 0xa8) + 0x1c8))
                          (*(long **)(this + 0xa8),
                           (ulong)*(byte *)(lVar3 + 0x16) * 0x40 + *(long *)(lVar3 + 0x38),param_1,
                           param_2);
        bVar5 = bVar5 & bVar1;
        lVar3 = IOAccelResource2::getStorageResource();
        if (lVar3 != *(long *)(*(long *)(this + 0x80) + lVar4 * 8)) {
          bVar1 = (**(code **)(**(long **)(this + 0xa8) + 0x1c8))
                            (*(long **)(this + 0xa8),
                             (ulong)*(byte *)(lVar3 + 0x16) * 0x40 + *(long *)(lVar3 + 0x38),param_1
                             ,param_2);
          bVar5 = bVar5 & bVar1;
        }
        iVar2 = *(int *)(this + 0x98);
      }
      lVar4 = lVar4 + 1;
    } while (lVar4 < iVar2);
  }
  iVar2 = *(int *)(this + 0x9c);
  if (0 < iVar2) {
    lVar4 = 0;
    do {
      lVar3 = *(long *)(*(long *)(this + 0x88) + lVar4 * 8);
      if ((*(byte *)(lVar3 + 0xf) & 0x10) == 0) {
        bVar1 = (**(code **)(**(long **)(this + 0xa8) + 0x1c8))
                          (*(long **)(this + 0xa8),
                           (ulong)*(byte *)(lVar3 + 0x15) * 0x40 + *(long *)(lVar3 + 0x38),param_1,
                           param_2);
        bVar5 = bVar5 & bVar1;
        lVar3 = IOAccelResource2::getStorageResource();
        if (lVar3 != *(long *)(*(long *)(this + 0x88) + lVar4 * 8)) {
          bVar1 = (**(code **)(**(long **)(this + 0xa8) + 0x1c8))
                            (*(long **)(this + 0xa8),
                             (ulong)*(byte *)(lVar3 + 0x15) * 0x40 + *(long *)(lVar3 + 0x38),param_1
                             ,param_2);
          bVar5 = bVar5 & bVar1;
        }
        iVar2 = *(int *)(this + 0x9c);
      }
      lVar4 = lVar4 + 1;
    } while (lVar4 < iVar2);
  }
  return CONCAT71((int7)((ulong)unaff_R15 >> 8),bVar5) & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSegmentResourceList::newSegmentResourceList(IOAccelShared2*,
// IOAccelSegmentResourceListHeader const*, IOAccelDeviceShmem*, IGAccelFIFOChannel*,
// IGAccelFIFOChannel*)

long * __cdecl
IGAccelSegmentResourceList::newSegmentResourceList
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,long param_4,long param_5)

{
  char cVar1;
  long *plVar2;
  
  plVar2 = (long *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (plVar2 != (long *)0x0) {
    plVar2[0x17] = param_4;
    plVar2[0x18] = param_5;
    cVar1 = (**(code **)(*plVar2 + 0x130))(plVar2,param_1,param_2,param_3);
    if (cVar1 != '\0') {
      return plVar2;
    }
    (**(code **)(*plVar2 + 0x28))(plVar2);
  }
  return (long *)0x0;
}



// IGAccelSegmentResourceList::MetaClass::~MetaClass()

void __thiscall IGAccelSegmentResourceList::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelSegmentResourceList_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelSegmentResourceList::gMetaClass,"IGAccelSegmentResourceList",
             (OSMetaClass *)__got::gMetaClass,0xd0);
  IGAccelSegmentResourceList::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelSegmentResourceList::gMetaClass);
  return;
}



// IGAccelResource::MetaClass::MetaClass()

void __thiscall IGAccelResource::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelResource",(OSMetaClass *)__got::gMetaClass,0x270);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelResource::MetaClass::~MetaClass()

void __thiscall IGAccelResource::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelResource::IGAccelResource(OSMetaClass const*)

void __thiscall IGAccelResource::IGAccelResource(IGAccelResource *this,OSMetaClass *param_1)

{
  IOAccelResource2::IOAccelResource2((IOAccelResource2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelResource;
  *(undefined8 *)(this + 0x180) = 0;
  *(undefined2 *)(this + 0x200) = 0;
  return;
}



// IGAccelResource::IGAccelResource(OSMetaClass const*)

void __thiscall IGAccelResource::IGAccelResource(IGAccelResource *this,OSMetaClass *param_1)

{
  IOAccelResource2::IOAccelResource2((IOAccelResource2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelResource;
  *(undefined8 *)(this + 0x180) = 0;
  *(undefined2 *)(this + 0x200) = 0;
  return;
}



// IGAccelResource::~IGAccelResource()

void __thiscall IGAccelResource::~IGAccelResource(IGAccelResource *this)

{
  undefined8 uVar1;
  
  *(undefined ***)this = &__const::~IGAccelResource;
  if (6 < (ulong)*(ushort *)(this + 0x200)) {
    uVar1 = *(undefined8 *)(this + 0x1d8);
    *(undefined8 *)(this + 0x1d8) = 0;
    _IOFreeData(uVar1,(ulong)*(ushort *)(this + 0x200) << 2);
  }
  *(undefined2 *)(this + 0x200) = 0;
  *(undefined8 *)(this + 0x1e0) = 0;
  *(undefined8 *)(this + 0x1d8) = 0;
  IOAccelResource2::~IOAccelResource2((IOAccelResource2 *)this);
  return;
}



// IGAccelResource::~IGAccelResource()

void __thiscall IGAccelResource::~IGAccelResource(IGAccelResource *this)

{
  undefined8 uVar1;
  
  *(undefined ***)this = &__const::~IGAccelResource;
  if (6 < (ulong)*(ushort *)(this + 0x200)) {
    uVar1 = *(undefined8 *)(this + 0x1d8);
    *(undefined8 *)(this + 0x1d8) = 0;
    _IOFreeData(uVar1,(ulong)*(ushort *)(this + 0x200) << 2);
  }
  *(undefined2 *)(this + 0x200) = 0;
  *(undefined8 *)(this + 0x1e0) = 0;
  *(undefined8 *)(this + 0x1d8) = 0;
  IOAccelResource2::~IOAccelResource2((IOAccelResource2 *)this);
  return;
}



// IGAccelResource::~IGAccelResource()

void __thiscall IGAccelResource::~IGAccelResource(IGAccelResource *this)

{
  ~IGAccelResource(this);
  _OSObject_typed_operator_delete(&IGAccelResource_ktv,this,0x270);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelResource::operator delete(void*, unsigned long)

void __cdecl IGAccelResource::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelResource_ktv,param_1,param_2);
  return;
}



// IGAccelResource::getMetaClass() const

undefined8 * IGAccelResource::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelResource::MetaClass::MetaClass()

void __thiscall IGAccelResource::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelResource",(OSMetaClass *)__got::gMetaClass,0x270);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelResource::MetaClass::alloc() const

IOAccelResource2 * IGAccelResource::MetaClass::alloc(void)

{
  IOAccelResource2 *this;
  
  this = (IOAccelResource2 *)_OSObject_typed_operator_new(&IGAccelResource_ktv,0x270);
  IOAccelResource2::IOAccelResource2(this,(OSMetaClass *)&IGAccelResource::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelResource;
  *(undefined8 *)(this + 0x180) = 0;
  *(undefined2 *)(this + 0x200) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelResource::operator new(unsigned long)

void * __thiscall IGAccelResource::operator_new(IGAccelResource *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelResource_ktv,this);
  return pvVar1;
}



// IGAccelResource::IGAccelResource()

void __thiscall IGAccelResource::IGAccelResource(IGAccelResource *this)

{
  IOAccelResource2::IOAccelResource2((IOAccelResource2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelResource;
  *(undefined8 *)(this + 0x180) = 0;
  *(undefined2 *)(this + 0x200) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelResource::IGAccelResource()

void __thiscall IGAccelResource::IGAccelResource(IGAccelResource *this)

{
  IOAccelResource2::IOAccelResource2((IOAccelResource2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelResource;
  *(undefined8 *)(this + 0x180) = 0;
  *(undefined2 *)(this + 0x200) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelResource::init(IOGraphicsAccelerator2*, IOAccelShared2*, unsigned int)

undefined4 __cdecl IGAccelResource::init(long param_1)

{
  undefined4 uVar1;
  
  uVar1 = (**(code **)(__got::vtable + 0x148))();
  *(undefined8 *)(param_1 + 0x230) = 0;
  *(undefined8 *)(param_1 + 0x238) = 0;
  *(undefined8 *)(param_1 + 0x260) = 0;
  *(undefined1 *)(param_1 + 0x26c) = 1;
  *(undefined8 *)(param_1 + 0x240) = 0;
  ___bzero(param_1 + 0x180,0xb0);
  *(undefined8 *)(param_1 + 0x248) = 0;
  *(undefined1 *)(param_1 + 0x250) = 0;
  *(undefined1 *)(param_1 + 0x254) = 0;
  *(undefined8 *)(param_1 + 600) = 0;
  return uVar1;
}



// IGAccelResource::initialize(IOAccelNewResourceArgs*, unsigned long long)

ulong __thiscall IGAccelResource::initialize(IGAccelResource *this,long param_1,ulong param_2)

{
  ushort uVar1;
  int iVar2;
  char cVar3;
  IGAccelResource IVar4;
  undefined4 uVar5;
  long lVar6;
  long lVar7;
  undefined8 *puVar8;
  long lVar9;
  undefined8 uVar10;
  void *pvVar11;
  void *pvVar12;
  IGAccelResource *pIVar13;
  uint uVar14;
  ulong uVar15;
  ulong uVar16;
  IGAccelResource *pIVar17;
  ulong uVar18;
  uint uVar19;
  undefined4 *puVar20;
  ulong uVar21;
  ushort uVar22;
  byte bVar23;
  uint local_a0;
  uint local_9c;
  ulong local_98;
  long *local_90;
  ulong local_88;
  ulong local_80;
  ulong local_78;
  IGAccelResource *local_70;
  long local_68;
  ulong local_60;
  long local_58;
  uint local_50;
  uint local_4c;
  uint local_48;
  int local_44;
  int local_40;
  uint local_3c;
  uint local_38;
  uint local_34;
  
  bVar23 = 0;
  cVar3 = (**(code **)(__got::vtable + 0x150))();
  if (cVar3 == '\0') goto LAB_0006c7dd;
  lVar6 = IOAccelResource2::getStorageResource();
  if (this[0x14] == (IGAccelResource)0x4) {
    if (*(long *)(this + 0xe8) != 0) {
      lVar7 = IOAccelResource2::getStorageResource();
      lVar6 = 0x14;
      puVar20 = (undefined4 *)(lVar7 + 0x188);
      pIVar17 = this + 0x188;
LAB_0006c0fe:
      for (; lVar6 != 0; lVar6 = lVar6 + -1) {
        *(undefined4 *)pIVar17 = *puVar20;
        puVar20 = puVar20 + (ulong)bVar23 * -2 + 1;
        pIVar17 = pIVar17 + (ulong)bVar23 * -8 + 4;
      }
    }
LAB_0006c100:
    IVar4 = this[0x14];
  }
  else {
    if (param_1 == 0) {
      if (((this[0x14] != (IGAccelResource)0xc0) || (*(long *)(this + 0xe0) == 0)) &&
         (*(int *)(*(long *)(this + 0x18) + 0xce0) != 0)) {
        puVar8 = (undefined8 *)IOAccelResource2::getClientSharedROPrivate();
        *puVar8 = 0;
        puVar8[1] = 0;
        puVar8[2] = 0;
        puVar8[3] = 0;
        puVar8[4] = 0;
      }
      goto LAB_0006c100;
    }
    if (param_2 < 0xec8) goto LAB_0006c7dd;
    pIVar17 = this + 0x188;
    puVar8 = (undefined8 *)(param_1 + 0xe78);
    pIVar13 = pIVar17;
    for (lVar7 = 10; lVar7 != 0; lVar7 = lVar7 + -1) {
      *(undefined8 *)pIVar13 = *puVar8;
      puVar8 = puVar8 + (ulong)bVar23 * -2 + 1;
      pIVar13 = pIVar13 + (ulong)bVar23 * -0x10 + 8;
    }
    *(uint *)(this + 0x108) =
         *(uint *)(this + 0x108) & 0xf1ffffff | *(ushort *)(lVar6 + 0x1d6) >> 6 & 4;
    if (*(int *)(*(long *)(this + 0x18) + 0xce0) != 0) {
      puVar8 = (undefined8 *)IOAccelResource2::getClientSharedROPrivate();
      *(undefined4 *)((long)puVar8 + 0xc) = *(undefined4 *)(this + 0xf8);
      *(uint *)(puVar8 + 1) = (uint)*(ushort *)(lVar6 + 0x194);
      *puVar8 = *(undefined8 *)(this + (ulong)(*(long *)(this + 0x88) == 0) * 8 + 200);
      lVar7 = *(long *)(this + 0xb8);
      if (lVar7 == 0) {
        lVar7 = *(long *)(this + 0xc0);
      }
      *(int *)(puVar8 + 2) = (int)lVar7;
      *(undefined4 *)((long)puVar8 + 0x14) = *(undefined4 *)(lVar6 + 0x1c0);
      *(undefined4 *)(puVar8 + 3) = *(undefined4 *)(lVar6 + 0x1c4);
    }
    if (*(byte *)(lVar6 + 0x1d4) != 0) {
      *(uint *)(this + 0x108) =
           *(uint *)(this + 0x108) & 0xffff |
           *(uint *)(this + 0x108) & 0xfe010000 | (uint)*(byte *)(lVar6 + 0x1d4) << 0x11 | 8;
    }
    IVar4 = this[0x14];
    if (((byte)IVar4 & 0x40) != 0) {
      *(ulong *)(this + 0xb8) = (ulong)*(uint *)(lVar6 + 0x188);
LAB_0006c2f9:
      IVar4 = this[0xac];
      uVar16 = (ulong)(byte)IVar4;
      if ((byte)IVar4 < 7) {
        uVar19 = (uint)(byte)this[0xad] + (uint)(byte)this[0xae];
        if (uVar19 < 0x10) {
          iVar2 = uVar19 * (byte)IVar4 * 0x28;
          *(int *)(this + 0x268) = iVar2;
          if (iVar2 != 0) {
            lVar7 = _IOMallocTypeVarImpl
                              (&initialize(IOAccelNewResourceArgs*,unsigned_long_long)::
                                kalloc_type_view_178,
                               ((ulong)(byte)this[0xad] + (ulong)(byte)this[0xae]) * uVar16 * 0x28);
            *(long *)(this + 0x260) = lVar7;
            if (lVar7 == 0) goto LAB_0006c7dd;
            uVar16 = (ulong)(byte)this[0xac];
          }
          if ((char)uVar16 != '\0') {
            lVar7 = param_1 + 0x68;
            uVar15 = (ulong)(byte)this[0xad];
            uVar18 = (ulong)(byte)this[0xae];
            local_38 = 0;
            uVar21 = 0;
            local_70 = this;
            local_68 = lVar7;
            local_58 = lVar6;
            do {
              if ((char)uVar15 == '\0') {
                uVar15 = 0;
              }
              else {
                uVar16 = uVar15 & 0xff;
                local_78 = uVar21;
                do {
                  lVar9 = uVar21 * 600 + lVar7;
                  lVar6 = *(long *)(this + 0x260);
                  uVar16 = (ulong)((int)uVar16 * (int)uVar21 + (uint)uVar18);
                  *(undefined8 *)(lVar6 + 0x20 + uVar16 * 0x28) =
                       *(undefined8 *)(lVar9 + 0x20 + uVar18 * 0x28);
                  *(undefined8 *)(lVar6 + 0x18 + uVar16 * 0x28) =
                       *(undefined8 *)(lVar9 + 0x18 + uVar18 * 0x28);
                  *(undefined8 *)(lVar6 + 0x10 + uVar16 * 0x28) =
                       *(undefined8 *)(lVar9 + 0x10 + uVar18 * 0x28);
                  uVar10 = *(undefined8 *)(lVar9 + uVar18 * 0x28);
                  *(undefined8 *)(lVar6 + 8 + uVar16 * 0x28) =
                       *(undefined8 *)(lVar9 + 8 + uVar18 * 0x28);
                  *(undefined8 *)(lVar6 + uVar16 * 0x28) = uVar10;
                  if (*(long *)(lVar9 + 0x20 + uVar18 * 0x28) == 0) {
                    uVar15 = (ulong)(byte)this[0xad];
                    uVar16 = (ulong)(byte)this[0xad];
                    param_2 = uVar18;
                  }
                  else {
                    uVar21 = uVar21 & 0xffffffff;
                    uVar16 = (byte)this[0xad] * uVar21 + uVar18;
                    local_98 = (ulong)*(ushort *)(*(long *)(this + 0x260) + 0x18 + uVar16 * 0x28);
                    if (local_98 == 0) {
                      *(undefined8 *)(*(long *)(this + 0x260) + 0x20 + (uVar16 & 0xffffffff) * 0x28)
                           = 0;
                      goto LAB_0006c7dd;
                    }
                    local_3c = (uint)uVar18;
                    uVar10 = _IOMallocTypeVarImpl
                                       (&initialize(IOAccelNewResourceArgs*,unsigned_long_long)::
                                         kalloc_type_view_207,local_98 * 8);
                    *(undefined8 *)
                     (*(long *)(this + 0x260) + 0x20 + ((byte)this[0xad] * uVar21 + uVar18) * 0x28)
                         = uVar10;
                    lVar6 = *(long *)(this + 0x260);
                    local_60 = (ulong)(byte)this[0xad];
                    lVar7 = uVar18 + uVar21 * local_60;
                    if (*(long *)(lVar6 + 0x20 + lVar7 * 0x28) == 0) goto LAB_0006c7dd;
                    local_90 = (long *)(lVar6 + lVar7 * 0x28 + 0x20);
                    uVar16 = uVar21 * local_60 & 0xffffffff;
                    local_50 = (uint)*(ushort *)(lVar6 + 0x14 + uVar16 * 0x28);
                    local_4c = (uint)*(ushort *)(lVar6 + 0x16 + uVar16 * 0x28);
                    local_34 = (uint)(byte)this[0xac];
                    local_48 = (uint)*(ushort *)(local_58 + 0x196);
                    local_88 = (ulong)*(uint *)(local_58 + 400);
                    local_80 = (ulong)*(ushort *)(local_58 + 0x194);
                    param_2 = (ulong)local_38;
                    uVar16 = 0;
                    uVar18 = (ulong)local_3c;
                    lVar6 = local_58;
                    do {
                      lVar7 = local_58;
                      local_44 = 0;
                      local_40 = 0;
                      uVar1 = *(ushort *)(lVar6 + 0x1d6);
                      uVar19 = (uint)uVar1;
                      ComputeLevelOffsetXY
                                (local_50,(ulong)local_4c,uVar18,0,(int)param_2,local_48,
                                 (uint)local_88,'\0',(byte)((uVar19 & 2) >> 1),
                                 (byte)((uVar1 & 4) >> 2),1 < (byte)local_34 | (byte)uVar1 & 1,
                                 (uint)local_60,(byte)((uVar19 & 0x10) >> 4),
                                 (char)((uVar19 & 0x20) >> 5),(int)local_80,&local_44,&local_40,
                                 &local_a0,&local_9c);
                      uVar18 = (ulong)local_3c;
                      *(int *)(*local_90 + uVar16 * 8) = local_44;
                      *(int *)(*local_90 + 4 + uVar16 * 8) = local_40;
                      uVar16 = uVar16 + 1;
                      param_2 = (ulong)((int)param_2 + local_34);
                      lVar6 = lVar7;
                    } while (local_98 != uVar16);
                    uVar15 = local_60 & 0xffffffff;
                    uVar16 = local_60;
                    uVar21 = local_78;
                    this = local_70;
                    lVar7 = local_68;
                  }
                  uVar19 = (int)uVar18 + 1U & 0xff;
                  uVar18 = (ulong)uVar19;
                } while (uVar19 < (int)uVar16 + (uint)(byte)this[0xae]);
                uVar16 = (ulong)(byte)this[0xac];
                uVar18 = (ulong)(byte)this[0xae];
              }
              uVar21 = uVar21 + 1;
              local_38 = local_38 + 1;
            } while (uVar21 < uVar16);
          }
          goto LAB_0006c100;
        }
      }
LAB_0006c7dd:
      uVar16 = 0;
      goto LAB_0006c7df;
    }
    if (IVar4 == (IGAccelResource)0x1) {
      if (*(long *)(this + 0xf0) != 0) {
        lVar6 = IOAccelResource2::getStorageResource();
        puVar20 = (undefined4 *)(lVar6 + 0x188);
        lVar6 = 0x14;
        goto LAB_0006c0fe;
      }
      goto LAB_0006c100;
    }
    if (IVar4 == (IGAccelResource)0x0) goto LAB_0006c2f9;
  }
  if (IVar4 == (IGAccelResource)0x82) {
    param_2 = *(ulong *)(this + 0xe0);
    if (param_2 != 0) {
      if (*(char *)(param_2 + 0x14) == -0x40) {
        uVar5 = 0;
        if ((*(uint *)(this + 0xf8) < *(uint *)(this + 0x268) / 0x28) &&
           (*(long *)(param_2 + 0x260) != 0)) {
          uVar5 = *(undefined4 *)
                   (*(long *)(param_2 + 0x260) + 4 + (ulong)*(uint *)(this + 0xf8) * 0x28);
        }
LAB_0006c625:
        *(undefined4 *)(this + 0xfc) = uVar5;
      }
      else if (*(long *)(param_2 + 0xe0) != 0) {
        lVar6 = *(long *)(*(long *)(param_2 + 0xe0) + 0x10);
        if (lVar6 == 0) {
          uVar5 = 0;
        }
        else {
          uVar5 = IOSurface::getPlaneOffset((uint)lVar6);
        }
        goto LAB_0006c625;
      }
      pvVar11 = (void *)IOAccelResource2::getClientSharedROPrivate();
      pvVar12 = (void *)IOAccelResource2::getClientSharedROPrivate();
      _memmove(pvVar11,pvVar12,(ulong)*(uint *)(*(long *)(this + 0x18) + 0xce0));
      IVar4 = this[0x14];
      goto LAB_0006c658;
    }
  }
  else {
LAB_0006c658:
    if (((byte)IVar4 & 0xf) == 0) {
      lVar6 = *(long *)(this + 0x260);
      if (lVar6 == 0) {
        uVar14 = (uint)(byte)this[0xac] * (uint)*(ushort *)(this + 0xb4);
        uVar19 = 1;
        if (uVar14 != 0) {
          uVar19 = uVar14;
        }
        pIVar17 = this + 0xb0;
        pIVar13 = this + 0xb2;
      }
      else {
        uVar14 = (uint)(byte)this[0xac] * (uint)*(ushort *)(lVar6 + 0x18);
        uVar19 = 1;
        if (uVar14 != 0) {
          uVar19 = uVar14;
        }
        pIVar17 = (IGAccelResource *)(lVar6 + 0x10);
        pIVar13 = (IGAccelResource *)(lVar6 + 0x12);
      }
      local_34 = (uint)*(ushort *)pIVar13;
      uVar1 = *(ushort *)pIVar17;
      param_2 = IOAccelResource2::getStorageResource();
      IVar4 = this[0xad];
      if (*(short *)(param_2 + 0x200) == 0) {
        uVar22 = (ushort)uVar19;
        *(ushort *)(param_2 + 0x200) = uVar22;
        if ((uVar19 & 0xffff) < 7) {
          lVar6 = param_2 + 0x1e8;
        }
        else {
          lVar6 = _IOMallocZeroData((uVar19 & 0xffff) << 2);
          uVar22 = *(ushort *)(param_2 + 0x200);
        }
        *(long *)(param_2 + 0x1d8) = lVar6;
        *(ulong *)(param_2 + 0x1e0) = lVar6 + (ulong)uVar22 * 2;
      }
      if ((*(char *)(param_2 + 0x220) == '\0') && (*(int *)(param_2 + 0x1c0) != 0)) {
        *(undefined1 *)(param_2 + 0x220) = 1;
      }
      *(uint *)(param_2 + 0x20c) = (uint)uVar1;
      *(uint *)(param_2 + 0x210) = local_34;
      *(uint *)(param_2 + 0x214) = uVar19;
      *(uint *)(param_2 + 0x218) = (uint)(byte)IVar4;
      *(undefined4 *)(param_2 + 0x208) = 0;
    }
  }
  uVar16 = CONCAT71((int7)(param_2 >> 8),1);
  if ((*(long *)(this + 0x80) != 0) &&
     (lVar6 = IOAccelResource2::getStorageResource(), (*(byte *)(lVar6 + 0x1d7) & 2) != 0)) {
    IOAccelResource2::getKernelData();
    IOAccelResource2::releaseKernelData();
  }
LAB_0006c7df:
  return uVar16 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// ComputeLevelOffsetXY(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int,
// unsigned int, unsigned int, unsigned int, unsigned int, bool, bool, bool, bool, unsigned int,
// bool, bool, bool, unsigned int, unsigned int*, unsigned int*, unsigned int*, unsigned int*)

void __cdecl
ComputeLevelOffsetXY
          (uint param_1,ulong param_2,undefined8 param_3,int param_4,int param_5,uint param_6,
          uint param_7,char param_8,byte param_9,byte param_10,char param_11,uint param_12,
          byte param_13,char param_14,int param_15,int *param_16,int *param_17,uint *param_18,
          uint *param_19)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  ulong uVar14;
  bool bVar15;
  bool bVar16;
  int local_4c;
  undefined8 local_48;
  int local_3c;
  int local_38;
  int local_34;
  
  local_4c = 0;
  local_3c = 0;
  bVar15 = true;
  if ((param_7 >> 9 & 1) == 0) {
    bVar15 = param_7 - 0x186 < 0x1f && (0x781808ffU >> (param_7 - 0x186 & 0x1f) & 1) != 0;
  }
  if (param_8 != '\0') {
    param_5 = param_4;
  }
  local_38 = 0;
  if (param_10 != 0) {
    local_38 = param_5;
  }
  if (param_11 != '\0') {
    local_38 = param_5;
  }
  if (param_8 != '\0') {
    local_38 = param_5;
  }
  local_48 = param_3;
  GetSurfaceAlignmentUnits
            (&local_4c,&local_3c,(ulong)param_7,param_6,param_15,param_12,param_13,param_14,'\0',
             (param_9 | param_10) ^ 1);
  uVar9 = (uint)param_2;
  uVar3 = uVar9 + 3 >> 2;
  uVar13 = param_1 + 3 >> 2;
  if (!bVar15) {
    uVar13 = param_1;
  }
  uVar14 = param_2 & 0xffffffff;
  if (bVar15) {
    uVar14 = (ulong)uVar3;
  }
  uVar10 = (uint)uVar14;
  if (param_6 < 2) {
    iVar4 = (int)local_48;
    if (iVar4 == 0) {
      local_48 = (ulong)local_48._4_4_ << 0x20;
      local_34 = 0;
    }
    else {
      local_34 = 0;
      local_48 = (ulong)local_48._4_4_ << 0x20;
      iVar8 = 1;
      do {
        uVar10 = (uint)uVar14;
        if (((param_9 | param_10) & iVar8 != 2) == 0) {
          local_48 = CONCAT44(local_48._4_4_,(int)local_48 + ((local_4c + uVar13) - 1 & -local_4c));
        }
        else {
          local_34 = local_34 + ((uVar10 + local_3c) - 1 & -local_3c);
        }
        uVar11 = param_1 >> ((byte)iVar8 & 0x1f);
        if (uVar13 < 2) {
          uVar11 = uVar13;
        }
        uVar6 = uVar9 >> ((byte)iVar8 & 0x1f);
        if (uVar10 < 2) {
          uVar6 = uVar10;
        }
        uVar10 = uVar6 + 3 >> 2;
        uVar13 = uVar11 + 3 >> 2;
        if (!bVar15) {
          uVar10 = uVar6;
          uVar13 = uVar11;
        }
        uVar14 = (ulong)uVar10;
        bVar16 = iVar8 != iVar4;
        iVar8 = iVar8 + 1;
      } while (bVar16);
    }
    if (param_10 == 0) {
      if (param_9 == 0) {
        iVar4 = local_4c + -1;
        uVar9 = -local_4c;
        iVar8 = 0;
        if (1 < param_12) {
          iVar8 = 0;
          uVar3 = 1;
          do {
            bVar1 = (byte)uVar3 & 0x1f;
            uVar10 = param_1 >> bVar1;
            if (param_1 >> bVar1 == 0) {
              uVar10 = 1;
            }
            iVar8 = iVar8 + (uVar10 + iVar4 & uVar9);
            uVar3 = uVar3 + 1;
          } while (param_12 != uVar3);
        }
        local_48._0_4_ =
             ((param_1 + iVar4 & uVar9) + iVar4 + iVar8 & uVar9) * local_38 + (int)local_48;
        uVar10 = 1;
        goto LAB_0006cc02;
      }
      bVar15 = true;
      if ((param_7 >> 9 & 1) == 0) {
        if (param_7 - 0x186 < 0x1f) {
          bVar15 = (0x781808ffU >> (param_7 - 0x186 & 0x1f) & 1) != 0;
        }
        else {
          bVar15 = false;
        }
      }
      iVar4 = local_3c + -1;
      uVar6 = -local_3c;
      uVar11 = 0;
      if (param_12 < 2) {
        uVar12 = 0;
      }
      else {
        uVar11 = (uint)(param_2 >> 1) & 0x7fffffff;
        if (uVar9 < 2) {
          uVar11 = 1;
        }
        uVar12 = uVar11 + iVar4 & uVar6;
        uVar11 = 0;
        if (param_12 != 2) {
          uVar11 = 0;
          uVar5 = 2;
          do {
            bVar1 = (byte)uVar5 & 0x1f;
            uVar2 = uVar9 >> bVar1;
            if (uVar9 >> bVar1 == 0) {
              uVar2 = 1;
            }
            uVar7 = uVar2 + 3 >> 2;
            if (!bVar15) {
              uVar7 = uVar2;
            }
            uVar11 = uVar11 + (uVar7 + iVar4 & uVar6);
            uVar5 = uVar5 + 1;
          } while (param_12 != uVar5);
        }
      }
      if (bVar15) {
        uVar9 = uVar3;
      }
      if (uVar11 < uVar12) {
        uVar11 = uVar12;
      }
      local_34 = ((uVar9 + iVar4 & uVar6) + iVar4 + uVar11 & uVar6) * local_38 + local_34;
    }
    else {
      uVar9 = ComputeQPitch3D(param_2,local_3c,param_12,param_15,param_7);
      local_34 = local_34 + uVar9 * local_38;
    }
    goto LAB_0006cc02;
  }
  if ((param_13 == 0) && (param_14 == '\0')) {
    uVar9 = (uVar10 + 3 & 0xfffffffc) * param_6;
  }
  else {
    if (param_15 == 7) {
      iVar4 = 0x10;
    }
    else if (param_15 == 0xb) {
      iVar4 = 0x40;
    }
    else {
      iVar4 = (uint)(param_13 ^ 1) * 4 + 4;
    }
    if (param_6 == 4) {
LAB_0006cb1f:
      uVar9 = 1;
      if (1 < uVar10) {
        uVar9 = uVar10;
      }
      uVar9 = uVar9 * 2 + 2 & 0xfffffffc;
    }
    else if (param_6 == 0x10) {
      uVar9 = 1;
      if (1 < uVar10) {
        uVar9 = uVar10;
      }
      uVar9 = uVar9 * 4 + 4 & 0xfffffff8;
    }
    else {
      uVar9 = uVar10;
      if (param_6 == 8) goto LAB_0006cb1f;
    }
    uVar9 = iVar4 + -1 + uVar9 & -iVar4;
  }
  local_34 = uVar9 * local_38;
  local_48._0_4_ = 0;
LAB_0006cc02:
  *param_16 = (int)local_48;
  *param_17 = local_34;
  *param_18 = uVar13;
  *param_19 = uVar10;
  return;
}



// IGAccelResource::allocMemory(IOAccelShared2*)

bool __thiscall IGAccelResource::allocMemory(IGAccelResource *this,undefined8 param_1)

{
  bool bVar1;
  uint uVar2;
  IOMemoryDescriptor *pIVar3;
  long lVar4;
  
  bVar1 = true;
  if (this[0x14] != (IGAccelResource)0xc0) {
    if (this[0x14] != (IGAccelResource)0x40) {
      return true;
    }
    pIVar3 = (IOMemoryDescriptor *)
             IGStolenMemoryPool::allocate
                       (*(IGStolenMemoryPool **)
                         (*(long *)(&DAT_00001290 + *(long *)(this + 0x18)) + 0x78),
                        *(long *)(this + 200) + 0xfffU & 0xfffffffffffff000);
    bVar1 = true;
    if (pIVar3 != (IOMemoryDescriptor *)0x0) {
      lVar4 = IOAccelSysMemory::withMemoryDescriptor
                        (*(IOGraphicsAccelerator2 **)(this + 0x18),(IOAccelResource2 *)this,pIVar3);
      (**(code **)(*(long *)pIVar3 + 0x28))(pIVar3);
      if (lVar4 != 0) {
        *(long *)(this + 0x88) = lVar4;
        goto LAB_0006ccd0;
      }
      bVar1 = false;
    }
  }
  (**(code **)(__got::vtable + 0x130))(this,param_1);
  lVar4 = *(long *)(this + 0x88);
  if (bVar1) {
    return lVar4 != 0;
  }
  if (lVar4 == 0) {
    return false;
  }
LAB_0006ccd0:
  uVar2 = *(uint *)(*(long *)(this + 0x18) + 0xc90);
  if ((uVar2 >> 0x1a & 1) != 0) {
    IOAccelMemory::setFlags((uint)lVar4);
    uVar2 = *(uint *)(*(long *)(this + 0x18) + 0xc90);
  }
  if ((uVar2 >> 0x1b & 1) != 0) {
    IOAccelMemory::setFlags((uint)*(undefined8 *)(this + 0x88));
  }
  return true;
}



// IGAccelResource::free()

void __thiscall IGAccelResource::free(IGAccelResource *this,void *param_1)

{
  long lVar1;
  undefined8 uVar2;
  IGAccelResource IVar3;
  uint uVar4;
  IGAccelResource IVar5;
  uint uVar6;
  ulong uVar7;
  IGAccelResource IVar8;
  long lVar9;
  uint uVar10;
  uint uVar11;
  
  *(uint *)(*(long *)(this + 0x18) + 0xebc) = *(uint *)(*(long *)(this + 0x18) + 0xebc) | 1;
  lVar9 = *(long *)(this + 0x240);
  while (lVar9 != 0) {
    *(undefined8 *)(this + 0x240) = *(undefined8 *)(lVar9 + 0xa8);
    if (6 < (ulong)*(ushort *)(lVar9 + 0x80)) {
      uVar2 = *(undefined8 *)(lVar9 + 0x58);
      *(undefined8 *)(lVar9 + 0x58) = 0;
      _IOFreeData(uVar2,(ulong)*(ushort *)(lVar9 + 0x80) << 2);
    }
    *(undefined2 *)(lVar9 + 0x80) = 0;
    *(undefined8 *)(lVar9 + 0x60) = 0;
    *(undefined8 *)(lVar9 + 0x58) = 0;
    _IOFreeTypeImpl(ResourceInfoEntry::operator_delete,lVar9);
    lVar9 = *(long *)(this + 0x240);
  }
  lVar9 = *(long *)(this + 0x260);
  if (lVar9 != 0) {
    IVar5 = this[0xac];
    if (IVar5 != (IGAccelResource)0x0) {
      IVar3 = this[0xad];
      uVar10 = (uint)(byte)this[0xae];
      uVar11 = 0;
      IVar8 = IVar3;
      do {
        if (IVar8 == (IGAccelResource)0x0) {
          IVar8 = (IGAccelResource)0x0;
        }
        else {
          uVar6 = (uint)(byte)IVar8;
          uVar4 = uVar10;
          do {
            uVar7 = (ulong)(uVar6 * uVar11 + uVar10);
            lVar9 = *(long *)(*(long *)(this + 0x260) + 0x20 + uVar7 * 0x28);
            if (lVar9 != 0) {
              lVar1 = *(long *)(this + 0x260) + uVar7 * 0x28;
              *(undefined8 *)(lVar1 + 0x20) = 0;
              _IOFreeTypeVarImpl(&free()::kalloc_type_view_569,lVar9,
                                 (ulong)*(ushort *)(lVar1 + 0x18) << 3);
              IVar3 = this[0xad];
              uVar4 = (uint)(byte)this[0xae];
            }
            uVar10 = uVar10 + 1 & 0xff;
            uVar6 = (uint)(byte)IVar3;
          } while (uVar10 < uVar4 + uVar6);
          IVar5 = this[0xac];
          IVar8 = IVar3;
          uVar10 = uVar4;
        }
        uVar11 = uVar11 + 1;
      } while (uVar11 < (byte)IVar5);
      lVar9 = *(long *)(this + 0x260);
    }
    *(undefined8 *)(this + 0x260) = 0;
    _IOFreeTypeVarImpl(&free()::kalloc_type_view_574,lVar9,
                       (ulong)(*(uint *)(this + 0x268) / 5 & 0xfffffff8) * 5);
  }
  if (*(long **)(this + 0x238) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x238) + 0x28))();
  }
  *(undefined8 *)(this + 0x238) = 0;
  if (*(long **)(this + 0x230) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x230) + 0x140))();
    (**(code **)(**(long **)(this + 0x230) + 0x28))();
    *(undefined8 *)(this + 0x230) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0006cef2. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelResource::rebuildPagingBuffer()

void __thiscall IGAccelResource::rebuildPagingBuffer(IGAccelResource *this)

{
  undefined8 *puVar1;
  int iVar2;
  IGAccelResource IVar3;
  long lVar4;
  int *piVar5;
  uint uVar6;
  uint uVar7;
  ulong uVar8;
  IGAccelResource IVar9;
  IGAccelResource IVar10;
  uint uVar11;
  long lVar12;
  uint uVar13;
  int local_48;
  int local_44;
  uint local_40;
  uint local_3c;
  uint local_38;
  IGAccelResource local_31;
  
  local_48 = 0;
  local_44 = 0;
  if (*(long *)(this + 0x80) == 0) {
    lVar4 = *(long *)(this + 0x260);
    if (lVar4 != 0) {
      IVar3 = this[0xac];
      if (IVar3 != (IGAccelResource)0x0) {
        IVar10 = this[0xad];
        uVar11 = (uint)(byte)this[0xae];
        uVar13 = 0;
        IVar9 = IVar10;
        do {
          if (IVar9 == (IGAccelResource)0x0) {
            IVar9 = (IGAccelResource)0x0;
          }
          else {
            uVar7 = (uint)(byte)IVar9;
            uVar6 = uVar11;
            do {
              uVar8 = (ulong)(uVar7 * uVar13 + uVar11);
              lVar4 = *(long *)(*(long *)(this + 0x260) + 0x20 + uVar8 * 0x28);
              if (lVar4 != 0) {
                lVar12 = *(long *)(this + 0x260) + uVar8 * 0x28;
                *(undefined8 *)(lVar12 + 0x20) = 0;
                _IOFreeTypeVarImpl(&rebuildPagingBuffer()::kalloc_type_view_614,lVar4,
                                   (ulong)*(ushort *)(lVar12 + 0x18) << 3);
                IVar10 = this[0xad];
                uVar6 = (uint)(byte)this[0xae];
              }
              uVar11 = uVar11 + 1 & 0xff;
              uVar7 = (uint)(byte)IVar10;
            } while (uVar11 < uVar6 + uVar7);
            IVar3 = this[0xac];
            IVar9 = IVar10;
            uVar11 = uVar6;
          }
          uVar13 = uVar13 + 1;
        } while (uVar13 < (byte)IVar3);
        lVar4 = *(long *)(this + 0x260);
      }
      *(undefined8 *)(this + 0x260) = 0;
      _IOFreeTypeVarImpl(&rebuildPagingBuffer()::kalloc_type_view_619,lVar4,
                         (ulong)(*(uint *)(this + 0x268) / 5 & 0xfffffff8) * 5);
      return;
    }
  }
  else {
    iVar2 = ((uint)(byte)this[0xad] + (uint)(byte)this[0xae]) * (uint)(byte)this[0xac] * 0x28;
    *(int *)(this + 0x268) = iVar2;
    if (iVar2 != 0) {
      lVar4 = _IOMallocTypeVarImpl
                        (&rebuildPagingBuffer()::kalloc_type_view_634,
                         (ulong)(byte)this[0xac] *
                         ((ulong)(byte)this[0xad] + (ulong)(byte)this[0xae]) * 0x28);
      *(long *)(this + 0x260) = lVar4;
      if (lVar4 != 0) {
        lVar4 = IOAccelResource2::getStorageResource();
        IVar3 = this[0xac];
        if (IVar3 != (IGAccelResource)0x0) {
          local_31 = (IGAccelResource)((char)this[0xae] + (char)this[0xad] + -1);
          local_38 = 0;
          do {
            IVar10 = this[0xae];
            if ((byte)IVar10 <= (byte)local_31) {
              do {
                uVar11 = local_38;
                local_40 = (uint)*(ushort *)(this + 0xb0);
                local_3c = (uint)*(ushort *)(this + 0xb2);
                calculateLevelOffsets
                          (this,&local_40,&local_3c,&local_48,&local_44,local_38,(uint)(byte)IVar10,
                           (uint)*(ushort *)(lVar4 + 0x196));
                puVar1 = *(undefined8 **)(this + 0x260);
                lVar12 = (ulong)(byte)IVar10 + (ulong)uVar11 * (ulong)(byte)this[0xac];
                *(undefined2 *)(puVar1 + 2) = (undefined2)local_40;
                *(undefined2 *)((long)puVar1 + 0x12) = (undefined2)local_3c;
                *(undefined2 *)((long)puVar1 + 0x14) = *(undefined2 *)(this + 0xb0);
                *(undefined2 *)((long)puVar1 + 0x16) = *(undefined2 *)(this + 0xb2);
                *(undefined2 *)(puVar1 + 3) = 1;
                *(undefined4 *)(puVar1 + 1) = *(undefined4 *)(this + 0xc0);
                *(undefined4 *)((long)puVar1 + 0xc) = *(undefined4 *)(this + 0xb8);
                *(undefined2 *)((long)puVar1 + 0x1a) = *(undefined2 *)(this + 0xd8);
                *puVar1 = 0;
                *(undefined2 *)((long)puVar1 + 0x1c) = *(undefined2 *)(lVar4 + 400);
                *(undefined2 *)((long)puVar1 + 0x1e) = *(undefined2 *)(lVar4 + 0x194);
                piVar5 = (int *)_IOMallocTypeVarImpl(&rebuildPagingBuffer()::kalloc_type_view_666,8)
                ;
                puVar1[lVar12 * 5 + 4] = piVar5;
                if (piVar5 == (int *)0x0) {
                  return;
                }
                *piVar5 = local_48;
                *(int *)(puVar1[lVar12 * 5 + 4] + 4) = local_44;
                IVar10 = (IGAccelResource)((char)IVar10 + '\x01');
              } while ((byte)IVar10 <= (byte)local_31);
              IVar3 = this[0xac];
            }
            local_38 = local_38 + 1;
          } while (local_38 < (byte)IVar3);
        }
      }
    }
  }
  return;
}



// IGAccelResource::calculateLevelOffsets(unsigned int*, unsigned int*, unsigned int*, unsigned
// int*, unsigned int, unsigned int, unsigned int)

void __thiscall
IGAccelResource::calculateLevelOffsets
          (IGAccelResource *this,uint *param_1,uint *param_2,int *param_3,int *param_4,int param_5,
          uint param_6,uint param_7)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  
  uVar2 = *param_1;
  uVar3 = *param_2;
  lVar4 = IOAccelResource2::getStorageResource();
  uVar1 = *(ushort *)(lVar4 + 0x1d6);
  ComputeLevelOffsetXY
            (uVar2,(ulong)uVar3,(ulong)param_6,param_5,0,param_7,*(uint *)(lVar4 + 400),
             (char)((uVar1 & 8) >> 3),1,0,'\0',(uint)(byte)this[0xad],(byte)((uVar1 & 0x10) >> 4),
             (char)((uVar1 & 0x20) >> 5),(uint)*(ushort *)(lVar4 + 0x194),param_3,param_4,param_1,
             param_2);
  return;
}



// IGAccelResource::pageon(IOAccelEvent*, bool, unsigned long long)

void __thiscall
IGAccelResource::pageon
          (undefined8 param_1,ulong param_2,ulong param_3_00,ulong param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,ulong param_10,
          undefined8 param_11,undefined8 param_12)

{
  uint *puVar1;
  short sVar2;
  undefined *puVar3;
  IGAccelResource IVar4;
  byte bVar5;
  uint uVar6;
  IGAccelTask *pIVar7;
  long *plVar8;
  undefined8 uVar9;
  long lVar10;
  long lVar11;
  undefined2 uVar12;
  int iVar13;
  long lVar14;
  ulong uVar15;
  uint uVar16;
  ulong uVar17;
  IGAccelResource IVar18;
  ushort uVar19;
  ushort uVar20;
  long *plVar21;
  IGAccelResource IVar22;
  uintptr_t arg4;
  char *pcVar23;
  ushort uVar24;
  uint uVar25;
  uint uVar26;
  ushort uVar27;
  ushort uVar28;
  uint uVar29;
  long lVar30;
  IOAccelTask *pIVar31;
  ushort uVar32;
  byte bVar33;
  float extraout_XMM0_Da;
  float extraout_XMM0_Da_00;
  float extraout_XMM0_Da_01;
  float fVar34;
  float extraout_XMM0_Da_02;
  float extraout_XMM0_Da_03;
  float extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar35;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  float fVar36;
  long local_220;
  undefined8 local_218;
  undefined4 local_210;
  uint uStack_20c;
  uint local_208 [4];
  undefined8 local_1f8;
  undefined8 local_1f0;
  undefined8 local_1e8;
  IGAccelResource *local_1e0;
  long local_1d8;
  undefined8 local_1d0;
  undefined4 local_1c8;
  uint uStack_1c4;
  uint local_1c0;
  undefined4 uStack_1bc;
  undefined8 local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  undefined8 local_188;
  byte local_180;
  uint local_17e;
  undefined4 local_178;
  undefined8 local_170;
  undefined1 local_168;
  ulong local_160;
  ulong local_158;
  long local_150;
  ulong local_148;
  ulong local_140;
  long local_138;
  undefined8 local_118;
  undefined8 local_110;
  undefined8 local_108;
  undefined8 local_100;
  undefined8 local_f8;
  undefined8 local_f0;
  long local_e8;
  long local_e0;
  ulong local_d8;
  long local_d0;
  long local_c8;
  uint local_bc;
  char *local_b8;
  long *local_b0;
  uint local_a8;
  uint local_a4;
  uint local_a0;
  uint local_9c;
  long *local_98;
  ulong local_90;
  ulong local_88;
  long local_80;
  ushort local_76;
  uint local_74;
  IGAccelTask *local_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  long local_50;
  IOAccelTask *local_48;
  IGAccelResource local_39;
  ulong local_38;
  
  iVar13 = _graphicsTracePointEnable;
  bVar33 = 0;
  local_60 = param_10;
  local_48 = this;
  local_50 = IOAccelResource2::getStorageResource();
  pIVar31 = local_48;
  if ((iVar13 != 0) && (_graphicsTracePointEnable != 0)) {
    uVar24 = *(ushort *)(local_50 + 0x1d6);
    dtHookTrace();
    puVar3 = __got::_kdebug_enable;
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00058,(ulong)(byte)pIVar31[0x14],(ulong)*(ushort *)(pIVar31 + 0xb0),
                    (ulong)*(ushort *)(pIVar31 + 0xb2),(ulong)*(ushort *)(pIVar31 + 0xb4),0);
    }
    pIVar31 = local_48;
    if (_graphicsTracePointEnable != 0) {
      dtHookTrace();
      if ((*(uint *)puVar3 & 0xfffffff7) != 0) {
        _kernel_debug(0x85a0005c,*(uintptr_t *)(pIVar31 + 0xc0),(ulong)(byte)pIVar31[0xac],
                      (ulong)(byte)pIVar31[0xad],(ulong)(uVar24 >> 1 & 0x78 | uVar24 & 7),0);
      }
      if ((_graphicsTracePointEnable != 0) && (dtHookTrace(), (*(uint *)puVar3 & 0xfffffff7) != 0))
      {
        _kernel_debug(0x85a00051,(ulong)(byte)local_48[0x14],*(uintptr_t *)(local_48 + 0xb8),
                      (ulong)*(ushort *)(local_48 + 0xb0),(ulong)*(ushort *)(local_48 + 0xb2),0);
      }
    }
  }
  pIVar31 = local_48;
  if (local_48[0xad] == (IOAccelTask)0x0) {
    return;
  }
  pIVar7 = (IGAccelTask *)IOAccelResource2::getGPUTask();
  plVar8 = (long *)IOAccelResource2::prepareBackingInTaskWithOption(pIVar31,(uint)pIVar7);
  if (plVar8 == (long *)0x0) {
    if (_graphicsTracePointEnable == 0) {
      return;
    }
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return;
    }
    arg4 = 1;
LAB_0006d6cc:
    _kernel_debug(0x85a00052,0,0,0,arg4,0);
    return;
  }
  local_70 = pIVar7;
  local_b0 = (long *)IOAccelResource2::prepareInTaskWithOption(pIVar31,(uint)pIVar7);
  if (local_b0 == (long *)0x0) {
    (**(code **)(*plVar8 + 0x140))(plVar8);
    (**(code **)(*plVar8 + 0x28))(plVar8);
    if (_graphicsTracePointEnable == 0) {
      return;
    }
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return;
    }
    arg4 = 2;
    goto LAB_0006d6cc;
  }
  local_68 = CONCAT44(local_68._4_4_,*(undefined4 *)(pIVar31 + 0xb8));
  local_98 = plVar8;
  local_38 = (**(code **)(*plVar8 + 0x128))(plVar8);
  local_d0 = *(long *)(pIVar31 + 0xe0);
  local_c8 = *(long *)(pIVar31 + 0xf8);
  local_58 = CONCAT62(local_58._2_6_,*(undefined2 *)(local_50 + 400));
  ___bzero(&local_220,0x138);
  IGVector<>::grow((IGVector<> *)&local_160,4);
  local_148 = 0;
  local_140 = 0;
  local_138 = 0;
  IGVector<>::grow((IGVector<> *)&local_148,4);
  pIVar31 = local_48;
  local_220 = 0;
  local_218 = 0;
  local_210 = 0;
  uStack_20c = 0;
  local_208[0] = 0;
  local_208[1] = 0;
  local_208[2] = 0;
  local_208[3] = 0;
  local_1f8 = 0;
  local_1f0 = 0;
  local_1e0 = (IGAccelResource *)0x0;
  local_1e8 = 0x100000000;
  local_1d8 = 0;
  local_1d0 = 0;
  local_1c8 = 0;
  uStack_1c4 = 0;
  local_1c0 = 0;
  uStack_1bc = 0;
  local_1b8 = 0;
  local_1b0 = 0;
  local_1a8 = 0;
  local_198 = 0;
  local_1a0 = 0x100000000;
  local_190 = 0;
  local_188 = 0;
  local_17e = 0;
  local_180 = 0;
  local_178 = 0;
  local_170 = 0;
  local_168 = 0;
  local_160 = 0;
  local_148 = 0;
  local_118 = 0;
  local_110 = 0;
  local_108 = 0;
  local_100 = 0;
  local_f8 = 0;
  local_f0 = 0;
  if (iVar13 != 0) {
    local_118 = param_12;
  }
  lVar11 = *(long *)(local_48 + 0x38);
  if (local_158 == 0) {
    uVar9 = IGVector<>::grow((IGVector<> *)&local_160,0);
    if ((char)uVar9 != '\0') goto LAB_0006d713;
  }
  else {
    local_160 = 0;
LAB_0006d713:
    *(long *)(local_150 + local_160 * 8) = lVar11 + 0x40;
    local_160 = local_160 + 1;
  }
  plVar8 = local_98;
  lVar11 = *(long *)(pIVar31 + 0x38);
  if ((local_160 != local_158) ||
     (uVar9 = IGVector<>::grow((IGVector<> *)&local_160,local_160 * 2), (char)uVar9 != '\0')) {
    *(long *)(local_150 + local_160 * 8) = lVar11 + 0x80;
    local_160 = local_160 + 1;
  }
  uVar17 = local_160;
  if ((local_160 != local_158) ||
     (uVar9 = IGVector<>::grow((IGVector<> *)&local_160,local_160 * 2), uVar17 = local_160,
     (char)uVar9 != '\0')) {
    local_160 = uVar17 + 1;
    *(ulong *)(local_150 + uVar17 * 8) = local_60;
  }
  uVar17 = local_60;
  if ((local_148 != local_140) ||
     (uVar9 = IGVector<>::grow((IGVector<> *)&local_148,local_148 * 2), (char)uVar9 != '\0')) {
    *(long **)(local_138 + local_148 * 8) = plVar8 + 7;
    local_148 = local_148 + 1;
  }
  if ((local_148 != local_140) ||
     (uVar9 = IGVector<>::grow((IGVector<> *)&local_148,local_148 * 2), (char)uVar9 != '\0')) {
    *(long **)(local_138 + local_148 * 8) = local_b0 + 7;
    local_148 = local_148 + 1;
  }
  if (local_148 == local_140) {
    uVar9 = IGVector<>::grow((IGVector<> *)&local_148,local_148 * 2);
    pcVar23 = (char *)(local_68 & 0xffffffff);
    uVar15 = local_148;
    uVar12 = (undefined2)local_58;
    if ((char)uVar9 == '\0') goto LAB_0006d88e;
  }
  else {
    pcVar23 = (char *)(local_68 & 0xffffffff);
    uVar15 = local_148;
    uVar12 = (undefined2)local_58;
  }
  local_148 = uVar15 + 1;
  *(ulong *)(local_138 + uVar15 * 8) = uVar17;
LAB_0006d88e:
  lVar11 = local_50;
  local_17e = CONCAT22(local_17e._2_2_,
                       (ushort)local_17e & 0xffe7 |
                       (ushort)((uint)(int)(short)(*(short *)(local_50 + 0x1d6) << 9) >> 0xf) & 0x18
                      );
  local_180 = *(byte *)(*(long *)(pIVar31 + 0x260) + 0x1a);
  uStack_20c = (uint)*(ushort *)(pIVar31 + 0xb0);
  local_218._0_6_ = CONCAT24(0x100,(uint)local_218);
  local_218 = CONCAT26(uVar12,(undefined6)local_218);
  local_210 = 0x23;
  local_1e0 = (IGAccelResource *)pIVar31;
  local_208[0] = *(int *)(local_50 + 0x18c) * *(int *)(local_50 + 0x214) * 4;
  plVar8 = &local_220;
  plVar21 = &local_1d8;
  for (lVar14 = 9; lVar14 != 0; lVar14 = lVar14 + -1) {
    *plVar21 = *plVar8;
    plVar8 = plVar8 + (ulong)bVar33 * -2 + 1;
    plVar21 = plVar21 + (ulong)bVar33 * -2 + 1;
  }
  local_1c8 = 5;
  local_1d0._0_5_ = CONCAT14(*(undefined1 *)(lVar11 + 0x194),(int)pcVar23);
  local_80 = 0;
  local_88 = 0;
  local_90 = 0;
  IGVector<>::grow((IGVector<> *)&local_90,4);
  IVar18 = *(IGAccelResource *)(pIVar31 + 0xae);
  if ((*(byte *)(local_50 + 0x1d6) & 0xc0) == 0) {
    IVar18 = (IGAccelResource)(((char)IVar18 + (char)*(IGAccelResource *)(pIVar31 + 0xad)) - 1);
  }
  IVar4 = *(IGAccelResource *)(pIVar31 + 0xac);
  pIVar7 = local_70;
  fVar34 = extraout_XMM0_Da;
  uVar35 = extraout_XMM0_Db;
  if (IVar4 != (IGAccelResource)0x0) {
    local_c8 = local_c8 + local_38;
    local_b8 = (char *)0x0;
    lVar11 = local_50;
    local_39 = IVar18;
    do {
      IVar22 = ((IGAccelResource *)pIVar31)[0xae];
      if ((byte)IVar22 <= (byte)IVar18) {
        do {
          local_d8 = (ulong)(byte)IVar22;
          lVar14 = *(long *)((IGAccelResource *)pIVar31 + 0x260);
          lVar10 = (ulong)(byte)((IGAccelResource *)pIVar31)[0xad] * (long)local_b8 + local_d8;
          local_68 = lVar10 * 5;
          uVar24 = *(ushort *)(lVar14 + 0x10 + lVar10 * 0x28);
          local_38 = (ulong)uVar24;
          uVar19 = *(ushort *)(lVar14 + 0x12 + lVar10 * 0x28);
          local_58 = (ulong)uVar19;
          uVar26 = (uint)uVar19;
          uVar29 = (uint)uVar19;
          uVar27 = *(ushort *)(lVar11 + 0x196);
          if (1 < uVar27) {
            uVar25 = (uint)uVar19;
            if ((*(ushort *)(lVar11 + 0x1d6) & 0x30) == 0) {
              local_38 = (ulong)(uVar24 + 3 & 0xfffffffc);
              local_58 = (ulong)((uVar25 + 3 & 0xfffffffc) * (uint)uVar27);
            }
            else {
              sVar2 = *(short *)(lVar14 + 0x1e + lVar10 * 0x28);
              uVar6 = (uint)uVar27;
              uVar16 = uVar27 - 2 >> 1 | uVar6 << 0x1f;
              if (sVar2 == 7) {
                iVar13 = 0x10;
              }
              else if (sVar2 == 0xb) {
                iVar13 = 0x40;
              }
              else {
                iVar13 = (uint)((*(ushort *)(lVar11 + 0x1d6) & 0x10) == 0) * 4 + 4;
              }
              if (uVar16 < 2) {
                uVar16 = (uint)uVar24;
                if (uVar16 < 2) {
                  uVar16 = 1;
                }
                uVar16 = uVar16 * 2 + 2 & 0xfffffffc;
LAB_0006da88:
                local_38 = (ulong)uVar16;
              }
              else if ((uVar16 == 3) || (uVar16 == 7)) {
                uVar16 = (uint)uVar24;
                if (uVar16 < 2) {
                  uVar16 = 1;
                }
                uVar16 = uVar16 * 4 + 4 & 0xfffffff8;
                goto LAB_0006da88;
              }
              if (uVar27 == 4) {
LAB_0006daa3:
                uVar29 = (uint)uVar19;
                if (uVar25 < 2) {
                  uVar29 = 1;
                }
                uVar26 = uVar29 * 2 + 2 & 0xfffffffc;
              }
              else if (uVar6 == 0x10) {
                if (uVar25 < 2) {
                  uVar29 = 1;
                }
                uVar26 = uVar29 * 4 + 4 & 0xfffffff8;
              }
              else if (uVar6 == 8) goto LAB_0006daa3;
              local_38 = (ulong)(((int)local_38 + iVar13) - 1U & -iVar13);
              local_58 = (ulong)(uVar26 + iVar13 + -1 & -iVar13);
            }
          }
          puVar1 = (uint *)(lVar14 + lVar10 * 0x28);
          lVar10 = *(long *)(puVar1 + 8);
          uVar24 = *(ushort *)((long)puVar1 + 0x1a);
          local_60 = CONCAT62(local_60._2_6_,(short)puVar1[7]);
          lVar11 = (**(code **)(*local_b0 + 0x128))();
          uVar17 = local_58;
          uVar29 = puVar1[2];
          lVar11 = (ulong)puVar1[1] + lVar11;
          lVar30 = (ulong)*puVar1 + local_c8;
          bVar33 = (byte)uVar24;
          bVar5 = ~bVar33 & 1;
          if ((uVar24 & 3) == 0) {
            bVar5 = 2;
          }
          local_74 = (uint)(uVar24 >> bVar5);
          uVar26 = puVar1[3];
          uVar19 = *(ushort *)((long)puVar1 + 0x1e);
          uVar25 = (uint)local_58;
          fVar34 = extraout_XMM0_Da_00;
          uVar35 = extraout_XMM0_Db_00;
          if (((((uint)local_218 == uVar29) && ((uint)local_1d0 == uVar26)) && (local_220 == lVar30)
              ) && (local_1d8 == lVar11)) {
            if ((((local_218._6_2_ != (short)local_60) || (uVar19 != local_1d0._4_1_)) ||
                (uVar24 != local_180)) ||
               ((local_d0 != 0 &&
                ((uStack_20c != *(ushort *)(lVar14 + local_68 * 8 + 0x10) ||
                 (local_208[0] != *(ushort *)(lVar14 + local_68 * 8 + 0x12))))))) goto LAB_0006dbe0;
          }
          else {
LAB_0006dbe0:
            if (local_90 != 0) {
              local_e8 = lVar14;
              local_e0 = lVar11;
              local_bc = uVar29;
              local_76 = uVar19;
              IntelAccelerator::submitBlit
                        (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3_00,
                         param_4,param_5,param_6,param_7,param_8,
                         *(IntelAccelerator **)(local_48 + 0x18),&local_220,&local_90,local_70,0,
                         pcVar23);
              local_90 = 0;
              lVar11 = local_e0;
              lVar14 = local_e8;
              fVar34 = extraout_XMM0_Da_01;
              uVar35 = extraout_XMM0_Db_01;
              uVar29 = local_bc;
              uVar19 = local_76;
            }
            local_218 = CONCAT44(local_218._4_4_,uVar29);
            local_218 = CONCAT26((short)local_60,(undefined6)local_218);
            local_1d0 = CONCAT26((short)local_60,(undefined6)local_1d0);
            local_1d0 = CONCAT44(CONCAT31(local_1d0._5_3_,(char)uVar19),uVar26);
            local_220 = lVar30;
            local_1d8 = lVar11;
            local_180 = bVar33;
            if ((local_d0 != 0) &&
               ((uVar29 = (uint)local_38, uStack_20c != uVar29 || (local_208[0] != uVar25)))) {
              uStack_20c = uVar29;
              local_208[0] = uVar25;
              uStack_1c4 = uVar29;
              local_1c0 = uVar25;
            }
          }
          uVar15 = local_68;
          lVar11 = local_50;
          if (((uint)(1L << ((byte)local_d8 & 0x3f)) &
               (uint)*(ushort *)(*(long *)(local_48 + 0x30) + (long)local_b8 * 2) &
              ~(uint)*(ushort *)(*(long *)(local_48 + 0x30) + 0xc + (long)local_b8 * 2)) != 0) {
            local_1f8 = local_1f8 & 0xffffffff;
            local_1b0 = local_1b0 & 0xffffffff;
            if (*(short *)(lVar14 + 0x18 + local_68 * 8) != 0) {
              local_68 = CONCAT44(local_68._4_4_,(float)(local_38 & 0xffffffff));
              uVar35 = 0;
              fVar34 = (float)(uVar17 & 0xffffffff);
              local_58 = CONCAT44(local_58._4_4_,fVar34);
              uVar17 = 0;
              local_60 = local_60 & 0xffffffff00000000;
              do {
                if (lVar10 == 0) {
                  uVar26 = 0;
                  uVar29 = 0;
                }
                else {
                  uVar29 = *(uint *)(lVar10 + 4 + uVar17 * 8);
                  uVar26 = *(int *)(lVar10 + uVar17 * 8) - (int)local_60;
                  if ((((*(ushort *)(lVar11 + 0x1d6) & 3) == 1) && (*(short *)(lVar11 + 0x194) == 0)
                      ) && (0x7fff < ((int)local_38 + uVar26) * local_74)) {
                    if (local_90 != 0) {
                      IntelAccelerator::submitBlit
                                (CONCAT44(uVar35,fVar34),param_2,param_3_00,param_4,param_5,param_6,
                                 param_7,param_8,*(IntelAccelerator **)(local_48 + 0x18),&local_220,
                                 &local_90,local_70,0,pcVar23);
                      local_90 = 0;
                      lVar11 = local_50;
                    }
                    local_1f8 = CONCAT44((uint)local_218 * (int)uVar17,(undefined4)local_1f8);
                    local_1b0 = CONCAT44((uint)local_1d0 * (int)uVar17,(undefined4)local_1b0);
                    local_60 = CONCAT44(local_60._4_4_,uVar26);
                    uVar26 = 0;
                  }
                }
                if ((local_90 != local_88) ||
                   (uVar9 = IGVector<>::grow((IGVector<> *)&local_90,local_90 * 2),
                   lVar11 = local_50, fVar34 = extraout_XMM0_Da_02, uVar35 = extraout_XMM0_Db_02,
                   (char)uVar9 != '\0')) {
                  uVar35 = 0;
                  fVar34 = (float)uVar26;
                  fVar36 = (float)uVar29;
                  param_2 = (ulong)(uint)fVar36;
                  lVar30 = local_90 * 0x20;
                  *(float *)(local_80 + lVar30) = fVar34;
                  *(float *)(local_80 + 4 + lVar30) = fVar36;
                  param_3_00 = local_68 & 0xffffffff;
                  *(undefined4 *)(local_80 + 8 + lVar30) = (undefined4)local_68;
                  param_4 = local_58 & 0xffffffff;
                  *(undefined4 *)(local_80 + 0xc + lVar30) = (undefined4)local_58;
                  *(float *)(local_80 + 0x10 + lVar30) = fVar34;
                  *(float *)(local_80 + 0x14 + lVar30) = fVar36;
                  *(undefined4 *)(local_80 + 0x18 + lVar30) = (undefined4)local_68;
                  *(undefined4 *)(local_80 + 0x1c + lVar30) = (undefined4)local_58;
                  local_90 = local_90 + 1;
                }
                uVar17 = uVar17 + 1;
              } while (uVar17 < *(ushort *)(lVar14 + uVar15 * 8 + 0x18));
            }
          }
          IVar22 = (IGAccelResource)((char)local_d8 + 1);
          pIVar31 = local_48;
        } while ((byte)IVar22 <= (byte)local_39);
        IVar4 = *(IGAccelResource *)(local_48 + 0xac);
        pIVar7 = local_70;
        IVar18 = local_39;
      }
      pcVar23 = local_b8 + 1;
      local_b8 = pcVar23;
    } while (pcVar23 < (char *)(ulong)(byte)IVar4);
  }
  IntelAccelerator::submitBlit
            (CONCAT44(uVar35,fVar34),param_2,param_3_00,param_4,param_5,param_6,param_7,param_8,
             *(IntelAccelerator **)((IGAccelResource *)pIVar31 + 0x18),&local_220,&local_90,pIVar7,0
             ,pcVar23);
  if (local_80 != 0) {
    lVar11 = local_88 << 5;
    if (lVar11 < 0) {
      lVar11 = -0x8000000000000000;
    }
    if (local_88 >> 0x3b != 0) {
      lVar11 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_80,lVar11);
  }
  if ((*(byte *)(local_50 + 0x1d6) & 0x40) != 0) {
    IVar18 = (IGAccelResource)
             (((char)((IGAccelResource *)pIVar31)[0xae] + (char)((IGAccelResource *)pIVar31)[0xad])
             - 1);
    local_17e = local_17e & 0xfffff7e0 | 0x819;
    local_1d0._0_5_ = CONCAT14(*(undefined1 *)(local_50 + 0x194),(uint)local_1d0);
    local_218._0_5_ = CONCAT14(*(undefined1 *)(local_50 + 0x194),(uint)local_218);
    uVar12 = (undefined2)*(uint *)(local_50 + 400);
    local_1d0 = CONCAT26(uVar12,(undefined6)local_1d0);
    local_218 = CONCAT26(uVar12,(undefined6)local_218);
    uStack_20c = (uint)*(ushort *)((IGAccelResource *)pIVar31 + 0xb0);
    local_208[0] = (uint)*(ushort *)((IGAccelResource *)pIVar31 + 0xb2);
    getBufferWidthHeight((IGAccelResource *)pIVar31,&uStack_20c,local_208,*(uint *)(local_50 + 400))
    ;
    plVar8 = local_b0;
    uStack_1c4 = uStack_20c;
    local_1c0 = local_208[0];
    local_180 = *(byte *)(*(long *)((IGAccelResource *)pIVar31 + 0x260) + 0x1a);
    uVar35 = *(undefined4 *)(*(long *)((IGAccelResource *)pIVar31 + 0x260) + 0xc);
    local_220 = (**(code **)(*local_b0 + 0x128))(local_b0);
    local_218 = CONCAT44(local_218._4_4_,uVar35);
    local_1d8 = (**(code **)(*plVar8 + 0x128))(plVar8);
    local_1d0 = CONCAT44(local_1d0._4_4_,uVar35);
    local_90 = 0;
    local_88 = 0;
    local_80 = 0;
    uVar17 = (ulong)(byte)((IGAccelResource *)pIVar31)[0xad] - 1;
    fVar34 = extraout_XMM0_Da_03;
    uVar35 = extraout_XMM0_Db_03;
    if ((uVar17 != 0) &&
       (uVar9 = IGVector<>::grow((IGVector<> *)&local_90,uVar17), fVar34 = extraout_XMM0_Da_04,
       uVar35 = extraout_XMM0_Db_04, (char)uVar9 != '\0')) {
      local_90 = uVar17;
    }
    pIVar31 = local_48;
    lVar11 = local_80;
    local_a8 = 0;
    local_a4 = 0;
    uVar29 = (uint)(byte)*(IGAccelResource *)(local_48 + 0xae);
    if ((byte)*(IGAccelResource *)(local_48 + 0xae) < (byte)IVar18) {
      local_a0 = (uint)*(ushort *)(local_48 + 0xb0);
      local_9c = (uint)*(ushort *)(local_48 + 0xb2);
      do {
        lVar14 = (ulong)((byte)-(char)*(IGAccelResource *)(pIVar31 + 0xae) + uVar29 & 0xff) * 0x20;
        *(float *)(lVar11 + lVar14) = (float)local_a8;
        *(float *)(lVar11 + 4 + lVar14) = (float)local_a4;
        *(float *)(lVar11 + 8 + lVar14) = (float)local_a0;
        *(float *)(lVar11 + 0xc + lVar14) = (float)local_9c;
        local_a0 = (uint)*(ushort *)(pIVar31 + 0xb0);
        local_9c = (uint)*(ushort *)(pIVar31 + 0xb2);
        uVar29 = uVar29 + 1;
        pcVar23 = (char *)0x0;
        calculateLevelOffsets
                  ((IGAccelResource *)pIVar31,&local_a0,&local_9c,(int *)&local_a8,(int *)&local_a4,
                   0,uVar29,1);
        uVar35 = 0;
        fVar34 = (float)local_a8;
        param_2 = (ulong)(uint)(float)local_a4;
        param_3_00 = (ulong)(uint)(float)local_a0;
        param_4 = (ulong)(uint)(float)local_9c;
        *(float *)(lVar11 + 0x10 + lVar14) = fVar34;
        *(float *)(lVar11 + 0x14 + lVar14) = (float)local_a4;
        *(float *)(lVar11 + 0x18 + lVar14) = (float)local_a0;
        *(float *)(lVar11 + 0x1c + lVar14) = (float)local_9c;
      } while (IVar18 != SUB41(uVar29,0));
    }
    IntelAccelerator::submitBlit
              (CONCAT44(uVar35,fVar34),param_2,param_3_00,param_4,param_5,param_6,param_7,param_8,
               *(IntelAccelerator **)(pIVar31 + 0x18),&local_220,&local_90,local_70,0,pcVar23);
    if (local_80 != 0) {
      lVar11 = local_88 << 5;
      if (lVar11 < 0) {
        lVar11 = -0x8000000000000000;
      }
      if (local_88 >> 0x3b != 0) {
        lVar11 = -0x8000000000000000;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                          kalloc_type_view_29,local_80,lVar11);
    }
  }
  plVar8 = local_98;
  iVar13 = *(int *)(local_50 + 0x198);
  if (iVar13 != 0 || *(int *)(local_50 + 0x1ac) != 0) {
    local_60 = (ulong)(byte)((IGAccelResource *)pIVar31)[0xac];
    if (local_60 != 0) {
      local_58 = CONCAT44(local_58._4_4_,iVar13);
      local_38 = local_50 + 0x180;
      local_74 = (uint)(iVar13 != 0) * 0x10 + (uint)(*(int *)(local_50 + 0x1ac) != 0) * 4 + 0x22;
      local_68 = (ulong)(byte)((IGAccelResource *)pIVar31)[0xae];
      uVar17 = 0;
      uVar32 = 0;
      uVar19 = 0;
      uVar24 = 0;
      uVar20 = 0;
      uVar27 = 0;
      do {
        if (((IGAccelResource *)pIVar31)[0xad] == (IGAccelResource)0x0) {
          uVar24 = uVar19;
          if (uVar20 == 0) {
            uVar24 = uVar32 + 1;
            uVar19 = uVar32 + 1;
          }
LAB_0006e2e7:
          uVar28 = uVar27;
        }
        else {
          uVar29 = 0;
          uVar15 = local_68;
          do {
            uVar26 = 1 << ((byte)uVar15 & 0x1f);
            if ((~(uint)*(ushort *)(*(long *)(local_48 + 0x30) + 0xc + uVar17 * 2) &
                 (uint)*(ushort *)(*(long *)(local_48 + 0x30) + uVar17 * 2) &
                (uint)(1L << ((byte)uVar15 & 0x3f))) == 0) {
              uVar26 = 0;
            }
            uVar29 = uVar29 | uVar26;
            uVar15 = uVar15 + 1;
          } while (uVar15 < (byte)((IGAccelResource *)pIVar31)[0xad] + local_68);
          uVar20 = uVar20 | (ushort)uVar29;
          if (uVar20 == 0) {
            uVar19 = uVar32 + 1;
            uVar24 = uVar32 + 1;
          }
          uVar28 = uVar32;
          if ((ushort)uVar29 == 0) goto LAB_0006e2e7;
        }
        uVar17 = uVar17 + 1;
        uVar32 = uVar32 + 1;
        uVar27 = uVar28;
      } while (uVar17 != local_60);
      pIVar31 = local_48;
      if (uVar20 != 0) {
        if (1 < *(uint *)(local_50 + 0x214)) {
          uVar24 = 0;
          uVar28 = (short)*(uint *)(local_50 + 0x214) - 1;
        }
        submitDepthResolve((IGAccelResource *)local_48,local_38,
                           *(IntelAccelerator **)(local_48 + 0x18),local_70,0,(ulong)local_74,uVar24
                           ,uVar28,uVar20,(int *)0x0);
        iVar13 = *(int *)(local_50 + 0x198);
      }
    }
    if (iVar13 != 0) {
      *(byte *)(local_50 + 0x221) = *(byte *)(local_50 + 0x221) | 0x11;
    }
  }
  (**(code **)(*plVar8 + 0x140))(plVar8);
  (**(code **)(*plVar8 + 0x28))(plVar8);
  plVar8 = local_b0;
  (**(code **)(*local_b0 + 0x140))(local_b0);
  (**(code **)(*plVar8 + 0x28))(plVar8);
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00052,(ulong)(byte)((IGAccelResource *)pIVar31)[0x14],0,0,0,0);
  }
  if (local_138 != 0) {
    lVar11 = local_140 * 8;
    if (lVar11 < 0) {
      lVar11 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_140) {
      lVar11 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_138,lVar11);
  }
  if (local_150 != 0) {
    lVar11 = local_158 * 8;
    if (lVar11 < 0) {
      lVar11 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_158) {
      lVar11 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_150,lVar11);
  }
  return;
}



// IGAccelResource::getBufferWidthHeight(unsigned int*, unsigned int*, unsigned int)

void __thiscall
IGAccelResource::getBufferWidthHeight
          (IGAccelResource *this,uint *param_1,uint *param_2,uint param_3)

{
  IGAccelResource IVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  byte bVar5;
  uint uVar6;
  int iVar7;
  long lVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  bool bVar15;
  uint local_38;
  int local_34;
  
  lVar8 = IOAccelResource2::getStorageResource();
  uVar2 = *(ushort *)(lVar8 + 0x1d6);
  uVar11 = (uint)uVar2;
  if ((uVar2 & 1) != 0) {
    if ((uVar2 & 2) == 0) {
      uVar11 = *param_2;
      *param_2 = 1;
      iVar7 = 0;
      uVar12 = *param_1;
      if (1 < (byte)this[0xad]) {
        iVar7 = 0;
        uVar10 = 1;
        do {
          bVar5 = (byte)uVar10 & 0x1f;
          uVar13 = (uVar12 >> bVar5) + 0x3f & 0xffffffc0;
          if (uVar12 >> bVar5 == 0) {
            uVar13 = 0x40;
          }
          iVar7 = iVar7 + uVar13;
          uVar10 = uVar10 + 1;
        } while ((byte)this[0xad] != uVar10);
      }
      *param_1 = (uVar12 + 0x3f | 0x3f) + iVar7 & 0xffffffc0;
      *param_2 = 1;
      *param_1 = uVar11 * *param_1;
      return;
    }
    uVar12 = (uint)*(ushort *)(this + 0xb4);
LAB_0006e618:
    GetCubeArrayWidthHeight
              (param_1,param_2,uVar12,(uint)(byte)this[0xad],(uint)*(ushort *)(lVar8 + 0x196),
               param_3,(uint)*(ushort *)(lVar8 + 0x194),(byte)((uVar2 & 0x10) >> 4),
               (char)((uVar11 & 0x20) >> 5));
    return;
  }
  uVar12 = (uint)(byte)this[0xac];
  if (1 < (byte)this[0xac]) goto LAB_0006e618;
  if ((uVar2 & 4) != 0) {
    uVar3 = *(ushort *)(this + 0xb4);
    IVar1 = this[0xad];
    uVar12 = (uint)(byte)IVar1;
    uVar4 = *(ushort *)(lVar8 + 0x194);
    local_38 = 0;
    local_34 = 0;
    if (((param_3 >> 9 & 1) == 0) &&
       ((0x1e < param_3 - 0x186 || ((0x781808ffU >> (param_3 - 0x186 & 0x1f) & 1) == 0)))) {
      GetSurfaceAlignmentUnits
                (&local_38,&local_34,(ulong)param_3,(uint)*(ushort *)(lVar8 + 0x196),(uint)uVar4,
                 uVar12,(char)((uVar11 & 0x10) >> 4),(char)((uVar2 & 0x20) >> 5),'\0','\0');
      uVar11 = *param_1;
    }
    else {
      GetSurfaceAlignmentUnits
                (&local_38,&local_34,(ulong)param_3,(uint)*(ushort *)(lVar8 + 0x196),(uint)uVar4,
                 uVar12,(char)((uVar11 & 0x10) >> 4),(char)((uVar2 & 0x20) >> 5),'\0','\0');
      uVar11 = *param_1 + 3 >> 2;
    }
    uVar10 = local_38;
    *param_1 = -local_38 & (uVar11 + local_38) - 1;
    uVar11 = ComputeQPitch3D((ulong)*param_2,local_34,uVar12,(uint)uVar4,param_3);
    *param_2 = uVar11 * uVar3;
    if ((byte)IVar1 < 2) {
      return;
    }
    if (uVar10 < *param_1) {
      return;
    }
    *param_1 = uVar10 * 2;
    return;
  }
  if (((uVar2 & 2) == 0) && (*param_2 < 2)) {
    iVar7 = 0;
    uVar11 = *param_1;
    if (1 < (byte)this[0xad]) {
      iVar7 = 0;
      uVar12 = 1;
      do {
        bVar5 = (byte)uVar12 & 0x1f;
        uVar10 = (uVar11 >> bVar5) + 0x3f & 0xffffffc0;
        if (uVar11 >> bVar5 == 0) {
          uVar10 = 0x40;
        }
        iVar7 = iVar7 + uVar10;
        uVar12 = uVar12 + 1;
      } while ((byte)this[0xad] != uVar12);
    }
    *param_1 = (uVar11 + 0x3f | 0x3f) + iVar7 & 0xffffffc0;
    *param_2 = 1;
    return;
  }
  IVar1 = this[0xad];
  uVar3 = *(ushort *)(lVar8 + 0x196);
  uVar11 = (uint)uVar3;
  uVar4 = *(ushort *)(lVar8 + 0x194);
  local_38 = 0;
  local_34 = 0;
  uVar12 = (uint)uVar2;
  if (((param_3 >> 9 & 1) == 0) &&
     ((0x1e < param_3 - 0x186 || ((0x781808ffU >> (param_3 - 0x186 & 0x1f) & 1) == 0)))) {
    GetSurfaceAlignmentUnits
              (&local_38,&local_34,(ulong)param_3,uVar11,(uint)uVar4,(uint)(byte)IVar1,
               (char)((uVar12 & 0x10) >> 4),(char)((uVar12 & 0x20) >> 5),'\0','\0');
    if (uVar3 < 2) {
      uVar11 = *param_1;
LAB_0006e757:
      *param_1 = -local_38 & (uVar11 + local_38) - 1;
      bVar15 = true;
      if ((param_3 >> 9 & 1) == 0) {
        if (param_3 - 0x186 < 0x1f) {
          bVar15 = (0x781808ffU >> (param_3 - 0x186 & 0x1f) & 1) != 0;
        }
        else {
          bVar15 = false;
        }
      }
      uVar11 = *param_2;
      iVar7 = local_34 + -1;
      uVar10 = -local_34;
      uVar12 = 0;
      if ((byte)IVar1 < 2) {
        uVar13 = 0;
      }
      else {
        uVar12 = uVar11 >> 1;
        if (uVar11 < 2) {
          uVar12 = 1;
        }
        uVar13 = uVar12 + iVar7 & uVar10;
        uVar12 = 0;
        if (IVar1 != (IGAccelResource)0x2) {
          uVar12 = 0;
          uVar9 = 2;
          do {
            bVar5 = (byte)uVar9 & 0x1f;
            uVar6 = uVar11 >> bVar5;
            if (uVar11 >> bVar5 == 0) {
              uVar6 = 1;
            }
            uVar14 = uVar6 + 3 >> 2;
            if (!bVar15) {
              uVar14 = uVar6;
            }
            uVar12 = uVar12 + (uVar14 + iVar7 & uVar10);
            uVar9 = uVar9 + 1;
          } while ((byte)IVar1 != uVar9);
        }
      }
      uVar9 = uVar11 + 3 >> 2;
      if (!bVar15) {
        uVar9 = uVar11;
      }
      if (uVar12 < uVar13) {
        uVar12 = uVar13;
      }
      *param_2 = (uVar9 + iVar7 & uVar10) + iVar7 + uVar12 & uVar10;
      if ((byte)IVar1 < 2) {
        return;
      }
      if (local_38 < *param_1) {
        return;
      }
      *param_1 = local_38 * 2;
      return;
    }
  }
  else {
    GetSurfaceAlignmentUnits
              (&local_38,&local_34,(ulong)param_3,uVar11,(uint)uVar4,(uint)(byte)IVar1,
               (char)((uVar12 & 0x10) >> 4),(char)((uVar12 & 0x20) >> 5),'\0','\0');
    if (uVar3 < 2) {
      uVar11 = *param_1 + 3 >> 2;
      goto LAB_0006e757;
    }
  }
  if ((uVar2 & 0x30) == 0) {
    *param_1 = *param_1 + 3 & 0xfffffffc;
    uVar11 = (*param_2 + 3 & 0xfffffffc) * uVar11;
    goto LAB_0006e959;
  }
  uVar12 = uVar11 - 2 >> 1 | uVar11 << 0x1f;
  if (uVar4 == 7) {
    iVar7 = 0x10;
  }
  else if (uVar4 == 0xb) {
    iVar7 = 0x40;
  }
  else {
    iVar7 = (uint)((uVar2 & 0x10) == 0) * 4 + 4;
  }
  uVar10 = *param_1;
  if (uVar12 < 2) {
    uVar12 = 1;
    if (1 < uVar10) {
      uVar12 = uVar10;
    }
    uVar10 = uVar12 * 2 + 2 & 0xfffffffc;
  }
  else if ((uVar12 == 3) || (uVar12 == 7)) {
    uVar12 = 1;
    if (1 < uVar10) {
      uVar12 = uVar10;
    }
    uVar10 = uVar12 * 4 + 4 & 0xfffffff8;
  }
  *param_1 = (uVar10 + iVar7) - 1 & -iVar7;
  uVar12 = *param_2;
  if (uVar3 == 4) {
LAB_0006e92a:
    uVar11 = 1;
    if (1 < uVar12) {
      uVar11 = uVar12;
    }
    uVar12 = uVar11 * 2 + 2 & 0xfffffffc;
  }
  else if (uVar11 == 0x10) {
    uVar11 = 1;
    if (1 < uVar12) {
      uVar11 = uVar12;
    }
    uVar12 = uVar11 * 4 + 4 & 0xfffffff8;
  }
  else if (uVar11 == 8) goto LAB_0006e92a;
  uVar11 = uVar12 + iVar7 + -1 & -iVar7;
LAB_0006e959:
  *param_2 = uVar11;
  return;
}



// IGAccelResource::submitDepthResolve(IGAccelResource::ResourceInfoEntry*, IntelAccelerator&,
// IGAccelTask*, IOAccelEvent*, EIntelResolveType, unsigned short, unsigned short, unsigned short,
// _scissor_rect const*)

ulong __thiscall
IGAccelResource::submitDepthResolve
          (IGAccelResource *this,long param_1,IntelAccelerator *param_2,IGAccelTask *param_3,
          long param_4,ulong param_5,ushort param_6,ushort param_7,ushort param_8,int *param_9)

{
  int iVar1;
  IGAccelTask *pIVar2;
  IGAccelResource *pIVar3;
  undefined8 uVar4;
  long lVar5;
  undefined7 uVar7;
  ulong uVar6;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  long local_130;
  IntelAccelerator *local_128;
  long local_120;
  long local_110;
  undefined4 local_108;
  undefined4 local_104;
  long local_100;
  undefined4 local_f8;
  undefined4 local_f4;
  long local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  long local_e0;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined1 local_d0;
  undefined2 local_cf;
  undefined1 local_cd;
  uint local_cc;
  uint local_c8;
  undefined4 local_c4;
  int local_c0;
  int local_bc;
  uint local_b8;
  uint local_b4;
  uint local_b0;
  uint local_ac;
  uint local_a8;
  uint local_a4;
  undefined4 local_a0;
  uint local_9c;
  uint local_98;
  uint local_94;
  byte local_90;
  ulong local_88;
  ulong local_80;
  long local_78;
  undefined8 local_70;
  ulong local_68;
  long local_60;
  long local_58;
  IGAccelTask *local_50;
  int local_44;
  IntelAccelerator *local_40;
  undefined1 local_31;
  
  local_31 = (undefined1)param_5;
  if ((param_5 & 0x11) == 0) {
    iVar1 = *(int *)(param_1 + 0x2c);
  }
  else {
    iVar1 = *(int *)(param_1 + 0x18);
  }
  if (iVar1 == 0) {
    uVar6 = 0;
    goto LAB_0006eeb8;
  }
  local_58 = param_4;
  local_50 = param_3;
  local_40 = param_2;
  ___bzero(&local_128,0xd0);
  IGVector<>::grow((IGVector<> *)&local_88,4);
  uVar6 = 0;
  local_70 = 0;
  local_68 = 0;
  local_60 = 0;
  IGVector<>::grow((IGVector<> *)&local_70,4);
  local_130 = 0;
  local_44 = 0;
  get_tex_data(this,&local_130,&local_44);
  lVar5 = local_58;
  if ((local_130 != 0) && (local_44 != 0)) {
    local_110 = local_130 + (ulong)*(uint *)(param_1 + 0x88);
    local_108 = *(undefined4 *)(param_1 + 8);
    local_104 = *(undefined4 *)(param_1 + 0xc);
    local_e8 = 0;
    if ((ulong)*(uint *)(param_1 + 0x18) == 0) {
      local_100 = 0;
      local_f8 = 0;
      local_f4 = 0;
    }
    else {
      local_100 = (ulong)*(uint *)(param_1 + 0x18) + local_110;
      local_f8 = *(undefined4 *)(param_1 + 0x1c);
      local_f4 = *(undefined4 *)(param_1 + 0x20);
    }
    if ((ulong)*(uint *)(param_1 + 0x2c) == 0) {
      local_f0 = 0;
      local_e4 = 0;
    }
    else {
      local_f0 = (ulong)*(uint *)(param_1 + 0x2c) + local_110;
      local_e8 = *(undefined4 *)(param_1 + 0x38);
      local_e4 = *(undefined4 *)(param_1 + 0x3c);
    }
    if ((ulong)*(uint *)(param_1 + 0x24) == 0) {
      local_e0 = 0;
      local_d8 = 0;
      local_d4 = 0;
    }
    else {
      local_e0 = local_110 + (ulong)*(uint *)(param_1 + 0x24);
      local_d8 = *(undefined4 *)(param_1 + 0x28);
      local_d4 = local_104;
    }
    if ((param_5 & 1) == 0) {
      if (param_8 == 0) {
        uVar6 = 0;
        goto LAB_0006ee46;
      }
      local_b0 = 0;
      if (param_8 != 0) {
        for (; (param_8 >> local_b0 & 1) == 0; local_b0 = local_b0 + 1) {
        }
      }
      local_ac = 0x1f;
      if (param_8 != 0) {
        for (; param_8 >> local_ac == 0; local_ac = local_ac - 1) {
        }
      }
      local_a8 = (uint)param_6;
      local_a4 = (uint)param_7;
    }
    else {
      local_b0 = 0;
      local_ac = *(int *)(param_1 + 0x98) - 1;
      local_a8 = 0;
      local_a4 = *(int *)(param_1 + 0x94) - 1;
    }
    AddDstResourceEvents((IGVector<> *)&local_88,(long)this);
    pIVar3 = (IGAccelResource *)IOAccelResource2::getStorageResource();
    if (pIVar3 != this) {
      AddDstResourceEvents((IGVector<> *)&local_88,(long)pIVar3);
    }
    if ((lVar5 != 0) &&
       ((local_88 != local_80 ||
        (uVar4 = IGVector<>::grow((IGVector<> *)&local_88,local_88 * 2), (char)uVar4 != '\0')))) {
      *(long *)(local_78 + local_88 * 8) = lVar5;
      local_88 = local_88 + 1;
    }
    pIVar2 = local_50;
    local_9c = *(uint *)(param_1 + 0x10);
    if ((int)local_9c < 0xd9) {
      if (local_9c - 0x88 < 2) {
        local_9c = 0;
      }
      else if (local_9c == 0xd8) {
        local_9c = 1;
      }
    }
    else if (local_9c - 0xd9 < 3) {
      local_9c = 3;
    }
    else if (local_9c == 0x10a) {
      local_9c = 5;
    }
    local_128 = local_40 + 0xf36;
    local_120 = param_1 + 0x58;
    local_cc = *(uint *)(param_1 + 0x8c);
    local_c8 = *(uint *)(param_1 + 0x90);
    local_c4 = *(undefined4 *)(param_1 + 0x94);
    local_d0 = local_31;
    local_cd = (undefined1)(param_5 >> 0x18);
    local_cf = (undefined2)(param_5 >> 8);
    if (param_9 == (int *)0x0) {
      local_b8 = local_cc >> ((byte)local_b0 & 0x1f);
      local_b4 = local_c8 >> ((byte)local_b0 & 0x1f);
      local_c0 = 0;
      local_bc = 0;
    }
    else {
      local_c0 = *param_9;
      local_bc = param_9[1];
      local_b8 = param_9[2] - local_c0;
      local_b4 = param_9[3] - local_bc;
    }
    local_a0 = *(undefined4 *)(param_1 + 0x9c);
    local_98 = (uint)*(ushort *)(param_1 + 0x16);
    local_90 = ((byte)local_40[0x11b8] & 1) << 4 |
               (byte)*(ushort *)(param_1 + 0x56) >> 2 & 1 |
               ((local_9c & 0xfffffffe) == 2) * '\x02' |
               local_90 & 0xe0 | ((~*(byte *)(param_1 + 0xa1) & 3) == 0) << 2 | 8;
    uVar7 = (undefined7)((ulong)lVar5 >> 8);
    local_94 = local_98;
    if ((*(ushort *)(param_1 + 0x56) & 4) == 0) {
      IntelAccelerator::submitDepthResolve(local_40,(long *)&local_128,local_50);
      uVar6 = CONCAT71(uVar7,1);
    }
    else {
      uVar10 = local_b0 & 0xff;
      uVar6 = CONCAT71(uVar7,1);
      uVar8 = local_ac & 0xff;
      if ((local_b0 & 0xff) <= uVar8) {
        uVar9 = (local_a4 - local_a8) + 1;
        do {
          local_a8 = local_a8 >> 1;
          local_a4 = local_a8 + (uVar9 & 0xffff);
          local_b0 = uVar10;
          local_ac = uVar10;
          IntelAccelerator::submitDepthResolve(local_40,(long *)&local_128,pIVar2);
          uVar9 = (uVar9 & 0xffff) + 1 >> 1;
          uVar10 = uVar10 + 1 & 0xff;
        } while (uVar10 <= uVar8);
      }
    }
  }
LAB_0006ee46:
  if (local_60 != 0) {
    lVar5 = local_68 * 8;
    if (lVar5 < 0) {
      lVar5 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_68) {
      lVar5 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_60,lVar5);
  }
  if (local_78 != 0) {
    lVar5 = local_80 * 8;
    if (lVar5 < 0) {
      lVar5 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_80) {
      lVar5 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_78,lVar5);
  }
LAB_0006eeb8:
  return uVar6 & 0xffffffff;
}



// IGAccelResource::pageoff(IOAccelEvent*, bool, bool*, unsigned long long)

void __thiscall
IGAccelResource::pageoff
          (undefined8 param_1,ulong param_2,ulong param_3_00,ulong param_4_00,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,ulong param_10,
          undefined8 param_11,undefined1 *param_12,ulong param_13,dword *param_14)

{
  uint *puVar1;
  byte *pbVar2;
  ushort *puVar3;
  ushort uVar4;
  byte bVar5;
  uint uVar6;
  uint uVar7;
  IGAccelTask *pIVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  long lVar11;
  int iVar12;
  ulong uVar13;
  long lVar14;
  byte bVar15;
  uint uVar16;
  uint uVar17;
  ushort uVar18;
  ulong uVar20;
  long *plVar21;
  long *plVar22;
  byte bVar23;
  int iVar24;
  uintptr_t arg4;
  ushort uVar25;
  ushort uVar26;
  uint uVar27;
  long lVar28;
  ushort uVar29;
  dword *pdVar30;
  float extraout_XMM0_Da;
  float extraout_XMM0_Da_00;
  float extraout_XMM0_Da_01;
  float fVar31;
  float extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar32;
  undefined4 extraout_XMM0_Db_02;
  float fVar33;
  long local_210;
  undefined8 local_208;
  undefined8 local_200;
  undefined8 local_1f8;
  undefined8 local_1f0;
  undefined8 local_1e8;
  undefined8 local_1e0;
  undefined8 local_1d8;
  void *local_1d0;
  long local_1c8;
  uint5 local_1c0;
  undefined3 uStack_1bb;
  undefined2 uStack_1ba;
  undefined8 local_1b8;
  undefined8 local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  undefined8 local_188;
  undefined8 local_180;
  undefined8 local_178;
  byte local_170;
  uint local_16e;
  undefined4 local_168;
  undefined8 local_160;
  undefined1 local_158;
  ulong local_150;
  ulong local_148;
  long local_140;
  ulong local_138;
  ulong local_130;
  long local_128;
  ulong local_108;
  undefined8 local_100;
  undefined8 local_f8;
  undefined8 local_f0;
  undefined8 local_e8;
  undefined8 local_e0;
  long local_d8;
  undefined1 *local_d0;
  long local_c8;
  long local_c0;
  dword *local_b8;
  ulong local_b0;
  ulong local_a8;
  long *local_a0;
  long *local_98;
  ulong local_90;
  ulong local_88;
  long local_80;
  void *local_78;
  ulong local_70;
  undefined2 local_66;
  uint local_64;
  ulong local_60;
  IGAccelTask *local_58;
  long local_50;
  undefined1 *local_48;
  byte local_39;
  ulong local_38;
  ushort uVar19;
  
  uVar6 = _graphicsTracePointEnable;
  bVar15 = 0;
  local_d0 = param_12;
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    param_14 = (dword *)0x0;
    _kernel_debug(0x85a00055,(ulong)*(byte *)((long)this + 0x14),*(uintptr_t *)((long)this + 0xb8),
                  (ulong)*(ushort *)((long)this + 0xb0),(ulong)*(ushort *)((long)this + 0xb2),0);
  }
  if (*(char *)((long)this + 0xad) == '\0') {
    return;
  }
  pIVar8 = (IGAccelTask *)IOAccelResource2::getGPUTask();
  local_98 = (long *)IOAccelResource2::prepareBackingInTaskWithOption(this,(uint)pIVar8);
  if (local_98 == (long *)0x0) {
    if (_graphicsTracePointEnable == 0) {
      return;
    }
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return;
    }
    bVar15 = *(byte *)((long)this + 0x14);
    arg4 = 1;
LAB_0006f26c:
    _kernel_debug(0x85a00056,(ulong)bVar15,0,0,arg4,0);
    return;
  }
  local_a0 = (long *)IOAccelResource2::prepareInTaskWithOption(this,(uint)pIVar8);
  plVar21 = local_98;
  if (local_a0 == (long *)0x0) {
    (**(code **)(*local_98 + 0x140))(local_98);
    (**(code **)(*plVar21 + 0x28))(plVar21);
    if (_graphicsTracePointEnable == 0) {
      return;
    }
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) == 0) {
      return;
    }
    bVar15 = *(byte *)((long)this + 0x14);
    arg4 = 2;
    goto LAB_0006f26c;
  }
  local_64 = uVar6;
  puVar1 = (uint *)(*(long *)((long)this + 0x18) + 0xeb8);
  *puVar1 = *puVar1 | 0x40000000;
  local_70 = param_13;
  local_58 = pIVar8;
  local_38 = param_10;
  local_a8 = (**(code **)(*local_98 + 0x128))();
  local_c8 = *(long *)((long)this + 0xe0);
  local_50 = IOAccelResource2::getStorageResource();
  uVar20 = local_38;
  pIVar8 = local_58;
  bVar5 = *(byte *)(local_50 + 0x220);
  local_78 = this;
  if (((((1 < bVar5) && (*(int *)(local_50 + 0x1c0) != 0)) ||
       ((*(int *)(local_50 + 0x19c) != 0 && ((*(byte *)(local_50 + 0x221) & 1) != 0)))) ||
      (*(int *)(local_50 + 0x1ac) != 0)) &&
     (local_48 = (undefined1 *)(ulong)*(byte *)((long)this + 0xac), local_48 != (undefined1 *)0x0))
  {
    local_b8 = (dword *)CONCAT71(local_b8._1_7_,bVar5);
    local_b0 = local_50 + 0x180;
    local_60 = (ulong)*(byte *)((long)this + 0xae);
    param_14 = (dword *)0x0;
    uVar25 = 0;
    uVar19 = 0;
    uVar18 = 0;
    uVar29 = 0;
    uVar26 = 0;
    do {
      if (*(byte *)((long)this + 0xad) == 0) {
        uVar18 = uVar19;
        if (uVar29 == 0) {
          uVar19 = uVar25 + 1;
          uVar18 = uVar25 + 1;
        }
LAB_0006f0f5:
        uVar4 = uVar26;
      }
      else {
        uVar6 = 0;
        uVar13 = local_60;
        do {
          uVar16 = 1 << ((byte)uVar13 & 0x1f);
          if (((uint)*(ushort *)(*(long *)((long)this + 0x30) + 0xc + (long)param_14 * 2) &
               ~(uint)*(ushort *)(*(long *)((long)this + 0x30) + (long)param_14 * 2) &
              (uint)(1L << ((byte)uVar13 & 0x3f))) == 0) {
            uVar16 = 0;
          }
          uVar6 = uVar6 | uVar16;
          uVar13 = uVar13 + 1;
        } while (uVar13 < *(byte *)((long)this + 0xad) + local_60);
        uVar29 = uVar29 | (ushort)uVar6;
        if (uVar29 == 0) {
          uVar18 = uVar25 + 1;
          uVar19 = uVar25 + 1;
        }
        uVar4 = uVar25;
        if ((ushort)uVar6 == 0) goto LAB_0006f0f5;
      }
      param_14 = (dword *)((long)param_14 + 1);
      uVar25 = uVar25 + 1;
      uVar26 = uVar4;
    } while (param_14 != (dword *)local_48);
    if (1 < *(uint *)(local_50 + 0x214)) {
      uVar18 = 0;
      uVar4 = (short)*(uint *)(local_50 + 0x214) - 1;
    }
    if (uVar29 != 0) {
      local_60 = *(ulong *)((long)this + 0x40);
      if (local_60 == 0) {
        *(long **)((long)this + 0x40) = local_a0;
      }
      if (bVar5 < 2) {
        param_14 = (dword *)(ulong)((*(byte *)(local_50 + 0x221) & 1) * 0x10 +
                                    (uint)(*(int *)(local_50 + 0x1ac) != 0) * 4 + 0x28);
        submitDepthResolve(this,local_b0,*(IntelAccelerator **)((long)this + 0x18),local_58,0,
                           (ulong)param_14,uVar18,uVar4,uVar29,(int *)0x0);
        *(byte *)(local_50 + 0x221) = *(byte *)(local_50 + 0x221) & 0xfc;
        if (uVar18 <= uVar4) {
          lVar14 = *(long *)(local_50 + 0x1d8);
          lVar11 = *(long *)(local_50 + 0x1e0);
          do {
            puVar3 = (ushort *)(lVar14 + (ulong)uVar18 * 2);
            *puVar3 = *puVar3 & ~uVar29;
            puVar3 = (ushort *)(lVar11 + (ulong)uVar18 * 2);
            *puVar3 = *puVar3 & ~uVar29;
            uVar18 = uVar18 + 1;
          } while (uVar18 <= uVar4);
        }
        lVar14 = IGAccelTask::getDepthResolveContext(local_58,'\x01');
        (**(code **)(**(long **)(lVar14 + 0xb0) + 0x140))(*(long **)(lVar14 + 0xb0),local_38);
        this = local_78;
      }
      else {
        if (uVar18 <= uVar4) {
          local_48 = (undefined1 *)(ulong)uVar29;
          do {
            param_14 = (dword *)((long)&MACH_HEADER.magic + 3);
            submitCCSResolve(this,local_b0,*(IntelAccelerator **)((long)this + 0x18),pIVar8,uVar20,3
                             ,(uint)uVar18,(ushort)local_48,(IGAccelResource *)0x0);
            uVar18 = uVar18 + 1;
          } while (uVar18 <= uVar4);
        }
        *(undefined1 *)(local_50 + 0x220) = 1;
        *(byte *)(local_50 + 0x221) = *(byte *)(local_50 + 0x221) & 0xfb;
      }
      *(ulong *)((long)this + 0x40) = local_60;
    }
  }
  local_c0 = *(long *)((long)this + 0xf8);
  ___bzero(&local_210,0x138);
  IGVector<>::grow((IGVector<> *)&local_150,4);
  local_138 = 0;
  local_130 = 0;
  local_128 = 0;
  IGVector<>::grow((IGVector<> *)&local_138,4);
  local_210 = 0;
  local_208 = 0;
  local_200 = 0;
  local_1f8 = 0;
  local_1f0 = 0;
  local_1e8 = 0;
  local_1e0 = 0;
  local_1d0 = (void *)0x0;
  local_1d8 = 0x100000000;
  local_1c8 = 0;
  _local_1c0 = 0;
  local_1b8 = 0;
  local_1b0 = 0;
  local_1a8 = 0;
  local_1a0 = 0;
  local_198 = 0;
  local_188 = 0;
  local_190 = 0x100000000;
  local_180 = 0;
  local_178 = 0;
  local_16e = 0;
  local_170 = 0;
  local_168 = 0;
  local_160 = 0;
  local_158 = 0;
  local_150 = 0;
  local_138 = 0;
  local_108 = 0;
  local_100 = 0;
  local_f8 = 0;
  local_f0 = 0;
  local_e8 = 0;
  local_e0 = 0;
  if (local_64 != 0) {
    local_108 = local_70;
  }
  lVar14 = *(long *)((long)this + 0x38);
  if (local_148 == 0) {
    uVar10 = IGVector<>::grow((IGVector<> *)&local_150,0);
    if ((char)uVar10 == '\0') goto LAB_0006f49a;
  }
  else {
    local_150 = 0;
  }
  *(long *)(local_140 + local_150 * 8) = lVar14 + 0xc0;
  local_150 = local_150 + 1;
LAB_0006f49a:
  uVar20 = local_38;
  uVar10 = *(undefined8 *)((long)this + 0x38);
  if ((local_150 != local_148) ||
     (uVar9 = IGVector<>::grow((IGVector<> *)&local_150,local_150 * 2), (char)uVar9 != '\0')) {
    *(undefined8 *)(local_140 + local_150 * 8) = uVar10;
    local_150 = local_150 + 1;
  }
  uVar13 = local_150;
  if ((local_150 != local_148) ||
     (uVar10 = IGVector<>::grow((IGVector<> *)&local_150,local_150 * 2), uVar13 = local_150,
     (char)uVar10 != '\0')) {
    local_150 = uVar13 + 1;
    *(ulong *)(local_140 + uVar13 * 8) = uVar20;
  }
  pIVar8 = local_58;
  if ((local_138 != local_130) ||
     (uVar10 = IGVector<>::grow((IGVector<> *)&local_138,local_138 * 2), (char)uVar10 != '\0')) {
    *(long **)(local_128 + local_138 * 8) = local_a0 + 7;
    local_138 = local_138 + 1;
  }
  if ((local_138 != local_130) ||
     (uVar10 = IGVector<>::grow((IGVector<> *)&local_138,local_138 * 2), (char)uVar10 != '\0')) {
    *(long **)(local_128 + local_138 * 8) = local_98 + 7;
    local_138 = local_138 + 1;
  }
  uVar13 = local_138;
  if ((local_138 != local_130) ||
     (uVar10 = IGVector<>::grow((IGVector<> *)&local_138,local_138 * 2), uVar13 = local_138,
     (char)uVar10 != '\0')) {
    local_138 = uVar13 + 1;
    *(ulong *)(local_128 + uVar13 * 8) = uVar20;
  }
  local_16e = local_16e & 0xffffffe7;
  local_170 = *(byte *)(*(long *)((long)this + 0x260) + 0x1a);
  local_208._0_6_ = CONCAT15(1,CONCAT14(*(undefined1 *)(local_50 + 0x194),(uint)local_208));
  local_200._4_4_ = (uint)*(ushort *)((long)this + 0xb0);
  local_200 = CONCAT44(local_200._4_4_,0x23);
  local_208 = CONCAT26(*(undefined2 *)(local_50 + 400),(undefined6)local_208);
  local_1d0 = this;
  local_1f8 = CONCAT44(local_1f8._4_4_,*(int *)(local_50 + 0x18c) * *(int *)(local_50 + 0x214) * 4);
  plVar21 = &local_210;
  plVar22 = &local_1c8;
  for (lVar14 = 9; lVar14 != 0; lVar14 = lVar14 + -1) {
    *plVar22 = *plVar21;
    plVar21 = plVar21 + (ulong)bVar15 * -2 + 1;
    plVar22 = plVar22 + (ulong)bVar15 * -2 + 1;
  }
  local_1b8 = CONCAT44(local_1b8._4_4_,5);
  local_1c0 = (uint5)(uint)local_1c0;
  local_80 = 0;
  local_88 = 0;
  local_90 = 0;
  IGVector<>::grow((IGVector<> *)&local_90,4);
  bVar15 = *(byte *)((long)this + 0xae);
  if ((*(byte *)(local_50 + 0x1d6) & 0xc0) == 0) {
    bVar15 = (bVar15 + *(char *)((long)this + 0xad)) - 1;
  }
  bVar5 = *(byte *)((long)this + 0xac);
  fVar31 = extraout_XMM0_Da;
  uVar32 = extraout_XMM0_Db;
  if (bVar5 != 0) {
    local_66 = local_208._6_2_;
    local_c0 = local_c0 + local_a8;
    local_70 = 0;
    lVar14 = local_50;
    local_39 = bVar15;
    do {
      bVar23 = *(byte *)((long)this + 0xae);
      if (bVar23 <= bVar15) {
        do {
          local_a8 = (ulong)bVar23;
          param_14 = *(dword **)((long)this + 0x260);
          lVar11 = *(byte *)((long)this + 0xad) * local_70 + local_a8;
          local_d8 = lVar11 * 5;
          uVar18 = (ushort)param_14[lVar11 * 10 + 4];
          local_38 = (ulong)uVar18;
          uVar26 = *(ushort *)((long)param_14 + lVar11 * 0x28 + 0x12);
          local_48 = (undefined1 *)(ulong)uVar26;
          uVar16 = (uint)uVar26;
          uVar6 = (uint)uVar26;
          uVar19 = *(ushort *)(lVar14 + 0x196);
          if (1 < uVar19) {
            uVar27 = (uint)uVar26;
            if ((*(ushort *)(lVar14 + 0x1d6) & 0x30) == 0) {
              local_38 = (ulong)(uVar18 + 3 & 0xfffffffc);
              local_48 = (undefined1 *)(ulong)((uVar27 + 3 & 0xfffffffc) * (uint)uVar19);
            }
            else {
              uVar7 = (uint)uVar19;
              uVar17 = uVar19 - 2 >> 1 | uVar7 << 0x1f;
              if (*(short *)(lVar14 + 0x194) == 7) {
                iVar12 = 0x10;
              }
              else if (*(short *)(lVar14 + 0x194) == 0xb) {
                iVar12 = 0x40;
              }
              else {
                iVar12 = (uint)((*(ushort *)(lVar14 + 0x1d6) & 0x10) == 0) * 4 + 4;
              }
              if (uVar17 < 2) {
                uVar17 = (uint)uVar18;
                if (uVar17 < 2) {
                  uVar17 = 1;
                }
                uVar17 = uVar17 * 2 + 2 & 0xfffffffc;
LAB_0006f7cf:
                local_38 = (ulong)uVar17;
              }
              else if ((uVar17 == 3) || (uVar17 == 7)) {
                uVar17 = (uint)uVar18;
                if (uVar17 < 2) {
                  uVar17 = 1;
                }
                uVar17 = uVar17 * 4 + 4 & 0xfffffff8;
                goto LAB_0006f7cf;
              }
              if (uVar19 == 4) {
LAB_0006f7ea:
                uVar6 = (uint)uVar26;
                if (uVar27 < 2) {
                  uVar6 = 1;
                }
                uVar16 = uVar6 * 2 + 2 & 0xfffffffc;
              }
              else if (uVar7 == 0x10) {
                if (uVar27 < 2) {
                  uVar6 = 1;
                }
                uVar16 = uVar6 * 4 + 4 & 0xfffffff8;
              }
              else if (uVar7 == 8) goto LAB_0006f7ea;
              local_38 = (ulong)(((int)local_38 + iVar12) - 1U & -iVar12);
              local_48 = (undefined1 *)(ulong)(uVar16 + iVar12 + -1 & -iVar12);
            }
          }
          pdVar30 = param_14 + lVar11 * 10;
          lVar11 = *(long *)(pdVar30 + 8);
          uVar18 = *(ushort *)((long)pdVar30 + 0x1a);
          local_b8 = param_14;
          lVar14 = (**(code **)(*local_a0 + 0x128))();
          lVar14 = (ulong)pdVar30[1] + lVar14;
          lVar28 = (ulong)*pdVar30 + local_c0;
          bVar15 = (byte)uVar18;
          bVar5 = ~bVar15 & 1;
          if ((uVar18 & 3) == 0) {
            bVar5 = 2;
          }
          local_64 = (uint)(uVar18 >> bVar5);
          uVar6 = pdVar30[2];
          uVar16 = pdVar30[3];
          fVar31 = extraout_XMM0_Da_00;
          uVar32 = extraout_XMM0_Db_00;
          if ((((((uint)local_208 != uVar16) || ((uint)local_1c0 != uVar6)) || (local_210 != lVar14)
               ) || ((local_1c8 != lVar28 || (uVar18 != local_170)))) ||
             ((local_c8 != 0 &&
              ((local_200._4_4_ != (int)local_38 || ((int)local_1f8 != (int)local_48)))))) {
            if (local_90 != 0) {
              local_60 = CONCAT44(local_60._4_4_,uVar6);
              IntelAccelerator::submitBlit
                        (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3_00,
                         param_4_00,param_5,param_6,param_7,param_8,
                         *(IntelAccelerator **)((long)local_78 + 0x18),&local_210,&local_90,local_58
                         ,0,(char *)param_14);
              local_90 = 0;
              fVar31 = extraout_XMM0_Da_01;
              uVar32 = extraout_XMM0_Db_01;
              uVar6 = (uint)local_60;
            }
            local_208 = CONCAT44(local_208._4_4_,uVar16);
            _local_1c0 = CONCAT44(stack0xfffffffffffffe44,uVar6);
            local_208 = CONCAT26(local_66,(undefined6)local_208);
            _local_1c0 = CONCAT26(local_66,_local_1c0);
            local_210 = lVar14;
            local_1c8 = lVar28;
            local_170 = bVar15;
            if (local_c8 != 0) {
              iVar12 = (int)local_38;
              iVar24 = (int)local_48;
              if ((local_200._4_4_ != iVar12) || ((int)local_1f8 != iVar24)) {
                local_200 = CONCAT44(iVar12,(undefined4)local_200);
                local_1f8 = CONCAT44(local_1f8._4_4_,iVar24);
                local_1b8 = CONCAT44(iVar12,(undefined4)local_1b8);
                local_1b0 = CONCAT44(local_1b0._4_4_,iVar24);
              }
            }
          }
          lVar14 = local_50;
          if (((uint)(1L << ((byte)local_a8 & 0x3f)) &
               ~(uint)*(ushort *)(*(long *)((long)local_78 + 0x30) + local_70 * 2) &
              (uint)*(ushort *)(*(long *)((long)local_78 + 0x30) + 0xc + local_70 * 2)) != 0) {
            local_1e8 = local_1e8 & 0xffffffff;
            local_1a0 = local_1a0 & 0xffffffff;
            if ((short)local_b8[local_d8 * 2 + 6] != 0) {
              local_60 = CONCAT44(local_60._4_4_,(float)(local_38 & 0xffffffff));
              uVar32 = 0;
              fVar31 = (float)((ulong)local_48 & 0xffffffff);
              local_b0 = CONCAT44(local_b0._4_4_,fVar31);
              pdVar30 = local_b8 + local_d8 * 2 + 6;
              uVar20 = 0;
              local_48 = (undefined1 *)((ulong)local_48 & 0xffffffff00000000);
              do {
                if (lVar11 == 0) {
                  uVar16 = 0;
                  uVar6 = 0;
                }
                else {
                  uVar6 = *(uint *)(lVar11 + 4 + uVar20 * 8);
                  uVar16 = *(int *)(lVar11 + uVar20 * 8) - (int)local_48;
                  if ((((*(ushort *)(lVar14 + 0x1d6) & 3) == 1) && (*(short *)(lVar14 + 0x194) == 0)
                      ) && (0x7fff < ((int)local_38 + uVar16) * local_64)) {
                    if (local_90 != 0) {
                      IntelAccelerator::submitBlit
                                (CONCAT44(uVar32,fVar31),param_2,param_3_00,param_4_00,param_5,
                                 param_6,param_7,param_8,
                                 *(IntelAccelerator **)((long)local_78 + 0x18),&local_210,&local_90,
                                 local_58,0,(char *)param_14);
                      local_90 = 0;
                      lVar14 = local_50;
                    }
                    local_1e8 = CONCAT44((uint)local_208 * (int)uVar20,(undefined4)local_1e8);
                    local_1a0 = CONCAT44((uint)local_1c0 * (int)uVar20,(undefined4)local_1a0);
                    local_48 = (undefined1 *)CONCAT44(local_48._4_4_,uVar16);
                    uVar16 = 0;
                  }
                }
                if ((local_90 != local_88) ||
                   (uVar10 = IGVector<>::grow((IGVector<> *)&local_90,local_90 * 2),
                   lVar14 = local_50, fVar31 = extraout_XMM0_Da_02, uVar32 = extraout_XMM0_Db_02,
                   (char)uVar10 != '\0')) {
                  uVar32 = 0;
                  fVar31 = (float)uVar16;
                  fVar33 = (float)uVar6;
                  param_2 = (ulong)(uint)fVar33;
                  lVar28 = local_90 * 0x20;
                  *(float *)(local_80 + lVar28) = fVar31;
                  *(float *)(local_80 + 4 + lVar28) = fVar33;
                  param_3_00 = local_60 & 0xffffffff;
                  *(uint *)(local_80 + 8 + lVar28) = (uint)local_60;
                  param_4_00 = local_b0 & 0xffffffff;
                  *(undefined4 *)(local_80 + 0xc + lVar28) = (undefined4)local_b0;
                  *(float *)(local_80 + 0x10 + lVar28) = fVar31;
                  *(float *)(local_80 + 0x14 + lVar28) = fVar33;
                  *(uint *)(local_80 + 0x18 + lVar28) = (uint)local_60;
                  *(undefined4 *)(local_80 + 0x1c + lVar28) = (undefined4)local_b0;
                  local_90 = local_90 + 1;
                }
                uVar20 = uVar20 + 1;
              } while (uVar20 < (ushort)*pdVar30);
            }
          }
          bVar23 = (char)local_a8 + 1;
          this = local_78;
        } while (bVar23 <= local_39);
        bVar5 = *(byte *)((long)local_78 + 0xac);
        pIVar8 = local_58;
        bVar15 = local_39;
      }
      local_70 = local_70 + 1;
    } while (local_70 < bVar5);
  }
  IntelAccelerator::submitBlit
            (CONCAT44(uVar32,fVar31),param_2,param_3_00,param_4_00,param_5,param_6,param_7,param_8,
             *(IntelAccelerator **)((long)this + 0x18),&local_210,&local_90,pIVar8,0,
             (char *)param_14);
  plVar21 = local_a0;
  (**(code **)(*local_a0 + 0x140))(local_a0);
  (**(code **)(*plVar21 + 0x28))(plVar21);
  plVar21 = local_98;
  (**(code **)(*local_98 + 0x140))(local_98);
  (**(code **)(*plVar21 + 0x28))(plVar21);
  *local_d0 = 1;
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00056,(ulong)*(byte *)((long)this + 0x14),0,0,0,0);
  }
  if (*(long *)((long)this + 0x18) != 0) {
    pbVar2 = (byte *)(*(long *)((long)this + 0x18) + 0xebb);
    *pbVar2 = *pbVar2 & 0xbf;
    puVar1 = (uint *)(*(long *)((long)this + 0x18) + 0xebc);
    *puVar1 = *puVar1 & 0xfffffffe;
  }
  if (local_80 != 0) {
    lVar14 = local_88 << 5;
    if (lVar14 < 0) {
      lVar14 = -0x8000000000000000;
    }
    if (local_88 >> 0x3b != 0) {
      lVar14 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,local_80,lVar14);
  }
  if (local_128 != 0) {
    lVar14 = local_130 * 8;
    if (lVar14 < 0) {
      lVar14 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_130) {
      lVar14 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_128,lVar14);
  }
  if (local_140 != 0) {
    lVar14 = local_148 * 8;
    if (lVar14 < 0) {
      lVar14 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_148) {
      lVar14 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_140,lVar14);
  }
  return;
}



// IGAccelResource::submitCCSResolve(IGAccelResource::ResourceInfoEntry*, IntelAccelerator&,
// IGAccelTask*, IOAccelEvent*, EIntelCCSResolveType, unsigned int, unsigned short,
// IGAccelResource*)

ulong __thiscall
IGAccelResource::submitCCSResolve
          (IGAccelResource *this,long param_1,IntelAccelerator *param_2,IGAccelTask *param_3,
          long param_4,int param_5,uint param_6,ushort param_7,IGAccelResource *param_8)

{
  IGAccelResource IVar1;
  ushort uVar2;
  ushort uVar3;
  int iVar4;
  uint uVar5;
  IGAccelResource *pIVar6;
  long lVar7;
  undefined8 *puVar8;
  int iVar9;
  ulong uVar10;
  uint uVar11;
  uint uVar12;
  byte bVar13;
  uint uVar14;
  undefined8 unaff_R14;
  IntelAccelerator *local_158 [2];
  undefined4 local_148;
  undefined4 local_144;
  undefined4 local_140;
  undefined4 local_13c;
  undefined4 local_138;
  undefined4 local_134;
  long local_130;
  long local_128;
  long local_120;
  int local_118;
  uint local_114;
  char local_110;
  char local_10f;
  undefined1 local_10e;
  byte local_10d;
  int local_10c;
  byte local_108;
  IGVector<> local_100 [8];
  ulong local_f8;
  long local_f0;
  undefined8 local_e8;
  ulong local_e0;
  long local_d8;
  long local_d0;
  IGAccelTask *local_c8;
  long local_c0;
  IntelAccelerator *local_b8;
  long local_b0;
  ulong local_a8;
  undefined8 *local_a0;
  uint local_94;
  uint local_90;
  uint local_8c;
  IGAccelResource *local_88;
  int local_7c;
  long local_78 [8];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_d0 = param_4;
  if ((param_8 == (IGAccelResource *)0x0) && (*(int *)(param_1 + 0x40) == 0)) {
    _PE_enter_debugger("ccs resolve");
    uVar10 = 0;
    goto LAB_000702f8;
  }
  local_88 = this;
  if ((param_5 != 2) &&
     (uVar10 = CONCAT71((int7)((ulong)unaff_R14 >> 8),1),
     *(short *)(*(long *)(param_1 + 0x58) + (ulong)param_6 * 2) == 0)) goto LAB_000702f8;
  local_c8 = param_3;
  local_b8 = param_2;
  local_7c = param_5;
  ___bzero(local_158,0x88);
  IGVector<>::grow(local_100,4);
  uVar10 = 0;
  local_e8 = 0;
  local_e0 = 0;
  local_d8 = 0;
  IGVector<>::grow((IGVector<> *)&local_e8,4);
  pIVar6 = local_88;
  lVar7 = (**(code **)(**(long **)(local_88 + 0x40) + 0x130))();
  IVar1 = pIVar6[0x14];
  if (IVar1 == (IGAccelResource)0x0) {
LAB_0006fe31:
    uVar10 = *(ulong *)(pIVar6 + 0xf8);
  }
  else if (IVar1 == (IGAccelResource)0x82) {
    uVar10 = (ulong)*(uint *)(pIVar6 + 0xfc);
  }
  else if (IVar1 == (IGAccelResource)0x80) goto LAB_0006fe31;
  lVar7 = (ulong)*(uint *)(param_1 + 0x88) + uVar10 + lVar7;
  uVar10 = 0;
  if ((lVar7 != 0) && (*(int *)(param_1 + 8) != 0)) {
    if (param_8 == (IGAccelResource *)0x0) {
      local_120 = (ulong)*(uint *)(param_1 + 0x40) + lVar7;
      local_118 = *(int *)(param_1 + 0x44);
    }
    else {
      get_tex_data(param_8,&local_120,&local_118);
    }
    uVar10 = 0;
    if ((local_120 != 0) && (uVar10 = 0, local_118 != 0)) {
      local_a0 = (undefined8 *)0x0;
      local_a8 = 0;
      local_b0 = 0;
      local_c0 = lVar7;
      puVar8 = (undefined8 *)
               _IOMallocTypeVarImpl
                         (&IGIOMallocAllocatorPolicy<_blit_rect>::allocate(unsigned_long)::
                           kalloc_type_view_24,0x10);
      if (puVar8 != (undefined8 *)0x0) {
        local_a8 = 1;
        local_b0 = 1;
        local_a0 = puVar8;
      }
      if (param_7 == 0) {
        uVar10 = 0;
      }
      else {
        iVar9 = local_7c;
        if (local_7c == 3) {
          iVar9 = (uint)(*(char *)(param_1 + 0xa0) != '\x02') * 2 + 1;
        }
        uVar10 = 0;
        if (param_6 == 0) {
          local_94 = 0;
          local_90 = 0;
          uVar2 = *(ushort *)(param_1 + 0x14);
          local_8c = *(uint *)(param_1 + 0x10);
          uVar3 = *(ushort *)(param_1 + 0x56);
          local_7c = iVar9;
          GetSurfaceAlignmentUnits
                    (&local_94,&local_90,(ulong)local_8c,(uint)*(ushort *)(param_1 + 0x16),
                     (uint)uVar2,*(uint *)(param_1 + 0x98),(char)((uVar3 & 0x10) >> 4),
                     (char)((uVar3 & 0x20) >> 5),'\0','\0');
          pIVar6 = local_88;
          iVar9 = 0;
          if (local_94 != 0) {
            for (; (local_94 >> iVar9 & 1) == 0; iVar9 = iVar9 + 1) {
            }
          }
          iVar4 = 0;
          if (local_90 != 0) {
            for (; (local_90 >> iVar4 & 1) == 0; iVar4 = iVar4 + 1) {
            }
          }
          local_158[0] = local_b8 + 0xf36;
          local_130 = local_c0;
          local_13c = *(undefined4 *)(param_1 + 0x94);
          local_148 = 1;
          local_10c = local_7c;
          local_144 = *(undefined4 *)(param_1 + 0x8c);
          local_140 = *(undefined4 *)(param_1 + 0x90);
          local_138 = *(undefined4 *)(param_1 + 8);
          local_134 = *(undefined4 *)(param_1 + 0xc);
          local_114 = local_8c;
          local_10e = (undefined1)uVar2;
          local_110 = (char)iVar9 + -1;
          local_10f = (char)iVar4 + -1;
          local_108 = ((byte)local_b8[0x11b8] & 1) << 2 | local_108 & 0xf9 | (byte)uVar3 >> 4 & 2;
          if ((local_7c == 2) || ((*(byte *)(param_1 + 0xa1) & 4) != 0)) {
            local_128 = local_c0 + (ulong)*(uint *)(param_1 + 0x50);
            local_108 = local_108 | 1;
          }
          AddSrcEvents(local_100,(long)local_88);
          AddDstEvents(local_100,(long)pIVar6);
          if (((byte)pIVar6[0xf] & 0x10) != 0) {
            local_78[0] = *(long *)(pIVar6 + 0x90) + 0x40;
            if (*(long *)(pIVar6 + 0x90) == 0) {
              local_78[0] = 0;
            }
            IGVector<>::add(local_100,local_78);
          }
          if (param_4 != 0) {
            IGVector<>::add(local_100,&local_d0);
          }
          local_78[6] = 0;
          local_78[5] = 0;
          local_78[4] = 0;
          local_78[3] = 0;
          local_78[0] = 0x6000000080;
          local_78[1] = 0x2000000040;
          local_78[2] = 0x800000010;
          uVar14 = *(uint *)((long)local_78 + (ulong)(*(uint *)(param_1 + 0x10) >> 4 & 0x3c));
          uVar10 = (ulong)param_7;
          **(ushort **)(param_1 + 0x58) = **(ushort **)(param_1 + 0x58) & ~param_7;
          **(ushort **)(param_1 + 0x60) = **(ushort **)(param_1 + 0x60) & ~param_7;
          uVar14 = uVar14 >> 3 & 0x1f;
          bVar13 = 0;
          do {
            if ((((uint)uVar10 & 0xffff) >> (bVar13 & 0x1f) & 1) != 0) {
              uVar12 = *(uint *)(param_1 + 0x8c) >> (bVar13 & 0x1f);
              uVar5 = 0x200 / uVar14;
              uVar11 = *(uint *)(param_1 + 0x90) >> (bVar13 & 0x1f);
              *local_a0 = 0;
              *(float *)(local_a0 + 1) =
                   (float)((ulong)(-uVar5 & (uVar12 - 1) + uVar5 + (uint)(uVar12 == 0)) /
                          (ulong)(ushort)(0x100 / uVar14));
              *(float *)((long)local_a0 + 0xc) =
                   (float)(uVar11 + 0x3f + (uint)(uVar11 == 0) >> 5 & 0xfffffffe);
              local_10d = bVar13;
              IntelAccelerator::submitCCSResolve
                        (local_b8,local_88,(long)local_158,&local_b0,local_c8);
              uVar10 = (ulong)((uint)uVar10 ^ 1 << (bVar13 & 0x1f));
            }
            bVar13 = bVar13 + 1;
          } while ((short)uVar10 != 0);
          uVar10 = CONCAT71((int7)(uVar10 >> 8),1);
          puVar8 = local_a0;
        }
      }
      if (puVar8 != (undefined8 *)0x0) {
        lVar7 = local_a8 << 4;
        if (lVar7 < 0) {
          lVar7 = -0x8000000000000000;
        }
        if (local_a8 >> 0x3c != 0) {
          lVar7 = -0x8000000000000000;
        }
        _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<_blit_rect>::
                            deallocate(_blit_rect*,unsigned_long)::kalloc_type_view_29,puVar8,lVar7)
        ;
      }
    }
  }
  if (local_d8 != 0) {
    lVar7 = local_e0 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_e0) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_d8,lVar7);
  }
  if (local_f0 != 0) {
    lVar7 = local_f8 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_f8) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_f0,lVar7);
  }
LAB_000702f8:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return uVar10 & 0xffffffff;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelResource::copyResourcePrivate(IOAccelResourcePrivate*)

void IGAccelResource::copyResourcePrivate(void)

{
  return;
}



// IGAccelResource::getIOSurfacePlaneOffset(unsigned int)

undefined4 __thiscall IGAccelResource::getIOSurfacePlaneOffset(IGAccelResource *this,uint param_1)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if ((this[0x14] == (IGAccelResource)0xc0) && (uVar1 = 0, *(long *)(this + 0x260) != 0)) {
    uVar1 = *(undefined4 *)(*(long *)(this + 0x260) + 4 + (ulong)param_1 * 0x28);
  }
  return uVar1;
}



// IGAccelResource::get_tex_data(unsigned long long*, unsigned int*)

void __thiscall
IGAccelResource::get_tex_data(IGAccelResource *this,long *param_1,undefined4 *param_2)

{
  IGAccelResource IVar1;
  uint uVar2;
  undefined4 uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  
  IVar1 = this[0x14];
  if ((byte)IVar1 < 0x40) {
    if (IVar1 != (IGAccelResource)0x0) {
      if (IVar1 == (IGAccelResource)0x1) {
        if (*(long *)(this + 0xf0) == 0) goto LAB_000704f7;
        lVar4 = *(long *)(&DAT_000011c0 + (long)*(int *)(this + 0x100) * 8 + *(long *)(this + 0xf0))
        ;
        plVar7 = *(long **)(this + 0x40);
      }
      else {
        if (IVar1 != (IGAccelResource)0x4) {
          return;
        }
        plVar7 = *(long **)(this + 0x40);
        lVar4 = *(long *)(this + 0xe8);
      }
      lVar5 = (**(code **)(*plVar7 + 0x130))();
      IVar1 = this[0x14];
      if (IVar1 == (IGAccelResource)0x0) {
LAB_00070481:
        uVar6 = *(ulong *)(this + 0xf8);
      }
      else if (IVar1 == (IGAccelResource)0x82) {
        uVar6 = (ulong)*(uint *)(this + 0xfc);
      }
      else {
        if (IVar1 == (IGAccelResource)0x80) goto LAB_00070481;
        uVar6 = 0;
      }
      *param_1 = uVar6 + lVar5;
      uVar3 = *(undefined4 *)(lVar4 + 0xb8);
      goto LAB_00070552;
    }
LAB_000703fa:
    lVar4 = (**(code **)(**(long **)(this + 0x40) + 0x130))();
    IVar1 = this[0x14];
    if (IVar1 == (IGAccelResource)0x0) {
LAB_00070428:
      uVar6 = *(ulong *)(this + 0xf8);
    }
    else if (IVar1 == (IGAccelResource)0x82) {
      uVar6 = (ulong)*(uint *)(this + 0xfc);
    }
    else {
      if (IVar1 == (IGAccelResource)0x80) goto LAB_00070428;
      uVar6 = 0;
    }
    *param_1 = uVar6 + lVar4;
    uVar3 = *(undefined4 *)(this + 0xc0);
    goto LAB_00070552;
  }
  if ((byte)IVar1 < 0x82) {
    if (IVar1 != (IGAccelResource)0x40) {
      if (IVar1 != (IGAccelResource)0x80) {
        return;
      }
      goto LAB_000703fa;
    }
  }
  else {
    if (IVar1 == (IGAccelResource)0x82) {
      lVar4 = OSMetaClassBase::safeMetaCast
                        (*(OSMetaClassBase **)(this + 0xe0),(OSMetaClass *)&gMetaClass);
      if (((lVar4 != 0) && (lVar5 = *(long *)(lVar4 + 0x260), lVar5 != 0)) &&
         (uVar6 = (ulong)*(uint *)(this + 0xf8), uVar6 * 0x28 < (ulong)*(uint *)(lVar4 + 0x268))) {
        uVar2 = *(uint *)(lVar5 + 4 + uVar6 * 0x28);
        lVar4 = (**(code **)(**(long **)(this + 0x40) + 0x128))();
        *param_1 = lVar4 + (ulong)uVar2;
        uVar3 = *(undefined4 *)(lVar5 + 0xc + uVar6 * 0x28);
        goto LAB_00070552;
      }
LAB_000704f7:
      *param_1 = 0;
      uVar3 = 0x200;
      goto LAB_00070552;
    }
    if (IVar1 != (IGAccelResource)0xc0) {
      return;
    }
  }
  lVar4 = (**(code **)(**(long **)(this + 0x40) + 0x130))();
  IVar1 = this[0x14];
  if (IVar1 == (IGAccelResource)0x0) {
LAB_000703ee:
    uVar6 = *(ulong *)(this + 0xf8);
  }
  else if (IVar1 == (IGAccelResource)0x82) {
    uVar6 = (ulong)*(uint *)(this + 0xfc);
  }
  else {
    if (IVar1 == (IGAccelResource)0x80) goto LAB_000703ee;
    uVar6 = 0;
  }
  *param_1 = uVar6 + lVar4;
  uVar3 = *(undefined4 *)(this + 0xb8);
LAB_00070552:
  *param_2 = uVar3;
  return;
}



// IGAccelResource::get_modtex_info(int*, int*, unsigned int*, unsigned int*, unsigned int*,
// unsigned int*, unsigned int*)

ulong __thiscall
IGAccelResource::get_modtex_info
          (IGAccelResource *this,uint *param_1,uint *param_2,uint *param_3,undefined4 *param_4,
          uint *param_5,undefined4 *param_6,uint *param_7)

{
  IGAccelResource IVar1;
  uint uVar2;
  long lVar3;
  ulong uVar4;
  
  lVar3 = IOAccelResource2::getStorageResource();
  IVar1 = this[0x14];
  uVar4 = 0;
  if ((byte)IVar1 < 0x80) {
    if (IVar1 == (IGAccelResource)0x0) goto LAB_00070621;
    if (IVar1 == (IGAccelResource)0x4) {
      lVar3 = *(long *)(this + 0xe8);
      *param_1 = (uint)*(ushort *)(lVar3 + 0xb0);
      *param_2 = (uint)*(ushort *)(lVar3 + 0xb2);
      *param_5 = (uint)*(ushort *)(lVar3 + 0xd8);
      lVar3 = IOAccelResource2::getStorageResource();
      *param_4 = *(undefined4 *)(lVar3 + 400);
      lVar3 = IOAccelResource2::getStorageResource();
    }
    else {
      if (IVar1 != (IGAccelResource)0x40) goto LAB_000706c5;
LAB_0007065a:
      *param_5 = (uint)*(ushort *)(this + 0xd8);
      *param_4 = *(undefined4 *)(lVar3 + 400);
    }
    uVar2 = (uint)*(ushort *)(lVar3 + 0x194);
LAB_000706c1:
    *param_3 = uVar2;
  }
  else {
    if (IVar1 != (IGAccelResource)0x80) {
      if (IVar1 == (IGAccelResource)0xc0) goto LAB_0007065a;
      if (IVar1 != (IGAccelResource)0x82) goto LAB_000706c5;
      *param_1 = (uint)*(ushort *)(this + 0xb0);
      *param_2 = (uint)*(ushort *)(this + 0xb2);
      *param_4 = *(undefined4 *)(lVar3 + 400);
      *param_3 = (uint)*(ushort *)(lVar3 + 0x194);
      *param_5 = (uint)*(ushort *)(this + 0xd8);
      uVar2 = 0;
      *param_6 = 0;
      param_3 = param_7;
      goto LAB_000706c1;
    }
LAB_00070621:
    *param_1 = (uint)*(ushort *)(this + 0xb0);
    *param_2 = (uint)*(ushort *)(this + 0xb2);
    *param_5 = (uint)*(ushort *)(this + 0xd8);
    *param_3 = 0;
    *param_4 = *(undefined4 *)(lVar3 + 400);
  }
  uVar4 = CONCAT71((int7)((ulong)param_3 >> 8),1);
LAB_000706c5:
  return uVar4 & 0xffffffff;
}



// IGAccelResource::get_tex_info(unsigned int, unsigned int, unsigned int, int*, int*, unsigned
// int*, unsigned int*, unsigned int*, unsigned int*, unsigned int*)

ulong __thiscall
IGAccelResource::get_tex_info
          (IGAccelResource *this,uint param_1,uint param_2,uint param_3,uint *param_4,uint *param_5,
          uint *param_6,undefined4 *param_7,uint *param_8,undefined4 *param_9,undefined4 *param_10)

{
  IGAccelResource IVar1;
  long lVar2;
  long lVar3;
  undefined4 uVar4;
  long lVar5;
  IGAccelResource *pIVar6;
  ulong uVar7;
  uint uVar8;
  
  lVar5 = IOAccelResource2::getStorageResource();
  IVar1 = this[0x14];
  uVar7 = 0;
  if ((byte)IVar1 < 0x80) {
    if (IVar1 != (IGAccelResource)0x0) {
      if (IVar1 == (IGAccelResource)0x4) {
        lVar5 = *(long *)(this + 0xe8);
        *param_4 = (uint)*(ushort *)(lVar5 + 0xb0);
        *param_5 = (uint)*(ushort *)(lVar5 + 0xb2);
        *param_8 = (uint)*(ushort *)(lVar5 + 0xd8);
        lVar5 = IOAccelResource2::getStorageResource();
        *param_6 = (uint)*(ushort *)(lVar5 + 0x194);
        lVar5 = IOAccelResource2::getStorageResource();
        goto LAB_000708e2;
      }
      if (IVar1 != (IGAccelResource)0x40) goto LAB_000708f0;
    }
LAB_00070793:
    lVar2 = *(long *)(this + 0x260);
    if (lVar2 == 0) {
      *param_6 = 0;
      *param_4 = (uint)*(ushort *)(this + 0xb0);
      pIVar6 = this + 0xb2;
    }
    else {
      IVar1 = this[0xad];
      uVar8 = (byte)IVar1 - 1;
      if (IVar1 == (IGAccelResource)0x0) {
        uVar8 = 0;
      }
      if (param_2 < (byte)IVar1) {
        uVar8 = param_2;
      }
      uVar4 = 0;
      if ((byte)this[0xac] <= param_1) {
        param_1 = 0;
      }
      uVar7 = (ulong)(param_1 * (byte)IVar1 + uVar8);
      lVar3 = *(long *)(lVar2 + 0x20 + uVar7 * 0x28);
      if ((lVar3 == 0) || (*(ushort *)(lVar2 + 0x18 + uVar7 * 0x28) <= param_3)) {
        *param_9 = 0;
      }
      else {
        *param_9 = *(undefined4 *)(lVar3 + (ulong)param_3 * 8);
        uVar4 = *(undefined4 *)(lVar3 + 4 + (ulong)param_3 * 8);
      }
      *param_10 = uVar4;
      *param_6 = (uint)*(ushort *)(lVar5 + 0x194);
      lVar2 = lVar2 + uVar7 * 0x28;
      pIVar6 = (IGAccelResource *)(lVar2 + 0x12);
      *param_4 = (uint)*(ushort *)(lVar2 + 0x10);
    }
    *param_5 = (uint)*(ushort *)pIVar6;
    *param_8 = (uint)*(ushort *)(this + 0xd8);
LAB_000708e2:
    uVar4 = *(undefined4 *)(lVar5 + 400);
  }
  else {
    if (IVar1 == (IGAccelResource)0x80) {
      *param_4 = (uint)*(ushort *)(this + 0xb0);
      *param_5 = (uint)*(ushort *)(this + 0xb2);
      *param_8 = (uint)*(ushort *)(this + 0xd8);
      *param_6 = 0;
      goto LAB_000708e2;
    }
    if (IVar1 == (IGAccelResource)0xc0) goto LAB_00070793;
    if (IVar1 != (IGAccelResource)0x82) goto LAB_000708f0;
    *param_4 = (uint)*(ushort *)(this + 0xb0);
    *param_5 = (uint)*(ushort *)(this + 0xb2);
    *param_7 = *(undefined4 *)(lVar5 + 400);
    *param_6 = (uint)*(ushort *)(lVar5 + 0x194);
    *param_8 = (uint)*(ushort *)(this + 0xd8);
    uVar4 = 0;
    *param_9 = 0;
    param_7 = param_10;
  }
  *param_7 = uVar4;
  uVar7 = CONCAT71((int7)((ulong)param_7 >> 8),1);
LAB_000708f0:
  return uVar7 & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// GetCubeArrayWidthHeight(unsigned int*, unsigned int*, unsigned int, unsigned int, unsigned int,
// unsigned int, unsigned int, bool, bool, bool, bool)

void __cdecl
GetCubeArrayWidthHeight
          (uint *param_1,uint *param_2,int param_3,uint param_4,uint param_5,uint param_6,
          int param_7,byte param_8,char param_9)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  bool bVar10;
  uint local_3c;
  int local_38;
  int local_34;
  
  local_3c = 0;
  local_38 = 0;
  local_34 = param_3;
  if (((param_6 >> 9 & 1) == 0) &&
     ((0x1e < param_6 - 0x186 || ((0x781808ffU >> (param_6 - 0x186 & 0x1f) & 1) == 0)))) {
    GetSurfaceAlignmentUnits
              (&local_3c,&local_38,(ulong)param_6,param_5,param_7,param_4,param_8,param_9,'\0','\0')
    ;
    if (param_5 < 2) {
      uVar4 = *param_1;
LAB_000709c7:
      *param_1 = -local_3c & (uVar4 + local_3c) - 1;
      bVar10 = true;
      if ((param_6 >> 9 & 1) == 0) {
        if (param_6 - 0x186 < 0x1f) {
          bVar10 = (0x781808ffU >> (param_6 - 0x186 & 0x1f) & 1) != 0;
        }
        else {
          bVar10 = false;
        }
      }
      uVar4 = *param_2;
      iVar3 = local_38 + -1;
      uVar6 = -local_38;
      uVar7 = 0;
      if (param_4 < 2) {
        uVar8 = 0;
      }
      else {
        uVar8 = uVar4 >> 1;
        if (uVar4 < 2) {
          uVar8 = 1;
        }
        uVar8 = uVar8 + iVar3 & uVar6;
        if (param_4 != 2) {
          uVar7 = 0;
          uVar5 = 2;
          do {
            bVar1 = (byte)uVar5 & 0x1f;
            uVar2 = uVar4 >> bVar1;
            if (uVar4 >> bVar1 == 0) {
              uVar2 = 1;
            }
            uVar9 = uVar2 + 3 >> 2;
            if (!bVar10) {
              uVar9 = uVar2;
            }
            uVar7 = uVar7 + (uVar9 + iVar3 & uVar6);
            uVar5 = uVar5 + 1;
          } while (param_4 != uVar5);
        }
      }
      uVar5 = uVar4 + 3 >> 2;
      if (!bVar10) {
        uVar5 = uVar4;
      }
      if (uVar7 < uVar8) {
        uVar7 = uVar8;
      }
      *param_2 = ((uVar5 + iVar3 & uVar6) + iVar3 + uVar7 & uVar6) * local_34;
      if (param_4 < 2) {
        return;
      }
      if (local_3c < *param_1) {
        return;
      }
      *param_1 = local_3c * 2;
      return;
    }
  }
  else {
    GetSurfaceAlignmentUnits
              (&local_3c,&local_38,(ulong)param_6,param_5,param_7,param_4,param_8,param_9,'\0','\0')
    ;
    if (param_5 < 2) {
      uVar4 = *param_1 + 3 >> 2;
      goto LAB_000709c7;
    }
  }
  if ((param_8 == 0) && (param_9 == '\0')) {
    *param_1 = *param_1 + 3 & 0xfffffffc;
    uVar4 = (*param_2 + 3 & 0xfffffffc) * param_5;
    goto LAB_00070b8c;
  }
  uVar4 = param_5 - 2 >> 1 | param_5 << 0x1f;
  if (param_7 == 7) {
    iVar3 = 0x10;
  }
  else if (param_7 == 0xb) {
    iVar3 = 0x40;
  }
  else {
    iVar3 = (uint)(param_8 ^ 1) * 4 + 4;
  }
  uVar7 = *param_1;
  if (uVar4 < 2) {
    uVar4 = 1;
    if (1 < uVar7) {
      uVar4 = uVar7;
    }
    uVar7 = uVar4 * 2 + 2 & 0xfffffffc;
  }
  else if ((uVar4 == 3) || (uVar4 == 7)) {
    uVar4 = 1;
    if (1 < uVar7) {
      uVar4 = uVar7;
    }
    uVar7 = uVar4 * 4 + 4 & 0xfffffff8;
  }
  *param_1 = (uVar7 + iVar3) - 1 & -iVar3;
  uVar4 = *param_2;
  if (param_5 == 4) {
LAB_00070b5d:
    uVar7 = 1;
    if (1 < uVar4) {
      uVar7 = uVar4;
    }
    uVar4 = uVar7 * 2 + 2 & 0xfffffffc;
  }
  else if (param_5 == 0x10) {
    uVar7 = 1;
    if (1 < uVar4) {
      uVar7 = uVar4;
    }
    uVar4 = uVar7 * 4 + 4 & 0xfffffff8;
  }
  else if (param_5 == 8) goto LAB_00070b5d;
  uVar4 = uVar4 + iVar3 + -1 & -iVar3;
LAB_00070b8c:
  *param_2 = uVar4 * local_34;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelResource::initClientShared(IOAccelClientSharedRO*, IOAccelClientSharedRW*)

void __cdecl IGAccelResource::initClientShared(long param_1)

{
  undefined8 *puVar1;
  
  (**(code **)(__got::vtable + 0x158))();
  if (*(int *)(*(long *)(param_1 + 0x18) + 0xce0) != 0) {
    puVar1 = (undefined8 *)IOAccelResource2::getClientSharedROPrivate();
    *puVar1 = 0;
    puVar1[1] = 0;
    puVar1[2] = 0;
    puVar1[3] = 0;
    puVar1[4] = 0;
  }
  return;
}



// IGAccelResource::calculateIOSurfaceDeviceCacheVRAMBytes(unsigned long long*, unsigned long long*)

void __thiscall
IGAccelResource::calculateIOSurfaceDeviceCacheVRAMBytes
          (IGAccelResource *this,ulong *param_1,ulong *param_2)

{
  char *pcVar1;
  OSMetaClass *pOVar2;
  bool bVar3;
  char cVar4;
  undefined2 uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  long lVar16;
  OSMetaClassBase *pOVar17;
  long *plVar18;
  long *plVar19;
  long *plVar20;
  ulong *puVar21;
  ulong uVar22;
  byte bVar23;
  uint uVar24;
  IGAccelResource *extraout_RDX;
  IGAccelResource *extraout_RDX_00;
  ulong uVar25;
  undefined4 uVar27;
  ushort uVar28;
  uint uVar29;
  uint uVar30;
  int iVar31;
  int iVar32;
  int iVar33;
  long lVar34;
  ulong uVar35;
  undefined1 auVar36 [16];
  uint local_d0;
  uint local_cc;
  ulong local_b8;
  uint local_a0;
  uint local_8c;
  uint local_78 [16];
  long local_38;
  IGAccelResource *pIVar26;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  lVar34 = *(long *)(this + 0xe0);
  if ((lVar34 == 0) || (pcVar1 = *(char **)(lVar34 + 0x10), pcVar1 == (char *)0x0))
  goto LAB_00071919;
  uVar6 = IOSurface::getPlaneCount();
  uVar22 = 1;
  if (uVar6 != 0) {
    uVar22 = (ulong)uVar6;
  }
  *(int *)(this + 0x268) = (int)uVar22 * 0x28;
  lVar16 = _IOMallocTypeVarImpl
                     (&calculateIOSurfaceDeviceCacheVRAMBytes(unsigned_long_long*,unsigned_long_long*)
                       ::kalloc_type_view_1852,uVar22 * 0x28);
  *(long *)(this + 0x260) = lVar16;
  if (lVar16 == 0) goto LAB_00071919;
  this[0x1d6] = (IGAccelResource)((byte)this[0x1d6] | 2);
  pOVar17 = (OSMetaClassBase *)
            IOSurface::copyValue(pcVar1,*(uint **)__got::_kIOSurfaceCreationProperties);
  plVar18 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,*(OSMetaClass **)__got::metaClass);
  if (plVar18 == (long *)0x0) {
LAB_00070e0a:
    uVar27 = *(undefined4 *)(lVar34 + 0x54);
LAB_00070e0f:
    iVar7 = IOSurface::getPixelFormat();
    bVar3 = false;
    pIVar26 = extraout_RDX_00;
LAB_00070e29:
    local_d0 = (uint)(iVar7 == 0x52476841) * 4 + 0x80;
    local_cc = 0xc0;
    if (iVar7 == 0x6c313072) {
      local_cc = 0xd1;
    }
  }
  else {
    pOVar17 = (OSMetaClassBase *)
              (**(code **)(*plVar18 + 0x208))
                        (plVar18,*(undefined8 *)__got::_kIOSurfaceIsDisplayable);
    pOVar2 = *(OSMetaClass **)__got::metaClass;
    plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
    pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kIntelIsSharedTexture");
    plVar20 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
    if ((plVar19 != (long *)0x0) &&
       (cVar4 = (**(code **)(*plVar19 + 0x118))(plVar19), cVar4 != '\0')) {
      this[0x1d7] = (IGAccelResource)((byte)this[0x1d7] | 4);
    }
    if (plVar20 == (long *)0x0) goto LAB_00070e0a;
    cVar4 = (**(code **)(*plVar20 + 0x118))(plVar20);
    uVar27 = *(undefined4 *)(lVar34 + 0x54);
    if (cVar4 == '\0') goto LAB_00070e0f;
    pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kMetalTexturePixelFormat")
    ;
    auVar36 = OSMetaClassBase::safeMetaCast(pOVar17,*(OSMetaClass **)__got::metaClass);
    pIVar26 = auVar36._8_8_;
    plVar19 = auVar36._0_8_;
    if (plVar19 != (long *)0x0) {
      iVar7 = (**(code **)(*plVar19 + 0x148))(plVar19);
      bVar3 = true;
      pIVar26 = extraout_RDX;
      goto LAB_00070e29;
    }
    local_cc = 0xc0;
    bVar3 = true;
    local_d0 = 0x80;
  }
  pOVar2 = *(OSMetaClass **)__got::metaClass;
  lVar34 = 0x20;
  local_b8 = 0;
  local_8c = 0;
  uVar12 = 0;
  uVar13 = 0;
  do {
    if (bVar3) {
      pOVar17 = (OSMetaClassBase *)
                (**(code **)(*plVar18 + 0x208))(plVar18,"kIntelSysMemRowBytes",pIVar26);
      plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
      uVar9 = 0;
      uVar35 = 0;
      if (plVar19 != (long *)0x0) {
        uVar8 = (**(code **)(*plVar19 + 0x148))(plVar19);
        uVar35 = (ulong)uVar8;
      }
      pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kIntelSysMemSize");
      plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
      if (plVar19 != (long *)0x0) {
        uVar9 = (**(code **)(*plVar19 + 0x148))(plVar19);
      }
      uVar25 = 0;
      if (uVar6 == 0) {
        pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kMetalTextureWidth");
        auVar36 = OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
        uVar25 = auVar36._8_8_;
        plVar19 = auVar36._0_8_;
        iVar10 = 0;
        local_a0 = 0;
        uVar8 = 0;
        if (plVar19 != (long *)0x0) {
          local_a0 = (**(code **)(*plVar19 + 0x148))(plVar19);
          uVar25 = uVar35 % (ulong)local_a0;
          uVar8 = (uint)(uVar35 / local_a0);
        }
        pOVar17 = (OSMetaClassBase *)
                  (**(code **)(*plVar18 + 0x208))(plVar18,"kMetalTextureHeight",uVar25);
        plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
        if (plVar19 == (long *)0x0) {
          uVar11 = 0;
        }
        else {
          uVar11 = (**(code **)(*plVar19 + 0x148))(plVar19);
        }
LAB_000710aa:
        iVar7 = (int)uVar35;
        uVar30 = 1;
        goto LAB_000710b0;
      }
      iVar10 = 0;
LAB_00070fb0:
      iVar7 = (int)uVar35;
      uVar8 = (uint)uVar25;
      uVar30 = (uint)((uVar35 & 0xffffffff) / uVar25);
      uVar11 = (uint)((ulong)uVar9 / (uVar35 & 0xffffffff));
    }
    else {
      uVar11 = (uint)pcVar1;
      uVar30 = IOSurface::getPlaneElementWidth(uVar11);
      iVar10 = IOSurface::getPlaneOffset(uVar11);
      uVar35 = IOSurface::getPlaneBytesPerRow(uVar11);
      iVar7 = (int)uVar35;
      uVar8 = IOSurface::getPlaneBytesPerElement(uVar11);
      uVar25 = (ulong)uVar8;
      uVar9 = IOSurface::getPlaneSize(uVar11);
      if (uVar6 != 0) goto LAB_00070fb0;
      local_a0 = IOSurface::getPlaneWidth(uVar11);
      uVar11 = IOSurface::getPlaneHeight(uVar11);
      if (uVar30 == 0) goto LAB_000710aa;
LAB_000710b0:
      uVar30 = ((local_a0 + uVar30) - 1) / uVar30;
    }
    uVar24 = 1;
    if ((uVar8 & uVar8 - 1) == 0) {
      uVar24 = uVar8;
      uVar8 = 1;
    }
    switch(uVar27) {
    case 1:
      goto LAB_000710f6;
    case 2:
      iVar10 = iVar10 + iVar7;
LAB_000710f6:
      uVar11 = uVar11 >> 1;
      iVar7 = iVar7 * 2;
      break;
    case 3:
      uVar11 = uVar11 >> 1;
      break;
    case 4:
      uVar11 = uVar11 >> 1;
      iVar10 = iVar10 + iVar7 * uVar11;
    }
    uVar29 = 0x146;
    switch(uVar24 - 2 >> 1 | uVar24 << 0x1f) {
    case 0:
      uVar29 = 0x114;
      break;
    case 1:
      uVar29 = local_cc;
      break;
    case 3:
      uVar29 = local_d0;
      break;
    case 7:
      uVar29 = 0;
    }
    iVar33 = uVar30 * uVar8;
    if (local_b8 == 0) {
      if (((byte)this[0x1d7] & 4) != 0) {
        uVar8 = *(uint *)(*(long *)(this + 0x18) + 0x1470);
        *(short *)(this + 0x194) = (short)uVar8;
        *(uint *)(this + 0x108) =
             *(uint *)(this + 0x108) & 0xf7ffffff | (uint)((uVar8 & 0xffff) == 3) << 0x1b;
        goto LAB_00071207;
      }
      if (!bVar3) {
        *(undefined2 *)(this + 0x194) = 3;
switchD_00071334_caseD_3:
        iVar32 = 0x20;
        iVar31 = 0x80;
        goto switchD_00071334_caseD_2;
      }
      pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kIntelTileMode");
      plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
      if (plVar19 != (long *)0x0) {
        uVar5 = (**(code **)(*plVar19 + 0x148))(plVar19);
        *(undefined2 *)(this + 0x194) = uVar5;
      }
LAB_00071211:
      pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kIntelVidMemRowBytes");
      plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
      if (plVar19 != (long *)0x0) {
        uVar12 = (**(code **)(*plVar19 + 0x148))(plVar19);
        *(uint *)(this + 0x188) = uVar12;
      }
      pOVar17 = (OSMetaClassBase *)(**(code **)(*plVar18 + 0x208))(plVar18,"kIntelVidMemSize");
      plVar19 = (long *)OSMetaClassBase::safeMetaCast(pOVar17,pOVar2);
      if (plVar19 != (long *)0x0) {
        uVar13 = (**(code **)(*plVar19 + 0x148))(plVar19);
      }
    }
    else {
LAB_00071207:
      if (bVar3) goto LAB_00071211;
      uVar28 = *(ushort *)(this + 0x194);
      if (uVar28 == 0) {
        uVar12 = iVar33 * uVar24;
        *(uint *)(this + 0x188) = uVar12;
        uVar13 = uVar11;
      }
      else {
        local_78[0xc] = 0;
        local_78[0xd] = 0;
        local_78[8] = 0;
        local_78[9] = 0;
        local_78[10] = 0;
        local_78[0xb] = 0;
        local_78[6] = 0;
        local_78[7] = 0;
        local_78[0] = 0x80;
        local_78[1] = 0x60;
        local_78[2] = 0x40;
        local_78[3] = 0x20;
        local_78[4] = 0x10;
        local_78[5] = 8;
        if (uVar28 - 1 < 0xb) {
          uVar12 = uVar29 >> 6;
          uVar13 = local_78[uVar12] >> 3 & 0x1f;
          iVar32 = 8;
          iVar31 = 0x200;
          switch((uint)uVar28) {
          case 1:
            iVar31 = 0x40;
            iVar32 = 0x40;
            break;
          case 2:
            break;
          case 3:
            goto switchD_00071334_caseD_3;
          default:
            goto switchD_00071334_caseD_4;
          case 7:
            iVar31 = (uint)(4 < uVar13) * 0x80 + 0x80;
            iVar32 = 0x40;
            if (uVar13 < 2) {
              iVar31 = 0x40;
            }
            local_78[0xc] = 0;
            local_78[0xd] = 0;
            local_78[8] = 0;
            local_78[9] = 0;
            local_78[10] = 0;
            local_78[0xb] = 0;
            local_78[6] = 0;
            local_78[7] = 0;
            local_78[0] = 0x80;
            local_78[1] = 0x60;
            local_78[2] = 0x40;
            local_78[3] = 0x20;
            local_78[4] = 0x10;
            local_78[5] = 8;
            uVar12 = local_78[uVar12] >> 3 & 0x1f;
            if (1 < uVar12) {
              iVar32 = (uint)(uVar12 < 5) * 0x10 + 0x10;
            }
            break;
          case 0xb:
            iVar31 = (uint)(4 < uVar13) * 0x200 + 0x200;
            iVar32 = 0x100;
            if (uVar13 < 2) {
              iVar31 = 0x100;
            }
            local_78[0xc] = 0;
            local_78[0xd] = 0;
            local_78[8] = 0;
            local_78[9] = 0;
            local_78[10] = 0;
            local_78[0xb] = 0;
            local_78[6] = 0;
            local_78[7] = 0;
            local_78[0] = 0x80;
            local_78[1] = 0x60;
            local_78[2] = 0x40;
            local_78[3] = 0x20;
            local_78[4] = 0x10;
            local_78[5] = 8;
            uVar12 = local_78[uVar12] >> 3 & 0x1f;
            if (1 < uVar12) {
              iVar32 = (uint)(uVar12 < 5) * 0x40 + 0x40;
            }
          }
        }
        else {
switchD_00071334_caseD_4:
          iVar31 = 1;
          iVar32 = 1;
        }
switchD_00071334_caseD_2:
        uVar12 = -iVar31 & (iVar7 + iVar31) - 1U;
        *(uint *)(this + 0x188) = uVar12;
        uVar13 = -iVar32 & (uVar11 + iVar32) - 1;
      }
      uVar13 = uVar13 * uVar12;
    }
    uVar28 = *(ushort *)(this + 0x194);
    uVar8 = 1;
    uVar30 = 1;
    switch(uVar28) {
    case 0:
      *(undefined4 *)(this + 600) = 0;
      uVar8 = 0;
      pIVar26 = (IGAccelResource *)&switchD_00071510::switchdataD_000719bc;
      goto LAB_00071604;
    case 1:
      uVar8 = 0x40;
      uVar30 = 0x40;
      break;
    case 2:
      uVar30 = 8;
      uVar8 = 0x200;
      break;
    case 3:
      uVar30 = 0x20;
      uVar8 = 0x80;
      break;
    case 4:
    case 5:
    case 6:
    case 8:
    case 9:
    case 10:
      break;
    case 7:
      uVar8 = 0x40;
      uVar30 = 0x40;
      if (1 < uVar24) {
        uVar8 = (uint)(uVar24 >= 5) * 0x80 + 0x80;
        uVar30 = (uint)(uVar24 < 5) * 0x10 + 0x10;
      }
      break;
    case 0xb:
      uVar8 = 0x100;
      uVar30 = 0x100;
      if (1 < uVar24) {
        uVar8 = (uint)(uVar24 >= 5) * 0x200 + 0x200;
        uVar30 = (uint)(uVar24 < 5) * 0x40 + 0x40;
      }
      break;
    default:
      uVar30 = 1;
    }
    uVar8 = (-uVar8 & (iVar33 * uVar24 + uVar8) - 1) / uVar8;
    *(uint *)(this + 600) = uVar8;
    uVar14 = -uVar30 & (uVar11 + uVar30) - 1;
    uVar15 = uVar14 / uVar30;
    pIVar26 = (IGAccelResource *)((ulong)uVar14 % (ulong)uVar30);
    *(uint *)(this + 0x25c) = uVar15;
    if (uVar28 == 1) {
      *(uint *)(this + 600) = uVar8 * 2;
      uVar8 = uVar15 + 1 >> 1;
      pIVar26 = this;
LAB_00071604:
      *(uint *)(this + 0x25c) = uVar8;
    }
    lVar16 = *(long *)(this + 0x18);
    if ((((((*(char *)(lVar16 + 0xf34) != '\0') && (((&DAT_000011c2)[lVar16] & 0x20) != 0)) &&
          (*(char *)(lVar16 + 0x1474) != '\0')) &&
         ((((byte)this[0x1d7] & 4) != 0 && ((int)uVar22 == 1)))) &&
        ((3 < uVar24 && ((uVar28 < 0xc && ((0x888U >> (uVar28 & 0x1f) & 1) != 0)))))) &&
       (0x400 < uVar9)) {
      uVar8 = uVar11 + 0x3f & 0xffffffc0;
      *(uint *)(this + 0x1c8) = uVar8 + 0xff >> 2 & 0xffffffc0;
      uVar9 = iVar33 + 0x7fU >> 3 & 0xfffffff0;
      uVar8 = uVar8 >> 4;
      if (*(int *)(lVar16 + 0x1470) == 3) {
        uVar30 = uVar9 + 0x7f >> 7;
        uVar14 = uVar8 + 0x1f >> 5;
        uVar8 = uVar14;
      }
      else {
        uVar30 = 0;
        uVar14 = 0;
        if (*(int *)(lVar16 + 0x1470) == 2) {
          uVar30 = uVar9 + 0x1ff >> 9;
          uVar14 = uVar8 + 7 >> 3;
          uVar8 = uVar14;
        }
      }
      pIVar26 = (IGAccelResource *)(ulong)uVar8;
      iVar31 = *(int *)__got::_page_size;
      *(uint *)(this + 0x1c0) = uVar13;
      *(uint *)(this + 0x1c4) = uVar30 << 7;
      *(uint *)(this + 0x1cc) = uVar29;
      if (*(int *)(lVar16 + 0xce0) != 0) {
        auVar36 = IOAccelResource2::getClientSharedROPrivate();
        pIVar26 = auVar36._8_8_;
        lVar16 = auVar36._0_8_;
        *(undefined4 *)(lVar16 + 0x14) = *(undefined4 *)(this + 0x1c0);
        *(undefined4 *)(lVar16 + 0x18) = *(undefined4 *)(this + 0x1c4);
        *(undefined4 *)(lVar16 + 0x1c) = *(undefined4 *)(this + 0x1c8);
        uVar28 = *(ushort *)(this + 0x194);
      }
      uVar13 = uVar13 + uVar14 * uVar30 * iVar31 + 0x20;
    }
    lVar16 = *(long *)(this + 0x260);
    *(short *)(lVar16 + -0x10 + lVar34) = (short)iVar33;
    *(short *)(lVar16 + -0xe + lVar34) = (short)uVar11;
    *(undefined2 *)(lVar16 + -8 + lVar34) = 1;
    *(uint *)(lVar16 + -0x1c + lVar34) = local_8c;
    *(uint *)(lVar16 + -0x14 + lVar34) = uVar12;
    *(int *)(lVar16 + -0x20 + lVar34) = iVar10;
    *(int *)(lVar16 + -0x18 + lVar34) = iVar7;
    *(short *)(lVar16 + -4 + lVar34) = (short)uVar29;
    *(short *)(lVar16 + -6 + lVar34) = (short)uVar24;
    *(ushort *)(lVar16 + -2 + lVar34) = uVar28;
    *(undefined8 *)(lVar16 + lVar34) = 0;
    if ((local_b8 == 0) &&
       (*(uint *)(this + 400) = uVar29, *(int *)(*(long *)(this + 0x18) + 0xce0) != 0)) {
      auVar36 = IOAccelResource2::getClientSharedROPrivate();
      puVar21 = auVar36._0_8_;
      *(undefined4 *)((long)puVar21 + 0xc) = *(undefined4 *)(this + 0xf8);
      *(uint *)(puVar21 + 1) = (uint)*(ushort *)(this + 0x194);
      *(uint *)(puVar21 + 2) = uVar12;
      *puVar21 = (ulong)uVar13;
      uVar35 = CONCAT71(auVar36._9_7_,*(undefined1 *)((long)puVar21 + 0x24)) & 0xfffffffffffffffe;
      bVar23 = (byte)uVar35 | (byte)((ushort)*(undefined2 *)(this + 0x1d6) >> 10) & 1;
      pIVar26 = (IGAccelResource *)CONCAT71((int7)(uVar35 >> 8),bVar23);
      *(byte *)((long)puVar21 + 0x24) = bVar23;
    }
    local_8c = local_8c + uVar13;
    local_b8 = local_b8 + 1;
    lVar34 = lVar34 + 0x28;
  } while (uVar22 != local_b8);
  if (*(int *)(this + 0x1c0) != 0) {
    local_8c = local_8c + 0xfff & 0xfffff000;
    *(uint *)(this + 0x1d0) = local_8c;
    local_8c = local_8c + 0x1000;
  }
  *param_2 = (ulong)uVar12;
  *param_1 = (ulong)local_8c;
  if (plVar18 != (long *)0x0) {
    (**(code **)(*plVar18 + 0x28))(plVar18);
  }
LAB_00071919:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGAccelResource::getLevelOffset(unsigned char, unsigned char, int*)

int __thiscall
IGAccelResource::getLevelOffset(IGAccelResource *this,int param_1,uint param_3_00,int *param_3)

{
  long lVar1;
  uint local_40;
  uint local_3c;
  int local_38;
  int local_34;
  
  local_40 = (uint)*(ushort *)(this + 0xb0);
  local_3c = (uint)*(ushort *)(this + 0xb2);
  local_38 = 0;
  local_34 = 0;
  lVar1 = IOAccelResource2::getStorageResource();
  calculateLevelOffsets
            (this,&local_40,&local_3c,&local_38,&local_34,param_1,param_3_00,
             (uint)*(ushort *)(lVar1 + 0x196));
  lVar1 = *(long *)(this + 0xb8);
  if (lVar1 == 0) {
    lVar1 = *(long *)(this + 0xc0);
  }
  if (param_3 != (int *)0x0) {
    *param_3 = (int)lVar1;
  }
  return (int)lVar1 * local_34 + local_38;
}



// IGAccelResource::getBackingLevelOffset(unsigned char, unsigned char, int*)

undefined4 __thiscall
IGAccelResource::getBackingLevelOffset
          (IGAccelResource *this,uint param_1,uint param_3_00,undefined4 *param_3)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *(long *)(this + 0x260);
  lVar2 = (ulong)param_3_00 + (ulong)(byte)this[0xad] * (ulong)param_1;
  if (param_3 != (undefined4 *)0x0) {
    *param_3 = *(undefined4 *)(lVar1 + 8 + lVar2 * 0x28);
  }
  return *(undefined4 *)(lVar1 + lVar2 * 0x28);
}



// IGAccelResource::submitCCSResolve(IGAccelResource::ResourceInfoEntry*, IntelAccelerator&,
// IGAccelTask*, IOAccelEvent*, EIntelCCSResolveType, IGAccelResource*)

ulong __thiscall
IGAccelResource::submitCCSResolve
          (IGAccelResource *this,long param_1,IntelAccelerator *param_2,IGAccelTask *param_3,
          long param_4,int param_5,IGAccelResource *param_6)

{
  ushort uVar1;
  uint uVar2;
  ulong uVar3;
  byte bVar4;
  undefined8 unaff_RBX;
  ulong uVar5;
  
  uVar2 = *(uint *)(param_1 + 0x94);
  if (uVar2 == 0) {
    bVar4 = 1;
  }
  else {
    bVar4 = 1;
    uVar5 = 0;
    do {
      uVar1 = *(ushort *)(*(long *)(param_1 + 0x58) + uVar5 * 2);
      if (uVar1 != 0) {
        uVar3 = submitCCSResolve(this,param_1,param_2,param_3,param_4,param_5,(uint)uVar5,uVar1,
                                 param_6);
        bVar4 = bVar4 & (byte)uVar3;
        uVar2 = *(uint *)(param_1 + 0x94);
      }
      uVar5 = uVar5 + 1;
    } while (uVar5 < uVar2);
  }
  return CONCAT71((int7)((ulong)unaff_RBX >> 8),bVar4) & 0xffffffff;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// GetSurfaceAlignmentUnits(unsigned int*, unsigned int*, unsigned int, unsigned int, unsigned int,
// unsigned int, bool, bool, bool, bool, bool)

void __cdecl
GetSurfaceAlignmentUnits
          (undefined4 *param_1,undefined4 *param_2,ulong param_3,int param_4,int param_5,
          uint param_6,char param_7,char param_8,char param_9,char param_10)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  undefined *puVar4;
  uint uVar5;
  char cVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  uint local_48 [14];
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  uVar8 = 0;
  local_48[0xc] = 0;
  local_48[0xd] = 0;
  local_48[10] = 0;
  local_48[0xb] = 0;
  local_48[8] = 0;
  local_48[9] = 0;
  local_48[6] = 0;
  local_48[7] = 0;
  local_48[0] = 0x80;
  local_48[1] = 0x60;
  local_48[2] = 0x40;
  local_48[3] = 0x20;
  local_48[4] = 0x10;
  local_48[5] = 8;
  uVar7 = 0x40;
  if (param_10 == '\0') {
    uVar5 = (uint)param_3;
    uVar2 = local_48[(uint)(param_3 >> 6) & 0xf];
    *param_1 = 4;
    *param_2 = 4;
    cVar6 = (char)uVar2;
    if ((((param_5 == 3) && (1 < param_6)) && (param_4 == 1)) && (cVar6 == ' ')) {
      *param_1 = 8;
    }
    uVar1 = param_4 - 2U >> 1;
    if (((uVar1 | param_4 << 0x1f) < 8) && ((0x8bU >> (uVar1 & 0x1f) & 1) != 0)) {
      *param_1 = 4;
      *param_2 = 4;
    }
    uVar2 = uVar2 & 0xff;
    if (param_7 == '\0') {
      uVar8 = 8;
      uVar7 = 8;
      if (param_8 != '\0') goto LAB_00071cd0;
      uVar7 = 4;
      if (((uVar5 - 0x182 < 0xf) && ((0x6003U >> (uVar5 - 0x182 & 0x1f) & 1) != 0)) ||
         (uVar5 - 0x40 < 7)) goto LAB_00071cd3;
      if (param_9 != '\0') {
        uVar7 = 0x40;
        if (cVar6 == ' ') {
          uVar8 = 0x80;
        }
        else if (uVar2 == 0x80) {
          uVar8 = 0x20;
        }
        else {
          if (uVar2 != 0x40) goto LAB_00071cd5;
          uVar8 = 0x40;
          uVar7 = 0x40;
        }
        goto LAB_00071cd0;
      }
    }
    else {
      uVar7 = 4;
      if ((uVar5 - 0x10a < 5) || (uVar5 == 5)) {
        uVar8 = 8;
      }
      else {
        uVar8 = 4;
      }
LAB_00071cd0:
      *param_1 = uVar8;
LAB_00071cd3:
      *param_2 = uVar7;
    }
LAB_00071cd5:
    if (param_5 == 0xb) {
      if (cVar6 == '\0') {
        if ((uVar5 >> 9 & 1) == 0) {
          uVar7 = 0x100;
          uVar8 = 0x100;
          if (uVar5 - 0x180 < 0x25) {
            lVar3 = (long)(int)(uVar5 - 0x180);
            uVar7 = *(undefined4 *)(&DAT_00113d18 + lVar3 * 4);
            puVar4 = &DAT_00113dac;
LAB_00071db7:
            uVar8 = *(undefined4 *)(puVar4 + lVar3 * 4);
          }
        }
        else {
LAB_00071e1a:
          uVar7 = 0x40;
          uVar8 = 0x40;
        }
      }
      else {
        uVar7 = 0x100;
        if (uVar2 < 9) {
          uVar8 = 0x100;
        }
        else {
          uVar8 = 0x80;
          if (0x10 < uVar2) {
            uVar7 = 0x80;
            if (uVar2 < 0x21) {
              uVar8 = 0x80;
            }
            else {
              uVar8 = 0x40;
              if (0x40 < uVar2) goto LAB_00071e1a;
            }
          }
        }
      }
    }
    else {
      if (param_5 != 7) goto LAB_00071bc7;
      if (cVar6 == '\0') {
        if ((uVar5 >> 9 & 1) == 0) {
          uVar7 = 0x40;
          uVar8 = 0x40;
          if (uVar5 - 0x180 < 0x25) {
            lVar3 = (long)(int)(uVar5 - 0x180);
            uVar7 = *(undefined4 *)(&DAT_00113bf0 + lVar3 * 4);
            puVar4 = &DAT_00113c84;
            goto LAB_00071db7;
          }
        }
        else {
LAB_00071df4:
          uVar7 = 0x10;
          uVar8 = 0x10;
        }
      }
      else {
        uVar7 = 0x40;
        if (uVar2 < 9) goto LAB_00071e1a;
        uVar8 = 0x20;
        if (0x10 < uVar2) {
          uVar7 = 0x20;
          if (uVar2 < 0x21) {
            uVar8 = 0x20;
          }
          else {
            uVar8 = 0x10;
            if (0x40 < uVar2) goto LAB_00071df4;
          }
        }
      }
    }
  }
  *param_1 = uVar7;
  *param_2 = uVar8;
LAB_00071bc7:
  if (*(long *)__got::___stack_chk_guard != local_10) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcEvents(IGVector<> *param_1,long param_2)

{
  long lVar1;
  
  AddSrcResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddSrcResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstEvents(IGVector<> *param_1,long param_2)

{
  long lVar1;
  
  AddDstResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddDstResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::add(IOAccelEvent* const&)

void __thiscall IGVector<>::add(IGVector<> *this,undefined8 *param_1)

{
  undefined8 uVar1;
  long lVar2;
  
  lVar2 = *(long *)this;
  if (lVar2 == *(long *)(this + 8)) {
    uVar1 = grow(this,lVar2 * 2);
    if ((char)uVar1 == '\0') {
      return;
    }
    lVar2 = *(long *)this;
  }
  *(long *)this = lVar2 + 1;
  *(undefined8 *)(*(long *)(this + 0x10) + lVar2 * 8) = *param_1;
  return;
}



// IGAccelResource::fillSurfaceStateAuxInfo(IGAccelResource::ResourceInfoEntry const*,
// SGfxRenderSurfaceState&, Intent) const

void __thiscall
IGAccelResource::fillSurfaceStateAuxInfo
          (IGAccelResource *this,long param_1,long param_2,int param_3)

{
  byte bVar1;
  uint uVar2;
  ulong uVar3;
  uint uVar4;
  
  if (param_1 != 0) {
    if ((*(byte *)(param_1 + 0x56) & 0x10) == 0) {
      bVar1 = *(byte *)(param_1 + 0xa0);
      if (1 < bVar1) {
        uVar2 = *(uint *)(param_2 + 0x18);
        uVar4 = (*(int *)(param_1 + 0x44) + 0x7fU >> 4) + 0xff8 & 0xff8;
        uVar3 = (ulong)((uint)*(undefined8 *)(param_2 + 0x28) & 0xfff) |
                (ulong)*(uint *)(param_1 + 0x40) + *(long *)(param_2 + 0x20) & 0xfffffffffffff000;
        *(ulong *)(param_2 + 0x28) = uVar3;
        *(uint *)(param_2 + 0x18) = uVar2 & 0xfffff007 | uVar4;
        *(uint *)(param_2 + 0x18) =
             (uVar2 & 0x8000f000 | uVar4) + (uint)(bVar1 == 3) * 4 +
             (*(uint *)(param_1 + 0x48) & 0x7fff) * 0x10000 + 1;
        if ((*(byte *)(param_1 + 0xa1) & 4) == 0) {
          return;
        }
        *(ulong *)(param_2 + 0x30) =
             *(long *)(param_2 + 0x20) + (ulong)*(uint *)(param_1 + 0x50) & 0xffffffffffc0 |
             *(ulong *)(param_2 + 0x30) & 0xffff00000000003f;
        *(ulong *)(param_2 + 0x28) = uVar3 | 0x400;
        return;
      }
    }
    else if ((((param_3 == 0) && ((*(byte *)(param_1 + 0xa1) & 1) != 0)) &&
             (*(short *)(param_1 + 0x16) == 1)) &&
            (((&DAT_000011b8)[*(long *)(this + 0x18)] & 4) != 0)) {
      *(ulong *)(param_2 + 0x28) =
           (ulong)((uint)*(undefined8 *)(param_2 + 0x28) & 0xfff) |
           (ulong)*(uint *)(param_1 + 0x18) + *(long *)(param_2 + 0x20) & 0xfffffffffffff000;
      *(uint *)(param_2 + 0x18) =
           (*(uint *)(param_2 + 0x18) & 0xfffff000) + (*(uint *)(param_1 + 0x1c) & 0x1ff) * 8 + 3;
      *(byte *)(param_2 + 1) = *(byte *)(param_2 + 1) | 2;
      return;
    }
  }
  *(uint *)(param_2 + 0x18) = *(uint *)(param_2 + 0x18) & 0xfffff000;
  *(ulong *)(param_2 + 0x28) = *(ulong *)(param_2 + 0x28) & 0xfff;
  return;
}



// IGAccelResource::reshape(IOAccelSurface*, IGAccelResource::ReshapeData const&)

void __thiscall
IGAccelResource::reshape(IGAccelResource *this,undefined8 param_1,undefined4 *param_2)

{
  ushort uVar1;
  short sVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  uint uVar8;
  int iVar9;
  char cVar10;
  int iVar11;
  uint uVar12;
  uint local_58 [14];
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  uVar1 = *(ushort *)(this + 0x1d6);
  *(ushort *)(this + 0x1d6) = uVar1 | 2;
  *(undefined4 *)(this + 0x188) = param_2[6];
  sVar2 = *(short *)(param_2 + 7);
  *(short *)(this + 0x194) = sVar2;
  uVar3 = param_2[5];
  *(uint *)(this + 400) = uVar3;
  iVar11 = param_2[8];
  iVar4 = param_2[0xb];
  *(int *)(this + 0x1c0) = iVar4;
  *(undefined4 *)(this + 0x1c4) = param_2[0xc];
  if (iVar11 == 0) goto LAB_000721ff;
  uVar8 = param_2[1];
  local_58[0xc] = 0;
  local_58[0xd] = 0;
  local_58[10] = 0;
  local_58[0xb] = 0;
  local_58[8] = 0;
  local_58[9] = 0;
  local_58[6] = 0;
  local_58[7] = 0;
  local_58[0] = 0x80;
  local_58[1] = 0x60;
  local_58[2] = 0x40;
  local_58[3] = 0x20;
  local_58[4] = 0x10;
  local_58[5] = 8;
  uVar5 = *(uint *)((long)local_58 + (ulong)(uVar3 >> 4 & 0x3c));
  uVar12 = uVar5 & 0xff;
  cVar10 = (char)uVar5;
  if (sVar2 == 0xb) {
    if (cVar10 == '\0') {
      iVar11 = 0x40;
      if ((uVar3 >> 9 & 1) == 0) {
        iVar11 = 0x100;
        if (uVar3 - 0x180 < 0x25) {
          iVar11 = *(int *)(&DAT_00113dac + (long)(int)(uVar3 - 0x180) * 4);
        }
      }
    }
    else {
      iVar11 = 0x100;
      if (8 < uVar12) {
        iVar11 = (uint)(uVar12 < 0x21) * 0x40 + 0x40;
      }
    }
    goto LAB_000721b7;
  }
  iVar9 = 4;
  if (sVar2 == 7) {
    if (cVar10 == '\0') {
      iVar9 = 0x10;
      if ((uVar3 >> 9 & 1) == 0) {
        iVar11 = 0x40;
        if ((0x24 < uVar3 - 0x180) || ((0x1e06023fc1U >> ((ulong)(uVar3 - 0x180) & 0x3f) & 1) == 0))
        goto LAB_000721b7;
      }
    }
    else {
      iVar11 = 0x40;
      if (8 < uVar12) {
        iVar9 = 0x10;
        iVar11 = 0x20;
        if (0x20 < uVar12) goto LAB_000721ba;
      }
LAB_000721b7:
      iVar9 = iVar11;
    }
  }
LAB_000721ba:
  if (((uVar3 >> 9 & 1) != 0) ||
     ((uVar3 - 0x186 < 0x1f && ((0x781808ffU >> (uVar3 - 0x186 & 0x1f) & 1) != 0)))) {
    uVar8 = uVar8 + 3 >> 2;
  }
  *(uint *)(this + 0x18c) = ((((uVar8 + iVar9) - 1 & -iVar9) + iVar9) - 1 & -iVar9) >> 2;
LAB_000721ff:
  uVar6 = *param_2;
  uVar7 = param_2[1];
  if (*(short *)(this + 0x200) == 0) {
    *(undefined2 *)(this + 0x200) = 1;
    *(IGAccelResource **)(this + 0x1d8) = this + 0x1e8;
    *(IGAccelResource **)(this + 0x1e0) = this + 0x1ea;
  }
  if ((this[0x220] == (IGAccelResource)0x0) && (iVar4 != 0)) {
    this[0x220] = (IGAccelResource)0x1;
  }
  *(undefined4 *)(this + 0x20c) = uVar6;
  *(undefined4 *)(this + 0x210) = uVar7;
  *(undefined8 *)(this + 0x214) = 0x100000001;
  *(undefined4 *)(this + 0x208) = 0;
  *(undefined2 *)(this + 0x196) = 0;
  if ((((*(byte *)((long)param_2 + 0x25) & 0x10) != 0) && (uVar3 = param_2[10], (uVar3 | 4) == 0xc))
     && (*(undefined2 *)(this + 0x196) = *(undefined2 *)(param_2 + 8), uVar3 == 8)) {
    *(ushort *)(this + 0x1d6) = uVar1 | 0x12;
  }
  uVar3 = *(uint *)(this + 0x108);
  *(uint *)(this + 0x108) = uVar3 & 0xf9ffffff;
  *(uint *)(this + 0x108) = uVar3 & 0xf1ffffff | (*(byte *)(param_2 + 0xd) & 1) << 0x1b;
  (**(code **)(*(long *)this + 0x118))
            (this,param_1,*param_2,param_2[1],param_2[2],param_2[3],param_2[4]);
  if (*(long *)__got::___stack_chk_guard != local_20) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
                    // WARNING: Could not recover jumptable at 0x00072311. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x1d0))(this);
  return;
}



// IGAccelResource::addToAperture()

undefined8 __thiscall IGAccelResource::addToAperture(IGAccelResource *this)

{
  IGFenceAllocator *this_00;
  long lVar1;
  IntelAccelerator *pIVar2;
  char cVar3;
  long *plVar4;
  long lVar5;
  IGFence *pIVar6;
  byte *pbVar7;
  IGAccelTask *pIVar8;
  byte *pbVar9;
  undefined8 local_40;
  undefined8 local_38;
  
  plVar4 = (long *)(**(code **)(**(long **)(this + 0x88) + 0x138))
                             (*(long **)(this + 0x88),
                              *(undefined8 *)(*(long *)(this + 0x18) + 0x150),0x1000b);
  if (plVar4 != (long *)0x0) {
    if (((((*(byte *)(plVar4 + 2) & 1) != 0) ||
         (cVar3 = (**(code **)(*plVar4 + 0x150))(plVar4), cVar3 != '\0')) ||
        (cVar3 = (**(code **)(**(long **)(*(long *)(this + 0x18) + 0x150) + 0x120))
                           (*(long **)(*(long *)(this + 0x18) + 0x150),plVar4), cVar3 != '\0')) &&
       (cVar3 = (**(code **)(*plVar4 + 0x138))(plVar4), cVar3 != '\0')) {
      this_00 = *(IGFenceAllocator **)(*(long *)(&DAT_00001290 + *(long *)(this + 0x18)) + 0x80);
      local_40 = (**(code **)(*plVar4 + 0x128))(plVar4);
      local_38 = *(undefined8 *)(this + 200);
      lVar1 = *(long *)(this + 0xb8);
      lVar5 = IOAccelResource2::getStorageResource();
      pIVar6 = IGFenceAllocator::allocate(this_00,&local_40,lVar1,(uint)*(ushort *)(lVar5 + 0x194));
      *(IGFence **)(this + 0x238) = pIVar6;
      if (pIVar6 != (IGFence *)0x0) {
        pbVar7 = (byte *)IOAccelResource2::getStorageResource();
        pbVar9 = pbVar7;
        if ((1 < pbVar7[0x220]) && (pbVar9 = *(byte **)(pbVar7 + 0x1d8), (*pbVar9 & 1) != 0)) {
          pIVar2 = *(IntelAccelerator **)(this + 0x18);
          pIVar8 = (IGAccelTask *)IOAccelResource2::getGPUTask();
          pbVar9 = (byte *)submitCCSResolve(this,(long)(pbVar7 + 0x180),pIVar2,pIVar8,0,3,0,1,
                                            (IGAccelResource *)0x0);
          pbVar7[0x220] = 1;
          pbVar7[0x221] = pbVar7[0x221] & 0xfb;
        }
        *(long **)(this + 0x230) = plVar4;
        return CONCAT71((int7)((ulong)pbVar9 >> 8),1);
      }
      (**(code **)(*plVar4 + 0x140))(plVar4);
    }
    (**(code **)(*plVar4 + 0x28))(plVar4);
  }
  return 0;
}



// IGAccelResource::removeFromAperture()

void __thiscall IGAccelResource::removeFromAperture(IGAccelResource *this)

{
  if (*(long **)(this + 0x238) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x238) + 0x28))();
  }
  *(undefined8 *)(this + 0x238) = 0;
  (**(code **)(**(long **)(this + 0x230) + 0x140))();
  if (*(long **)(this + 0x230) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x230) + 0x28))();
  }
  *(undefined8 *)(this + 0x230) = 0;
  return;
}



// IGAccelResource::getApertureMemoryDescriptor(unsigned long long*)

long __thiscall
IGAccelResource::getApertureMemoryDescriptor(IGAccelResource *this,undefined8 *param_1)

{
  undefined8 uVar1;
  long lVar2;
  
  lVar2 = *(long *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x18)) + 0x70);
  if ((lVar2 == 0) || (*(long **)(this + 0x230) == (long *)0x0)) {
    lVar2 = 0;
  }
  else {
    uVar1 = (**(code **)(**(long **)(this + 0x230) + 0x128))();
    *param_1 = uVar1;
  }
  return lVar2;
}



// IGAccelResource::generateMipMaps(unsigned short, unsigned short, unsigned short, unsigned short,
// unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, unsigned long long,
// SGfxRenderSurfaceState const&)

undefined8 __thiscall
IGAccelResource::generateMipMaps
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4_00,
          undefined8 param_5,undefined8 param_6_00,undefined8 param_7_00,undefined8 param_8_00,
          void *this,ulong param_10_00,uint param_11_00,undefined4 param_12,ushort param_13,
          undefined8 param_14,undefined8 param_15,uint param_16,undefined4 param_17,
          undefined4 param_18,long param_19,ulong *param_20)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  undefined2 uVar6;
  IGAccelTask *pIVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  ulong uVar10;
  undefined4 *extraout_RAX;
  undefined4 *puVar11;
  long *plVar12;
  ulong uVar13;
  uint *puVar14;
  uint uVar15;
  long lVar16;
  long lVar17;
  undefined1 uVar18;
  int iVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  long *plVar23;
  ulong uVar24;
  ulong uVar25;
  uint uVar26;
  uint uVar27;
  bool bVar28;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  ulong uVar29;
  float fVar30;
  undefined4 uVar31;
  float fVar32;
  undefined4 uVar33;
  float fVar34;
  undefined4 uVar35;
  long local_1f8;
  ulong local_1f0;
  undefined8 local_1e8;
  undefined8 local_1e0;
  long local_1d8;
  undefined8 local_1d0;
  long local_1c8;
  ulong local_1c0;
  long *local_1b8;
  long local_1b0;
  ulong local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  undefined8 local_188;
  undefined8 local_180;
  undefined8 local_178;
  long *local_170;
  undefined8 local_168;
  undefined8 local_160;
  byte local_158;
  uint local_156;
  undefined4 local_150;
  undefined8 local_148;
  undefined1 local_140;
  ulong local_138;
  ulong local_130;
  long local_128;
  ulong local_120;
  ulong local_118;
  long local_110;
  undefined8 local_f0;
  undefined8 local_e8;
  undefined8 local_e0;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined8 local_c8;
  uint local_c0;
  uint local_bc;
  long *local_b8;
  ulong local_b0;
  long local_a8;
  ulong local_a0;
  uint local_98;
  uint local_94;
  long *local_90;
  long *local_88;
  uint local_80;
  uint local_7c;
  ulong local_78;
  ulong local_70;
  long local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_b0 = param_10_00;
  if ((_graphicsTracePointEnable != 0) &&
     (dtHookTrace(), (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
    _kernel_debug(0x85a00071,*(uintptr_t *)((long)this + 0xb8),(ulong)*(ushort *)((long)this + 0xb0)
                  ,(ulong)*(ushort *)((long)this + 0xb2),0,0);
  }
  if (param_19 == 0) {
    lVar16 = IOAccelResource2::getStorageResource();
    plVar12 = (long *)(lVar16 + 0x180);
    if ((*(long *)(lVar16 + 0x180) != 0) || (*(long *)((long)this + 0x260) != 0)) {
LAB_0007262b:
      local_a8 = CONCAT44(local_a8._4_4_,param_12);
      local_90 = *(long **)((long)this + 0x40);
      local_b8 = plVar12;
      local_a0 = (ulong)param_11_00;
      pIVar7 = (IGAccelTask *)IOAccelResource2::getGPUTask();
      ___bzero(&local_1f8,0x138);
      IGVector<>::grow((IGVector<> *)&local_138,4);
      local_120 = 0;
      local_118 = 0;
      local_110 = 0;
      IGVector<>::grow((IGVector<> *)&local_120,4);
      local_1f8 = 0;
      local_1f0 = 0;
      local_1e8 = 0;
      local_1e0 = 0;
      local_1d8 = 0;
      local_1d0 = 0;
      local_1c8 = 0;
      local_1b8 = (long *)0x0;
      local_1c0 = 0x100000000;
      local_1b0 = 0;
      local_1a8 = 0;
      local_1a0 = 0;
      local_198 = 0;
      local_190 = 0;
      local_188 = 0;
      local_180 = 0;
      local_170 = (long *)0x0;
      local_178 = 0x100000000;
      local_168 = 0;
      local_160 = 0;
      local_156 = 0;
      local_158 = 0;
      local_150 = 0;
      local_148 = 0;
      local_140 = 0;
      local_138 = 0;
      local_120 = 0;
      local_f0 = 0;
      local_e8 = 0;
      local_e0 = 0;
      local_d8 = 0;
      local_d0 = 0;
      local_c8 = 0;
      if ((*(byte *)((long)this + 0xf) & 0x10) == 0) {
        bVar1 = *(byte *)((long)this + 0x16);
        lVar16 = *(long *)((long)this + 0x38);
        if (local_130 == 0) {
          uVar8 = IGVector<>::grow((IGVector<> *)&local_138,0);
          if ((char)uVar8 != '\0') goto LAB_000727a7;
        }
        else {
          local_138 = 0;
LAB_000727a7:
          *(ulong *)(local_128 + local_138 * 8) = (ulong)bVar1 * 0x40 + lVar16;
          local_138 = local_138 + 1;
        }
        bVar1 = *(byte *)((long)this + 0x15);
        lVar16 = *(long *)((long)this + 0x38);
        if ((local_120 != local_118) ||
           (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0'))
        {
          *(ulong *)(local_110 + local_120 * 8) = (ulong)bVar1 * 0x40 + lVar16;
          local_120 = local_120 + 1;
        }
        lVar16 = (ulong)*(byte *)((long)this + 0x16) * 0x40 + *(long *)((long)this + 0x38);
      }
      else {
        uVar8 = *(undefined8 *)((long)this + 0x90);
        if (local_118 == 0) {
          uVar9 = IGVector<>::grow((IGVector<> *)&local_120,0);
          if ((char)uVar9 != '\0') goto LAB_0007282d;
        }
        else {
          local_120 = 0;
LAB_0007282d:
          *(undefined8 *)(local_110 + local_120 * 8) = uVar8;
          local_120 = local_120 + 1;
        }
        lVar16 = *(long *)((long)this + 0x90) + 0x40;
        if (*(long *)((long)this + 0x90) == 0) {
          lVar16 = 0;
        }
      }
      if ((local_120 != local_118) ||
         (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0')) {
        *(long *)(local_110 + local_120 * 8) = lVar16;
        local_120 = local_120 + 1;
      }
      local_88 = this;
      if ((local_120 != local_118) ||
         (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0')) {
        *(long **)(local_110 + local_120 * 8) = local_90 + 7;
        local_120 = local_120 + 1;
      }
      lVar16 = IOAccelResource2::getStorageResource();
      if (lVar16 != 0) {
        lVar16 = IOAccelResource2::getStorageResource();
        if ((*(byte *)(lVar16 + 0xf) & 0x10) == 0) {
          bVar1 = *(byte *)(lVar16 + 0x16);
          lVar17 = *(long *)(lVar16 + 0x38);
          if ((local_138 != local_130) ||
             (uVar8 = IGVector<>::grow((IGVector<> *)&local_138,local_138 * 2), (char)uVar8 != '\0')
             ) {
            *(ulong *)(local_128 + local_138 * 8) = (ulong)bVar1 * 0x40 + lVar17;
            local_138 = local_138 + 1;
          }
          bVar1 = *(byte *)(lVar16 + 0x15);
          lVar17 = *(long *)(lVar16 + 0x38);
          if ((local_120 != local_118) ||
             (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0')
             ) {
            *(ulong *)(local_110 + local_120 * 8) = (ulong)bVar1 * 0x40 + lVar17;
            local_120 = local_120 + 1;
          }
          lVar17 = (ulong)*(byte *)(lVar16 + 0x16) * 0x40 + *(long *)(lVar16 + 0x38);
        }
        else {
          uVar8 = *(undefined8 *)(lVar16 + 0x90);
          if ((local_120 != local_118) ||
             (uVar9 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar9 != '\0')
             ) {
            *(undefined8 *)(local_110 + local_120 * 8) = uVar8;
            local_120 = local_120 + 1;
          }
          lVar17 = *(long *)(lVar16 + 0x90) + 0x40;
          if (*(long *)(lVar16 + 0x90) == 0) {
            lVar17 = 0;
          }
        }
        if ((local_120 != local_118) ||
           (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0'))
        {
          *(long *)(local_110 + local_120 * 8) = lVar17;
          local_120 = local_120 + 1;
        }
        lVar16 = *(long *)(lVar16 + 0x40);
        if ((lVar16 != 0) &&
           ((local_120 != local_118 ||
            (uVar8 = IGVector<>::grow((IGVector<> *)&local_120,local_120 * 2), (char)uVar8 != '\0'))
           )) {
          *(long *)(local_110 + local_120 * 8) = lVar16 + 0x38;
          local_120 = local_120 + 1;
        }
      }
      plVar12 = local_90;
      uVar29 = *param_20;
      uVar18 = (undefined1)(uVar29 >> 0xc);
      uVar6 = (undefined2)(uVar29 >> 0x12);
      local_1e0 = CONCAT44(local_1e0._4_4_,param_18);
      iVar19 = (*(uint *)((long)param_20 + 0xc) & 0x3ffff) + 1;
      local_1f0 = CONCAT44(CONCAT22(uVar6,CONCAT11(1,uVar18)),iVar19) & 0x3ffff03ffffffff;
      local_1e8 = CONCAT44(param_17,0x23);
      local_1b8 = local_88;
      local_170 = local_88;
      local_1a8 = CONCAT35((int3)(CONCAT26(uVar6,0x10000000000) >> 0x28),CONCAT14(uVar18,iVar19)) &
                  0x3ffff03ffffffff;
      local_1a0 = CONCAT44(param_17,5);
      local_198 = CONCAT44(local_198._4_4_,param_18);
      iVar19 = (int)local_a0;
      local_94 = iVar19 + 0xffU & 0xff;
      local_156 = local_156 & 0xfffff7e0 | 0x819;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      local_60 = 0;
      local_78 = 0x6000000080;
      local_70 = 0x2000000040;
      local_68 = 0x800000010;
      local_158 = *(byte *)((long)&local_78 + (ulong)((uint)uVar29 >> 0x18 & 0xf) * 4) >> 3;
      plVar23 = local_88;
      lVar16 = (**(code **)(*local_90 + 0x128))(local_90);
      lVar16 = lVar16 + (ulong)param_16;
      local_1f8 = lVar16;
      local_1b0 = (**(code **)(*plVar12 + 0x128))(plVar12);
      local_1b0 = local_1b0 + (ulong)param_16;
      uVar15 = (uint)local_a8;
      if (((short)local_a8 == 0 && (ushort)local_b0 == 0) && (1 < *(byte *)(local_b8 + 0x14))) {
        local_1c0 = local_1c0 | 0x10000000000;
        if ((*(byte *)((long)local_b8 + 0xa1) & 4) == 0) {
          local_1c8 = 0;
        }
        else {
          local_1c8 = (ulong)*(uint *)(local_b8 + 10) + lVar16;
        }
        local_1d8 = lVar16 + (ulong)*(uint *)(local_b8 + 8);
        local_1d0 = CONCAT44(local_1d0._4_4_,*(undefined4 *)((long)local_b8 + 0x44));
      }
      local_98 = (uint)param_13;
      uVar27 = local_98 * local_94;
      local_68 = 0;
      local_70 = 0;
      local_78 = 0;
      uVar31 = extraout_XMM0_Da;
      uVar33 = extraout_XMM0_Db;
      if ((uVar27 != 0) &&
         (uVar8 = IGVector<>::grow((IGVector<> *)&local_78,(ulong)uVar27),
         uVar31 = extraout_XMM0_Da_00, uVar33 = extraout_XMM0_Db_00, (char)uVar8 != '\0')) {
        local_78 = (ulong)uVar27;
      }
      uVar29 = CONCAT44(uVar33,uVar31);
      if (param_13 != 0) {
        uVar15 = uVar15 & 0xffff;
        uVar13 = local_b0 & 0xffff;
        local_98 = local_98 + uVar15;
        local_a0 = (ulong)(iVar19 + (int)local_b0 + 0xffU & 0xff);
        local_a8 = local_68;
        local_bc = uVar15;
        do {
          local_c0 = uVar15 % 6;
          if ((*param_20 & 0xe0000000) != 0x60000000) {
            local_c0 = 0;
          }
          if ((ushort)local_b0 < (ushort)local_a0) {
            iVar19 = (uVar15 - local_bc) * local_94;
            local_90 = (long *)CONCAT44(local_90._4_4_,uVar15);
            uVar10 = uVar13;
            do {
              uVar29 = *param_20;
              uVar27 = (uint)param_20[1] & 0x3fff;
              uVar15 = (uint)param_20[1] >> 0x10 & 0x3fff;
              bVar28 = true;
              if (((uint)uVar29 >> 0x1b & 1) == 0) {
                uVar21 = ((uint)(uVar29 >> 0x12) & 0x3ff) - 0x186;
                if (uVar21 < 0x1f) {
                  bVar28 = (0x781808ffU >> (uVar21 & 0x1f) & 1) != 0;
                }
                else {
                  bVar28 = false;
                }
              }
              iVar2 = *(int *)(&getVertAlignment(unsigned_int)::alignment +
                              (ulong)((uint)(uVar29 >> 0xe) & 3) * 4);
              iVar3 = *(int *)(&getVertAlignment(unsigned_int)::alignment +
                              (ulong)((uint)(uVar29 >> 0x10) & 3) * 4);
              local_80 = 0;
              uVar21 = uVar27 + 1;
              if (bVar28) {
                uVar21 = uVar27 + 4 >> 2;
              }
              local_7c = 0;
              uVar27 = uVar15 + 1;
              if (bVar28) {
                uVar27 = uVar15 + 4 >> 2;
              }
              if (uVar10 != 0) {
                uVar24 = 0;
                do {
                  uVar15 = uVar27;
                  puVar14 = &local_7c;
                  iVar5 = iVar3;
                  if ((int)uVar24 == 1 || (uVar29 & 0xe0000000) == 0) {
                    uVar15 = uVar21;
                    puVar14 = &local_80;
                    iVar5 = iVar2;
                  }
                  *puVar14 = *puVar14 + ((uVar15 + iVar5) - 1 & -iVar5);
                  uVar21 = uVar21 >> (1 < uVar21);
                  uVar27 = uVar27 >> (1 < uVar27);
                  uVar24 = uVar24 + 1;
                } while (uVar10 != uVar24);
              }
              uVar15 = (uint)local_90;
              puVar14 = &local_7c;
              if ((uVar29 & 0xe0000000) == 0) {
                puVar14 = &local_80;
              }
              *puVar14 = *puVar14 + ((uint)(uVar29 >> 0x1e) & 0x1fffc) * (uint)local_90;
              uVar31 = 0;
              uVar33 = 0;
              uVar35 = 0;
              lVar16 = (ulong)(uint)((iVar19 - (int)uVar13) + (int)uVar10) * 0x20;
              *(float *)(local_a8 + lVar16) = (float)local_80;
              *(float *)(local_a8 + 4 + lVar16) = (float)local_7c;
              *(float *)(local_a8 + 8 + lVar16) = (float)uVar21;
              *(float *)(local_a8 + 0xc + lVar16) = (float)uVar27;
              uVar29 = *param_20;
              uVar27 = (uint)param_20[1] & 0x3fff;
              uVar21 = (uint)param_20[1] >> 0x10 & 0x3fff;
              bVar28 = true;
              if (((uint)uVar29 >> 0x1b & 1) == 0) {
                uVar22 = ((uint)(uVar29 >> 0x12) & 0x3ff) - 0x186;
                if (uVar22 < 0x1f) {
                  bVar28 = (0x781808ffU >> (uVar22 & 0x1f) & 1) != 0;
                }
                else {
                  bVar28 = false;
                }
              }
              uVar24 = uVar10 + 1;
              uVar22 = *(uint *)(&getVertAlignment(unsigned_int)::alignment +
                                (ulong)((uint)(uVar29 >> 0xe) & 3) * 4);
              plVar23 = (long *)(ulong)uVar22;
              uVar4 = *(uint *)(&getVertAlignment(unsigned_int)::alignment +
                               (ulong)((uint)(uVar29 >> 0x10) & 3) * 4);
              local_80 = 0;
              uVar20 = uVar21 + 1;
              if (bVar28) {
                uVar20 = uVar21 + 4 >> 2;
              }
              local_7c = 0;
              uVar21 = uVar27 + 1;
              if (bVar28) {
                uVar21 = uVar27 + 4 >> 2;
              }
              uVar25 = 0xffffffffffffffff;
              do {
                uVar26 = uVar20;
                puVar14 = &local_7c;
                uVar27 = uVar4;
                if ((int)uVar25 == 0 || (uVar29 & 0xe0000000) == 0) {
                  uVar26 = uVar21;
                  puVar14 = &local_80;
                  uVar27 = uVar22;
                }
                *puVar14 = *puVar14 + ((uVar26 + uVar27) - 1 & -uVar27);
                uVar21 = uVar21 >> (1 < uVar21);
                uVar20 = uVar20 >> (1 < uVar20);
                uVar25 = uVar25 + 1;
              } while (uVar10 != uVar25);
              puVar14 = &local_7c;
              if ((uVar29 & 0xe0000000) == 0) {
                puVar14 = &local_80;
              }
              *puVar14 = *puVar14 + ((uint)(uVar29 >> 0x1e) & 0x1fffc) * (uint)local_90;
              uVar29 = (ulong)(uint)(float)local_80;
              fVar30 = (float)local_7c;
              fVar32 = (float)uVar21;
              fVar34 = (float)uVar20;
              *(float *)(local_a8 + 0x10 + lVar16) = (float)local_80;
              *(float *)(local_a8 + 0x14 + lVar16) = fVar30;
              *(float *)(local_a8 + 0x18 + lVar16) = fVar32;
              *(float *)(local_a8 + 0x1c + lVar16) = fVar34;
              if (*local_b8 == 0) {
                uVar29 = (**(code **)(*local_88 + 0x168))(local_88,local_c0,uVar24 & 0xffffffff);
              }
              param_4_00 = CONCAT44(uVar35,fVar34);
              param_3 = CONCAT44(uVar33,fVar32);
              param_2 = CONCAT44(uVar31,fVar30);
              uVar10 = uVar24;
            } while (uVar24 != local_a0);
          }
          uVar15 = uVar15 + 1;
        } while (uVar15 < local_98);
      }
      IntelAccelerator::submitBlit
                (uVar29,param_2,param_3,param_4_00,param_5,param_6_00,param_7_00,param_8_00,
                 (IntelAccelerator *)local_88[3],&local_1f8,&local_78,pIVar7,0,(char *)plVar23);
      puVar11 = &_graphicsTracePointEnable;
      if ((_graphicsTracePointEnable != 0) &&
         (dtHookTrace(), puVar11 = (undefined4 *)__got::_kdebug_enable,
         (*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0)) {
        _kernel_debug(0x85a00072,0,0,0,0,0);
        puVar11 = extraout_RAX;
      }
      if (local_68 != 0) {
        lVar16 = local_70 << 5;
        if (lVar16 < 0) {
          lVar16 = -0x8000000000000000;
        }
        if (local_70 >> 0x3b != 0) {
          lVar16 = -0x8000000000000000;
        }
        puVar11 = (undefined4 *)
                  _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                      deallocate(rect_pair_t*,unsigned_long)::kalloc_type_view_29,
                                     local_68,lVar16);
      }
      if (local_110 != 0) {
        lVar16 = local_118 * 8;
        if (lVar16 < 0) {
          lVar16 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_118) {
          lVar16 = -0x8000000000000000;
        }
        puVar11 = (undefined4 *)
                  _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                      deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                     local_110,lVar16);
      }
      if (local_128 != 0) {
        lVar16 = local_130 * 8;
        if (lVar16 < 0) {
          lVar16 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_130) {
          lVar16 = -0x8000000000000000;
        }
        puVar11 = (undefined4 *)
                  _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                      deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                     local_128,lVar16);
      }
      uVar8 = CONCAT71((int7)((ulong)puVar11 >> 8),1);
      goto LAB_00073176;
    }
  }
  else {
    for (plVar12 = *(long **)((long)this + 0x240); plVar12 != (long *)0x0;
        plVar12 = (long *)plVar12[0x15]) {
      if (*plVar12 == param_19) goto LAB_0007262b;
    }
  }
  uVar8 = 0;
LAB_00073176:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelResource::updateMappingCacheType(unsigned int)

void __thiscall IGAccelResource::updateMappingCacheType(IGAccelResource *this,uint param_1)

{
  *(uint *)(this + 0x108) = *(uint *)(this + 0x108) & 0xf9ffffff | (param_1 & 3) << 0x19;
  if (*(IGAccelMemoryMap **)(this + 0x40) != (IGAccelMemoryMap *)0x0) {
    IGAccelMemoryMap::updateCacheType(*(IGAccelMemoryMap **)(this + 0x40),param_1);
    return;
  }
  return;
}



// IGAccelResource::isDisplayableIOSurface()

byte IGAccelResource::isDisplayableIOSurface(void)

{
  long lVar1;
  
  IOAccelResource2::getStorageResource();
  lVar1 = IOAccelResource2::getStorageResource();
  return (*(byte *)(lVar1 + 0x1d7) & 4) >> 2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelResource::getResourceInfo(IOAccelGetResourceInfoReturnData*, unsigned int*)

undefined4 __cdecl IGAccelResource::getResourceInfo(undefined8 param_1,long param_2)

{
  undefined4 uVar1;
  long lVar2;
  
  uVar1 = (**(code **)(__got::vtable + 0x1b8))();
  if ((char)uVar1 != '\0') {
    IOAccelResource2::getStorageResource();
    lVar2 = IOAccelResource2::getStorageResource();
    *(undefined1 *)(param_2 + 0x25) = *(undefined1 *)(lVar2 + 400);
    *(uint *)(param_2 + 0x28) = (uint)*(ushort *)(lVar2 + 0x194);
  }
  return uVar1;
}



// IGAccelResource::createAndPrepareRotationMapping()

ulong __thiscall IGAccelResource::createAndPrepareRotationMapping(IGAccelResource *this)

{
  uint uVar1;
  char cVar2;
  undefined8 uVar3;
  long *plVar4;
  long *plVar5;
  ulong uVar6;
  
  uVar1 = *(uint *)(this + 0x108);
  this[0x250] = (IGAccelResource)0x0;
  plVar4 = *(long **)(this + 0x88);
  if (plVar4 == (long *)0x0) {
    plVar4 = *(long **)(this + 0x80);
  }
  uVar3 = IOAccelResource2::getGPUTask();
  plVar4 = (long *)(**(code **)(*plVar4 + 0x138))(plVar4,uVar3,uVar1 | 0x20000008);
  *(long **)(this + 0x248) = plVar4;
  if (plVar4 == (long *)0x0) {
    uVar6 = (ulong)(this[0x250] != (IGAccelResource)0x0);
  }
  else {
    *(undefined8 *)((long)plVar4 + 0x11c) = *(undefined8 *)(this + 0x254);
    *(undefined4 *)((long)plVar4 + 0x124) = *(undefined4 *)(this + 0x25c);
    *(undefined1 *)((long)plVar4 + 0x11c) = 1;
    if (((*(byte *)(plVar4 + 2) & 1) == 0) &&
       (cVar2 = (**(code **)(*plVar4 + 0x150))(plVar4), cVar2 == '\0')) {
      plVar5 = (long *)IOAccelResource2::getGPUTask();
      cVar2 = (**(code **)(*plVar5 + 0x120))(plVar5,plVar4);
      if (cVar2 == '\0') {
        (**(code **)(*plVar4 + 0x28))(plVar4);
        *(undefined8 *)(this + 0x248) = 0;
        return 0;
      }
    }
    uVar6 = (**(code **)(*plVar4 + 0x138))(plVar4);
    this[0x250] = SUB81(uVar6,0);
  }
  return uVar6;
}



// IGAccelResource::complete()

void __thiscall IGAccelResource::complete(IGAccelResource *this)

{
  if (this[0x250] != (IGAccelResource)0x0) {
    if (*(int *)(this + 0x28) != 0) {
      (**(code **)(**(long **)(*(long *)(this + 0x18) + 0x380) + 0x1b0))
                (*(long **)(*(long *)(this + 0x18) + 0x380),*(long *)(this + 0x40) + 0x38,
                 *(long *)(this + 0x248) + 0x38);
    }
    (**(code **)(**(long **)(this + 0x248) + 0x140))();
    this[0x250] = (IGAccelResource)0x0;
  }
                    // WARNING: Could not recover jumptable at 0x0007339c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x188))(this);
  return;
}



// IGAccelResource::MetaClass::~MetaClass()

void __thiscall IGAccelResource::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelResource2::getRetainCount() const

undefined4 __thiscall IOAccelResource2::getRetainCount(IOAccelResource2 *this)

{
  return *(undefined4 *)(this + 0x2c);
}



// IOAccelResource2::pageon(IOAccelEvent*, bool)

void IOAccelResource2::pageon(void)

{
  return;
}



// IOAccelResource2::pageoff(IOAccelEvent*, bool, bool*)

void IOAccelResource2::pageoff(void)

{
  return;
}



// IOAccelResource2::getMemoryAllocParameter()

undefined8 IOAccelResource2::getMemoryAllocParameter(void)

{
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// ComputeQPitch3D(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int)

uint __cdecl ComputeQPitch3D(ulong param_1,int param_2,uint param_3,int param_4,uint param_5)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  bool bVar10;
  uint local_68 [14];
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  bVar10 = true;
  if ((param_5 >> 9 & 1) == 0) {
    if (param_5 - 0x186 < 0x1f) {
      bVar10 = (0x781808ffU >> (param_5 - 0x186 & 0x1f) & 1) != 0;
    }
    else {
      bVar10 = false;
    }
  }
  iVar7 = param_2 + -1;
  uVar5 = -param_2;
  uVar4 = 0;
  uVar6 = (uint)param_1;
  if (param_3 < 2) {
    uVar9 = 0;
  }
  else {
    uVar4 = (uint)(param_1 >> 1) & 0x7fffffff;
    if (uVar6 < 2) {
      uVar4 = 1;
    }
    uVar9 = uVar4 + iVar7 & uVar5;
    uVar4 = 0;
    if (param_3 != 2) {
      uVar4 = 0;
      uVar3 = 2;
      do {
        bVar1 = (byte)uVar3 & 0x1f;
        uVar2 = uVar6 >> bVar1;
        if (uVar6 >> bVar1 == 0) {
          uVar2 = 1;
        }
        uVar8 = uVar2 + 3 >> 2;
        if (!bVar10) {
          uVar8 = uVar2;
        }
        uVar4 = uVar4 + (uVar8 + iVar7 & uVar5);
        uVar3 = uVar3 + 1;
      } while (param_3 != uVar3);
    }
  }
  uVar3 = uVar6 + 3 >> 2;
  if (!bVar10) {
    uVar3 = uVar6;
  }
  if (uVar4 < uVar9) {
    uVar4 = uVar9;
  }
  uVar5 = (uVar3 + iVar7 & uVar5) + iVar7 + uVar4 & uVar5;
  if (param_4 != 0) {
    local_68[0xc] = 0;
    local_68[0xd] = 0;
    local_68[10] = 0;
    local_68[0xb] = 0;
    local_68[8] = 0;
    local_68[9] = 0;
    local_68[6] = 0;
    local_68[7] = 0;
    local_68[0] = 0x80;
    local_68[1] = 0x60;
    local_68[2] = 0x40;
    local_68[3] = 0x20;
    local_68[4] = 0x10;
    local_68[5] = 8;
    iVar7 = 1;
    if (param_4 - 1U < 0xb) {
      uVar4 = local_68[param_5 >> 6 & 0xf] >> 3 & 0x1f;
      switch(param_4) {
      case 1:
        iVar7 = 0x40;
        break;
      case 2:
        iVar7 = 8;
        break;
      case 3:
        iVar7 = 0x20;
        break;
      case 7:
        iVar7 = 0x40;
        if (1 < uVar4) {
          iVar7 = (uint)(uVar4 < 5) * 0x10 + 0x10;
        }
        break;
      case 0xb:
        iVar7 = 0x100;
        if (1 < uVar4) {
          iVar7 = (uint)(uVar4 < 5) * 0x40 + 0x40;
        }
      }
    }
    uVar5 = -iVar7 & (uVar5 + iVar7) - 1;
  }
  if (*(long *)__got::___stack_chk_guard != *(long *)__got::___stack_chk_guard) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar5;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddSrcResourceEvents(wait_update_events&, IGAccelResource*)

void __cdecl AddSrcResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x16);
    lVar4 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)param_1;
    if (lVar3 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar3 * 2);
      if ((char)uVar2 != '\0') {
        lVar3 = *(long *)param_1;
        goto LAB_000736af;
      }
    }
    else {
LAB_000736af:
      *(long *)param_1 = lVar3 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar3 * 8) = (ulong)bVar1 * 0x40 + lVar4;
    }
    lVar4 = (ulong)*(byte *)(param_2 + 0x15) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    lVar4 = *(long *)(param_2 + 0x90);
  }
  lVar3 = *(long *)(param_1 + 0x18);
  if (lVar3 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
    if ((char)uVar2 == '\0') goto LAB_00073704;
    lVar3 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar3 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4;
LAB_00073704:
  lVar4 = *(long *)(param_2 + 0x40);
  if (lVar4 != 0) {
    lVar3 = *(long *)(param_1 + 0x18);
    if (lVar3 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar3 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar3 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar3 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar3 * 8) = lVar4 + 0x38;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(IGVector<> *param_1,long param_2)

{
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar5 = *(long *)param_1;
    if (lVar5 == *(long *)(param_1 + 8)) {
      uVar2 = IGVector<>::grow(param_1,lVar5 * 2);
      if ((char)uVar2 != '\0') {
        lVar5 = *(long *)param_1;
        goto LAB_0007378d;
      }
    }
    else {
LAB_0007378d:
      *(long *)param_1 = lVar5 + 1;
      *(ulong *)(*(long *)(param_1 + 0x10) + lVar5 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar4 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_000737c9;
    }
    else {
LAB_000737c9:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(param_1 + 0x18,lVar6 * 2);
      lVar5 = *(long *)(param_1 + 0x18);
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_00073812;
    }
    else {
LAB_00073812:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_0007385f;
    lVar5 = *(long *)(param_1 + 0x18);
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_0007385f:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(param_1 + 0x18,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)(param_1 + 0x18);
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  undefined8 uVar1;
  long lVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar5 = param_1 << 5;
    if (lVar5 < 0) {
      lVar5 = -0x8000000000000000;
    }
    if (param_1 >> 0x3b != 0) {
      lVar5 = -0x8000000000000000;
    }
    lVar5 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar5);
    if (lVar5 != 0) {
      lVar2 = *(long *)(this + 0x10);
      lVar4 = lVar5;
      if (lVar2 != 0) {
        if (*(long *)this != 0) {
          lVar2 = 0;
          uVar3 = 0;
          do {
            lVar4 = *(long *)(this + 0x10);
            *(undefined8 *)(lVar5 + 0x18 + lVar2) = *(undefined8 *)(lVar4 + 0x18 + lVar2);
            *(undefined8 *)(lVar5 + 0x10 + lVar2) = *(undefined8 *)(lVar4 + 0x10 + lVar2);
            uVar1 = *(undefined8 *)(lVar4 + lVar2);
            *(undefined8 *)(lVar5 + 8 + lVar2) = *(undefined8 *)(lVar4 + 8 + lVar2);
            *(undefined8 *)(lVar5 + lVar2) = uVar1;
            uVar3 = uVar3 + 1;
            lVar2 = lVar2 + 0x20;
          } while (uVar3 < *(ulong *)this);
          lVar2 = *(long *)(this + 0x10);
        }
        lVar4 = *(ulong *)(this + 8) << 5;
        if (lVar4 < 0) {
          lVar4 = -0x8000000000000000;
        }
        if (0x7ffffffffffffff < *(ulong *)(this + 8)) {
          lVar4 = -0x8000000000000000;
        }
        lVar4 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(rect_pair_t*,unsigned_long)::kalloc_type_view_29,
                                   lVar2,lVar4);
      }
      *(long *)(this + 0x10) = lVar5;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar4 >> 8),1);
    }
  }
  return 0;
}



void __GLOBAL__sub_I_IGAccelResource_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelResource::gMetaClass,"IGAccelResource",
             (OSMetaClass *)__got::gMetaClass,0x270);
  IGAccelResource::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelResource::gMetaClass);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// intelPopulateStaticDeviceSettings(IntelStaticSkuFeatureTableExRec*, IOAccelConfig*)

void __cdecl intelPopulateStaticDeviceSettings(ulong *param_1)

{
  *param_1 = *param_1 & 0xfffffffffffffffc | 2;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// intelPopulateGlobalDeviceSettings(IntelGlobalSkuFeatureTableExRec*, IOAccelConfig*)

void __cdecl intelPopulateGlobalDeviceSettings(byte *param_1)

{
  *param_1 = *param_1 & 0xfe;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// intelPopulateSharedDeviceSettings(IntelSharedSkuFeatureTableExRec*, IOAccelConfig*)

void __cdecl intelPopulateSharedDeviceSettings(ulong *param_1)

{
  *param_1 = *param_1 & 0xfffffffffffffffc | 1;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// intelApplyDeviceSettingsRules(IntelSkuFeatureTableExPtrsRec*, IOAccelConfig*)

void __cdecl intelApplyDeviceSettingsRules(long param_1)

{
  if ((**(uint **)(param_1 + 0x10) & 3) == 2) {
    _IOLog(
          "[IGPU] Warning: Failed to enable PTBR user-preference.  PTBR requires POSH to be enabled.\n"
          );
    _kprintf(
            "[IGPU] Warning: Failed to enable PTBR user-preference.  PTBR requires POSH to be enabled.\n"
            );
    **(ulong **)(param_1 + 0x10) = **(ulong **)(param_1 + 0x10) & 0xfffffffffffffffd;
  }
  return;
}



// IGAccelVideoContextVEBox::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextVEBox::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextVEBox",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextVEBox::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextVEBox::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelVideoContextVEBox::IGAccelVideoContextVEBox(OSMetaClass const*)

void __thiscall
IGAccelVideoContextVEBox::IGAccelVideoContextVEBox
          (IGAccelVideoContextVEBox *this,OSMetaClass *param_1)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextVEBox;
  return;
}



// IGAccelVideoContextVEBox::IGAccelVideoContextVEBox(OSMetaClass const*)

void __thiscall
IGAccelVideoContextVEBox::IGAccelVideoContextVEBox
          (IGAccelVideoContextVEBox *this,OSMetaClass *param_1)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContextVEBox;
  return;
}



// IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox()

void __thiscall IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox()

void __thiscall IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox()

void __thiscall IGAccelVideoContextVEBox::~IGAccelVideoContextVEBox(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::~IGAccelVideoContext((IGAccelVideoContext *)this);
  _OSObject_typed_operator_delete(&IGAccelVideoContextVEBox_ktv,this,0x13c8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextVEBox::operator delete(void*, unsigned long)

void __cdecl IGAccelVideoContextVEBox::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelVideoContextVEBox_ktv,param_1,param_2);
  return;
}



// IGAccelVideoContextVEBox::getMetaClass() const

undefined8 * IGAccelVideoContextVEBox::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelVideoContextVEBox::MetaClass::MetaClass()

void __thiscall IGAccelVideoContextVEBox::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContextVEBox",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContextVEBox::MetaClass::alloc() const

IGAccelVideoContext * IGAccelVideoContextVEBox::MetaClass::alloc(void)

{
  IGAccelVideoContext *this;
  
  this = (IGAccelVideoContext *)_OSObject_typed_operator_new(&IGAccelVideoContextVEBox_ktv,0x13c8);
  IGAccelVideoContext::IGAccelVideoContext
            (this,(OSMetaClass *)&IGAccelVideoContextVEBox::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextVEBox;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelVideoContextVEBox::operator new(unsigned long)

void * __thiscall IGAccelVideoContextVEBox::operator_new(IGAccelVideoContextVEBox *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelVideoContextVEBox_ktv,this);
  return pvVar1;
}



// IGAccelVideoContextVEBox::IGAccelVideoContextVEBox()

void __thiscall IGAccelVideoContextVEBox::IGAccelVideoContextVEBox(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextVEBox;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContextVEBox::IGAccelVideoContextVEBox()

void __thiscall IGAccelVideoContextVEBox::IGAccelVideoContextVEBox(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::IGAccelVideoContext((IGAccelVideoContext *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContextVEBox;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContextVEBox::contextStart()

void __thiscall IGAccelVideoContextVEBox::contextStart(IGAccelVideoContextVEBox *this)

{
  undefined4 uVar1;
  
  uVar1 = IGAccelVideoContext::contextStart((IGAccelVideoContext *)this);
  if ((char)uVar1 != '\0') {
    *(undefined ***)(this + 0x13b8) = &contextStart()::token_process_methods;
    *(undefined ***)(this + 0x13c0) = &contextStart()::token_discard_methods;
  }
  return;
}



// IGAccelVideoContextVEBox::process_token_VPHAL(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextVEBox::process_token_VPHAL(IGAccelVideoContextVEBox *this,long *param_1)

{
  if (*(uint **)(this + 0x628) < (uint *)(param_1[3] + 0x14)) {
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
    return;
  }
  patch_vphal_command_buffer(this,param_1,(uint *)(param_1[3] + 0x14));
  return;
}



// IGAccelVideoContextVEBox::discard_token_Noop(IOAccelCommandStreamInfo&)

void IGAccelVideoContextVEBox::discard_token_Noop(void)

{
  return;
}



// IGAccelVideoContextVEBox::contextStop()

void __thiscall IGAccelVideoContextVEBox::contextStop(IGAccelVideoContextVEBox *this)

{
  IGAccelVideoContext::contextStop((IGAccelVideoContext *)this);
  return;
}



// IGAccelVideoContextVEBox::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelVideoContextVEBox::getTargetAndMethodForIndex
          (IGAccelVideoContextVEBox *this,undefined8 *param_1,int param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 == 0x105) {
    return *(long *)(this + 0x13b0);
  }
  lVar1 = IGAccelVideoContext::getTargetAndMethodForIndex
                    ((IGAccelVideoContext *)this,param_1,param_2);
  return lVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextVEBox::processDataBuffers(unsigned int)

undefined4 __cdecl IGAccelVideoContextVEBox::processDataBuffers(IGAccelVideoContext *param_1)

{
  undefined4 uVar1;
  long lVar2;
  IGHardwareContext *pIVar3;
  
  if (*(long *)(param_1 + 0x1370) == 0) {
    IOGraphicsAccelerator2::acceleratorWaitEnabled();
    lVar2 = (**(code **)(*(long *)param_1 + 0x968))(param_1);
    pIVar3 = IGHardwareContext::withOptions
                       (lVar2,(undefined8 *)&g_cInitGfxHwCtxParamsForVideoEnhancement,2);
    *(IGHardwareContext **)(param_1 + 0x1370) = pIVar3;
    if (pIVar3 == (IGHardwareContext *)0x0) {
      return 0x80000000;
    }
  }
  IOGraphicsAccelerator2::acceleratorWaitEnabled();
  IGAccelVideoContext::getChannel(param_1);
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18),
             *(undefined8 *)(param_1 + 0x1390));
  IGAccelVideoContext::getChannel(param_1);
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(param_1 + 0x1370) + 0x80) = *(undefined8 *)(param_1 + 0x1390);
  uVar1 = IOAccelVideoContext2::processDataBuffers((uint)param_1);
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18));
  return uVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContextVEBox::beginCommandStream(IOAccelCommandStreamInfo&)

void __cdecl IGAccelVideoContextVEBox::beginCommandStream(long param_1)

{
  IGAccelVideoContext::beginCommandStream(param_1);
  return;
}



// IGAccelVideoContextVEBox::endCommandStream(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextVEBox::endCommandStream
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,
          IGAccelVideoContextVEBox *this,long param_10)

{
  IGAccelVideoContext::endCommandStream
            (param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this,param_10);
  return;
}



// IGAccelVideoContextVEBox::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextVEBox::processSidebandToken(IGAccelVideoContextVEBox *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  
  if ((uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0x30)) >> 2 < *(uint *)(param_1 + 0x34))
  {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if (*(char *)(param_1 + 0x21) == -0x71) {
    UNRECOVERED_JUMPTABLE = (code *)**(ulong **)(this + 0x13b8);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE + *(long *)(this + (*(ulong **)(this + 0x13b8))[1]) + -1
                     );
    }
                    // WARNING: Could not recover jumptable at 0x00073e29. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::processSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// IGAccelVideoContextVEBox::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContextVEBox::discardSidebandToken(IGAccelVideoContextVEBox *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  
  if (*(char *)(param_1 + 0x21) == -0x71) {
    UNRECOVERED_JUMPTABLE = (code *)**(ulong **)(this + 0x13c0);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE + *(long *)(this + (*(ulong **)(this + 0x13c0))[1]) + -1
                     );
    }
                    // WARNING: Could not recover jumptable at 0x00073e67. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  IGAccelVideoContext::discardSidebandToken((IGAccelVideoContext *)this,param_1);
  return;
}



// IGAccelVideoContextVEBox::patch_vphal_command_buffer(IOAccelCommandStreamInfo&,
// _VPHAL_VEBOX_TOKEN_MERCURY*)

void __thiscall
IGAccelVideoContextVEBox::patch_vphal_command_buffer
          (IGAccelVideoContextVEBox *this,long *param_1,uint *param_2)

{
  long lVar1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  byte bVar6;
  ulong uVar7;
  int iVar8;
  uint *puVar9;
  undefined8 local_50;
  long local_48;
  ulong local_40;
  uint local_34;
  
  local_50 = 0;
  local_40 = 0;
  local_48 = 0;
  local_34 = 0;
  if (*(uint **)(this + 0x628) < param_2 + 3) {
LAB_00073eae:
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    uVar3 = *param_2;
    if ((uVar3 & 1) != 0) {
      lVar1 = *param_1;
      puVar9 = param_2 + 6;
      do {
        cVar2 = (**(code **)(*(long *)this + 0xb78))
                          (this,param_1,(short)puVar9[-5],&local_50,&local_40,&local_34,
                           (uVar3 & 8) >> 3);
        if (cVar2 == '\0') {
          return;
        }
        uVar3 = puVar9[-6];
        uVar4 = uVar3 >> 1 & 3;
        if (uVar4 == 1) {
          uVar5 = (ulong)local_34;
LAB_00073f6c:
          uVar7 = (ulong)(uVar3 >> 4 & 0xfff);
          if ((ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1] < lVar1 + uVar7 * 4 + 4)
          goto LAB_00073eae;
          bVar6 = (byte)(uVar3 >> 0x10);
          iVar8 = (int)(uVar5 >> (bVar6 & 0x1f));
          if ((uVar3 >> 0x15 & 1) == 0) {
            iVar8 = (int)uVar5 << (bVar6 & 0x1f);
          }
          *(uint *)(lVar1 + uVar7 * 4) = iVar8 + puVar9[-4];
          if (*(uint **)(this + 0x628) < puVar9) goto LAB_00073eae;
        }
        else {
          if (uVar4 == 2) {
            cVar2 = (**(code **)(*(long *)this + 0xb78))
                              (this,param_1,*(undefined2 *)((long)puVar9 + -0x12),&local_50,
                               &local_48,&local_34,(uVar3 & 8) >> 3);
            if (cVar2 == '\0') {
              return;
            }
            uVar3 = puVar9[-6];
            uVar5 = (local_48 - local_40) / (ulong)local_34;
            goto LAB_00073f6c;
          }
          uVar5 = local_40;
          if (uVar4 != 3) goto LAB_00073f6c;
        }
        uVar3 = puVar9[-3];
        puVar9 = puVar9 + 3;
      } while ((uVar3 & 1) != 0);
    }
  }
  return;
}



// IGAccelVideoContextVEBox::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContextVEBox::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



void __GLOBAL__sub_I_IGAccelVideoContextVEBox_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelVideoContextVEBox::gMetaClass,"IGAccelVideoContextVEBox",
             (OSMetaClass *)&IGAccelVideoContext::gMetaClass,0x13c8);
  IGAccelVideoContextVEBox::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelVideoContextVEBox::gMetaClass);
  return;
}



// IGSupportMDAPI::getDeviceInfo(unsigned long long, long long&)

uint __thiscall IGSupportMDAPI::getDeviceInfo(IGSupportMDAPI *this,long param_1,undefined8 *param_2)

{
  ulong uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  IntelAccelerator *this_00;
  
  *param_2 = 0;
  if (param_1 < 0x3fa) {
    if (param_1 == 0x3eb) {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      uVar4 = 0x1c2;
      if ((*(uint *)(*(long *)(this_00 + 0x1270) + 0x42014) >> 0x18 & 1) == 0) {
        uVar5 = 0xc000000;
        uVar2 = *(uint *)((long)&__const::_RESERVEDIORegistryEntry12 + *(long *)(this_00 + 0x1270))
                & 0xc000000;
        do {
          uVar3 = uVar2;
          uVar2 = uVar3 >> 1;
          uVar1 = uVar5 & 2;
          uVar5 = uVar5 >> 1;
        } while (uVar1 == 0);
        uVar4 = 0;
        if (uVar3 < 8) {
          uVar4 = *(uint *)(&DAT_00113e50 + (ulong)uVar2 * 4);
        }
      }
    }
    else {
      if (param_1 == 0x3ee) {
        IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
        uVar4 = *(uint *)((long)&nlist_00145948.n_strx +
                         *(long *)(*(IntelAccelerator **)this + 0x1270));
        IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,0);
        return ((uVar4 >> 0xb & 0x1ff) * 100) / 6;
      }
      if (param_1 != 0x3ef) {
LAB_00074240:
        *param_2 = 0xffffffffffffffff;
        return 0;
      }
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      uVar2 = (*(uint *)((long)&nlist_00145df8.n_value + *(long *)(this_00 + 0x1270) + 4) & 0xff) *
              0x7f28008;
      uVar4 = 800000000;
      if (uVar2 != 0) {
        uVar4 = uVar2;
      }
    }
  }
  else {
    if (param_1 == 0x3fa) {
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      uVar4 = ~*(uint *)(*(long *)(this_00 + 0x1270) + 0x9134);
    }
    else {
      if (param_1 != 0x3fc) {
        if (param_1 != 0x3ff) goto LAB_00074240;
        IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
        this_00 = *(IntelAccelerator **)this;
        uVar4 = ~*(uint *)(*(long *)(this_00 + 0x1270) + 0x913c);
        goto LAB_00074230;
      }
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      uVar4 = *(uint *)(*(long *)(this_00 + 0x1270) + 0x9138);
    }
    uVar4 = uVar4 & 0xff;
  }
LAB_00074230:
  IntelAccelerator::SafeForceWake(this_00,0);
  return uVar4;
}



// IGSupportMDAPI::initializeOaBuffer(MDAPIOABufferReportType, unsigned int, unsigned int, unsigned
// int*, MDAPIOABufferOverrunMode, bool)

undefined8 __thiscall
IGSupportMDAPI::initializeOaBuffer
          (IGSupportMDAPI *this,uint param_1,int param_2,uint param_3,uint *param_4,uint param_5,
          char param_6)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  IGSharedMappedBuffer *this_00;
  long lVar5;
  long *plVar6;
  void *pvVar7;
  void *pvVar8;
  ulong uVar9;
  undefined8 uVar10;
  
  if (param_6 == '\0') {
    if (*(int *)(this + 0x34) + *(int *)(this + 0x38) == 0) goto LAB_0007428e;
    *(int *)(this + 0x38) = *(int *)(this + 0x38) + 1;
    uVar10 = 0;
  }
  else {
    if (*(int *)(this + 0x34) == 0) {
LAB_0007428e:
      uVar4 = 0x20000 << ((byte)param_3 & 0x1f);
      if (6 < param_1) {
        return 0xfffffffc;
      }
      uVar1 = *(uint *)(&DAT_00113e60 + (long)(int)param_1 * 4);
      uVar2 = *(uint *)(&DAT_00113e98 + (long)(int)param_1 * 4);
      uVar9 = (ulong)uVar4;
      this_00 = IGSharedMappedBuffer::withOptions(*(long *)(*(long *)this + 0x150),uVar9,1,0);
      if (this_00 == (IGSharedMappedBuffer *)0x0) {
        return 0xffffffff;
      }
      lVar5 = IGSharedMappedBuffer::getVirtualAddress(this_00);
      if (lVar5 == 0) {
        return 0xffffffff;
      }
      plVar6 = (long *)IOBufferMemoryDescriptor::withOptions
                                 (0x10423,uVar9,*(ulong *)__got::_page_size);
      if ((plVar6 != (long *)0x0) && (lVar5 = (**(code **)(*plVar6 + 0x2e0))(), lVar5 != 0)) {
        pvVar7 = (void *)IGSharedMappedBuffer::getVirtualAddress(this_00);
        uVar3 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)this_00);
        pvVar8 = (void *)(**(code **)(*plVar6 + 0x2e0))();
        _memset(pvVar8,0xaa,uVar9);
        _memset(pvVar7,0xbb,uVar9);
        if (*(long *)(this + 8) != 0) {
          if (*(long **)(this + 0x10) != (long *)0x0) {
            (**(code **)(**(long **)(this + 0x10) + 0x28))();
          }
          if (*(long **)(this + 0x18) != (long *)0x0) {
            (**(code **)(**(long **)(this + 0x18) + 0x28))();
          }
          *(undefined8 *)(this + 0x18) = 0;
          if (*(long **)(this + 8) != (long *)0x0) {
            (**(code **)(**(long **)(this + 8) + 0x28))();
          }
        }
        *(IGSharedMappedBuffer **)(this + 8) = this_00;
        *(undefined8 *)(this + 0x10) = 0;
        *(long **)(this + 0x18) = plVar6;
        *(uint *)(this + 0x28) = uVar4;
        *(uint *)(this + 0x2c) = uVar2;
        *(int *)(this + 0x30) = param_2;
        uVar9 = (ulong)((uVar4 / uVar2 - 1) * uVar2);
        *(ulong *)(this + 0x20) = (long)pvVar7 + uVar9;
        *(undefined4 *)((long)pvVar7 + uVar9) = 0xaaaaaaaa;
        uVar4 = uVar3 & 0xffffffc0;
        *(uint *)(this + 0x44) = *(uint *)(this + 0x44) & 0x3f | uVar4;
        *(uint *)(this + 0x48) = *(uint *)(this + 0x48) & 0x3f | uVar4;
        *(uint *)(this + 0x40) =
             uVar4 + ((param_5 & 1) * 2 + (param_3 & 7) * 8 | *(uint *)(this + 0x40) & 4) + 1;
        this[0x4c] = (IGSupportMDAPI)((byte)this[0x4c] | 1);
        *(uint *)(this + 0x50) =
             (uint)(param_2 != 0) * 2 | uVar1 | *(uint *)(this + 0x50) & 0xffffffe0 | 1;
        if (param_6 == '\0') {
          *(int *)(this + 0x38) = *(int *)(this + 0x38) + 1;
        }
        else {
          *(int *)(this + 0x34) = *(int *)(this + 0x34) + 1;
        }
        if (param_4 == (uint *)0x0) {
          return 0;
        }
        *param_4 = uVar3;
        return 0;
      }
      (**(code **)(*(long *)this_00 + 0x28))();
      return 0xffffffff;
    }
    uVar10 = 0xffffffff;
  }
  if (param_4 != (uint *)0x0) {
    uVar4 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 8));
    *param_4 = uVar4;
  }
  return uVar10;
}



// IGSupportMDAPI::decodeOaBufferSize(unsigned int)

int __thiscall IGSupportMDAPI::decodeOaBufferSize(undefined8 param_1_00,byte param_2)

{
  return 0x20000 << (param_2 & 0x1f);
}



// IGSupportMDAPI::convertReportTypeToCounterSelect(MDAPIOABufferReportType, unsigned int*, unsigned
// int*)

bool __thiscall
IGSupportMDAPI::convertReportTypeToCounterSelect
          (undefined8 param_1_00,uint param_2,undefined4 *param_3,undefined4 *param_4)

{
  undefined4 uVar1;
  
  if (param_2 < 7) {
    uVar1 = *(undefined4 *)(&DAT_00113e98 + (long)(int)param_2 * 4);
    *param_3 = *(undefined4 *)(&DAT_00113e7c + (long)(int)param_2 * 4);
    *param_4 = uVar1;
  }
  return param_2 < 7;
}



// IGSupportMDAPI::finalizeOaBuffer(bool, unsigned int*)

undefined8 __thiscall
IGSupportMDAPI::finalizeOaBuffer(IGSupportMDAPI *this,char param_1,undefined4 *param_2)

{
  int iVar1;
  IntelAccelerator *this_00;
  long lVar2;
  int iVar3;
  undefined8 uVar4;
  int iVar5;
  
  iVar3 = *(int *)(this + 0x34);
  iVar1 = *(int *)(this + 0x38);
  iVar5 = -iVar1;
  if (iVar3 != iVar5) {
    if (param_1 == '\0') {
      *(int *)(this + 0x38) = iVar1 + -1;
      iVar5 = 1 - iVar1;
    }
    else {
      iVar3 = iVar3 + -1;
      *(int *)(this + 0x34) = iVar3;
    }
    if (iVar3 == iVar5) {
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined4 *)(this + 0x50) = 0;
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      lVar2 = *(long *)(this_00 + 0x1270);
      *(undefined4 *)(lVar2 + 0x2360) = *(undefined4 *)(this + 0x4c);
      *(undefined4 *)(lVar2 + 0x2b00) = *(undefined4 *)(this + 0x50);
      *(undefined4 *)(lVar2 + 0x2b0c) = *(undefined4 *)(this + 0x44);
      *(undefined4 *)(lVar2 + 0x2b14) = *(undefined4 *)(this + 0x40);
      *(undefined4 *)(lVar2 + 0x2b10) = *(undefined4 *)(this + 0x48);
      *(undefined4 *)(lVar2 + 0x2b04) = *(undefined4 *)(this + 0x54);
      IntelAccelerator::SafeForceWake(this_00,0);
      *param_2 = *(undefined4 *)(this + 0x4c);
      uVar4 = (**(code **)(**(long **)(this + 0x18) + 0x2e0))();
      ___bzero(uVar4,*(undefined4 *)(this + 0x28));
      uVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 8));
      ___bzero(uVar4,*(undefined4 *)(this + 0x28));
      if (*(long **)(this + 0x10) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
      }
      if (*(long **)(this + 0x18) != (long *)0x0) {
        (**(code **)(**(long **)(this + 0x18) + 0x28))();
      }
      *(undefined8 *)(this + 0x18) = 0;
      if (*(long **)(this + 8) != (long *)0x0) {
        (**(code **)(**(long **)(this + 8) + 0x28))();
      }
      *(undefined8 *)(this + 8) = 0;
      *(undefined8 *)(this + 0x10) = 0;
      *(undefined8 *)(this + 0x18) = 0;
      *(undefined8 *)(this + 0x20) = 0;
      *(undefined8 *)(this + 0x28) = 0;
      *(undefined8 *)(this + 0x30) = 0;
      *(undefined8 *)(this + 0x38) = 0;
    }
  }
  return 0;
}



// IGSupportMDAPI::setOaBufferTimer(bool, unsigned int)

void __thiscall IGSupportMDAPI::setOaBufferTimer(IGSupportMDAPI *this,uint param_2_00,uint param_2)

{
  *(uint *)(this + 0x4c) =
       (*(uint *)(this + 0x4c) & 0xffffff01) + (param_2 & 0x3f) * 4 + param_2_00 * 2;
  *(uint *)(this + 0x50) = *(uint *)(this + 0x50) & 0xfffffffe | param_2_00;
  return;
}



// IGSupportMDAPI::setOaBufferTimerState(bool, unsigned int, unsigned int)

void __thiscall
IGSupportMDAPI::setOaBufferTimerState(IGSupportMDAPI *this,int param_2_00,uint param_2,uint param_3)

{
  IntelAccelerator *this_00;
  long lVar1;
  uint uVar2;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
  uVar2 = 0;
  if ((param_2_00 != 0) && (uVar2 = 2, (*(uint *)(this + 0x4c) & 2) == 0)) {
    *(uint *)(this + 0x44) = *(uint *)(this + 0x44) & 0x3f | *(uint *)(this + 0x40) & 0xffffffc0;
    *(uint *)(this + 0x48) = *(uint *)(this + 0x48) & 0x3f | *(uint *)(this + 0x40) & 0xffffffc0;
  }
  *(uint *)(this + 0x4c) = (*(uint *)(this + 0x4c) & 0xffffff01) + (param_2 & 0x3f) * 4 | uVar2;
  *(uint *)(this + 0x50) = *(uint *)(this + 0x50) & 0xfffffffe | uVar2 >> 1;
  *(uint *)(this + 0x54) = (param_3 & 0x26) << 0x10 | *(uint *)(this + 0x54) | param_3 & 0x26;
  this_00 = *(IntelAccelerator **)this;
  lVar1 = *(long *)(this_00 + 0x1270);
  *(undefined4 *)(lVar1 + 0x2b0c) = *(undefined4 *)(this + 0x44);
  *(undefined4 *)(lVar1 + 0x2b14) = *(undefined4 *)(this + 0x40);
  *(undefined4 *)(lVar1 + 0x2b10) = *(undefined4 *)(this + 0x48);
  *(undefined4 *)(lVar1 + 0x2360) = *(undefined4 *)(this + 0x4c);
  *(undefined4 *)(lVar1 + 0x2b04) = *(undefined4 *)(this + 0x54);
  *(undefined4 *)(lVar1 + 0x2b00) = *(undefined4 *)(this + 0x50);
  *(undefined4 *)(*(long *)(this_00 + 0xf18) + 0x10) = *(undefined4 *)(this + 0x4c);
  IntelAccelerator::SafeForceWake(this_00,0);
  return;
}



// IGSupportMDAPI::enableOaBufferCollection(unsigned int*)

undefined8 __thiscall
IGSupportMDAPI::enableOaBufferCollection(IGSupportMDAPI *this,undefined4 *param_1)

{
  uint uVar1;
  IntelAccelerator *this_00;
  long lVar2;
  undefined8 uVar3;
  
  uVar3 = 0xffffffff;
  if (*(int *)(this + 0x34) + *(int *)(this + 0x38) != 0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
    this_00 = *(IntelAccelerator **)this;
    lVar2 = *(long *)(this_00 + 0x1270);
    *(undefined4 *)(lVar2 + 0x2b0c) = *(undefined4 *)(this + 0x44);
    *(undefined4 *)(lVar2 + 0x2b14) = *(undefined4 *)(this + 0x40);
    *(undefined4 *)(lVar2 + 0x2b10) = *(undefined4 *)(this + 0x48);
    *(undefined4 *)(lVar2 + 0x2360) = *(undefined4 *)(this + 0x4c);
    uVar1 = *(uint *)(lVar2 + 0x2b04);
    *(uint *)(this + 0x54) = uVar1;
    if (((byte)this[0x4c] & 2) != 0) {
      *(uint *)(lVar2 + 0x2b04) = uVar1 | 0x200020;
    }
    *(undefined4 *)(lVar2 + 0x2b00) = *(undefined4 *)(this + 0x50);
    *param_1 = *(undefined4 *)(this + 0x4c);
    uVar3 = 0;
    IntelAccelerator::SafeForceWake(this_00,0);
  }
  return uVar3;
}



// IGSupportMDAPI::disableOABufferCollection(unsigned int*)

undefined8 __thiscall
IGSupportMDAPI::disableOABufferCollection(IGSupportMDAPI *this,undefined4 *param_1)

{
  IntelAccelerator *this_00;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
  this_00 = *(IntelAccelerator **)this;
  *(undefined4 *)(*(long *)(this_00 + 0x1270) + 0x2360) = 1;
  IntelAccelerator::SafeForceWake(this_00,0);
  *param_1 = 1;
  return 0;
}



// IGSupportMDAPI::readOABuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*)

undefined8 __thiscall IGSupportMDAPI::readOABuffer(IGSupportMDAPI *this,long param_1,int *param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  void *pvVar4;
  long lVar5;
  ulong uVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  IntelAccelerator *this_00;
  uint uVar11;
  int iVar12;
  uint uVar13;
  uint uVar14;
  undefined8 uVar15;
  uint uVar16;
  
  if (*(uint *)(this + 0x28) == 0) {
    uVar15 = 0xffffffff;
  }
  else {
    uVar15 = 0xfffffff9;
    if (*(uint *)(param_1 + 0x14) < *(uint *)(this + 0x28)) {
      uVar16 = *(uint *)(param_1 + 8);
      uVar13 = *(uint *)(param_1 + 0xc);
      iVar3 = *(int *)(param_1 + 0x10);
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
      this_00 = *(IntelAccelerator **)this;
      lVar5 = *(long *)(this_00 + 0x1270);
      uVar14 = *(uint *)(lVar5 + 0x2b0c) & 0xffffffc0;
      iVar8 = (*(uint *)(lVar5 + 0x2b10) & 0xffffffc0) - uVar14;
      if ((iVar8 == 0) && (**(int **)(this + 0x20) != -0x55555556)) {
        uVar11 = *(uint *)(this + 0x28);
        uVar9 = uVar11;
      }
      else {
        uVar11 = *(uint *)(this + 0x28);
        uVar9 = uVar11 - 1 & iVar8 + uVar11;
      }
      uVar1 = *(uint *)(this + 0x2c);
      iVar8 = 0;
      uVar9 = uVar9 / uVar1;
      uVar2 = uVar16 / uVar1;
      uVar7 = *(uint *)(lVar5 + 0x2b08) & 3;
      param_2[1] = uVar7;
      uVar10 = uVar9;
      if (uVar2 <= uVar9) {
        if (((uVar13 & 1) == 0) || (iVar8 = uVar9 - uVar2, iVar8 == 0)) {
          iVar8 = 0;
        }
        else {
          uVar7 = uVar7 | 4;
          param_2[1] = uVar7;
        }
        uVar10 = uVar2;
        if (uVar2 < uVar9) {
          param_2[1] = uVar7 | 8;
        }
      }
      if ((iVar3 != 0) && (uVar10 != 0)) {
        uVar11 = uVar11 - 1;
        pvVar4 = (void *)(**(code **)(**(long **)(this + 0x18) + 0x2e0))
                                   (*(long **)(this + 0x18),(ulong)uVar1,
                                    (ulong)uVar16 % (ulong)uVar1);
        lVar5 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 8));
        iVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 8));
        if (*(int *)(param_1 + 0x18) == 0) {
          iVar12 = *(int *)(this + 0x2c);
          uVar16 = iVar8 * iVar12 + (uVar14 - iVar3) & uVar11;
        }
        else {
          uVar16 = *(uint *)(param_1 + 0x14);
          iVar12 = *(int *)(this + 0x2c);
        }
        uVar13 = iVar12 * uVar10 + uVar16 & uVar11;
        if (uVar13 <= uVar16) {
          _memmove(pvVar4,(void *)((ulong)uVar16 + lVar5),(ulong)(*(int *)(this + 0x28) - uVar16));
          pvVar4 = (void *)((long)pvVar4 + (ulong)(*(int *)(this + 0x28) - uVar16));
          uVar16 = 0;
        }
        _memmove(pvVar4,(void *)((ulong)uVar16 + lVar5),(ulong)(uVar13 - uVar16));
        uVar6 = (ulong)((*(int *)(this + 0x28) + uVar13) - *(int *)(this + 0x2c) & uVar11);
        *(ulong *)(this + 0x20) = lVar5 + uVar6;
        *(undefined4 *)(lVar5 + uVar6) = 0xaaaaaaaa;
        uVar16 = *(uint *)(this + 0x44) & 0x3f | iVar3 + uVar13 & 0xffffffc0;
        *(uint *)(this + 0x44) = uVar16;
        this_00 = *(IntelAccelerator **)this;
        *(uint *)(*(long *)(this_00 + 0x1270) + 0x2b0c) = uVar16;
      }
      uVar15 = 0;
      IntelAccelerator::SafeForceWake(this_00,0);
      *param_2 = uVar10 * *(int *)(this + 0x2c);
      param_2[2] = 0;
    }
  }
  return uVar15;
}



// IGSupportMDAPI::calcOaBufferDataSize(unsigned int, unsigned int)

uint __thiscall IGSupportMDAPI::calcOaBufferDataSize(IGSupportMDAPI *this,uint param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  
  iVar2 = (param_2 & 0xffffffc0) - (param_1 & 0xffffffc0);
  if ((iVar2 == 0) && (**(int **)(this + 0x20) != -0x55555556)) {
    uVar1 = *(uint *)(this + 0x28);
  }
  else {
    uVar1 = *(int *)(this + 0x28) - 1U & iVar2 + *(int *)(this + 0x28);
  }
  return uVar1;
}



// IGSupportMDAPI::getOaBufferDataSize()

uint __thiscall IGSupportMDAPI::getOaBufferDataSize(IGSupportMDAPI *this)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
  lVar2 = *(long *)(*(IntelAccelerator **)this + 0x1270);
  uVar3 = *(uint *)(lVar2 + 0x2b0c);
  uVar1 = *(uint *)(lVar2 + 0x2b10);
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,0);
  iVar4 = (uVar1 & 0xffffffc0) - (uVar3 & 0xffffffc0);
  if ((iVar4 == 0) && (**(int **)(this + 0x20) != -0x55555556)) {
    uVar3 = *(uint *)(this + 0x28);
  }
  else {
    uVar3 = *(int *)(this + 0x28) - 1U & iVar4 + *(int *)(this + 0x28);
  }
  return uVar3;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSupportMDAPI::estimateTimeUntilHalfFullOaBufferUs(unsigned int)

undefined1  [16] __cdecl
IGSupportMDAPI::estimateTimeUntilHalfFullOaBufferUs(long *param_1,uint param_2,ulong param_3)

{
  ulong uVar1;
  uint uVar2;
  undefined1 auVar3 [16];
  
  uVar1 = 0;
  uVar2 = (*(uint *)(param_1 + 5) >> 1) - param_2;
  if (param_2 <= *(uint *)(param_1 + 5) >> 1 && uVar2 != 0) {
    param_3 = (ulong)uVar2 % (ulong)*(uint *)((long)param_1 + 0x2c);
    uVar1 = (ulong)((uVar2 / *(uint *)((long)param_1 + 0x2c)) *
                   (int)(((long)(2 << (*(byte *)((long)param_1 + 0x4c) >> 2 & 0x1f)) * 1000000000) /
                        (long)(ulong)*(uint *)(&DAT_000011bc + *param_1))) / 1000;
  }
  auVar3._8_8_ = param_3;
  auVar3._0_8_ = uVar1;
  return auVar3;
}



// IGSupportMDAPI::decodeOaBufferTimerPeriod(unsigned int)

long __thiscall IGSupportMDAPI::decodeOaBufferTimerPeriod(IGSupportMDAPI *this,byte param_1)

{
  return ((long)(2 << (param_1 & 0x1f)) * 1000000000) /
         (long)(ulong)*(uint *)(&DAT_000011bc + *(long *)this);
}



// IGSupportMDAPI::mapOABufferMemory(IntelDeviceMapStatsMemInOut*, task*)

undefined4 __thiscall
IGSupportMDAPI::mapOABufferMemory(IGSupportMDAPI *this,long *param_1,ulonglong param_2)

{
  long *plVar1;
  long lVar2;
  undefined4 uVar3;
  
  uVar3 = 0xe00002be;
  if (*(long *)(this + 0x18) != 0) {
    plVar1 = *(long **)this;
    _OSIncrementAtomic(plVar1 + 0x12);
    _IOLockLock(plVar1[0x11]);
    _OSDecrementAtomic(plVar1 + 0x12);
    IOGraphicsAccelerator2::lock_busy();
    (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
    if (*(long **)(this + 0x10) != (long *)0x0) {
      (**(code **)(**(long **)(this + 0x10) + 0x28))();
      *(undefined8 *)(this + 0x10) = 0;
    }
    plVar1 = (long *)IOMemoryDescriptor::createMappingInTask
                               (*(task **)(this + 0x18),param_2,0,0x4000001,0);
    *(long **)(this + 0x10) = plVar1;
    if (plVar1 == (long *)0x0) {
      plVar1 = *(long **)this;
      (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(plVar1[0x11]);
    }
    else {
      lVar2 = (**(code **)(*plVar1 + 0x118))(plVar1);
      *param_1 = lVar2;
      plVar1 = *(long **)this;
      (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(plVar1[0x11]);
      uVar3 = 0xe00002be;
      if (lVar2 != 0) {
        uVar3 = 0;
      }
    }
  }
  return uVar3;
}



// IGSupportMDAPI::mapOABufferMemoryDirect(unsigned long long*, task*)

undefined4 __thiscall
IGSupportMDAPI::mapOABufferMemoryDirect(IGSupportMDAPI *this,long *param_1,ulonglong param_2)

{
  task *ptVar1;
  long *plVar2;
  long lVar3;
  undefined4 uVar4;
  
  uVar4 = 0xe00002be;
  if ((((*(long *)(this + 0x18) != 0) && (*(IGMappedBuffer **)(this + 8) != (IGMappedBuffer *)0x0))
      && (ptVar1 = (task *)IGMappedBuffer::getMemoryDescriptor(*(IGMappedBuffer **)(this + 8)),
         ptVar1 != (task *)0x0)) &&
     (plVar2 = (long *)IOMemoryDescriptor::createMappingInTask(ptVar1,param_2,0,0x4000001,0),
     plVar2 != (long *)0x0)) {
    lVar3 = (**(code **)(*plVar2 + 0x118))(plVar2);
    *param_1 = lVar3;
    uVar4 = 0;
    if (lVar3 == 0) {
      uVar4 = 0xe00002be;
    }
  }
  return uVar4;
}



// IGSupportMDAPI::getOABufferPointers(unsigned int*, unsigned int*)

undefined8 __thiscall
IGSupportMDAPI::getOABufferPointers(IGSupportMDAPI *this,int *param_1,int *param_2)

{
  IntelAccelerator *this_00;
  long lVar1;
  uint uVar2;
  undefined8 uVar3;
  
  uVar3 = 0xfffffff5;
  if (param_1 != (int *)0x0 || param_2 != (int *)0x0) {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
    this_00 = *(IntelAccelerator **)this;
    lVar1 = *(long *)(this_00 + 0x1270);
    uVar2 = *(uint *)(lVar1 + 0x2b14) & *(uint *)(this + 0x58);
    if (param_1 != (int *)0x0) {
      *param_1 = (*(uint *)(this + 0x58) & *(uint *)(lVar1 + 0x2b0c)) - uVar2;
    }
    if (param_2 != (int *)0x0) {
      *param_2 = (*(uint *)(lVar1 + 0x2b10) & *(uint *)(this + 0x58)) - uVar2;
    }
    uVar3 = 0;
    IntelAccelerator::SafeForceWake(this_00,0);
  }
  return uVar3;
}



// IGSupportMDAPI::setOABufferPointers(unsigned int, unsigned int, _OABufferPointerChangeFlags)

ulong __thiscall
IGSupportMDAPI::setOABufferPointers(IGSupportMDAPI *this,int param_1,int param_2,uint param_3)

{
  IntelAccelerator *this_00;
  long lVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  if ((param_3 & 3) == 0) {
    uVar4 = 0xfffffff9;
  }
  else {
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this,1);
    this_00 = *(IntelAccelerator **)this;
    lVar1 = *(long *)(this_00 + 0x1270);
    uVar4 = *(uint *)(this + 0x58);
    uVar5 = *(uint *)(lVar1 + 0x2b14) & uVar4;
    if ((param_3 & 1) != 0) {
      uVar3 = uVar5;
      if (param_1 != 0) {
        uVar2 = *(uint *)(lVar1 + 0x2b0c) & uVar4;
        uVar3 = uVar2 + param_1;
        if (*(uint *)(this + 0x28) + uVar5 <= uVar3) {
          uVar3 = ((param_1 - uVar5) + uVar2) % *(uint *)(this + 0x28) + uVar5;
        }
        uVar3 = uVar3 & uVar4;
      }
      *(uint *)(lVar1 + 0x2b0c) = uVar3;
    }
    if ((param_3 & 2) != 0) {
      if (param_2 != 0) {
        uVar3 = *(uint *)(lVar1 + 0x2b10) & *(uint *)(this + 0x58);
        uVar4 = uVar3 + param_2;
        if (*(uint *)(this + 0x28) + uVar5 <= uVar4) {
          uVar4 = ((param_2 - uVar5) + uVar3) % *(uint *)(this + 0x28) + uVar5;
        }
        uVar5 = uVar4 & *(uint *)(this + 0x58);
      }
      *(uint *)(lVar1 + 0x2b10) = uVar5;
    }
    uVar4 = 0;
    IntelAccelerator::SafeForceWake(this_00,0);
  }
  return (ulong)uVar4;
}



// IGSupportMDAPI::encodeOaBufferSize(unsigned int)

uint __thiscall IGSupportMDAPI::encodeOaBufferSize(IGSupportMDAPI *this,uint param_1)

{
  uint uVar1;
  
  uVar1 = 0xffffffff;
  do {
    uVar1 = uVar1 + 1;
    if (6 < uVar1) {
      return uVar1;
    }
  } while ((uint)(0x20000 << ((byte)uVar1 & 0x1f)) < param_1);
  return uVar1;
}



// IGSupportMDAPI::encodeOaBufferTimerPeriod(unsigned int)

int __thiscall IGSupportMDAPI::encodeOaBufferTimerPeriod(IGSupportMDAPI *this,uint param_1)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    if (param_1 <=
        (uint)(((long)(2 << ((byte)iVar1 & 0x1f)) * 1000000000) /
              (long)(ulong)*(uint *)(&DAT_000011bc + *(long *)this))) {
      return iVar1;
    }
    iVar1 = iVar1 + 1;
  } while (iVar1 != 0x3f);
  return 0x3f;
}



// IGAccelVideoContext::MetaClass::MetaClass()

void __thiscall IGAccelVideoContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContext",(OSMetaClass *)__got::gMetaClass,0x13b0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContext::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelVideoContext::IGAccelVideoContext(OSMetaClass const*)

void __thiscall
IGAccelVideoContext::IGAccelVideoContext(IGAccelVideoContext *this,OSMetaClass *param_1)

{
  IOAccelVideoContext2::IOAccelVideoContext2((IOAccelVideoContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContext;
  return;
}



// IGAccelVideoContext::IGAccelVideoContext(OSMetaClass const*)

void __thiscall
IGAccelVideoContext::IGAccelVideoContext(IGAccelVideoContext *this,OSMetaClass *param_1)

{
  IOAccelVideoContext2::IOAccelVideoContext2((IOAccelVideoContext2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelVideoContext;
  return;
}



// IGAccelVideoContext::~IGAccelVideoContext()

void __thiscall IGAccelVideoContext::~IGAccelVideoContext(IGAccelVideoContext *this)

{
  IOAccelVideoContext2::~IOAccelVideoContext2((IOAccelVideoContext2 *)this);
  return;
}



// IGAccelVideoContext::~IGAccelVideoContext()

void __thiscall IGAccelVideoContext::~IGAccelVideoContext(IGAccelVideoContext *this)

{
  IOAccelVideoContext2::~IOAccelVideoContext2((IOAccelVideoContext2 *)this);
  return;
}



// IGAccelVideoContext::~IGAccelVideoContext()

void __thiscall IGAccelVideoContext::~IGAccelVideoContext(IGAccelVideoContext *this)

{
  IOAccelVideoContext2::~IOAccelVideoContext2((IOAccelVideoContext2 *)this);
  _OSObject_typed_operator_delete(&IGAccelVideoContext_ktv,this,&DAT_000013b0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::operator delete(void*, unsigned long)

void __cdecl IGAccelVideoContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelVideoContext_ktv,param_1,param_2);
  return;
}



// IGAccelVideoContext::getMetaClass() const

undefined1 * IGAccelVideoContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelVideoContext::MetaClass::MetaClass()

void __thiscall IGAccelVideoContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelVideoContext",(OSMetaClass *)__got::gMetaClass,0x13b0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelVideoContext::MetaClass::alloc() const

IOAccelVideoContext2 * IGAccelVideoContext::MetaClass::alloc(void)

{
  IOAccelVideoContext2 *this;
  
  this = (IOAccelVideoContext2 *)
         _OSObject_typed_operator_new(&IGAccelVideoContext_ktv,&DAT_000013b0);
  IOAccelVideoContext2::IOAccelVideoContext2(this,(OSMetaClass *)&IGAccelVideoContext::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelVideoContext::operator new(unsigned long)

void * __thiscall IGAccelVideoContext::operator_new(IGAccelVideoContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelVideoContext_ktv,this);
  return pvVar1;
}



// IGAccelVideoContext::IGAccelVideoContext()

void __thiscall IGAccelVideoContext::IGAccelVideoContext(IGAccelVideoContext *this)

{
  IOAccelVideoContext2::IOAccelVideoContext2
            ((IOAccelVideoContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelVideoContext::IGAccelVideoContext()

void __thiscall IGAccelVideoContext::IGAccelVideoContext(IGAccelVideoContext *this)

{
  IOAccelVideoContext2::IOAccelVideoContext2
            ((IOAccelVideoContext2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelVideoContext;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::attach(IOService*)

void __cdecl IGAccelVideoContext::attach(long param_1)

{
  (**(code **)(__got::vtable + 0x680))();
  *(undefined ***)(&DAT_00001398 + param_1) = &attach(IOService*)::method_descs;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::get_iosurface_accel_id(sIntelVideoMethodArgsGetAcceleratorId*, unsigned long
// long*)

undefined8 __cdecl IGAccelVideoContext::get_iosurface_accel_id(long param_1,undefined4 *param_2)

{
  *param_2 = *(undefined4 *)(*(long *)(param_1 + 0x5a8) + 0x178);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::update_perf_capability(sIntelVideoMethodArgsPerfCapabilityIn*, unsigned long
// long)

int __cdecl IGAccelVideoContext::update_perf_capability(long param_1,int *param_2)

{
  int iVar1;
  
  iVar1 = IntelAccelerator::updateVideoPerfCapability
                    (*(IntelAccelerator **)(param_1 + 0x5a8),*param_2,param_2 + 1);
  if (iVar1 == 0) {
    iVar1 = *param_2;
    if (iVar1 == 0) {
      *(int *)(&DAT_00001360 + param_1) = *(int *)(&DAT_00001360 + param_1) - param_2[1];
      *(int *)(&DAT_00001364 + param_1) = *(int *)(&DAT_00001364 + param_1) - param_2[2];
    }
    else {
      *(int *)(&DAT_00001360 + param_1) = *(int *)(&DAT_00001360 + param_1) + param_2[1];
      *(int *)(&DAT_00001364 + param_1) = *(int *)(&DAT_00001364 + param_1) + param_2[2];
    }
    (&DAT_00001348)[param_1] = iVar1 != 0;
    iVar1 = 0;
  }
  return iVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::set_context_priority(sIntelVideoMethodArgsSetContextPriority*, unsigned long
// long)

undefined8 __cdecl IGAccelVideoContext::set_context_priority(long param_1,int *param_2)

{
  if (*param_2 < 0) {
    (&DAT_000010e8)[param_1] = 3;
  }
  return 0;
}



// IGAccelVideoContext::contextStart()

undefined4 __thiscall IGAccelVideoContext::contextStart(IGAccelVideoContext *this)

{
  undefined4 uVar1;
  long lVar2;
  long lVar3;
  
  uVar1 = (**(code **)(__got::vtable + 0x9f0))();
  if ((char)uVar1 != '\0') {
    lVar3 = *(long *)(*(long *)(this + 0x5a8) + 0xe50);
    lVar2 = 1;
    if (-2 < lVar3) {
      lVar2 = lVar3 + 1;
    }
    *(long *)(*(long *)(this + 0x5a8) + 0xe50) = lVar2;
    *(long *)(this + 0x1390) = lVar2;
    dtHookSwCtxCreation();
    this[0x10e8] = (IGAccelVideoContext)0x2;
    lVar3 = 0;
    *(undefined4 *)(this + 0x10ec) = 0;
    *(undefined4 *)(this + 0x1300) = 0;
    this[0x1304] = (IGAccelVideoContext)0x0;
    (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x140))
              (*(long **)(*(long *)(this + 0x5a8) + 0x380),this + 0x1308);
    *(undefined8 *)(this + 0x1370) = 0;
    *(undefined8 *)(this + 0x1378) = 0;
    this[0x1348] = (IGAccelVideoContext)0x0;
    *(undefined8 *)(this + 0x1360) = 0;
    *(undefined ***)(this + 0x13a0) = &contextStart()::token_process_methods;
    *(undefined ***)(this + 0x13a8) = &contextStart()::token_discard_methods;
    this[0x12f0] = (IGAccelVideoContext)0x0;
    *(undefined8 *)(this + 0x12f8) = 0;
    do {
      *(undefined4 *)(this + (long)(&DAT_000010f0 + lVar3 * 4)) = 0;
      lVar3 = lVar3 + 1;
    } while (lVar3 != 0x80);
  }
  return uVar1;
}



// IGAccelVideoContext::process_token_SetFence(IOAccelCommandStreamInfo&)

void __thiscall IGAccelVideoContext::process_token_SetFence(IGAccelVideoContext *this,long *param_1)

{
  uint uVar1;
  
  if (*(short *)((long)param_1 + 0x22) == 3) {
    if (*param_1 != 0) {
      uVar1 = *(uint *)(param_1[3] + 8);
      if (((ulong)uVar1 << 4 < (ulong)*(uint *)(this + 0x6c8)) &&
         ((ulong)uVar1 << 6 < (ulong)*(uint *)(this + 0x6d8))) {
        *(uint *)(this + 0x1300) = uVar1;
      }
    }
    return;
  }
  IOAccelContext2::setContextError((uint)this);
  return;
}



// IGAccelVideoContext::process_token_BatchBufferStart(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContext::process_token_BatchBufferStart(IGAccelVideoContext *this,long *param_1)

{
  long lVar1;
  long lVar2;
  char cVar3;
  
  lVar1 = *param_1;
  if ((-1 < lVar1 - param_1[1]) &&
     (0xb < (long)((ulong)*(uint *)(param_1 + 2) - (lVar1 - param_1[1])))) {
    if (*(short *)((long)param_1 + 0x22) != 4) {
      IOAccelContext2::setContextError((uint)this);
      return;
    }
    lVar2 = param_1[3];
    cVar3 = (**(code **)(*(long *)this + 0xb78))((uint)this,param_1,*(undefined4 *)(lVar2 + 8));
    if (cVar3 != '\0') {
      *(uint *)(lVar1 + 4) = *(uint *)(lVar2 + 0xc) & 0xfffffffc;
      *(undefined4 *)(lVar1 + 8) = 0;
    }
  }
  return;
}



// IGAccelVideoContext::process_token_CodecHAL(IOAccelCommandStreamInfo&)

void __thiscall IGAccelVideoContext::process_token_CodecHAL(IGAccelVideoContext *this,long param_1)

{
                    // WARNING: Could not recover jumptable at 0x0007538b. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0xb80))(this,param_1,*(long *)(param_1 + 0x18) + 8);
  return;
}



// IGAccelVideoContext::discard_token_Noop(IOAccelCommandStreamInfo&)

void IGAccelVideoContext::discard_token_Noop(void)

{
  return;
}



// IGAccelVideoContext::contextStop()

void __thiscall IGAccelVideoContext::contextStop(IGAccelVideoContext *this)

{
  dtHookSwCtxDestroy();
  if (*(long *)(this + 0x1370) != 0) {
    IGAccelEventMachine::finishEvent
              (*(IGAccelEventMachine **)(*(long *)(this + 0x5a8) + 0x380),this + 0x5d0,0x40);
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x1370),0);
    (**(code **)(**(long **)(this + 0x1370) + 0x28))();
    *(undefined8 *)(this + 0x1370) = 0;
  }
  if (*(IGHardwareContext **)(this + 0x1378) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete(*(IGHardwareContext **)(this + 0x1378),0);
    (**(code **)(**(long **)(this + 0x1378) + 0x28))();
    *(undefined8 *)(this + 0x1378) = 0;
  }
  if (this[0x1348] != (IGAccelVideoContext)0x0) {
    IntelAccelerator::updateVideoPerfCapability
              (*(IntelAccelerator **)(this + 0x5a8),0,(int *)(this + 0x1360));
    this[0x1348] = (IGAccelVideoContext)0x0;
  }
                    // WARNING: Could not recover jumptable at 0x0007545d. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9f8))(this);
  return;
}



// IGAccelVideoContext::populateContextConfig(IOAccelContextConfig*)

void __thiscall
IGAccelVideoContext::populateContextConfig(IGAccelVideoContext *this,undefined8 *param_1)

{
  (**(code **)(__got::vtable + 0xa98))();
  *param_1 = 0x1000000000080;
  return;
}



// IGAccelVideoContext::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelVideoContext::getTargetAndMethodForIndex
          (IGAccelVideoContext *this,undefined8 *param_1,int param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 - 0x100U < 3) {
    return (ulong)(param_2 - 0x100U) * 0x30 + *(long *)(this + 0x1398);
  }
  if (param_2 == 2) {
    IntelAccelerator::waitForDRMSessionRestore(*(IntelAccelerator **)(this + 0x5a8));
  }
                    // WARNING: Could not recover jumptable at 0x000754f8. Too many branches
                    // WARNING: Treating indirect jump as call
  lVar1 = (**(code **)(__got::vtable + 0x950))(this,param_1,param_2);
  return lVar1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::getDataBufferLimits()

undefined4 * __cdecl
IGAccelVideoContext::getDataBufferLimits(undefined4 *param_1,undefined8 param_2)

{
  ___bzero(param_1,0x308);
  (**(code **)(__got::vtable + 0xa00))(param_1,param_2);
  *param_1 = 1;
  *(undefined8 *)(param_1 + 2) = 0x100000010;
  *(undefined8 *)(param_1 + 4) = 0x10000;
  *(undefined8 *)(param_1 + 6) = 0x80000;
  param_1[0xb] = 0x300;
  return param_1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::beginCommandStream(IOAccelCommandStreamInfo&)

void __cdecl IGAccelVideoContext::beginCommandStream(long param_1)

{
  long *plVar1;
  long lVar2;
  
  *(undefined4 *)(&DAT_000010ec + param_1) = 0;
  *(undefined4 *)(&DAT_00001300 + param_1) = 0xffffffff;
  lVar2 = 0;
  (&DAT_00001304)[param_1] = 0;
  plVar1 = *(long **)(*(long *)(param_1 + 0x5a8) + 0x380);
  (**(code **)(*plVar1 + 0x148))(plVar1,&DAT_00001308 + param_1);
  (&DAT_000012f0)[param_1] = 0;
  *(undefined8 *)(&DAT_000012f8 + param_1) = 0;
  do {
    *(undefined4 *)(&DAT_000010f0 + lVar2 * 4 + param_1) = 0;
    lVar2 = lVar2 + 1;
  } while (lVar2 != 0x80);
  (&DAT_00001368)[param_1] = 0;
  IGAccelTraceStreamManager::dtracePushUnique
            ((IGAccelTraceStreamManager *)(*(long *)(param_1 + 0x5a8) + 0xe18),
             *(undefined8 *)(&DAT_00001390 + param_1));
  dtHookPrepareQueueKMD();
  *(undefined8 *)(*(long *)(&DAT_00001370 + param_1) + 0x80) =
       *(undefined8 *)(&DAT_00001390 + param_1);
  return;
}



// IGAccelVideoContext::getChannel()

undefined8 __thiscall IGAccelVideoContext::getChannel(IGAccelVideoContext *this)

{
  return *(undefined8 *)
          (*(long *)(this + (long)(&DAT_00001370 + (ulong)(byte)this[0x1368] * 8)) + 0xb0);
}



// IGAccelVideoContext::endCommandStream(IOAccelCommandStreamInfo&)

void __thiscall
IGAccelVideoContext::endCommandStream
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10)

{
  int *piVar1;
  uint uVar2;
  ulonglong uVar3;
  long *this_00;
  long lVar4;
  long *plVar5;
  void *this_01;
  char cVar6;
  long lVar7;
  long *plVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  char *pcVar9;
  char *pcVar10;
  ulong uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 extraout_XMM0_Qa;
  
  pcVar10 = *(char **)((long)this + 0x1380);
  pcVar9 = (char *)(ulong)(*(int *)(*(long *)(*(long *)(&DAT_00001370 + (long)this +
                                                       (ulong)*(byte *)((long)this + 0x1368) * 8) +
                                             0xb0) + 0x178) + 1);
  dtHookSubmitQueueKMD();
  if (*(int *)((long)this + 0x10ec) != 0) {
    uVar11 = 0;
    do {
      if ((*(char *)((long)this + 0x12f0) != '\0') &&
         (((&DAT_000010f0 + (long)this)[uVar11 * 4] & 1) != 0)) {
        IOAccelResource2::setPrefetch
                  (SUB81(*(undefined8 *)(*(long *)((long)this + 0x5b8) + uVar11 * 8),0));
      }
      if (((*(long *)((long)this + 0x12f8) != 0) &&
          (((&DAT_000010f0 + (long)this)[uVar11 * 4] & 1) != 0)) &&
         (uVar3 = *(ulonglong *)(*(long *)((long)this + 0x5b8) + uVar11 * 8),
         *(char *)(uVar3 + 0x14) == -0x7e)) {
        cVar6 = IOAccelResource2::supportsProtectionOptions(uVar3);
        if (cVar6 == '\0') {
          *(undefined1 *)(param_10 + 0x3c) = 0;
        }
      }
      uVar11 = uVar11 + 1;
    } while (uVar11 < *(uint *)((long)this + 0x10ec));
  }
  this_00 = *(long **)(*(long *)(&DAT_00001370 + (long)this +
                                (ulong)*(byte *)((long)this + 0x1368) * 8) + 0xb0);
  uVar12 = (**(code **)(*this_00 + 0x148))(this_00);
  uVar2 = *(uint *)(param_10 + 0x34);
  if (uVar2 == 0) {
    IGAccelFIFOChannel::submitStampCommand
              (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00);
  }
  else {
    if (uVar2 < 3) {
      IGAccelFIFOChannel::submitStampCommand
                (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00);
    }
    else {
      lVar4 = *(long *)((long)this + 0x5a8);
      IOSimpleReporter::incrementValue(*(ulonglong *)(*(long *)(lVar4 + 0x388) + 0x58),4);
      piVar1 = (int *)(lVar4 + 0x1b0);
      *piVar1 = *piVar1 + uVar2 * 4 + -8;
      lVar4 = *(long *)((long)this + 0xfe0);
      uVar2 = *(uint *)(param_10 + 0x30);
      *(ulong *)(*(long *)((long)this + 0x618) + 0x20) =
           (ulong)(uVar2 & 0xfffffffc) + *(long *)(param_10 + 8);
      lVar7 = (**(code **)(**(long **)(lVar4 + 0x40) + 0x128))();
      plVar8 = *(long **)((long)this + 0x618);
      plVar8[3] = lVar7 + (ulong)uVar2;
      *(int *)(plVar8 + 6) = *(int *)(param_10 + 0x34) + -2;
      if ((ulong)*(uint *)((long)this + 0x1300) != 0xffffffff) {
        (**(code **)(*this_00 + 0x140))
                  (this_00,(ulong)*(uint *)((long)this + 0x1300) * 0x40 +
                           *(long *)((long)this + 0x6a8));
        plVar8 = (long *)((ulong)*(uint *)((long)this + 0x1300) * 0x10);
        *(undefined4 *)(*(long *)((long)this + 0x6a0) + (long)plVar8) = 0;
        *(int *)(param_10 + 0x38) = *(int *)(param_10 + 0x38) + 1;
        *(undefined4 *)((long)this + 0x1300) = 0xffffffff;
      }
      if (*(char *)((long)this + 0x1304) != '\0') {
        plVar5 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
        pcVar9 = (char *)(ulong)*(uint *)(this_00 + 4);
        plVar8 = this_00;
        cVar6 = (**(code **)(*plVar5 + 0x1f0))(plVar5,0,&DAT_00001308 + (long)this);
        if (cVar6 == '\0') {
          plVar5 = *(long **)(*(long *)((long)this + 0x5a8) + 0x380);
          (**(code **)(*plVar5 + 0x198))(plVar5,&DAT_00001308 + (long)this,(int)this_00[4]);
        }
      }
      uVar12 = (**(code **)(*this_00 + 0x130))(this_00,*(undefined8 *)((long)this + 0x618));
      this_01 = *(void **)(*(long *)(*(long *)((long)this + 0x5a8) + 0xf18) + 0x250);
      if (this_01 == (void *)0x0) {
        (**(code **)(*this_00 + 0x140))(this_00,(long)this + 0x5d0);
        (**(code **)(*this_00 + 0x140))(this_00,*(long *)(lVar4 + 0x40) + 0x38);
      }
      else {
        IGTelemetryKMD::sample
                  (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_01,
                   0x10000000000,extraout_RDX,plVar8,pcVar9,pcVar10);
        (**(code **)(*this_00 + 0x140))(this_00,(long)this + 0x5d0);
        uVar13 = (**(code **)(*this_00 + 0x140))(this_00,*(long *)(lVar4 + 0x40) + 0x38);
        uVar12 = extraout_RDX_00;
        if (_graphicsTracePointEnable != 0) {
          uVar2 = *(uint *)(this_00 + 0x2f);
          plVar8 = (long *)0x0;
          pcVar9 = (char *)0x0;
          uVar13 = dtHookTrace();
          uVar12 = extraout_RDX_01;
          if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
            plVar8 = (long *)0x0;
            pcVar9 = (char *)0x0;
            pcVar10 = (char *)0x0;
            _kernel_debug(0x85a000f4,0x248,(ulong)uVar2,0,0,0);
            uVar12 = extraout_RDX_02;
            uVar13 = extraout_XMM0_Qa;
          }
        }
        IGTelemetryKMD::sample
                  (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(void **)(*(long *)(*(long *)((long)this + 0x5a8) + 0xf18) + 0x250),
                   0x20000000000,uVar12,plVar8,pcVar9,pcVar10);
      }
    }
    *(int *)(param_10 + 0x30) = *(int *)(param_10 + 0x30) + *(int *)(param_10 + 0x34) * 4;
    *(undefined8 *)(param_10 + 0x34) = 0;
  }
  IGAccelTraceStreamManager::dtracePopUnique
            ((IGAccelTraceStreamManager *)(*(long *)((long)this + 0x5a8) + 0xe18));
  return;
}



// IGAccelVideoContext::processSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelVideoContext::processSidebandToken(IGAccelVideoContext *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  long lVar1;
  
  if ((uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0x30)) >> 2 < *(uint *)(param_1 + 0x34))
  {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    return;
  }
  if ((short)*(ushort *)(param_1 + 0x20) < -32000) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x80) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13a0) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13a0) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x00075a3a. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00075a44. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa20))();
  return;
}



// IGAccelVideoContext::discardSidebandToken(IOAccelCommandStreamInfo&)

void __thiscall IGAccelVideoContext::discardSidebandToken(IGAccelVideoContext *this,long param_1)

{
  code *UNRECOVERED_JUMPTABLE;
  long lVar1;
  
  if ((short)*(ushort *)(param_1 + 0x20) < -32000) {
    lVar1 = (ulong)((*(ushort *)(param_1 + 0x20) >> 8) - 0x80) * 0x20;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(this + 0x13a8) + lVar1);
    if (((ulong)UNRECOVERED_JUMPTABLE & 1) != 0) {
      UNRECOVERED_JUMPTABLE =
           *(code **)(UNRECOVERED_JUMPTABLE +
                     *(long *)(this + *(long *)(*(long *)(this + 0x13a8) + 8 + lVar1)) + -1);
    }
                    // WARNING: Could not recover jumptable at 0x00075a84. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00075a8e. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa28))();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::addDataBufferToChannel(IOAccelResource2*, unsigned int)

void __cdecl IGAccelVideoContext::addDataBufferToChannel(long param_1,long *param_2)

{
                    // WARNING: Could not recover jumptable at 0x00075ac1. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_2 + 400))
            (param_2,*(undefined8 *)
                      (*(long *)(&DAT_00001370 + (ulong)(byte)(&DAT_00001368)[param_1] * 8 + param_1
                                ) + 0xb0),0,*(code **)(*param_2 + 400));
  return;
}



// IGAccelVideoContext::removeDataBufferFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelVideoContext::removeDataBufferFromChannel
          (IGAccelVideoContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00075aef. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)
                      (*(long *)(this + (long)(&DAT_00001370 + (ulong)(byte)this[0x1368] * 8)) +
                      0xb0),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelVideoContext::removeCurrentResourceFromChannel(IOAccelResource2*, unsigned int)

void __thiscall
IGAccelVideoContext::removeCurrentResourceFromChannel
          (IGAccelVideoContext *this,long *param_1,undefined8 param_2)

{
                    // WARNING: Could not recover jumptable at 0x00075b1d. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x198))
            (param_1,*(undefined8 *)
                      (*(long *)(this + (long)(&DAT_00001370 + (ulong)(byte)this[0x1368] * 8)) +
                      0xb0),param_2,*(code **)(*param_1 + 0x198));
  return;
}



// IGAccelVideoContext::patch_codechal_command_buffer__get_token_header(IOAccelCommandStreamInfo&,
// unsigned int*, _CODECHAL_TOKEN_HEADER**, _CODECHAL_TOKEN**)

undefined8 __thiscall
IGAccelVideoContext::patch_codechal_command_buffer__get_token_header
          (IGAccelVideoContext *this,long param_1,long param_2,long *param_3,ulong *param_4)

{
  ulong uVar1;
  undefined8 uVar2;
  
  uVar1 = *(ulong *)(this + 0x628);
  if (uVar1 < param_2 + 4U) {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    uVar2 = 0;
  }
  else {
    if (uVar1 < param_2 + 0x18U) {
      *(undefined1 *)(param_1 + 0x3c) = 0;
    }
    else {
      *param_3 = param_2;
      *param_4 = param_2 + 4U;
    }
    uVar2 = CONCAT71((int7)(uVar1 >> 8),param_2 + 0x18U <= uVar1);
  }
  return uVar2;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::patch_codechal_command_buffer__set_base_addresses(IOAccelCommandStreamInfo&,
// _CODECHAL_TOKEN*, _CODECHAL_TOKEN_HEADER*, unsigned int**, unsigned int**, unsigned int)

void __cdecl
IGAccelVideoContext::patch_codechal_command_buffer__set_base_addresses
          (long *param_1,long param_2,uint *param_3,uint *param_4,long param_5,long param_6)

{
  int *piVar1;
  long lVar2;
  int *piVar3;
  undefined8 uVar4;
  uint **ppuVar5;
  char cVar6;
  uint uVar7;
  uint *puVar8;
  uint *puVar9;
  uint *puVar10;
  ulong uVar11;
  ulong uVar12;
  byte bVar13;
  uint uVar14;
  uint **ppuVar15;
  uint *puVar16;
  char *pcVar17;
  int iVar18;
  uint uVar19;
  uint uVar20;
  bool bVar21;
  uint *local_68;
  uint **local_60;
  uint *local_58;
  undefined8 local_50;
  uint *local_48;
  uint local_3c;
  uint local_38;
  uint local_34;
  
  local_60 = &local_68;
  local_68 = (uint *)0x0;
  local_58 = (uint *)0x0;
  local_50 = 0;
  local_3c = 0;
  local_38 = 0xffffffff;
  local_34 = 0xffffffff;
LAB_00075bb8:
  uVar14 = *param_3;
  do {
    if ((uVar14 & 1) == 0) goto joined_r0x000760c5;
    for (puVar8 = local_68; puVar8 != (uint *)0x0; puVar8 = *(uint **)(puVar8 + 0xc)) {
      puVar16 = param_3;
      if (*puVar8 == (uint)(ushort)param_3[1]) goto LAB_00075c7c;
    }
    cVar6 = (**(code **)(*param_1 + 0xb78))();
    uVar14 = local_3c;
    uVar4 = local_50;
    puVar16 = local_58;
    if (cVar6 == '\0') {
      return;
    }
    if (local_3c == 0) break;
    uVar7 = param_3[1];
    local_48 = param_3;
    puVar8 = (uint *)_IOMallocTypeImpl(&binding_list_add(BindingList*,unsigned_int,IGAccelResource*,unsigned_long_long,unsigned_long_long,unsigned_long_long,unsigned_int)
                                        ::kalloc_type_view_774);
    if (puVar8 == (uint *)0x0) {
      puVar8 = (uint *)0x0;
      puVar16 = local_48;
    }
    else {
      *puVar8 = (uint)(ushort)uVar7;
      *(uint **)(puVar8 + 2) = puVar16;
      *(undefined8 *)(puVar8 + 4) = uVar4;
      puVar8[6] = 0;
      puVar8[7] = 0;
      puVar8[8] = 0;
      puVar8[9] = 0;
      puVar8[10] = uVar14;
      puVar8[0xc] = 0;
      puVar8[0xd] = 0;
      *(uint ***)(puVar8 + 0xe) = local_60;
      *local_60 = puVar8;
      puVar16 = local_48;
      local_60 = (uint **)(puVar8 + 0xc);
    }
LAB_00075c7c:
    uVar14 = *puVar16 >> 1 & 7;
    if (uVar14 != 3) goto code_r0x00075ca1;
    uVar14 = puVar16[5];
    param_3 = puVar16 + 5;
  } while( true );
LAB_000760b6:
  *(undefined1 *)(param_2 + 0x3c) = 0;
joined_r0x000760c5:
  do {
    if (local_68 == (uint *)0x0) {
      return;
    }
    puVar8 = *(uint **)(local_68 + 0xc);
    if (puVar8 == (uint *)0x0) {
      ppuVar15 = *(uint ***)(local_68 + 0xe);
      ppuVar5 = ppuVar15;
      if (*ppuVar15 != local_68) {
LAB_0007612e:
        pcVar17 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0007613e:
                    // WARNING: Subroutine does not return
        _panic(pcVar17,local_68,0x421,"IGAccelVideoContext.cpp",0x421);
      }
    }
    else {
      if (*(uint **)(puVar8 + 0xe) != local_68 + 0xc) {
        pcVar17 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_0007613e;
      }
      if ((uint *)**(undefined8 **)(local_68 + 0xe) != local_68) goto LAB_0007612e;
      *(undefined8 **)(puVar8 + 0xe) = *(undefined8 **)(local_68 + 0xe);
      ppuVar15 = *(uint ***)(local_68 + 0xe);
      ppuVar5 = local_60;
    }
    local_60 = ppuVar5;
    *ppuVar15 = puVar8;
    _IOFreeTypeImpl(&patch_codechal_command_buffer__set_base_addresses(IOAccelCommandStreamInfo&,_CODECHAL_TOKEN*,_CODECHAL_TOKEN_HEADER*,unsigned_int**,unsigned_int**,unsigned_int)
                     ::kalloc_type_view_1058);
  } while( true );
code_r0x00075ca1:
  puVar9 = local_68;
  switch(uVar14) {
  case 1:
    uVar11 = (ulong)(puVar8[10] - 1);
    break;
  case 2:
    for (; puVar9 != (uint *)0x0; puVar9 = *(uint **)(puVar9 + 0xc)) {
      if (*puVar9 == (uint)*(ushort *)((long)puVar16 + 6)) goto LAB_00075f01;
    }
    cVar6 = (**(code **)(*param_1 + 0xb78))
                      (param_1,param_2,*(ushort *)((long)puVar16 + 6),&local_58,&local_50,&local_3c,
                       (*puVar16 & 0x10) >> 4);
    uVar14 = local_3c;
    uVar4 = local_50;
    if (cVar6 == '\0') {
      return;
    }
    uVar7 = puVar16[1];
    local_48 = local_58;
    puVar9 = (uint *)_IOMallocTypeImpl(&binding_list_add(BindingList*,unsigned_int,IGAccelResource*,unsigned_long_long,unsigned_long_long,unsigned_long_long,unsigned_int)
                                        ::kalloc_type_view_774);
    if (puVar9 == (uint *)0x0) {
      puVar9 = (uint *)0x0;
    }
    else {
      *puVar9 = uVar7 >> 0x10;
      *(uint **)(puVar9 + 2) = local_48;
      puVar9[4] = 0;
      puVar9[5] = 0;
      *(undefined8 *)(puVar9 + 6) = uVar4;
      puVar9[8] = 0;
      puVar9[9] = 0;
      puVar9[10] = uVar14;
      puVar9[0xc] = 0;
      puVar9[0xd] = 0;
      *(uint ***)(puVar9 + 0xe) = local_60;
      *local_60 = puVar9;
      local_60 = (uint **)(puVar9 + 0xc);
    }
LAB_00075f01:
    uVar11 = (ulong)(*(long *)(puVar9 + 6) - *(long *)(puVar8 + 4)) / (ulong)puVar9[10];
    goto LAB_00075f1a;
  default:
    uVar11 = *(ulong *)(puVar8 + 4);
    break;
  case 4:
  case 5:
    for (; puVar9 != (uint *)0x0; puVar9 = *(uint **)(puVar9 + 0xc)) {
      if (*puVar9 == (uint)*(ushort *)((long)puVar16 + 6)) goto LAB_00075ef1;
    }
    cVar6 = (**(code **)(*param_1 + 0xb78))();
    uVar14 = local_3c;
    uVar4 = local_50;
    if (cVar6 == '\0') {
      return;
    }
    uVar7 = puVar16[1];
    local_48 = local_58;
    puVar9 = (uint *)_IOMallocTypeImpl(&binding_list_add(BindingList*,unsigned_int,IGAccelResource*,unsigned_long_long,unsigned_long_long,unsigned_long_long,unsigned_int)
                                        ::kalloc_type_view_774);
    if (puVar9 == (uint *)0x0) {
      puVar9 = (uint *)0x0;
    }
    else {
      *puVar9 = uVar7 >> 0x10;
      *(uint **)(puVar9 + 2) = local_48;
      puVar9[4] = 0;
      puVar9[5] = 0;
      *(undefined8 *)(puVar9 + 6) = uVar4;
      puVar9[8] = 0;
      puVar9[9] = 0;
      puVar9[10] = uVar14;
      puVar9[0xc] = 0;
      puVar9[0xd] = 0;
      *(uint ***)(puVar9 + 0xe) = local_60;
      *local_60 = puVar9;
      local_60 = (uint **)(puVar9 + 0xc);
    }
LAB_00075ef1:
    uVar11 = *(ulong *)(puVar9 + 6);
LAB_00075f1a:
    puVar10 = (uint *)0x0;
    goto LAB_00075f3b;
  case 6:
    for (puVar10 = local_68; puVar10 != (uint *)0x0; puVar10 = *(uint **)(puVar10 + 0xc)) {
      if (*puVar10 == (uint)*(ushort *)((long)puVar16 + 6)) goto LAB_00075f20;
    }
    cVar6 = (**(code **)(*param_1 + 0xb78))();
    uVar14 = local_3c;
    uVar4 = local_50;
    if (cVar6 == '\0') {
      return;
    }
    uVar7 = puVar16[1];
    local_48 = local_58;
    puVar10 = (uint *)_IOMallocTypeImpl(&binding_list_add(BindingList*,unsigned_int,IGAccelResource*,unsigned_long_long,unsigned_long_long,unsigned_long_long,unsigned_int)
                                         ::kalloc_type_view_774);
    if (puVar10 == (uint *)0x0) {
      puVar10 = (uint *)0x0;
    }
    else {
      *puVar10 = uVar7 >> 0x10;
      *(uint **)(puVar10 + 2) = local_48;
      puVar10[4] = 0;
      puVar10[5] = 0;
      puVar10[6] = 0;
      puVar10[7] = 0;
      *(undefined8 *)(puVar10 + 8) = uVar4;
      puVar10[10] = uVar14;
      puVar10[0xc] = 0;
      puVar10[0xd] = 0;
      *(uint ***)(puVar10 + 0xe) = local_60;
      *local_60 = puVar10;
      local_60 = (uint **)(puVar10 + 0xc);
    }
LAB_00075f20:
    uVar11 = (ulong)(*(long *)(puVar10 + 8) - *(long *)(puVar8 + 4)) / (ulong)puVar10[10];
    puVar9 = (uint *)0x0;
    goto LAB_00075f3b;
  }
  puVar10 = (uint *)0x0;
  puVar9 = (uint *)0x0;
LAB_00075f3b:
  uVar14 = *puVar16;
  if ((int)uVar14 < 0) {
    uVar7 = puVar16[4];
    if (puVar16[3] != 0 || uVar7 != 0) {
      iVar18 = (puVar16[3] + 0x7f >> 7) * *(int *)__got::_page_size;
      uVar19 = puVar8[10] * uVar7 + iVar18;
      uVar20 = uVar14 >> 1 & 7;
      if (uVar20 == 6) {
        uVar7 = (uint)(((*(long *)(puVar10 + 8) - ((ulong)uVar19 + *(long *)(puVar8 + 4))) +
                       (ulong)((uVar7 >> 1) * puVar10[10] + iVar18)) / (ulong)puVar10[10]);
      }
      else {
        if (uVar20 != 2) {
          if (uVar20 == 0) {
            uVar11 = uVar11 + uVar19;
          }
          goto LAB_00075fe2;
        }
        uVar7 = (uint)(((*(long *)(puVar9 + 6) - ((ulong)uVar19 + *(long *)(puVar8 + 4))) +
                       (ulong)((uVar7 >> 1) * puVar9[10] + iVar18)) / (ulong)puVar9[10]);
      }
      uVar11 = (ulong)uVar7;
    }
  }
LAB_00075fe2:
  bVar13 = (byte)(uVar14 >> 0x19) & 0x1f;
  uVar12 = uVar11 >> bVar13;
  if ((uVar14 >> 0x1e & 1) == 0) {
    uVar12 = uVar11 << bVar13;
  }
  uVar14 = uVar14 >> 5 & 0xfffff;
  uVar11 = (ulong)uVar14;
  bVar21 = uVar14 < local_38;
  if ((*param_4 >> 0x12 & 1) != 0) {
    local_38 = uVar14;
  }
  local_34 = local_34 + bVar21 & (int)(*param_4 << 0xd) >> 0x1f;
  lVar2 = *(long *)(param_5 + (long)(int)local_34 * 8);
  piVar3 = *(int **)(param_6 + (long)(int)local_34 * 8);
  if ((int *)(lVar2 + uVar11 * 4 + 4) <= piVar3) {
    piVar1 = (int *)(lVar2 + uVar11 * 4);
    *piVar1 = puVar16[2] + (int)uVar12;
    uVar14 = *puVar16 >> 1 & 7;
    if ((uVar14 < 6) && ((0x31U >> uVar14 & 1) != 0)) {
      if (piVar3 < piVar1 + 2) goto LAB_00076124;
      *(int *)(lVar2 + 4 + uVar11 * 4) = (int)(uVar12 + puVar16[2] >> 0x20);
    }
    param_3 = puVar16 + 5;
    if ((uint *)param_1[0xc5] < puVar16 + 10) goto LAB_000760b6;
    goto LAB_00075bb8;
  }
LAB_00076124:
  *(undefined1 *)(param_2 + 0x3c) = 0;
  return;
}



// WARNING: Removing unreachable block (ram,0x00076265)
// IGAccelVideoContext::patch_codechal_command_buffer(IOAccelCommandStreamInfo&, unsigned int*)

void __thiscall
IGAccelVideoContext::patch_codechal_command_buffer
          (IGAccelVideoContext *this,long *param_1,uint *param_2)

{
  char cVar1;
  bool bVar2;
  uint uVar3;
  long lVar4;
  ulong uVar5;
  long *plVar6;
  long local_48;
  long local_40;
  long *local_38;
  
  local_38 = (long *)0x0;
  if ((*(uint **)(this + 0x628) < param_2 + 1) || (*(uint **)(this + 0x628) < param_2 + 6)) {
    *(undefined1 *)((long)param_1 + 0x3c) = 0;
  }
  else {
    uVar3 = *param_2;
    if ((uVar3 >> 0x11 & 1) != 0) {
      this[0x1368] = (IGAccelVideoContext)0x1;
      uVar3 = *param_2;
    }
    if ((uVar3 & 1) == 0) {
      local_48 = *param_1;
      local_40 = (ulong)(*(uint *)(param_1 + 2) & 0xfffffffc) + param_1[1];
      plVar6 = (long *)0x0;
    }
    else {
      cVar1 = (**(code **)(*(long *)this + 0xb78))(this,param_1,uVar3 >> 1 & 0xffff);
      if (cVar1 == '\0') {
        return;
      }
      bVar2 = map_memory((long *)&local_38,(OSMetaClassBase *)0x13c0);
      plVar6 = local_38;
      if (!bVar2) {
        return;
      }
      lVar4 = (**(code **)(*local_38 + 0x118))(local_38);
      local_48 = lVar4;
      uVar5 = (**(code **)(*plVar6 + 0x128))(plVar6);
      local_40 = (uVar5 & 0xfffffffffffffffc) + lVar4;
    }
    patch_codechal_command_buffer__set_base_addresses
              ((long *)this,(long)param_1,param_2 + 1,param_2,(long)&local_48,(long)&local_40);
    if (((*param_2 & 1) != 0) && (plVar6 != (long *)0x0)) {
      (**(code **)(*plVar6 + 0x28))(plVar6);
    }
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::map_memory(IOMemoryMap**, IOAccelMemory*)

bool __cdecl IGAccelVideoContext::map_memory(long *param_1,OSMetaClassBase *param_2)

{
  long lVar1;
  
  if (param_2 != (OSMetaClassBase *)0x0) {
    lVar1 = OSMetaClassBase::safeMetaCast(param_2,*(OSMetaClass **)__got::metaClass);
    lVar1 = IOMemoryDescriptor::createMappingInTask
                      (*(task **)(lVar1 + 0xd0),*(ulonglong *)__got::_kernel_task,0,1,0);
    *param_1 = lVar1;
    return lVar1 != 0;
  }
  return false;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelVideoContext::unmap_memory(IOMemoryMap**)

void __cdecl IGAccelVideoContext::unmap_memory(long *param_1)

{
  if ((long *)*param_1 != (long *)0x0) {
    (**(code **)(*(long *)*param_1 + 0x28))();
  }
  *param_1 = 0;
  return;
}



// IGAccelVideoContext::bind_resource(IOAccelCommandStreamInfo&, unsigned int, IGAccelResource**,
// unsigned long long*, unsigned int*, bool)

ulong __thiscall
IGAccelVideoContext::bind_resource
          (IGAccelVideoContext *this,long param_1,uint param_2,undefined8 *param_3,long *param_4,
          int *param_5,byte param_6)

{
  int iVar1;
  long *plVar2;
  char cVar3;
  byte bVar4;
  long lVar5;
  ulong uVar6;
  ulong uVar7;
  
  if (*(char *)(param_1 + 0x3c) != '\0') {
    cVar3 = IOAccelContext2::lookupResource((uint)this,(void **)(ulong)param_2);
    if (cVar3 != '\0') {
      uVar6 = (ulong)param_6;
      plVar2 = (long *)*param_3;
      if (*(char *)(param_1 + 0x3c) == '\0') {
        (**(code **)(*plVar2 + 400))
                  (plVar2,*(undefined8 *)
                           (*(long *)(this + (long)(&DAT_00001370 + (ulong)(byte)this[0x1368] * 8))
                           + 0xb0),uVar6);
      }
      else {
        cVar3 = (**(code **)(*(long *)this + 0xa40))
                          (this,param_1,plVar2,0,
                           *(undefined8 *)
                            (*(long *)(this + (long)(&DAT_00001370 + (ulong)(byte)this[0x1368] * 8))
                            + 0xb0),uVar6,0);
        if (cVar3 == '\0') goto LAB_000763b1;
      }
      (**(code **)(*(long *)*param_3 + 0x20))();
      IGAccelResource::get_tex_data((IGAccelResource *)*param_3,param_4,param_5);
      iVar1 = *param_5;
      if (iVar1 == 0) {
        *(undefined1 *)(param_1 + 0x3c) = 0;
      }
      uVar7 = CONCAT71((int7)((ulong)param_1 >> 8),iVar1 != 0);
      (**(code **)(*(long *)this + 0xb70))(this,*param_3,uVar6);
      lVar5 = IOAccelResource2::getStorageResource();
      bVar4 = (**(code **)(**(long **)(*(long *)(this + 0x5a8) + 0x380) + 0x1c8))
                        (*(long **)(*(long *)(this + 0x5a8) + 0x380),
                         (ulong)*(byte *)((lVar5 + 0x16) - uVar6) * 0x40 + *(long *)(lVar5 + 0x38),
                         this + 0x1308,
                         *(undefined4 *)
                          (*(long *)(*(long *)(this + (long)(&DAT_00001370 +
                                                            (ulong)(byte)this[0x1368] * 8)) + 0xb0)
                          + 0x20));
      this[0x1304] = (IGAccelVideoContext)(bVar4 ^ 1);
      if (param_6 != 0) {
        (**(code **)(*(long *)*param_3 + 0x168))((long *)*param_3,0,0);
      }
      goto LAB_000763ba;
    }
LAB_000763b1:
    *(undefined1 *)(param_1 + 0x3c) = 0;
  }
  uVar7 = 0;
LAB_000763ba:
  return uVar7 & 0xffffffff;
}



// IGAccelVideoContext::set_current_resource(IGAccelResource*, unsigned int)

void __thiscall
IGAccelVideoContext::set_current_resource(IGAccelVideoContext *this,undefined8 param_1,uint param_2)

{
  uint uVar1;
  byte bVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  
  uVar1 = *(uint *)(this + 0x10ec);
  uVar3 = (ulong)uVar1;
  if (uVar3 < 0x80) {
    *(uint *)(this + (long)(&DAT_000010f0 + uVar3 * 4)) = param_2;
    *(uint *)(this + 0x10ec) = uVar1 + 1;
    *(undefined8 *)(*(long *)(this + 0x5b8) + uVar3 * 8) = param_1;
    if ((param_2 & 1) == 0) {
      bVar2 = IOAccelResource2::isResourcePurgeable();
    }
    else {
      bVar2 = 0;
    }
    this[0x12f0] = (IGAccelVideoContext)((byte)this[0x12f0] | bVar2);
    lVar4 = IOAccelResource2::getProtectionOptions();
    if (((param_2 & 1) == 0) && (lVar4 != 0)) {
      uVar5 = IOAccelResource2::getProtectionOptions();
      *(undefined8 *)(this + 0x12f8) = uVar5;
    }
  }
  return;
}



// IGAccelVideoContext::prepare_to_decode(IOAccelResource2*)

void __thiscall IGAccelVideoContext::prepare_to_decode(undefined8 param_1_00,bool param_2)

{
  IOAccelResource2::setPrefetch(param_2);
  return;
}



// IGAccelVideoContext::prepare_to_encode(IOAccelCommandStreamInfo&, IOAccelResource2*)

void __thiscall
IGAccelVideoContext::prepare_to_encode(IGAccelVideoContext *this,long param_1,ulong param_2)

{
  code *UNRECOVERED_JUMPTABLE;
  char cVar1;
  byte bVar2;
  
  cVar1 = IOAccelResource2::isResourcePurgeable();
  if (cVar1 != '\0') {
    *(undefined1 *)(param_1 + 0x3c) = 0;
    UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(*(long *)(this + 0x5a8) + 0xdf8) + 0x28);
    bVar2 = IOAccelResource2::isResourcePurgeable();
                    // WARNING: Could not recover jumptable at 0x00076581. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)((ulong)bVar2 << 0x31 ^ param_2);
    return;
  }
  return;
}



// IGAccelVideoContext::updateResourceMappingCacheType(IGAccelResource*)

void __thiscall
IGAccelVideoContext::updateResourceMappingCacheType
          (IGAccelVideoContext *this,IGAccelResource *param_1)

{
  if (((&DAT_000011b8)[*(long *)(this + 0x5a8)] & 1) == 0) {
    return;
  }
  IGAccelResource::updateMappingCacheType(param_1,1);
  return;
}



// IGAccelVideoContext::MetaClass::~MetaClass()

void __thiscall IGAccelVideoContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IOAccelContext2::getOwningTask() const

undefined8 __thiscall IOAccelContext2::getOwningTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x578);
}



// IOAccelContext2::getGPUTask() const

undefined8 __thiscall IOAccelContext2::getGPUTask(IOAccelContext2 *this)

{
  return *(undefined8 *)(this + 0x598);
}



// IOAccelContext2::getOwningTaskPid() const

undefined4 __thiscall IOAccelContext2::getOwningTaskPid(IOAccelContext2 *this)

{
  return *(undefined4 *)(this + 0x580);
}



// IOAccelSubmitter2::retireCommandBuffer(IOAccelEventFence*)

void IOAccelSubmitter2::retireCommandBuffer(void)

{
  return;
}



// IOAccelSubmitter2::setSubmissionError(unsigned int)

void IOAccelSubmitter2::setSubmissionError(void)

{
  return;
}



// IOAccelSubmitter2::isOpportunisticWorkload() const

undefined8 IOAccelSubmitter2::isOpportunisticWorkload(void)

{
  return 0;
}



// IOAccelContext2::postTokenSanityCheck(IOAccelCommandStreamInfo&)

void IOAccelContext2::postTokenSanityCheck(void)

{
  return;
}



// IOAccelContext2::getDataBufferPrivate(IOAccelResource2*, IOAccelResourcePrivate*, unsigned long
// long)

void IOAccelContext2::getDataBufferPrivate(void)

{
  return;
}



// IOAccelContext2::validateDataBuffer(unsigned long long, IOBufferMemoryDescriptor*,
// IOAccelResource2*)

undefined8 IOAccelContext2::validateDataBuffer(void)

{
  return 0;
}



// IOAccelContext2::invalidate()

void IOAccelContext2::invalidate(void)

{
  return;
}



// IOAccelContext2::getFrameDelimiter()

undefined8 IOAccelContext2::getFrameDelimiter(void)

{
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGAccelVideoContext_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelVideoContext::gMetaClass,"IGAccelVideoContext",
             (OSMetaClass *)__got::gMetaClass,0x13b0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelVideoContext::gMetaClass);
  return;
}



// IGAccelSharedUserClient::MetaClass::MetaClass()

void __thiscall IGAccelSharedUserClient::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSharedUserClient",(OSMetaClass *)__got::gMetaClass,0x188);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSharedUserClient::MetaClass::~MetaClass()

void __thiscall IGAccelSharedUserClient::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelSharedUserClient::IGAccelSharedUserClient(OSMetaClass const*)

void __thiscall
IGAccelSharedUserClient::IGAccelSharedUserClient(IGAccelSharedUserClient *this,OSMetaClass *param_1)

{
  IOAccelSharedUserClient2::IOAccelSharedUserClient2((IOAccelSharedUserClient2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSharedUserClient;
  *(char **)(this + 0x178) = "IGAccelSharedUserClient";
  *(undefined2 *)(this + 0x180) = 0;
  this[0x182] = (IGAccelSharedUserClient)0x0;
  return;
}



// IGAccelSharedUserClient::IGAccelSharedUserClient(OSMetaClass const*)

void __thiscall
IGAccelSharedUserClient::IGAccelSharedUserClient(IGAccelSharedUserClient *this,OSMetaClass *param_1)

{
  IOAccelSharedUserClient2::IOAccelSharedUserClient2((IOAccelSharedUserClient2 *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSharedUserClient;
  *(char **)(this + 0x178) = "IGAccelSharedUserClient";
  *(undefined2 *)(this + 0x180) = 0;
  this[0x182] = (IGAccelSharedUserClient)0x0;
  return;
}



// IGAccelSharedUserClient::~IGAccelSharedUserClient()

void __thiscall IGAccelSharedUserClient::~IGAccelSharedUserClient(IGAccelSharedUserClient *this)

{
  IOAccelSharedUserClient2::~IOAccelSharedUserClient2((IOAccelSharedUserClient2 *)this);
  return;
}



// IGAccelSharedUserClient::~IGAccelSharedUserClient()

void __thiscall IGAccelSharedUserClient::~IGAccelSharedUserClient(IGAccelSharedUserClient *this)

{
  IOAccelSharedUserClient2::~IOAccelSharedUserClient2((IOAccelSharedUserClient2 *)this);
  return;
}



// IGAccelSharedUserClient::~IGAccelSharedUserClient()

void __thiscall IGAccelSharedUserClient::~IGAccelSharedUserClient(IGAccelSharedUserClient *this)

{
  IOAccelSharedUserClient2::~IOAccelSharedUserClient2((IOAccelSharedUserClient2 *)this);
  _OSObject_typed_operator_delete(&IGAccelSharedUserClient_ktv,this,0x188);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSharedUserClient::operator delete(void*, unsigned long)

void __cdecl IGAccelSharedUserClient::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelSharedUserClient_ktv,param_1,param_2);
  return;
}



// IGAccelSharedUserClient::getMetaClass() const

undefined8 * IGAccelSharedUserClient::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelSharedUserClient::MetaClass::MetaClass()

void __thiscall IGAccelSharedUserClient::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSharedUserClient",(OSMetaClass *)__got::gMetaClass,0x188);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSharedUserClient::MetaClass::alloc() const

IOAccelSharedUserClient2 * IGAccelSharedUserClient::MetaClass::alloc(void)

{
  IOAccelSharedUserClient2 *this;
  
  this = (IOAccelSharedUserClient2 *)
         _OSObject_typed_operator_new(&IGAccelSharedUserClient_ktv,0x188);
  IOAccelSharedUserClient2::IOAccelSharedUserClient2
            (this,(OSMetaClass *)&IGAccelSharedUserClient::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSharedUserClient;
  *(char **)(this + 0x178) = "IGAccelSharedUserClient";
  *(undefined2 *)(this + 0x180) = 0;
  this[0x182] = (IOAccelSharedUserClient2)0x0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelSharedUserClient::operator new(unsigned long)

void * __thiscall IGAccelSharedUserClient::operator_new(IGAccelSharedUserClient *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelSharedUserClient_ktv,this);
  return pvVar1;
}



// IGAccelSharedUserClient::IGAccelSharedUserClient()

void __thiscall IGAccelSharedUserClient::IGAccelSharedUserClient(IGAccelSharedUserClient *this)

{
  IOAccelSharedUserClient2::IOAccelSharedUserClient2
            ((IOAccelSharedUserClient2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSharedUserClient;
  *(char **)(this + 0x178) = "IGAccelSharedUserClient";
  *(undefined2 *)(this + 0x180) = 0;
  this[0x182] = (IGAccelSharedUserClient)0x0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSharedUserClient::IGAccelSharedUserClient()

void __thiscall IGAccelSharedUserClient::IGAccelSharedUserClient(IGAccelSharedUserClient *this)

{
  IOAccelSharedUserClient2::IOAccelSharedUserClient2
            ((IOAccelSharedUserClient2 *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSharedUserClient;
  *(char **)(this + 0x178) = "IGAccelSharedUserClient";
  *(undefined2 *)(this + 0x180) = 0;
  this[0x182] = (IGAccelSharedUserClient)0x0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSharedUserClient::sharedStart()

void __thiscall IGAccelSharedUserClient::sharedStart(IGAccelSharedUserClient *this)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x9a0))();
  if (cVar1 != '\0') {
    *(undefined ***)(this + 0x168) = &sharedStart()::methodDescs;
    *(undefined8 *)(this + 0x170) = 0;
  }
  return;
}



// IGAccelSharedUserClient::depth_resolve(void*, unsigned long long)

undefined8 __thiscall
IGAccelSharedUserClient::depth_resolve(IGAccelSharedUserClient *this,long *param_1,long param_2)

{
  byte bVar1;
  ushort uVar2;
  IGAccelResource *pIVar3;
  char cVar4;
  undefined4 uVar5;
  long lVar6;
  long *plVar7;
  uint uVar8;
  undefined8 uVar9;
  long local_50;
  undefined4 local_44;
  int local_40;
  uint local_3c;
  IGAccelResource *local_38;
  
  if (param_2 != 0x30) {
    return 0xe00002c2;
  }
  plVar7 = *(long **)(this + 0xf8);
  if ((*(uint *)(plVar7 + 399) & 2) == 0) {
    return 0xe00002c2;
  }
  local_38 = (IGAccelResource *)0x0;
  local_50 = 0;
  local_44 = 0;
  if (*(long *)(this + 0x100) == 0) {
    return 0xe00002c2;
  }
  local_40 = 2 << (*(byte *)((long)param_1 + 0x22) & 0x1f);
  bVar1 = *(byte *)(param_1 + 4);
  _OSIncrementAtomic(plVar7 + 0x12);
  _IOLockLock(plVar7[0x11]);
  _OSDecrementAtomic(plVar7 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar7 + 0x850))(plVar7,"",0);
  lVar6 = IGAccelTask::getDepthResolveContext
                    (*(IGAccelTask **)(*(long *)(this + 0x100) + 0x88),'\x01');
  lVar6 = *(long *)(lVar6 + 0xb0);
  *(long *)(this + 0x170) = lVar6;
  uVar9 = 0xe00002c2;
  if ((((lVar6 != 0) &&
       (cVar4 = IOAccelShared2::lookupResource
                          ((uint)*(undefined8 *)(this + 0x100),
                           (void **)(ulong)*(uint *)(param_1 + 1)), cVar4 != '\0')) &&
      (uVar5 = bindResource(this,(long *)local_38), (char)uVar5 != '\0')) &&
     (IGAccelResource::get_tex_data(local_38,&local_50,&local_44), local_50 != 0)) {
    if (*param_1 == 0) {
      lVar6 = IOAccelResource2::getStorageResource();
      plVar7 = (long *)(lVar6 + 0x180);
    }
    else {
      for (plVar7 = *(long **)(local_38 + 0x240); plVar7 != (long *)0x0;
          plVar7 = (long *)plVar7[0x15]) {
        if (*plVar7 == *param_1) goto LAB_00076a84;
      }
      plVar7 = (long *)0x0;
    }
LAB_00076a84:
    if ((byte)local_38[0xac] < 2) {
      (**(code **)(*(long *)local_38 + 0x168))(local_38,0,0);
    }
    else {
      uVar2 = *(ushort *)((long)param_1 + 0x26);
      local_3c = (uint)uVar2;
      if ((byte)local_38[0xac] <= uVar2) goto LAB_00076b23;
      uVar8 = (uint)*(ushort *)((long)param_1 + 0x24);
      if (*(ushort *)((long)param_1 + 0x24) <= uVar2) {
        local_3c = local_3c + 1;
        do {
          (**(code **)(*(long *)local_38 + 0x168))(local_38,uVar8,0);
          uVar8 = uVar8 + 1;
        } while (local_3c != uVar8);
      }
    }
    uVar9 = 0;
    IGAccelResource::submitDepthResolve
              (local_38,(long)plVar7,*(IntelAccelerator **)(this + 0xf8),
               *(IGAccelTask **)(*(long *)(this + 0x100) + 0x88),0,
               (ulong)*(uint *)((long)param_1 + 0xc),*(ushort *)((long)param_1 + 0x24),
               *(ushort *)((long)param_1 + 0x26),(short)(-1 << (bVar1 & 0x1f)) + (short)local_40,
               (int *)0x0);
  }
LAB_00076b23:
  pIVar3 = local_38;
  if (local_38 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)local_38 + 0x198))(local_38,*(undefined8 *)(this + 0x170));
    (**(code **)(*(long *)pIVar3 + 0x178))(pIVar3);
  }
  plVar7 = *(long **)(this + 0xf8);
  (**(code **)(*plVar7 + 0x858))(plVar7,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar7[0x11]);
  return uVar9;
}



// IGAccelSharedUserClient::getMemoryInfo(IntelMemoryInfo*)

undefined8 __thiscall
IGAccelSharedUserClient::getMemoryInfo(IGAccelSharedUserClient *this,undefined8 *param_1)

{
  undefined8 uVar1;
  
  uVar1 = IGAccelTask::getScratchGPUVirtualAddress
                    (*(IGAccelTask **)(*(long *)(this + 0x100) + 0x88));
  *param_1 = uVar1;
  uVar1 = (**(code **)(**(long **)(this + 0xf8) + 0x990))();
  param_1[1] = uVar1;
  return 0;
}



// IGAccelSharedUserClient::color_resolve(void*, unsigned long long)

int __thiscall
IGAccelSharedUserClient::color_resolve(IGAccelSharedUserClient *this,long *param_1,long param_2)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  IGAccelSharedUserClient *this_00;
  IGAccelResource *pIVar4;
  char cVar5;
  undefined4 uVar6;
  long lVar7;
  long *plVar8;
  int iVar9;
  undefined1 local_f8 [88];
  IGVector<> local_a0 [8];
  ulong local_98;
  long local_90;
  undefined8 local_88;
  ulong local_80;
  long local_78;
  IGAccelSharedUserClient *local_70;
  long local_68;
  ulong local_60;
  uint local_54;
  IGAccelResource *local_50;
  uint local_44;
  IGAccelResource *local_40;
  byte local_31;
  
  if (param_2 != 0x18) {
    return -0x1ffffd3e;
  }
  if ((*(uint *)(*(long *)(this + 0xf8) + 0xc78) & 2) == 0) {
    return -0x1ffffd3e;
  }
  local_68 = *param_1;
  uVar2 = *(uint *)(param_1 + 1);
  uVar3 = *(uint *)((long)param_1 + 0xc);
  local_60 = (ulong)*(ushort *)(param_1 + 2);
  local_44 = (uint)*(ushort *)((long)param_1 + 0x12);
  bVar1 = *(byte *)((long)param_1 + 0x16);
  local_40 = (IGAccelResource *)0x0;
  local_50 = (IGAccelResource *)0x0;
  local_70 = this;
  ___bzero(local_f8,0x88);
  IGVector<>::grow(local_a0,4);
  local_88 = 0;
  local_80 = 0;
  local_78 = 0;
  IGVector<>::grow((IGVector<> *)&local_88,4);
  this_00 = local_70;
  iVar9 = -0x1ffffd3e;
  if (uVar2 == 0 && uVar3 == 0) goto LAB_00076ecf;
  plVar8 = *(long **)(local_70 + 0xf8);
  local_54 = uVar3;
  local_31 = bVar1;
  _OSIncrementAtomic(plVar8 + 0x12);
  _IOLockLock(plVar8[0x11]);
  _OSDecrementAtomic(plVar8 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar8 + 0x850))(plVar8,"",0);
  lVar7 = IGAccelTask::getColorResolveContext
                    (*(IGAccelTask **)(*(long *)(this_00 + 0x100) + 0x88),'\x01');
  lVar7 = *(long *)(lVar7 + 0xb0);
  *(long *)(this_00 + 0x170) = lVar7;
  iVar9 = (uint)(lVar7 != 0) * 5 + -0x1ffffd3e;
  if ((lVar7 != 0) && (uVar2 != 0)) {
    cVar5 = IOAccelShared2::lookupResource
                      ((uint)*(undefined8 *)(this_00 + 0x100),(void **)(ulong)uVar2);
    if ((cVar5 == '\0') || (uVar6 = bindResource(this_00,(long *)local_40), (char)uVar6 == '\0')) {
LAB_00076e46:
      iVar9 = -0x1ffffd3e;
    }
    else if (local_68 == 0) {
      lVar7 = IOAccelResource2::getStorageResource();
      plVar8 = (long *)(lVar7 + 0x180);
LAB_00076d8c:
      uVar2 = local_44;
      iVar9 = 0;
      if (1 < *(byte *)(plVar8 + 0x14)) {
        if (((local_54 != 0) &&
            ((cVar5 = IOAccelShared2::lookupResource
                                ((uint)*(undefined8 *)(this_00 + 0x100),(void **)(ulong)local_54),
             cVar5 == '\0' || (uVar6 = bindResource(this_00,(long *)local_50), (char)uVar6 == '\0'))
            )) || (*(uint *)((long)plVar8 + 0x94) < (uint)local_60)) goto LAB_00076e46;
        iVar9 = -0x1ffffd3e;
        if (uVar2 <= *(uint *)(plVar8 + 0x13)) {
          iVar9 = 0;
          IGAccelResource::submitCCSResolve
                    (local_40,(long)plVar8,*(IntelAccelerator **)(this_00 + 0xf8),
                     *(IGAccelTask **)(*(long *)(this_00 + 0x100) + 0x88),0,
                     (uint)((local_31 & 1) == 0) * 2 + 1,(uint)local_60,
                     (ushort)(1 << ((byte)local_44 & 0x1f)),local_50);
        }
      }
    }
    else {
      iVar9 = 0;
      for (plVar8 = *(long **)(local_40 + 0x240); plVar8 != (long *)0x0;
          plVar8 = (long *)plVar8[0x15]) {
        if (*plVar8 == local_68) goto LAB_00076d8c;
      }
    }
  }
  pIVar4 = local_40;
  if (local_40 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)local_40 + 0x198))(local_40,*(undefined8 *)(this_00 + 0x170));
    (**(code **)(*(long *)pIVar4 + 0x178))(pIVar4);
  }
  pIVar4 = local_50;
  if (local_50 != (IGAccelResource *)0x0) {
    (**(code **)(*(long *)local_50 + 0x198))(local_50,*(undefined8 *)(this_00 + 0x170));
    (**(code **)(*(long *)pIVar4 + 0x178))(pIVar4);
  }
  plVar8 = *(long **)(this_00 + 0xf8);
  (**(code **)(*plVar8 + 0x858))(plVar8,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar8[0x11]);
LAB_00076ecf:
  if (local_78 != 0) {
    lVar7 = local_80 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_80) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_78,lVar7);
  }
  if (local_90 != 0) {
    lVar7 = local_98 * 8;
    if (lVar7 < 0) {
      lVar7 = -0x8000000000000000;
    }
    if (0x1fffffffffffffff < local_98) {
      lVar7 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,local_90,lVar7);
  }
  return iVar9;
}



// IGAccelSharedUserClient::telemetryOperation(TelemetryOperation*, TelemetryOperation*, unsigned
// long long, unsigned long long*)

void __thiscall
IGAccelSharedUserClient::telemetryOperation
          (IGAccelSharedUserClient *this,ulong *param_1,ulong *param_2,long param_3,ulong *param_4)

{
  IGTelemetryManager::telemetryOperationWrapper
            (*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),(long)(this + 0x178),param_1,
             param_2,param_3,param_4,*(ulonglong *)(this + 0xe0));
  return;
}



// IGAccelSharedUserClient::telemetryInitOABuffer(MDAPIInitOABufferOp*, MDAPIInitOABufferOp*,
// unsigned long long, unsigned long long*)

void __thiscall
IGAccelSharedUserClient::telemetryInitOABuffer
          (IGAccelSharedUserClient *this,undefined8 *param_1,undefined8 *param_2,long param_3,
          ulong *param_4)

{
  IGTelemetryManager::telemetryInitOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),(long)(this + 0x178),param_1,
             param_2,param_3,param_4);
  return;
}



// IGAccelSharedUserClient::telemetryReadOABuffer(MDAPIReadOABufferOpIn*, MDAPIReadOABufferOpOut*,
// unsigned long long, unsigned long long*)

void __thiscall
IGAccelSharedUserClient::telemetryReadOABuffer
          (IGAccelSharedUserClient *this,long param_1,int *param_2,long param_3,long *param_4)

{
  IGTelemetryManager::telemetryReadOaBuffer
            (*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),param_1,param_2,param_3,
             param_4,(long)(this + 0x178));
  return;
}



// IGAccelSharedUserClient::telemetryMapOABufferMemory(IntelDeviceMapStatsMemInOut*,
// IntelDeviceMapStatsMemInOut*, unsigned long long, unsigned long long*)

void __thiscall
IGAccelSharedUserClient::telemetryMapOABufferMemory
          (IGAccelSharedUserClient *this,long *param_1,long *param_2,long param_3,
          undefined8 *param_4)

{
  IGTelemetryManager::telemetryMapOaBufferMemory
            (*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),param_1,param_2,param_3,
             param_4,*(ulonglong *)(this + 0xe0));
  return;
}



// IGAccelSharedUserClient::icbBufferBlit(void*, unsigned long long)

undefined8 __thiscall
IGAccelSharedUserClient::icbBufferBlit
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint *param_10,ulong param_11,undefined8 param_12,undefined8 param_13,char *param_14)

{
  long *plVar1;
  undefined8 uVar2;
  int iVar3;
  char cVar4;
  uint uVar5;
  long lVar6;
  ulong uVar7;
  undefined8 uVar8;
  ulong *puVar9;
  float fVar10;
  undefined4 uVar11;
  long local_1b8 [8];
  long *local_178;
  long local_170 [8];
  long *local_130;
  undefined8 local_128;
  undefined8 local_120;
  undefined1 local_118;
  undefined4 local_116;
  undefined4 local_110;
  undefined8 local_108;
  undefined1 local_100;
  undefined8 local_f8 [3];
  undefined8 local_e0 [6];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined8 local_88;
  ulong local_80 [2];
  undefined8 *local_70;
  ulong local_68;
  ulong *local_60;
  uint local_58;
  uint local_54;
  ulong *local_50;
  long *local_48;
  long *local_40;
  char local_31;
  
  local_48 = (long *)0x0;
  local_40 = (long *)0x0;
  uVar8 = 0xe00002c2;
  if ((((*(long *)((long)this + 0x100) != 0) && (param_11 != 0)) && (param_10 != (uint *)0x0)) &&
     ((*(IOGraphicsAccelerator2 **)((long)this + 0xf8) != (IOGraphicsAccelerator2 *)0x0 &&
      (*param_10 == param_11)))) {
    uVar5 = (byte)param_10[1] & 3;
    switch(uVar5) {
    case 2:
      if (*(long *)(param_10 + 0xe) == *(long *)(param_10 + 0x14)) {
        return 0xe00002c2;
      }
      if (*(long *)(param_10 + 0x10) == *(long *)(param_10 + 0x16)) {
        return 0xe00002c2;
      }
    case 1:
      if ((char)uVar5 != '\0') {
        lVar6 = 0;
        do {
          if (*(long *)((long)param_10 + lVar6 + 0x48) == 0) {
            return 0xe00002c2;
          }
          lVar6 = lVar6 + 0x18;
        } while ((ulong)uVar5 * 0x18 != lVar6);
      }
      IOGraphicsAccelerator2::acceleratorLock(*(IOGraphicsAccelerator2 **)((long)this + 0xf8));
      cVar4 = IOAccelShared2::lookupResource
                        ((uint)*(undefined8 *)((long)this + 0x100),(void **)(ulong)param_10[6]);
      uVar8 = 0xe00002c2;
      if ((cVar4 != '\0') &&
         (cVar4 = IOAccelShared2::lookupResource
                            ((uint)*(undefined8 *)((long)this + 0x100),(void **)(ulong)param_10[0xc]
                            ), cVar4 != '\0')) {
        puVar9 = (ulong *)(param_10 + 2);
        lVar6 = IOAccelResource2::getStorageResource();
        local_50 = puVar9;
        if (*(ulong *)(lVar6 + 200 + (ulong)(*(long *)(lVar6 + 0x88) == 0) * 8) == *puVar9) {
          lVar6 = IOAccelResource2::getStorageResource();
          uVar7 = *(ulong *)(lVar6 + 200 + (ulong)(*(long *)(lVar6 + 0x88) == 0) * 8);
          if (((((uVar7 == *(ulong *)(param_10 + 8)) && (*local_50 != 0)) && ((*local_50 & 3) == 0))
              && ((uVar7 != 0 && ((uVar7 & 3) == 0)))) &&
             (cVar4 = (**(code **)(*local_48 + 0x170))(), cVar4 != '\0')) {
            local_31 = (**(code **)(*local_40 + 0x170))();
            uVar8 = 0xe00002c2;
            if (local_31 != '\0') {
              local_60 = (ulong *)(param_10 + 8);
              ___bzero((blit3d_params_t *)local_1b8,0x138);
              blit3d_params_t::blit3d_params_t((blit3d_params_t *)local_1b8);
              uVar8 = 0;
              local_70 = (undefined8 *)0x0;
              local_80[1] = 0;
              local_80[0] = 0;
              IGVector<>::IGVector(local_80);
              if ((param_10[1] & 3) != 0) {
                puVar9 = (ulong *)(param_10 + 0x12);
                uVar7 = 0;
                do {
                  local_1b8[6] = 0;
                  local_1b8[5] = 0;
                  local_1b8[4] = 0;
                  local_1b8[3] = 0;
                  local_1b8[2] = 0;
                  local_1b8[1] = 0;
                  local_1b8[0] = 0;
                  local_1b8[7] = 0x100000000;
                  local_170[6] = 0;
                  local_170[5] = 0;
                  local_170[4] = 0;
                  local_170[3] = 0;
                  local_170[2] = 0;
                  local_170[1] = 0;
                  local_170[0] = 0;
                  local_170[7] = 0x100000000;
                  local_128 = 0;
                  local_120 = 0;
                  local_116 = 0;
                  local_110 = 0;
                  local_108 = 0;
                  local_100 = 0;
                  local_f8[0] = 0;
                  local_e0[0] = 0;
                  local_b0 = 0;
                  local_88 = 0;
                  local_90 = 0;
                  local_98 = 0;
                  local_a0 = 0;
                  local_a8 = 0;
                  local_178 = local_48;
                  local_130 = local_40;
                  local_118 = 4;
                  local_68 = uVar7;
                  local_58 = icbBufferBlit(void*,unsigned_long_long)::$_0::operator()
                                       (local_1b8,(long)local_48,(long)local_50,*puVar9,
                                        (int)puVar9[-2]);
                  local_54 = icbBufferBlit(void*,unsigned_long_long)::$_0::operator()
                                       (local_170,(long)local_40,(long)local_60,*puVar9,
                                        (int)puVar9[-1]);
                  *local_70 = 0;
                  *(float *)(local_70 + 1) = (float)((ulong)local_1b8[2] >> 0x20);
                  *(float *)((long)local_70 + 0xc) = (float)(local_1b8[3] & 0xffffffff);
                  uVar11 = 0;
                  fVar10 = (float)(local_170[3] & 0xffffffff);
                  local_70[2] = 0;
                  *(float *)(local_70 + 3) = (float)((ulong)local_170[2] >> 0x20);
                  *(float *)((long)local_70 + 0x1c) = fVar10;
                  uVar2 = AddDstEvents((long)local_f8,(long)local_40);
                  IntelAccelerator::submitBlit
                            (uVar2,CONCAT44(uVar11,fVar10),param_3,param_4,param_5,param_6,param_7,
                             param_8,*(IntelAccelerator **)((long)this + 0xf8),local_1b8,local_80,
                             *(IGAccelTask **)(*(long *)((long)this + 0x100) + 0x88),0,param_14);
                  if (local_58 != 0) {
                    iVar3 = (int)*puVar9 - local_58;
                    icbBufferBlit(void*,unsigned_long_long)::$_0::operator()
                              (local_1b8,(long)local_48,(long)local_50,(ulong)local_58,
                               (int)puVar9[-2] + iVar3);
                    icbBufferBlit(void*,unsigned_long_long)::$_0::operator()
                              (local_170,(long)local_40,(long)local_60,(ulong)local_54,
                               iVar3 + (int)puVar9[-1]);
                    *local_70 = 0;
                    *(float *)(local_70 + 1) = (float)((ulong)local_1b8[2] >> 0x20);
                    *(float *)((long)local_70 + 0xc) = (float)(local_1b8[3] & 0xffffffff);
                    uVar11 = 0;
                    fVar10 = (float)(local_170[3] & 0xffffffff);
                    local_70[2] = 0;
                    *(float *)(local_70 + 3) = (float)((ulong)local_170[2] >> 0x20);
                    *(float *)((long)local_70 + 0x1c) = fVar10;
                    uVar2 = AddDstEvents((long)local_f8,(long)local_40);
                    IntelAccelerator::submitBlit
                              (uVar2,CONCAT44(uVar11,fVar10),param_3,param_4,param_5,param_6,param_7
                               ,param_8,*(IntelAccelerator **)((long)this + 0xf8),local_1b8,local_80
                               ,*(IGAccelTask **)(*(long *)((long)this + 0x100) + 0x88),0,param_14);
                  }
                  uVar7 = local_68 + 1;
                  puVar9 = puVar9 + 3;
                } while (uVar7 < ((byte)param_10[1] & 3));
              }
              IGVector<>::~IGVector((IGVector<> *)local_80);
              IGVector<>::~IGVector((IGVector<> *)local_e0);
              IGVector<>::~IGVector((IGVector<> *)local_f8);
            }
            (**(code **)(*local_48 + 0x178))();
            if (local_31 != '\0') {
              (**(code **)(*local_40 + 0x178))();
            }
          }
        }
      }
      plVar1 = *(long **)((long)this + 0xf8);
      (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
      IOGraphicsAccelerator2::unlock_busy();
      _IOLockUnlock(plVar1[0x11]);
    }
  }
  return uVar8;
}



// IGAccelSharedUserClient::setDeviceSettingsUserPreferences(IntelSkuFeatureTableExRec*,
// IntelSkuFeatureTableExRec*, unsigned long long, unsigned long long*)

undefined8 __thiscall
IGAccelSharedUserClient::setDeviceSettingsUserPreferences
          (IGAccelSharedUserClient *this,undefined8 param_2_00,long param_2,undefined8 param_4_00,
          undefined8 *param_4)

{
  *param_4 = 0xc0;
  IGAccelShared::setDeviceSettingsUserPreferences(*(IGAccelShared **)(this + 0x100),param_2);
  return 0;
}



// IGAccelSharedUserClient::sharedStop()

void __thiscall IGAccelSharedUserClient::sharedStop(IGAccelSharedUserClient *this)

{
  IGTelemetryManager::onConnectionStop
            (*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),(long)(this + 0x178),
             (int)*(undefined8 *)(this + 0xe0));
  IGTelemetryManager::deleteThreadInfo(*(IGTelemetryManager **)(*(long *)(this + 0xf8) + 0xf18),0);
                    // WARNING: Could not recover jumptable at 0x000775c5. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x9a8))(this);
  return;
}



// IGAccelSharedUserClient::getTargetAndMethodForIndex(IOService**, unsigned int)

long __thiscall
IGAccelSharedUserClient::getTargetAndMethodForIndex
          (IGAccelSharedUserClient *this,undefined8 *param_1,uint param_2)

{
  long lVar1;
  
  *param_1 = this;
  if (param_2 < 0x100) {
                    // WARNING: Could not recover jumptable at 0x000775e3. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar1 = (**(code **)(__got::vtable + 0x950))();
    return lVar1;
  }
  if (param_2 < 0x109) {
    lVar1 = (ulong)(param_2 - 0x100) * 0x30 + *(long *)(this + 0x168);
  }
  else {
    lVar1 = 0;
  }
  return lVar1;
}



// IGAccelSharedUserClient::clientDied()

void IGAccelSharedUserClient::clientDied(void)

{
                    // WARNING: Could not recover jumptable at 0x00077618. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x908))();
  return;
}



// IGAccelSharedUserClient::bindResource(IGAccelResource*)

undefined4 __thiscall
IGAccelSharedUserClient::bindResource(IGAccelSharedUserClient *this,long *param_1)

{
  undefined4 uVar1;
  
  IOAccelResource2::checkDirty();
  uVar1 = (**(code **)(*param_1 + 0x170))(param_1);
  if ((char)uVar1 != '\0') {
    (**(code **)(*param_1 + 400))(param_1,*(undefined8 *)(this + 0x170),1);
  }
  return uVar1;
}



// IGAccelSharedUserClient::unbindResource(IGAccelResource*)

void __thiscall IGAccelSharedUserClient::unbindResource(IGAccelSharedUserClient *this,long *param_1)

{
  (**(code **)(*param_1 + 0x198))(param_1,*(undefined8 *)(this + 0x170));
                    // WARNING: Could not recover jumptable at 0x00077698. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x178))(param_1);
  return;
}



// IOGraphicsAccelerator2::acceleratorLock()

void __thiscall IOGraphicsAccelerator2::acceleratorLock(IOGraphicsAccelerator2 *this)

{
  _OSIncrementAtomic(this + 0x90);
  _IOLockLock(*(undefined8 *)(this + 0x88));
  _OSDecrementAtomic(this + 0x90);
  IOGraphicsAccelerator2::lock_busy();
                    // WARNING: Could not recover jumptable at 0x000776ed. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(long *)this + 0x850))(this,"",0);
  return;
}



// blit3d_params_t::blit3d_params_t()

void __thiscall blit3d_params_t::blit3d_params_t(blit3d_params_t *this)

{
  *(undefined8 *)(this + 0xc0) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0xc0),4);
  *(undefined8 *)(this + 0xd8) = 0;
  *(undefined8 *)(this + 0xe0) = 0;
  *(undefined8 *)(this + 0xe8) = 0;
  IGVector<>::grow((IGVector<> *)(this + 0xd8),4);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::IGVector(unsigned long)

void __cdecl IGVector<>::IGVector(ulong *param_1)

{
  ulong uVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  ulong uVar5;
  
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  uVar3 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,0x20
                    );
  if (uVar3 != 0) {
    uVar5 = param_1[2];
    if (uVar5 != 0) {
      if (*param_1 != 0) {
        lVar4 = 0;
        uVar5 = 0;
        do {
          uVar1 = param_1[2];
          *(undefined8 *)(uVar3 + 0x18 + lVar4) = *(undefined8 *)(uVar1 + 0x18 + lVar4);
          *(undefined8 *)(uVar3 + 0x10 + lVar4) = *(undefined8 *)(uVar1 + 0x10 + lVar4);
          uVar2 = *(undefined8 *)(uVar1 + lVar4);
          *(undefined8 *)(uVar3 + 8 + lVar4) = *(undefined8 *)(uVar1 + 8 + lVar4);
          *(undefined8 *)(uVar3 + lVar4) = uVar2;
          uVar5 = uVar5 + 1;
          lVar4 = lVar4 + 0x20;
        } while (uVar5 < *param_1);
        uVar5 = param_1[2];
      }
      lVar4 = param_1[1] << 5;
      if (lVar4 < 0) {
        lVar4 = -0x8000000000000000;
      }
      if (param_1[1] >> 0x3b != 0) {
        lVar4 = -0x8000000000000000;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                          kalloc_type_view_29,uVar5,lVar4);
    }
    param_1[2] = uVar3;
    param_1[1] = 1;
    *param_1 = 1;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSharedUserClient::icbBufferBlit(void*, unsigned long
// long)::$_0::TEMPNAMEPLACEHOLDERVALUE(surface_params_t&, IGAccelResource*,
// IntelSharedICBBufferBlit::_Resource&, GFX3DSTATE_SURFACEFORMAT, unsigned long long, unsigned
// short, unsigned long long) const

int __cdecl
IGAccelSharedUserClient::icbBufferBlit(void*,unsigned_long_long)::$_0::operator()
          (long *param_1,long param_2,long param_3,ulong param_4,int param_5)

{
  char cVar1;
  ulong uVar2;
  long lVar3;
  uint uVar4;
  uint uVar5;
  ulong uVar6;
  
  uVar4 = (uint)(param_4 >> 2);
  uVar5 = 0x4000;
  if (uVar4 < 0x4000) {
    uVar5 = uVar4;
  }
  uVar6 = 0;
  uVar2 = param_4 >> 2 & 0xffffffff;
  *(uint *)((long)param_1 + 0x14) = uVar5;
  *(int *)(param_1 + 3) = (int)(uVar2 / uVar5);
  *(undefined1 *)((long)param_1 + 0xc) = 0;
  lVar3 = (**(code **)(**(long **)(param_2 + 0x40) + 0x130))
                    (*(long **)(param_2 + 0x40),param_2,uVar2 % (ulong)uVar5);
  cVar1 = *(char *)(param_2 + 0x14);
  if (cVar1 != '\0') {
    if (cVar1 == -0x7e) {
      uVar6 = (ulong)*(uint *)(param_2 + 0xfc);
      goto LAB_00077892;
    }
    if (cVar1 != -0x80) goto LAB_00077892;
  }
  uVar6 = *(ulong *)(param_2 + 0xf8);
LAB_00077892:
  *param_1 = uVar6 + lVar3;
  *(int *)((long)param_1 + 0x2c) = param_5 + *(int *)(param_3 + 8);
  *(uint *)(param_1 + 1) = uVar5;
  *(undefined1 *)((long)param_1 + 0xc) = 0;
  *(undefined2 *)((long)param_1 + 0xe) = 199;
  return (uVar4 - (int)param_1[3] * *(int *)((long)param_1 + 0x14)) * 4;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstEvents(long param_1,long param_2)

{
  long lVar1;
  
  AddDstResourceEvents(param_1,param_2);
  lVar1 = IOAccelResource2::getStorageResource();
  if (lVar1 != param_2) {
    AddDstResourceEvents(param_1,lVar1);
    return;
  }
  return;
}



// IGVector<rect_pair_t, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 5;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3b != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(rect_pair_t*,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// IGAccelSharedUserClient::MetaClass::~MetaClass()

void __thiscall IGAccelSharedUserClient::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::~IGVector()

void __thiscall IGVector<>::~IGVector(IGVector<> *this)

{
  long lVar1;
  
  if (*(long *)(this + 0x10) != 0) {
    lVar1 = *(ulong *)(this + 8) << 3;
    if (lVar1 < 0) {
      lVar1 = -0x8000000000000000;
    }
    if (*(ulong *)(this + 8) >> 0x3d != 0) {
      lVar1 = -0x8000000000000000;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(IOAccelEvent**,unsigned_long)::
                        kalloc_type_view_29,*(long *)(this + 0x10),lVar1);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// AddDstResourceEvents(wait_update_events&, IGAccelResource*, bool)

void __cdecl AddDstResourceEvents(long param_1,long param_2)

{
  IGVector<> *this;
  byte bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  this = (IGVector<> *)(param_1 + 0x18);
  if ((*(byte *)(param_2 + 0xf) & 0x10) == 0) {
    bVar1 = *(byte *)(param_2 + 0x15);
    lVar6 = *(long *)(param_2 + 0x38);
    lVar4 = *(long *)(param_1 + 0x18);
    if (lVar4 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(this,lVar4 * 2);
      lVar5 = *(long *)this;
      lVar4 = lVar5;
      if ((char)uVar2 != '\0') goto LAB_00077aa3;
    }
    else {
LAB_00077aa3:
      lVar5 = lVar4 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(ulong *)(*(long *)(param_1 + 0x28) + lVar4 * 8) = (ulong)bVar1 * 0x40 + lVar6;
    }
    lVar6 = (ulong)*(byte *)(param_2 + 0x16) * 0x40 + *(long *)(param_2 + 0x38);
  }
  else {
    uVar2 = *(undefined8 *)(param_2 + 0x90);
    lVar6 = *(long *)(param_1 + 0x18);
    if (lVar6 == *(long *)(param_1 + 0x20)) {
      uVar3 = IGVector<>::grow(this,lVar6 * 2);
      lVar5 = *(long *)this;
      lVar6 = lVar5;
      if ((char)uVar3 != '\0') goto LAB_00077ae8;
    }
    else {
LAB_00077ae8:
      lVar5 = lVar6 + 1;
      *(long *)(param_1 + 0x18) = lVar5;
      *(undefined8 *)(*(long *)(param_1 + 0x28) + lVar6 * 8) = uVar2;
    }
    lVar6 = *(long *)(param_2 + 0x90) + 0x40;
    if (*(long *)(param_2 + 0x90) == 0) {
      lVar6 = 0;
    }
  }
  if (lVar5 == *(long *)(param_1 + 0x20)) {
    uVar2 = IGVector<>::grow(this,lVar5 * 2);
    if ((char)uVar2 == '\0') goto LAB_00077b35;
    lVar5 = *(long *)this;
  }
  *(long *)(param_1 + 0x18) = lVar5 + 1;
  *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6;
LAB_00077b35:
  lVar6 = *(long *)(param_2 + 0x40);
  if (lVar6 != 0) {
    lVar5 = *(long *)(param_1 + 0x18);
    if (lVar5 == *(long *)(param_1 + 0x20)) {
      uVar2 = IGVector<>::grow(this,lVar5 * 2);
      if ((char)uVar2 == '\0') {
        return;
      }
      lVar5 = *(long *)this;
    }
    *(long *)(param_1 + 0x18) = lVar5 + 1;
    *(long *)(*(long *)(param_1 + 0x28) + lVar5 * 8) = lVar6 + 0x38;
  }
  return;
}



void __GLOBAL__sub_I_IGAccelSharedUserClient_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelSharedUserClient::gMetaClass,"IGAccelSharedUserClient",
             (OSMetaClass *)__got::gMetaClass,0x188);
  IGAccelSharedUserClient::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelSharedUserClient::gMetaClass);
  return;
}



// IGPerfCounterConfig::configMSR()

void __thiscall IGPerfCounterConfig::configMSR(IGPerfCounterConfig *this)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *(long *)(this + 0x98);
  lVar2 = *(long *)(&DAT_00001270 + lVar1);
  *(uint *)(&DAT_00117268 + lVar2) = *(uint *)(&DAT_00117268 + lVar2) | 5;
  if ((*(long *)(&DAT_00001290 + *(long *)(*(long *)(lVar1 + 0xf18) + 600)) != 0) &&
     (*(char *)(*(long *)(&DAT_00001290 + *(long *)(*(long *)(lVar1 + 0xf18) + 600)) + 0x20) != '\0'
     )) {
    if (*(int *)(this + 8) == 0) {
      *(undefined4 *)(this + 0x10) = 0x117268;
      *(undefined4 *)(this + 0x14) = *(undefined4 *)(&DAT_00117268 + lVar2);
      *(undefined4 *)(this + 8) = 1;
    }
    *(undefined4 *)(&DAT_00117268 + lVar2) = 5;
  }
  return;
}



// IGPerfCounterConfig::setUncorePerfCounterEnableFlag(int)

void __thiscall
IGPerfCounterConfig::setUncorePerfCounterEnableFlag(IGPerfCounterConfig *this,int param_1)

{
  *(uint *)(&DAT_00117268 + *(long *)(&DAT_00001270 + *(long *)(this + 0x98))) =
       (uint)(param_1 != 0) * 5 |
       *(uint *)(&DAT_00117268 + *(long *)(&DAT_00001270 + *(long *)(this + 0x98))) & 0xfffffffa;
  return;
}



// IGPerfCounterConfig::saveMSR()

void __thiscall IGPerfCounterConfig::saveMSR(IGPerfCounterConfig *this)

{
  if ((*(long *)(&DAT_00001290 + *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) != 0)
     && (*(char *)(*(long *)(&DAT_00001290 +
                            *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) + 0x20) !=
         '\0')) {
    *(undefined4 *)(this + 0x10) = 0x117268;
    *(undefined4 *)(this + 0x14) =
         *(undefined4 *)(&DAT_00117268 + *(long *)(&DAT_00001270 + *(long *)(this + 0x98)));
    *(undefined4 *)(this + 8) = 1;
  }
  return;
}



// IGPerfCounterConfig::writeMSR(unsigned int, int)

undefined4 __thiscall
IGPerfCounterConfig::writeMSR(IGPerfCounterConfig *this,uint param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if ((*(long *)(&DAT_00001290 + *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) != 0)
     && (uVar1 = 0,
        *(char *)(*(long *)(&DAT_00001290 +
                           *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) + 0x20) !=
        '\0')) {
    *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + (ulong)param_1) = param_2;
    uVar1 = param_2;
  }
  return uVar1;
}



// IGPerfCounterConfig::readMSR(unsigned int)

undefined4 __thiscall IGPerfCounterConfig::readMSR(IGPerfCounterConfig *this,uint param_1)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if ((*(long *)(&DAT_00001290 + *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) != 0)
     && (uVar1 = 0,
        *(char *)(*(long *)(&DAT_00001290 +
                           *(long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 600)) + 0x20) !=
        '\0')) {
    uVar1 = *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + (ulong)param_1);
  }
  return uVar1;
}



// IGPerfCounterConfig::restoreMSR()

void __thiscall IGPerfCounterConfig::restoreMSR(IGPerfCounterConfig *this)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *(long *)(this + 0x98);
  lVar2 = *(long *)(&DAT_00001270 + lVar1);
  *(uint *)(&DAT_00117268 + lVar2) = *(uint *)(&DAT_00117268 + lVar2) & 0xfffffffa;
  if (((*(long *)(&DAT_00001290 + *(long *)(*(long *)(lVar1 + 0xf18) + 600)) != 0) &&
      (*(char *)(*(long *)(&DAT_00001290 + *(long *)(*(long *)(lVar1 + 0xf18) + 600)) + 0x20) !=
       '\0')) && (*(int *)(this + 8) != 0)) {
    *(undefined4 *)(this + 8) = 0;
    *(undefined4 *)(&DAT_00117268 + lVar2) = *(undefined4 *)(this + 0x14);
  }
  return;
}



// IGPerfCounterConfig::saveClockGatingState()

void __thiscall IGPerfCounterConfig::saveClockGatingState(IGPerfCounterConfig *this)

{
  *(undefined4 *)(this + 0x90) = 0xe4f4;
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),1);
  *(undefined4 *)(this + 0x94) =
       *(undefined4 *)
        (*(long *)(*(IntelAccelerator **)(this + 0x98) + 0x1270) + (ulong)*(uint *)(this + 0x90));
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),0);
  return;
}



// IGPerfCounterConfig::restoreClockGatingState()

void __thiscall IGPerfCounterConfig::restoreClockGatingState(IGPerfCounterConfig *this)

{
  IntelAccelerator *this_00;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),1);
  this_00 = *(IntelAccelerator **)(this + 0x98);
  *(undefined4 *)(*(long *)(this_00 + 0x1270) + (ulong)*(uint *)(this + 0x90)) =
       *(undefined4 *)(this + 0x94);
  IntelAccelerator::SafeForceWake(this_00,0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPerfCounterConfig::configPerfcntForSQFull(IntelAccelerator*)

void __cdecl IGPerfCounterConfig::configPerfcntForSQFull(long param_1)

{
  *(undefined4 *)(*(long *)(&DAT_00001270 + param_1) + 0x91bc) = 0xe0500000;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGPerfCounterConfig::configSpmGpmEuMetrics(IntelAccelerator*)

void __cdecl IGPerfCounterConfig::configSpmGpmEuMetrics(long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(&DAT_00001270 + param_1);
  *(undefined4 *)(lVar1 + 0x8c24) = 1;
  *(undefined4 *)(lVar1 + 0xa280) = 0x10001;
  return;
}



// IGPerfCounterConfig::SendProlog(TelemetryOffsetValue*, unsigned int)

void __thiscall IGPerfCounterConfig::SendProlog(IGPerfCounterConfig *this,long param_1,uint param_2)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  
  if (param_2 != 0) {
    uVar2 = 0;
    do {
      uVar1 = *(uint *)(param_1 + uVar2 * 8);
      if (((((ulong)uVar1 == 0xd24) || ((uVar1 & 0xfffffcff) == 0xe458)) || (uVar1 == 0xe45c)) ||
         ((uVar1 == 0xe55c || (uVar1 == 0xe65c)))) {
LAB_00077e7e:
        *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + (ulong)uVar1) =
             *(undefined4 *)(param_1 + 4 + uVar2 * 8);
      }
      else {
        uVar3 = uVar1 & 3;
        if ((((uVar1 == 0xd04) || (uVar3 == 0 && uVar1 - 0x9800 < 0x6c1)) ||
            (((uVar3 == 0 && (uVar1 - 0x20000 < 0x10001)) ||
             ((uVar3 == 0 && (uVar1 - 0x2360 < 0x7c1)))))) ||
           (((uVar3 == 0 && (((uVar1 == 0x2050 || (uVar1 == 0xa090)) || (uVar1 == 0xa094)))) ||
            ((((uVar1 - 0x91b8 & 0xfffffff3) == 0 && uVar3 == 0 || (uVar1 == 0xe4f4)) ||
             (uVar1 == 0xa188)))))) goto LAB_00077e7e;
      }
      uVar2 = uVar2 + 1;
    } while (param_2 != uVar2);
  }
  return;
}



// IGPerfCounterConfig::SetClockGating(bool)

void __thiscall IGPerfCounterConfig::SetClockGating(IGPerfCounterConfig *this,uint param_1)

{
  *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + 0xe4f4) =
       param_1 ^ 0x10001 | *(uint *)(this + 0x94);
  return;
}



// IGPerfCounterConfig::SendAllPrologs(unsigned long long)

void __thiscall IGPerfCounterConfig::SendAllPrologs(IGPerfCounterConfig *this,uint param_1)

{
  SendProlog(this,0x1333f8,1);
  if ((param_1 >> 8 & 1) != 0) {
    SendProlog(this,0x133400,1);
  }
  *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + 0xe4f4) =
       (uint)((param_1 >> 9 & 1) == 0) | *(uint *)(this + 0x94) | 0x10000;
  return;
}



// IGPerfCounterConfig::startChangingConfig()

void __thiscall IGPerfCounterConfig::startChangingConfig(IGPerfCounterConfig *this)

{
  *(undefined1 *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 8) = 1;
  return;
}



// IGPerfCounterConfig::createDefaultConfig()

void __thiscall IGPerfCounterConfig::createDefaultConfig(IGPerfCounterConfig *this)

{
  InitPerfRegisterTable(this,0x1331a0,0x4b,(uint *)(this + 0xa0),(undefined1 *)0x0);
  return;
}



// IGPerfCounterConfig::InitPerfRegisterTable(TelemetryOffsetValue const*, unsigned int,
// PerfCounterConfig&, TelemetryOperation*)

undefined8 __thiscall
IGPerfCounterConfig::InitPerfRegisterTable
          (IGPerfCounterConfig *this,long param_1,uint param_2,uint *param_3,undefined1 *param_4)

{
  long *plVar1;
  uint uVar2;
  ulong uVar3;
  uint uVar4;
  uint uVar5;
  undefined1 *puVar6;
  uint uVar7;
  uint uVar8;
  ulong uVar9;
  uint uVar10;
  undefined1 local_68 [52];
  uint local_34;
  
  puVar6 = local_68;
  if (param_4 != (undefined1 *)0x0) {
    puVar6 = param_4;
  }
  *(undefined1 *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 8) = 1;
  ___bzero();
  if (param_2 == 0) {
    uVar3 = 0;
    uVar5 = 0;
    uVar8 = 0;
    uVar7 = 0;
    uVar4 = 0;
  }
  else {
    uVar3 = (ulong)param_2;
    uVar9 = 0;
    uVar7 = 0;
    uVar8 = 0;
    local_34 = 0;
    uVar5 = 0;
    do {
      uVar4 = *(uint *)(param_1 + uVar9 * 8);
      uVar2 = *(uint *)(param_1 + 4 + uVar9 * 8);
      if ((((((uVar4 == 0xd24) || ((uVar4 & 0xfffffcff) == 0xe458)) || (uVar4 == 0xe45c)) ||
           ((uVar4 == 0xe65c || (uVar4 == 0xe55c)))) ||
          ((uVar10 = uVar4 & 3, uVar10 == 0 && (uVar4 - 0x9800 < 0x6c1)))) ||
         (((uVar4 == 0xd04 || ((uVar4 - 0x91b8 & 0xfffffff3) == 0 && uVar10 == 0)) ||
          ((uVar10 == 0 && (uVar4 - 0x20000 < 0x10001)))))) {
        uVar8 = uVar8 + 1;
      }
      else if ((uVar10 == 0) && (uVar4 - 0x2360 < 0x7c1)) {
        uVar7 = uVar7 + 1;
      }
      else if (uVar10 == 0) {
        if ((int)uVar4 < 0xa094) {
          if ((uVar4 != 0x2050) && (uVar4 != 0xa090)) {
LAB_00078210:
            *(ulong *)(puVar6 + 0x10) = uVar9;
            goto LAB_000781b6;
          }
LAB_0007819a:
          local_34 = local_34 + 1;
        }
        else {
          if (uVar4 == 0xe4f4) goto LAB_0007815b;
          if (uVar4 != 0xa188) {
            if (uVar4 == 0xa094) goto LAB_0007819a;
            goto LAB_00078210;
          }
        }
      }
      else if (uVar4 != 0xa188) {
        if (uVar4 != 0xe4f4) goto LAB_00078210;
LAB_0007815b:
        uVar5 = uVar5 + 1;
      }
      if (uVar9 == 0x100) {
        *(undefined8 *)(puVar6 + 0x10) = 0x100;
LAB_000781b6:
        *(ulong *)(puVar6 + 0x18) = (ulong)uVar4;
        *(ulong *)(puVar6 + 0x20) = (ulong)uVar2;
        return 0xfffffffe;
      }
      param_3[uVar9 * 2 + 8] = uVar4;
      param_3[uVar9 * 2 + 9] = uVar2;
      uVar9 = uVar9 + 1;
      uVar4 = local_34;
    } while (uVar3 != uVar9);
  }
  *param_3 = param_2;
  param_3[3] = uVar8;
  param_3[4] = uVar7;
  param_3[1] = uVar5;
  param_3[2] = uVar4;
  *(ulong *)(puVar6 + 0x10) = uVar3;
  FindFlexEUsInConfigTable(this);
  plVar1 = (long *)(*(long *)(*(long *)(this + 0x98) + 0xf18) + 0x268);
  *plVar1 = *plVar1 + 1;
  return 0;
}



// IGPerfCounterConfig::FindFlexEUsInConfigTable()

void __thiscall IGPerfCounterConfig::FindFlexEUsInConfigTable(IGPerfCounterConfig *this)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  IGPerfCounterConfig *pIVar4;
  ulong uVar5;
  ulong uVar6;
  
  lVar3 = 0;
  do {
    *(undefined4 *)(this + lVar3 * 8 + 0x8c4) = 0;
    lVar3 = lVar3 + 1;
  } while (lVar3 != 7);
  uVar1 = *(uint *)(this + 0xa0);
  if ((ulong)uVar1 != 0) {
    uVar6 = 0xffffffff;
    uVar5 = 0;
    do {
      uVar2 = *(uint *)(this + uVar5 * 8 + 0xc0);
      if (((((uVar2 & 0xfffffcff) == 0xe458) || (uVar2 == 0xe45c)) || (uVar2 == 0xe65c)) ||
         (uVar2 == 0xe55c)) {
        *(undefined4 *)(this + (ulong)((uVar2 - 0xe458 >> 8) + (uVar2 - 0xe458 & 0xf)) * 8 + 0x8c4)
             = *(undefined4 *)(this + uVar5 * 8 + 0xc4);
        uVar6 = uVar5 & 0xffffffff;
      }
      uVar5 = uVar5 + 1;
    } while (uVar1 != uVar5);
    if ((int)uVar6 != -1) {
      pIVar4 = this + 0x8c0;
      goto LAB_000782b1;
    }
  }
  pIVar4 = (IGPerfCounterConfig *)&_g_defaultFlexEU;
LAB_000782b1:
  *(IGPerfCounterConfig **)(this + 0xb8) = pIVar4;
  return;
}



// IGPerfCounterConfig::ConfigurePerfRegisters(unsigned long long, PerfCounterConfig&, unsigned int)

undefined8 __thiscall
IGPerfCounterConfig::ConfigurePerfRegisters
          (IGPerfCounterConfig *this,IGPerfCounterRestoreOnRC6Exit *param_1,long param_2,
          undefined4 param_3)

{
  IGPerfCounterRestoreOnRC6Exit *this_00;
  int iVar1;
  undefined4 uVar2;
  long lVar3;
  IntelAccelerator *this_01;
  uint uVar4;
  ulong uVar5;
  ulong local_48;
  undefined4 local_40;
  IGPerfCounterRestoreOnRC6Exit *local_38;
  
  this_00 = (IGPerfCounterRestoreOnRC6Exit *)(this + 0x8f8);
  uVar4 = 1 - *(int *)(this + 0x908);
  *(uint *)(this + 0x908) = uVar4;
  lVar3 = *(long *)(this + (ulong)uVar4 * 8 + 0x920);
  *(long *)(this + 0x910) = lVar3;
  *(undefined8 *)(this + 0x918) = *(undefined8 *)(this + (ulong)uVar4 * 8 + 0x930);
  if (lVar3 != 0) {
    local_38 = param_1;
    IntelAccelerator::SafeForceWake(*(IntelAccelerator **)this_00,1);
    this_01 = *(IntelAccelerator **)this_00;
    iVar1 = *(int *)(*(long *)(this_01 + 0x1270) + 0x2058);
    while (iVar1 != 0) {
      (**(code **)(**(long **)(this_01 + 0x380) + 0x158))();
      *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)this_00) + 0x2058) = 0;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100);
      _thread_block(0);
      this_01 = *(IntelAccelerator **)this_00;
      iVar1 = *(int *)(*(long *)(this_01 + 0x1270) + 0x2058);
    }
    IntelAccelerator::SafeForceWake(this_01,0);
    ___bzero(*(undefined8 *)(this + 0x910),*(undefined4 *)(this + 0x940));
    param_1 = local_38;
    *(undefined4 *)(this + 0x950) = 0;
    *(long *)(this + 0x948) = *(long *)(this + 0x910);
    if (*(long *)(this + 0x910) != 0) {
      local_48 = (*(ulong *)(this + 0x918) & 0xfffffffffffc) << 0x22 | 0x18800101;
      local_40 = (undefined4)((*(ulong *)(this + 0x918) & 0xfffffffffffc) >> 0x1e);
      IGPerfCounterRestoreOnRC6Exit::addCmdWABB(this_00,&local_48,0xc);
    }
  }
  *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + 0x2b00) = 0;
  *(undefined4 *)(this + 0xc) = param_3;
  SendAllPrologs(this,(uint)param_1);
  if (*(int *)(param_2 + 0xc) != 0) {
    uVar5 = 0;
    local_38 = this_00;
    do {
      uVar4 = *(uint *)(param_2 + 0x20 + uVar5 * 8);
      uVar2 = *(undefined4 *)(param_2 + 0x24 + uVar5 * 8);
      if (((((uVar4 & 0xfffffcff) != 0xe458) && (uVar4 != 0xe45c)) && (uVar4 != 0xe55c)) &&
         (uVar4 != 0xe65c)) {
        local_48 = (ulong)(uVar4 >> 2 & 0x1fffff) << 0x22 | 0x11000001;
        local_40 = uVar2;
        IGPerfCounterRestoreOnRC6Exit::addCmdWABB(local_38,&local_48,0xc);
      }
      *(undefined4 *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x98)) + (ulong)uVar4) = uVar2;
      uVar5 = uVar5 + 1;
    } while (uVar5 < *(uint *)(param_2 + 0xc));
    if (*(long *)(this + 0x910) != 0) {
      local_48 = CONCAT44(local_48._4_4_,0x5000000);
      IGPerfCounterRestoreOnRC6Exit::addCmdWABB(local_38,&local_48,4);
    }
  }
  if (*(int *)(param_2 + 0x10) != 0) {
    lVar3 = *(long *)(&DAT_00001270 + *(long *)(this + 0x98));
    uVar4 = 0;
    do {
      uVar5 = (ulong)(*(int *)(param_2 + 0xc) + uVar4);
      *(undefined4 *)(lVar3 + (ulong)*(uint *)(param_2 + 0x20 + uVar5 * 8)) =
           *(undefined4 *)(param_2 + 0x24 + uVar5 * 8);
      uVar4 = uVar4 + 1;
    } while (uVar4 < *(uint *)(param_2 + 0x10));
  }
  if (*(long *)(this + 0x910) != 0) {
    *(uint *)(*(long *)(&DAT_00001270 + *(long *)(this + 0x8f8)) + 0x2058) =
         *(uint *)(this + 0x918) | 1;
  }
  return 0;
}



// IGPerfCounterConfig::resendCurrentConfig(unsigned long long)

undefined8 __thiscall
IGPerfCounterConfig::resendCurrentConfig(IGPerfCounterConfig *this,uint param_1)

{
  long lVar1;
  IntelAccelerator *this_00;
  uint uVar2;
  ulong uVar3;
  
  IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),1);
  SendAllPrologs(this,param_1);
  if (*(int *)(this + 0xac) != 0) {
    lVar1 = *(long *)(&DAT_00001270 + *(long *)(this + 0x98));
    uVar3 = 0;
    do {
      *(undefined4 *)(lVar1 + (ulong)*(uint *)(this + uVar3 * 8 + 0xc0)) =
           *(undefined4 *)(this + uVar3 * 8 + 0xc4);
      uVar3 = uVar3 + 1;
    } while (uVar3 < *(uint *)(this + 0xac));
  }
  this_00 = *(IntelAccelerator **)(this + 0x98);
  if (*(int *)(this + 0xb0) != 0) {
    lVar1 = *(long *)(this_00 + 0x1270);
    uVar2 = 0;
    do {
      *(undefined4 *)
       (lVar1 + (ulong)*(uint *)(this + (ulong)(*(int *)(this + 0xac) + uVar2) * 8 + 0xc0)) =
           *(undefined4 *)(this + (ulong)(*(int *)(this + 0xac) + uVar2) * 8 + 0xc4);
      uVar2 = uVar2 + 1;
    } while (uVar2 < *(uint *)(this + 0xb0));
  }
  IntelAccelerator::SafeForceWake(this_00,0);
  return 0;
}



// IGPerfCounterConfig::CompareAndUseNewConfig(bool, unsigned int, PerfCounterConfig*, unsigned long
// long, PerfCounterConfig*, TelemetryOperation*)

undefined8 __thiscall
IGPerfCounterConfig::CompareAndUseNewConfig
          (IGPerfCounterConfig *this,char param_1,undefined8 param_3_00,void *param_3,
          IGPerfCounterRestoreOnRC6Exit *param_4,void *param_5,long param_6)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  
  lVar3 = *(long *)this;
  if ((lVar3 == 0) || (lVar3 == *(long *)(param_6 + 0x20))) {
    param_1 = '\0';
  }
  lVar4 = 0;
  do {
    uVar1 = *(uint *)((long)param_5 + lVar4 * 4);
    uVar2 = *(uint *)((long)param_3 + lVar4 * 4);
    if (uVar1 != uVar2) {
      if (param_1 != '\0') {
        *(long *)(param_6 + 8) = lVar3;
        *(long *)(param_6 + 0x10) = lVar4;
        *(ulong *)(param_6 + 0x18) = (ulong)uVar1;
        *(ulong *)(param_6 + 0x20) = (ulong)uVar2;
        return 0xfffffffc;
      }
      *(undefined8 *)this = *(undefined8 *)(param_6 + 0x20);
      (**(code **)(**(long **)(*(long *)(this + 0x98) + 0x380) + 0x158))();
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),1);
      ConfigurePerfRegisters(this,param_4,(long)param_3,0);
      IntelAccelerator::SafeForceWake(*(IntelAccelerator **)(this + 0x98),0);
      _memmove(param_5,param_3,0x820);
      return 0;
    }
    lVar4 = lVar4 + 1;
  } while (lVar4 != 0x208);
  return 0;
}



// IGPerfCounterRestoreOnRC6Exit::addCmdWABB(void*, unsigned int)

void __thiscall
IGPerfCounterRestoreOnRC6Exit::addCmdWABB
          (IGPerfCounterRestoreOnRC6Exit *this,void *param_1,uint param_2)

{
  if ((((*(long *)(this + 0x18) != 0) && (*(int *)(this + 0x58) + param_2 <= *(uint *)(this + 0x48))
       ) && (param_1 != (void *)0x0)) && (*(void **)(this + 0x50) != (void *)0x0)) {
    _memmove(*(void **)(this + 0x50),param_1,(ulong)param_2);
    *(ulong *)(this + 0x50) = *(long *)(this + 0x50) + (ulong)param_2;
    *(uint *)(this + 0x58) = *(int *)(this + 0x58) + param_2;
  }
  return;
}



// IGSemaphoreWaitBufferQueue::MetaClass::MetaClass()

void __thiscall IGSemaphoreWaitBufferQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGSemaphoreWaitBufferQueue",(OSMetaClass *)__got::gMetaClass,0x80)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGSemaphoreWaitBufferQueue::MetaClass::~MetaClass()

void __thiscall IGSemaphoreWaitBufferQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue(OSMetaClass const*)

void __thiscall
IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue
          (IGSemaphoreWaitBufferQueue *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGSemaphoreWaitBufferQueue;
  return;
}



// IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue(OSMetaClass const*)

void __thiscall
IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue
          (IGSemaphoreWaitBufferQueue *this,OSMetaClass *param_1)

{
  OSObject::OSObject((OSObject *)this,param_1);
  *(undefined ***)this = &__const::~IGSemaphoreWaitBufferQueue;
  return;
}



// IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue()

void __thiscall
IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue(IGSemaphoreWaitBufferQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue()

void __thiscall
IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue(IGSemaphoreWaitBufferQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  return;
}



// IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue()

void __thiscall
IGSemaphoreWaitBufferQueue::~IGSemaphoreWaitBufferQueue(IGSemaphoreWaitBufferQueue *this)

{
  OSObject::~OSObject((OSObject *)this);
  _OSObject_typed_operator_delete(&IGSemaphoreWaitBufferQueue_ktv,this,0x80);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSemaphoreWaitBufferQueue::operator delete(void*, unsigned long)

void __cdecl IGSemaphoreWaitBufferQueue::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGSemaphoreWaitBufferQueue_ktv,param_1,param_2);
  return;
}



// IGSemaphoreWaitBufferQueue::getMetaClass() const

undefined8 * IGSemaphoreWaitBufferQueue::getMetaClass(void)

{
  return &gMetaClass;
}



// IGSemaphoreWaitBufferQueue::MetaClass::MetaClass()

void __thiscall IGSemaphoreWaitBufferQueue::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGSemaphoreWaitBufferQueue",(OSMetaClass *)__got::gMetaClass,0x80)
  ;
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGSemaphoreWaitBufferQueue::MetaClass::alloc() const

OSObject * IGSemaphoreWaitBufferQueue::MetaClass::alloc(void)

{
  OSObject *this;
  
  this = (OSObject *)_OSObject_typed_operator_new(&IGSemaphoreWaitBufferQueue_ktv,0x80);
  OSObject::OSObject(this,(OSMetaClass *)&IGSemaphoreWaitBufferQueue::gMetaClass);
  *(undefined ***)this = &__const::~IGSemaphoreWaitBufferQueue;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGSemaphoreWaitBufferQueue::operator new(unsigned long)

void * __thiscall IGSemaphoreWaitBufferQueue::operator_new(IGSemaphoreWaitBufferQueue *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGSemaphoreWaitBufferQueue_ktv,this);
  return pvVar1;
}



// IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue()

void __thiscall
IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue(IGSemaphoreWaitBufferQueue *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGSemaphoreWaitBufferQueue;
  OSMetaClass::instanceConstructed();
  return;
}



// IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue()

void __thiscall
IGSemaphoreWaitBufferQueue::IGSemaphoreWaitBufferQueue(IGSemaphoreWaitBufferQueue *this)

{
  OSObject::OSObject((OSObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGSemaphoreWaitBufferQueue;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGSemaphoreWaitBufferQueue::withOptions(IGHwCsType, IOAccelEventMachine2*)

IGSemaphoreWaitBufferQueue * __cdecl
IGSemaphoreWaitBufferQueue::withOptions(undefined1 param_1,undefined8 param_2)

{
  IGSemaphoreWaitBufferQueue *this;
  undefined8 uVar1;
  
  this = (IGSemaphoreWaitBufferQueue *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this != (IGSemaphoreWaitBufferQueue *)0x0) {
    uVar1 = initWithOptions(this,param_1,param_2);
    if ((char)uVar1 != '\0') {
      return this;
    }
    (**(code **)(*(long *)this + 0x28))(this);
  }
  return (IGSemaphoreWaitBufferQueue *)0x0;
}



// IGSemaphoreWaitBufferQueue::initWithOptions(IGHwCsType, IOAccelEventMachine2*)

undefined8 __thiscall
IGSemaphoreWaitBufferQueue::initWithOptions
          (IGSemaphoreWaitBufferQueue *this,IGSemaphoreWaitBufferQueue param_1,undefined8 param_2)

{
  undefined8 uVar1;
  char cVar2;
  bool bVar3;
  undefined4 uVar4;
  long lVar5;
  
  cVar2 = (**(code **)(__got::vtable + 0x98))();
  if (cVar2 != '\0') {
    this[0xc] = param_1;
    *(undefined8 *)(this + 0x10) = param_2;
    *(undefined8 *)(this + 0x30) = 0;
    uVar4 = _OSIncrementAtomic(&fQueueIdCounter);
    *(undefined4 *)(this + 0x38) = uVar4;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x50) = 0;
    *(undefined8 *)(this + 0x58) = 0;
    *(undefined8 *)(this + 0x60) = 0;
    *(undefined8 *)(this + 0x68) = 0;
    *(undefined8 *)(this + 0x70) = 0;
    *(undefined8 *)(this + 0x78) = 0;
    bVar3 = initSemaphoreWaitBatchBufferTemplate(this);
    if (!bVar3) {
      return 0;
    }
    lVar5 = _IOLockAlloc();
    *(long *)(this + 0x18) = lVar5;
    if (lVar5 != 0) {
      *(undefined8 *)(this + 0x20) = 0;
      *(IGSemaphoreWaitBufferQueue **)(this + 0x28) = this + 0x20;
      return 1;
    }
    uVar1 = *(undefined8 *)(this + 0x40);
    *(undefined8 *)(this + 0x40) = 0;
    _IOFreeTypeImpl(&releaseSemaphoreWaitBatchBufferTemplate()::kalloc_type_view_409,uVar1);
  }
  return 0;
}



// IGSemaphoreWaitBufferQueue::initSemaphoreWaitBatchBufferTemplate()

bool __thiscall
IGSemaphoreWaitBufferQueue::initSemaphoreWaitBatchBufferTemplate(IGSemaphoreWaitBufferQueue *this)

{
  int iVar1;
  uint uVar2;
  void *pvVar3;
  long lVar4;
  ulong uVar5;
  
  pvVar3 = (void *)_IOMallocTypeImpl(&initSemaphoreWaitBatchBufferTemplate()::kalloc_type_view_288);
  *(void **)(this + 0x40) = pvVar3;
  if (pvVar3 != (void *)0x0) {
    _memcpy(pvVar3,&g_cInitMiLoadGPR,0x84);
    lVar4 = 0;
    do {
      iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
      *(uint *)((long)pvVar3 + lVar4 * 2 + 4) =
           *(uint *)((long)pvVar3 + lVar4 * 2 + 4) & 0xff800003 | (int)lVar4 + iVar1 & 0x7ffffcU;
      *(uint *)((long)pvVar3 + lVar4 * 2 + 0xc) =
           *(uint *)((long)pvVar3 + lVar4 * 2 + 0xc) & 0xff800003 |
           iVar1 + (int)lVar4 + 4U & 0x7ffffc;
      lVar4 = lVar4 + 8;
    } while (lVar4 != 0x40);
    *(undefined4 *)((long)pvVar3 + 0x28) = 800;
    *(undefined8 *)((long)pvVar3 + 0x84) = 0x15000001;
    lVar4 = 0;
    *(undefined4 *)((long)pvVar3 + 0x8c) = 0;
    uVar5 = (ulong)(*(uint *)(&DAT_0012d7c9 + (ulong)(byte)this[0xc] * 0x79) >> 2 & 0x1fffff) <<
            0x22 | 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0x8c) = 0;
    *(ulong *)((long)pvVar3 + 0x84) = uVar5;
    iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(ulong *)((long)pvVar3 + 0x84) = uVar5;
    *(uint *)((long)pvVar3 + 0x8c) = iVar1 + 0x18U & 0x7ffffc;
    *(undefined8 *)((long)pvVar3 + 0x90) = 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0x98) = 0;
    uVar5 = (ulong)(*(int *)(&DAT_0012d7c9 + (ulong)(byte)this[0xc] * 0x79) + 4U >> 2 & 0x1fffff) <<
            0x22 | 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0x98) = 0;
    *(ulong *)((long)pvVar3 + 0x90) = uVar5;
    iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(ulong *)((long)pvVar3 + 0x90) = uVar5;
    *(uint *)((long)pvVar3 + 0x98) = iVar1 + 0x1cU & 0x7ffffc;
    *(undefined4 *)((long)pvVar3 + 0x9c) = 0;
    *(undefined8 *)((long)pvVar3 + 0xa0) = 0x14800002;
    *(undefined8 *)((long)pvVar3 + 0xa8) = 0;
    uVar2 = *(uint *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(undefined8 *)((long)pvVar3 + 0xa8) = 0;
    *(ulong *)((long)pvVar3 + 0xa0) = (ulong)(uVar2 & 0x7ffffc) << 0x20 | 0x14800002;
    *(undefined8 *)((long)pvVar3 + 0xb0) = 0x80080000d000003;
    *(undefined8 *)((long)pvVar3 + 0xb8) = 0x1010000008008401;
    *(undefined4 *)((long)pvVar3 + 0xc0) = 0x18001433;
    *(undefined8 *)((long)pvVar3 + 0xc4) = 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0xcc) = 0;
    uVar5 = (ulong)(*(uint *)(&DAT_0012d7c9 + (ulong)(byte)this[0xc] * 0x79) >> 2 & 0x1fffff) <<
            0x22 | 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0xcc) = 0;
    *(ulong *)((long)pvVar3 + 0xc4) = uVar5;
    iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(ulong *)((long)pvVar3 + 0xc4) = uVar5;
    *(uint *)((long)pvVar3 + 0xcc) = iVar1 + 0x20U & 0x7ffffc;
    *(undefined8 *)((long)pvVar3 + 0xd0) = 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0xd8) = 0;
    uVar5 = (ulong)(*(int *)(&DAT_0012d7c9 + (ulong)(byte)this[0xc] * 0x79) + 4U >> 2 & 0x1fffff) <<
            0x22 | 0x15000001;
    *(undefined4 *)((long)pvVar3 + 0xd8) = 0;
    *(ulong *)((long)pvVar3 + 0xd0) = uVar5;
    iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(ulong *)((long)pvVar3 + 0xd0) = uVar5;
    *(uint *)((long)pvVar3 + 0xd8) = iVar1 + 0x24U & 0x7ffffc;
    *(undefined8 *)((long)pvVar3 + 0xdc) = 0x80080040d000004;
    *(undefined8 *)((long)pvVar3 + 0xe4) = 0x1010000008008403;
    *(undefined8 *)((long)pvVar3 + 0xec) = 0x58001c3318001831;
    *(undefined8 *)((long)pvVar3 + 0xf4) = 0x80080060d000003;
    *(undefined8 *)((long)pvVar3 + 0xfc) = 0x1010000008008402;
    *(undefined8 *)((long)pvVar3 + 0x104) = 0xd00000318001833;
    *(undefined8 *)((long)pvVar3 + 0x10c) = 0x800840508008006;
    *(undefined8 *)((long)pvVar3 + 0x114) = 0x1800143110200000;
    *(undefined8 *)((long)pvVar3 + 0x11c) = 0x80080050d000003;
    *(undefined8 *)((long)pvVar3 + 0x124) = 0x1020000008008407;
    *(undefined4 *)((long)pvVar3 + 300) = 0x18001431;
    *(undefined8 *)((long)pvVar3 + 0x130) = 0x12000002;
    *(undefined8 *)((long)pvVar3 + 0x138) = 0;
    iVar1 = *(int *)(&DAT_0012d7cd + (ulong)(byte)this[0xc] * 0x79);
    *(undefined8 *)((long)pvVar3 + 0x138) = 0;
    *(ulong *)((long)pvVar3 + 0x130) = (ulong)(iVar1 + 0x28U >> 2 & 0xffffff) << 0x22 | 0x12000002;
    do {
      *(undefined4 *)((long)pvVar3 + lVar4 + 0x150) = 0;
      *(undefined8 *)((long)pvVar3 + lVar4 + 0x148) = 0;
      *(undefined8 *)((long)pvVar3 + lVar4 + 0x140) = 0x10000003;
      lVar4 = lVar4 + 0x14;
    } while (lVar4 != 0x50);
    *(undefined8 *)((long)pvVar3 + 0x198) = 0;
    *(undefined8 *)((long)pvVar3 + 400) = 0x1b000002;
    *(undefined4 *)((long)pvVar3 + 400) = 0x1b200002;
    *(undefined8 *)((long)pvVar3 + 0x1a8) = 0;
    *(undefined8 *)((long)pvVar3 + 0x1a0) = 0x18800101;
  }
  return pvVar3 != (void *)0x0;
}



// IGSemaphoreWaitBufferQueue::releaseSemaphoreWaitBatchBufferTemplate()

void __thiscall
IGSemaphoreWaitBufferQueue::releaseSemaphoreWaitBatchBufferTemplate
          (IGSemaphoreWaitBufferQueue *this)

{
  undefined8 uVar1;
  
  uVar1 = *(undefined8 *)(this + 0x40);
  *(undefined8 *)(this + 0x40) = 0;
  _IOFreeTypeImpl(&releaseSemaphoreWaitBatchBufferTemplate()::kalloc_type_view_409,uVar1);
  return;
}



// IGSemaphoreWaitBufferQueue::free()

void __thiscall IGSemaphoreWaitBufferQueue::free(IGSemaphoreWaitBufferQueue *this,void *param_1)

{
  long *plVar1;
  long lVar2;
  undefined8 uVar3;
  long *plVar4;
  char *pcVar5;
  
  plVar1 = *(long **)(this + 0x20);
  do {
    if (plVar1 == (long *)0x0) {
      if (*(long *)(this + 0x18) != 0) {
        _IOLockFree();
      }
      uVar3 = *(undefined8 *)(this + 0x40);
      *(undefined8 *)(this + 0x40) = 0;
      _IOFreeTypeImpl(&releaseSemaphoreWaitBatchBufferTemplate()::kalloc_type_view_409,uVar3);
                    // WARNING: Could not recover jumptable at 0x00078ee9. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(__got::vtable + 0xa0))(this);
      return;
    }
    lVar2 = plVar1[0xe];
    if (lVar2 == 0) {
      plVar4 = (long *)plVar1[0xf];
      if ((long *)*plVar4 != plVar1) {
LAB_00078eef:
        pcVar5 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00078eff:
                    // WARNING: Subroutine does not return
        _panic(pcVar5,plVar1,0xf4,"IGSemaphoreWaitBufferQueue.cpp",0xf4);
      }
      *(long **)(this + 0x28) = plVar4;
    }
    else {
      if (*(long **)(lVar2 + 0x78) != plVar1 + 0xe) {
        pcVar5 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00078eff;
      }
      if (*(long **)plVar1[0xf] != plVar1) goto LAB_00078eef;
      *(undefined8 **)(lVar2 + 0x78) = (undefined8 *)plVar1[0xf];
      plVar4 = (long *)plVar1[0xf];
    }
    *plVar4 = lVar2;
    if ((long *)plVar1[1] != (long *)0x0) {
      (**(code **)(*(long *)plVar1[1] + 0x28))();
    }
    plVar1[1] = 0;
    if ((long *)*plVar1 != (long *)0x0) {
      (**(code **)(*(long *)*plVar1 + 0x28))();
    }
    *plVar1 = 0;
    _IOFreeTypeImpl(&releaseSemaphoreWaitBufferQueueEntry(IGSemaphoreWaitBufferQueue::SemaphoreWaitBufferQueueEntry*)
                     ::kalloc_type_view_708,plVar1);
    *(long *)(this + 0x70) = *(long *)(this + 0x70) + 1;
    *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
    plVar1 = *(long **)(this + 0x20);
  } while( true );
}



// IGSemaphoreWaitBufferQueue::getBuffer(IGAccelFIFOChannel*, unsigned int, int)

undefined8 * __thiscall
IGSemaphoreWaitBufferQueue::getBuffer
          (IGSemaphoreWaitBufferQueue *this,long *param_1,undefined4 param_2,uint param_3)

{
  IGAccelTask *this_00;
  char cVar1;
  bool bVar2;
  long lVar3;
  undefined8 *puVar4;
  IGSharedMappedBuffer *pIVar5;
  void *pvVar6;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 uVar7;
  IGMappedBuffer *pIVar8;
  long lVar9;
  long lVar10;
  undefined8 *puVar11;
  long *plVar12;
  char *pcVar13;
  
  this_00 = *(IGAccelTask **)(*(long *)(param_1[0x26] + 0x20) + 0x58);
  _IOLockLock(*(undefined8 *)(this + 0x18));
  *(long *)(this + 0x48) = *(long *)(this + 0x48) + 1;
  puVar4 = *(undefined8 **)(this + 0x20);
  if (puVar4 == (undefined8 *)0x0) {
LAB_00078f8c:
    if ((*(ulong *)(this + 0x30) < 0x40) &&
       (puVar4 = (undefined8 *)
                 _IOMallocTypeImpl(&getBuffer(IGAccelFIFOChannel*,unsigned_int,int)::
                                    kalloc_type_view_466), puVar4 != (undefined8 *)0x0)) {
      pIVar5 = IGSharedMappedBuffer::withOptions
                         (*(long *)(*(long *)(this_00 + 0x10) + 0x150),0x1000,2,0);
      *puVar4 = pIVar5;
      if (pIVar5 != (IGSharedMappedBuffer *)0x0) {
        pvVar6 = (void *)IGSharedMappedBuffer::getVirtualAddress(pIVar5);
        bVar2 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)param_1[0x26]);
        _memcpy(pvVar6,*(void **)(this + 0x40),0x1c8);
        *(ulong *)((long)pvVar6 + 0x130) =
             *(ulong *)((long)pvVar6 + 0x130) & 0xffffffffffbfffff |
             (ulong)((int)CONCAT71(extraout_var,bVar2) == 1) << 0x16;
        bVar2 = IGHardwareRingBuffer::getBatchBufferAddressSpaceIndicator
                          ((IGHardwareRingBuffer *)param_1[0x26]);
        *(uint *)((long)pvVar6 + 400) =
             *(uint *)((long)pvVar6 + 400) & 0xffbfffff |
             (uint)((int)CONCAT71(extraout_var_00,bVar2) == 0) << 0x16;
        bVar2 = IGHardwareRingBuffer::getBatchBufferAddressSpaceIndicator
                          ((IGHardwareRingBuffer *)param_1[0x26]);
        *(ulong *)((long)pvVar6 + 0x1a0) =
             *(ulong *)((long)pvVar6 + 0x1a0) & 0xfffffffffffffeff | (ulong)bVar2 << 8;
        (**(code **)(**(long **)(this + 0x10) + 0x140))(*(long **)(this + 0x10),puVar4 + 2);
        puVar4[0xe] = 0;
        puVar11 = *(undefined8 **)(this + 0x28);
        puVar4[0xf] = puVar11;
        *puVar11 = puVar4;
        *(undefined8 **)(this + 0x28) = puVar4 + 0xe;
        *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
        *(long *)(this + 0x68) = *(long *)(this + 0x68) + 1;
        if (puVar4[1] == 0) {
          puVar11 = puVar4 + 1;
          goto LAB_0007917d;
        }
        goto LAB_000791b3;
      }
      _IOFreeTypeImpl(&getBuffer(IGAccelFIFOChannel*,unsigned_int,int)::kalloc_type_view_482,puVar4)
      ;
    }
    *(long *)(this + 0x50) = *(long *)(this + 0x50) + 1;
LAB_0007910d:
    _IOLockUnlock(*(undefined8 *)(this + 0x18));
    puVar11 = (undefined8 *)0x0;
  }
  else {
    lVar3 = IGSharedMappedBuffer::getVirtualAddress((IGSharedMappedBuffer *)*puVar4);
    cVar1 = (**(code **)(**(long **)(this + 0x10) + 400))(*(long **)(this + 0x10),puVar4 + 2);
    if ((cVar1 == '\0') || (*(int *)(lVar3 + 0x1c0) != 0)) goto LAB_00078f8c;
    lVar3 = puVar4[0xe];
    if (lVar3 == 0) {
      plVar12 = (long *)puVar4[0xf];
      if ((undefined8 *)*plVar12 != puVar4) {
LAB_00079384:
        pcVar13 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00079394:
                    // WARNING: Subroutine does not return
        _panic(pcVar13,puVar4,0x1b2,"IGSemaphoreWaitBufferQueue.cpp",0x1b2);
      }
      *(long **)(this + 0x28) = plVar12;
    }
    else {
      if (*(undefined8 **)(lVar3 + 0x78) != puVar4 + 0xe) {
        pcVar13 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
        goto LAB_00079394;
      }
      if (*(undefined8 **)puVar4[0xf] != puVar4) goto LAB_00079384;
      *(undefined8 **)(lVar3 + 0x78) = (undefined8 *)puVar4[0xf];
      plVar12 = (long *)puVar4[0xf];
    }
    *plVar12 = lVar3;
    puVar4[0xe] = 0;
    plVar12 = *(long **)(this + 0x28);
    puVar4[0xf] = plVar12;
    *plVar12 = (long)puVar4;
    *(undefined8 **)(this + 0x28) = puVar4 + 0xe;
    *(long *)(this + 0x58) = *(long *)(this + 0x58) + 1;
    puVar11 = puVar4 + 1;
    plVar12 = (long *)puVar4[1];
    if (plVar12 == (long *)0x0) {
LAB_0007917d:
      uVar7 = IGAccelTask::isKernelGPUTask(this_00);
      if ((char)uVar7 == '\0') {
        pIVar8 = IGSharedMappedBuffer::cloneInTask((IGSharedMappedBuffer *)*puVar4,this_00);
        *puVar11 = pIVar8;
        if (pIVar8 == (IGMappedBuffer *)0x0) goto LAB_0007910d;
      }
      else {
        (**(code **)(*(long *)*puVar4 + 0x20))();
        *puVar11 = *puVar4;
      }
    }
    else {
      if (this_00 != (IGAccelTask *)plVar12[3]) {
        (**(code **)(*plVar12 + 0x28))();
        *puVar11 = 0;
        goto LAB_0007917d;
      }
      *(long *)(this + 0x60) = *(long *)(this + 0x60) + 1;
    }
LAB_000791b3:
    puVar11 = puVar4 + 2;
    (**(code **)(**(long **)(this + 0x10) + 0x148))(*(long **)(this + 0x10),puVar11);
    (**(code **)(*param_1 + 0x140))(param_1,puVar11);
    (**(code **)(**(long **)(this + 0x10) + 0x1d0))(*(long **)(this + 0x10),param_3,puVar11);
    plVar12 = *(long **)(this + 0x10);
    lVar3 = IGMappedBuffer::getAccessEvent((IGMappedBuffer *)puVar4[1]);
    (**(code **)(*plVar12 + 0x1b8))(plVar12,puVar11,lVar3);
    _IOLockUnlock(*(undefined8 *)(this + 0x18));
    pIVar5 = (IGSharedMappedBuffer *)puVar4[1];
    lVar9 = IGSharedMappedBuffer::getVirtualAddress(pIVar5);
    lVar10 = IGMappedBuffer::getGPUVirtualAddress((IGMappedBuffer *)pIVar5);
    lVar3 = *(long *)(param_1[0x26] + 0x28);
    *(undefined8 *)(lVar9 + 0x1b8) = 0xffffffffffffffff;
    *(undefined4 *)(lVar9 + 0x1c0) = 1;
    *(undefined4 *)(lVar9 + 0x18) = param_2;
    *(ulong *)(lVar9 + 0xa8) =
         (*(ulong *)(lVar9 + 0xa8) & 0xffff000000000003) +
         ((ulong)param_3 * 0x40 + lVar3 >> 2 & 0x3fffffffffff) * 4;
    *(ulong *)(lVar9 + 0x138) =
         (*(ulong *)(lVar9 + 0x138) & 0xffff000000000003) +
         (lVar10 + 0x1b8U >> 2 & 0x3fffffffffff) * 4;
    lVar3 = 0;
    do {
      *(ulong *)(lVar9 + 0x140 + lVar3) =
           *(ulong *)(lVar9 + 0x140 + lVar3) & 0x3ffffffff | (lVar10 + 0x1b0U & 0xfffffffc) << 0x20;
      *(uint *)(lVar9 + 0x148 + lVar3) =
           (uint)*(ushort *)(lVar9 + 0x14a + lVar3) << 0x10 |
           (uint)((lVar10 + 0x1b0U & 0xfffffffffffc) >> 0x20);
      lVar3 = lVar3 + 0x14;
    } while (lVar3 != 0x50);
    *(ulong *)(lVar9 + 0x198) =
         (ulong)((uint)*(undefined8 *)(lVar9 + 0x198) & 7) | lVar10 + 0x1b8U & 0xfffffffffffffff8;
    *(int *)(lVar9 + 0x1a8) = (int)((ulong)(lVar10 + 0xa0) >> 0x20);
    *(ulong *)(lVar9 + 0x1a0) =
         *(ulong *)(lVar9 + 0x1a0) & 0x3ffffffff |
         (ulong)((uint)(lVar10 + 0xa0) & 0xfffffffc) << 0x20;
    puVar11 = puVar4 + 10;
    puVar4[10] = pIVar5;
    puVar4[0xb] = lVar10 + 0x1c0;
    *(uint *)(puVar4 + 0xc) = param_3;
  }
  return puVar11;
}



// IGSemaphoreWaitBufferQueue::releaseBuffers(IGAccelTask*)

void __thiscall
IGSemaphoreWaitBufferQueue::releaseBuffers(IGSemaphoreWaitBufferQueue *this,long param_1)

{
  long *plVar1;
  char cVar2;
  long lVar3;
  long *plVar4;
  char *pcVar5;
  
  _IOLockLock(*(undefined8 *)(this + 0x18));
  lVar3 = *(long *)(this + 0x20);
  if (lVar3 != 0) {
    do {
      if ((*(long *)(lVar3 + 8) != 0) && (*(long *)(*(long *)(lVar3 + 8) + 0x18) == param_1)) {
        (**(code **)(**(long **)(this + 0x10) + 0x188))(*(long **)(this + 0x10),lVar3 + 0x10);
        if (*(long **)(lVar3 + 8) != (long *)0x0) {
          (**(code **)(**(long **)(lVar3 + 8) + 0x28))();
        }
        *(undefined8 *)(lVar3 + 8) = 0;
      }
      lVar3 = *(long *)(lVar3 + 0x70);
    } while (lVar3 != 0);
    plVar1 = *(long **)(this + 0x20);
    while (plVar1 != (long *)0x0) {
      lVar3 = IGSharedMappedBuffer::getVirtualAddress((IGSharedMappedBuffer *)*plVar1);
      cVar2 = (**(code **)(**(long **)(this + 0x10) + 400))(*(long **)(this + 0x10),plVar1 + 2);
      if (((cVar2 == '\0') || (*(int *)(lVar3 + 0x1c0) != 0)) || (*(ulong *)(this + 0x30) < 0x11))
      break;
      lVar3 = plVar1[0xe];
      if (lVar3 == 0) {
        plVar4 = (long *)plVar1[0xf];
        if ((long *)*plVar4 != plVar1) {
LAB_00079504:
          pcVar5 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_00079514:
                    // WARNING: Subroutine does not return
          _panic(pcVar5,plVar1,0x227,"IGSemaphoreWaitBufferQueue.cpp",0x227);
        }
        *(long **)(this + 0x28) = plVar4;
      }
      else {
        if (*(long **)(lVar3 + 0x78) != plVar1 + 0xe) {
          pcVar5 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
          goto LAB_00079514;
        }
        if (*(long **)plVar1[0xf] != plVar1) goto LAB_00079504;
        *(undefined8 **)(lVar3 + 0x78) = (undefined8 *)plVar1[0xf];
        plVar4 = (long *)plVar1[0xf];
      }
      *plVar4 = lVar3;
      if ((long *)plVar1[1] != (long *)0x0) {
        (**(code **)(*(long *)plVar1[1] + 0x28))();
      }
      plVar1[1] = 0;
      if ((long *)*plVar1 != (long *)0x0) {
        (**(code **)(*(long *)*plVar1 + 0x28))();
      }
      *plVar1 = 0;
      _IOFreeTypeImpl(&releaseSemaphoreWaitBufferQueueEntry(IGSemaphoreWaitBufferQueue::SemaphoreWaitBufferQueueEntry*)
                       ::kalloc_type_view_708,plVar1);
      *(long *)(this + 0x70) = *(long *)(this + 0x70) + 1;
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      plVar1 = *(long **)(this + 0x20);
    }
  }
  *(long *)(this + 0x78) = *(long *)(this + 0x78) + 1;
  _IOLockUnlock(*(undefined8 *)(this + 0x18));
  return;
}



// IGSemaphoreWaitBufferQueue::MetaClass::~MetaClass()

void __thiscall IGSemaphoreWaitBufferQueue::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGSemaphoreWaitBufferQueue_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGSemaphoreWaitBufferQueue::gMetaClass,"IGSemaphoreWaitBufferQueue",
             (OSMetaClass *)__got::gMetaClass,0x80);
  IGSemaphoreWaitBufferQueue::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGSemaphoreWaitBufferQueue::gMetaClass);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// InitIclLpWaTable(_WA_TABLE*, _SKU_FEATURE_TABLE*, unsigned int, unsigned short, unsigned short)

void __cdecl InitIclLpWaTable(byte *param_1,undefined8 param_2,undefined8 param_3,uint param_4)

{
  ulong uVar1;
  ulong uVar2;
  ushort uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  ulong uVar8;
  ulong uVar9;
  ulong uVar10;
  bool bVar11;
  bool bVar12;
  ushort local_50;
  
  uVar3 = (ushort)param_4;
  bVar11 = uVar3 < 3;
  uVar5 = (ulong)bVar11;
  uVar8 = 0xc00;
  if (!bVar11) {
    uVar8 = 0;
  }
  bVar12 = param_4 < 0x7fff;
  uVar10 = (ulong)bVar12;
  uVar2 = 0x4000410000;
  if (!bVar12) {
    uVar2 = 0;
  }
  uVar6 = (ulong)((ushort)(uVar3 - 3) < 0x7ffc);
  uVar4 = (ulong)(uVar3 < 5);
  uVar1 = (ulong)((ushort)(uVar3 - 5) < 0x7ffa);
  uVar7 = (ulong)(uVar3 < 7);
  uVar9 = (ulong)((param_4 - 1 & 0xffff) < 0x7ffe);
  *(ulong *)(param_1 + 0x3c) =
       uVar10 << 0x20 | (*(ulong *)(param_1 + 0x3c) & 0xfffffffefffffff7) + uVar10 * 8;
  uVar2 = (uVar9 << 0xf | (ulong)((ushort)(uVar3 - 7) < 2) * 0x20000 + uVar2 |
          (uVar10 << 9 | (ulong)((param_4 - 4 & 0xffff) < 0x7ffb) << 0x15 |
          (ulong)((param_4 - 8 & 0xffff) < 0x7ff7) << 0x22) +
          uVar9 * 0x100000 + ((ulong)*(uint6 *)(param_1 + 0xd4) & 0xf43bff0c6dff)) & 0xf47fff7fefff;
  local_50 = (ushort)(param_4 - 4);
  *(ushort *)(param_1 + 0x10) = (ushort)bVar11 << 8 | *(ushort *)(param_1 + 0x10) & 0xfcff | 0x200;
  *param_1 = *param_1 | 4;
  param_1[0x3b] = param_1[0x3b] | 0x10;
  param_1[0x5d] = param_1[0x5d] | 0x88;
  *(ulong *)(param_1 + 0x60) =
       uVar5 * 9 |
       uVar10 * 0x100 + (uVar5 << 4 | *(ulong *)(param_1 + 0x60) & 0xfffffffffffffe86 | uVar10 << 5)
       | 0x40;
  param_1[0x82] = param_1[0x82] | 0x20;
  *(ulong *)(param_1 + 0xb4) =
       (*(ulong *)(param_1 + 0xb4) & 0xffffffffdfffffff) + uVar10 * 0x20000000;
  *(uint *)(param_1 + 0xd4) = (uint)bVar12 << 0x17 | (uint)(local_50 < 5) << 0xc | (uint)uVar2;
  *(ushort *)(param_1 + 0xd8) = (ushort)(uVar2 >> 0x20) | 0xb80;
  *(ulong *)(param_1 + 0xbc) =
       uVar6 << 0x2b | uVar5 << 0x34 |
       uVar5 << 0x15 | uVar5 << 0x2f |
       uVar10 * 0x80000 +
       (uVar5 << 0x33 | uVar10 << 0x22 | uVar10 << 0x2e | uVar4 << 0x31 |
       uVar10 << 0xb | uVar10 << 0x12 | uVar10 << 0x14 | uVar10 * 0x400000 |
       *(ulong *)(param_1 + 0xbc) & 0xffe117fbe701f7ff | uVar10 << 0x32) | 0x200018820000;
  *(ulong *)(param_1 + 0xc4) =
       uVar10 << 0x36 | uVar4 << 0x19 |
       (uVar4 << 0x18 | uVar5 << 0x17) + (uVar10 << 0x32) | uVar10 << 0x33 | uVar10 << 0x34 |
       uVar10 << 0x35 |
       (uVar10 * 0x10 + uVar5 * 8 | uVar10 << 0x3e) + uVar10 * 0x400000 +
       (uVar10 * 0x20000 + uVar5 * 0x8000 | uVar10 << 0x12 | uVar4 << 0x13 | uVar10 << 0x14 |
        uVar10 << 0x38 | uVar10 << 0x15 | uVar6 << 0x2a | uVar1 << 0x31 |
        uVar10 << 0x2f | uVar10 << 0xd | uVar10 << 0x30 | uVar10 << 0xe |
        uVar5 << 0x2e | *(ulong *)(param_1 + 0xc4) & 0x3e8033fffc011fe7 | 0x8000000000000000) |
       0x80000000000;
  *(ulong *)(param_1 + 0xcc) =
       uVar1 << 0x29 | uVar7 << 0x11 | uVar7 << 5 |
       uVar7 << 0x18 | uVar7 << 0x1e | uVar10 << 0x1a | uVar1 << 0x26 |
       uVar10 << 0x10 | uVar10 << 0x2c | uVar10 << 0x2a |
       uVar10 << 0x25 | uVar10 << 0x22 | uVar10 << 0x27 | uVar10 << 0x23 | uVar10 << 0x3e |
       uVar1 << 0x2d |
       (uVar7 << 6 | uVar10 << 7 | uVar10 << 0x20 | uVar10 << 0x1c) + uVar10 * 0x20000000 &
       0xfffffdbfb8fdffdf | uVar10 << 0x21 |
       uVar5 * 0xc000 + uVar10 * 0xc | uVar10 << 0x1f | uVar7 << 0x1b | uVar4 << 4 |
       uVar6 + uVar5 * 2 | uVar8 | *(ulong *)(param_1 + 0xcc) & 0xbfffc91000fc1300 | uVar10 << 0xd |
       0x2000000;
  param_1[0x98] = param_1[0x98] | 0x40;
  return;
}



// IGHardwareContext::MetaClass::MetaClass()

void __thiscall IGHardwareContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareContext",(OSMetaClass *)&IGGCObject::gMetaClass,0xd0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareContext::MetaClass::~MetaClass()

void __thiscall IGHardwareContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareContext::IGHardwareContext(OSMetaClass const*)

void __thiscall IGHardwareContext::IGHardwareContext(IGHardwareContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareContext;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  return;
}



// IGHardwareContext::IGHardwareContext(OSMetaClass const*)

void __thiscall IGHardwareContext::IGHardwareContext(IGHardwareContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareContext;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  return;
}



// IGHardwareContext::~IGHardwareContext()

void __thiscall IGHardwareContext::~IGHardwareContext(IGHardwareContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareContext::~IGHardwareContext()

void __thiscall IGHardwareContext::~IGHardwareContext(IGHardwareContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareContext::~IGHardwareContext()

void __thiscall IGHardwareContext::~IGHardwareContext(IGHardwareContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareContext_ktv,this,0xd0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareContext_ktv,param_1,param_2);
  return;
}



// IGHardwareContext::getMetaClass() const

undefined8 * IGHardwareContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareContext::MetaClass::MetaClass()

void __thiscall IGHardwareContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareContext",(OSMetaClass *)&IGGCObject::gMetaClass,0xd0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareContext::MetaClass::alloc() const

IGGCObject * IGHardwareContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareContext_ktv,0xd0);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareContext::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareContext;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareContext::operator new(unsigned long)

void * __thiscall IGHardwareContext::operator_new(IGHardwareContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareContext_ktv,this);
  return pvVar1;
}



// IGHardwareContext::IGHardwareContext()

void __thiscall IGHardwareContext::IGHardwareContext(IGHardwareContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareContext;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareContext::IGHardwareContext()

void __thiscall IGHardwareContext::IGHardwareContext(IGHardwareContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareContext;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareContext::withOptions(IGAccelTask*, IGHardwareContextParams const&, unsigned char)

IGHardwareContext * __cdecl
IGHardwareContext::withOptions(long param_1,undefined8 *param_2,undefined1 param_3)

{
  IGHardwareContext *this;
  ulong uVar1;
  
  this = (IGHardwareContext *)(**(code **)(gMetaClass + 0x88))(&gMetaClass);
  if (this == (IGHardwareContext *)0x0) {
    this = (IGHardwareContext *)0x0;
  }
  else {
    uVar1 = initWithOptions(this,param_1,param_2,param_3);
    if ((char)uVar1 == '\0') {
      this = (IGHardwareContext *)0x0;
      _IOLog("[IGPU] IG error, failed to alloc and init hardware context object.\n");
      _kprintf("[IGPU] IG error, failed to alloc and init hardware context object.\n");
    }
  }
  return this;
}



// IGHardwareContext::initWithOptions(IGAccelTask*, IGHardwareContextParams const&, unsigned char)

ulong __thiscall
IGHardwareContext::initWithOptions
          (IGHardwareContext *this,long param_1,undefined8 *param_2,IGHardwareContext param_3)

{
  uint uVar1;
  undefined8 *puVar2;
  IntelAccelerator *this_00;
  bool bVar3;
  byte bVar4;
  undefined4 uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  undefined8 uVar9;
  long lVar10;
  IGSharedMappedBuffer *pIVar11;
  ulong uVar12;
  long lVar13;
  long *plVar14;
  IGAccelFIFOChannel *pIVar15;
  char *fmt;
  IGHardwareContext IVar16;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 local_48;
  long local_40 [2];
  
  local_40[1] = *(long *)__got::___stack_chk_guard;
  *(long *)(this + 0x58) = param_1;
  lVar10 = *(long *)(param_1 + 0x10);
  *(long *)(this + 0x50) = lVar10;
  *(undefined8 *)(this + 0x6c) = *param_2;
  *(undefined4 *)(this + 0x74) = *(undefined4 *)(param_2 + 1);
  uVar12 = 0;
  this[0x68] = (IGHardwareContext)0x0;
  *(undefined4 *)(this + 0x7c) = 0;
  *(undefined8 *)(this + 0x80) = 0;
  *(undefined8 *)(this + 0x89) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xa8) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined2 *)(this + 0xc0) = 0;
  this[0x88] = (IGHardwareContext)0x0;
  *(undefined4 *)(this + 0xc4) = 0;
  uVar5 = IGGCObject::init((IGGCObject *)this,*(long **)(&DAT_00001288 + lVar10));
  if ((char)uVar5 == '\0') goto LAB_0007a4ea;
  if (((byte)this[0x6e] & 1) == 0) {
    (**(code **)(**(long **)(this + 0x58) + 0x20))();
    this[0xc0] = (IGHardwareContext)0x1;
  }
  uVar6 = _OSIncrementAtomic(&smNextContextId);
  *(uint *)(this + 0x7c) = uVar6 & 0x7ff;
  if ((uVar6 & 0x7ff) == 0) {
    uVar6 = _OSIncrementAtomic(&smNextContextId);
    *(uint *)(this + 0x7c) = uVar6 & 0x7ff;
  }
  uVar9 = _current_task();
  IVar16 = (IGHardwareContext)0x0;
  local_58 = 0;
  local_50 = 0;
  local_48 = (ulong)local_48._4_4_ << 0x20;
  lVar10 = _get_bsdtask_info(uVar9);
  if (lVar10 != 0) {
    iVar7 = _proc_pid(lVar10);
    _proc_name(iVar7,&local_58,0x14);
    iVar7 = _memcmp(&local_58,"WindowServer",0xd);
    IVar16 = (IGHardwareContext)(iVar7 == 0);
  }
  this[0x88] = IVar16;
  pIVar11 = IGSharedMappedBuffer::withOptions
                      (*(long *)(*(long *)(this + 0x50) + 0x150),
                       (ulong)*(uint *)(&DAT_0012dc75 + (ulong)(byte)this[0x6c] * 0x79),2,0);
  *(IGSharedMappedBuffer **)(this + 0x98) = pIVar11;
  if (pIVar11 != (IGSharedMappedBuffer *)0x0) {
    if (*(ulonglong *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x18) != 0) {
      pIVar11 = IGSharedMappedBuffer::withOptions
                          (*(long *)(*(long *)(this + 0x50) + 0x150),
                           *(ulonglong *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x18),
                           2,0);
      *(IGSharedMappedBuffer **)(this + 0xa0) = pIVar11;
      if (pIVar11 == (IGSharedMappedBuffer *)0x0) goto switchD_0007a015_default;
    }
    switch(this[0x6c]) {
    case (IGHardwareContext)0x0:
      lVar10 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
      bVar3 = restoreFromSafeImage(this);
      if (bVar3) {
        lVar13 = *(long *)(this + 0x50);
      }
      else {
        _memcpy((void *)(lVar10 + 0x1000),&g_cInitGfxRingContextRCS,0x140);
        *(undefined4 *)(&DAT_00001140 + lVar10) = 0x5000001;
        *(undefined4 *)(&DAT_0000100c + lVar10) = 0xffff0001;
        lVar13 = *(long *)(this + 0x50);
        if (*(IGMappedBuffer **)(lVar13 + 0x13f8) != (IGMappedBuffer *)0x0) {
          uVar6 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(lVar13 + 0x13f8));
          *(uint *)(&DAT_00001064 + lVar10) = uVar6 | 1;
          lVar13 = *(long *)(this + 0x50);
        }
        if (*(IGMappedBuffer **)(_OSKextGetCurrentLoadTag + lVar13 + 4) != (IGMappedBuffer *)0x0) {
          uVar6 = IGMappedBuffer::getGPUVirtualAddress
                            (*(IGMappedBuffer **)(_OSKextGetCurrentLoadTag + lVar13 + 4));
          lVar13 = *(long *)(this + 0x50);
          *(uint *)(&DAT_0000106c + lVar10) = *(uint *)(lVar13 + 0x1408) >> 6 | uVar6;
          *(undefined4 *)(&DAT_00001074 + lVar10) = 0x680;
        }
      }
      if ((*(uint *)(&DAT_000011c0 + lVar13) & 0x18000) != 0) {
        *(uint *)(&DAT_0000100c + lVar10) = *(uint *)(&DAT_0000100c + lVar10) | 0x80008;
      }
      plVar14 = local_40;
      local_40[0] = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
                (*(long **)(*(long *)(this + 0x58) + 0x260),&local_58);
      uVar12 = 0xffffffffffffffff;
      do {
        lVar13 = *plVar14;
        *(int *)(&DAT_0000109c + uVar12 * 8 + lVar10) = (int)((ulong)lVar13 >> 0x20);
        *(int *)(&DAT_000010a4 + uVar12 * 8 + lVar10) = (int)lVar13;
        uVar12 = uVar12 + 2;
        plVar14 = plVar14 + -1;
      } while (uVar12 < 7);
      lVar13 = *(long *)(this + 0x50);
      uVar6 = 0x80041100;
      if ((*(ushort *)(this + 0x6e) & 0x20) == 0) {
        uVar6 = 0x80000100;
      }
      *(uint *)(&DAT_0000110c + lVar10) =
           uVar6 | (*(uint *)(lVar13 + 0xdd8) & 0xf) << 4 | *(uint *)(lVar13 + 0xddc) & 0xf;
      IGTelemetryManager::patchContextImageRCS(*(IGTelemetryManager **)(lVar13 + 0xf18),lVar10);
      *(undefined8 *)(this + 200) =
           *(undefined8 *)(*(long *)(*(long *)(this + 0x50) + 0xf18) + 0x268);
      goto LAB_0007a2e4;
    case (IGHardwareContext)0x1:
      lVar10 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
      _memcpy((void *)(lVar10 + 0x1000),&g_cInitGfxRingContextVCS,0x140);
      if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x50)) & 0x18000) != 0) {
        *(undefined4 *)(&DAT_0000100c + lVar10) = 0xffff0008;
      }
      plVar14 = local_40;
      local_40[0] = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
                (*(long **)(*(long *)(this + 0x58) + 0x260),&local_58);
      uVar12 = 0xffffffffffffffff;
      do {
        lVar13 = *plVar14;
        *(int *)(&DAT_0000109c + uVar12 * 8 + lVar10) = (int)((ulong)lVar13 >> 0x20);
        *(int *)(&DAT_000010a4 + uVar12 * 8 + lVar10) = (int)lVar13;
        uVar12 = uVar12 + 2;
        plVar14 = plVar14 + -1;
      } while (uVar12 < 7);
      break;
    case (IGHardwareContext)0x2:
      lVar10 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
      _memcpy((void *)(lVar10 + 0x1000),&g_cInitGfxRingContextBCS,0x140);
      if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x50)) & 0x18000) != 0) {
        *(undefined4 *)(&DAT_0000100c + lVar10) = 0xffff0008;
      }
      plVar14 = local_40;
      local_40[0] = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
                (*(long **)(*(long *)(this + 0x58) + 0x260),&local_58);
      uVar12 = 0xffffffffffffffff;
      do {
        lVar13 = *plVar14;
        *(int *)(&DAT_0000109c + uVar12 * 8 + lVar10) = (int)((ulong)lVar13 >> 0x20);
        *(int *)(&DAT_000010a4 + uVar12 * 8 + lVar10) = (int)lVar13;
        uVar12 = uVar12 + 2;
        plVar14 = plVar14 + -1;
      } while (uVar12 < 7);
      break;
    case (IGHardwareContext)0x3:
      lVar10 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
      _memcpy((void *)(lVar10 + 0x1000),&g_cInitGfxRingContextVECS,0x140);
      if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x50)) & 0x18000) != 0) {
        *(undefined4 *)(&DAT_0000100c + lVar10) = 0xffff0008;
      }
      plVar14 = local_40;
      local_40[0] = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
                (*(long **)(*(long *)(this + 0x58) + 0x260),&local_58);
      uVar12 = 0xffffffffffffffff;
      do {
        lVar13 = *plVar14;
        *(int *)(&DAT_0000109c + uVar12 * 8 + lVar10) = (int)((ulong)lVar13 >> 0x20);
        *(int *)(&DAT_000010a4 + uVar12 * 8 + lVar10) = (int)lVar13;
        uVar12 = uVar12 + 2;
        plVar14 = plVar14 + -1;
      } while (uVar12 < 7);
      break;
    case (IGHardwareContext)0x4:
      lVar10 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
      _memcpy((void *)(lVar10 + 0x1000),&g_cInitGfxRingContextVCS2,0x140);
      if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x50)) & 0x18000) != 0) {
        *(undefined4 *)(&DAT_0000100c + lVar10) = 0xffff0008;
      }
      plVar14 = local_40;
      local_40[0] = 0;
      local_48 = 0;
      local_50 = 0;
      local_58 = 0;
      (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
                (*(long **)(*(long *)(this + 0x58) + 0x260),&local_58);
      uVar12 = 0xffffffffffffffff;
      do {
        lVar13 = *plVar14;
        *(int *)(&DAT_0000109c + uVar12 * 8 + lVar10) = (int)((ulong)lVar13 >> 0x20);
        *(int *)(&DAT_000010a4 + uVar12 * 8 + lVar10) = (int)lVar13;
        uVar12 = uVar12 + 2;
        plVar14 = plVar14 + -1;
      } while (uVar12 < 7);
      break;
    default:
      goto switchD_0007a015_default;
    }
    lVar13 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
    *(undefined4 *)(&DAT_00001140 + lVar13) = 0x5000001;
LAB_0007a2e4:
    if ((this[0x6c] == (IGHardwareContext)0x0) && ((*(ushort *)(this + 0x6e) & 3) == 1)) {
      param_3 = *(IGHardwareContext *)(*(long *)(this + 0x58) + 0x2b8);
    }
    this[0x78] = param_3;
    plVar14 = IGHardwareRingBuffer::withHardwareContext((long)this);
    *(long **)(this + 0xa8) = plVar14;
    if (plVar14 == (long *)0x0) {
      fmt = "[IGPU] HW Context: %p, Failed to allocate and initialize a ring buffer object!\n";
    }
    else {
      pIVar15 = IGAccelFIFOChannel::withOptions(*(undefined8 *)(this + 0x50),plVar14);
      *(IGAccelFIFOChannel **)(this + 0xb0) = pIVar15;
      if (pIVar15 != (IGAccelFIFOChannel *)0x0) {
        initRingRegisters(this);
        *(undefined8 *)(this + 0x40) = 0;
        puVar2 = *(undefined8 **)(&DAT_00001260 + *(long *)(this + 0x50));
        *(undefined8 **)(this + 0x48) = puVar2;
        *puVar2 = this;
        *(IGHardwareContext **)(&DAT_00001260 + *(long *)(this + 0x50)) = this + 0x40;
        *(undefined8 *)(this + 0x89) = 0x109;
        bVar4 = IGAccelTask::getHardwareContextAddressMode(*(IGAccelTask **)(this + 0x58));
        *(uint *)(this + 0x89) = (*(uint *)(this + 0x89) & 0xffffffe7) + (bVar4 & 3) * 8;
        uVar8 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(this + 0x98));
        uVar6 = *(uint *)(this + 0x89);
        uVar8 = uVar8 & 0xfffff000;
        *(uint *)(this + 0x89) = uVar6 & 0xfff | uVar8;
        *(uint *)(this + 0x8d) =
             *(int *)(this + 0x70) << 0x1d |
             (*(uint *)(this + 0x74) & 0x3f) << 0x10 |
             *(uint *)(this + 0x8d) & 0x400000 | (*(uint *)(this + 0x7c) & 0x7ff) << 5;
        this_00 = *(IntelAccelerator **)(this + 0x50);
        uVar1 = *(uint *)(this_00 + 0x11c0);
        *(uint *)(this + 0x89) = uVar1 & 0x100 | uVar6 & 0xeff | uVar8;
        *(uint *)(this + 0x89) =
             uVar1 & 0x100 | uVar6 & 0xedf | uVar8 |
             (uint)((ulong)*(undefined8 *)(this_00 + 0xf8e) >> 0x21) & 0x20;
        IntelAccelerator::addTrackingRecord
                  (this_00,0,*(undefined4 *)(*(long *)(this + 0xb0) + 0x20),(uint)(byte)this[0x6c],
                   (uint)(byte)this[0x78],*(undefined8 *)(this + 0x89));
        (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x128))
                  (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
        lVar13 = *(long *)(this + 0x50);
        if (*(char *)(*(long *)(&DAT_00001278 + lVar13) + 0x7cc) != '\0') {
          IGAccelEventMachine::enableStampInterrupt
                    (*(IGAccelEventMachine **)(lVar13 + 0x380),
                     *(int *)(*(long *)(this + 0xb0) + 0x20),1);
          lVar13 = *(long *)(this + 0x50);
        }
        uVar12 = CONCAT71((int7)((ulong)lVar10 >> 8),1);
        if (((&DAT_000011c0)[lVar13] & 0x40) != 0) {
          IntelAccelerator::transferOwnership(lVar13,*(IGMappedBuffer **)(this + 0x98));
        }
        goto LAB_0007a4ea;
      }
      fmt = "[IGPU] HW Context: %p, Failed to allocate a channel object!\n";
    }
    _IOLog(fmt,this);
    _kprintf(fmt,this);
  }
switchD_0007a015_default:
  (**(code **)(*(long *)this + 0x28))(this);
  (**(code **)(*(long *)this + 0x90))(this);
  uVar12 = 0;
LAB_0007a4ea:
  if (*(long *)__got::___stack_chk_guard != local_40[1]) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar12 & 0xffffffff;
}



// IGHardwareContext::getContextSize() const

undefined4 __thiscall IGHardwareContext::getContextSize(IGHardwareContext *this)

{
  return *(undefined4 *)(&DAT_0012dc75 + (ulong)(byte)this[0x6c] * 0x79);
}



// IGHardwareContext::restoreFromSafeImage()

bool __thiscall IGHardwareContext::restoreFromSafeImage(IGHardwareContext *this)

{
  uint uVar1;
  long *plVar2;
  void *pvVar3;
  void *pvVar4;
  
  plVar2 = *(long **)(&DAT_00001298 + *(long *)(this + 0x50));
  if (plVar2 != (long *)0x0) {
    uVar1 = *(uint *)(&DAT_0012dc75 + (ulong)(byte)this[0x6c] * 0x79);
    pvVar3 = (void *)IGSharedMappedBuffer::getVirtualAddress
                               (*(IGSharedMappedBuffer **)(this + 0x98));
    pvVar4 = (void *)(**(code **)(*plVar2 + 0x2e0))(plVar2);
    _memmove(pvVar3,pvVar4,(ulong)uVar1);
  }
  return plVar2 != (long *)0x0;
}



// IGHardwareContext::initRingRegisters()

void __thiscall IGHardwareContext::initRingRegisters(IGHardwareContext *this)

{
  byte bVar1;
  int iVar2;
  undefined4 uVar3;
  long lVar4;
  
  uVar3 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(*(long *)(this + 0xa8) + 0x80));
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_00001024 + lVar4) = uVar3;
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_00001014 + lVar4) = 0;
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_0000101c + lVar4) = 0;
  iVar2 = *(int *)(&DAT_000011cc + *(long *)(this + 0x50));
  bVar1 = *__got::_page_shift;
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(uint *)(&DAT_0000102c + lVar4) = ((uint)(iVar2 << 10) >> (bVar1 & 0x1f)) * 0x1000 + -0xfff;
  return;
}



// IGHardwareContext::initRingGPUVirtualAddress()

void __thiscall IGHardwareContext::initRingGPUVirtualAddress(IGHardwareContext *this)

{
  undefined4 uVar1;
  long lVar2;
  
  uVar1 = IGMappedBuffer::getGPUVirtualAddress(*(IGMappedBuffer **)(*(long *)(this + 0xa8) + 0x80));
  lVar2 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_00001024 + lVar2) = uVar1;
  return;
}



// IGHardwareContext::initRingControl(bool)

void __thiscall IGHardwareContext::initRingControl(IGHardwareContext *this,int param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = 0;
  if (param_1 != 0) {
    iVar2 = ((uint)(*(int *)(&DAT_000011cc + *(long *)(this + 0x50)) << 10) >>
            (*__got::_page_shift & 0x1f)) * 0x1000 + -0xfff;
  }
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(int *)(&DAT_0000102c + lVar1) = iVar2;
  return;
}



// IGHardwareContext::getRingBufferSize() const

int __thiscall IGHardwareContext::getRingBufferSize(IGHardwareContext *this)

{
  return *(int *)(&DAT_000011cc + *(long *)(this + 0x50)) << 10;
}



// IGHardwareContext::resetRingHead()

void __thiscall IGHardwareContext::resetRingHead(IGHardwareContext *this)

{
  long lVar1;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_00001014 + lVar1) = 0;
  return;
}



// IGHardwareContext::updateRingTail(unsigned int)

void __thiscall IGHardwareContext::updateRingTail(IGHardwareContext *this,undefined4 param_1)

{
  long lVar1;
  
  lVar1 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_0000101c + lVar1) = param_1;
  return;
}



// IGHardwareContext::free()

void __thiscall IGHardwareContext::free(IGHardwareContext *this,void *param_1)

{
  long lVar1;
  long *plVar2;
  IGMappedBuffer *pIVar3;
  char *pcVar4;
  
  lVar1 = *(long *)(this + 0xa8);
  IntelAccelerator::addTrackingRecord
            (*(IntelAccelerator **)(this + 0x50),1,*(undefined4 *)(*(long *)(this + 0xb0) + 0x20),
             *(undefined4 *)(*(long *)(lVar1 + 0x30) + (long)*(int *)(lVar1 + 0x38) * 0x40),
             *(undefined4 *)(lVar1 + 0x44),*(undefined8 *)(this + 0x89));
  lVar1 = *(long *)(this + 0x40);
  if (lVar1 == 0) {
    plVar2 = *(long **)(this + 0x48);
    if (plVar2 != (long *)0x0) {
      if ((IGHardwareContext *)*plVar2 != this) goto LAB_0007aa05;
      *(long **)(&DAT_00001260 + *(long *)(this + 0x50)) = plVar2;
      goto LAB_0007a905;
    }
  }
  else {
    if (*(IGHardwareContext **)(lVar1 + 0x48) != this + 0x40) {
      pcVar4 = "\"Bad tailq elm %p next->prev != elm @%u\" @%s:%d";
      goto LAB_0007aa15;
    }
    if ((IGHardwareContext *)**(long **)(this + 0x48) != this) {
LAB_0007aa05:
      pcVar4 = "\"Bad tailq elm %p prev->next != elm @%u\" @%s:%d";
LAB_0007aa15:
                    // WARNING: Subroutine does not return
      _panic(pcVar4,this,0x252,"IGHardwareContext.cpp",0x252);
    }
    *(long **)(lVar1 + 0x48) = *(long **)(this + 0x48);
    plVar2 = *(long **)(this + 0x48);
LAB_0007a905:
    *plVar2 = lVar1;
  }
  if (*(long **)(this + 0xa8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xa8) + 0x28))();
  }
  *(undefined8 *)(this + 0xa8) = 0;
  if (*(long **)(this + 0xb0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xb0) + 0x28))();
  }
  *(undefined8 *)(this + 0xb0) = 0;
  (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x138))
            (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
  if (*(long **)(this + 0xa0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xa0) + 0x28))();
  }
  *(undefined8 *)(this + 0xa0) = 0;
  pIVar3 = *(IGMappedBuffer **)(this + 0x98);
  if (pIVar3 == (IGMappedBuffer *)0x0) goto LAB_0007a9b9;
  if (((&DAT_000011c0)[*(long *)(this + 0x50)] & 0x40) == 0) {
LAB_0007a9a5:
    (**(code **)(*(long *)pIVar3 + 0x28))(pIVar3);
  }
  else {
    IntelAccelerator::transferOwnership(*(long *)(this + 0x50),pIVar3);
    pIVar3 = *(IGMappedBuffer **)(this + 0x98);
    if (pIVar3 != (IGMappedBuffer *)0x0) goto LAB_0007a9a5;
  }
  *(undefined8 *)(this + 0x98) = 0;
LAB_0007a9b9:
  if ((*(long **)(this + 0x58) != (long *)0x0) && (this[0xc0] != (IGHardwareContext)0x0)) {
    (**(code **)(**(long **)(this + 0x58) + 0x28))();
    *(undefined8 *)(this + 0x58) = 0;
    this[0xc0] = (IGHardwareContext)0x0;
  }
  *(undefined4 *)(this + 0x7c) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  IGGCObject::free((IGGCObject *)this,pIVar3);
  return;
}



// IGHardwareContext::check() const

void __thiscall IGHardwareContext::check(IGHardwareContext *this)

{
                    // WARNING: Could not recover jumptable at 0x0007aa4f. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x168))
            (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
  return;
}



// IGHardwareContext::getConfigSerial()

undefined8 __thiscall IGHardwareContext::getConfigSerial(IGHardwareContext *this)

{
  return *(undefined8 *)(this + 200);
}



// IGHardwareContext::setConfigSerial(unsigned long long)

void __thiscall IGHardwareContext::setConfigSerial(IGHardwareContext *this,undefined8 param_1)

{
  *(undefined8 *)(this + 200) = param_1;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareContext::copyContextImage(IOBufferMemoryDescriptor**, IOBufferMemoryDescriptor**) const

bool __cdecl IGHardwareContext::copyContextImage(long param_1,long *param_2)

{
  uint uVar1;
  IGSharedMappedBuffer *this;
  long *plVar2;
  void *pvVar3;
  void *pvVar4;
  
  this = *(IGSharedMappedBuffer **)(param_1 + 0x98);
  uVar1 = *(uint *)(&DAT_0012dc75 + (ulong)*(byte *)(param_1 + 0x6c) * 0x79);
  if (((&DAT_000011c0)[*(long *)(param_1 + 0x50)] & 0x40) != 0) {
    IntelAccelerator::transferOwnership(*(long *)(param_1 + 0x50),(IGMappedBuffer *)this);
  }
  plVar2 = (long *)IOBufferMemoryDescriptor::inTaskWithOptions
                             (*(task **)__got::_kernel_task,0x23,(ulong)uVar1,
                              *(ulong *)__got::_page_size);
  *param_2 = (long)plVar2;
  if (plVar2 != (long *)0x0) {
    pvVar3 = (void *)(**(code **)(*plVar2 + 0x2e0))(plVar2);
    pvVar4 = (void *)IGSharedMappedBuffer::getVirtualAddress(this);
    _memmove(pvVar3,pvVar4,(ulong)uVar1);
  }
  if (((&DAT_000011c0)[*(long *)(param_1 + 0x50)] & 0x40) != 0) {
    IntelAccelerator::transferOwnership(*(long *)(param_1 + 0x50),(IGMappedBuffer *)this);
  }
  return *param_2 != 0;
}



// IGHardwareContext::updateContextSaveRestoreControl(SGfxMILoadRegisterImmediateVariable<14>&,
// unsigned int, unsigned int)

void __thiscall
IGHardwareContext::updateContextSaveRestoreControl
          (IGHardwareContext *this,long param_1,uint param_2,uint param_3)

{
  *(uint *)(param_1 + 8) = ~param_2 & *(uint *)(param_1 + 8) | param_3;
  return;
}



// IGHardwareContext::beginReset()

undefined8 __thiscall IGHardwareContext::beginReset(IGHardwareContext *this)

{
  long lVar1;
  bool bVar2;
  long lVar3;
  ulong uVar4;
  undefined8 uVar5;
  long *plVar6;
  undefined8 local_48;
  undefined8 local_40;
  undefined8 local_38;
  long local_30 [2];
  
  local_30[1] = *(long *)__got::___stack_chk_guard;
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  *(undefined4 *)(&DAT_0000102c + lVar3) = 0;
  if (this[0x6c] == (IGHardwareContext)0x0) {
    bVar2 = restoreFromSafeImage(this);
    if (!bVar2) {
      uVar5 = 0;
      goto LAB_0007abfc;
    }
  }
  lVar3 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(this + 0x98));
  plVar6 = local_30;
  local_30[0] = 0;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0;
  (**(code **)(**(long **)(*(long *)(this + 0x58) + 0x260) + 0x148))
            (*(long **)(*(long *)(this + 0x58) + 0x260),&local_48);
  uVar4 = 0xffffffffffffffff;
  do {
    lVar1 = *plVar6;
    *(int *)(&DAT_0000109c + uVar4 * 8 + lVar3) = (int)((ulong)lVar1 >> 0x20);
    *(int *)(&DAT_000010a4 + uVar4 * 8 + lVar3) = (int)lVar1;
    uVar4 = uVar4 + 2;
    plVar6 = plVar6 + -1;
  } while (uVar4 < 7);
  uVar5 = CONCAT71((int7)(uVar4 >> 8),1);
LAB_0007abfc:
  if (*(long *)__got::___stack_chk_guard == local_30[1]) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareContext::endReset()

void __thiscall IGHardwareContext::endReset(IGHardwareContext *this)

{
  initRingRegisters(this);
  return;
}



// IGHardwareContext::getUtilizationData(IGHardwareContextUtilizationData*)

int __thiscall IGHardwareContext::getUtilizationData(IGHardwareContext *this,undefined8 *param_1)

{
  int iVar1;
  int iVar2;
  
  IGHardwareRingBuffer::getUtilizationData
            (*(IGHardwareRingBuffer **)(*(long *)(this + 0xb0) + 0x130),param_1);
  iVar1 = *(int *)(param_1 + 3);
  iVar2 = *(int *)(this + 0xc4);
  *(int *)(this + 0xc4) = iVar1;
  return iVar1 - iVar2;
}



// IGHardwareContext::notifyComplete(IOAccelEvent*)

ulong __thiscall IGHardwareContext::notifyComplete(IGHardwareContext *this,long param_1)

{
  ulong uVar1;
  undefined8 unaff_RBX;
  
  if (*(IGAccelFIFOChannel **)(this + 0xb0) != (IGAccelFIFOChannel *)0x0) {
    uVar1 = IGAccelFIFOChannel::notifyComplete(*(IGAccelFIFOChannel **)(this + 0xb0),param_1);
    if ((char)uVar1 != '\0') {
      uVar1 = CONCAT71((int7)((ulong)unaff_RBX >> 8),1);
      if (param_1 != 0) {
        (**(code **)(**(long **)(this + 0x58) + 0x20))();
        this[0xc0] = (IGHardwareContext)0x1;
      }
      goto LAB_0007aca4;
    }
  }
  uVar1 = 0;
LAB_0007aca4:
  return uVar1 & 0xffffffff;
}



// IGHardwareContext::waitForIdle() const

ulong __thiscall IGHardwareContext::waitForIdle(IGHardwareContext *this)

{
  char cVar1;
  uint uVar2;
  long lVar3;
  undefined8 unaff_R15;
  ulong uVar4;
  
  cVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x168))
                    (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
  uVar4 = CONCAT71((int7)((ulong)unaff_R15 >> 8),1);
  if (cVar1 == '\0') {
    lVar3 = *(long *)(this + 0xb0);
    cVar1 = (**(code **)(**(long **)(*(long *)(this + 0x50) + 0x380) + 400))
                      (*(long **)(*(long *)(this + 0x50) + 0x380),lVar3 + 0x138);
    if (cVar1 == '\0') {
      IGAccelEventMachine::finishEvent
                (*(IGAccelEventMachine **)(*(long *)(this + 0x50) + 0x380),lVar3 + 0x138,0x2b);
    }
    lVar3 = 25000;
    do {
      uVar2 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x168))
                        (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
      uVar4 = (ulong)uVar2;
      if ((char)uVar2 != '\0') break;
      _assert_wait_timeout(&gl_assert_wait_timeout_event,0,100,1000);
      _thread_block(0);
      lVar3 = lVar3 + -1;
    } while (lVar3 != 0);
  }
  return uVar4 & 0xffffffff;
}



// IGHardwareContext::setPriorityUpdated(bool)

void __thiscall
IGHardwareContext::setPriorityUpdated(IGHardwareContext *this,IGHardwareContext param_1)

{
  this[0x68] = param_1;
  return;
}



// IGHardwareContext::isPriorityUpdated()

IGHardwareContext __thiscall IGHardwareContext::isPriorityUpdated(IGHardwareContext *this)

{
  return this[0x68];
}



// IGHardwareContext::updateSchedPriority(unsigned char)

void __thiscall IGHardwareContext::updateSchedPriority(IGHardwareContext *this,char param_1)

{
  undefined4 uVar1;
  IGHardwareExtendedContext *pIVar2;
  long lVar3;
  IGHardwareContext *pIVar4;
  
  if ((this[0x78] != (IGHardwareContext)param_1) &&
     ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x50)) & 0x18000) == 0)) {
    if (((byte)this[0x6e] & 1) == 0) {
      pIVar2 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)(this + 0x58),'\0');
      if (pIVar2 != (IGHardwareExtendedContext *)0x0) {
        pIVar2 = IGAccelTask::getBlit3DContext(*(IGAccelTask **)(this + 0x58),'\x01');
        updateSchedPriority((IGHardwareContext *)pIVar2,param_1);
      }
      lVar3 = IGAccelTask::getDepthResolveContext(*(IGAccelTask **)(this + 0x58),'\0');
      if (lVar3 != 0) {
        pIVar4 = (IGHardwareContext *)
                 IGAccelTask::getDepthResolveContext(*(IGAccelTask **)(this + 0x58),'\x01');
        updateSchedPriority(pIVar4,param_1);
      }
      lVar3 = IGAccelTask::getColorResolveContext(*(IGAccelTask **)(this + 0x58),'\0');
      if (lVar3 != 0) {
        pIVar4 = (IGHardwareContext *)
                 IGAccelTask::getColorResolveContext(*(IGAccelTask **)(this + 0x58),'\x01');
        updateSchedPriority(pIVar4,param_1);
      }
    }
    uVar1 = (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x1d0))
                      (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this,param_1);
    (**(code **)(**(long **)(this + 0xb0) + 0x128))(*(long **)(this + 0xb0),uVar1);
    this[0x78] = (IGHardwareContext)param_1;
                    // WARNING: Could not recover jumptable at 0x0007ae84. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(**(long **)(&DAT_00001280 + *(long *)(this + 0x50)) + 0x130))
              (*(long **)(&DAT_00001280 + *(long *)(this + 0x50)),this);
    return;
  }
  return;
}



// IGHardwareContext::isEqualTo(OSMetaClassBase const*) const

bool __thiscall IGHardwareContext::isEqualTo(IGHardwareContext *this,OSMetaClassBase *param_1)

{
  IGHardwareContext *pIVar1;
  
  pIVar1 = (IGHardwareContext *)OSMetaClassBase::safeMetaCast(param_1,(OSMetaClass *)&gMetaClass);
  return pIVar1 == this && pIVar1 != (IGHardwareContext *)0x0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareContext::describeDriverAllocations(IOAccelAllocationInfo*, char const*, int)

void __cdecl IGHardwareContext::describeDriverAllocations(long param_1,IOAccelMemory *param_2)

{
  char *pcVar1;
  undefined8 uVar2;
  
  if (*(IGMappedBuffer **)(param_1 + 0x98) != (IGMappedBuffer *)0x0) {
    pcVar1 = (char *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(param_1 + 0x98));
    IOAccelAllocationInfo::addString(param_2,pcVar1);
    uVar2 = IGMappedBuffer::getMemory(*(IGMappedBuffer **)(param_1 + 0x98));
    IOAccelAllocationInfo::addPID(param_2,(int)uVar2);
    return;
  }
  return;
}



// IGHardwareExtendedContext::MetaClass::MetaClass()

void __thiscall IGHardwareExtendedContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareExtendedContext",
             (OSMetaClass *)&IGHardwareContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareExtendedContext::MetaClass::~MetaClass()

void __thiscall IGHardwareExtendedContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareExtendedContext::IGHardwareExtendedContext(OSMetaClass const*)

void __thiscall
IGHardwareExtendedContext::IGHardwareExtendedContext
          (IGHardwareExtendedContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareExtendedContext;
  return;
}



// IGHardwareExtendedContext::IGHardwareExtendedContext(OSMetaClass const*)

void __thiscall
IGHardwareExtendedContext::IGHardwareExtendedContext
          (IGHardwareExtendedContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareExtendedContext;
  return;
}



// IGHardwareExtendedContext::~IGHardwareExtendedContext()

void __thiscall
IGHardwareExtendedContext::~IGHardwareExtendedContext(IGHardwareExtendedContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareExtendedContext::~IGHardwareExtendedContext()

void __thiscall
IGHardwareExtendedContext::~IGHardwareExtendedContext(IGHardwareExtendedContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareExtendedContext::~IGHardwareExtendedContext()

void __thiscall
IGHardwareExtendedContext::~IGHardwareExtendedContext(IGHardwareExtendedContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareExtendedContext_ktv,this,0xe0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareExtendedContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareExtendedContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareExtendedContext_ktv,param_1,param_2);
  return;
}



// IGHardwareExtendedContext::getMetaClass() const

undefined1 * IGHardwareExtendedContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareExtendedContext::MetaClass::MetaClass()

void __thiscall IGHardwareExtendedContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareExtendedContext",
             (OSMetaClass *)&IGHardwareContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareExtendedContext::MetaClass::alloc() const

IGGCObject * IGHardwareExtendedContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareExtendedContext_ktv,0xe0);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareExtendedContext::gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareExtendedContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareExtendedContext::operator new(unsigned long)

void * __thiscall IGHardwareExtendedContext::operator_new(IGHardwareExtendedContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareExtendedContext_ktv,this);
  return pvVar1;
}



// IGHardwareExtendedContext::IGHardwareExtendedContext()

void __thiscall
IGHardwareExtendedContext::IGHardwareExtendedContext(IGHardwareExtendedContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareExtendedContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareExtendedContext::IGHardwareExtendedContext()

void __thiscall
IGHardwareExtendedContext::IGHardwareExtendedContext(IGHardwareExtendedContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareExtendedContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareExtendedContext::initWithOptions(IGAccelTask*, IGHardwareExtendedContextParams const&)

ulong __thiscall
IGHardwareExtendedContext::initWithOptions
          (IGHardwareExtendedContext *this,long param_1,undefined8 *param_2)

{
  ulong uVar1;
  ulong *puVar2;
  IGSharedMappedBuffer *pIVar3;
  ulong uVar4;
  
  uVar4 = 0;
  *(undefined8 *)(this + 0xd0) = 0;
  *(undefined8 *)(this + 0xd8) = 0;
  uVar1 = IGHardwareContext::initWithOptions
                    ((IGHardwareContext *)this,param_1,param_2,*(undefined1 *)((long)param_2 + 0xc))
  ;
  if ((char)uVar1 == '\0') goto LAB_0007b224;
  if (param_2[3] == 0) {
LAB_0007b1d7:
    if (param_2[2] != 0) {
      pIVar3 = IGSharedMappedBuffer::withOptions(param_1,param_2[2],0,0);
      *(IGSharedMappedBuffer **)(this + 0xd0) = pIVar3;
      if (pIVar3 == (IGSharedMappedBuffer *)0x0) {
        (**(code **)(**(long **)(this + 0xd8) + 0x28))();
        *(undefined8 *)(this + 0xd8) = 0;
        goto LAB_0007b221;
      }
    }
    (**(code **)(*(long *)this + 0x130))(this);
    uVar4 = CONCAT71((int7)(uVar4 >> 8),1);
  }
  else {
    puVar2 = (ulong *)(**(code **)(**(long **)__got::metaClass + 0x88))();
    *(ulong **)(this + 0xd8) = puVar2;
    if (puVar2 != (ulong *)0x0) {
      uVar4 = *puVar2;
      (**(code **)(uVar4 + 0x118))
                (puVar2,*(undefined8 *)(this + 0x50),*(undefined8 *)(this + 0xb0),param_1,
                 *(undefined4 *)(param_2 + 3),*(undefined4 *)(param_2 + 4),0x300,1,
                 *(undefined4 *)(param_2 + 5),*(undefined4 *)(param_2 + 6));
      goto LAB_0007b1d7;
    }
LAB_0007b221:
    uVar4 = 0;
  }
LAB_0007b224:
  return uVar4 & 0xffffffff;
}



// IGHardwareExtendedContext::free()

void __thiscall IGHardwareExtendedContext::free(IGHardwareExtendedContext *this,void *param_1)

{
  if (*(long **)(this + 0xd0) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xd0) + 0x28))();
  }
  *(undefined8 *)(this + 0xd0) = 0;
  if (*(long **)(this + 0xd8) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0xd8) + 0x28))();
  }
  *(undefined8 *)(this + 0xd8) = 0;
  IGHardwareContext::free((IGHardwareContext *)this,param_1);
  return;
}



// IGHardwareResolveContext::MetaClass::MetaClass()

void __thiscall IGHardwareResolveContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareResolveContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareResolveContext::MetaClass::~MetaClass()

void __thiscall IGHardwareResolveContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareResolveContext::IGHardwareResolveContext(OSMetaClass const*)

void __thiscall
IGHardwareResolveContext::IGHardwareResolveContext
          (IGHardwareResolveContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareResolveContext;
  return;
}



// IGHardwareResolveContext::IGHardwareResolveContext(OSMetaClass const*)

void __thiscall
IGHardwareResolveContext::IGHardwareResolveContext
          (IGHardwareResolveContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareResolveContext;
  return;
}



// IGHardwareResolveContext::~IGHardwareResolveContext()

void __thiscall IGHardwareResolveContext::~IGHardwareResolveContext(IGHardwareResolveContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareResolveContext::~IGHardwareResolveContext()

void __thiscall IGHardwareResolveContext::~IGHardwareResolveContext(IGHardwareResolveContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareResolveContext::~IGHardwareResolveContext()

void __thiscall IGHardwareResolveContext::~IGHardwareResolveContext(IGHardwareResolveContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareResolveContext_ktv,this,0xe0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareResolveContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareResolveContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareResolveContext_ktv,param_1,param_2);
  return;
}



// IGHardwareResolveContext::getMetaClass() const

undefined8 * IGHardwareResolveContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareResolveContext::MetaClass::MetaClass()

void __thiscall IGHardwareResolveContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareResolveContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareResolveContext::MetaClass::alloc() const

IGGCObject * IGHardwareResolveContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareResolveContext_ktv,0xe0);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareResolveContext::gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareResolveContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareResolveContext::operator new(unsigned long)

void * __thiscall IGHardwareResolveContext::operator_new(IGHardwareResolveContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareResolveContext_ktv,this);
  return pvVar1;
}



// IGHardwareResolveContext::IGHardwareResolveContext()

void __thiscall IGHardwareResolveContext::IGHardwareResolveContext(IGHardwareResolveContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareResolveContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareResolveContext::IGHardwareResolveContext()

void __thiscall IGHardwareResolveContext::IGHardwareResolveContext(IGHardwareResolveContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareResolveContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareBlit3DContext::MetaClass::MetaClass()

void __thiscall IGHardwareBlit3DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareBlit3DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareBlit3DContext::MetaClass::~MetaClass()

void __thiscall IGHardwareBlit3DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareBlit3DContext::IGHardwareBlit3DContext(OSMetaClass const*)

void __thiscall
IGHardwareBlit3DContext::IGHardwareBlit3DContext(IGHardwareBlit3DContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit3DContext;
  return;
}



// IGHardwareBlit3DContext::IGHardwareBlit3DContext(OSMetaClass const*)

void __thiscall
IGHardwareBlit3DContext::IGHardwareBlit3DContext(IGHardwareBlit3DContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit3DContext;
  return;
}



// IGHardwareBlit3DContext::~IGHardwareBlit3DContext()

void __thiscall IGHardwareBlit3DContext::~IGHardwareBlit3DContext(IGHardwareBlit3DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareBlit3DContext::~IGHardwareBlit3DContext()

void __thiscall IGHardwareBlit3DContext::~IGHardwareBlit3DContext(IGHardwareBlit3DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareBlit3DContext::~IGHardwareBlit3DContext()

void __thiscall IGHardwareBlit3DContext::~IGHardwareBlit3DContext(IGHardwareBlit3DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareBlit3DContext_ktv,this,0x118);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareBlit3DContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareBlit3DContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareBlit3DContext_ktv,param_1,param_2);
  return;
}



// IGHardwareBlit3DContext::getMetaClass() const

undefined8 * IGHardwareBlit3DContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareBlit3DContext::MetaClass::MetaClass()

void __thiscall IGHardwareBlit3DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareBlit3DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0x118);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareBlit3DContext::MetaClass::alloc() const

IGGCObject * IGHardwareBlit3DContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareBlit3DContext_ktv,0x118);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareBlit3DContext::gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit3DContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareBlit3DContext::operator new(unsigned long)

void * __thiscall IGHardwareBlit3DContext::operator_new(IGHardwareBlit3DContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareBlit3DContext_ktv,this);
  return pvVar1;
}



// IGHardwareBlit3DContext::IGHardwareBlit3DContext()

void __thiscall IGHardwareBlit3DContext::IGHardwareBlit3DContext(IGHardwareBlit3DContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit3DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareBlit3DContext::IGHardwareBlit3DContext()

void __thiscall IGHardwareBlit3DContext::IGHardwareBlit3DContext(IGHardwareBlit3DContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit3DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareBlit2DContext::MetaClass::MetaClass()

void __thiscall IGHardwareBlit2DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareBlit2DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareBlit2DContext::MetaClass::~MetaClass()

void __thiscall IGHardwareBlit2DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareBlit2DContext::IGHardwareBlit2DContext(OSMetaClass const*)

void __thiscall
IGHardwareBlit2DContext::IGHardwareBlit2DContext(IGHardwareBlit2DContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit2DContext;
  return;
}



// IGHardwareBlit2DContext::IGHardwareBlit2DContext(OSMetaClass const*)

void __thiscall
IGHardwareBlit2DContext::IGHardwareBlit2DContext(IGHardwareBlit2DContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit2DContext;
  return;
}



// IGHardwareBlit2DContext::~IGHardwareBlit2DContext()

void __thiscall IGHardwareBlit2DContext::~IGHardwareBlit2DContext(IGHardwareBlit2DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareBlit2DContext::~IGHardwareBlit2DContext()

void __thiscall IGHardwareBlit2DContext::~IGHardwareBlit2DContext(IGHardwareBlit2DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareBlit2DContext::~IGHardwareBlit2DContext()

void __thiscall IGHardwareBlit2DContext::~IGHardwareBlit2DContext(IGHardwareBlit2DContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareBlit2DContext_ktv,this,0xe0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareBlit2DContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareBlit2DContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareBlit2DContext_ktv,param_1,param_2);
  return;
}



// IGHardwareBlit2DContext::getMetaClass() const

undefined8 * IGHardwareBlit2DContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareBlit2DContext::MetaClass::MetaClass()

void __thiscall IGHardwareBlit2DContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareBlit2DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareBlit2DContext::MetaClass::alloc() const

IGGCObject * IGHardwareBlit2DContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareBlit2DContext_ktv,0xe0);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareBlit2DContext::gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit2DContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareBlit2DContext::operator new(unsigned long)

void * __thiscall IGHardwareBlit2DContext::operator_new(IGHardwareBlit2DContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareBlit2DContext_ktv,this);
  return pvVar1;
}



// IGHardwareBlit2DContext::IGHardwareBlit2DContext()

void __thiscall IGHardwareBlit2DContext::IGHardwareBlit2DContext(IGHardwareBlit2DContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit2DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareBlit2DContext::IGHardwareBlit2DContext()

void __thiscall IGHardwareBlit2DContext::IGHardwareBlit2DContext(IGHardwareBlit2DContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareBlit2DContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareDisplayContext::MetaClass::MetaClass()

void __thiscall IGHardwareDisplayContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareDisplayContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareDisplayContext::MetaClass::~MetaClass()

void __thiscall IGHardwareDisplayContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareDisplayContext::IGHardwareDisplayContext(OSMetaClass const*)

void __thiscall
IGHardwareDisplayContext::IGHardwareDisplayContext
          (IGHardwareDisplayContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareDisplayContext;
  return;
}



// IGHardwareDisplayContext::IGHardwareDisplayContext(OSMetaClass const*)

void __thiscall
IGHardwareDisplayContext::IGHardwareDisplayContext
          (IGHardwareDisplayContext *this,OSMetaClass *param_1)

{
  IGGCObject::IGGCObject((IGGCObject *)this,param_1);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareDisplayContext;
  return;
}



// IGHardwareDisplayContext::~IGHardwareDisplayContext()

void __thiscall IGHardwareDisplayContext::~IGHardwareDisplayContext(IGHardwareDisplayContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareDisplayContext::~IGHardwareDisplayContext()

void __thiscall IGHardwareDisplayContext::~IGHardwareDisplayContext(IGHardwareDisplayContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  return;
}



// IGHardwareDisplayContext::~IGHardwareDisplayContext()

void __thiscall IGHardwareDisplayContext::~IGHardwareDisplayContext(IGHardwareDisplayContext *this)

{
  IGGCObject::~IGGCObject((IGGCObject *)this);
  _OSObject_typed_operator_delete(&IGHardwareDisplayContext_ktv,this,0xe0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareDisplayContext::operator delete(void*, unsigned long)

void __cdecl IGHardwareDisplayContext::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareDisplayContext_ktv,param_1,param_2);
  return;
}



// IGHardwareDisplayContext::getMetaClass() const

undefined8 * IGHardwareDisplayContext::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareDisplayContext::MetaClass::MetaClass()

void __thiscall IGHardwareDisplayContext::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareDisplayContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareDisplayContext::MetaClass::alloc() const

IGGCObject * IGHardwareDisplayContext::MetaClass::alloc(void)

{
  IGGCObject *this;
  
  this = (IGGCObject *)_OSObject_typed_operator_new(&IGHardwareDisplayContext_ktv,0xe0);
  IGGCObject::IGGCObject(this,(OSMetaClass *)&IGHardwareDisplayContext::gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareDisplayContext;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareDisplayContext::operator new(unsigned long)

void * __thiscall IGHardwareDisplayContext::operator_new(IGHardwareDisplayContext *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareDisplayContext_ktv,this);
  return pvVar1;
}



// IGHardwareDisplayContext::IGHardwareDisplayContext()

void __thiscall IGHardwareDisplayContext::IGHardwareDisplayContext(IGHardwareDisplayContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareDisplayContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareDisplayContext::IGHardwareDisplayContext()

void __thiscall IGHardwareDisplayContext::IGHardwareDisplayContext(IGHardwareDisplayContext *this)

{
  IGGCObject::IGGCObject((IGGCObject *)this,(OSMetaClass *)&gMetaClass);
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 200) = 0;
  *(undefined ***)this = &__const::~IGHardwareDisplayContext;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareResolveContext::initialize()

void __thiscall IGHardwareResolveContext::initialize(IGHardwareResolveContext *this)

{
  task *ptVar1;
  
  ptVar1 = (task *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0xd0));
  resolve_initialize_scratch_space_g7(ptVar1);
  resolve_init_ctx_g7(*(long *)(this + 0xd8),*(IGMappedBuffer **)(this + 0xd0));
  return;
}



// IGHardwareBlit3DContext::initialize()

void __thiscall IGHardwareBlit3DContext::initialize(IGHardwareBlit3DContext *this)

{
  task *ptVar1;
  
  *(undefined8 *)(this + 0xe0) = 0;
  *(undefined8 *)(this + 0xe8) = 0;
  *(undefined8 *)(this + 0xf8) = 0;
  *(undefined8 *)(this + 0xf0) = 0;
  *(undefined8 *)(this + 0x100) = 0;
  *(undefined8 *)(this + 0x108) = 0;
  *(undefined4 *)(this + 0x110) = 0;
  ptVar1 = (task *)IGMappedBuffer::getMemory(*(IGMappedBuffer **)(this + 0xd0));
  blit3d_initialize_scratch_space(ptVar1);
  blit3d_init_ctx((long)this);
  return;
}



// IGHardwareBlit2DContext::initialize()

void __thiscall
IGHardwareBlit2DContext::initialize
          (undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this)

{
  undefined8 uVar1;
  
  uVar1 = (**(code **)(**(long **)((long)this + 0xb0) + 0x148))();
  IGAccelFIFOChannel::submitStampCommand
            (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             *(void **)((long)this + 0xb0));
  return;
}



// IGHardwareContext::MetaClass::~MetaClass()

void __thiscall IGHardwareContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareExtendedContext::MetaClass::~MetaClass()

void __thiscall IGHardwareExtendedContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareExtendedContext::initialize()

void IGHardwareExtendedContext::initialize(void)

{
  return;
}



// IGHardwareResolveContext::MetaClass::~MetaClass()

void __thiscall IGHardwareResolveContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareBlit3DContext::MetaClass::~MetaClass()

void __thiscall IGHardwareBlit3DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareBlit2DContext::MetaClass::~MetaClass()

void __thiscall IGHardwareBlit2DContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareDisplayContext::MetaClass::~MetaClass()

void __thiscall IGHardwareDisplayContext::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareContext_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareContext::gMetaClass,"IGHardwareContext",
             (OSMetaClass *)&IGGCObject::gMetaClass,0xd0);
  IGHardwareContext::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,"IGHardwareExtendedContext",
             (OSMetaClass *)&IGHardwareContext::gMetaClass,0xe0);
  _gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareResolveContext::gMetaClass,"IGHardwareResolveContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  IGHardwareResolveContext::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareBlit3DContext::gMetaClass,"IGHardwareBlit3DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0x118);
  IGHardwareBlit3DContext::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareBlit2DContext::gMetaClass,"IGHardwareBlit2DContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  IGHardwareBlit2DContext::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareDisplayContext::gMetaClass,"IGHardwareDisplayContext",
             (OSMetaClass *)&IGHardwareExtendedContext::gMetaClass,0xe0);
  IGHardwareDisplayContext::gMetaClass = &__const::~MetaClass;
  _ExtendedCtxParams = 0x50000;
  _DAT_00136898 = 0;
  DAT_0013689c = 2;
  _DAT_001368a0 = 0x5000;
  _DAT_001368a8 = 0x100;
  _DAT_001368b0 = 0x1000;
  _DAT_001368b8 = 0x40;
  _DAT_001368c0 = 8;
  _ExtendedCtxParams = 0x50000;
  _DAT_001368d0 = 0;
  DAT_001368d4 = 2;
  _DAT_001368d8 = 0x7000;
  _DAT_001368e0 = 0x100;
  _DAT_001368e8 = 0x10000;
  _DAT_001368f0 = 0x40;
  _DAT_001368f8 = 8;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareDisplayContext::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareBlit2DContext::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareBlit3DContext::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareResolveContext::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareExtendedContext::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareContext::gMetaClass);
  return;
}



// IGAccelDisplayMachine::MetaClass::MetaClass()

void __thiscall IGAccelDisplayMachine::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDisplayMachine",(OSMetaClass *)__got::gMetaClass,0x198);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDisplayMachine::MetaClass::~MetaClass()

void __thiscall IGAccelDisplayMachine::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelDisplayMachine::IGAccelDisplayMachine(OSMetaClass const*)

void __thiscall
IGAccelDisplayMachine::IGAccelDisplayMachine(IGAccelDisplayMachine *this,OSMetaClass *param_1)

{
  IOAccelDisplayMachine::IOAccelDisplayMachine((IOAccelDisplayMachine *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDisplayMachine;
  return;
}



// IGAccelDisplayMachine::IGAccelDisplayMachine(OSMetaClass const*)

void __thiscall
IGAccelDisplayMachine::IGAccelDisplayMachine(IGAccelDisplayMachine *this,OSMetaClass *param_1)

{
  IOAccelDisplayMachine::IOAccelDisplayMachine((IOAccelDisplayMachine *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDisplayMachine;
  return;
}



// IGAccelDisplayMachine::~IGAccelDisplayMachine()

void __thiscall IGAccelDisplayMachine::~IGAccelDisplayMachine(IGAccelDisplayMachine *this)

{
  IOAccelDisplayMachine::~IOAccelDisplayMachine((IOAccelDisplayMachine *)this);
  return;
}



// IGAccelDisplayMachine::~IGAccelDisplayMachine()

void __thiscall IGAccelDisplayMachine::~IGAccelDisplayMachine(IGAccelDisplayMachine *this)

{
  IOAccelDisplayMachine::~IOAccelDisplayMachine((IOAccelDisplayMachine *)this);
  return;
}



// IGAccelDisplayMachine::~IGAccelDisplayMachine()

void __thiscall IGAccelDisplayMachine::~IGAccelDisplayMachine(IGAccelDisplayMachine *this)

{
  IOAccelDisplayMachine::~IOAccelDisplayMachine((IOAccelDisplayMachine *)this);
  _OSObject_typed_operator_delete(&IGAccelDisplayMachine_ktv,this,0x198);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::operator delete(void*, unsigned long)

void __cdecl IGAccelDisplayMachine::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelDisplayMachine_ktv,param_1,param_2);
  return;
}



// IGAccelDisplayMachine::getMetaClass() const

undefined8 * IGAccelDisplayMachine::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelDisplayMachine::MetaClass::MetaClass()

void __thiscall IGAccelDisplayMachine::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDisplayMachine",(OSMetaClass *)__got::gMetaClass,0x198);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDisplayMachine::MetaClass::alloc() const

IOAccelDisplayMachine * IGAccelDisplayMachine::MetaClass::alloc(void)

{
  IOAccelDisplayMachine *this;
  
  this = (IOAccelDisplayMachine *)_OSObject_typed_operator_new(&IGAccelDisplayMachine_ktv,0x198);
  IOAccelDisplayMachine::IOAccelDisplayMachine
            (this,(OSMetaClass *)&IGAccelDisplayMachine::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayMachine;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelDisplayMachine::operator new(unsigned long)

void * __thiscall IGAccelDisplayMachine::operator_new(IGAccelDisplayMachine *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelDisplayMachine_ktv,this);
  return pvVar1;
}



// IGAccelDisplayMachine::IGAccelDisplayMachine()

void __thiscall IGAccelDisplayMachine::IGAccelDisplayMachine(IGAccelDisplayMachine *this)

{
  IOAccelDisplayMachine::IOAccelDisplayMachine
            ((IOAccelDisplayMachine *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayMachine;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelDisplayMachine::IGAccelDisplayMachine()

void __thiscall IGAccelDisplayMachine::IGAccelDisplayMachine(IGAccelDisplayMachine *this)

{
  IOAccelDisplayMachine::IOAccelDisplayMachine
            ((IOAccelDisplayMachine *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayMachine;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::init(IOGraphicsAccelerator2*)

void __cdecl IGAccelDisplayMachine::init(long param_1)

{
  (**(code **)(__got::vtable + 0x860))();
  *(undefined4 *)(param_1 + 0x188) = 1;
  *(undefined8 *)(param_1 + 0x178) = 0;
  *(undefined8 *)(param_1 + 0x180) = 0;
  *(undefined8 *)(param_1 + 400) = 0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::start(IOPCIDevice*)

bool __cdecl IGAccelDisplayMachine::start(long param_1)

{
  long lVar1;
  char cVar2;
  IGHardwareExtendedContext *this;
  ulong uVar3;
  bool bVar4;
  
  cVar2 = (**(code **)(__got::vtable + 0x868))();
  if (cVar2 == '\0') {
    bVar4 = *(long *)(param_1 + 400) != 0;
  }
  else {
    lVar1 = *(long *)(*(long *)(param_1 + 0x128) + 0x150);
    this = (IGHardwareExtendedContext *)(**(code **)(IGHardwareDisplayContext::gMetaClass + 0x88))()
    ;
    if (this != (IGHardwareExtendedContext *)0x0) {
      uVar3 = IGHardwareExtendedContext::initWithOptions
                        (this,lVar1,(undefined8 *)&IGHardwareDisplayContext::ExtendedCtxParams);
      if ((char)uVar3 != '\0') {
        *(IGHardwareExtendedContext **)(param_1 + 400) = this;
        return true;
      }
      _IOLog("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
      _kprintf("[IGPU] IG error, failed to alloc and init resolve hardware context object.\n");
    }
    *(undefined8 *)(param_1 + 400) = 0;
    IntelAccelerator::encodeFailureStack(*(IntelAccelerator **)(param_1 + 0x128),0x300);
    bVar4 = false;
  }
  return bVar4;
}



// IGAccelDisplayMachine::stop()

void __thiscall IGAccelDisplayMachine::stop(IGAccelDisplayMachine *this)

{
  (**(code **)(__got::vtable + 0x870))();
  if (*(IGHardwareContext **)(this + 400) != (IGHardwareContext *)0x0) {
    IGHardwareContext::notifyComplete
              (*(IGHardwareContext **)(this + 400),*(long *)(*(long *)(this + 0x128) + 0x150) + 0x20
              );
    if (*(long **)(this + 400) != (long *)0x0) {
      (**(code **)(**(long **)(this + 400) + 0x28))();
    }
    *(undefined8 *)(this + 400) = 0;
  }
  return;
}



// IGAccelDisplayMachine::displayModeWillChange()

void __thiscall IGAccelDisplayMachine::displayModeWillChange(IGAccelDisplayMachine *this)

{
  IntelAccelerator::stopGraphicsEngine(*(IntelAccelerator **)(this + 0x128));
  return;
}



// IGAccelDisplayMachine::displayModeDidChange()

void __thiscall
IGAccelDisplayMachine::displayModeDidChange
          (undefined8 param_1,double param_2,ulong param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this)

{
  IntelAccelerator::startGraphicsEngine
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             *(void **)((long)this + 0x128));
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::updateTVInsets(unsigned int)

undefined8 __cdecl IGAccelDisplayMachine::updateTVInsets(uint param_1)

{
  IGAccelDisplayPipe *this;
  
  this = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe(param_1);
  IGAccelDisplayPipe::updateTVInsets(this);
  return 0;
}



// IGAccelDisplayPipe::updateTVInsets()

undefined8 __thiscall IGAccelDisplayPipe::updateTVInsets(IGAccelDisplayPipe *this)

{
  long *plVar1;
  undefined4 local_d0 [38];
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  long local_20;
  
  local_20 = *(long *)__got::___stack_chk_guard;
  ___bzero(local_d0,0xac);
  plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
  (**(code **)(*plVar1 + 0x6b8))
            (plVar1,_fSymFBCLASSGetScanRegionInfo,0,this + 0x330,local_d0,this + 0x35c,this + 0x360)
  ;
  *(undefined4 *)(this + 0x364) = local_d0[0];
  *(undefined4 *)(this + 0x368) = local_38;
  *(undefined4 *)(this + 0x33c) = local_34;
  *(undefined4 *)(this + 0x340) = local_30;
  if (*(long *)__got::___stack_chk_guard == local_20) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::isScaled(unsigned int)

byte __cdecl IGAccelDisplayMachine::isScaled(uint param_1)

{
  long lVar1;
  
  lVar1 = IOAccelDisplayMachine::getDisplayPipe(param_1);
  return (*(byte *)(lVar1 + 0x3b0) & 2) >> 1;
}



// IGAccelDisplayPipe::isScaled()

byte __thiscall IGAccelDisplayPipe::isScaled(IGAccelDisplayPipe *this)

{
  return ((byte)this[0x3b0] & 2) >> 1;
}



// IGAccelDisplayMachine::needsFlipWait(IGAccelResource*) const

bool __thiscall IGAccelDisplayMachine::needsFlipWait(IGAccelDisplayMachine *this,long param_1)

{
  return *(long *)(this + 0x178) == param_1;
}



// IGAccelDisplayMachine::probeDisplayPipes()

void __thiscall IGAccelDisplayMachine::probeDisplayPipes(uint param_1)

{
  int iVar1;
  uint uVar2;
  IGAccelDisplayPipe *this;
  uint uVar3;
  
  iVar1 = IOAccelDisplayMachine::getFramebufferCount();
  if (iVar1 != 0) {
    uVar3 = 0;
    do {
      this = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe(param_1);
      IGAccelDisplayPipe::probeDisplayPipe(this);
      uVar3 = uVar3 + 1;
      uVar2 = IOAccelDisplayMachine::getFramebufferCount();
    } while (uVar3 < uVar2);
  }
  return;
}



// IGAccelDisplayPipe::probeDisplayPipe()

undefined8 __thiscall IGAccelDisplayPipe::probeDisplayPipe(IGAccelDisplayPipe *this)

{
  uint uVar1;
  long *plVar2;
  OSMetaClassBase *pOVar3;
  void *pvVar4;
  
  plVar2 = (long *)IOAccelDisplayPipe::getFramebuffer();
  pOVar3 = (OSMetaClassBase *)(**(code **)(*plVar2 + 0x2b8))(plVar2,"AAPL,DisplayPipe");
  plVar2 = (long *)OSMetaClassBase::safeMetaCast(pOVar3,*(OSMetaClass **)__got::metaClass);
  if (plVar2 == (long *)0x0) {
    pvVar4 = (void *)IOAccelDisplayPipe::getFramebufferIndex();
    *(int *)(this + 0x40c) = (int)pvVar4;
  }
  else {
    pvVar4 = (void *)(**(code **)(*plVar2 + 0x178))(plVar2);
    uVar1 = (**(code **)(*plVar2 + 0x140))(plVar2);
    pvVar4 = _memmove(this + 0x40c,pvVar4,(ulong)uVar1);
  }
  return CONCAT71((int7)((ulong)pvVar4 >> 8),1);
}



// IGAccelDisplayMachine::generateFlipWait(IGAccelFIFOChannel*)

void __thiscall
IGAccelDisplayMachine::generateFlipWait
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          long param_10,undefined8 param_11,undefined8 param_12,char *param_13,char *param_14)

{
  IGHardwareRingBuffer *this_00;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 local_48;
  undefined4 local_40;
  undefined8 local_3c;
  ulong local_34;
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  this_00 = *(IGHardwareRingBuffer **)(param_10 + 0x130);
  IGHardwareRingBuffer::waitForSpace
            (param_1_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,1,param_11,
             param_12,param_13,param_14);
  IGHardwareRingBuffer::writeDWord(this_00,*(undefined4 *)((long)this + 0x180));
  local_34 = IGAccelTask::getScratchGPUVirtualAddress
                       (*(IGAccelTask **)(*(long *)((long)this + 0x128) + 0x150));
  local_48 = 0x4405011000001;
  local_40 = 0xb077efef;
  local_34 = local_34 & 0xfffffffffffc;
  local_3c = 0x4405012000002;
  IGHardwareRingBuffer::waitForSpace
            (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,this_00,7,
             extraout_RDX,local_34,param_13,param_14);
  IGHardwareRingBuffer::writeBuffer(this_00,(long)&local_48,7);
  *(undefined8 *)((long)this + 0x178) = 0;
  *(undefined8 *)((long)this + 0x180) = 0;
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::startScaledMode(IntelScaledModeData*, unsigned int)

int __cdecl IGAccelDisplayMachine::startScaledMode(long param_1,long param_2)

{
  long *plVar1;
  int iVar2;
  IGAccelDisplayPipe *this;
  
  this = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe((uint)param_1);
  plVar1 = *(long **)(param_1 + 0x128);
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  iVar2 = IGAccelDisplayPipe::startScaledMode(this,param_2);
  plVar1 = *(long **)(param_1 + 0x128);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return iVar2;
}



// IGAccelDisplayPipe::startScaledMode(IntelScaledModeData*)

int __thiscall IGAccelDisplayPipe::startScaledMode(IGAccelDisplayPipe *this,long param_1)

{
  int iVar1;
  int iVar2;
  long *plVar3;
  undefined4 local_f0;
  undefined4 local_ec;
  undefined1 local_e8 [176];
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_f0 = 0;
  local_ec = 0;
  ___bzero(local_e8,0xac);
  plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
  iVar1 = (**(code **)(*plVar3 + 0x9f0))(plVar3,&local_f0,&local_ec);
  iVar2 = -0x1ffffd10;
  if (iVar1 == 0) {
    iVar1 = (**(code **)(*plVar3 + 0x9e8))(plVar3,local_f0,local_ec,0,local_e8);
    if (iVar1 == 0) {
      if (*(int *)(param_1 + 0x30) == 0) {
        iVar2 = allocateScaledModeMemory
                          (this,param_1,*(uint *)(param_1 + 0xc),(undefined8 *)(this + 0x390),
                           (undefined8 *)(this + 0x398));
        if (iVar2 != 0) goto LAB_0007c59a;
        *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + 1;
        this[0x3b0] = (IGAccelDisplayPipe)((byte)this[0x3b0] | 2);
      }
      else {
        *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + 1;
        *(undefined8 *)(this + 0x390) = *(undefined8 *)(param_1 + 0x18);
        *(undefined8 *)(this + 0x398) = *(undefined8 *)(param_1 + 0x10);
      }
      iVar2 = 0;
    }
  }
LAB_0007c59a:
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::stopScaledMode(IntelScaledModeData*, unsigned int)

undefined8 __cdecl IGAccelDisplayMachine::stopScaledMode(long param_1,long param_2)

{
  long *plVar1;
  IGAccelDisplayPipe *pIVar2;
  undefined8 extraout_RDX;
  
  pIVar2 = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe((uint)param_1);
  plVar1 = *(long **)(param_1 + 0x128);
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  IGAccelDisplayPipe::stopScaledMode(pIVar2,param_2,extraout_RDX);
  plVar1 = *(long **)(param_1 + 0x128);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::stopScaledMode(IntelScaledModeData*)

undefined8 __cdecl
IGAccelDisplayPipe::stopScaledMode(IGAccelDisplayPipe *param_1,long param_2,undefined8 param_3)

{
  int iVar1;
  
  iVar1 = *(int *)(param_2 + 0x30);
  if (iVar1 != 0) {
    if (iVar1 == 1) {
      deallocateScaledModeMemory
                (param_1,param_2,param_3,(long *)(param_1 + 0x390),(long *)(param_1 + 0x398));
      *(int *)(param_2 + 0x30) = *(int *)(param_2 + 0x30) + -1;
      param_1[0x3b0] = (IGAccelDisplayPipe)((byte)param_1[0x3b0] & 0xfd);
    }
    else {
      *(int *)(param_2 + 0x30) = iVar1 + -1;
      *(undefined8 *)(param_1 + 0x390) = 0;
      *(undefined8 *)(param_1 + 0x398) = 0;
    }
  }
  return 0;
}



// IGAccelDisplayMachine::allocateScanoutMemory(IntelScaledModeData*, unsigned int, unsigned int)

int __thiscall
IGAccelDisplayMachine::allocateScanoutMemory
          (IGAccelDisplayMachine *this,long param_1,undefined8 param_3_00,uint param_3)

{
  long *plVar1;
  int iVar2;
  IGAccelDisplayPipe *this_00;
  
  this_00 = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe((uint)this);
  plVar1 = *(long **)(this + 0x128);
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  iVar2 = IGAccelDisplayPipe::allocateScanoutMemory(this_00,param_1,param_3);
  plVar1 = *(long **)(this + 0x128);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return iVar2;
}



// IGAccelDisplayPipe::allocateScanoutMemory(IntelScaledModeData*, unsigned int)

int __thiscall
IGAccelDisplayPipe::allocateScanoutMemory(IGAccelDisplayPipe *this,long param_1,uint param_2)

{
  IGAccelDisplayPipe *pIVar1;
  IGAccelDisplayPipe *pIVar2;
  long lVar3;
  int iVar4;
  IGFence *pIVar5;
  undefined8 local_48;
  ulong local_40;
  uint local_34;
  
  if (*(int *)(param_1 + 0x30) == 0) {
    lVar3 = *(long *)(this + 0x88);
    *(uint *)(lVar3 + 0x1470) = *(int *)(param_1 + 0x34) == 2 | 2;
    if (((*(char *)(lVar3 + 0xf34) == '\0') && ((*(byte *)(param_1 + 0xc) & 4) != 0)) &&
       (*(char *)(lVar3 + 0x1474) != '\0')) {
      *(uint *)(param_1 + 0x28) =
           (*(uint *)(param_1 + 8) * *(uint *)(param_1 + 4) +
           (*(uint *)(param_1 + 8) >> 4) * (*(uint *)(param_1 + 4) >> 3)) *
           *(int *)__got::_page_size;
    }
    pIVar1 = this + 0x370;
    pIVar2 = this + 0x378;
    local_34 = param_2;
    iVar4 = allocateScaledModeMemory(this,param_1,param_2,(undefined8 *)pIVar1,(undefined8 *)pIVar2)
    ;
    if (iVar4 == 0) {
      *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + 1;
      iVar4 = 0;
      if ((local_34 & 1) != 0) {
        local_48 = (**(code **)(**(long **)(this + 0x378) + 0x128))();
        local_40 = (ulong)(uint)(*(int *)(param_1 + 8) * *(int *)(param_1 + 4)) *
                   *(long *)__got::_page_size + 0xfff & 0xfffffffffffff000;
        iVar4 = *(int *)(*(long *)(this + 0x88) + 0x1470);
        pIVar5 = IGFenceAllocator::allocate
                           (*(IGFenceAllocator **)
                             (*(long *)(&DAT_00001290 + *(long *)(this + 0x88)) + 0x80),&local_48,
                            (ulong)(uint)(*(int *)(param_1 + 4) << (iVar4 != 3) * '\x02' + 7),iVar4)
        ;
        *(IGFence **)(this + 0x380) = pIVar5;
        iVar4 = 0;
        if (pIVar5 == (IGFence *)0x0) {
          (**(code **)(**(long **)pIVar2 + 0x140))();
          (**(code **)(**(long **)pIVar2 + 0x28))();
          *(undefined8 *)pIVar2 = 0;
          (**(code **)(**(long **)pIVar1 + 0x28))();
          *(undefined8 *)pIVar1 = 0;
          iVar4 = -0x1ffffd44;
        }
      }
    }
  }
  else {
    *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + 1;
    *(undefined8 *)(this + 0x370) = *(undefined8 *)(param_1 + 0x18);
    *(undefined8 *)(this + 0x378) = *(undefined8 *)(param_1 + 0x10);
    iVar4 = 0;
  }
  return iVar4;
}



// IGAccelDisplayMachine::deallocateScanoutMemory(IntelScaledModeData*, unsigned int, unsigned int)

undefined8 __thiscall
IGAccelDisplayMachine::deallocateScanoutMemory
          (IGAccelDisplayMachine *this,long param_1,undefined8 param_3_00,uint param_3)

{
  long *plVar1;
  IGAccelDisplayPipe *this_00;
  
  this_00 = (IGAccelDisplayPipe *)IOAccelDisplayMachine::getDisplayPipe((uint)this);
  plVar1 = *(long **)(this + 0x128);
  _OSIncrementAtomic(plVar1 + 0x12);
  _IOLockLock(plVar1[0x11]);
  _OSDecrementAtomic(plVar1 + 0x12);
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*plVar1 + 0x850))(plVar1,"",0);
  IGAccelDisplayPipe::deallocateScanoutMemory(this_00,param_1,(ulong)param_3);
  plVar1 = *(long **)(this + 0x128);
  (**(code **)(*plVar1 + 0x858))(plVar1,"",0);
  IOGraphicsAccelerator2::unlock_busy();
  _IOLockUnlock(plVar1[0x11]);
  return 0;
}



// IGAccelDisplayPipe::deallocateScanoutMemory(IntelScaledModeData*, unsigned int)

undefined8 __thiscall
IGAccelDisplayPipe::deallocateScanoutMemory(IGAccelDisplayPipe *this,long param_1,ulong param_2)

{
  int iVar1;
  undefined1 uVar2;
  undefined1 extraout_DL;
  undefined7 uVar3;
  undefined7 extraout_var;
  IGAccelDisplayPipe *this_00;
  
  uVar2 = (undefined1)param_2;
  uVar3 = (undefined7)(param_2 >> 8);
  iVar1 = *(int *)(param_1 + 0x30);
  if (iVar1 != 0) {
    if (iVar1 == 1) {
      this_00 = this;
      if ((param_2 & 2) != 0) {
        this_00 = *(IGAccelDisplayPipe **)(this + 0x380);
        if (this_00 != (IGAccelDisplayPipe *)0x0) {
          (**(code **)(*(long *)this_00 + 0x28))();
          uVar2 = extraout_DL;
          uVar3 = extraout_var;
        }
        *(undefined8 *)(this + 0x380) = 0;
      }
      deallocateScaledModeMemory
                (this_00,param_1,CONCAT71(uVar3,uVar2),(long *)(this + 0x370),(long *)(this + 0x378)
                );
      *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + -1;
    }
    else {
      *(int *)(param_1 + 0x30) = iVar1 + -1;
      *(undefined8 *)(this + 0x370) = 0;
      *(undefined8 *)(this + 0x378) = 0;
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::getPlaneAtIndex(unsigned int)

undefined4 __cdecl IGAccelDisplayMachine::getPlaneAtIndex(uint param_1)

{
  long lVar1;
  
  lVar1 = IOAccelDisplayMachine::getDisplayPipe(param_1);
  return *(undefined4 *)(lVar1 + 0x40c);
}



// IGAccelDisplayMachine::getScanoutOffset(IOAccelMemory*, unsigned long long&)

ulong __thiscall
IGAccelDisplayMachine::getScanoutOffset(uint param_1_00,long param_2,undefined8 *param_3)

{
  long lVar1;
  undefined8 *puVar2;
  uint uVar3;
  undefined8 unaff_R14;
  bool bVar4;
  
  *param_3 = 0;
  uVar3 = 0;
  bVar4 = true;
  do {
    lVar1 = IOAccelDisplayMachine::getDisplayPipe(param_1_00);
    if (lVar1 != 0) {
      if (*(long *)(lVar1 + 800) == param_2) {
        puVar2 = (undefined8 *)(lVar1 + 0x318);
      }
      else {
        if (*(long *)(lVar1 + 0x370) != param_2) goto LAB_0007cac2;
        puVar2 = (undefined8 *)(lVar1 + 0x330);
      }
      *param_3 = *puVar2;
      break;
    }
LAB_0007cac2:
    bVar4 = uVar3 < 0xf;
    uVar3 = uVar3 + 1;
  } while (uVar3 != 0x10);
  return CONCAT71((int7)((ulong)unaff_R14 >> 8),bVar4) & 0xffffffff;
}



// IGAccelDisplayPipe::getScanoutOffset(IOAccelMemory*, unsigned long long&)

undefined8 __thiscall
IGAccelDisplayPipe::getScanoutOffset(IGAccelDisplayPipe *this,long param_1,undefined8 *param_2)

{
  undefined8 uVar1;
  IGAccelDisplayPipe *pIVar2;
  
  if (*(long *)(this + 800) == param_1) {
    pIVar2 = this + 0x318;
  }
  else {
    if (*(long *)(this + 0x370) != param_1) {
      return 0;
    }
    pIVar2 = this + 0x330;
  }
  uVar1 = *(undefined8 *)pIVar2;
  *param_2 = uVar1;
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IGAccelDisplayMachine::getHardwareContext()

undefined8 __thiscall IGAccelDisplayMachine::getHardwareContext(IGAccelDisplayMachine *this)

{
  return *(undefined8 *)(this + 400);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayMachine::describeDriverAllocations(IOAccelAllocationInfo*, char const*, int)

void __cdecl IGAccelDisplayMachine::describeDriverAllocations(long param_1,IOAccelMemory *param_2)

{
  char local_a8 [128];
  long local_28;
  
  local_28 = *(long *)__got::___stack_chk_guard;
  if (*(long *)(param_1 + 400) != 0) {
    local_a8[0x78] = '\0';
    local_a8[0x79] = '\0';
    local_a8[0x7a] = '\0';
    local_a8[0x7b] = '\0';
    local_a8[0x7c] = '\0';
    local_a8[0x7d] = '\0';
    local_a8[0x7e] = '\0';
    local_a8[0x7f] = '\0';
    local_a8[0x70] = '\0';
    local_a8[0x71] = '\0';
    local_a8[0x72] = '\0';
    local_a8[0x73] = '\0';
    local_a8[0x74] = '\0';
    local_a8[0x75] = '\0';
    local_a8[0x76] = '\0';
    local_a8[0x77] = '\0';
    local_a8[0x68] = '\0';
    local_a8[0x69] = '\0';
    local_a8[0x6a] = '\0';
    local_a8[0x6b] = '\0';
    local_a8[0x6c] = '\0';
    local_a8[0x6d] = '\0';
    local_a8[0x6e] = '\0';
    local_a8[0x6f] = '\0';
    local_a8[0x60] = '\0';
    local_a8[0x61] = '\0';
    local_a8[0x62] = '\0';
    local_a8[99] = '\0';
    local_a8[100] = '\0';
    local_a8[0x65] = '\0';
    local_a8[0x66] = '\0';
    local_a8[0x67] = '\0';
    local_a8[0x58] = '\0';
    local_a8[0x59] = '\0';
    local_a8[0x5a] = '\0';
    local_a8[0x5b] = '\0';
    local_a8[0x5c] = '\0';
    local_a8[0x5d] = '\0';
    local_a8[0x5e] = '\0';
    local_a8[0x5f] = '\0';
    local_a8[0x50] = '\0';
    local_a8[0x51] = '\0';
    local_a8[0x52] = '\0';
    local_a8[0x53] = '\0';
    local_a8[0x54] = '\0';
    local_a8[0x55] = '\0';
    local_a8[0x56] = '\0';
    local_a8[0x57] = '\0';
    local_a8[0x48] = '\0';
    local_a8[0x49] = '\0';
    local_a8[0x4a] = '\0';
    local_a8[0x4b] = '\0';
    local_a8[0x4c] = '\0';
    local_a8[0x4d] = '\0';
    local_a8[0x4e] = '\0';
    local_a8[0x4f] = '\0';
    local_a8[0x40] = '\0';
    local_a8[0x41] = '\0';
    local_a8[0x42] = '\0';
    local_a8[0x43] = '\0';
    local_a8[0x44] = '\0';
    local_a8[0x45] = '\0';
    local_a8[0x46] = '\0';
    local_a8[0x47] = '\0';
    local_a8[0x38] = '\0';
    local_a8[0x39] = '\0';
    local_a8[0x3a] = '\0';
    local_a8[0x3b] = '\0';
    local_a8[0x3c] = '\0';
    local_a8[0x3d] = '\0';
    local_a8[0x3e] = '\0';
    local_a8[0x3f] = '\0';
    local_a8[0x30] = '\0';
    local_a8[0x31] = '\0';
    local_a8[0x32] = '\0';
    local_a8[0x33] = '\0';
    local_a8[0x34] = '\0';
    local_a8[0x35] = '\0';
    local_a8[0x36] = '\0';
    local_a8[0x37] = '\0';
    local_a8[0x28] = '\0';
    local_a8[0x29] = '\0';
    local_a8[0x2a] = '\0';
    local_a8[0x2b] = '\0';
    local_a8[0x2c] = '\0';
    local_a8[0x2d] = '\0';
    local_a8[0x2e] = '\0';
    local_a8[0x2f] = '\0';
    local_a8[0x20] = '\0';
    local_a8[0x21] = '\0';
    local_a8[0x22] = '\0';
    local_a8[0x23] = '\0';
    local_a8[0x24] = '\0';
    local_a8[0x25] = '\0';
    local_a8[0x26] = '\0';
    local_a8[0x27] = '\0';
    local_a8[0x18] = '\0';
    local_a8[0x19] = '\0';
    local_a8[0x1a] = '\0';
    local_a8[0x1b] = '\0';
    local_a8[0x1c] = '\0';
    local_a8[0x1d] = '\0';
    local_a8[0x1e] = '\0';
    local_a8[0x1f] = '\0';
    local_a8[0x10] = '\0';
    local_a8[0x11] = '\0';
    local_a8[0x12] = '\0';
    local_a8[0x13] = '\0';
    local_a8[0x14] = '\0';
    local_a8[0x15] = '\0';
    local_a8[0x16] = '\0';
    local_a8[0x17] = '\0';
    local_a8[8] = '\0';
    local_a8[9] = '\0';
    local_a8[10] = '\0';
    local_a8[0xb] = '\0';
    local_a8[0xc] = '\0';
    local_a8[0xd] = '\0';
    local_a8[0xe] = '\0';
    local_a8[0xf] = '\0';
    local_a8[0] = '\0';
    local_a8[1] = '\0';
    local_a8[2] = '\0';
    local_a8[3] = '\0';
    local_a8[4] = '\0';
    local_a8[5] = '\0';
    local_a8[6] = '\0';
    local_a8[7] = '\0';
    _snprintf(local_a8,0x80,"Display Context");
    IGHardwareContext::describeDriverAllocations(*(long *)(param_1 + 400),param_2);
    IGHardwareRingBuffer::describeDriverAllocations();
  }
  if (*(long *)__got::___stack_chk_guard == local_28) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGAccelDisplayPipe::MetaClass::MetaClass()

void __thiscall IGAccelDisplayPipe::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDisplayPipe",(OSMetaClass *)__got::gMetaClass,0x64c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDisplayPipe::MetaClass::~MetaClass()

void __thiscall IGAccelDisplayPipe::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelDisplayPipe::IGAccelDisplayPipe(OSMetaClass const*)

void __thiscall
IGAccelDisplayPipe::IGAccelDisplayPipe(IGAccelDisplayPipe *this,OSMetaClass *param_1)

{
  IOAccelDisplayPipe::IOAccelDisplayPipe((IOAccelDisplayPipe *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDisplayPipe;
  return;
}



// IGAccelDisplayPipe::IGAccelDisplayPipe(OSMetaClass const*)

void __thiscall
IGAccelDisplayPipe::IGAccelDisplayPipe(IGAccelDisplayPipe *this,OSMetaClass *param_1)

{
  IOAccelDisplayPipe::IOAccelDisplayPipe((IOAccelDisplayPipe *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelDisplayPipe;
  return;
}



// IGAccelDisplayPipe::~IGAccelDisplayPipe()

void __thiscall IGAccelDisplayPipe::~IGAccelDisplayPipe(IGAccelDisplayPipe *this)

{
  IOAccelDisplayPipe::~IOAccelDisplayPipe((IOAccelDisplayPipe *)this);
  return;
}



// IGAccelDisplayPipe::~IGAccelDisplayPipe()

void __thiscall IGAccelDisplayPipe::~IGAccelDisplayPipe(IGAccelDisplayPipe *this)

{
  IOAccelDisplayPipe::~IOAccelDisplayPipe((IOAccelDisplayPipe *)this);
  return;
}



// IGAccelDisplayPipe::~IGAccelDisplayPipe()

void __thiscall IGAccelDisplayPipe::~IGAccelDisplayPipe(IGAccelDisplayPipe *this)

{
  IOAccelDisplayPipe::~IOAccelDisplayPipe((IOAccelDisplayPipe *)this);
  _OSObject_typed_operator_delete(&IGAccelDisplayPipe_ktv,this,0x64c8);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::operator delete(void*, unsigned long)

void __cdecl IGAccelDisplayPipe::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelDisplayPipe_ktv,param_1,param_2);
  return;
}



// IGAccelDisplayPipe::getMetaClass() const

undefined8 * IGAccelDisplayPipe::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelDisplayPipe::MetaClass::MetaClass()

void __thiscall IGAccelDisplayPipe::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelDisplayPipe",(OSMetaClass *)__got::gMetaClass,0x64c8);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelDisplayPipe::MetaClass::alloc() const

IOAccelDisplayPipe * IGAccelDisplayPipe::MetaClass::alloc(void)

{
  IOAccelDisplayPipe *this;
  
  this = (IOAccelDisplayPipe *)_OSObject_typed_operator_new(&IGAccelDisplayPipe_ktv,0x64c8);
  IOAccelDisplayPipe::IOAccelDisplayPipe(this,(OSMetaClass *)&IGAccelDisplayPipe::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayPipe;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelDisplayPipe::operator new(unsigned long)

void * __thiscall IGAccelDisplayPipe::operator_new(IGAccelDisplayPipe *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelDisplayPipe_ktv,this);
  return pvVar1;
}



// IGAccelDisplayPipe::IGAccelDisplayPipe()

void __thiscall IGAccelDisplayPipe::IGAccelDisplayPipe(IGAccelDisplayPipe *this)

{
  IOAccelDisplayPipe::IOAccelDisplayPipe((IOAccelDisplayPipe *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayPipe;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelDisplayPipe::IGAccelDisplayPipe()

void __thiscall IGAccelDisplayPipe::IGAccelDisplayPipe(IGAccelDisplayPipe *this)

{
  IOAccelDisplayPipe::IOAccelDisplayPipe((IOAccelDisplayPipe *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelDisplayPipe;
  OSMetaClass::instanceConstructed();
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::init(IOGraphicsAccelerator2*, IOAccelDisplayMachine*, IOFramebuffer*,
// unsigned int)

undefined8 __cdecl IGAccelDisplayPipe::init(long param_1)

{
  undefined8 uVar1;
  undefined4 uVar2;
  int in_R8D;
  
  (**(code **)(__got::vtable + 0x860))();
  *(undefined2 *)(param_1 + 0x410) = 0;
  *(undefined4 *)(param_1 + 0x40c) = 0;
  ___bzero(param_1 + 0x330,0x84);
  *(undefined8 *)(param_1 + 0x420) = 0;
  *(undefined8 *)(param_1 + 0x418) = 0;
  uVar2 = 0x68;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(param_1 + 0x88)) & 0x18000) == 0) {
    uVar2 = 0x6e;
  }
  *(undefined4 *)(param_1 + 0x408) = uVar2;
  *(undefined8 *)(param_1 + 0x318) = 0;
  *(undefined8 *)(param_1 + 800) = 0;
  *(undefined1 *)(param_1 + 0x404) = 0;
  *(undefined4 *)(param_1 + 0x64c0) = 0xffffffff;
  *(int *)(param_1 + 0x328) = in_R8D + *(int *)(&DAT_000011d0 + *(long *)(param_1 + 0x88));
  *(undefined4 *)(param_1 + 0x64b0) = 0;
  *(undefined8 *)(IGAccelTask::getScratchGPUVirtualAddress + param_1 + 4) = 0;
  uVar1 = ___bzero(param_1 + 0x6428,0x85);
  return CONCAT71((int7)((ulong)uVar1 >> 8),1);
}



// IGAccelDisplayPipe::generateMaxFlipSpace()

undefined8 __thiscall IGAccelDisplayPipe::generateMaxFlipSpace(IGAccelDisplayPipe *this)

{
  undefined8 uVar1;
  
  uVar1 = 0x68;
  if ((*(uint *)(&DAT_000011c0 + *(long *)(this + 0x88)) & 0x18000) == 0) {
    uVar1 = 0x6e;
  }
  return uVar1;
}



// IGAccelDisplayPipe::free()

void __thiscall IGAccelDisplayPipe::free(IGAccelDisplayPipe *this,void *param_1)

{
  if (*(long **)(this + 0x380) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x380) + 0x28))();
  }
  *(undefined8 *)(this + 0x380) = 0;
  if (*(long **)(this + 0x378) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x378) + 0x140))();
    (**(code **)(**(long **)(this + 0x378) + 0x28))();
    *(undefined8 *)(this + 0x378) = 0;
  }
  if (*(long **)(this + 0x370) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x370) + 0x28))();
    *(undefined8 *)(this + 0x370) = 0;
  }
  if (*(long **)(this + 0x398) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x398) + 0x140))();
    (**(code **)(**(long **)(this + 0x398) + 0x28))();
    *(undefined8 *)(this + 0x398) = 0;
  }
  if (*(long **)(this + 0x390) != (long *)0x0) {
    (**(code **)(**(long **)(this + 0x390) + 0x28))();
    *(undefined8 *)(this + 0x390) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0007cfb8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0xa0))(this);
  return;
}



// IGAccelDisplayPipe::displayReadRegister32(int)

undefined4 __thiscall
IGAccelDisplayPipe::displayReadRegister32(IGAccelDisplayPipe *this,undefined4 param_1)

{
  long *plVar1;
  undefined4 local_18;
  undefined4 local_14;
  
  if ((&DAT_000012b4)[*(long *)(this + 0x88)] == '\0') {
    local_18 = 0;
  }
  else {
    local_14 = param_1;
    plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
    local_18 = 0;
    (**(code **)(*plVar1 + 0x6b8))(plVar1,_fSymFBCLASSReadRegister32,1,&local_18,&local_14,0,0);
  }
  return local_18;
}



// IGAccelDisplayPipe::displayWriteRegister32(int, unsigned int)

void __thiscall
IGAccelDisplayPipe::displayWriteRegister32
          (IGAccelDisplayPipe *this,undefined4 param_1,undefined4 param_2)

{
  long *plVar1;
  undefined4 local_10;
  undefined4 local_c;
  
  if ((&DAT_000012b4)[*(long *)(this + 0x88)] != '\0') {
    local_10 = param_1;
    local_c = param_2;
    plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
    (**(code **)(*plVar1 + 0x6b8))(plVar1,_fSymFBCLASSWriteRegister32,1,&local_10,&local_c,0,0);
  }
  return;
}



// IGAccelDisplayPipe::initScalingInfo(unsigned int, IOTimingInformation const&, IOPixelInformation
// const&)

void __thiscall
IGAccelDisplayPipe::initScalingInfo(IGAccelDisplayPipe *this,int param_1,long param_2,long param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  uint uVar6;
  bool bVar7;
  float fVar8;
  float fVar9;
  
  if (param_1 == 0) {
    uVar6 = *(uint *)(param_2 + 0x48);
    *(uint *)(this + 0x33c) = uVar6;
    puVar5 = (uint *)(param_2 + 0x58);
  }
  else {
    uVar6 = *(uint *)(param_3 + 0x9c);
    *(uint *)(this + 0x33c) = uVar6;
    puVar5 = (uint *)(param_3 + 0xa0);
  }
  uVar1 = *puVar5;
  *(uint *)(this + 0x340) = uVar1;
  uVar2 = *(uint *)(param_2 + 0x20);
  *(uint *)(this + 0x344) = uVar2;
  uVar3 = *(uint *)(param_2 + 0x24);
  *(uint *)(this + 0x348) = uVar3;
  bVar7 = uVar2 != 0 || uVar3 != 0;
  if (bVar7) {
    fVar8 = (float)uVar6 / (float)uVar2;
    fVar9 = (float)uVar1 / (float)uVar3;
  }
  else {
    fVar8 = 1.0;
    fVar9 = 1.0;
  }
  *(uint *)(this + 0x338) = (uint)bVar7;
  *(float *)(this + 0x34c) = fVar8;
  *(float *)(this + 0x350) = fVar9;
  if (((byte)this[0x3b0] & 2) == 0) {
    *(undefined8 *)(this + 0x354) = 0x3f8000003f800000;
  }
  else {
    uVar4 = uVar3;
    if (((byte)this[0x368] & 0x10) == 0) {
      uVar4 = uVar2;
      uVar2 = uVar3;
    }
    *(float *)(this + 0x354) = (float)uVar6 / (float)uVar4;
    *(float *)(this + 0x358) = (float)uVar1 / (float)uVar2;
  }
  return;
}



// IGAccelDisplayPipe::initResourceInfo(IOAccelResource2*, IOPixelInformation const&, bool)

void __thiscall
IGAccelDisplayPipe::initResourceInfo
          (IGAccelDisplayPipe *this,long param_1,int *param_2,char param_3)

{
  char cVar1;
  long lVar2;
  undefined4 uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  
  if ((((byte)this[0x3b0] & 2) != 0) ||
     (uVar9 = 0, ((&DAT_000011c0)[*(long *)(this + 0x88)] & 0x20) == 0)) {
    uVar9 = *(uint *)(*(long *)(this + 0x88) + 0x1470);
  }
  cVar1 = *(char *)(param_1 + 0xd8);
  if (cVar1 == '\x01') {
    uVar3 = 0x145;
  }
  else if (cVar1 == '\b') {
    uVar3 = 0x84;
  }
  else if (cVar1 == '\x02') {
    uVar3 = 0x102;
  }
  else {
    iVar6 = _strncmp((char *)(param_2 + 0x16),"--------RRRRRRRRGGGGGGGGBBBBBBBB",0x40);
    uVar3 = 0xd1;
    if (iVar6 == 0) {
      uVar3 = 0xc0;
    }
  }
  *(uint *)(param_1 + 0x108) = *(uint *)(param_1 + 0x108) & 0xf7ffffff | (uint)(uVar9 == 3) << 0x1b;
  lVar2 = *(long *)(this + 0x88);
  uVar7 = 0;
  if ((((*(char *)(lVar2 + 0xf34) != '\0') || (param_3 == '\0')) || (*(int *)(this + 0x40c) != 0))
     || (((*(char *)(lVar2 + 0x1474) == '\0' || ((*(byte *)(param_1 + 0xd8) & 0xfc) == 0)) ||
         ((0xb < uVar9 || ((0x888U >> (uVar9 & 0x1f) & 1) == 0)))))) {
    iVar8 = 0;
    goto LAB_0007d261;
  }
  uVar5 = param_2[0x27];
  iVar6 = param_2[0x28];
  iVar8 = 0;
  if (iVar6 * uVar5 * (uint)*(byte *)(param_1 + 0xd8) < 0x401) goto LAB_0007d261;
  if (*(int *)(lVar2 + 0x1470) == 3) {
    iVar6 = (iVar6 + 0x1fU >> 5) * (uVar5 * 4 + 0x7f >> 7) * *(int *)__got::_page_size;
    uVar4 = (uVar5 >> 3) + 0x7f >> 7;
LAB_0007d39c:
    uVar7 = iVar6 + 0xfffU & 0xfffff000;
  }
  else {
    uVar7 = 0;
    uVar4 = 0;
    if (*(int *)(lVar2 + 0x1470) == 2) {
      iVar6 = (iVar6 + 7U >> 3) * (uVar5 * 4 + 0x1ff >> 9) * *(int *)__got::_page_size;
      uVar4 = (uVar5 >> 3) + 0x1ff >> 9;
      goto LAB_0007d39c;
    }
  }
  iVar8 = uVar4 << 7;
LAB_0007d261:
  uVar5 = *param_2 + 0x7f;
  if (uVar9 != 3) {
    uVar5 = *param_2 + 0x1ff;
  }
  *(byte *)(param_1 + 0x1d6) = *(byte *)(param_1 + 0x1d6) | 2;
  *(short *)(param_1 + 0x194) = (short)uVar9;
  *(undefined4 *)(param_1 + 400) = uVar3;
  *(uint *)(param_1 + 0x188) = uVar5 >> (uVar9 != 3) * '\x02' + 7;
  *(uint *)(param_1 + 0x1c0) = uVar7;
  *(int *)(param_1 + 0x1c4) = iVar8;
  return;
}



// IGAccelDisplayPipe::initFramebufferResource(unsigned int, IOAccelResource2*)

undefined8 __thiscall
IGAccelDisplayPipe::initFramebufferResource
          (IGAccelDisplayPipe *this,undefined8 param_2_00,long param_2)

{
  int iVar1;
  int iVar2;
  long *plVar3;
  IOMemoryDescriptor *pIVar4;
  long lVar5;
  long lVar6;
  undefined8 uVar7;
  IGAccelDisplayPipe *pIVar8;
  undefined1 local_1d0 [4];
  undefined4 local_1cc;
  uint local_1a8;
  undefined8 local_128;
  undefined8 local_120;
  undefined8 local_118;
  undefined8 local_110;
  undefined4 local_108;
  long local_100;
  undefined4 local_f4;
  int local_f0;
  undefined4 local_ec;
  int local_e8 [38];
  undefined4 local_50;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_100 = param_2;
  plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
  local_f0 = IOAccelDisplayPipe::getFramebufferIndex();
  uVar7 = 0;
  local_ec = 0;
  local_f4 = 0;
  ___bzero(local_1d0,0xa8);
  ___bzero(local_e8,0xac);
  local_108 = 0;
  local_110 = 0;
  local_118 = 0;
  local_120 = 0;
  local_128 = 0;
  iVar2 = (**(code **)(*plVar3 + 0x9f0))(plVar3,&local_ec,&local_f4);
  iVar1 = local_f0;
  if (iVar2 != 0) goto LAB_0007d4ba;
  local_1cc = 0x80000000;
  iVar2 = (**(code **)(*plVar3 + 0xa38))(plVar3,local_ec);
  if (iVar2 != 0) {
LAB_0007d48a:
    uVar7 = 0;
    goto LAB_0007d4ba;
  }
  uVar7 = 0;
  iVar2 = (**(code **)(*plVar3 + 0x9e8))(plVar3,local_ec,local_f4,0,local_e8);
  if (iVar2 != 0) goto LAB_0007d4ba;
  iVar2 = (**(code **)(*plVar3 + 0x9d8))(plVar3,local_ec,&local_128);
  if (iVar2 != 0) goto LAB_0007d48a;
  (**(code **)(*plVar3 + 0x6b8))
            (plVar3,_fSymFBCLASSGetScanRegionInfo,0,this + 0x330,local_e8,this + 0x35c,this + 0x360)
  ;
  *(int *)(this + 0x364) = local_e8[0];
  *(undefined4 *)(this + 0x368) = local_50;
  *(undefined4 *)(this + 0x36c) = (undefined4)local_118;
  initScalingInfo(this,iVar1,(long)local_1d0,(long)local_e8);
  initResourceInfo(this,local_100,local_e8,*(long *)(this + 0x378) != 0);
  *(uint *)(this + 0x3b0) = local_1a8 >> 2 & 1 | *(uint *)(this + 0x3b0) & 0xfffffffe;
  if ((*(long *)(this + 0x390) == 0) || (*(int *)(*(long *)(this + 0x88) + 0xf30) == 2)) {
    if ((*(long **)(this + 0x378) != (long *)0x0) && (*(int *)(*(long *)(this + 0x88) + 0xf30) != 2)
       ) {
      uVar7 = (**(code **)(**(long **)(this + 0x378) + 0x128))();
      *(undefined8 *)(this + 0x3a8) = uVar7;
      *(undefined8 *)(this + 0x318) = uVar7;
      pIVar8 = this + 0x370;
      goto LAB_0007d6b0;
    }
    uVar7 = 0;
    pIVar4 = (IOMemoryDescriptor *)(**(code **)(*plVar3 + 0x9a8))(plVar3);
    if (pIVar4 == (IOMemoryDescriptor *)0x0) goto LAB_0007d4ba;
    lVar5 = IOMemoryDescriptor::getPhysicalAddress();
    lVar6 = IOMemoryDescriptor::getPhysicalAddress();
    *(long *)(this + 0x3a8) = lVar5 - lVar6;
    *(long *)(this + 0x318) = lVar5 - lVar6;
    uVar7 = 0;
    lVar5 = IOAccelSysMemory::withMemoryDescriptor
                      (*(IOGraphicsAccelerator2 **)(this + 0x88),(IOAccelResource2 *)0x0,pIVar4);
    *(long *)(this + 800) = lVar5;
    lVar6 = 5;
    if (lVar5 == 0) goto LAB_0007d4ba;
  }
  else {
    pIVar8 = this + 0x390;
    uVar7 = (**(code **)(**(long **)(this + 0x398) + 0x128))();
    *(undefined8 *)(this + 0x3a8) = uVar7;
    *(undefined8 *)(this + 0x318) = uVar7;
LAB_0007d6b0:
    pIVar4 = *(IOMemoryDescriptor **)pIVar8;
    *(IOMemoryDescriptor **)(this + 800) = pIVar4;
    lVar6 = 4;
  }
  (**(code **)(*(long *)pIVar4 + lVar6 * 8))(pIVar4);
  (**(code **)(*plVar3 + 0x6b8))(plVar3,_fSymFBCLASSSetTransactionDisplayPipe,1,this,0,0,0);
  if (*(int *)(this + 0x64c0) == -1) {
    *(undefined4 *)(this + 0x64c0) = 1;
  }
  uVar7 = *(undefined8 *)(this + 800);
LAB_0007d4ba:
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return uVar7;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::destroyFramebufferResource(unsigned int, IOAccelResource2*)

void __cdecl IGAccelDisplayPipe::destroyFramebufferResource(long param_1)

{
  *(undefined8 *)(param_1 + 0x3a8) = 0;
  *(undefined8 *)(param_1 + 0x318) = 0;
  *(undefined8 *)(param_1 + 800) = 0;
  return;
}



// IGAccelDisplayPipe::allocateScaledModeMemory(IntelScaledModeData*, unsigned int,
// IGAccelSysMemory**, IGAccelMemoryMap**)

int __thiscall
IGAccelDisplayPipe::allocateScaledModeMemory
          (IGAccelDisplayPipe *this,long param_1,uint param_2,undefined8 *param_3,
          undefined8 *param_4)

{
  int iVar1;
  char cVar2;
  long *plVar3;
  long *plVar4;
  undefined8 uVar5;
  sbyte sVar6;
  ulonglong uVar7;
  
  iVar1 = *(int *)(*(IOGraphicsAccelerator2 **)(this + 0x88) + 0x1470);
  uVar7 = (ulonglong)*(uint *)(param_1 + 0x28);
  if (uVar7 == 0) {
    uVar7 = (ulong)(uint)(*(int *)(param_1 + 8) * *(int *)(param_1 + 4)) *
            *(long *)__got::_page_size + 0xfff & 0xfffffffffffff000;
  }
  plVar3 = (long *)IOAccelSysMemory::withOptions
                             (*(IOGraphicsAccelerator2 **)(this + 0x88),
                              *(task **)__got::_kernel_task,(IOAccelShared2 *)0x0,
                              (IOAccelResource2 *)0x0,0x23,uVar7);
  if (plVar3 != (long *)0x0) {
    plVar4 = (long *)(**(code **)(*plVar3 + 0x138))
                               (plVar3,*(undefined8 *)(*(long *)(this + 0x88) + 0x150),
                                (uint)(iVar1 == 3) * 0x8000000 + (param_2 & 1) * 0x10000 + 0xb);
    if (plVar4 != (long *)0x0) {
      if (((((*(byte *)(plVar4 + 2) & 1) != 0) ||
           (cVar2 = (**(code **)(*plVar4 + 0x150))(plVar4), cVar2 != '\0')) ||
          (cVar2 = (**(code **)(**(long **)(*(long *)(this + 0x88) + 0x150) + 0x120))
                             (*(long **)(*(long *)(this + 0x88) + 0x150),plVar4), cVar2 != '\0')) &&
         ((cVar2 = (**(code **)(*plVar4 + 0x138))(plVar4), cVar2 != '\0' ||
          (cVar2 = IOGraphicsAccelerator2::freeToPrepareMapping(*(IOAccelMemoryMap **)(this + 0x88))
          , cVar2 != '\0')))) {
        *param_3 = plVar3;
        *param_4 = plVar4;
        uVar5 = (**(code **)(*plVar4 + 0x128))(plVar4);
        *(undefined8 *)(param_1 + 0x20) = uVar5;
        sVar6 = (*(int *)(*(long *)(this + 0x88) + 0x1470) != 3) * '\x02' + 7;
        *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 4) << sVar6;
        *(long **)(param_1 + 0x10) = plVar4;
        *(long **)(param_1 + 0x18) = plVar3;
        return 0 << sVar6;
      }
      (**(code **)(*plVar4 + 0x28))(plVar4);
    }
    (**(code **)(*plVar3 + 0x28))(plVar3);
    return -0x1ffffd44;
  }
  return -0x1ffffd44;
}



// IGAccelDisplayPipe::deallocateScaledModeMemory(IntelScaledModeData*, unsigned int,
// IGAccelSysMemory**, IGAccelMemoryMap**)

undefined8 __thiscall
IGAccelDisplayPipe::deallocateScaledModeMemory
          (IGAccelDisplayPipe *this,long param_1,undefined8 param_2,long *param_3,long *param_4)

{
  if ((long *)*param_4 != (long *)0x0) {
    (**(code **)(*(long *)*param_4 + 0x140))();
    (**(code **)(*(long *)*param_4 + 0x28))();
    *param_4 = 0;
  }
  if ((long *)*param_3 != (long *)0x0) {
    (**(code **)(*(long *)*param_3 + 0x28))();
    *param_3 = 0;
  }
  *(undefined8 *)(param_1 + 0x10) = 0;
  *(undefined8 *)(param_1 + 0x18) = 0;
  *(undefined8 *)(param_1 + 0x20) = 0;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  return 0;
}



// IGAccelDisplayPipe::displayModeWillChange()

void __thiscall IGAccelDisplayPipe::displayModeWillChange(IGAccelDisplayPipe *this)

{
  IGAccelResource *this_00;
  long lVar1;
  
  lVar1 = *(long *)(this + 0x88);
  if (*(char *)(lVar1 + 0xf34) == '\0') {
    if (((*(char *)(lVar1 + 0x1474) != '\0') && (*(int *)(this + 0x40c) == 0)) &&
       (*(int *)(lVar1 + 0xf30) != 2)) {
      this_00 = (IGAccelResource *)IOAccelDisplayPipe::getFramebufferResource((uint)this);
      lVar1 = IOAccelResource2::getStorageResource();
      if ((this_00 != (IGAccelResource *)0x0) && (1 < *(byte *)(lVar1 + 0x220))) {
        IGAccelResource::submitCCSResolve
                  (this_00,lVar1 + 0x180,*(IntelAccelerator **)(this + 0x88),
                   *(IGAccelTask **)(*(IntelAccelerator **)(this + 0x88) + 0x150),0,3,0,1,
                   (IGAccelResource *)0x0);
        *(undefined1 *)(lVar1 + 0x220) = 1;
        *(byte *)(lVar1 + 0x221) = *(byte *)(lVar1 + 0x221) & 0xfb;
      }
    }
    ___bzero(this + 0x6428,0x84);
  }
                    // WARNING: Could not recover jumptable at 0x0007da08. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x878))(this);
  return;
}



// IGAccelDisplayPipe::displayModeDidChange()

void __thiscall IGAccelDisplayPipe::displayModeDidChange(IGAccelDisplayPipe *this)

{
  probeDisplayPipe(this);
  (**(code **)(__got::vtable + 0x880))(this);
                    // WARNING: Could not recover jumptable at 0x0007da43. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(**(long **)(&DAT_00001290 + *(long *)(this + 0x88)) + 0x130))();
  return;
}



// IGAccelDisplayPipe::generateFlip(IOAccelEvent*, unsigned int, IOAccelResource2*,
// IOAccelResource2*)

void __thiscall
IGAccelDisplayPipe::generateFlip
          (IGAccelDisplayPipe *this,long param_1,uint param_2,IOAccelResource2 *param_3,long param_4
          )

{
  IOAccelResource2 IVar1;
  uint *puVar2;
  undefined8 *puVar3;
  uint uVar4;
  char cVar5;
  long lVar6;
  IGHardwareExtendedContext *pIVar7;
  IGAccelEventMachine *this_00;
  undefined8 uVar8;
  ulong uVar9;
  ulong uVar10;
  long *plVar11;
  undefined4 uVar12;
  uint uVar13;
  IntelAccelerator *this_01;
  undefined8 *puVar14;
  uint uVar15;
  int iVar16;
  uint uVar17;
  long lVar18;
  ulong *puVar19;
  byte bVar20;
  bool bVar21;
  undefined4 local_68;
  undefined4 local_64;
  long local_60;
  ulong local_58;
  long local_50;
  long local_48;
  ulong local_40;
  char local_31;
  
  local_60 = param_1;
  local_50 = param_4;
  lVar6 = (**(code **)(**(long **)(param_3 + 0x40) + 0x130))();
  IVar1 = param_3[0x14];
  if (IVar1 != (IOAccelResource2)0x0) {
    if (IVar1 == (IOAccelResource2)0x82) {
      uVar10 = (ulong)*(uint *)(param_3 + 0xfc);
      goto LAB_0007daa6;
    }
    if (IVar1 != (IOAccelResource2)0x80) {
      uVar10 = 0;
      goto LAB_0007daa6;
    }
  }
  uVar10 = *(ulong *)(param_3 + 0xf8);
LAB_0007daa6:
  uVar9 = *(ulong *)(param_3 + 0xb8);
  if (uVar9 == 0) {
    uVar9 = *(ulong *)(param_3 + 0xc0);
  }
  local_31 = '\0';
  if ((((param_2 & 4) == 0) && (*(int *)(this + 0x64c0) == 1)) &&
     (local_48 = lVar6, local_40 = (long)*(int *)(this + 0x40c),
     cVar5 = IOAccelDisplayPipe::isActive(), cVar5 != '\0')) {
    lVar6 = uVar10 + local_48;
    local_58 = uVar9;
    if (this[0x404] != (IGAccelDisplayPipe)0x0) {
      IOAccelDisplayPipe::finishTransactionQueue();
      this[0x404] = (IGAccelDisplayPipe)0x0;
    }
    local_48 = lVar6;
    exitPSR(this,lVar6,(long)&local_31);
    iVar16 = *(int *)(*(long *)(this + 0x88) + 0xf30);
    bVar21 = true;
    if (((iVar16 == 2) || (bVar21 = iVar16 == 3, local_31 != '\0')) || (iVar16 == 3)) {
      this_00 = (IGAccelEventMachine *)IOAccelDisplayPipe::getEventMachine();
      IGAccelEventMachine::finishAllStamps(this_00,0x2b);
    }
    else {
      bVar21 = false;
    }
    lVar6 = *(long *)(*(long *)(*(long *)(this + 0x90) + 400) + 0xd8);
    (**(code **)(**(long **)(lVar6 + 0x20) + 0x148))();
    uVar8 = IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)lVar6);
    *(undefined8 *)(this + 0x418) = uVar8;
    *(undefined8 *)(this + 0x420) = uVar8;
    if ((local_31 != '\0') || (bVar21)) {
      uVar8 = IGAccelTask::getScratchGPUVirtualAddress
                        (*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150));
      lVar6 = local_60;
      puVar14 = *(undefined8 **)(this + 0x418);
      *puVar14 = 0x101050217a000004;
      *(uint *)(puVar14 + 1) = (uint)uVar8 & 0xfffffffc;
      *(int *)((long)puVar14 + 0xc) = (int)((ulong)uVar8 >> 0x20);
      puVar14[2] = 0;
      puVar14[5] = 0;
      puVar14[4] = 0;
      puVar14[3] = 0x10004187a000004;
      *(undefined8 **)(this + 0x418) = puVar14 + 6;
      if ((uint)local_40 != 0xffff) {
        submitCommands(this,(ulong)(byte)param_3[0x16] * 0x40 + *(long *)(param_3 + 0x38),local_60);
        IOAccelDisplayPipe::submitFlipBufferTransaction
                  ((IOAccelEvent *)this,(uint)lVar6,(IOAccelResource2 *)(ulong)param_2,param_3);
        lVar6 = *(long *)(*(long *)(*(long *)(this + 0x90) + 400) + 0xd8);
        (**(code **)(**(long **)(lVar6 + 0x20) + 0x148))();
        uVar8 = IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)lVar6);
        *(undefined8 *)(this + 0x418) = uVar8;
        *(undefined8 *)(this + 0x420) = uVar8;
      }
    }
    else {
      uVar4 = (uint)local_40;
      uVar10 = local_40 & 0xffffffff;
      if ((uint)local_40 != 0xffff) {
        bVar20 = (byte)((param_2 & 2) >> 1);
        lVar6 = IOAccelResource2::getStorageResource();
        local_58 = (ulong)((uint)local_58 >> (*(short *)(lVar6 + 0x194) != 3) * '\x02' + 7);
        puVar14 = *(undefined8 **)(this + 0x418);
        uVar9 = IGAccelTask::getScratchGPUVirtualAddress
                          (*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150));
        uVar12 = 0xb077efef;
        if (uVar4 < 3) {
          uVar12 = *(undefined4 *)(&DAT_001146b0 + local_40 * 4);
        }
        *puVar14 = 0x4405011000001;
        *(undefined4 *)(puVar14 + 1) = uVar12;
        *(undefined8 *)((long)puVar14 + 0xc) = 0x4405012000002;
        *(ulong *)((long)puVar14 + 0x14) = (uVar9 >> 2 & 0x3fffffffffff) << 2;
        *(long *)(this + 0x418) = *(long *)(this + 0x418) + 0x1c;
        uVar8 = IGAccelTask::getScratchGPUVirtualAddress
                          (*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150));
        puVar14 = *(undefined8 **)(this + 0x418);
        *puVar14 = 0x101050217a000004;
        *(uint *)(puVar14 + 1) = (uint)uVar8 & 0xfffffffc;
        *(int *)((long)puVar14 + 0xc) = (int)((ulong)uVar8 >> 0x20);
        puVar14[2] = 0;
        puVar14[5] = 0;
        puVar14[4] = 0;
        puVar14[3] = 0x10004187a000004;
        *(undefined8 **)(this + 0x418) = puVar14 + 6;
        lVar6 = IOAccelResource2::getStorageResource();
        iVar16 = (int)local_40;
        uVar13 = (uint)local_48;
        if ((iVar16 == 0) && (*(char *)(*(long *)(this + 0x88) + 0x1474) != '\0')) {
          local_50 = lVar6;
          if ((*(int *)(lVar6 + 0x1c0) == 0) || (*(char *)(*(long *)(this + 0x88) + 0xf24) != '\0'))
          {
            uVar15 = displayReadRegister32(this,0x70180);
            iVar16 = (int)local_40;
            uVar13 = (uint)local_48;
            lVar6 = local_50;
            if (((uVar15 >> 0xf & 1) != 0) && (uVar15 = uVar15 & 0xffff7fff, uVar15 != 0)) {
              local_64 = 0;
              if (this[0x6429] == (IGAccelDisplayPipe)0x0) {
                plVar11 = (long *)IOAccelDisplayPipe::getFramebuffer();
                (**(code **)(*plVar11 + 0x6b8))
                          (plVar11,_fSymFBCLASSGetDisplayWaterMarkValues,1,this + 0x6428,&local_64,0
                           ,0);
                uVar13 = (uint)local_48;
                iVar16 = (int)local_40;
                this[0x6429] = (IGAccelDisplayPipe)0x1;
              }
              lVar18 = 0x7024011000001;
              lVar6 = 0;
              do {
                if (this[lVar6 * 8 + 0x646c] != (IGAccelDisplayPipe)0x0) {
                  uVar12 = *(undefined4 *)(this + lVar6 * 8 + 0x6470);
                  plVar11 = *(long **)(this + 0x418);
                  *plVar11 = lVar18;
                  *(undefined4 *)(plVar11 + 1) = uVar12;
                  *(long *)(this + 0x418) = (long)plVar11 + 0xc;
                  if ((*(uint *)(*(long *)(this + 0x88) + 0xf8a) >> 0x1d & 1) != 0) {
                    *(long *)((long)plVar11 + 0xc) = lVar18;
                    *(undefined4 *)((long)plVar11 + 0x14) = uVar12;
                    *(long **)(this + 0x418) = plVar11 + 3;
                  }
                }
                lVar6 = lVar6 + 1;
                lVar18 = lVar18 + 0x400000000;
              } while (lVar6 != 8);
              puVar14 = *(undefined8 **)(this + 0x418);
              *puVar14 = 0x7018011000001;
              *(uint *)(puVar14 + 1) = uVar15;
              *(long *)(this + 0x418) = (long)puVar14 + 0xc;
              bVar20 = 1;
              lVar6 = local_50;
              if ((*(uint *)(*(long *)(this + 0x88) + 0xf8a) >> 0x1d & 1) != 0) {
                *(undefined8 *)((long)puVar14 + 0xc) = 0x7018011000001;
                *(uint *)((long)puVar14 + 0x14) = uVar15;
                *(undefined8 **)(this + 0x418) = puVar14 + 3;
              }
            }
          }
          else {
            uVar15 = displayReadRegister32(this,0x70180);
            iVar16 = (int)local_40;
            uVar13 = (uint)local_48;
            if ((uVar15 >> 0xf & 1) == 0) {
              local_68 = 1;
              if (this[0x6428] == (IGAccelDisplayPipe)0x0) {
                plVar11 = (long *)IOAccelDisplayPipe::getFramebuffer();
                (**(code **)(*plVar11 + 0x6b8))
                          (plVar11,_fSymFBCLASSGetDisplayWaterMarkValues,1,this + 0x6428,&local_68,0
                           ,0);
                uVar13 = (uint)local_48;
                iVar16 = (int)local_40;
                this[0x6428] = (IGAccelDisplayPipe)0x1;
              }
              lVar18 = 0x7024011000001;
              lVar6 = 0;
              do {
                if (this[lVar6 * 8 + 0x642c] != (IGAccelDisplayPipe)0x0) {
                  uVar12 = *(undefined4 *)(this + lVar6 * 8 + 0x6430);
                  plVar11 = *(long **)(this + 0x418);
                  *plVar11 = lVar18;
                  *(undefined4 *)(plVar11 + 1) = uVar12;
                  *(long *)(this + 0x418) = (long)plVar11 + 0xc;
                  if ((*(uint *)(*(long *)(this + 0x88) + 0xf8a) >> 0x1d & 1) != 0) {
                    *(long *)((long)plVar11 + 0xc) = lVar18;
                    *(undefined4 *)((long)plVar11 + 0x14) = uVar12;
                    *(long **)(this + 0x418) = plVar11 + 3;
                  }
                }
                lVar6 = lVar6 + 1;
                lVar18 = lVar18 + 0x400000000;
              } while (lVar6 != 8);
              puVar3 = *(undefined8 **)(this + 0x418);
              *puVar3 = 0x7018011000001;
              *(uint *)(puVar3 + 1) = uVar15 | 0x8000;
              puVar14 = (undefined8 *)((long)puVar3 + 0xc);
              *(undefined8 **)(this + 0x418) = puVar14;
              bVar20 = 1;
              if ((*(uint *)(*(long *)(this + 0x88) + 0xf8a) >> 0x1d & 1) != 0) {
                *(undefined8 *)((long)puVar3 + 0xc) = 0x7018011000001;
                *(uint *)((long)puVar3 + 0x14) = uVar15 | 0x8000;
                puVar14 = puVar3 + 3;
              }
            }
            else {
              puVar14 = *(undefined8 **)(this + 0x418);
            }
            uVar15 = *(int *)(local_50 + 0x1c4) + 0x7fU >> 7 & 0x3ff |
                     *(uint *)(local_50 + 0x1c0) & 0xfffff000;
            *puVar14 = 0x701c011000001;
            *(uint *)(puVar14 + 1) = uVar15;
            *(long *)(this + 0x418) = (long)puVar14 + 0xc;
            if ((*(uint *)(*(long *)(this + 0x88) + 0xf8a) >> 0x1d & 1) != 0) {
              *(undefined8 *)((long)puVar14 + 0xc) = 0x701c011000001;
              *(uint *)((long)puVar14 + 0x14) = uVar15;
              *(undefined8 **)(this + 0x418) = puVar14 + 3;
            }
            *(undefined1 *)(local_50 + 0x220) = 3;
            *(byte *)(local_50 + 0x221) = *(byte *)(local_50 + 0x221) | 8;
            *(undefined4 *)(local_50 + 0x1cc) = *(undefined4 *)(local_50 + 400);
            lVar6 = local_50;
          }
        }
        uVar15 = ((uint)local_58 & 0x3ff) << 6;
        if (*(short *)(lVar6 + 0x194) == 2) {
          uVar15 = uVar15 | 1;
        }
        else if (*(short *)(lVar6 + 0x194) == 3) {
          uVar15 = uVar15 | 4;
        }
        uVar17 = uVar13 & 0xfffff000 | (uint)(bVar20 ^ 1);
        uVar13 = 0xa000201;
        if (iVar16 != 2) {
          uVar13 = (uint)(uVar4 == 1) << 8 | 0xa000001;
        }
        uVar13 = (uint)(bVar20 ^ 1) << 0x16 | uVar13;
        puVar2 = *(uint **)(this + 0x418);
        *puVar2 = uVar13;
        puVar2[1] = uVar15;
        puVar2[2] = uVar17;
        puVar2[3] = 0;
        *(uint **)(this + 0x418) = puVar2 + 4;
        lVar6 = *(long *)(this + 0x88);
        if ((*(byte *)(lVar6 + 0xf98) & 0x10) != 0 && bVar20 == 0) {
          puVar2[4] = uVar13;
          puVar2[5] = uVar15;
          puVar2[6] = uVar17;
          puVar2[7] = 0;
          *(uint **)(this + 0x418) = puVar2 + 8;
          lVar6 = *(long *)(this + 0x88);
        }
        uVar13 = *(uint *)(&planeSurfOffsetLive(unsigned_int)::val + uVar10 * 4);
        uVar10 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(lVar6 + 0x150));
        puVar19 = *(ulong **)(this + 0x418);
        puVar19[1] = (uVar10 >> 2 & 0x3fffffffffff) << 2;
        *puVar19 = (ulong)(uVar13 & 0x3fffffc) << 0x20 | 0x12000002;
        puVar19 = puVar19 + 2;
        *(ulong **)(this + 0x418) = puVar19;
        if ((*(uint *)(*(IntelAccelerator **)(this + 0x88) + 0x11c0) & 0x18000) == 0) {
          lVar6 = IntelAccelerator::synchronousCtxSwitch
                            (*(IntelAccelerator **)(this + 0x88),puVar19,1);
          puVar19 = (ulong *)(lVar6 * 4 + *(long *)(this + 0x418));
        }
        uVar12 = 0x1800000;
        if (uVar4 < 3) {
          uVar12 = *(undefined4 *)(&DAT_001146bc + local_40 * 4);
        }
        *(undefined4 *)puVar19 = uVar12;
        *(undefined4 *)((long)puVar19 + 4) = 0;
        puVar19 = puVar19 + 1;
        *(ulong **)(this + 0x418) = puVar19;
        this_01 = *(IntelAccelerator **)(this + 0x88);
        if ((*(uint *)(this_01 + 0x11c0) & 0x18000) == 0) {
          lVar6 = IntelAccelerator::synchronousCtxSwitch(this_01,puVar19,0);
          puVar19 = (ulong *)(lVar6 * 4 + *(long *)(this + 0x418));
          *(ulong **)(this + 0x418) = puVar19;
          this_01 = *(IntelAccelerator **)(this + 0x88);
        }
        uVar10 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(this_01 + 0x150));
        *puVar19 = 0x4405011000001;
        *(undefined4 *)(puVar19 + 1) = 0xb077efef;
        *(undefined8 *)((long)puVar19 + 0xc) = 0x4405012000002;
        *(ulong *)((long)puVar19 + 0x14) = (uVar10 >> 2 & 0x3fffffffffff) << 2;
        *(long *)(this + 0x418) = *(long *)(this + 0x418) + 0x1c;
        IntelAccelerator::dpsmKickTimer(*(IntelAccelerator **)(this + 0x88));
      }
    }
    submitCommands(this,(ulong)(byte)param_3[0x16] * 0x40 + *(long *)(param_3 + 0x38),local_60);
  }
  else {
    this[0x404] = (IGAccelDisplayPipe)0x1;
    lVar6 = *(long *)(*(long *)(*(long *)(this + 0x90) + 400) + 0xd8);
    (**(code **)(**(long **)(lVar6 + 0x20) + 0x148))();
    uVar8 = IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)lVar6);
    *(undefined8 *)(this + 0x418) = uVar8;
    *(undefined8 *)(this + 0x420) = uVar8;
    uVar8 = IGAccelTask::getScratchGPUVirtualAddress
                      (*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150));
    lVar6 = local_60;
    puVar14 = *(undefined8 **)(this + 0x418);
    *puVar14 = 0x101050217a000004;
    *(uint *)(puVar14 + 1) = (uint)uVar8 & 0xfffffffc;
    *(int *)((long)puVar14 + 0xc) = (int)((ulong)uVar8 >> 0x20);
    puVar14[2] = 0;
    puVar14[5] = 0;
    puVar14[4] = 0;
    puVar14[3] = 0x10004187a000004;
    *(undefined8 **)(this + 0x418) = puVar14 + 6;
    submitCommands(this,(ulong)(byte)param_3[0x16] * 0x40 + *(long *)(param_3 + 0x38),local_60);
    IOAccelDisplayPipe::submitFlipBufferTransaction
              ((IOAccelEvent *)this,(uint)lVar6,(IOAccelResource2 *)(ulong)param_2,param_3);
  }
  IGAccelTraceStreamManager::incFlipCount
            ((IGAccelTraceStreamManager *)(*(long *)(this + 0x88) + 0xe18));
  IGTelemetryUsage::frameCalcGPUBusy(*(long *)(this + 0x88),1);
  if (_graphicsTracePointEnable != 0) {
    IGAccelTask::getBlit3DContext(*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150),'\x01');
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      pIVar7 = IGAccelTask::getBlit3DContext
                         (*(IGAccelTask **)(*(long *)(this + 0x88) + 0x150),'\x01');
      _kernel_debug(0x85a00049,0,(ulong)*(uint *)(*(long *)(pIVar7 + 0xb0) + 0x178),1,0,0);
    }
  }
  return;
}



// IGAccelDisplayPipe::beginCommands()

void __thiscall IGAccelDisplayPipe::beginCommands(IGAccelDisplayPipe *this)

{
  long lVar1;
  undefined8 uVar2;
  
  lVar1 = *(long *)(*(long *)(*(long *)(this + 0x90) + 400) + 0xd8);
  (**(code **)(**(long **)(lVar1 + 0x20) + 0x148))();
  uVar2 = IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)lVar1);
  *(undefined8 *)(this + 0x418) = uVar2;
  *(undefined8 *)(this + 0x420) = uVar2;
  return;
}



// IGAccelDisplayPipe::submitCommands(IOAccelEvent*, IOAccelEvent*)

void __thiscall
IGAccelDisplayPipe::submitCommands(IGAccelDisplayPipe *this,long param_1,long param_2)

{
  long *plVar1;
  undefined4 uVar2;
  char cVar3;
  long *plVar4;
  uint *puVar5;
  undefined8 local_88;
  undefined8 local_80;
  undefined8 local_78;
  undefined8 local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  uint *local_48;
  long local_40;
  undefined4 local_34;
  
  puVar5 = *(uint **)(*(long *)(*(long *)(this + 0x90) + 400) + 0xd8);
  plVar1 = *(long **)(puVar5 + 8);
  if ((param_1 != 0) && ((*(ulong *)(&DAT_000011c0 + *(long *)(this + 0x88)) & 0x18000) == 0)) {
    local_48 = puVar5;
    local_40 = param_2;
    plVar4 = (long *)IOAccelDisplayPipe::getEventMachine();
    local_34 = (undefined4)plVar1[4];
    local_50 = 0;
    local_58 = 0;
    local_60 = 0;
    local_68 = 0;
    local_70 = 0;
    local_78 = 0;
    local_80 = 0;
    local_88 = 0;
    (**(code **)(*plVar4 + 0x140))(plVar4,&local_88);
    uVar2 = local_34;
    cVar3 = (**(code **)(*plVar4 + 0x1c0))(plVar4,param_1,&local_88,local_34);
    param_2 = local_40;
    puVar5 = local_48;
    if ((cVar3 == '\0') &&
       (cVar3 = (**(code **)(*plVar4 + 0x1f0))(plVar4,0,&local_88,plVar1,uVar2), param_2 = local_40,
       puVar5 = local_48, cVar3 == '\0')) {
      (**(code **)(*plVar4 + 0x188))(plVar4,&local_88);
      param_2 = local_40;
      puVar5 = local_48;
    }
  }
  IOAccelCommandBufferPool2::setBufferPtr(puVar5);
  if (param_2 != 0) {
    (**(code **)(*plVar1 + 0x140))(plVar1,param_2);
  }
  (**(code **)(*plVar1 + 0x140))(plVar1,&DAT_000011d8 + *(long *)(this + 0x88));
  IOAccelCommandBufferPool2::submitBuffer();
  *(undefined8 *)(this + 0x418) = 0;
  *(undefined8 *)(this + 0x420) = 0;
  return;
}



// IGAccelDisplayPipe::exitPSR(unsigned long long, bool*)

void __thiscall
IGAccelDisplayPipe::exitPSR(IGAccelDisplayPipe *this,undefined8 param_1,long param_2)

{
  long *plVar1;
  undefined8 local_48;
  undefined4 local_3c;
  int local_38;
  undefined1 local_31;
  
  local_38 = 0;
  local_31 = 1;
  local_3c = *(undefined4 *)(this + 0x40c);
  local_48 = param_1;
  plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
  (**(code **)(*plVar1 + 0x6b8))
            (plVar1,_fSymFBCLASSExitPsr,0,&local_38,&local_48,&local_3c,&local_31);
  if (param_2 != 0) {
    *(bool *)param_2 = local_38 != 0;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x0007e955)
// WARNING: Removing unreachable block (ram,0x0007e949)
// WARNING: Removing unreachable block (ram,0x0007e93d)
// WARNING: Removing unreachable block (ram,0x0007e931)
// WARNING: Removing unreachable block (ram,0x0007e925)
// WARNING: Removing unreachable block (ram,0x0007e919)
// WARNING: Removing unreachable block (ram,0x0007e90d)
// WARNING: Removing unreachable block (ram,0x0007e901)
// WARNING: Removing unreachable block (ram,0x0007e8f5)
// WARNING: Removing unreachable block (ram,0x0007e8e9)
// WARNING: Removing unreachable block (ram,0x0007e8dd)
// WARNING: Removing unreachable block (ram,0x0007e83d)
// WARNING: Removing unreachable block (ram,0x0007e83f)
// WARNING: Removing unreachable block (ram,0x0007e849)
// WARNING: Removing unreachable block (ram,0x0007e84b)
// WARNING: Removing unreachable block (ram,0x0007e851)
// WARNING: Removing unreachable block (ram,0x0007e853)
// WARNING: Removing unreachable block (ram,0x0007e85d)
// WARNING: Removing unreachable block (ram,0x0007e85f)
// WARNING: Removing unreachable block (ram,0x0007e865)
// WARNING: Removing unreachable block (ram,0x0007e867)
// WARNING: Removing unreachable block (ram,0x0007e870)
// WARNING: Removing unreachable block (ram,0x0007e872)
// WARNING: Removing unreachable block (ram,0x0007e87c)
// WARNING: Removing unreachable block (ram,0x0007e87e)
// WARNING: Removing unreachable block (ram,0x0007e884)
// WARNING: Removing unreachable block (ram,0x0007e886)
// WARNING: Removing unreachable block (ram,0x0007e890)
// WARNING: Removing unreachable block (ram,0x0007e892)
// WARNING: Removing unreachable block (ram,0x0007e898)
// WARNING: Removing unreachable block (ram,0x0007e89a)
// WARNING: Removing unreachable block (ram,0x0007e8d9)
// WARNING: Removing unreachable block (ram,0x0007e8e5)
// WARNING: Removing unreachable block (ram,0x0007e8f1)
// WARNING: Removing unreachable block (ram,0x0007e8fd)
// WARNING: Removing unreachable block (ram,0x0007e909)
// WARNING: Removing unreachable block (ram,0x0007e915)
// WARNING: Removing unreachable block (ram,0x0007e921)
// WARNING: Removing unreachable block (ram,0x0007e92d)
// WARNING: Removing unreachable block (ram,0x0007e939)
// WARNING: Removing unreachable block (ram,0x0007e945)
// WARNING: Removing unreachable block (ram,0x0007e951)
// WARNING: Removing unreachable block (ram,0x0007e8a4)
// WARNING: Removing unreachable block (ram,0x0007e8a6)
// WARNING: Removing unreachable block (ram,0x0007e8b5)
// WARNING: Removing unreachable block (ram,0x0007e8cd)
// WARNING: Removing unreachable block (ram,0x0007e8d1)
// IGAccelDisplayPipe::DecodeTransaction(IOAccelDisplayPipeTransaction2*, unsigned long long*,
// unsigned int*)

ulong __thiscall
IGAccelDisplayPipe::DecodeTransaction
          (IGAccelDisplayPipe *this,uint param_2_00,ulong *param_2,int *param_3)

{
  int iVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  uint uVar5;
  bool bVar6;
  
  uVar2 = *param_2;
  uVar5 = (uint)uVar2;
  *param_2 = (ulong)(uVar5 & 0x6ff);
  if ((uVar2 & 0x40) == 0) {
    if ((uVar2 & 0x10) == 0) {
      if ((uVar5 >> 9 & 1) == 0) {
        if ((uVar2 & 3) == 0) {
          if ((uVar2 & 0xa0) == 0) {
            if ((uVar5 >> 10 & 1) == 0) {
              bVar6 = (uVar2 & 0xc) == 0;
              uVar2 = 7;
              if (bVar6) {
                uVar2 = (ulong)(uVar5 & 0xc);
              }
              uVar4 = (ulong)-(uint)bVar6 | 0xfffffffffffffff3;
            }
            else {
              uVar4 = 0xfffffffffffffbff;
              uVar2 = 0xe;
            }
          }
          else {
            lVar3 = IOAccelDisplayPipeTransaction2::getPipePreGammaTable();
            if (((lVar3 == 0) ||
                (iVar1 = IOAccelDisplayPipeGammaTable2::getTableCount(), iVar1 == 0)) &&
               ((lVar3 = IOAccelDisplayPipeTransaction2::getPipePostGammaTable(), lVar3 == 0 ||
                (iVar1 = IOAccelDisplayPipeGammaTable2::getTableCount(), iVar1 == 0)))) {
              uVar4 = 0xffffffffffffff5f;
              uVar2 = 6;
            }
            else {
              uVar4 = 0xffffffffffffff5f;
              uVar2 = 5;
            }
          }
        }
        else {
          *param_3 = (*(char *)(*(long *)(this + 0x88) + 0xf34) == '\0') + 1;
          if ((int)(uVar2 & 3) == 3) {
            uVar2 = IOAccelDisplayPipeTransaction2::getPlaneResource(param_2_00,1);
          }
          else {
            uVar2 = (ulong)(uVar5 & 2);
          }
          uVar2 = 2 - (ulong)(uVar2 == 0);
          uVar4 = 0xfffffffffffffffc;
        }
      }
      else {
        uVar4 = 0xfffffffffffffdff;
        uVar2 = 0xd;
      }
    }
    else {
      uVar4 = 0xffffffffffffffef;
      uVar2 = 0;
    }
  }
  else {
    IOAccelDisplayPipeTransaction2::getPipeColorMatrix();
    uVar2 = 0xf;
    uVar4 = 0xffffffffffffffbf;
  }
  *param_2 = *param_2 & uVar4;
  return uVar2;
}



// IGAccelDisplayPipe::validateTransaction(IOAccelDisplayPipeTransaction2*)

uint __thiscall IGAccelDisplayPipe::validateTransaction(IGAccelDisplayPipe *this,long param_1)

{
  IGAccelResource IVar1;
  uint uVar2;
  long *plVar3;
  IGAccelResource *pIVar4;
  ulong uVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  ulong local_50;
  ulong local_48;
  uint local_3c;
  long local_38;
  
  plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
  local_48 = 0;
  local_3c = 0;
  uVar2 = 0xe00002bc;
  if ((param_1 != 0) && (plVar3 != (long *)0x0)) {
    local_38 = param_1;
    local_50 = IOAccelDisplayPipeTransaction2::getTransactionDirtyBits();
    uVar2 = 0;
    do {
      local_48 = DecodeTransaction(this,(uint)local_38,&local_50,(int *)&local_3c);
      if ((local_48 < 0xf) && ((0x6006UL >> (local_48 & 0x3f) & 1) != 0)) {
        uVar2 = (**(code **)(*plVar3 + 0x6b8))
                          (plVar3,_fSymFBCLASSValidateTransaction,1,local_38,&local_48,0,0);
        uVar7 = local_3c;
        if (uVar2 != 0) {
          return uVar2;
        }
        uVar8 = 0;
        uVar2 = 0;
        if (((((1 < local_48 - 0xd) &&
              (uVar2 = uVar8, ((&DAT_000011c4)[*(long *)(this + 0x88)] & 2) != 0)) &&
             (((byte)this[0x36e] & 0x40) == 0)) &&
            ((((byte)*(uint *)(this + 0x368) & 0xf0) == 0x50 ||
             ((*(uint *)(this + 0x368) & 0xf0) == 0x30)))) && (local_3c != 0)) {
          uVar8 = 0;
          uVar2 = 0;
          do {
            pIVar4 = (IGAccelResource *)
                     IOAccelDisplayPipeTransaction2::getPlaneResource((uint)local_38,uVar8);
            if (pIVar4 != (IGAccelResource *)0x0) {
              if (*(long **)(pIVar4 + 0x248) == (long *)0x0) {
                uVar5 = IGAccelResource::createAndPrepareRotationMapping(pIVar4);
                if ((char)uVar5 == '\0') {
                  uVar2 = 0xe0000001;
                }
              }
              else {
                IVar1 = (IGAccelResource)(**(code **)(**(long **)(pIVar4 + 0x248) + 0x138))();
                pIVar4[0x250] = IVar1;
                if (IVar1 == (IGAccelResource)0x0) {
                  uVar2 = 0xe0000001;
                }
              }
            }
            uVar8 = uVar8 + 1;
          } while (uVar7 != uVar8);
        }
      }
    } while (local_50 != 0);
    if (((uVar2 == 0) && (uVar2 = 0, *(char *)(*(long *)(this + 0x88) + 0xf34) != '\0')) &&
       (*(int *)(this + 0x40c) == 0)) {
      uVar5 = IOAccelDisplayPipeTransaction2::getTransactionDirtyBits();
      uVar2 = 0xffff;
      if ((uVar5 & 1) != 0) {
        uVar2 = 0;
      }
      uVar7 = 1;
      if ((uVar5 & 2) == 0) {
        uVar7 = uVar2;
      }
      uVar2 = 0;
      if (((uVar5 & 3) != 0) && (uVar2 = 0, *(char *)(*(long *)(this + 0x88) + 0x1474) == '\0')) {
        uVar2 = 0;
        pIVar4 = (IGAccelResource *)
                 IOAccelDisplayPipeTransaction2::getPlaneResource((uint)local_38,uVar7);
        if ((pIVar4 != (IGAccelResource *)0x0) &&
           (lVar6 = IOAccelResource2::getStorageResource(), 1 < *(byte *)(lVar6 + 0x220))) {
          uVar2 = 0;
          IGAccelResource::submitCCSResolve
                    (pIVar4,lVar6 + 0x180,*(IntelAccelerator **)(this + 0x88),
                     *(IGAccelTask **)(*(IntelAccelerator **)(this + 0x88) + 0x150),0,3,0,1,
                     (IGAccelResource *)0x0);
          *(undefined1 *)(lVar6 + 0x220) = 1;
          *(byte *)(lVar6 + 0x221) = *(byte *)(lVar6 + 0x221) & 0xfb;
          *(undefined1 *)(*(long *)(this + 0x88) + 0xf26) = 1;
        }
      }
    }
  }
  return uVar2;
}



// IGAccelDisplayPipe::beginTransaction(IOAccelEvent*)

void __thiscall IGAccelDisplayPipe::beginTransaction(IGAccelDisplayPipe *this,undefined8 param_1)

{
  long *plVar1;
  
  plVar1 = (long *)IOAccelDisplayPipe::getEventMachine();
  (**(code **)(*plVar1 + 0x1d8))(plVar1,*(undefined4 *)(this + 0x328));
  plVar1 = (long *)IOAccelDisplayPipe::getEventMachine();
  (**(code **)(*plVar1 + 0x1d0))(plVar1,*(undefined4 *)(this + 0x328),param_1);
  this[0x412] = (IGAccelDisplayPipe)0x1;
  return;
}



// IGAccelDisplayPipe::signalTransactionComplete(IOAccelEvent*)

void __thiscall
IGAccelDisplayPipe::signalTransactionComplete(IGAccelDisplayPipe *this,undefined8 param_1)

{
  long *plVar1;
  undefined8 local_28;
  
  local_28 = 0;
  plVar1 = (long *)IOAccelDisplayPipe::getEventMachine();
  (**(code **)(*plVar1 + 0x1e8))(plVar1,*(undefined4 *)(this + 0x328),0,param_1,&local_28);
  IntelAccelerator::signalDisplayStampUpdate
            (*(IntelAccelerator **)(this + 0x88),*(int *)(this + 0x328),local_28._4_4_);
  return;
}



// IGAccelDisplayPipe::submitTransaction(IOAccelDisplayPipeTransaction2*)

void __thiscall IGAccelDisplayPipe::submitTransaction(IGAccelDisplayPipe *this,undefined8 param_1)

{
  undefined8 in_RAX;
  long *plVar1;
  undefined8 local_28;
  
  local_28 = in_RAX;
  if (this[0x412] != (IGAccelDisplayPipe)0x0) {
    local_28 = 0;
    plVar1 = (long *)IOAccelDisplayPipe::getEventMachine();
    (**(code **)(*plVar1 + 0x1e0))(plVar1,*(undefined4 *)(this + 0x328),0,&local_28);
    this[0x412] = (IGAccelDisplayPipe)0x1;
  }
  (**(code **)(__got::vtable + 0x8c8))(this,param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl
// IGAccelDisplayPipe::performTransaction(IOAccelDisplayPipeTransaction2*)

int __cdecl
IGAccelDisplayPipe::performTransaction
          (undefined8 param_1,undefined8 param_2,IGAccelDisplayPipe *param_3,undefined8 param_4)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  ulong uVar5;
  IGAccelResource *pIVar6;
  long lVar7;
  undefined8 uVar8;
  long *plVar9;
  OSMetaClassBase *pOVar10;
  long *plVar11;
  uint uVar12;
  ulong *puVar13;
  ulong *puVar14;
  ulong uVar15;
  byte *pbVar16;
  ulong local_188;
  undefined1 local_158 [8];
  undefined8 local_150;
  char local_148;
  undefined4 local_144;
  undefined4 local_140;
  undefined8 local_13c;
  undefined8 local_134;
  undefined8 local_12c;
  undefined8 local_124;
  uint local_11c;
  byte local_118;
  undefined1 local_117;
  undefined4 local_114;
  uint local_110;
  uint local_10c;
  uint local_108;
  undefined4 local_104;
  undefined8 local_100;
  OSMetaClass *local_a0;
  ulong local_98 [8];
  long *local_58;
  IGAccelResource *local_50;
  long *local_48;
  int local_3c;
  uint local_38;
  undefined1 local_32;
  byte local_31;
  
  local_98[6] = 0;
  local_58 = (long *)IOAccelDisplayPipe::getFramebuffer();
  ___bzero(local_158,0xb8);
  local_31 = 0;
  local_3c = 0;
  local_32 = 0;
  uVar5 = IOAccelDisplayPipeTransaction2::getTransactionDirtyBits();
  local_a0 = *(OSMetaClass **)__got::metaClass;
  local_38 = 0;
  local_98[7] = uVar5;
LAB_0007ee4f:
  uVar15 = uVar5;
LAB_0007ee53:
  if ((param_3[0x64ac] != (IGAccelDisplayPipe)0x0) &&
     (iVar2 = IOAccelDisplayPipeTransaction2::getTransactionID(),
     iVar2 == *(int *)(param_3 + 0x64b0))) {
    uVar15 = uVar15 & *(ulong *)(param_3 + 0x64b8);
    local_98[7] = uVar15;
  }
  uVar12 = (uint)param_4;
  local_98[6] = DecodeTransaction(param_3,uVar12,local_98 + 7,&local_3c);
  uVar5 = local_98[7];
  if (local_98[7] == 0) {
    local_31 = 1;
  }
  switch(local_98[6]) {
  case 1:
    goto switchD_0007eeb5_caseD_1;
  case 2:
    uVar3 = 1;
    goto LAB_0007efc5;
  default:
    goto switchD_0007eeb5_caseD_3;
  case 5:
  case 6:
    uVar8 = PerformGammaTransaction(param_3,param_4,local_98[6],(uint)local_31);
    iVar2 = (int)uVar8;
    goto LAB_0007f308;
  case 7:
  case 8:
  case 0xd:
    local_32 = local_98[6] == 0xd;
    lVar7 = *local_58;
    pbVar16 = (byte *)0x0;
    puVar13 = (ulong *)&local_31;
    puVar14 = (ulong *)&local_32;
    uVar8 = _fSymFBCLASSPerformPlaneGammaTransaction;
    break;
  case 9:
  case 10:
    local_98[5] = 0;
    local_98[4] = 0;
    local_98[3] = 0;
    local_98[2] = 0;
    local_98[1] = 0;
    local_98[0] = 0;
    IOAccelDisplayPipeTransaction2::getPipeColorMatrix();
    local_98[0] = local_188;
    lVar7 = *local_58;
    pbVar16 = &local_31;
    puVar13 = local_98;
    puVar14 = local_98 + 6;
    uVar8 = _fSymFBCLASSPerformCscTransaction;
    break;
  case 0xe:
    uVar8 = PerformPQTransaction(param_3,param_4,&switchD_0007eeb5::switchdataD_0007f37c,local_31);
    iVar2 = (int)uVar8;
    goto LAB_0007f308;
  }
  iVar2 = (**(code **)(lVar7 + 0x6b8))(local_58,uVar8,0,param_4,puVar13,puVar14,pbVar16);
  goto LAB_0007f308;
switchD_0007eeb5_caseD_3:
  uVar15 = local_98[7];
  if (local_98[7] == 0) {
    iVar2 = 0;
    goto LAB_0007f34a;
  }
  goto LAB_0007ee53;
switchD_0007eeb5_caseD_1:
  uVar3 = local_38;
LAB_0007efc5:
  ___bzero(local_158,0xb8);
  local_3c = 1;
  local_38 = uVar3;
  pIVar6 = (IGAccelResource *)IOAccelDisplayPipeTransaction2::getPlaneResource(uVar12,uVar3);
  if (pIVar6 != (IGAccelResource *)0x0) {
    local_158[0] = 1;
    lVar7 = *(long *)(pIVar6 + 0xb8);
    if (lVar7 == 0) {
      lVar7 = *(long *)(pIVar6 + 0xc0);
    }
    local_140 = (undefined4)lVar7;
    local_50 = pIVar6;
    local_13c = IOAccelDisplayPipeTransaction2::getPlaneSrcRect(uVar12);
    local_134 = param_2;
    local_12c = IOAccelDisplayPipeTransaction2::getPlaneDstRect(uVar12);
    local_124 = param_2;
    local_11c = IOAccelDisplayPipeTransaction2::getTransactionOptions();
    local_104 = IOAccelDisplayPipeTransaction2::getPlaneTransactionOptions(uVar12);
    local_118 = local_31;
    local_117 = 0;
    local_114 = 0x42475241;
    lVar7 = IOAccelResource2::getStorageResource();
    local_10c = (uint)(*(short *)(lVar7 + 0x194) != 2);
    uVar3 = *(uint *)(param_3 + 0x368) >> 4 & 0xf;
    if ((((uVar3 != 5) && (uVar3 != 3)) || (((byte)param_3[0x36e] & 0x40) != 0)) ||
       (plVar9 = *(long **)(local_50 + 0x248), plVar9 == (long *)0x0)) {
      plVar9 = *(long **)(local_50 + 0x40);
    }
    local_150 = (**(code **)(*plVar9 + 0x128))();
    lVar7 = IOAccelResource2::getStorageResource();
    local_110 = (uint)(*(int *)(lVar7 + 400) == 0xd1);
    if (*(int *)(lVar7 + 400) == 0x84) {
      local_110 = 2;
    }
    if (*(int *)(param_3 + 0x40c) == 0) {
      if (1 < *(byte *)(lVar7 + 0x220)) {
        local_148 = '\x01';
        local_144 = *(undefined4 *)(lVar7 + 0x1c0);
        local_108 = *(int *)(lVar7 + 0x1c4) + 0x7fU >> 7;
      }
      lVar7 = *(long *)(param_3 + 0x88);
      if ((*(char *)(lVar7 + 0xf2c) != local_148) || (*(char *)(lVar7 + 0xf26) != '\0')) {
        local_11c = local_11c | 1;
        *(char *)(lVar7 + 0xf2c) = local_148;
      }
    }
    else {
      lVar7 = *(long *)(param_3 + 0x88);
    }
    if ((*(char *)(lVar7 + 0xf34) == '\0') && (param_3[0x404] == (IGAccelDisplayPipe)0x0)) {
      local_11c = local_11c | 0x40000000;
    }
    plVar9 = (long *)IOAccelDisplayPipeTransaction2::getPlaneIOSurface(uVar12,local_38);
    if (plVar9 != (long *)0x0) {
      iVar2 = IOSurface::getYCbCrMatrix();
      if (iVar2 == 0) {
        local_98[0] = local_98[0] & 0xffffffff00000000;
        pOVar10 = (OSMetaClassBase *)
                  IOSurface::copyValue((char *)plVar9,(uint *)"IOSurfaceYCbCrMatrix");
        plVar11 = (long *)OSMetaClassBase::safeMetaCast(pOVar10,local_a0);
        if (plVar11 != (long *)0x0) {
          local_48 = plVar11;
          cVar1 = (**(code **)(*plVar11 + 0x158))(plVar11,"ITU_R_709_2");
          if (cVar1 != '\0') {
            local_117 = 1;
          }
          (**(code **)(*local_48 + 0x28))();
        }
      }
      else {
        iVar2 = IOSurface::getYCbCrMatrix();
        if (iVar2 == 1) {
          local_117 = 1;
        }
      }
      local_114 = IOSurface::getPixelFormat();
      iVar2 = IOSurface::getPixelFormat();
      if ((iVar2 == 0x34323076) || (iVar2 = IOSurface::getPixelFormat(), iVar2 == 0x78343230)) {
        local_48 = plVar9;
        local_144 = IGAccelResource::getIOSurfacePlaneOffset(local_50,1);
        lVar7 = IOAccelResource2::getStorageResource();
        local_10c = (uint)(*(short *)(lVar7 + 0x194) != 2);
      }
      local_100 = IOSurface::getProtectionOptions();
    }
  }
  iVar2 = (**(code **)(*local_58 + 0x6b8))
                    (local_58,_fSymFBCLASSPerformFlipTransaction,0,param_4,local_98 + 6,local_158,0)
  ;
  IGAccelTraceStreamManager::incFlipCount
            ((IGAccelTraceStreamManager *)(*(long *)(param_3 + 0x88) + 0xe18));
LAB_0007f308:
  if ((uVar5 == 0) || (iVar2 != 0)) {
    if (iVar2 == -0x1ffffd28) {
      param_3[0x64ac] = (IGAccelDisplayPipe)0x1;
      *(ulong *)(param_3 + 0x64b8) = uVar15 & 0xff;
      uVar4 = IOAccelDisplayPipeTransaction2::getTransactionID();
      *(undefined4 *)(param_3 + 0x64b0) = uVar4;
      iVar2 = -0x1ffffd28;
    }
    else {
LAB_0007f34a:
      param_3[0x64ac] = (IGAccelDisplayPipe)0x0;
      *(undefined4 *)(param_3 + 0x64b0) = 0;
      *(undefined8 *)(param_3 + 0x64b8) = 0;
    }
    return iVar2;
  }
  goto LAB_0007ee4f;
}



// IGAccelDisplayPipe::PerformGammaTransaction(IOAccelDisplayPipeTransaction2*, unsigned long long,
// bool)

undefined8 __thiscall
IGAccelDisplayPipe::PerformGammaTransaction
          (IGAccelDisplayPipe *this,undefined8 param_1,undefined8 param_2,undefined4 param_3)

{
  uint uVar1;
  uint uVar2;
  long *plVar3;
  ulong uVar4;
  long lVar5;
  undefined8 uVar6;
  IGAccelDisplayPipe *pIVar7;
  IGAccelDisplayPipe *local_80;
  undefined8 local_78;
  IGAccelDisplayPipe *local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  undefined8 local_50;
  long *local_48;
  IGAccelDisplayPipe *local_40;
  undefined4 local_34;
  
  local_40 = this;
  plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
  local_58 = 0;
  local_60 = 0;
  local_68 = 0;
  local_70 = (IGAccelDisplayPipe *)0x0;
  local_78 = 0;
  local_80 = (IGAccelDisplayPipe *)0x0;
  uVar4 = IOAccelDisplayPipeTransaction2::getTransactionDirtyBits();
  uVar1 = 0x400;
  local_50 = param_2;
  if (((uVar4 & 0x20) != 0) &&
     (lVar5 = IOAccelDisplayPipeTransaction2::getPipePreGammaTable(), lVar5 != 0)) {
    uVar1 = IOAccelDisplayPipeGammaTable2::getTableCount();
    local_78 = CONCAT44(local_78._4_4_,uVar1);
    if (0x200 < uVar1) {
      return 0xe00002c2;
    }
    local_48 = plVar3;
    local_34 = param_3;
    if (uVar1 != 0) {
      pIVar7 = local_40 + 0x428;
      uVar4 = 0;
      do {
        IOAccelDisplayPipeGammaTable2::getTableEntry
                  ((uint)lVar5,(float *)(uVar4 & 0xffffffff),(float *)pIVar7,(float *)(pIVar7 + 4));
        uVar4 = uVar4 + 1;
        pIVar7 = pIVar7 + 0xc;
      } while (uVar1 != uVar4);
    }
    local_80 = local_40 + 0x428;
    uVar1 = 0x200;
    plVar3 = local_48;
    param_3 = local_34;
  }
  lVar5 = IOAccelDisplayPipeTransaction2::getPipePostGammaTable();
  if (lVar5 != 0) {
    uVar2 = IOAccelDisplayPipeGammaTable2::getTableCount();
    local_68 = CONCAT44(local_68._4_4_,uVar2);
    if (uVar1 < uVar2) {
      return 0xe00002c2;
    }
    local_48 = plVar3;
    local_34 = param_3;
    if (uVar2 != 0) {
      pIVar7 = local_40 + 0x3428;
      uVar4 = 0;
      do {
        IOAccelDisplayPipeGammaTable2::getTableEntry
                  ((uint)lVar5,(float *)(uVar4 & 0xffffffff),(float *)pIVar7,(float *)(pIVar7 + 4));
        uVar4 = uVar4 + 1;
        pIVar7 = pIVar7 + 0xc;
      } while (uVar2 != uVar4);
    }
    local_70 = local_40 + 0x3428;
    plVar3 = local_48;
    param_3 = local_34;
  }
  local_60 = local_50;
  local_58 = CONCAT71(local_58._1_7_,(char)param_3);
  uVar6 = (**(code **)(*plVar3 + 0x6b8))
                    (plVar3,_fSymFBCLASSPerformGammaTransaction,0,param_1,&local_80,0,0);
  return uVar6;
}



// IGAccelDisplayPipe::PerformPQTransaction(IOAccelDisplayPipeTransaction2*, unsigned long long,
// bool)

undefined8 __thiscall
IGAccelDisplayPipe::PerformPQTransaction
          (IGAccelDisplayPipe *this,undefined8 param_1,undefined8 param_2,undefined1 param_3)

{
  code *pcVar1;
  undefined8 in_RAX;
  long lVar2;
  long *plVar3;
  long lVar4;
  undefined8 uVar5;
  void *pvVar6;
  undefined1 local_20d8 [8360];
  undefined8 uStack_30;
  undefined8 uStack_28;
  
  uStack_30 = 0x7f576;
  uStack_28 = in_RAX;
  lVar2 = ___chkstk_darwin();
  lVar2 = -lVar2;
  uStack_28 = CONCAT17(param_3,(undefined7)uStack_28);
  *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f585;
  plVar3 = (long *)IOAccelDisplayPipe::getFramebuffer();
  *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f590;
  IOAccelDisplayPipeTransaction2::getPipePostCSCGammaVID();
  *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f598;
  lVar4 = IOAccelDisplayPipePostCSCGammaVID::getSize();
  uVar5 = 0xe00002c2;
  if (lVar4 == 0x20b0) {
    *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f5b1;
    IOAccelDisplayPipeTransaction2::getPipePostCSCGammaVID();
    *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f5b9;
    pvVar6 = (void *)IOAccelDisplayPipePostCSCGammaVID::getData();
    *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f5d0;
    _memmove(local_20d8,pvVar6,0x20b0);
    lVar4 = *plVar3;
    *(undefined8 *)(&stack0xffffffffffffffe0 + lVar2) = 0;
    pcVar1 = *(code **)(lVar4 + 0x6b8);
    *(undefined8 *)((long)&uStack_28 + lVar2) = 0x7f5fa;
    uVar5 = (*pcVar1)(plVar3,_fSymFBCLASSPerformPQTransaction,0,param_1,local_20d8,
                      (long)&uStack_28 + 7);
  }
  return uVar5;
}



// IGAccelDisplayPipe::isTransactionComplete(IOAccelDisplayPipeTransaction2*)

bool __thiscall
IGAccelDisplayPipe::isTransactionComplete(IGAccelDisplayPipe *this,undefined8 param_1)

{
  long *plVar1;
  int local_1c;
  
  local_1c = 0;
  plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
  (**(code **)(*plVar1 + 0x6b8))(plVar1,_fSymFBCLASSIsTransactionComplete,0,&local_1c,param_1,0,0);
  return local_1c == -1;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::planeSurfOffsetLive(unsigned int)

undefined4 __cdecl IGAccelDisplayPipe::planeSurfOffsetLive(uint param_1)

{
  return *(undefined4 *)(&planeSurfOffsetLive(unsigned_int)::val + (ulong)param_1 * 4);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelDisplayPipe::planeSurfOffset(unsigned int)

undefined4 __cdecl IGAccelDisplayPipe::planeSurfOffset(uint param_1)

{
  return *(undefined4 *)(&planeSurfOffset(unsigned_int)::val + (ulong)param_1 * 4);
}



// IGAccelDisplayPipe::logTransactionTimeoutDiagnosisReport()

void __thiscall IGAccelDisplayPipe::logTransactionTimeoutDiagnosisReport(IGAccelDisplayPipe *this)

{
  long *plVar1;
  
  plVar1 = (long *)IOAccelDisplayPipe::getFramebuffer();
  (**(code **)(*plVar1 + 0x6b8))(plVar1,_fSymFBCLASSLogTransactionTimeout,0,0,0,0,0);
                    // WARNING: Could not recover jumptable at 0x0007f6cb. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x938))(this);
  return;
}



// IGAccelDisplayMachine::MetaClass::~MetaClass()

void __thiscall IGAccelDisplayMachine::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelDisplayPipe::MetaClass::~MetaClass()

void __thiscall IGAccelDisplayPipe::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



void __GLOBAL__sub_I_IGAccelDisplayMachine_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelDisplayMachine::gMetaClass,"IGAccelDisplayMachine",
             (OSMetaClass *)__got::gMetaClass,0x198);
  IGAccelDisplayMachine::gMetaClass = &__const::~MetaClass;
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelDisplayPipe::gMetaClass,"IGAccelDisplayPipe",
             (OSMetaClass *)__got::gMetaClass,0x64c8);
  IGAccelDisplayPipe::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelDisplayPipe::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelDisplayMachine::gMetaClass);
  return;
}



// WARNING: Removing unreachable block (ram,0x0007f77e)

undefined8 ___chkstk_darwin(void)

{
  undefined8 in_RAX;
  
  ____chkstk_darwin();
  return in_RAX;
}



void ___chkstk_darwin_llvm_probe(void)

{
  ulong in_RAX;
  
  if (0xfff < in_RAX) {
    do {
      in_RAX = in_RAX - 0x1000;
    } while (0x1000 < in_RAX);
  }
  return;
}



// IGAccelSurface::MetaClass::MetaClass()

void __thiscall IGAccelSurface::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSurface",(OSMetaClass *)__got::gMetaClass,0x1338);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSurface::MetaClass::~MetaClass()

void __thiscall IGAccelSurface::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGAccelSurface::IGAccelSurface(OSMetaClass const*)

void __thiscall IGAccelSurface::IGAccelSurface(IGAccelSurface *this,OSMetaClass *param_1)

{
  IOAccelSurface::IOAccelSurface((IOAccelSurface *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSurface;
  return;
}



// IGAccelSurface::IGAccelSurface(OSMetaClass const*)

void __thiscall IGAccelSurface::IGAccelSurface(IGAccelSurface *this,OSMetaClass *param_1)

{
  IOAccelSurface::IOAccelSurface((IOAccelSurface *)this,param_1);
  *(undefined ***)this = &__const::~IGAccelSurface;
  return;
}



// IGAccelSurface::~IGAccelSurface()

void __thiscall IGAccelSurface::~IGAccelSurface(IGAccelSurface *this)

{
  IOAccelSurface::~IOAccelSurface((IOAccelSurface *)this);
  return;
}



// IGAccelSurface::~IGAccelSurface()

void __thiscall IGAccelSurface::~IGAccelSurface(IGAccelSurface *this)

{
  IOAccelSurface::~IOAccelSurface((IOAccelSurface *)this);
  return;
}



// IGAccelSurface::~IGAccelSurface()

void __thiscall IGAccelSurface::~IGAccelSurface(IGAccelSurface *this)

{
  IOAccelSurface::~IOAccelSurface((IOAccelSurface *)this);
  _OSObject_typed_operator_delete(&IGAccelSurface_ktv,this,&DAT_00001338);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSurface::operator delete(void*, unsigned long)

void __cdecl IGAccelSurface::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGAccelSurface_ktv,param_1,param_2);
  return;
}



// IGAccelSurface::getMetaClass() const

undefined8 * IGAccelSurface::getMetaClass(void)

{
  return &gMetaClass;
}



// IGAccelSurface::MetaClass::MetaClass()

void __thiscall IGAccelSurface::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGAccelSurface",(OSMetaClass *)__got::gMetaClass,0x1338);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGAccelSurface::MetaClass::alloc() const

IOAccelSurface * IGAccelSurface::MetaClass::alloc(void)

{
  IOAccelSurface *this;
  
  this = (IOAccelSurface *)_OSObject_typed_operator_new(&IGAccelSurface_ktv,&DAT_00001338);
  IOAccelSurface::IOAccelSurface(this,(OSMetaClass *)&IGAccelSurface::gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSurface;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGAccelSurface::operator new(unsigned long)

void * __thiscall IGAccelSurface::operator_new(IGAccelSurface *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGAccelSurface_ktv,this);
  return pvVar1;
}



// IGAccelSurface::IGAccelSurface()

void __thiscall IGAccelSurface::IGAccelSurface(IGAccelSurface *this)

{
  IOAccelSurface::IOAccelSurface((IOAccelSurface *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSurface;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSurface::IGAccelSurface()

void __thiscall IGAccelSurface::IGAccelSurface(IGAccelSurface *this)

{
  IOAccelSurface::IOAccelSurface((IOAccelSurface *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGAccelSurface;
  OSMetaClass::instanceConstructed();
  return;
}



// IGAccelSurface::copyFromBuffer(int, int, int, int, unsigned int, unsigned int, IOAccelEvent*,
// IOAccelResource2*, IOAccelSysMemory*, unsigned int, unsigned long long, unsigned int)

void __thiscall
IGAccelSurface::copyFromBuffer
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6_00,undefined8 param_7_00,undefined8 param_8_00,
          void *this,int param_10,undefined8 param_11_00,int param_12,uint param_13,int param_14,
          uint param_15,undefined8 param_16,IGAccelResource *param_17,long *param_18,uint param_19,
          int param_20,uint param_21)

{
  copyFromBuffer(param_1_00,param_2,param_3_00,param_4_00,param_5_00,param_6_00,param_7_00,
                 param_8_00,this,param_10,param_11_00,param_12,param_13,param_14,param_15,param_16,
                 param_17,0,param_18,param_19,param_20,param_21);
  return;
}



// IGAccelSurface::copyFromBuffer(int, int, int, int, unsigned int, unsigned int, IOAccelEvent*,
// IOAccelResource2*, unsigned int, IOAccelSysMemory*, unsigned int, unsigned long long, unsigned
// int)

undefined8 __thiscall
IGAccelSurface::copyFromBuffer
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6_00,undefined8 param_7_00,undefined8 param_8_00,
          void *this,int param_10,undefined8 param_11_00,int param_12,uint param_13,int param_14,
          uint param_15,undefined8 param_16,IGAccelResource *param_17,uint param_18,long *param_19,
          uint param_20,int param_21,uint param_22)

{
  undefined8 uVar1;
  
  if (((uint)(1L << ((byte)param_15 & 0x3f)) &
       ~(uint)*(ushort *)(*(long *)(param_17 + 0x30) + (long)param_14 * 2) &
      (uint)*(ushort *)(*(long *)(param_17 + 0x30) + 0xc + (long)param_14 * 2)) != 0) {
    uVar1 = copyBufferDMA(param_1_00,param_2,param_3_00,param_4_00,param_5_00,param_6_00,param_7_00,
                          param_8_00,this,param_10,param_11_00,param_12,param_13,param_14,param_15,
                          param_16,param_17,(ulong)param_18,param_19,(ulong)param_20,param_21,
                          param_22,1);
    if ((char)uVar1 != '\0') {
      return CONCAT71((int7)((ulong)uVar1 >> 8),1);
    }
  }
  return 0;
}



// IGAccelSurface::copyBufferDMA(int, int, int, int, unsigned int, unsigned int, IOAccelEvent*,
// IOAccelResource2*, unsigned long long, IOAccelSysMemory*, unsigned long long, unsigned long long,
// unsigned int, unsigned int)

undefined8 __thiscall
IGAccelSurface::copyBufferDMA
          (undefined8 param_1,undefined8 param_2,ulong param_3_00,ulong param_4_00,
          undefined8 param_5_00,undefined8 param_6_00,undefined8 param_7_00,undefined8 param_8_00,
          void *this,int param_10,undefined8 param_11_00,int param_12,uint param_13,int param_14,
          uint param_15,undefined8 param_16,IGAccelResource *param_17,long param_18,long *param_19,
          long param_20,int param_21,uint param_22,int param_23)

{
  undefined1 uVar1;
  ushort uVar2;
  ushort uVar3;
  undefined2 uVar4;
  ulong uVar5;
  bool bVar6;
  ulong uVar7;
  char cVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  long lVar12;
  long *plVar13;
  long lVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  int iVar17;
  long *plVar18;
  int iVar19;
  char *pcVar20;
  int iVar21;
  ulong uVar22;
  float extraout_XMM0_Da;
  float extraout_XMM0_Da_00;
  float fVar23;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar24;
  float fVar25;
  float fVar26;
  long local_1c8;
  undefined8 local_1c0;
  undefined8 local_1b8;
  ulong local_1b0;
  undefined8 local_1a8;
  undefined8 local_1a0;
  undefined8 local_198;
  undefined8 local_190;
  IGAccelResource *local_188;
  long local_180;
  undefined8 local_178;
  undefined8 local_170;
  ulong local_168;
  undefined8 local_160;
  undefined8 local_158;
  undefined8 local_150;
  undefined8 local_148;
  IGAccelResource *local_140;
  undefined8 local_138;
  undefined8 local_130;
  IGAccelResource local_128;
  undefined2 local_126;
  ushort local_124;
  undefined4 local_120;
  undefined8 local_118;
  undefined1 local_110;
  ulong local_108;
  ulong local_100;
  long local_f8;
  ulong local_f0;
  ulong local_e8;
  long local_e0;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  ulong local_90;
  ulong local_88;
  long local_80;
  long local_78;
  undefined8 local_70;
  long local_68;
  uint local_5c;
  int local_58;
  int local_54;
  long local_50;
  char *local_48;
  long *local_40;
  uint local_38;
  int local_34;
  
  if (param_23 - 3U < 0xfffffffe) {
    return 0;
  }
  local_70 = param_11_00;
  local_78 = IOAccelResource2::getStorageResource();
  cVar8 = (**(code **)(*(long *)param_17 + 0x170))(param_17);
  if (cVar8 == '\0') {
    return 0;
  }
  local_34 = param_12;
  lVar12 = (**(code **)(**(long **)(param_17 + 0x40) + 0x128))();
  lVar14 = *(long *)(param_17 + 0xb8);
  if (lVar14 == 0) {
    lVar14 = *(long *)(param_17 + 0xc0);
  }
  if (((param_22 & 2) == 0) &&
     (((*(ushort *)(*(long *)(param_17 + 0x30) + 0xc + (long)param_14 * 2) |
       *(ushort *)(*(long *)(param_17 + 0x30) + (long)param_14 * 2)) >> (param_15 & 0x1f) & 1) != 0)
     ) {
    bVar6 = false;
  }
  else {
    bVar6 = true;
  }
  if (((!bVar6) && ((int)(param_13 * local_34 * (uint)(byte)param_17[0xd8]) < 0x1000)) &&
     (*(byte *)(local_78 + 0x220) < 2)) goto LAB_0007fdda;
  plVar18 = *(long **)((long)this + 0x12c0);
  local_68 = lVar12;
  local_50 = lVar14;
  plVar13 = (long *)(**(code **)(*param_19 + 0x138))(param_19,plVar18,3);
  if (plVar13 == (long *)0x0) goto LAB_0007fdda;
  local_40 = plVar13;
  if ((((*(byte *)(plVar13 + 2) & 1) == 0) &&
      (cVar8 = (**(code **)(*plVar13 + 0x150))(), cVar8 == '\0')) &&
     (cVar8 = (**(code **)(*plVar18 + 0x120))(plVar18,local_40), cVar8 == '\0')) {
    lVar14 = *local_40;
    plVar18 = local_40;
  }
  else {
    plVar18 = local_40;
    cVar8 = (**(code **)(*local_40 + 0x138))();
    if ((cVar8 != '\0') ||
       (cVar8 = IOGraphicsAccelerator2::freeToPrepareMapping
                          (*(IOAccelMemoryMap **)((long)this + 0x12c8)), cVar8 != '\0')) {
      local_48 = (char *)(**(code **)(*plVar18 + 0x128))(plVar18);
      iVar17 = (int)local_50;
      if (param_23 == 2) {
        iVar17 = param_21;
      }
      uVar5 = 0x20000 / (long)iVar17;
      uVar9 = (uint)uVar5;
      uVar2 = *(ushort *)(param_17 + 0xb0);
      uVar3 = *(ushort *)(param_17 + 0xb2);
      local_5c = (uint)uVar2;
      local_38 = (uint)uVar3;
      lVar14 = IOAccelResource2::getStorageResource();
      uVar11 = *(uint *)(lVar14 + 400);
      local_58 = 0;
      local_54 = 0;
      if (param_15 != 0 || param_14 != 0) {
        local_1c8 = CONCAT44(local_1c8._4_4_,(uint)uVar2);
        local_90 = CONCAT44(local_90._4_4_,(uint)uVar3);
        IGAccelResource::calculateLevelOffsets
                  (param_17,(uint *)&local_1c8,(uint *)&local_90,&local_58,&local_54,param_14,
                   param_15,(uint)*(ushort *)(local_78 + 0x196));
        IGAccelResource::getBufferWidthHeight(param_17,&local_5c,&local_38,uVar11);
      }
      local_48 = (char *)((long)local_48 + param_20);
      plVar18 = &local_1c8;
      ___bzero(plVar18,0x138);
      IGVector<>::grow((IGVector<> *)&local_108,4);
      local_f0 = 0;
      local_e8 = 0;
      local_e0 = 0;
      IGVector<>::grow((IGVector<> *)&local_f0,4);
      local_1c8 = 0;
      local_1c0 = 0;
      local_1a8 = 0;
      local_1a0 = 0;
      local_198 = 0;
      local_190 = 0x100000000;
      plVar13 = &local_180;
      local_180 = 0;
      local_178 = 0;
      local_160 = 0;
      local_158 = 0;
      local_150 = 0;
      local_148 = 0x100000000;
      local_138 = 0;
      local_130 = 0;
      local_124 = 0;
      local_120 = 0;
      local_118 = 0;
      local_110 = 0;
      local_108 = 0;
      local_f0 = 0;
      local_c0 = 0;
      local_98 = 0;
      local_a0 = 0;
      local_a8 = 0;
      local_b0 = 0;
      local_b8 = 0;
      local_126 = 0;
      local_168 = (ulong)local_38;
      local_1b0 = (ulong)local_38;
      local_1b8 = CONCAT44(local_5c,0x23);
      local_188 = param_17;
      local_170 = CONCAT44(local_5c,5);
      local_140 = param_17;
      local_128 = param_17[0xd8];
      lVar14 = *(long *)(param_17 + 0x38);
      if (param_23 == 2) {
        if (local_100 == 0) {
          uVar15 = IGVector<>::grow((IGVector<> *)&local_108,0);
          if ((char)uVar15 != '\0') goto LAB_0007fe18;
        }
        else {
          local_108 = 0;
LAB_0007fe18:
          *(long *)(local_f8 + local_108 * 8) = lVar14 + 0x40;
          local_108 = local_108 + 1;
        }
        lVar14 = *(long *)(param_17 + 0x38);
        if ((local_108 != local_100) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_108,local_108 * 2), (char)uVar15 != '\0')
           ) {
          *(long *)(local_f8 + local_108 * 8) = lVar14 + 0x80;
          local_108 = local_108 + 1;
        }
        uVar15 = *(undefined8 *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar16 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar16 != '\0'))
        {
          *(undefined8 *)(local_e0 + local_f0 * 8) = uVar15;
          local_f0 = local_f0 + 1;
        }
        lVar14 = *(long *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long *)(local_e0 + local_f0 * 8) = lVar14 + 0x80;
          local_f0 = local_f0 + 1;
        }
        lVar14 = *(long *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long *)(local_e0 + local_f0 * 8) = lVar14 + 0xc0;
          local_f0 = local_f0 + 1;
        }
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long **)(local_e0 + local_f0 * 8) = local_40 + 7;
          local_f0 = local_f0 + 1;
        }
        plVar18 = plVar13;
        if (local_f0 != local_e8) {
          plVar13 = &local_1c8;
          goto LAB_000801c8;
        }
        uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2);
        cVar8 = (char)uVar15;
        uVar24 = (undefined4)local_50;
        plVar13 = &local_1c8;
joined_r0x000801bd:
        if (cVar8 == '\0') goto LAB_000801f6;
      }
      else {
        if (local_100 == 0) {
          uVar15 = IGVector<>::grow((IGVector<> *)&local_108,0);
          if ((char)uVar15 != '\0') goto LAB_00080000;
        }
        else {
          local_108 = 0;
LAB_00080000:
          *(long *)(local_f8 + local_108 * 8) = lVar14 + 0xc0;
          local_108 = local_108 + 1;
        }
        uVar15 = *(undefined8 *)(param_17 + 0x38);
        if ((local_108 != local_100) ||
           (uVar16 = IGVector<>::grow((IGVector<> *)&local_108,local_108 * 2), (char)uVar16 != '\0')
           ) {
          *(undefined8 *)(local_f8 + local_108 * 8) = uVar15;
          local_108 = local_108 + 1;
        }
        lVar14 = *(long *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long *)(local_e0 + local_f0 * 8) = lVar14 + 0x80;
          local_f0 = local_f0 + 1;
        }
        uVar15 = *(undefined8 *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar16 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar16 != '\0'))
        {
          *(undefined8 *)(local_e0 + local_f0 * 8) = uVar15;
          local_f0 = local_f0 + 1;
        }
        lVar14 = *(long *)(param_17 + 0x38);
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long *)(local_e0 + local_f0 * 8) = lVar14 + 0x40;
          local_f0 = local_f0 + 1;
        }
        if ((local_f0 != local_e8) ||
           (uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2), (char)uVar15 != '\0'))
        {
          *(long **)(local_e0 + local_f0 * 8) = local_40 + 7;
          local_f0 = local_f0 + 1;
        }
        if (local_f0 == local_e8) {
          uVar15 = IGVector<>::grow((IGVector<> *)&local_f0,local_f0 * 2);
          cVar8 = (char)uVar15;
          uVar24 = (undefined4)local_50;
          plVar18 = &local_1c8;
          goto joined_r0x000801bd;
        }
LAB_000801c8:
        uVar24 = (undefined4)local_50;
      }
      *(undefined8 *)(local_e0 + local_f0 * 8) = param_16;
      local_f0 = local_f0 + 1;
LAB_000801f6:
      uVar4 = *(undefined2 *)(local_78 + 400);
      *plVar13 = (long)local_48;
      *(int *)(plVar13 + 1) = param_21;
      *(undefined1 *)((long)plVar13 + 0xc) = 0;
      *(undefined2 *)((long)plVar13 + 0xe) = uVar4;
      uVar1 = *(undefined1 *)(local_78 + 0x194);
      *plVar18 = local_68 + param_18;
      *(undefined4 *)(plVar18 + 1) = uVar24;
      *(undefined1 *)((long)plVar18 + 0xc) = uVar1;
      *(undefined2 *)((long)plVar18 + 0xe) = uVar4;
      pcVar20 = local_48;
      lVar14 = IOAccelResource2::getStorageResource();
      iVar17 = (int)local_70;
      if ((plVar18[8] != 0) && (1 < *(byte *)(lVar14 + 0x220))) {
        *(byte *)((long)plVar18 + 0x3d) = *(byte *)((long)plVar18 + 0x3d) | 1;
        if ((*(byte *)(lVar14 + 0x221) & 4) == 0) {
          lVar12 = 0;
        }
        else {
          lVar12 = (ulong)*(uint *)(lVar14 + 0x1d0) + *plVar18;
        }
        plVar18[6] = lVar12;
        plVar18[4] = *plVar18 + (ulong)*(uint *)(lVar14 + 0x1c0);
        *(undefined4 *)(plVar18 + 5) = *(undefined4 *)(lVar14 + 0x1c4);
      }
      iVar10 = (int)(param_13 + uVar9 + -1) / (int)uVar9;
      lVar14 = 0;
      local_80 = 0;
      local_88 = 0;
      local_90 = 0;
      fVar23 = extraout_XMM0_Da;
      uVar24 = extraout_XMM0_Db;
      if (iVar10 != 0) {
        uVar22 = (ulong)iVar10;
        lVar14 = uVar22 << 5;
        if (iVar10 < 0) {
          lVar14 = -0x8000000000000000;
        }
        lVar14 = _IOMallocTypeVarImpl
                           (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::
                             kalloc_type_view_24,lVar14);
        uVar7 = uVar22;
        lVar12 = lVar14;
        if (lVar14 == 0) {
          lVar14 = 0;
          uVar22 = local_90;
          uVar7 = local_88;
          lVar12 = local_80;
        }
        local_80 = lVar12;
        local_88 = uVar7;
        local_90 = uVar22;
        iVar17 = (int)local_70;
        fVar23 = extraout_XMM0_Da_00;
        uVar24 = extraout_XMM0_Db_00;
      }
      fVar25 = (float)param_2;
      if (0 < (int)param_13) {
        fVar23 = (float)(uint)(param_10 + local_58);
        fVar25 = (float)local_34;
        uVar11 = param_13;
        if ((int)param_13 < (int)uVar9) {
          uVar11 = uVar9;
        }
        lVar12 = 0;
        iVar19 = local_38 - iVar17;
        iVar10 = 0;
        do {
          pcVar20 = (char *)(ulong)param_13;
          if ((int)uVar9 < (int)param_13) {
            pcVar20 = (char *)(uVar5 & 0xffffffff);
          }
          if ((param_22 & 2) == 0) {
            iVar21 = iVar10 + iVar17;
          }
          else {
            iVar21 = iVar19 - (int)pcVar20;
            local_124 = local_124 | 0x40;
          }
          fVar26 = (float)(int)pcVar20;
          param_4_00 = (ulong)(uint)fVar26;
          *(float *)(lVar14 + lVar12) = fVar23;
          *(float *)(lVar14 + 4 + lVar12) = (float)(uint)(iVar21 + local_54);
          *(float *)(lVar14 + 8 + lVar12) = fVar25;
          *(float *)(lVar14 + 0xc + lVar12) = fVar26;
          param_3_00 = (ulong)(uint)(float)iVar10;
          *(undefined4 *)(lVar14 + 0x10 + lVar12) = 0;
          *(float *)(lVar14 + 0x14 + lVar12) = (float)iVar10;
          *(float *)(lVar14 + 0x18 + lVar12) = fVar25;
          *(float *)(lVar14 + 0x1c + lVar12) = fVar26;
          iVar10 = iVar10 + uVar9;
          lVar12 = lVar12 + 0x20;
          iVar19 = iVar19 - uVar9;
          param_13 = param_13 - uVar9;
        } while ((ulong)((int)((ulong)(uVar11 - 1) / (uVar5 & 0xffffffff)) + 1) << 5 != lVar12);
      }
      IntelAccelerator::submitBlit
                (CONCAT44(uVar24,fVar23),CONCAT44((int)((ulong)param_2 >> 0x20),fVar25),param_3_00,
                 param_4_00,param_5_00,param_6_00,param_7_00,param_8_00,
                 *(IntelAccelerator **)((long)this + 0x12c8),&local_1c8,&local_90,
                 *(IGAccelTask **)((long)this + 0x12c0),0,pcVar20);
      IGAccelEventMachine::finishEvent
                (*(IGAccelEventMachine **)(*(long *)((long)this + 0x12c8) + 0x380),
                 (ulong)(byte)param_17[0x15] * 0x40 + *(long *)(param_17 + 0x38),0x37);
      plVar18 = local_40;
      (**(code **)(*local_40 + 0x140))(local_40);
      (**(code **)(*plVar18 + 0x28))(plVar18);
      uVar15 = (**(code **)(*(long *)param_17 + 0x178))(param_17);
      if (local_80 != 0) {
        lVar14 = local_88 << 5;
        if (lVar14 < 0) {
          lVar14 = -0x8000000000000000;
        }
        if (local_88 >> 0x3b != 0) {
          lVar14 = -0x8000000000000000;
        }
        uVar15 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                     deallocate(rect_pair_t*,unsigned_long)::kalloc_type_view_29,
                                    local_80,lVar14);
      }
      if (local_e0 != 0) {
        lVar14 = local_e8 * 8;
        if (lVar14 < 0) {
          lVar14 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_e8) {
          lVar14 = -0x8000000000000000;
        }
        uVar15 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                     deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                    local_e0,lVar14);
      }
      if (local_f8 != 0) {
        lVar14 = local_100 * 8;
        if (lVar14 < 0) {
          lVar14 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < local_100) {
          lVar14 = -0x8000000000000000;
        }
        uVar15 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                     deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                    local_f8,lVar14);
      }
      return CONCAT71((int7)((ulong)uVar15 >> 8),1);
    }
    lVar14 = *plVar18;
  }
  (**(code **)(lVar14 + 0x28))(plVar18);
LAB_0007fdda:
  (**(code **)(*(long *)param_17 + 0x178))(param_17);
  return 0;
}



// IGAccelSurface::copyToBuffer(int, int, int, int, unsigned int, unsigned int, IOAccelEvent*,
// IOAccelResource2*, IOAccelSysMemory*, unsigned int, unsigned long long, unsigned int)

undefined8 __thiscall
IGAccelSurface::copyToBuffer
          (undefined8 param_1_00,undefined8 param_2,undefined8 param_3_00,undefined8 param_4_00,
          undefined8 param_5_00,undefined8 param_6_00,undefined8 param_7_00,undefined8 param_8_00,
          void *this,int param_10,undefined8 param_11_00,int param_12,uint param_13,int param_14,
          uint param_15,undefined8 param_16,IGAccelResource *param_17,long *param_18,uint param_19,
          int param_20,uint param_21)

{
  undefined8 uVar1;
  
  if (((uint)(1L << ((byte)param_15 & 0x3f)) &
       ~(uint)*(ushort *)(*(long *)(param_17 + 0x30) + (long)param_14 * 2) &
      (uint)*(ushort *)(*(long *)(param_17 + 0x30) + 0xc + (long)param_14 * 2)) != 0) {
    uVar1 = copyBufferDMA(param_1_00,param_2,param_3_00,param_4_00,param_5_00,param_6_00,param_7_00,
                          param_8_00,this,param_10,param_11_00,param_12,param_13,param_14,param_15,
                          param_16,param_17,0,param_18,(ulong)param_19,param_20,param_21,2);
    if ((char)uVar1 != '\0') {
      return CONCAT71((int7)((ulong)uVar1 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGAccelSurface::submitSwapCopy(IOAccelEvent*, IOAccelResource2*, IOAccelResource2*)

void __cdecl IGAccelSurface::submitSwapCopy(long param_1)

{
  *(uint *)(*(long *)(&DAT_000012c8 + param_1) + 0xeb8) =
       *(uint *)(*(long *)(&DAT_000012c8 + param_1) + 0xeb8) | 0x800;
  (**(code **)(**(long **)(&DAT_000012c8 + param_1) + 0x9a8))();
  *(uint *)(*(long *)(&DAT_000012c8 + param_1) + 0xeb8) =
       *(uint *)(*(long *)(&DAT_000012c8 + param_1) + 0xeb8) & 0xfffff7ff;
  return;
}



// IGAccelSurface::surfaceStart()

void __thiscall IGAccelSurface::surfaceStart(IGAccelSurface *this)

{
  char cVar1;
  
  cVar1 = (**(code **)(__got::vtable + 0x988))();
  if (cVar1 != '\0') {
    this[0x103b] = (IGAccelSurface)((byte)this[0x103b] | 0xc0);
  }
  return;
}



// IGAccelSurface::surfaceStop()

void IGAccelSurface::surfaceStop(void)

{
                    // WARNING: Could not recover jumptable at 0x000805cc. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(__got::vtable + 0x990))();
  return;
}



// IGAccelSurface::canTmpAlloc(unsigned int)

undefined8 __thiscall IGAccelSurface::canTmpAlloc(IGAccelSurface *this,ulong param_1)

{
  ulong uVar1;
  ulong uVar2;
  undefined8 uVar3;
  ulong uVar4;
  
  uVar2 = param_1 & 0xffffffff;
  uVar1 = *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x12c8)) + 0x90);
  if (uVar1 < uVar2) {
    uVar3 = 0;
  }
  else {
    uVar3 = CONCAT71((int7)(uVar2 >> 8),uVar1 != uVar2);
    uVar4 = 0;
    if (uVar1 != uVar2) {
      uVar4 = uVar1;
    }
    *(ulong *)(*(long *)(&DAT_00001290 + *(long *)(this + 0x12c8)) + 0x90) = uVar4;
  }
  return uVar3;
}



// IGAccelSurface::getDirtyBufferBitsFromPrivateModeBits(unsigned long long)

undefined8 __thiscall
IGAccelSurface::getDirtyBufferBitsFromPrivateModeBits(undefined8 param_1_00,uint param_2)

{
  undefined8 uVar1;
  
  uVar1 = 0x700;
  if ((param_2 >> 0x19 & 1) == 0) {
    uVar1 = 0;
  }
  return uVar1;
}



// WARNING: Type propagation algorithm not settling
// IGAccelSurface::shapeSurface(unsigned int, unsigned short, unsigned short)

void __thiscall
IGAccelSurface::shapeSurface(IGAccelSurface *this,uint param_1,ushort param_2,ushort param_3)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined8 in_stack_ffffffffffffff58;
  undefined8 in_stack_ffffffffffffff60;
  undefined4 uVar7;
  undefined4 local_54;
  uint local_50;
  int local_4c;
  uint local_48;
  int local_44;
  uint local_40;
  uint local_3c [2];
  undefined2 local_34;
  
  local_54 = 1;
  local_48 = 1;
  local_40 = 0;
  local_44 = 0;
  local_3c[0] = 0;
  local_34 = 0;
  uVar4 = (uint)*(undefined8 *)(this + 0x11b0);
  uVar1 = 2;
  if ((((uVar4 >> 0x1e & 1) == 0) && (uVar1 = 4, (uVar4 >> 0x1b & 1) == 0)) &&
     (uVar1 = 8, (uVar4 >> 0x1d & 1) == 0)) {
    uVar1 = 0x10;
    if (-1 < (int)uVar4) {
      uVar1 = 1;
    }
  }
  if ((param_1 & 0x700) == 0) goto LAB_000807f9;
  uVar5 = (uint)param_2;
  iVar6 = 8;
  if ((uVar4 & 0x17000000) != 0x7000000) {
    iVar6 = (uint)((uVar4 & 0x17000000) != 0x1000000) * 2 + 2;
  }
  local_44 = 3;
  uVar4 = (uint)param_2;
  uVar3 = (uint)param_3;
  if ((param_1 >> 0xc & 1) != 0) {
    uVar4 = (uint)param_2;
    uVar3 = (uint)param_3;
    if (1 < uVar1) {
      uVar4 = uVar1 - 2 >> 1 | uVar1 << 0x1f;
      if (uVar4 < 2) {
        uVar4 = 1;
        if (1 < uVar5) {
          uVar4 = (uint)param_2;
        }
        uVar3 = uVar4 * 2 + 2 & 0xfffffffc;
      }
      else if ((uVar4 == 3) || (uVar3 = (uint)param_2, uVar4 == 7)) {
        uVar4 = 1;
        if (1 < uVar5) {
          uVar4 = uVar5;
        }
        uVar3 = uVar4 * 4 + 4 & 0xfffffff8;
      }
      if (uVar1 == 4) {
LAB_00080749:
        uVar1 = 1;
        if (1 < param_3) {
          uVar1 = (uint)param_3;
        }
        uVar5 = uVar1 * 2 + 2 & 0xfffffffc;
      }
      else if (uVar1 == 0x10) {
        uVar1 = 1;
        if (1 < param_3) {
          uVar1 = (uint)param_3;
        }
        uVar5 = uVar1 * 4 + 4 & 0xfffffff8;
      }
      else {
        uVar5 = (uint)param_3;
        if (uVar1 == 8) goto LAB_00080749;
      }
      uVar4 = uVar3 + 3 & 0xfffffffc;
      uVar3 = uVar5 + 3 & 0xfffffffc;
    }
  }
  local_3c[0] = uVar4 * iVar6 + 0x7f >> 7;
  local_40 = (uVar3 + 0x1f >> 5) * local_3c[0] * *(int *)__got::_page_size;
  local_3c[1] = 0xa0908;
  setBuffer(this,3,1,(long)(local_3c + 1),param_1,iVar6,in_stack_ffffffffffffff58,
            CONCAT44((int)((ulong)in_stack_ffffffffffffff60 >> 0x20),1),local_40,local_3c[0],3,
            '\x01',0,'\0',param_2,param_3);
LAB_000807f9:
  if ((param_1 & 0x10c7) != 0) {
    uVar1 = ((uint)*(undefined8 *)(this + 0x11b0) & 0xf) - 3;
    local_4c = 4;
    if (uVar1 < 0xb) {
      local_4c = *(int *)(&DAT_001146c8 + (long)(int)uVar1 * 4);
    }
    local_3c[1] = 0x6020100;
    local_34 = 0xc07;
    uVar2 = (ulong)((uint)*(undefined8 *)(this + 0x11b0) & 0xf);
    uVar1 = 0xc0;
    if (uVar2 - 3 < 0xd) {
      uVar1 = *(uint *)(&DAT_00114704 + uVar2 * 4);
    }
    uVar7 = 0;
    local_50 = param_1;
    setData(this,local_4c,&local_54,&local_48,(int *)&local_40,local_3c,&local_44,0,uVar1,'\0',0,
            '\0',param_2,param_3);
    setBuffer(this,6,1,(long)(local_3c + 1),local_50,local_4c,in_stack_ffffffffffffff58,
              CONCAT44(uVar7,local_48),local_40,local_3c[0],local_44,'\0',0,'\0',param_2,param_3);
  }
  return;
}



// IGAccelSurface::setBuffer(unsigned int, bool, unsigned char*, unsigned int, unsigned int,
// unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, bool, bool, bool, unsigned
// short, unsigned short)

void __thiscall
IGAccelSurface::setBuffer
          (IGAccelSurface *this,uint param_1,int param_3_00,long param_3,uint param_4,int param_5,
          undefined8 param_6,undefined8 param_7,uint param_8,uint param_9,int param_10,char param_11
          ,byte param_12,char param_13,ushort param_14,ushort param_15)

{
  IGAccelResource *this_00;
  uint uVar1;
  int iVar2;
  ulong uVar3;
  uint *puVar4;
  uint uVar5;
  uint uVar6;
  ulong uVar7;
  ulong uVar8;
  int iVar9;
  ulong uVar10;
  undefined4 local_bc;
  ulong local_b8;
  ulong local_b0;
  long local_a8;
  ulong local_a0;
  ulong local_98;
  int local_8c;
  int local_88;
  uint local_84;
  undefined8 local_80;
  undefined8 local_78;
  ulong local_70;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  uint local_50;
  undefined4 uStack_4c;
  undefined4 local_48;
  undefined4 uStack_44;
  long local_38;
  
  uVar1 = 0;
  if (param_3_00 == 0) {
    uVar1 = param_1 - 1;
  }
  local_38 = *(long *)__got::___stack_chk_guard;
  uVar5 = (uint)*(undefined8 *)(this + 0x11b0);
  local_80 = 2;
  if (((((uVar5 >> 0x1e & 1) == 0) && (local_80 = 4, (uVar5 >> 0x1b & 1) == 0)) &&
      (local_80 = 8, (uVar5 >> 0x1d & 1) == 0)) && (local_80 = 0x10, -1 < (int)uVar5)) {
    local_80 = 1;
  }
  local_a8 = param_3;
  local_8c = param_3_00;
  local_88 = param_5;
  local_84 = param_4;
  if (uVar1 < param_1) {
    uVar7 = (ulong)param_1;
    local_b8 = (ulong)param_4;
    local_a0 = (ulong)param_14;
    local_98 = (ulong)param_15;
    uVar8 = (ulong)uVar1;
    local_b0 = uVar7;
    iVar9 = param_10;
    do {
      if ((char)local_8c == '\0') {
        uVar1 = (uint)uVar7;
      }
      else {
        uVar1 = (uint)*(byte *)(local_a8 + uVar8);
      }
      if (uVar1 - 8 < 3) {
        uVar3 = (ulong)((uint)*(undefined8 *)(this + 0x11b0) & 0x17000000) - 0x1000000;
        uVar10 = 0xd9;
        if (uVar3 < 0x7000000) {
          puVar4 = (uint *)(&DAT_001146f4 + (uVar3 >> 0x16));
LAB_00080a39:
          uVar10 = (ulong)*puVar4;
        }
      }
      else {
        uVar3 = (ulong)((uint)*(undefined8 *)(this + 0x11b0) & 0xf) - 3;
        uVar10 = 0xc0;
        if (uVar3 < 0xd) {
          puVar4 = (uint *)(&DAT_00114710 + uVar3 * 4);
          goto LAB_00080a39;
        }
      }
      if (((uint)local_b8 & (uint)(1L << ((byte)uVar1 & 0x3f))) != 0) {
        this_00 = *(IGAccelResource **)(this + (long)(&DAT_000011c0 + (long)(int)uVar1 * 8));
        if (uVar1 == 0xc) {
          setData(this,local_88,&local_bc,(uint *)&param_7,(int *)&param_8,&param_9,&param_10,
                  (uint)local_80,(uint)uVar10,param_11,param_12,param_13,(ushort)local_a0,
                  (ushort)local_98);
          iVar9 = param_10;
        }
        if (iVar9 == 0) {
          iVar2 = param_9 * *(int *)__got::_page_size;
        }
        else {
          local_48 = 0;
          uStack_44 = 0;
          local_58 = 0;
          local_50 = 0;
          uStack_4c = 0;
          local_60 = 0;
          local_78 = 0x6000000080;
          local_70 = 0x2000000040;
          local_68 = 0x800000010;
          if (iVar9 - 1U < 0xb) {
            uVar6 = *(uint *)((long)&local_78 + (uVar10 >> 6) * 4) >> 3 & 0x1f;
            uVar5 = 0x200;
            switch(iVar9) {
            case 1:
              uVar5 = 0x40;
              break;
            case 2:
              break;
            case 3:
              uVar5 = 0x80;
              break;
            default:
              goto switchD_00080b2a_caseD_4;
            case 7:
              uVar5 = 0x40;
              if (1 < uVar6) {
                uVar5 = (uint)(4 < uVar6) * 0x80 + 0x80;
              }
              break;
            case 0xb:
              uVar5 = 0x100;
              if (1 < uVar6) {
                uVar5 = (uint)(4 < uVar6) * 0x200 + 0x200;
              }
            }
          }
          else {
switchD_00080b2a_caseD_4:
            uVar5 = 1;
          }
          iVar2 = 0;
          if (uVar5 != 0) {
            for (; (uVar5 >> iVar2 & 1) == 0; iVar2 = iVar2 + 1) {
            }
          }
          iVar2 = param_9 << ((byte)iVar2 & 0x1f);
        }
        uVar5 = param_8 + 0xfff;
        param_8 = uVar5 & 0xfffff000;
        uStack_44 = 0;
        local_78 = CONCAT44((int)local_98,(int)local_a0);
        local_70 = CONCAT44(iVar2,uVar5) & 0xfffffffffffff000;
        local_68 = CONCAT44((uint)uVar10,local_88);
        local_60 = CONCAT44(iVar9,iVar2);
        local_58 = CONCAT44(local_84,(int)local_80);
        uStack_4c = 0;
        local_48 = 0;
        local_50 = uVar1;
        IGAccelResource::reshape(this_00,this,(undefined4 *)&local_78);
        uVar7 = local_b0;
      }
      uVar8 = uVar8 + 1;
    } while ((int)uVar7 != (int)uVar8);
  }
  if (*(long *)__got::___stack_chk_guard != local_38) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



// IGAccelSurface::setData(unsigned int, unsigned int&, unsigned int&, unsigned int&, unsigned int&,
// unsigned int&, unsigned int, unsigned int, bool, bool, bool, unsigned short, unsigned short)

void __thiscall
IGAccelSurface::setData
          (IGAccelSurface *this,int param_1,undefined4 *param_2,uint *param_3,int *param_4,
          uint *param_5,int *param_6,uint param_7,uint param_8,char param_9,byte param_10,
          char param_11,ushort param_12,ushort param_13)

{
  long lVar1;
  byte bVar2;
  uint uVar3;
  ushort uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  bool bVar17;
  uint local_40;
  int local_3c;
  int local_38;
  uint local_34;
  
  iVar8 = *param_6;
  uVar6 = *(uint *)(this + 0x11b0);
  *param_3 = (uVar6 >> 0x10 & 0xf) + 1;
  uVar13 = (uint)param_13;
  uVar6 = uVar6 & 0x700000;
  uVar16 = (uint)param_12;
  local_38 = param_1;
  if (uVar6 == 0x300000) {
    *param_2 = 6;
    local_34 = *param_3;
    local_40 = 0;
    local_3c = 0;
    if (((param_8 >> 9 & 1) == 0) &&
       ((0x1e < param_8 - 0x186 || ((0x781808ffU >> (param_8 - 0x186 & 0x1f) & 1) == 0)))) {
      GetSurfaceAlignmentUnits
                ((int *)&local_40,&local_3c,(ulong)param_8,param_7,iVar8,local_34,param_9,param_10,
                 param_11);
      if (1 < param_7) goto LAB_00080e23;
LAB_00080f7c:
      uVar13 = uVar13 << (param_10 & 0x1f);
      bVar17 = true;
      if ((param_8 >> 9 & 1) == 0) {
        if (param_8 - 0x186 < 0x1f) {
          bVar17 = (0x781808ffU >> (param_8 - 0x186 & 0x1f) & 1) != 0;
        }
        else {
          bVar17 = false;
        }
      }
      uVar11 = (uVar16 + local_40) - 1 & -local_40;
      iVar8 = local_3c + -1;
      uVar15 = -local_3c;
      uVar6 = 0;
      if (local_34 < 2) {
        uVar16 = 0;
      }
      else {
        uVar6 = uVar13 >> 1;
        if (uVar13 < 2) {
          uVar6 = 1;
        }
        uVar16 = uVar6 + iVar8 & uVar15;
        uVar6 = 0;
        if (local_34 != 2) {
          uVar6 = 0;
          uVar9 = 2;
          do {
            bVar2 = (byte)uVar9 & 0x1f;
            uVar3 = uVar13 >> bVar2;
            if (uVar13 >> bVar2 == 0) {
              uVar3 = 1;
            }
            uVar14 = uVar3 + 3 >> 2;
            if (!bVar17) {
              uVar14 = uVar3;
            }
            uVar6 = uVar6 + (uVar14 + iVar8 & uVar15);
            uVar9 = uVar9 + 1;
          } while (local_34 != uVar9);
        }
      }
      uVar9 = uVar13 + 3 >> 2;
      if (!bVar17) {
        uVar9 = uVar13;
      }
      if (uVar6 < uVar16) {
        uVar6 = uVar16;
      }
      uVar15 = (uVar9 + iVar8 & uVar15) + iVar8 + uVar6 & uVar15;
      uVar16 = local_40 * 2;
      if (local_40 < uVar11) {
        uVar16 = uVar11;
      }
      if (local_34 < 2) {
        uVar16 = uVar11;
      }
    }
    else {
      GetSurfaceAlignmentUnits
                ((int *)&local_40,&local_3c,(ulong)param_8,param_7,iVar8,local_34,param_9,param_10,
                 param_11);
      if (param_7 < 2) {
        uVar16 = uVar16 + 3 >> 2;
        goto LAB_00080f7c;
      }
LAB_00080e23:
      if (((param_9 == '\0') && (param_10 == 0)) && (param_11 == '\0')) {
        uVar15 = (uVar13 + 3 & 0xfffffffc) * param_7;
        uVar16 = uVar16 + 3 & 0xfffffffc;
      }
      else {
        iVar12 = 4;
        iVar5 = 4;
        if (param_9 == '\0') {
          iVar12 = (uint)(param_10 ^ 1) * 4 + 4;
          iVar5 = 8;
          if (param_10 != 0) goto LAB_0008109c;
          iVar10 = 4;
          iVar7 = 4;
          if (param_11 != '\0') goto LAB_0008109c;
        }
        else {
LAB_0008109c:
          iVar10 = iVar5;
          iVar7 = iVar12;
        }
        uVar6 = param_7 - 2 >> 1 | param_7 << 0x1f;
        if (iVar8 == 7) {
          iVar10 = 0x10;
          iVar7 = iVar10;
        }
        else if (iVar8 == 0xb) {
          iVar10 = 0x40;
          iVar7 = iVar10;
        }
        if (uVar6 < 2) {
          uVar6 = 1;
          if (1 < uVar16) {
            uVar6 = uVar16;
          }
          uVar16 = uVar6 * 2 + 2 & 0xfffffffc;
        }
        else if ((uVar6 == 3) || (uVar6 == 7)) {
          uVar6 = 1;
          if (1 < uVar16) {
            uVar6 = uVar16;
          }
          uVar16 = uVar6 * 4 + 4 & 0xfffffff8;
        }
        if (param_7 == 4) {
LAB_0008133c:
          uVar6 = 1;
          if (1 < uVar13) {
            uVar6 = uVar13;
          }
          uVar13 = uVar6 * 2 + 2 & 0xfffffffc;
        }
        else if (param_7 == 0x10) {
          uVar6 = 1;
          if (1 < uVar13) {
            uVar6 = uVar13;
          }
          uVar13 = uVar6 * 4 + 4 & 0xfffffff8;
        }
        else if (param_7 == 8) goto LAB_0008133c;
        uVar15 = -iVar10 & (iVar10 + uVar13) - 1;
        uVar16 = (uVar16 + iVar7) - 1 & -iVar7;
      }
    }
    uVar13 = uVar15 * 6;
LAB_00081438:
    if (1 < param_7) goto LAB_0008143d;
LAB_0008144e:
    lVar1 = *(long *)(this + 0x12c8);
    iVar8 = *(int *)(lVar1 + 0x1470);
    if (iVar8 == 3) {
      uVar6 = uVar16 * local_38 + 0x7f >> 7;
    }
    else {
      uVar6 = 0;
      if (iVar8 == 2) {
        uVar6 = uVar16 * local_38 + 0x1ff >> 9;
      }
    }
    *param_5 = uVar6;
    iVar8 = *(int *)(lVar1 + 0x1470);
    if (iVar8 != 3) {
      uVar6 = 0;
      if (iVar8 == 2) {
        uVar6 = uVar13 + 7 >> 3;
        iVar8 = 2;
      }
      goto LAB_000814b7;
    }
  }
  else {
    if (uVar6 == 0x100000) {
      *param_2 = 1;
      local_34 = *param_3;
      local_40 = 0;
      local_3c = 0;
      if (((param_8 >> 9 & 1) == 0) &&
         ((0x1e < param_8 - 0x186 || ((0x781808ffU >> (param_8 - 0x186 & 0x1f) & 1) == 0)))) {
        GetSurfaceAlignmentUnits
                  ((int *)&local_40,&local_3c,(ulong)param_8,param_7,iVar8,local_34,param_9,param_10
                   ,param_11);
        if (1 < param_7) goto LAB_00080d4c;
        uVar6 = -local_40 & (uVar16 + local_40) - 1;
LAB_00080ee1:
        if ((0x1e < param_8 - 0x186) ||
           (bVar17 = true, (0x781808ffU >> (param_8 - 0x186 & 0x1f) & 1) == 0)) {
          bVar17 = false;
        }
LAB_00080f04:
        iVar8 = local_3c + -1;
        uVar15 = -local_3c;
        uVar16 = 0;
        if (local_34 < 2) {
          uVar11 = 0;
        }
        else {
          uVar16 = (uint)(param_13 >> 1);
          if (param_13 < 2) {
            uVar16 = 1;
          }
          uVar11 = uVar16 + iVar8 & uVar15;
          uVar16 = 0;
          if (local_34 != 2) {
            uVar16 = 0;
            uVar9 = 2;
            do {
              uVar4 = param_13 >> ((byte)uVar9 & 0x1f);
              uVar3 = (uint)uVar4;
              if (uVar4 == 0) {
                uVar3 = 1;
              }
              uVar14 = uVar3 + 3 >> 2;
              if (!bVar17) {
                uVar14 = uVar3;
              }
              uVar16 = uVar16 + (uVar14 + iVar8 & uVar15);
              uVar9 = uVar9 + 1;
            } while (local_34 != uVar9);
          }
        }
        uVar9 = uVar13 + 3 >> 2;
        if (!bVar17) {
          uVar9 = uVar13;
        }
        if (uVar16 < uVar11) {
          uVar16 = uVar11;
        }
        uVar13 = (uVar9 + iVar8 & uVar15) + iVar8 + uVar16 & uVar15;
        uVar16 = local_40 * 2;
        if (local_40 < uVar6) {
          uVar16 = uVar6;
        }
        if (local_34 < 2) {
          uVar16 = uVar6;
        }
      }
      else {
        GetSurfaceAlignmentUnits
                  ((int *)&local_40,&local_3c,(ulong)param_8,param_7,iVar8,local_34,param_9,param_10
                   ,param_11);
        if (param_7 < 2) {
          uVar6 = -local_40 & ((uVar16 + 3 >> 2) + local_40) - 1;
          bVar17 = true;
          if ((param_8 >> 9 & 1) == 0) goto LAB_00080ee1;
          goto LAB_00080f04;
        }
LAB_00080d4c:
        if (((param_9 == '\0') && (param_10 == 0)) && (param_11 == '\0')) {
          uVar13 = (uVar13 + 3 & 0xfffffffc) * param_7;
          uVar16 = uVar16 + 3 & 0xfffffffc;
        }
        else {
          iVar12 = 4;
          iVar5 = 4;
          if (param_9 == '\0') {
            iVar12 = (uint)(param_10 ^ 1) * 4 + 4;
            iVar5 = 8;
            if (param_10 != 0) goto LAB_0008101a;
            iVar10 = 4;
            iVar7 = 4;
            if (param_11 != '\0') goto LAB_0008101a;
          }
          else {
LAB_0008101a:
            iVar10 = iVar5;
            iVar7 = iVar12;
          }
          uVar6 = param_7 - 2 >> 1 | param_7 << 0x1f;
          if (iVar8 == 7) {
            iVar10 = 0x10;
            iVar7 = iVar10;
          }
          else if (iVar8 == 0xb) {
            iVar10 = 0x40;
            iVar7 = iVar10;
          }
          if (uVar6 < 2) {
            uVar6 = 1;
            if (1 < uVar16) {
              uVar6 = uVar16;
            }
            uVar16 = uVar6 * 2 + 2 & 0xfffffffc;
          }
          else if ((uVar6 == 3) || (uVar6 == 7)) {
            uVar6 = 1;
            if (1 < uVar16) {
              uVar6 = uVar16;
            }
            uVar16 = uVar6 * 4 + 4 & 0xfffffff8;
          }
          if (param_7 == 4) {
LAB_000812b5:
            uVar6 = 1;
            if (1 < uVar13) {
              uVar6 = uVar13;
            }
            uVar13 = uVar6 * 2 + 2 & 0xfffffffc;
          }
          else if (param_7 == 0x10) {
            uVar6 = 1;
            if (1 < uVar13) {
              uVar6 = uVar13;
            }
            uVar13 = uVar6 * 4 + 4 & 0xfffffff8;
          }
          else if (param_7 == 8) goto LAB_000812b5;
          uVar13 = -iVar10 & (iVar10 + uVar13) - 1;
          uVar16 = (uVar16 + iVar7) - 1 & -iVar7;
        }
      }
      goto LAB_00081438;
    }
    if (param_7 < 2) goto LAB_0008144e;
    if (((param_9 == '\0') && (param_10 == 0)) && (param_11 == '\0')) {
      uVar16 = uVar16 + 3 & 0xfffffffc;
      uVar13 = (uVar13 + 3 & 0xfffffffc) * param_7;
    }
    else {
      iVar12 = 4;
      iVar5 = 4;
      if (param_9 == '\0') {
        iVar12 = (uint)(param_10 ^ 1) * 4 + 4;
        iVar5 = 8;
        if (param_10 != 0) goto LAB_00081132;
        iVar7 = 4;
        iVar10 = 4;
        if (param_11 != '\0') goto LAB_00081132;
      }
      else {
LAB_00081132:
        iVar10 = iVar5;
        iVar7 = iVar12;
      }
      uVar6 = param_7 - 2 >> 1 | param_7 << 0x1f;
      if (iVar8 == 7) {
        iVar10 = 0x10;
        iVar7 = iVar10;
      }
      else if (iVar8 == 0xb) {
        iVar10 = 0x40;
        iVar7 = iVar10;
      }
      if (uVar6 < 2) {
        uVar6 = 1;
        if (1 < uVar16) {
          uVar6 = uVar16;
        }
        uVar16 = uVar6 * 2 + 2 & 0xfffffffc;
      }
      else if ((uVar6 == 3) || (uVar6 == 7)) {
        uVar6 = 1;
        if (1 < uVar16) {
          uVar6 = uVar16;
        }
        uVar16 = uVar6 * 4 + 4 & 0xfffffff8;
      }
      if (param_7 == 4) {
LAB_000813c3:
        uVar6 = 1;
        if (1 < uVar13) {
          uVar6 = uVar13;
        }
        uVar13 = uVar6 * 2 + 2 & 0xfffffffc;
      }
      else if (param_7 == 0x10) {
        uVar6 = 1;
        if (1 < uVar13) {
          uVar6 = uVar13;
        }
        uVar13 = uVar6 * 4 + 4 & 0xfffffff8;
      }
      else if (param_7 == 8) goto LAB_000813c3;
      uVar16 = (uVar16 + iVar7) - 1 & -iVar7;
      uVar13 = -iVar10 & (iVar10 + uVar13) - 1;
    }
LAB_0008143d:
    *param_5 = uVar16 * local_38 + 0x7f >> 7;
  }
  uVar6 = uVar13 + 0x1f >> 5;
  iVar8 = 3;
LAB_000814b7:
  *param_6 = iVar8;
  *param_4 = uVar6 * *param_5 * *(int *)__got::_page_size;
  return;
}



// IGAccelSurface::MetaClass::~MetaClass()

void __thiscall IGAccelSurface::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGVector<IOAccelEvent*, IGIOMallocAllocatorPolicy>::grow(unsigned long)

undefined8 __thiscall IGVector<>::grow(IGVector<> *this,ulong param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*(ulong *)(this + 8) < param_1) {
    lVar3 = param_1 * 8;
    if (lVar3 < 0) {
      lVar3 = -0x8000000000000000;
    }
    if (param_1 >> 0x3d != 0) {
      lVar3 = -0x8000000000000000;
    }
    lVar3 = _IOMallocTypeVarImpl
                      (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                       lVar3);
    if (lVar3 != 0) {
      lVar1 = *(long *)(this + 0x10);
      lVar2 = lVar3;
      if (lVar1 != 0) {
        lVar2 = *(long *)this;
        if (lVar2 != 0) {
          lVar1 = 0;
          do {
            *(undefined8 *)(lVar3 + lVar1 * 8) = *(undefined8 *)(*(long *)(this + 0x10) + lVar1 * 8)
            ;
            lVar1 = lVar1 + 1;
          } while (lVar2 != lVar1);
          lVar1 = *(long *)(this + 0x10);
        }
        lVar2 = *(ulong *)(this + 8) * 8;
        if (lVar2 < 0) {
          lVar2 = -0x8000000000000000;
        }
        if (0x1fffffffffffffff < *(ulong *)(this + 8)) {
          lVar2 = -0x8000000000000000;
        }
        lVar2 = _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::
                                    deallocate(IOAccelEvent**,unsigned_long)::kalloc_type_view_29,
                                   lVar1,lVar2);
      }
      *(long *)(this + 0x10) = lVar3;
      *(ulong *)(this + 8) = param_1;
      return CONCAT71((int7)((ulong)lVar2 >> 8),1);
    }
  }
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// GetSurfaceAlignmentUnits(unsigned int*, unsigned int*, unsigned int, unsigned int, unsigned int,
// unsigned int, bool, bool, bool, bool, bool)

void __cdecl
GetSurfaceAlignmentUnits
          (int *param_1,undefined4 *param_2,ulong param_3,int param_4,int param_5,uint param_6,
          char param_7,byte param_8,char param_9)

{
  uint uVar1;
  char cVar2;
  undefined4 uVar3;
  long lVar4;
  uint uVar5;
  undefined *puVar6;
  int iVar7;
  uint uVar8;
  uint local_48 [14];
  long local_10;
  
  local_10 = *(long *)__got::___stack_chk_guard;
  uVar5 = (uint)param_3;
  local_48[0xc] = 0;
  local_48[0xd] = 0;
  local_48[10] = 0;
  local_48[0xb] = 0;
  local_48[8] = 0;
  local_48[9] = 0;
  local_48[6] = 0;
  local_48[7] = 0;
  local_48[0] = 0x80;
  local_48[1] = 0x60;
  local_48[2] = 0x40;
  local_48[3] = 0x20;
  local_48[4] = 0x10;
  local_48[5] = 8;
  uVar8 = local_48[(uint)(param_3 >> 6) & 0xf];
  *param_1 = 4;
  *param_2 = 4;
  cVar2 = (char)uVar8;
  if ((((param_5 == 3) && (1 < param_6)) && (param_4 == 1)) && (cVar2 == ' ')) {
    *param_1 = 8;
  }
  uVar1 = param_4 - 2U >> 1;
  if (((uVar1 | param_4 << 0x1f) < 8) && ((0x8bU >> (uVar1 & 0x1f) & 1) != 0)) {
    *param_1 = 4;
    *param_2 = 4;
  }
  if (param_7 == '\0') {
    iVar7 = (uint)(param_8 ^ 1) * 4 + 4;
    uVar3 = 8;
    if ((param_8 != 0) || (param_9 != '\0')) goto LAB_000817b0;
    uVar3 = 4;
    if (((uVar5 - 0x182 < 0xf) && ((0x6003U >> (uVar5 - 0x182 & 0x1f) & 1) != 0)) ||
       (uVar5 - 0x40 < 7)) goto LAB_000817b3;
  }
  else {
    uVar3 = 4;
    if ((uVar5 - 0x10a < 5) || (uVar5 == 5)) {
      iVar7 = 8;
    }
    else {
      iVar7 = 4;
    }
LAB_000817b0:
    *param_1 = iVar7;
LAB_000817b3:
    *param_2 = uVar3;
  }
  uVar8 = uVar8 & 0xff;
  if (param_5 == 0xb) {
    if (cVar2 == '\0') {
      if ((uVar5 >> 9 & 1) == 0) {
        iVar7 = 0x100;
        uVar3 = 0x100;
        if (uVar5 - 0x180 < 0x25) {
          lVar4 = (long)(int)(uVar5 - 0x180);
          iVar7 = *(int *)(&DAT_0011486c + lVar4 * 4);
          puVar6 = &DAT_00114900;
LAB_00081885:
          uVar3 = *(undefined4 *)(puVar6 + lVar4 * 4);
        }
      }
      else {
LAB_000818ce:
        iVar7 = 0x40;
        uVar3 = 0x40;
      }
    }
    else {
      iVar7 = 0x100;
      if (uVar8 < 9) {
        uVar3 = 0x100;
      }
      else {
        uVar3 = 0x80;
        if (0x10 < uVar8) {
          iVar7 = 0x80;
          if (uVar8 < 0x21) {
            uVar3 = 0x80;
          }
          else {
            uVar3 = 0x40;
            if (0x40 < uVar8) goto LAB_000818ce;
          }
        }
      }
    }
  }
  else {
    if (param_5 != 7) goto LAB_000818d7;
    if (cVar2 == '\0') {
      if ((uVar5 >> 9 & 1) == 0) {
        iVar7 = 0x40;
        uVar3 = 0x40;
        if (uVar5 - 0x180 < 0x25) {
          lVar4 = (long)(int)(uVar5 - 0x180);
          iVar7 = *(int *)(&DAT_00114744 + lVar4 * 4);
          puVar6 = &DAT_001147d8;
          goto LAB_00081885;
        }
      }
      else {
LAB_000818b2:
        iVar7 = 0x10;
        uVar3 = 0x10;
      }
    }
    else {
      iVar7 = 0x40;
      if (uVar8 < 9) goto LAB_000818ce;
      uVar3 = 0x20;
      if (0x10 < uVar8) {
        iVar7 = 0x20;
        if (uVar8 < 0x21) {
          uVar3 = 0x20;
        }
        else {
          uVar3 = 0x10;
          if (0x40 < uVar8) goto LAB_000818b2;
        }
      }
    }
  }
  *param_1 = iVar7;
  *param_2 = uVar3;
LAB_000818d7:
  if (*(long *)__got::___stack_chk_guard != local_10) {
                    // WARNING: Subroutine does not return
    ___stack_chk_fail();
  }
  return;
}



void __GLOBAL__sub_I_IGAccelSurface_cpp(void)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGAccelSurface::gMetaClass,"IGAccelSurface",
             (OSMetaClass *)__got::gMetaClass,0x1338);
  IGAccelSurface::gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGAccelSurface::gMetaClass);
  return;
}



// IGHardwareRingBufferMain::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferMain::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferMain",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferMain::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferMain::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// IGHardwareRingBufferMain::IGHardwareRingBufferMain(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferMain::IGHardwareRingBufferMain
          (IGHardwareRingBufferMain *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMain;
  return;
}



// IGHardwareRingBufferMain::IGHardwareRingBufferMain(OSMetaClass const*)

void __thiscall
IGHardwareRingBufferMain::IGHardwareRingBufferMain
          (IGHardwareRingBufferMain *this,OSMetaClass *param_1)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer((IGHardwareRingBuffer *)this,param_1);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMain;
  return;
}



// IGHardwareRingBufferMain::~IGHardwareRingBufferMain()

void __thiscall IGHardwareRingBufferMain::~IGHardwareRingBufferMain(IGHardwareRingBufferMain *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferMain::~IGHardwareRingBufferMain()

void __thiscall IGHardwareRingBufferMain::~IGHardwareRingBufferMain(IGHardwareRingBufferMain *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  return;
}



// IGHardwareRingBufferMain::~IGHardwareRingBufferMain()

void __thiscall IGHardwareRingBufferMain::~IGHardwareRingBufferMain(IGHardwareRingBufferMain *this)

{
  IGHardwareRingBuffer::~IGHardwareRingBuffer((IGHardwareRingBuffer *)this);
  _OSObject_typed_operator_delete(&IGHardwareRingBufferMain_ktv,this,0x8e0);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBufferMain::operator delete(void*, unsigned long)

void __cdecl IGHardwareRingBufferMain::operator_delete(undefined8 param_1,undefined8 param_2)

{
  _OSObject_typed_operator_delete(&IGHardwareRingBufferMain_ktv,param_1,param_2);
  return;
}



// IGHardwareRingBufferMain::getMetaClass() const

undefined1 * IGHardwareRingBufferMain::getMetaClass(void)

{
  return &gMetaClass;
}



// IGHardwareRingBufferMain::MetaClass::MetaClass()

void __thiscall IGHardwareRingBufferMain::MetaClass::MetaClass(MetaClass *this)

{
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)this,"IGHardwareRingBufferMain",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  *(undefined ***)this = &__const::~MetaClass;
  return;
}



// IGHardwareRingBufferMain::MetaClass::alloc() const

IGHardwareRingBuffer * IGHardwareRingBufferMain::MetaClass::alloc(void)

{
  IGHardwareRingBuffer *this;
  
  this = (IGHardwareRingBuffer *)_OSObject_typed_operator_new(&IGHardwareRingBufferMain_ktv,0x8e0);
  IGHardwareRingBuffer::IGHardwareRingBuffer
            (this,(OSMetaClass *)&IGHardwareRingBufferMain::gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMain;
  OSMetaClass::instanceConstructed();
  return this;
}



// IGHardwareRingBufferMain::operator new(unsigned long)

void * __thiscall IGHardwareRingBufferMain::operator_new(IGHardwareRingBufferMain *this)

{
  void *pvVar1;
  
  pvVar1 = (void *)_OSObject_typed_operator_new(&IGHardwareRingBufferMain_ktv,this);
  return pvVar1;
}



// IGHardwareRingBufferMain::IGHardwareRingBufferMain()

void __thiscall IGHardwareRingBufferMain::IGHardwareRingBufferMain(IGHardwareRingBufferMain *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMain;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferMain::IGHardwareRingBufferMain()

void __thiscall IGHardwareRingBufferMain::IGHardwareRingBufferMain(IGHardwareRingBufferMain *this)

{
  IGHardwareRingBuffer::IGHardwareRingBuffer
            ((IGHardwareRingBuffer *)this,(OSMetaClass *)&gMetaClass);
  *(undefined ***)this = &__const::~IGHardwareRingBufferMain;
  OSMetaClass::instanceConstructed();
  return;
}



// IGHardwareRingBufferMain::init(IGHardwareContext*)

ulong __thiscall IGHardwareRingBufferMain::init(IGHardwareRingBufferMain *this,long param_1)

{
  int iVar1;
  int iVar2;
  ulong uVar3;
  undefined8 uVar4;
  
  uVar3 = IGHardwareRingBuffer::init((IGHardwareRingBuffer *)this,param_1);
  if ((char)uVar3 != '\0') {
    *(undefined8 *)(this + 0x58) = 0x22440000203c;
    *(undefined4 *)(this + 0x70) = 2;
    *(undefined8 **)(this + 0x78) = &_rcsResetRegisters;
    iVar1 = (**(code **)(*(long *)this + 0x128))(this);
    iVar2 = (**(code **)(*(long *)this + 0x148))(this);
    *(int *)(this + 0x3c) = iVar2 + iVar1 + 4;
    if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)(this + 0x10)) + 0xc) & 0x10) != 0) {
      uVar4 = IGHardwareRingBuffer::getSerializeSubmissionSpace((IGHardwareRingBuffer *)this);
      *(int *)(this + 0x3c) = *(int *)(this + 0x3c) + (int)uVar4;
    }
  }
  return uVar3 & 0xffffffff;
}



// IGHardwareRingBufferMain::getStampSpace()

undefined8 IGHardwareRingBufferMain::getStampSpace(void)

{
  return 0xc;
}



// IGHardwareRingBufferMain::commitStampCommand(unsigned int, bool)

void __thiscall
IGHardwareRingBufferMain::commitStampCommand
          (IGHardwareRingBufferMain *this,uint param_1,uint param_2)

{
  bool bVar1;
  undefined4 uVar2;
  undefined4 extraout_var;
  ulong uVar3;
  ulong local_50;
  ulong local_48;
  ulong local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  local_40 = 0;
  local_48 = 0;
  local_50 = 0x13050217a000004;
  bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
  uVar2 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58))
  ;
  IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
  local_50 = (ulong)param_2 << 0x3c | (ulong)bVar1 << 0x38 | 0x1050217a000004;
  local_48 = CONCAT44(extraout_var,uVar2) & 0xfffffffffffffffc;
  IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_50,6);
  local_40 = 0;
  local_50 = 0x11044987a000004;
  local_48 = 0;
  bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
  uVar3 = (long)*(int *)(this + 0x38) * 0x40 + *(long *)(this + 0x28);
  local_40 = (ulong)param_1;
  local_50 = (ulong)param_2 << 0x28 | local_50 & 0xfefffeffffffffff | (ulong)bVar1 << 0x38;
  local_48 = CONCAT44((int)(uVar3 >> 0x20),(uint)(uVar3 & 0xfffffffffffffffc) | (uint)local_48 & 3);
  IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_50,6);
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGHardwareRingBufferMain::writeStamp(unsigned int, bool)

void __cdecl IGHardwareRingBufferMain::writeStamp(long *param_1,uint param_2)

{
  (**(code **)(*param_1 + 0x140))();
  *(uint *)(param_1[6] + 8 + (long)(int)param_1[7] * 0x40) = param_2;
  *(uint *)((long)param_1 + 0x44) = param_2;
  *(undefined1 *)(param_1 + 9) = 1;
  if (_graphicsTracePointEnable != 0) {
    dtHookTrace();
    if ((*(uint *)__got::_kdebug_enable & 0xfffffff7) != 0) {
      _kernel_debug(0x85a00030,(ulong)*(byte *)(param_1 + 8),(long)(int)param_1[7],(ulong)param_2,0,
                    0);
    }
  }
  dtHookWriteStamp();
  return;
}



// IGHardwareRingBufferMain::getFlushTLBSpace()

undefined8 __thiscall IGHardwareRingBufferMain::getFlushTLBSpace(IGHardwareRingBufferMain *this)

{
  undefined8 uVar1;
  
  uVar1 = 0xc;
  if ((*(uint *)(*(long *)(this + 0x10) + 0xfe2) >> 0x1c & 1) == 0) {
    uVar1 = 6;
  }
  return uVar1;
}



// IGHardwareRingBufferMain::writeFlushTLB()

void __thiscall IGHardwareRingBufferMain::writeFlushTLB(IGHardwareRingBufferMain *this)

{
  bool bVar1;
  undefined4 uVar2;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  ulong local_48;
  undefined8 local_40;
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  if ((*(uint *)(*(long *)(this + 0x10) + 0xfe2) >> 0x1c & 1) == 0) {
    local_38 = 0;
    local_40 = 0;
    local_48 = 0x7a000004;
    bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
    uVar2 = IGAccelTask::getScratchGPUVirtualAddress
                      (*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
    local_48 = (ulong)bVar1 << 0x38 | 0x1440007a000004;
    local_40 = CONCAT44(local_40._4_4_,uVar2) & 0xfffffffffffffffc;
    IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
    local_40 = CONCAT44(extraout_var,(undefined4)local_40);
  }
  else {
    local_38 = 0;
    local_40 = 0;
    local_48 = 0x7a000004;
    bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
    uVar2 = IGAccelTask::getScratchGPUVirtualAddress
                      (*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
    local_48 = (ulong)bVar1 << 0x38 | 0x40007a000004;
    local_40 = CONCAT44(local_40._4_4_,uVar2) & 0xfffffffffffffffc;
    IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
    local_40 = CONCAT44(extraout_var_00,(undefined4)local_40);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_48,6);
    local_38 = 0;
    local_48 = 0x1400007a000004;
    local_40 = 0;
  }
  IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_48,6);
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBufferMain::waitForSemaphore(unsigned int, unsigned int)

void __thiscall
IGHardwareRingBufferMain::waitForSemaphore
          (undefined8 param_1,undefined8 param_2_00,undefined8 param_3,undefined8 param_4,
          undefined8 param_5,undefined8 param_6,undefined8 param_7,undefined8 param_8,void *this,
          uint param_10,uint param_11,undefined8 param_12,char *param_13,char *param_14)

{
  long lVar1;
  bool bVar2;
  int iVar3;
  undefined7 extraout_var;
  undefined8 uVar4;
  long lVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar7;
  long local_60;
  ulong local_58;
  ulong local_50;
  uint local_48;
  undefined4 local_44;
  ulong local_40;
  long local_38;
  
  local_38 = *(long *)__got::___stack_chk_guard;
  bVar2 = IGHardwareRingBuffer::getGTTWriteMode(this);
  lVar1 = *(long *)((long)this + 0x28);
  lVar5 = (ulong)(*(int *)((long)this + 0x38) + 0x40) * 0x40 + lVar1;
  local_48 = (uint)lVar5 & 0xfffffffc;
  local_50 = (ulong)bVar2 << 0x38 | 0x40007a000004;
  local_44 = (undefined4)((ulong)lVar5 >> 0x20);
  local_40 = CONCAT44(param_11,param_10) & 0xffffffffffff;
  bVar2 = IGHardwareRingBuffer::getGTTWriteMode(this);
  lVar5 = (ulong)((int)CONCAT71(extraout_var,bVar2) == 1) * 0x400000;
  local_60 = ((ulong)param_10 << 0x20) + lVar5 + 0xe009002;
  local_58 = (ulong)param_11 * 0x40 + lVar1 & 0xfffffffffffc;
  iVar3 = IGHardwareRingBuffer::getSemaphoreWaitPollSpace(this,param_11);
  uVar6 = iVar3 + 10;
  uVar4 = extraout_RDX;
  uVar7 = extraout_XMM0_Qa;
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    uVar4 = IGHardwareRingBuffer::getSerializeSubmissionSpace(this);
    uVar6 = uVar6 + (int)uVar4;
    uVar4 = extraout_RDX_00;
    uVar7 = extraout_XMM0_Qa_00;
  }
  IGHardwareRingBuffer::waitForSpace
            (uVar7,param_2_00,param_3,param_4,param_5,param_6,param_7,param_8,this,uVar6,uVar4,lVar5
             ,param_13,param_14);
  if ((*(byte *)(*(long *)(&DAT_00001280 + *(long *)((long)this + 0x10)) + 0xc) & 0x10) != 0) {
    IGHardwareRingBuffer::serializeSubmission(this);
  }
  IGHardwareRingBuffer::insertSemaphoreWaitPoll(this,param_10,param_11);
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_50,6);
  IGHardwareRingBuffer::writeBuffer(this,(long)&local_60,4);
  *(int *)((long)this + 0x4c) = *(int *)((long)this + 0x4c) + 1;
  (**(code **)(*(long *)this + 0x138))(this);
  if (*(long *)__got::___stack_chk_guard == local_38) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBufferMain::getFlushSpace()

undefined8 __thiscall IGHardwareRingBufferMain::getFlushSpace(IGHardwareRingBufferMain *this)

{
  undefined8 uVar1;
  
  uVar1 = 0x34;
  if ((*(uint *)(*(long *)(this + 0x10) + 0xf52) >> 0x15 & 1) == 0) {
    uVar1 = 0xc;
  }
  return uVar1;
}



// IGHardwareRingBufferMain::writeFlush()

void __thiscall IGHardwareRingBufferMain::writeFlush(IGHardwareRingBufferMain *this)

{
  bool bVar1;
  undefined4 uVar2;
  undefined4 extraout_var_00;
  undefined7 extraout_var;
  undefined8 uVar3;
  ulong uVar4;
  ulong local_60;
  undefined8 local_58;
  undefined4 local_50;
  ulong local_48;
  undefined8 local_40;
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)__got::___stack_chk_guard;
  local_38 = 0;
  local_40 = 0;
  local_48 = 0x13050217a000004;
  bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
  uVar2 = IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58))
  ;
  local_48 = (ulong)bVar1 << 0x38 | 0x1050217a000004;
  local_40 = CONCAT44(local_40._4_4_,uVar2) & 0xfffffffffffffffc;
  IGAccelTask::getScratchGPUVirtualAddress(*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
  local_40 = CONCAT44(extraout_var_00,(undefined4)local_40);
  IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_48,6);
  local_48 = 0x10004187a000004;
  local_40 = 0;
  local_38 = 0;
  IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_48,6);
  if ((*(uint *)(*(long *)(this + 0x10) + 0xf52) >> 0x15 & 1) != 0) {
    local_60 = 0x10000003;
    local_50 = 0;
    local_58 = 0;
    bVar1 = IGHardwareRingBuffer::getGTTWriteMode((IGHardwareRingBuffer *)this);
    uVar4 = 0x10400003;
    if ((int)CONCAT71(extraout_var,bVar1) != 1) {
      uVar4 = 0x10000003;
    }
    uVar3 = IGAccelTask::getScratchGPUVirtualAddress
                      (*(IGAccelTask **)(*(long *)(this + 0x20) + 0x58));
    local_60 = (ulong)((uint)uVar3 & 0xfffffffc) << 0x20 | uVar4;
    local_58 = CONCAT44(local_58._4_4_,(int)((ulong)uVar3 >> 0x20)) & 0xffffffff0000ffff;
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
    IGHardwareRingBuffer::writeBuffer((IGHardwareRingBuffer *)this,(long)&local_60,5);
  }
  if (*(long *)__got::___stack_chk_guard == local_30) {
    return;
  }
                    // WARNING: Subroutine does not return
  ___stack_chk_fail();
}



// IGHardwareRingBufferMain::MetaClass::~MetaClass()

void __thiscall IGHardwareRingBufferMain::MetaClass::~MetaClass(MetaClass *this)

{
  OSMetaClass::~OSMetaClass((OSMetaClass *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __GLOBAL__sub_I_IGHardwareRingBufferMain_cpp(void)

{
  undefined8 uVar1;
  undefined1 auVar2 [16];
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  
  _rcsResetRegisters = 0;
  DAT_00136980 = 0;
  DAT_00136988 = 0;
  lVar3 = _IOMallocTypeVarImpl
                    (&IGIOMallocAllocatorPolicy<>::allocate(unsigned_long)::kalloc_type_view_24,
                     0x654);
  lVar5 = DAT_00136988;
  if (lVar3 != 0) {
    if (DAT_00136988 != 0) {
      if (_rcsResetRegisters != 0) {
        lVar6 = 0;
        lVar4 = _rcsResetRegisters;
        do {
          *(undefined4 *)(lVar3 + 0x20 + lVar6) = *(undefined4 *)(lVar5 + 0x20 + lVar6);
          *(undefined8 *)(lVar3 + 0x18 + lVar6) = *(undefined8 *)(lVar5 + 0x18 + lVar6);
          *(undefined8 *)(lVar3 + 0x10 + lVar6) = *(undefined8 *)(lVar5 + 0x10 + lVar6);
          uVar1 = *(undefined8 *)(lVar5 + lVar6);
          *(undefined8 *)(lVar3 + 8 + lVar6) = *(undefined8 *)(lVar5 + 8 + lVar6);
          *(undefined8 *)(lVar3 + lVar6) = uVar1;
          lVar6 = lVar6 + 0x24;
          lVar4 = lVar4 + -1;
        } while (lVar4 != 0);
      }
      auVar2._8_8_ = 0;
      auVar2._0_8_ = DAT_00136980;
      lVar4 = SUB168(ZEXT816(0x24) * auVar2,0);
      if (lVar4 < 0) {
        lVar4 = -0x8000000000000000;
      }
      lVar6 = -0x8000000000000000;
      if (SUB168(ZEXT816(0x24) * auVar2,8) == 0) {
        lVar6 = lVar4;
      }
      _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)
                          ::kalloc_type_view_29,lVar5,lVar6);
    }
    DAT_00136980 = 0x2d;
    lVar5 = 0;
    DAT_00136988 = lVar3;
    do {
      *(undefined4 *)(lVar3 + 0x20 + lVar5) = *(undefined4 *)((long)&DAT_001149f0 + lVar5);
      *(undefined8 *)(lVar3 + 0x18 + lVar5) = *(undefined8 *)((long)&DAT_001149e8 + lVar5);
      *(undefined8 *)(lVar3 + 0x10 + lVar5) = *(undefined8 *)((long)&DAT_001149e0 + lVar5);
      uVar1 = *(undefined8 *)((long)&rcsRegisters + lVar5);
      *(undefined8 *)(lVar3 + 8 + lVar5) = *(undefined8 *)((long)&DAT_001149d8 + lVar5);
      *(undefined8 *)(lVar3 + lVar5) = uVar1;
      lVar5 = lVar5 + 0x24;
    } while (lVar5 != 0x654);
    _rcsResetRegisters = 0x2d;
  }
  OSMetaClass::OSMetaClass
            ((OSMetaClass *)&IGHardwareRingBufferMain::gMetaClass,"IGHardwareRingBufferMain",
             (OSMetaClass *)&IGHardwareRingBuffer::gMetaClass,0x8e0);
  _gMetaClass = &__const::~MetaClass;
  return;
}



void __GLOBAL__D_a(void)

{
  undefined1 auVar1 [16];
  long lVar2;
  long lVar3;
  
  OSMetaClass::~OSMetaClass((OSMetaClass *)&IGHardwareRingBufferMain::gMetaClass);
  if (DAT_00136988 != 0) {
    auVar1._8_8_ = 0;
    auVar1._0_8_ = DAT_00136980;
    lVar2 = SUB168(ZEXT816(0x24) * auVar1,0);
    if (lVar2 < 0) {
      lVar2 = -0x8000000000000000;
    }
    lVar3 = -0x8000000000000000;
    if (SUB168(ZEXT816(0x24) * auVar1,8) == 0) {
      lVar3 = lVar2;
    }
    _IOFreeTypeVarImpl(&IGIOMallocAllocatorPolicy<>::deallocate(resetRegisterInfo*,unsigned_long)::
                        kalloc_type_view_29,DAT_00136988,lVar3);
    return;
  }
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// resolve_initialize_scratch_space_g7(IGAccelSysMemory*)

bool __cdecl resolve_initialize_scratch_space_g7(task *param_1)

{
  void *pvVar1;
  long lVar2;
  undefined4 *puVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  byte bVar7;
  undefined1 local_70 [12];
  undefined8 auStack_64 [7];
  
  bVar7 = 0;
  pvVar1 = (void *)IOAccelSysMemory::lockForCPUAccess
                             (param_1,(uint)*(undefined8 *)__got::_kernel_task);
  if (pvVar1 != (void *)0x0) {
    local_70._0_4_ = 0;
    local_70._4_8_ = 0x806203100;
    lVar2 = 0xc;
    do {
      *(undefined8 *)(local_70 + lVar2) = 0;
      lVar2 = lVar2 + 8;
    } while (lVar2 != 0x44);
    puVar5 = (undefined8 *)((long)pvVar1 + 0x4400);
    puVar3 = (undefined4 *)local_70;
    puVar4 = puVar5;
    for (lVar2 = 0x11; lVar2 != 0; lVar2 = lVar2 + -1) {
      *(undefined4 *)puVar4 = *puVar3;
      puVar3 = puVar3 + (ulong)bVar7 * -2 + 1;
      puVar4 = (undefined8 *)((long)puVar4 + (ulong)bVar7 * -8 + 4);
    }
    puVar4 = puVar5;
    puVar6 = (undefined8 *)((long)pvVar1 + 0x4480);
    for (lVar2 = 8; lVar2 != 0; lVar2 = lVar2 + -1) {
      *puVar6 = *puVar4;
      puVar4 = puVar4 + (ulong)bVar7 * -2 + 1;
      puVar6 = puVar6 + (ulong)bVar7 * -2 + 1;
    }
    *(undefined4 *)((long)pvVar1 + 0x44c0) = *(undefined4 *)((long)pvVar1 + 0x4440);
    *(byte *)((long)pvVar1 + 0x4484) = *(byte *)((long)pvVar1 + 0x4484) | 7;
    puVar4 = (undefined8 *)((long)pvVar1 + 0x4500);
    for (lVar2 = 8; lVar2 != 0; lVar2 = lVar2 + -1) {
      *puVar4 = *puVar5;
      puVar5 = puVar5 + (ulong)bVar7 * -2 + 1;
      puVar4 = puVar4 + (ulong)bVar7 * -2 + 1;
    }
    *(undefined4 *)((long)pvVar1 + 0x4540) = *(undefined4 *)((long)pvVar1 + 0x4440);
    *(byte *)((long)pvVar1 + 0x4504) = *(byte *)((long)pvVar1 + 0x4504) | 9;
    *(undefined8 *)((long)pvVar1 + 0x4580) = 0;
    *(undefined8 *)((long)pvVar1 + 0x4588) = 0;
    *(undefined8 *)((long)pvVar1 + 0x4590) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45c0) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45c8) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45d0) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45d8) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45e0) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45e8) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45f0) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45f8) = 0;
    *(undefined8 *)((long)pvVar1 + 0x45a0) = 0x3f80000000000000;
    _memcpy(pvVar1,&IGResolve3DKernel_SS_to_Combined_D24S8_NonMSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x200),&IGResolve3DKernel_SS_to_Combined_D24S8_MSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x400),&IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx2,0x280);
    _memcpy((void *)((long)pvVar1 + 0x680),&IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx4,0x300);
    _memcpy((void *)((long)pvVar1 + 0x980),&IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx8,0x300);
    _memcpy((void *)((long)pvVar1 + 0xc80),&IGResolve3DKernel_SS_to_Combined_D24S8_MSAAx16,0x380);
    _memcpy((void *)((long)pvVar1 + 0x1000),&IGResolve3DKernel_SS_to_Combined_D32fS8_NonMSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x1200),&IGResolve3DKernel_SS_to_Combined_D32fS8_MSAA,0x280);
    _memcpy((void *)((long)pvVar1 + 0x1480),&IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx2,0x300);
    _memcpy((void *)((long)pvVar1 + 0x1780),&IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx4,0x380);
    _memcpy((void *)((long)pvVar1 + 0x1b00),&IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx8,0x380);
    _memcpy((void *)((long)pvVar1 + 0x1e80),&IGResolve3DKernel_SS_to_Combined_D32fS8_MSAAx16,0x3c0);
    _memcpy((void *)((long)pvVar1 + 0x2240),&IGResolve3DKernel_Combined_to_SS_NonMSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x2440),&IGResolve3DKernel_Combined_to_SS_MSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x2640),&IGResolve3DKernel_Combined_to_SS_MSAAx2,0x280);
    _memcpy((void *)((long)pvVar1 + 0x28c0),&IGResolve3DKernel_Combined_to_SS_MSAAx4,0x300);
    _memcpy((void *)((long)pvVar1 + 0x2bc0),&IGResolve3DKernel_Combined_to_SS_MSAAx8,0x300);
    _memcpy((void *)((long)pvVar1 + 0x2ec0),&IGResolve3DKernel_Combined_to_SS_MSAAx16,0x340);
    _memcpy((void *)((long)pvVar1 + 0x3200),&IGResolve3DKernel_SS_to_StencilOnly_NonMSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x3400),&IGResolve3DKernel_SS_to_StencilOnly_NonMSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x3600),&IGResolve3DKernel_SS_to_StencilOnly_MSAA,0x200);
    _memcpy((void *)((long)pvVar1 + 0x3800),&IGResolve3DKernel_SS_to_StencilOnly_MSAAx2,0x280);
    _memcpy((void *)((long)pvVar1 + 0x3a80),&IGResolve3DKernel_SS_to_StencilOnly_MSAAx4,0x300);
    _memcpy((void *)((long)pvVar1 + 0x3d80),&IGResolve3DKernel_SS_to_StencilOnly_MSAAx8,0x300);
    _memcpy((void *)((long)pvVar1 + 0x4080),&IGResolve3DKernel_SS_to_StencilOnly_MSAAx16,0x380);
    IOAccelSysMemory::unlockForCPUAccess(param_1);
  }
  return pvVar1 != (void *)0x0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// resolve_init_ctx_g7(IOAccelCommandBufferPool2*, IGMappedBuffer*, bool)

void __cdecl resolve_init_ctx_g7(long param_1,IGMappedBuffer *param_2)

{
  ulong uVar1;
  undefined8 *puVar2;
  ulong *puVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  ulong uVar7;
  
  uVar1 = IGMappedBuffer::getGPUVirtualAddress(param_2);
  uVar6 = (ulong)(0x5000 >> (*__got::_page_shift & 0x1f));
  (**(code **)(**(long **)(param_1 + 0x20) + 0x148))();
  puVar2 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)param_1);
  *(undefined8 **)(param_1 + 0x1858) = puVar2 + 0x14b;
  lVar5 = 0;
  puVar2[1] = 0;
  puVar2[2] = 0;
  *puVar2 = 0x7a000004;
  *(undefined4 *)(puVar2 + 3) = 0x69041310;
  *(undefined8 *)((long)puVar2 + 0x1c) = 0x703411000001;
  *(undefined4 *)((long)puVar2 + 0x24) = 0xa0000420;
  puVar2[5] = 0x801008078300000;
  puVar2[6] = 0x800000078310000;
  puVar2[7] = 0x800000078320000;
  puVar2[8] = 0x800000078330000;
  _memcpy(puVar2 + 9,&g_cInitGfxStateBaseAddress,0x58);
  uVar7 = uVar6 << 0x2c;
  puVar2[0x10] = uVar7 | puVar2[0x10] & 0xffeffffffff | 0x100000000;
  puVar2[0xe] = (puVar2[0xe] & 0x81e) + 0x461 + (uVar1 & 0xfffffffffffff000);
  puVar2[0xc] = (puVar2[0xc] & 0x81e) + (uVar1 & 0xfffffffffffff000) + 0x701;
  puVar2[10] = (ulong)*(uint *)((long)puVar2 + 0x54) << 0x20 | uVar1 >> 0x20;
  puVar2[9] = puVar2[9] & 0x81effffffff | (uVar1 >> 0xc) << 0x2c | 0x70100000000;
  puVar2[0xf] = uVar6 << 0xc | puVar2[0xf] & 0xffe00000ffe | uVar7 | 0x100000001;
  puVar2[0x14] = 0x61020001;
  *(undefined4 *)(puVar2 + 0x15) = 0;
  *(undefined8 *)((long)puVar2 + 0xac) = 0x79000002;
  *(undefined8 *)((long)puVar2 + 0xb4) = 0x3fff3fff;
  *(undefined8 *)((long)puVar2 + 0xbc) = 0xe004000078050006;
  *(undefined8 *)((long)puVar2 + 0xc4) = 0;
  *(undefined8 *)((long)puVar2 + 0xcc) = 0;
  *(undefined8 *)((long)puVar2 + 0xd4) = 0;
  lVar4 = 0x79040002;
  do {
    *(undefined8 *)((long)puVar2 + lVar5 + 0xe4) = 0;
    *(long *)((long)puVar2 + lVar5 + 0xdc) = lVar4;
    lVar5 = lVar5 + 0x10;
    lVar4 = lVar4 + 0x4000000000000000;
  } while (lVar5 != 0x40);
  *(undefined4 *)((long)puVar2 + 0x124) = 0;
  *(undefined8 *)((long)puVar2 + 0x11c) = 0xffff79080001;
  *(undefined4 *)(puVar2 + 0x26) = 0;
  puVar2[0x25] = 0x790a0001;
  *(undefined4 *)((long)puVar2 + 0x144) = 0;
  *(undefined8 *)((long)puVar2 + 0x13c) = 0;
  *(undefined8 *)((long)puVar2 + 0x134) = 0x78060003;
  *(undefined4 *)(puVar2 + 0x2b) = 0;
  puVar2[0x2a] = 0;
  puVar2[0x29] = 0x78070003;
  *(undefined4 *)((long)puVar2 + 0x164) = 0;
  *(undefined8 *)((long)puVar2 + 0x15c) = 0x78040001;
  puVar2[0x2d] = 0x780d0000;
  puVar2[0x2e] = 0x178180000;
  puVar2[0x32] = 0xae2ae66253d97b95;
  puVar2[0x31] = 0xf1bf173d10eff408;
  puVar2[0x30] = 0x2c42816eb3dbad36;
  puVar2[0x2f] = 0xc75a7599791c0007;
  *(undefined4 *)(puVar2 + 0x33) = 0x88cc44;
  *(undefined8 *)((long)puVar2 + 0x19c) = 0x79060000;
  _memcpy((void *)((long)puVar2 + 0x1a4),&g_cInitGfx3dStatePolyStipplePattern,0x84);
  puVar2[0x46] = 0;
  *(undefined4 *)(puVar2 + 0x47) = 0;
  puVar2[0x45] = 0x780a0003;
  _memcpy((void *)((long)puVar2 + 0x23c),&g_cInitGfx3dStateVertexBuffers,0x214);
  _memcpy(puVar2 + 0x8a,&g_cInitGfx3dStateVertexElements,0x114);
  *(undefined8 *)((long)puVar2 + 0x454) = 0x2222000002000000;
  *(undefined8 *)((long)puVar2 + 0x45c) = 0x1123000002850000;
  *(undefined8 *)((long)puVar2 + 0x564) = 0x780c0800;
  *(undefined8 *)((long)puVar2 + 0x56c) = 0xf784b0000;
  *(undefined8 *)((long)puVar2 + 0x574) = 0xffffffff78550003;
  *(undefined8 *)((long)puVar2 + 0x57c) = 0xffffffffffffffff;
  *(undefined4 *)((long)puVar2 + 0x584) = 0xffffffff;
  puVar2[0xb1] = 0x41084200784d0000;
  puVar2[0xb3] = 0;
  puVar2[0xb2] = 0x78520003;
  *(undefined4 *)(puVar2 + 0xb4) = 1;
  *(undefined8 *)((long)puVar2 + 0x5ac) = 0x78260000;
  *(undefined8 *)((long)puVar2 + 0x5b4) = 0x78270000;
  *(undefined8 *)((long)puVar2 + 0x5bc) = 0x78280000;
  *(undefined8 *)((long)puVar2 + 0x5c4) = 0x78290000;
  *(undefined8 *)((long)puVar2 + 0x5cc) = 0x782a0000;
  *(undefined8 *)((long)puVar2 + 0x614) = 0x4581780e0000;
  *(undefined8 *)((long)puVar2 + 0x61c) = 0x440178240000;
  *(undefined8 *)((long)puVar2 + 0x5d4) = 0x782b0000;
  *(undefined8 *)((long)puVar2 + 0x5dc) = 0x782c0000;
  *(undefined8 *)((long)puVar2 + 0x5e4) = 0x782d0000;
  *(undefined8 *)((long)puVar2 + 0x5ec) = 0x782e0000;
  *(undefined8 *)((long)puVar2 + 0x5f4) = 0x782f0000;
  *(undefined8 *)((long)puVar2 + 0x5fc) = 0x780f0000;
  *(undefined8 *)((long)puVar2 + 0x604) = 0x45c078210000;
  *(undefined8 *)((long)puVar2 + 0x60c) = 0x45a078230000;
  *(undefined8 *)((long)puVar2 + 0x62c) = 0x4c00480800020000;
  *(undefined8 *)((long)puVar2 + 0x624) = 0x78130002;
  *(undefined8 *)((long)puVar2 + 0x63c) = 0;
  *(undefined8 *)((long)puVar2 + 0x644) = 0xffffffffffffffff;
  *(undefined8 *)((long)puVar2 + 0x634) = 0x30800820781f0004;
  *(undefined8 *)((long)puVar2 + 0x64c) = 0x1000078510009;
  *(undefined8 *)((long)puVar2 + 0x654) = 0x5000400030002;
  *(undefined8 *)((long)puVar2 + 0x65c) = 0x9000800070006;
  *(undefined8 *)((long)puVar2 + 0x664) = 0xd000c000b000a;
  *(undefined4 *)((long)puVar2 + 0x674) = 0;
  *(undefined **)((long)puVar2 + 0x66c) = &DAT_000f000e;
  *(undefined4 *)(puVar2 + 0xd1) = 0;
  puVar2[0xd0] = 0;
  puVar2[0xcf] = 0x21000078500003;
  *(undefined8 *)((long)puVar2 + 0x69c) = 0;
  *(undefined8 *)((long)puVar2 + 0x694) = 0;
  *(undefined4 *)((long)puVar2 + 0x6ac) = 0x10000;
  *(undefined8 *)((long)puVar2 + 0x6a4) = 0x800;
  *(undefined8 *)((long)puVar2 + 0x68c) = 0x78100007;
  *(undefined8 *)((long)puVar2 + 0x6dc) = 0x42800000427c0000;
  *(undefined8 *)((long)puVar2 + 0x6d4) = 0x781c0002;
  *(undefined4 *)(puVar2 + 0xda) = 0;
  puVar2[0xd9] = 0;
  puVar2[0xd8] = 0;
  puVar2[0xd7] = 0;
  puVar2[0xd6] = 0x781b0007;
  *(undefined4 *)((long)puVar2 + 0x70c) = 0;
  *(undefined8 *)((long)puVar2 + 0x704) = 0;
  *(undefined8 *)((long)puVar2 + 0x6fc) = 0;
  *(undefined8 *)((long)puVar2 + 0x6f4) = 0;
  *(undefined8 *)((long)puVar2 + 0x6ec) = 0;
  *(undefined8 *)((long)puVar2 + 0x6e4) = 0x781d0009;
  puVar2[0xe6] = 0;
  puVar2[0xe5] = 0x800020000;
  puVar2[0xe4] = 0;
  puVar2[0xe3] = 0;
  puVar2[0xe2] = 0x78110008;
  *(undefined4 *)(puVar2 + 0xe9) = 0;
  puVar2[0xe8] = 0;
  puVar2[0xe7] = 0x4000000781e0003;
  puVar3 = (ulong *)((long)puVar2 + 0x74c);
  uVar1 = 0;
  do {
    puVar3[3] = 0;
    puVar3[2] = 0;
    puVar3[1] = uVar1 >> 3;
    *puVar3 = uVar1 << 0x3d | 0x79180006;
    *(undefined4 *)(puVar3 + 3) = 0;
    uVar1 = uVar1 + 1;
    puVar3 = puVar3 + 4;
  } while (uVar1 != 4);
  *(undefined8 *)((long)puVar2 + 0x7d4) = 0x3ffcf00000226;
  *(undefined8 *)((long)puVar2 + 0x7cc) = 0x4000078120002;
  *(undefined4 *)((long)puVar2 + 0x804) = 0;
  *(undefined8 *)((long)puVar2 + 0x7e4) = 0;
  *(undefined8 *)((long)puVar2 + 0x7ec) = 0;
  *(undefined8 *)((long)puVar2 + 0x7f4) = 0;
  *(undefined8 *)((long)puVar2 + 0x7fc) = 0;
  *(undefined8 *)((long)puVar2 + 0x7dc) = 0x78150009;
  *(undefined4 *)(puVar2 + 0x106) = 0;
  puVar2[0x102] = 0;
  puVar2[0x103] = 0;
  puVar2[0x104] = 0;
  puVar2[0x105] = 0;
  puVar2[0x101] = 0x78190009;
  *(undefined4 *)((long)puVar2 + 0x85c) = 0;
  *(undefined8 *)((long)puVar2 + 0x83c) = 0;
  *(undefined8 *)((long)puVar2 + 0x844) = 0;
  *(undefined8 *)((long)puVar2 + 0x84c) = 0;
  *(undefined8 *)((long)puVar2 + 0x854) = 0;
  *(undefined8 *)((long)puVar2 + 0x834) = 0x781a0009;
  *(undefined4 *)(puVar2 + 0x111) = 0;
  puVar2[0x110] = 0;
  puVar2[0x10f] = 0;
  puVar2[0x10e] = 0;
  puVar2[0x10d] = 0;
  puVar2[0x10c] = 0x78160009;
  *(undefined8 *)((long)puVar2 + 0x894) = 0;
  *(undefined8 *)((long)puVar2 + 0x89c) = 0;
  *(undefined8 *)((long)puVar2 + 0x8a4) = 0;
  *(undefined8 *)((long)puVar2 + 0x8ac) = 0;
  *(undefined4 *)((long)puVar2 + 0x8b4) = 0;
  *(undefined8 *)((long)puVar2 + 0x88c) = 0x78170009;
  _memcpy(puVar2 + 0x117,&g_cInitGfx3dStateVfInstancings,0x198);
  puVar2[0x14a] = 0xa0000000784a0000;
  IOAccelCommandBufferPool2::submitBuffer();
  return;
}



// SurfaceStateCommon::SetLevelLayer(SurfaceUsage, unsigned int, unsigned int)

void __thiscall
SurfaceStateCommon::SetLevelLayer(SurfaceStateCommon *this,int param_1,uint param_2,uint param_3)

{
  if (param_1 == 1) {
    *(ulong *)(this + 0x14) = *(ulong *)(this + 0x14) & 0xfffffffffffffff0 | (ulong)(param_2 & 0xf);
  }
  else {
    if (param_1 != 0) {
      return;
    }
    *(ulong *)(this + 0x14) =
         *(ulong *)(this + 0x14) & 0xffffffffffffff0f | (ulong)((param_2 & 0xf) << 4);
  }
  *(uint *)(this + 0x10) = *(uint *)(this + 0x10) & 0xe003ffff | (param_3 & 0x7ff) << 0x12;
  return;
}



// SurfaceStateCommon::Generate(depth_resolve_params_t const*, SurfaceUsage)

void __thiscall SurfaceStateCommon::Generate(SurfaceStateCommon *this,long param_1,int param_2)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  
  *(undefined8 *)(this + 0x18) = 0x977000000000000;
  *(undefined8 *)this = 0x80000000e31d4000;
  *(undefined8 *)(this + 0x38) = 0;
  *(undefined8 *)(this + 0x30) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 8) = 0;
  if (param_2 != 2) {
    uVar1 = 1;
    if (param_2 == 0) {
      uVar1 = (ulong)*(uint *)(param_1 + 0x90);
    }
    uVar2 = 0x80000000431d4000;
    if ((*(byte *)(param_1 + 0x98) & 1) == 0) {
      uVar2 = 0x80000000231d4000;
    }
    *(undefined8 *)(this + 8) = 0;
    *(ulong *)this = uVar2;
    uVar2 = (ulong)(*(int *)(param_1 + 0x84) != 0) << 0x1c | uVar2;
    *(undefined8 *)(this + 8) = 0;
    *(ulong *)this = uVar2;
    lVar3 = (ulong)*(uint *)(param_1 + 0x84) << 0x35;
    *(ulong *)this = uVar2;
    *(long *)(this + 8) = lVar3;
    *(uint *)(this + 0x10) =
         (*(uint *)(param_1 + 0x84) & 0x7ff) * 0x80 +
         (*(uint *)((long)&g_cConvertNumMulitsampleHwState + uVar1 * 4) & 7) * 8 + 0x42;
    *(long *)(this + 8) = lVar3;
    *(ulong *)this = uVar2;
    if (param_2 == 0) {
      *(ulong *)(this + 0x14) = (ulong)(*(int *)(param_1 + 0x7c) - *(int *)(param_1 + 0x78) & 0xf);
      *(undefined4 *)(this + 0x1c) = 0x9770000;
    }
  }
  return;
}



// CombinedDepthStencilSurfaceState::Generate(depth_resolve_params_t const*, SurfaceUsage, Intent)

void __thiscall
CombinedDepthStencilSurfaceState::Generate
          (CombinedDepthStencilSurfaceState *this,long param_1,int param_2,int param_3)

{
  uint uVar1;
  ulong uVar2;
  ulong uVar3;
  uint uVar4;
  ulong uVar5;
  uint uVar6;
  uint uVar7;
  bool bVar8;
  
  SurfaceStateCommon::Generate((SurfaceStateCommon *)this,param_1,param_2);
  if (param_2 == 2) {
    return;
  }
  if (param_2 == 0) {
    if (param_3 == 2) {
      uVar1 = 0x21c0000;
    }
    else {
      if (param_3 != 3) {
        return;
      }
      uVar1 = 0x3680000;
      if ((*(byte *)(param_1 + 0x98) & 2) == 0) {
        uVar1 = 0x2240000;
      }
    }
  }
  else {
    bVar8 = (*(byte *)(param_1 + 0x98) & 2) == 0;
    uVar1 = 0x32c0000;
    if (bVar8) {
      uVar1 = 0x21c0000;
    }
    if ((param_2 == 1) && (uVar7 = *(uint *)(param_1 + 0x94), 1 < uVar7)) {
      uVar6 = *(uint *)(param_1 + 0x5c);
      uVar4 = uVar7 - 2 >> 1 | uVar7 << 0x1f;
      if (uVar4 < 2) {
        uVar4 = 1;
        if (1 < uVar6) {
          uVar4 = uVar6;
        }
        uVar6 = uVar4 * 2 + 2 & 0xfffffffc;
      }
      else if ((uVar4 == 3) || (uVar4 == 7)) {
        uVar4 = 1;
        if (1 < uVar6) {
          uVar4 = uVar6;
        }
        uVar6 = uVar4 * 4 + 4 & 0xfffffff8;
      }
      uVar4 = uVar6 + 3 & 0xfffffffc;
      uVar6 = *(uint *)(param_1 + 0x60);
      if (uVar7 == 4) {
LAB_0008327b:
        uVar7 = 1;
        if (1 < uVar6) {
          uVar7 = uVar6;
        }
        uVar6 = uVar7 * 2 + 2 & 0xfffffffc;
      }
      else if (uVar7 == 0x10) {
        uVar7 = 1;
        if (1 < uVar6) {
          uVar7 = uVar6;
        }
        uVar6 = uVar7 * 4 + 4 & 0xfffffff8;
      }
      else if (uVar7 == 8) goto LAB_0008327b;
      uVar3 = (ulong)((((uint)bVar8 * 4 + 4) * uVar4 + 0x7f & 0x3ff80) - 1 & 0x3ffff) << 0x20 |
              (ulong)((uVar6 + 3 & 0x3ffc) - 1 & 0x3fff) << 0x10 |
              *(ulong *)(this + 8) & 0xfffc0000c000c000 | (ulong)(uVar4 - 1 & 0x3fff);
      uVar5 = (ulong)(uVar6 + 3 >> 2 & 0x7fff) << 0x20 | *(ulong *)this & 0xffff8000ffffffff;
      goto LAB_00083209;
    }
  }
  uVar5 = (ulong)(*(int *)(param_1 + 0x5c) - 1U & 0x3fff);
  uVar3 = *(ulong *)(this + 8);
  *(ulong *)(this + 8) = uVar3 & 0xffffffffffffc000 | uVar5;
  uVar2 = (ulong)(*(int *)(param_1 + 0x60) - 1U & 0x3fff) << 0x10;
  *(ulong *)(this + 8) = uVar3 & 0xffffffffc000c000 | uVar5 | uVar2;
  uVar3 = uVar3 & 0xfffc0000c000c000 | uVar5 | uVar2 |
          (ulong)(*(int *)(param_1 + 0x20) - 1U & 0x3ffff) << 0x20;
  *(ulong *)(this + 8) = uVar3;
  uVar5 = *(ulong *)this & 0xffff8000ffffffff | (ulong)(*(uint *)(param_1 + 0x24) & 0x7fff) << 0x20;
LAB_00083209:
  *(ulong *)this = uVar5;
  *(ulong *)(this + 8) = uVar3;
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_1 + 0x18);
  *(ulong *)(this + 8) = uVar3;
  *(ulong *)this = (ulong)uVar1 | 0xa00000000017000 | uVar5 & 0x81fffffff8000fff;
  return;
}



// SeparateDepthSurfaceState::Generate(depth_resolve_params_t const*, SurfaceUsage)

void __thiscall
SeparateDepthSurfaceState::Generate(SeparateDepthSurfaceState *this,long param_1,int param_2)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  ulong uVar6;
  
  SurfaceStateCommon::Generate((SurfaceStateCommon *)this,param_1,param_2);
  if (param_2 == 2) {
    return;
  }
  if ((param_2 != 1) || (uVar5 = *(uint *)(param_1 + 0x94), uVar5 < 2)) {
    uVar6 = (ulong)(*(int *)(param_1 + 0x5c) - 1U & 0x3fff);
    uVar2 = *(ulong *)(this + 8);
    *(ulong *)(this + 8) = uVar2 & 0xffffffffffffc000 | uVar6;
    uVar4 = (ulong)(*(int *)(param_1 + 0x60) - 1U & 0x3fff) << 0x10;
    *(ulong *)(this + 8) = uVar2 & 0xffffffffc000c000 | uVar6 | uVar4;
    uVar6 = uVar2 & 0xfffc0000c000c000 | uVar6 | uVar4 |
            (ulong)(*(int *)(param_1 + 0x50) - 1U & 0x3ffff) << 0x20;
    *(ulong *)(this + 8) = uVar6;
    uVar2 = *(ulong *)this & 0xffff8000ffffffff |
            (ulong)(*(uint *)(param_1 + 0x54) & 0x7fff) << 0x20;
    goto LAB_000834c7;
  }
  uVar3 = *(uint *)(param_1 + 0x5c);
  uVar1 = uVar5 - 2 >> 1 | uVar5 << 0x1f;
  if (uVar1 < 2) {
    uVar1 = 1;
    if (1 < uVar3) {
      uVar1 = uVar3;
    }
    uVar3 = uVar1 * 2 + 2 & 0xfffffffc;
  }
  else if ((uVar1 == 3) || (uVar1 == 7)) {
    uVar1 = 1;
    if (1 < uVar3) {
      uVar1 = uVar3;
    }
    uVar3 = uVar1 * 4 + 4 & 0xfffffff8;
  }
  uVar1 = uVar3 + 3 & 0xfffffffc;
  uVar3 = *(uint *)(param_1 + 0x60);
  if (uVar5 == 4) {
LAB_00083431:
    uVar5 = 1;
    if (1 < uVar3) {
      uVar5 = uVar3;
    }
    uVar3 = uVar5 * 2 + 2 & 0xfffffffc;
  }
  else if (uVar5 == 0x10) {
    uVar5 = 1;
    if (1 < uVar3) {
      uVar5 = uVar3;
    }
    uVar3 = uVar5 * 4 + 4 & 0xfffffff8;
  }
  else if (uVar5 == 8) goto LAB_00083431;
  uVar6 = (ulong)((uVar1 * 4 + 0x7f & 0x3ff80) - 1 & 0x3ffff) << 0x20 |
          (ulong)((uVar3 + 3 & 0x3ffc) - 1 & 0x3fff) << 0x10 |
          *(ulong *)(this + 8) & 0xfffc0000c000c000 | (ulong)(uVar1 - 1 & 0x3fff);
  uVar2 = (ulong)(uVar3 + 3 >> 2 & 0x7fff) << 0x20 | *(ulong *)this & 0xffff8000ffffffff;
LAB_000834c7:
  *(ulong *)this = uVar2;
  *(ulong *)(this + 8) = uVar6;
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_1 + 0x48);
  *(ulong *)(this + 8) = uVar6;
  *(ulong *)this = uVar2 & 0x81fffffff8000fff | 0xa000000035d7000;
  return;
}



// SeparateStencilSurfaceState::Generate(depth_resolve_params_t const*, SurfaceUsage)

void __thiscall
SeparateStencilSurfaceState::Generate(SeparateStencilSurfaceState *this,long param_1,int param_2)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  ulong uVar6;
  uint uVar7;
  
  SurfaceStateCommon::Generate((SurfaceStateCommon *)this,param_1,param_2);
  if (param_2 == 2) {
    return;
  }
  uVar3 = *(int *)(param_1 + 0x5c) + 7U & 0xfffffff8;
  uVar1 = *(int *)(param_1 + 0x60) + 7U & 0xfffffff8;
  if ((param_2 != 1) || (uVar5 = *(uint *)(param_1 + 0x94), uVar5 < 2)) {
    uVar4 = (ulong)(uVar3 - 1 & 0x3fff);
    uVar2 = *(ulong *)(this + 8);
    uVar6 = (ulong)(uVar1 - 1 & 0x3fff) << 0x10;
    *(ulong *)(this + 8) = uVar6 | uVar2 & 0xffffffffc000c000 | uVar4;
    uVar6 = uVar6 | uVar2 & 0xfffc0000c000c000 | uVar4 |
            (ulong)(*(int *)(param_1 + 0x40) - 1U & 0x3ffff) << 0x20;
    *(ulong *)(this + 8) = uVar6;
    uVar2 = *(ulong *)this & 0xffff8000ffffffff |
            (ulong)(*(uint *)(param_1 + 0x44) & 0x7fff) << 0x20;
    goto LAB_000836a2;
  }
  uVar7 = uVar5 - 2 >> 1 | uVar5 << 0x1f;
  if (uVar7 < 2) {
    uVar7 = 1;
    if (1 < uVar3) {
      uVar7 = uVar3;
    }
    uVar3 = uVar7 * 2 + 2 & 0xfffffff4;
  }
  else if ((uVar7 == 3) || (uVar7 == 7)) {
    uVar7 = 1;
    if (1 < uVar3) {
      uVar7 = uVar3;
    }
    uVar3 = uVar7 * 4 + 4 & 0xffffffe8;
  }
  uVar3 = uVar3 + 7 & 0xfffffff8;
  if (uVar5 == 4) {
LAB_00083617:
    uVar5 = 1;
    if (1 < uVar1) {
      uVar5 = uVar1;
    }
    uVar1 = uVar5 * 2 + 2 & 0xfffffff4;
  }
  else if (uVar5 == 0x10) {
    uVar5 = 1;
    if (1 < uVar1) {
      uVar5 = uVar1;
    }
    uVar1 = uVar5 * 4 + 4 & 0xffffffe8;
  }
  else if (uVar5 == 8) goto LAB_00083617;
  uVar1 = uVar1 + 7 & 0xfffffff8;
  uVar6 = (ulong)((uVar3 + 0x3f & 0x3ffc0) - 1 & 0x3ffff) << 0x20 |
          (ulong)(uVar1 - 1 & 0x3fff) << 0x10 |
          *(ulong *)(this + 8) & 0xfffc0000c000c000 | (ulong)(uVar3 - 1 & 0x3fff);
  uVar2 = (ulong)(uVar1 >> 2 & 0x7ffe) << 0x20 | *(ulong *)this & 0xffff8000ffffffff;
LAB_000836a2:
  *(ulong *)this = uVar2;
  *(ulong *)(this + 8) = uVar6;
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_1 + 0x38);
  *(ulong *)(this + 8) = uVar6;
  *(ulong *)this = uVar2 & 0x81fffffff8000fff | 0xa000000050e9000;
  return;
}



// StencilOnlySurfaceState::Generate(depth_resolve_params_t const*, SurfaceUsage)

void __thiscall
StencilOnlySurfaceState::Generate(StencilOnlySurfaceState *this,long param_1,int param_2)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  ulong uVar6;
  
  SurfaceStateCommon::Generate((SurfaceStateCommon *)this,param_1,param_2);
  if (param_2 == 2) {
    return;
  }
  if ((param_2 != 1) || (uVar5 = *(uint *)(param_1 + 0x94), uVar5 < 2)) {
    uVar6 = (ulong)(*(int *)(param_1 + 0x5c) - 1U & 0x3fff);
    uVar2 = *(ulong *)(this + 8);
    *(ulong *)(this + 8) = uVar2 & 0xffffffffffffc000 | uVar6;
    uVar4 = (ulong)(*(int *)(param_1 + 0x60) - 1U & 0x3fff) << 0x10;
    *(ulong *)(this + 8) = uVar2 & 0xffffffffc000c000 | uVar6 | uVar4;
    uVar6 = uVar2 & 0xfffc0000c000c000 | uVar6 | uVar4 |
            (ulong)(*(int *)(param_1 + 0x20) - 1U & 0x3ffff) << 0x20;
    *(ulong *)(this + 8) = uVar6;
    uVar2 = *(ulong *)this & 0xffff8000ffffffff |
            (ulong)(*(uint *)(param_1 + 0x24) & 0x7fff) << 0x20;
    goto LAB_0008388b;
  }
  uVar3 = *(uint *)(param_1 + 0x5c);
  uVar1 = uVar5 - 2 >> 1 | uVar5 << 0x1f;
  if (uVar1 < 2) {
    uVar1 = 1;
    if (1 < uVar3) {
      uVar1 = uVar3;
    }
    uVar3 = uVar1 * 2 + 2 & 0xfffffffc;
  }
  else if ((uVar1 == 3) || (uVar1 == 7)) {
    uVar1 = 1;
    if (1 < uVar3) {
      uVar1 = uVar3;
    }
    uVar3 = uVar1 * 4 + 4 & 0xfffffff8;
  }
  uVar1 = uVar3 + 3 & 0xfffffffc;
  uVar3 = *(uint *)(param_1 + 0x60);
  if (uVar5 == 4) {
LAB_000837f9:
    uVar5 = 1;
    if (1 < uVar3) {
      uVar5 = uVar3;
    }
    uVar3 = uVar5 * 2 + 2 & 0xfffffffc;
  }
  else if (uVar5 == 0x10) {
    uVar5 = 1;
    if (1 < uVar3) {
      uVar5 = uVar3;
    }
    uVar3 = uVar5 * 4 + 4 & 0xfffffff8;
  }
  else if (uVar5 == 8) goto LAB_000837f9;
  uVar6 = (ulong)((uVar1 + 0x7f & 0x3ff80) - 1 & 0x3ffff) << 0x20 |
          (ulong)((uVar3 + 3 & 0x3ffc) - 1 & 0x3fff) << 0x10 |
          *(ulong *)(this + 8) & 0xfffc0000c000c000 | (ulong)(uVar1 - 1 & 0x3fff);
  uVar2 = (ulong)(uVar3 + 3 >> 2 & 0x7fff) << 0x20 | *(ulong *)this & 0xffff8000ffffffff;
LAB_0008388b:
  *(ulong *)this = uVar2;
  *(ulong *)(this + 8) = uVar6;
  *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_1 + 0x18);
  *(ulong *)(this + 8) = uVar6;
  *(ulong *)this = uVar2 & 0x81fffffff8000fff | 0xa000000050d7000;
  return;
}



// ResolveProlog::Generate(depth_resolve_params_t const*)

void __thiscall ResolveProlog::Generate(ResolveProlog *this,long param_1)

{
  uint uVar1;
  
  *(undefined8 *)this = 0x69041310000ac7dc;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined8 *)(this + 8) = 0x20007a000004;
  *(undefined4 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x30) = 0;
  *(undefined8 *)(this + 0x20) = 0x1050217a000004;
  *(undefined4 *)(this + 0x28) = 0;
  uVar1 = *(uint *)(param_1 + 0x10);
  *(undefined8 *)(this + 0x20) = 0x1050217a000004;
  *(uint *)(this + 0x28) = uVar1 & 0xfffffffc;
  *(undefined4 *)(this + 0x2c) = *(undefined4 *)(param_1 + 0x14);
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x38) = 0x4107a000004;
  *(undefined4 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x60) = 0;
  *(undefined8 *)(this + 0x50) = 0x20007a000004;
  *(undefined4 *)(this + 0x58) = 0;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// LegacyStart::Generate(depth_resolve_params_t const*)

void __cdecl LegacyStart::Generate(undefined8 *param_1)

{
  *param_1 = 0x28478140000;
  param_1[0xb] = 0;
  param_1[10] = 0x784e0002;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[5] = 0;
  param_1[6] = 0;
  param_1[1] = 0x7820000a;
  param_1[4] = 0x1f800000;
  param_1[7] = 0x80000100784f0000;
  param_1[8] = 0x780d0000;
  param_1[9] = 0x178180000;
  return;
}



// LegacyVertexBuffers::Generate(depth_resolve_params_t const*, unsigned int*, unsigned long long,
// ResolveRange, bool)

void __thiscall
LegacyVertexBuffers::Generate
          (LegacyVertexBuffers *this,long param_1,float *param_2,undefined8 param_3,ulong param_4,
          char param_5)

{
  uint uVar1;
  uint uVar2;
  byte bVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  ulong uVar12;
  
  uVar6 = (uint)(param_4 >> 0x20);
  if ((uint)param_4 <= uVar6) {
    bVar3 = (char)param_4 - (char)*(undefined4 *)(param_1 + 0x78);
    uVar8 = (uint)(*(uint *)(param_1 + 0x74) >> (bVar3 & 0x1f) == 0) |
            *(uint *)(param_1 + 0x74) >> (bVar3 & 0x1f);
    uVar11 = *(uint *)(param_1 + 0x6c) >> (bVar3 & 0x1f);
    uVar5 = *(uint *)(param_1 + 0x68) >> (bVar3 & 0x1f);
    uVar9 = (uint)(*(uint *)(param_1 + 0x70) >> (bVar3 & 0x1f) == 0) |
            *(uint *)(param_1 + 0x70) >> (bVar3 & 0x1f);
    uVar12 = param_4 & 0xffffffff;
    do {
      uVar2 = uVar5 + uVar9;
      uVar10 = uVar11 + uVar8;
      if (param_5 == '\0') {
        uVar1 = *(uint *)(param_1 + 0x94);
        uVar4 = uVar5;
        uVar7 = uVar11;
        if (1 < uVar1) {
          switch(uVar1 - 2 >> 1 | uVar1 << 0x1f) {
          case 1:
            uVar7 = uVar11 * 2 & 0xfffffffc;
            uVar10 = uVar10 * 2 + 2 & 0xfffffffc;
          case 0:
            uVar2 = uVar2 * 2 + 2 & 0xfffffffc;
            uVar4 = uVar5 * 2 & 0xfffffffc;
            break;
          case 3:
            uVar1 = uVar5 * 4;
            uVar2 = uVar2 * 4 + 4;
            uVar7 = uVar11 * 2;
            uVar10 = uVar10 * 2 + 2;
            goto LAB_00083a85;
          case 7:
            uVar2 = uVar2 * 4 + 4 & 0xfffffff8;
            uVar10 = uVar10 * 4 + 4 & 0xfffffff8;
            uVar4 = uVar5 * 4 & 0xfffffff8;
            uVar7 = uVar11 * 4 & 0xfffffff8;
          }
        }
      }
      else {
        uVar2 = uVar2 + 7;
        uVar10 = uVar10 + 3;
        uVar1 = uVar5;
        uVar7 = uVar11;
LAB_00083a85:
        uVar2 = uVar2 & 0xfffffff8;
        uVar10 = uVar10 & 0xfffffffc;
        uVar4 = uVar1 & 0xfffffff8;
        uVar7 = uVar7 & 0xfffffffc;
      }
      *param_2 = (float)uVar2;
      param_2[1] = (float)uVar10;
      param_2[2] = (float)uVar4;
      param_2[3] = (float)uVar10;
      param_2[4] = (float)uVar4;
      param_2[5] = (float)uVar7;
      uVar5 = uVar5 >> 1;
      uVar11 = uVar11 >> 1;
      uVar9 = (uint)(uVar9 < 2) | uVar9 >> 1;
      uVar8 = (uint)(uVar8 < 2) | uVar8 >> 1;
      uVar2 = (int)uVar12 + 1;
      uVar12 = (ulong)uVar2;
      param_2 = param_2 + 6;
    } while (uVar2 <= uVar6);
  }
  *(undefined4 *)this = 0x78080003;
  *(undefined8 *)(this + 8) = param_3;
  *(uint *)(this + 0x10) = (uVar6 - (uint)param_4) * 0x18 + 0x18;
  *(uint *)(this + 4) = *(uint *)(this + 4) & 0x3819000 | 0xa4008;
  return;
}



// LegacyCombinedSsStart::Generate(depth_resolve_params_t const*, unsigned long long, CombinedMode)

void __thiscall
LegacyCombinedSsStart::Generate(LegacyCombinedSsStart *this,long param_1,ulong param_2,uint param_3)

{
  int iVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  undefined *puVar5;
  ulong uVar6;
  
  *(undefined8 *)(this + 0xe0) = 0;
  *(undefined8 *)(this + 0xd8) = 0x784e0002;
  *(undefined8 *)(this + 0x98) = 0;
  *(undefined8 *)(this + 0xa0) = 0;
  *(undefined8 *)(this + 0xb0) = 0;
  *(undefined8 *)(this + 0xb8) = 0;
  *(undefined8 *)(this + 0x90) = 0x7820000a;
  *(undefined8 *)(this + 0xa8) = 0x1f800000;
  *(undefined8 *)(this + 0xc0) = 0x80000100784f0000;
  *(undefined8 *)(this + 0x88) = 0xa8478140000;
  *(undefined8 *)(this + 0x58) = 0xe004000078050006;
  *(undefined8 *)(this + 0x60) = 0;
  *(undefined8 *)(this + 0x68) = 0;
  *(undefined8 *)(this + 0x70) = 0;
  *(undefined8 *)(this + 200) = 0x780d0000;
  *(undefined8 *)(this + 0xd0) = 0x178180000;
  *(undefined8 *)(this + 0x78) = 0x4581780e0000;
  if (param_3 == 3) {
    lVar4 = ((ulong)((*(byte *)(param_1 + 0x98) & 2) == 0) << 0x27) + 0x448178240000;
  }
  else {
    lVar4 = 0x440178240000;
  }
  *(long *)(this + 0x80) = lVar4;
  _memcpy(this,&g_cInitGfxStateBaseAddress,0x58);
  *(ulong *)(this + 0x10) =
       (ulong)((uint)*(undefined8 *)(this + 0x10) & 0x81e) + (param_2 & 0xfffffffffffff000) + 0x701;
  uVar2 = *(ulong *)(this + 0xa8);
  uVar3 = *(ulong *)(this + 0x98);
  *(ulong *)(this + 0x98) = uVar3 | 0x8000000000000000;
  *(ulong *)(this + 0xa8) = uVar2 | 3;
  if (param_3 < 7) {
    puVar5 = (undefined *)0x3300;
    uVar6 = 0x320000000000;
    switch(param_3) {
    case 0:
    case 6:
      iVar1 = *(int *)(param_1 + 0x90);
      if (iVar1 == *(int *)(param_1 + 0x94)) {
        puVar5 = (undefined *)0x2340;
        uVar6 = 0x224000000000;
        switch(iVar1 - 2U >> 1 | iVar1 << 0x1f) {
        case 0:
          puVar5 = (undefined *)0x2780;
          uVar6 = 0x264000000000;
          break;
        case 1:
          puVar5 = (undefined *)0x2a40;
          uVar6 = 0x28c000000000;
          break;
        case 3:
          puVar5 = (undefined *)0x2d40;
          uVar6 = 0x2bc000000000;
          break;
        case 7:
          puVar5 = (undefined *)0x3080;
          uVar6 = 0x2ec000000000;
        }
      }
      else {
        puVar5 = (undefined *)0x2540;
        uVar6 = 0x244000000000;
      }
      break;
    case 1:
      break;
    default:
      iVar1 = *(int *)(param_1 + 0x90);
      if ((*(byte *)(param_1 + 0x98) & 2) == 0) {
        if (iVar1 == *(int *)(param_1 + 0x94)) {
          puVar5 = &DAT_00001100;
          uVar6 = 0x100000000000;
          switch(iVar1 - 2U >> 1 | iVar1 << 0x1f) {
          case 0:
            puVar5 = (undefined *)0x1600;
            uVar6 = 0x148000000000;
            break;
          case 1:
            puVar5 = (undefined *)0x1940;
            uVar6 = 0x178000000000;
            break;
          case 3:
            puVar5 = (undefined *)0x1cc0;
            uVar6 = 0x1b0000000000;
            break;
          case 7:
            puVar5 = (undefined *)0x2080;
            uVar6 = 0x1e8000000000;
          }
        }
        else {
          puVar5 = &DAT_00001340;
          uVar6 = 0x120000000000;
        }
      }
      else if (iVar1 == *(int *)(param_1 + 0x94)) {
        puVar5 = (undefined *)0x100;
        uVar6 = 0;
        switch(iVar1 - 2U >> 1 | iVar1 << 0x1f) {
        case 0:
          puVar5 = (undefined *)0x540;
          uVar6 = 0x40000000000;
          break;
        case 1:
          puVar5 = (undefined *)0x800;
          uVar6 = 0x68000000000;
          break;
        case 3:
          puVar5 = (undefined *)0xb00;
          uVar6 = 0x98000000000;
          break;
        case 7:
          puVar5 = (undefined *)0xe40;
          uVar6 = 0xc8000000000;
        }
      }
      else {
        puVar5 = (undefined *)0x300;
        uVar6 = 0x20000000000;
      }
      break;
    case 5:
      iVar1 = *(int *)(param_1 + 0x90);
      if (iVar1 == *(int *)(param_1 + 0x94)) {
        puVar5 = (undefined *)0x3500;
        uVar6 = 0x340000000000;
        switch(iVar1 - 2U >> 1 | iVar1 << 0x1f) {
        case 0:
          puVar5 = (undefined *)0x3940;
          uVar6 = 0x380000000000;
          break;
        case 1:
          puVar5 = (undefined *)0x3c00;
          uVar6 = 0x3a8000000000;
          break;
        case 3:
          puVar5 = (undefined *)0x3f00;
          uVar6 = 0x3d8000000000;
          break;
        case 7:
          puVar5 = (undefined *)0x4240;
          uVar6 = 0x408000000000;
        }
      }
      else {
        puVar5 = (undefined *)0x3700;
        uVar6 = 0x360000000000;
      }
    }
    *(ulong *)(this + 0x90) = *(ulong *)(this + 0x90) & 0x3fffffffff | uVar6;
    *(undefined8 *)(this + 0xa0) = *(undefined8 *)(this + 0xa0);
    *(ulong *)(this + 0x98) = uVar3 & 0xffffffff00000000 | 0x8000000000000000;
    *(undefined8 *)(this + 0xb0) = *(undefined8 *)(this + 0xb0);
    *(ulong *)(this + 0xa8) = uVar2 & 0xff80ff80ffffffff | 0x2000200000003;
    *(ulong *)(this + 0xb8) = (ulong)((uint)*(undefined8 *)(this + 0xb8) & 0x3f) | (ulong)puVar5;
  }
  return;
}



// LegacyCombinedSsDispatch::Generate(unsigned int, unsigned int, unsigned int)

void __thiscall
LegacyCombinedSsDispatch::Generate
          (LegacyCombinedSsDispatch *this,uint param_1,int param_2,undefined4 param_3)

{
  *(ulong *)this = (ulong)(param_1 >> 5 & 0x7ff) << 0x25 | 0x782a0000;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined8 *)(this + 8) = 0x10027a000004;
  *(undefined4 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x28) = 3;
  *(undefined8 *)(this + 0x30) = 1;
  *(undefined8 *)(this + 0x20) = 0x7b000008;
  *(undefined4 *)(this + 0x28) = 3;
  *(undefined4 *)(this + 0x30) = param_3;
  *(int *)(this + 0x2c) = param_2 * 3;
  return;
}



// LegacyHizStart::Generate(depth_resolve_params_t const*, unsigned int, unsigned int)

void __thiscall
LegacyHizStart::Generate(LegacyHizStart *this,long param_1,uint param_2,uint param_3)

{
  ulong uVar1;
  ulong uVar2;
  
  *(undefined8 *)this = 0x28478140000;
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x50) = 0x784e0002;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x30) = 0;
  *(undefined8 *)(this + 8) = 0x7820000a;
  *(undefined8 *)(this + 0x20) = 0x1f800000;
  *(undefined8 *)(this + 0x38) = 0x80000100784f0000;
  *(undefined8 *)(this + 0x40) = 0x780d0000;
  *(undefined8 *)(this + 0x48) = 0x178180000;
  HizCommon::Generate((HizCommon *)(this + 0x60),param_1,param_2,param_3);
  uVar2 = (ulong)((*(byte *)(param_1 + 0x58) & 8) == 0) << 0x3b;
  uVar1 = *(ulong *)this;
  *(ulong *)this = uVar1 & 0xf7ffffffffffffff | uVar2;
  *(ulong *)this =
       uVar1 & 0xe7ffffffffffffff | uVar2 | (ulong)(*(uint *)(param_1 + 0x58) >> 3 & 1) << 0x3c;
  switch(*(int *)(param_1 + 0x94) - 2U >> 1 | *(int *)(param_1 + 0x94) << 0x1f) {
  case 0:
    *(ulong *)(this + 0x40) = *(ulong *)(this + 0x40) & 0xffffffe1ffffffff | 0x200000000;
    uVar2 = *(ulong *)(this + 0x48) & 0xffff0000ffffffff;
    uVar1 = 0x300000000;
    break;
  case 1:
    *(ulong *)(this + 0x40) = *(ulong *)(this + 0x40) & 0xffffffe1ffffffff | 0x400000000;
    uVar2 = *(ulong *)(this + 0x48) & 0xffff0000ffffffff;
    uVar1 = 0xf00000000;
    break;
  default:
    *(ulong *)(this + 0x40) = *(ulong *)(this + 0x40) & 0xffffffe1ffffffff;
    uVar1 = *(ulong *)(this + 0x48) & 0xffff0000ffffffff | 0x100000000;
    goto LAB_00084364;
  case 3:
    *(ulong *)(this + 0x40) = *(ulong *)(this + 0x40) & 0xffffffe1ffffffff | 0x600000000;
    uVar2 = *(ulong *)(this + 0x48) & 0xffff0000ffffffff;
    uVar1 = 0xff00000000;
    break;
  case 7:
    *(ulong *)(this + 0x40) = *(ulong *)(this + 0x40) & 0xffffffe1ffffffff | 0x800000000;
    uVar1 = *(ulong *)(this + 0x48) | 0xffff00000000;
    goto LAB_00084364;
  }
  uVar1 = uVar1 | uVar2;
LAB_00084364:
  *(ulong *)(this + 0x48) = uVar1;
  uVar1 = *(ulong *)(this + 0x50);
  *(ulong *)(this + 0x50) = uVar1 | 0x100000000;
  uVar2 = uVar1 & 0xffffff1cffffffff | 0x2300000000;
  if ((*(byte *)(param_1 + 0x58) & 8) == 0) {
    uVar2 = uVar1 & 0xffffff1dffffffff | 0x100000000;
  }
  *(ulong *)(this + 0x50) = uVar2;
  *(uint *)(this + 0x20) = *(uint *)(this + 0x20) & 0x7ff7ff;
  return;
}



// HizCommon::Generate(depth_resolve_params_t const*, unsigned int, unsigned int)

void __thiscall HizCommon::Generate(HizCommon *this,long param_1,uint param_2,uint param_3)

{
  HizCommon *pHVar1;
  ulong uVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  
  *(undefined4 *)(this + 8) = 0;
  *(undefined8 *)this = 0x78040001;
  *(undefined4 *)(this + 4) = *(undefined4 *)(param_1 + 0x88);
  *(uint *)(this + 8) = *(uint *)(param_1 + 0x98) >> 2 & 1;
  pHVar1 = this + 0xc;
  *(undefined8 *)(this + 0xc) = 0xe004000078050006;
  *(undefined8 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0x1c) = 0;
  *(undefined8 *)(this + 0x24) = 0;
  uVar7 = (ulong)(*(int *)(param_1 + 0x5c) - 1U & 0x3fff) << 4;
  *(undefined8 *)(this + 0x24) = 0;
  *(undefined8 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0xc) = 0xe004000078050006;
  *(ulong *)(this + 0x1c) = uVar7;
  uVar7 = (ulong)(*(int *)(param_1 + 0x60) - 1U & 0x3fff) << 0x12 | uVar7;
  *(undefined8 *)(this + 0x24) = 0;
  *(undefined8 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0xc) = 0xe004000078050006;
  *(ulong *)(this + 0x1c) = uVar7;
  uVar7 = (ulong)(*(int *)(param_1 + 100) - 1) << 0x35 | uVar7;
  *(undefined8 *)(this + 0x24) = 0;
  *(undefined8 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0xc) = 0xe004000078050006;
  *(ulong *)(this + 0x1c) = uVar7;
  uVar4 = (ulong)*(uint *)(param_1 + 100) << 0x35;
  uVar7 = (ulong)(param_2 & 0xf) | (ulong)(param_3 & 0x7ff) << 0x2a | uVar7;
  *(ulong *)(this + 0x1c) = uVar7;
  *(undefined8 *)(this + 0x14) = 0;
  *(undefined8 *)(this + 0xc) = 0xf044000078050006;
  *(ulong *)(this + 0x24) = uVar4;
  uVar2 = 0x5044000078050006;
  if ((*(byte *)(param_1 + 0x98) & 1) == 0) {
    uVar2 = 0x3044000078050006;
  }
  *(ulong *)(this + 0x24) = uVar4;
  *(ulong *)(this + 0x1c) = uVar7;
  *(undefined8 *)(this + 0x14) = 0;
  *(ulong *)(this + 0xc) = uVar2;
  if (*(int *)(param_1 + 0x50) == 0) {
    uVar6 = (ulong)(*(int *)(param_1 + 0x20) - 1U & 0x3ffff) << 0x20;
    uVar5 = uVar2 | uVar6;
    *(undefined8 *)(this + 0x14) = 0;
    *(ulong *)(this + 0x1c) = uVar7;
    *(ulong *)(this + 0x24) = uVar4;
    *(ulong *)pHVar1 = uVar5;
    uVar4 = uVar4 | (ulong)(*(uint *)(param_1 + 0x24) & 0x7fff) << 0x20;
    *(ulong *)(this + 0x1c) = uVar7;
    *(undefined8 *)(this + 0x14) = 0;
    *(ulong *)pHVar1 = uVar5;
    *(ulong *)(this + 0x24) = uVar4;
    uVar3 = *(ulong *)(param_1 + 0x18) & 0xffffffffffff;
    *(ulong *)(this + 0x24) = uVar4;
    *(ulong *)(this + 0x1c) = uVar7;
    *(ulong *)(this + 0x14) = uVar3;
    *(ulong *)pHVar1 = uVar5;
    uVar2 = uVar2 & 0x7fe3ffffffffffff | uVar6 | (ulong)(*(uint *)(param_1 + 0x8c) & 7) << 0x32;
  }
  else {
    uVar5 = (ulong)(*(int *)(param_1 + 0x50) - 1U & 0x3ffff) << 0x20;
    uVar3 = uVar2 | uVar5;
    *(undefined8 *)(this + 0x14) = 0;
    *(ulong *)(this + 0x1c) = uVar7;
    *(ulong *)(this + 0x24) = uVar4;
    *(ulong *)pHVar1 = uVar3;
    uVar4 = uVar4 | (ulong)(*(uint *)(param_1 + 0x54) & 0x7fff) << 0x20;
    *(ulong *)(this + 0x1c) = uVar7;
    *(undefined8 *)(this + 0x14) = 0;
    *(ulong *)pHVar1 = uVar3;
    *(ulong *)(this + 0x24) = uVar4;
    uVar3 = *(ulong *)(param_1 + 0x48) & 0xffffffffffff;
    uVar2 = uVar2 & 0x7fe3ffffffffffff | uVar5 | 0x4000000000000;
  }
  *(ulong *)(this + 0xc) = uVar2;
  *(ulong *)(this + 0x14) = uVar3;
  *(ulong *)(this + 0x1c) = uVar7;
  *(ulong *)(this + 0x24) = uVar4;
  *(undefined8 *)(this + 0x2c) = 0x78070003;
  *(undefined8 *)(this + 0x34) = 0;
  *(undefined4 *)(this + 0x3c) = 0;
  uVar5 = (ulong)(*(int *)(param_1 + 0x30) - 1U & 0x1ffff) << 0x20;
  *(ulong *)(this + 0x2c) = uVar5 | 0x78070003;
  *(uint *)(this + 0x3c) = *(uint *)(param_1 + 0x34) & 0x7fff;
  *(undefined8 *)(this + 0x34) = *(undefined8 *)(param_1 + 0x28);
  *(ulong *)(this + 0x24) = uVar4;
  *(ulong *)(this + 0x1c) = uVar7 | 0xa00000000;
  *(ulong *)(this + 0x14) = uVar3;
  *(ulong *)(this + 0xc) = uVar2;
  *(ulong *)(this + 0x2c) = uVar5 | 0x1400000078070003;
  return;
}



// LegacyHizDispatch::Generate(unsigned int)

void __thiscall LegacyHizDispatch::Generate(LegacyHizDispatch *this,int param_1)

{
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x18) = 0;
  *(undefined8 *)(this + 8) = 3;
  *(undefined8 *)(this + 0x10) = 1;
  *(undefined8 *)this = 0x7b000008;
  *(undefined4 *)(this + 8) = 3;
  *(undefined4 *)(this + 0x10) = 1;
  *(int *)(this + 0xc) = param_1 * 3;
  *(undefined4 *)(this + 0x28) = 0xac7dc;
  return;
}



// HizDispatch::Generate(depth_resolve_params_t const*, unsigned int)

void __thiscall HizDispatch::Generate(HizDispatch *this,long *param_1,char param_2)

{
  ulong uVar1;
  byte bVar2;
  ulong uVar3;
  uint uVar4;
  uint uVar5;
  ulong uVar6;
  
  uVar1 = (ulong)(*(uint *)((long)&g_cConvertNumMulitsampleHwState +
                           (ulong)*(uint *)(param_1 + 0x12) * 4) & 7);
  *(ulong *)this = uVar1 << 0x21 | 0x780d0000;
  bVar2 = param_2 - (char)(int)param_1[0xf];
  uVar5 = *(uint *)(param_1 + 0xd) >> (bVar2 & 0x1f);
  uVar4 = *(uint *)((long)param_1 + 0x6c) >> (bVar2 & 0x1f);
  uVar3 = (ulong)(uVar4 + ((uint)(*(uint *)((long)param_1 + 0x74) >> (bVar2 & 0x1f) == 0) |
                          *(uint *)((long)param_1 + 0x74) >> (bVar2 & 0x1f)) + 3 & 0xfffc) << 0x30 |
          (ulong)(uVar5 + ((uint)(*(uint *)(param_1 + 0xe) >> (bVar2 & 0x1f) == 0) |
                          *(uint *)(param_1 + 0xe) >> (bVar2 & 0x1f)) + 7 & 0xfff8) << 0x20 |
          (ulong)(uVar4 & 0xfffc) << 0x10 | (ulong)(uVar5 & 0xfff8);
  *(undefined8 *)(this + 8) = 0x78520003;
  *(undefined4 *)(this + 0x18) = 1;
  *(ulong *)(this + 0x10) = uVar3;
  uVar6 = (ulong)(*(byte *)(param_1 + 0xb) >> 3 & 1) << 0x3c;
  *(ulong *)(this + 0x10) = uVar3;
  *(undefined4 *)(this + 0x18) = 1;
  *(ulong *)(this + 8) = uVar6 | 0x78520003;
  uVar6 = ((ulong)(*(byte *)(param_1 + 0xb) & 1) << 0x39) + uVar6 + 0x78520003;
  *(ulong *)(this + 0x10) = uVar3;
  *(undefined4 *)(this + 0x18) = 1;
  *(ulong *)(this + 8) = uVar6;
  uVar1 = uVar1 << 0x2d | (ulong)((*(byte *)(param_1 + 0xb) & 8) == 0) << 0x3b | uVar6;
  *(ulong *)(this + 0x10) = uVar3;
  *(undefined4 *)(this + 0x18) = 1;
  *(ulong *)(this + 8) = uVar1;
  uVar5 = ~(-1 << (*(byte *)(param_1 + 0x12) & 0x1f)) & 0xffff;
  *(ulong *)(this + 0x10) = uVar3;
  *(ulong *)(this + 8) = uVar1;
  *(uint *)(this + 0x18) = uVar5;
  uVar4 = *(uint *)(param_1 + 0x12);
  *(ulong *)(this + 0x10) = uVar3;
  *(uint *)(this + 0x18) = uVar5;
  *(ulong *)(this + 8) = (ulong)(1 < uVar4) << 0x3a | uVar1;
  *(undefined8 *)(this + 0x24) = 0;
  *(undefined8 *)(this + 0x2c) = 0;
  *(undefined8 *)(this + 0x1c) = 0x40007a000004;
  *(undefined4 *)(this + 0x24) = 0;
  uVar4 = *(uint *)(param_1 + 2);
  *(undefined8 *)(this + 0x1c) = 0x40007a000004;
  *(uint *)(this + 0x24) = uVar4 & 0xfffffffc;
  *(undefined4 *)(this + 0x28) = *(undefined4 *)((long)param_1 + 0x14);
  if ((*(byte *)(*param_1 + 0x14) & 8) != 0) {
    *(undefined8 *)(this + 0x1c) = 0x60007a000004;
    *(uint *)(this + 0x24) = uVar4 & 0xfffffffc;
  }
  *(undefined4 *)(this + 0x44) = 1;
  *(undefined8 *)(this + 0x3c) = 0;
  *(undefined8 *)(this + 0x34) = 0x78520003;
  return;
}



// ResolveEpilog::Generate(unsigned long long)

void __thiscall ResolveEpilog::Generate(ResolveEpilog *this,undefined8 param_1)

{
  *(undefined8 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x10) = 0;
  *(undefined8 *)this = 0x20007a000004;
  *(undefined4 *)(this + 8) = 0;
  *(undefined8 *)(this + 0x20) = 0;
  *(undefined8 *)(this + 0x28) = 0;
  *(undefined8 *)(this + 0x18) = 0x1050217a000004;
  *(uint *)(this + 0x20) = (uint)param_1 & 0xfffffffc;
  *(int *)(this + 0x24) = (int)((ulong)param_1 >> 0x20);
  *(undefined8 *)(this + 0x38) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x30) = 0x4107a000004;
  *(undefined4 *)(this + 0x38) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x48) = 0x7a000004;
  *(undefined8 *)(this + 0x48) = 0x20007a000004;
  *(undefined4 *)(this + 0x50) = 0;
  *(undefined4 *)(this + 0x60) = 0xac7dc;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// resolve_main(IOAccelCommandBufferPool2*, depth_resolve_params_t const*)

void __cdecl resolve_main(uint *param_1,long *param_2)

{
  LegacyHizStart *this;
  ushort *puVar1;
  byte bVar2;
  int iVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  bool bVar9;
  ushort uVar10;
  int iVar11;
  uint uVar12;
  undefined8 *puVar13;
  long lVar14;
  undefined4 *puVar15;
  undefined8 uVar16;
  HizCommon *this_00;
  HizDispatch *pHVar17;
  uint uVar18;
  ulong uVar19;
  ulong uVar20;
  uint uVar21;
  ulong uVar22;
  undefined8 *puVar23;
  uint uVar24;
  uint uVar25;
  ulong uVar26;
  uint uVar27;
  uint uVar28;
  uint uVar29;
  uint uVar30;
  ulong uVar31;
  bool bVar32;
  uint local_60;
  ulong local_38;
  
  uVar30 = *(uint *)((long)param_2 + 0x84);
  if ((*(byte *)(param_2 + 0xb) & 3) == 0) {
    uVar31 = (ulong)(uVar30 + 1);
    uVar21 = *(uint *)(param_2 + 0x10);
    uVar24 = *(uint *)((long)param_2 + 0x7c);
    uVar12 = *(uint *)(param_2 + 0xf);
    local_38 = (ulong)(uVar24 + 1);
    uVar28 = uVar12;
    if (uVar21 <= uVar30) {
      uVar25 = (uint)(1L << ((byte)uVar24 & 0x3f));
      bVar32 = true;
      uVar29 = uVar21;
      uVar18 = uVar21;
      do {
        uVar27 = (uint)*(ushort *)
                        (*(long *)(param_2[1] + (ulong)((*(byte *)(param_2 + 0xb) & 8) == 0) * 8) +
                        (ulong)uVar29 * 2) &
                 ((int)(-1L << ((byte)uVar12 & 0x3f)) + uVar25 | uVar25) & 0xffff;
        if (uVar27 != 0) {
          if (uVar29 < (uint)uVar31) {
            uVar31 = (ulong)uVar29;
          }
          bVar9 = uVar21 < uVar29;
          uVar21 = uVar18;
          if (bVar9) {
            uVar21 = uVar29;
          }
          uVar18 = uVar21;
          if (bVar32) {
            uVar7 = 0;
            if (uVar27 != 0) {
              for (; (uVar27 >> uVar7 & 1) == 0; uVar7 = uVar7 + 1) {
              }
            }
            uVar8 = 0x1f;
            if (uVar27 != 0) {
              for (; uVar27 >> uVar8 == 0; uVar8 = uVar8 - 1) {
              }
            }
            bVar32 = uVar8 != uVar24 || uVar7 != uVar12;
            if (uVar7 < (uint)local_38) {
              local_38 = (ulong)uVar7;
            }
            if (uVar28 < uVar8) {
              uVar28 = uVar8;
            }
          }
        }
        uVar29 = uVar29 + 1;
      } while (uVar29 <= uVar30);
    }
    if (uVar21 < (uint)uVar31) {
      return;
    }
  }
  else {
    uVar31 = (ulong)*(uint *)(param_2 + 0x10);
    local_38 = (ulong)*(uint *)(param_2 + 0xf);
    uVar28 = *(uint *)((long)param_2 + 0x7c);
    uVar21 = uVar30;
  }
  uVar26 = (ulong)uVar21;
  uVar24 = (uint)param_1;
  puVar13 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
  *(undefined8 **)(param_1 + 0x616) = puVar13 + 0xd;
  *puVar13 = 0x69041310000ac7dc;
  puVar13[2] = 0;
  puVar13[3] = 0;
  puVar13[1] = 0x20007a000004;
  *(undefined4 *)(puVar13 + 2) = 0;
  puVar13[5] = 0;
  puVar13[6] = 0;
  puVar13[4] = 0x1050217a000004;
  *(undefined4 *)(puVar13 + 5) = 0;
  uVar30 = *(uint *)(param_2 + 2);
  puVar13[4] = 0x1050217a000004;
  *(uint *)(puVar13 + 5) = uVar30 & 0xfffffffc;
  *(undefined4 *)((long)puVar13 + 0x2c) = *(undefined4 *)((long)param_2 + 0x14);
  puVar13[8] = 0;
  puVar13[9] = 0;
  puVar13[7] = 0x4107a000004;
  *(undefined4 *)(puVar13 + 8) = 0;
  puVar13[0xb] = 0;
  puVar13[0xc] = 0;
  puVar13[10] = 0x20007a000004;
  *(undefined4 *)(puVar13 + 0xb) = 0;
  iVar3 = *(int *)((long)param_2 + 0x8c);
  if (((*(byte *)(param_2 + 0xb) & 8) == 0) && ((iVar3 == 3 || (iVar3 == 0)))) {
    iVar11 = iVar3;
    if ((*(byte *)(param_2 + 0xb) & 4) != 0) {
      resolve_combined(param_1,(long)param_2,0,local_38 | (ulong)uVar28 << 0x20,
                       uVar31 | uVar26 << 0x20);
      iVar11 = *(int *)((long)param_2 + 0x8c);
    }
    if (iVar11 == 0) {
      resolve_combined(param_1,(long)param_2,1,local_38 | (ulong)uVar28 << 0x20,
                       uVar31 | uVar26 << 0x20);
    }
  }
  local_60 = (uint)uVar31;
  if ((*(byte *)(param_2 + 0xb) & 0x10) != 0) {
    if ((*(byte *)(param_2 + 0x13) & 8) == 0) {
      if (local_60 <= uVar21) {
        iVar11 = (uVar28 - (uint)local_38) + 1;
        uVar30 = iVar11 * 0x4c;
        lVar14 = (ulong)(uint)(iVar11 * 0x18) + (ulong)(uVar30 + 0xb4) + 0x30;
        uVar22 = (ulong)(uVar30 + 0xb4 >> 2);
        uVar19 = uVar31;
        do {
          puVar15 = (undefined4 *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
          this = (LegacyHizStart *)((long)puVar15 + uVar22 * -4 + lVar14);
          *puVar15 = 0xac7dc;
          *(undefined8 *)(puVar15 + 1) = 0x18800101;
          puVar15[3] = 0;
          uVar16 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
          puVar15[3] = (int)((ulong)uVar16 >> 0x20);
          *(ulong *)(puVar15 + 1) =
               *(ulong *)(puVar15 + 1) & 0x3ffffffff | (ulong)((uint)uVar16 & 0xfffffffc) << 0x20;
          uVar12 = (uint)uVar19;
          LegacyHizStart::Generate(this,(long)param_2,(uint)local_38,uVar12);
          uVar16 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
          LegacyVertexBuffers::Generate
                    ((LegacyVertexBuffers *)((long)puVar15 + uVar22 * -4 + lVar14 + 0xa0),
                     (long)param_2,(float *)((long)puVar15 + 0x2fU & 0xffffffffffffffe0),uVar16,
                     local_38 | (ulong)uVar28 << 0x20,'\x01');
          puVar13 = (undefined8 *)((long)puVar15 + uVar22 * -4 + lVar14 + 0xb4);
          if ((uint)local_38 < uVar28) {
            uVar29 = (uint)local_38 + 1;
            iVar11 = (uint)local_38 * 3;
            do {
              puVar13[4] = 0;
              puVar13[3] = 0;
              puVar13[1] = 3;
              puVar13[2] = 1;
              *puVar13 = 0x7b000008;
              *(undefined4 *)(puVar13 + 1) = 3;
              *(undefined4 *)(puVar13 + 2) = 1;
              *(int *)((long)puVar13 + 0xc) = iVar11;
              *(undefined4 *)(puVar13 + 5) = 0xac7dc;
              uVar16 = *(undefined8 *)(this + 0x6c);
              uVar4 = *(undefined8 *)(this + 0x74);
              uVar5 = *(undefined8 *)(this + 0x7c);
              *(undefined8 *)((long)puVar13 + 0x44) = *(undefined8 *)(this + 0x84);
              *(undefined8 *)((long)puVar13 + 0x3c) = uVar5;
              *(undefined8 *)((long)puVar13 + 0x34) = uVar4;
              *(undefined8 *)((long)puVar13 + 0x2c) = uVar16;
              *(ulong *)((long)puVar13 + 0x3c) =
                   (ulong)(uVar29 & 0xf) | (ulong)(uVar12 & 0x7ff) << 0x2a |
                   *(ulong *)((long)puVar13 + 0x3c) & 0xffe003fffffffff0;
              puVar13 = (undefined8 *)((long)puVar13 + 0x4c);
              iVar11 = iVar11 + 3;
              bVar32 = uVar29 != uVar28;
              uVar29 = uVar29 + 1;
            } while (bVar32);
          }
          puVar13[4] = 0;
          puVar13[3] = 0;
          puVar13[1] = 3;
          puVar13[2] = 1;
          *puVar13 = 0x7b000008;
          *(undefined4 *)(puVar13 + 1) = 3;
          *(undefined4 *)(puVar13 + 2) = 1;
          *(uint *)((long)puVar13 + 0xc) = uVar28 * 3;
          *(undefined4 *)(puVar13 + 5) = 0xac7dc;
          uVar29 = uVar12 + 1;
          if (uVar29 <= uVar21) {
            uVar18 = param_1[0x614] - param_1[0x616] & 0xfffffffc;
            uVar12 = uVar18 / uVar30 + uVar12;
            if (uVar21 <= uVar12) {
              uVar12 = uVar21;
            }
            if ((uVar30 <= uVar18) && (uVar29 <= uVar12)) {
              do {
                uVar19 = *(ulong *)(this + 0x7c);
                uVar16 = *(undefined8 *)(this + 0x6c);
                uVar4 = *(undefined8 *)(this + 0x74);
                *(undefined8 *)((long)puVar13 + 0x44) = *(undefined8 *)(this + 0x84);
                uVar20 = (ulong)(uVar29 & 0x7ff) << 0x2a;
                *(undefined8 *)((long)puVar13 + 0x34) = uVar4;
                puVar23 = (undefined8 *)((long)puVar13 + 0x4c);
                *(undefined8 *)((long)puVar13 + 0x2c) = uVar16;
                *(ulong *)((long)puVar13 + 0x3c) =
                     (uVar19 & 0xffe003fffffffff0) + (ulong)((uint)local_38 & 0xf) | uVar20;
                uVar18 = (uint)local_38 + 1;
                iVar11 = (uint)local_38 * 3;
                if ((uint)local_38 < uVar28) {
                  do {
                    puVar13 = puVar23;
                    puVar13[4] = 0;
                    puVar13[3] = 0;
                    puVar13[1] = 3;
                    puVar13[2] = 1;
                    *puVar13 = 0x7b000008;
                    *(undefined4 *)(puVar13 + 1) = 3;
                    *(undefined4 *)(puVar13 + 2) = 1;
                    *(int *)((long)puVar13 + 0xc) = iVar11;
                    *(undefined4 *)(puVar13 + 5) = 0xac7dc;
                    uVar16 = *(undefined8 *)(this + 0x6c);
                    uVar4 = *(undefined8 *)(this + 0x74);
                    uVar5 = *(undefined8 *)(this + 0x7c);
                    *(undefined8 *)((long)puVar13 + 0x44) = *(undefined8 *)(this + 0x84);
                    *(undefined8 *)((long)puVar13 + 0x3c) = uVar5;
                    *(undefined8 *)((long)puVar13 + 0x34) = uVar4;
                    *(undefined8 *)((long)puVar13 + 0x2c) = uVar16;
                    *(ulong *)((long)puVar13 + 0x3c) =
                         (ulong)(uVar18 & 0xf) |
                         *(ulong *)((long)puVar13 + 0x3c) & 0xffe003fffffffff0 | uVar20;
                    puVar23 = (undefined8 *)((long)puVar13 + 0x4c);
                    iVar11 = iVar11 + 3;
                    bVar32 = uVar18 != uVar28;
                    uVar18 = uVar18 + 1;
                  } while (bVar32);
                }
                puVar23[4] = 0;
                puVar23[3] = 0;
                puVar23[2] = 1;
                puVar23[1] = 3;
                *puVar23 = 0x7b000008;
                *(undefined4 *)((long)puVar13 + 0x54) = 3;
                *(undefined4 *)((long)puVar13 + 0x5c) = 1;
                *(uint *)(puVar13 + 0xb) = uVar28 * 3;
                *(undefined4 *)((long)puVar13 + 0x74) = 0xac7dc;
                uVar29 = uVar29 + 1;
                puVar13 = puVar23;
              } while (uVar29 <= uVar12);
            }
          }
          IOAccelCommandBufferPool2::setBufferPtr(param_1);
          uVar19 = (ulong)uVar29;
        } while (uVar29 <= uVar21);
      }
    }
    else {
      this_00 = (HizCommon *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
      *(HizCommon **)(param_1 + 0x616) = this_00 + 0x40;
      HizCommon::Generate(this_00,(long)param_2,(uint)local_38,local_60);
      if (local_60 <= uVar21) {
        uVar16 = *(undefined8 *)(this_00 + 0x24);
        uVar4 = *(undefined8 *)(this_00 + 0xc);
        uVar19 = *(ulong *)(this_00 + 0x1c);
        uVar5 = *(undefined8 *)(this_00 + 0x14);
        uVar22 = uVar31;
        do {
          uVar30 = (uint)uVar22;
          if ((uint)local_38 < uVar28) {
            uVar22 = local_38;
            do {
              pHVar17 = (HizDispatch *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
              *(HizDispatch **)(param_1 + 0x616) = pHVar17 + 0x48;
              HizDispatch::Generate(pHVar17,param_2,(char)uVar22);
              puVar13 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
              *(undefined8 **)(param_1 + 0x616) = puVar13 + 4;
              uVar12 = (int)uVar22 + 1;
              uVar22 = (ulong)uVar12;
              puVar13[2] = (ulong)(uVar12 & 0xf) | (ulong)(uVar30 & 0x7ff) << 0x2a |
                           uVar19 & 0xffe003fffffffff0;
              puVar13[3] = uVar16;
              *puVar13 = uVar4;
              puVar13[1] = uVar5;
            } while (uVar28 != uVar12);
          }
          pHVar17 = (HizDispatch *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
          *(HizDispatch **)(param_1 + 0x616) = pHVar17 + 0x48;
          HizDispatch::Generate(pHVar17,param_2,(byte)uVar28);
          if (uVar30 < uVar21) {
            puVar13 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
            *(undefined8 **)(param_1 + 0x616) = puVar13 + 4;
            puVar13[3] = uVar16;
            *puVar13 = uVar4;
            puVar13[1] = uVar5;
            puVar13[2] = ((ulong)(uVar30 + 1 & 0x7ff) << 0x2a) + (ulong)((uint)local_38 & 0xf) |
                         uVar19 & 0xffe003fffffffff0;
          }
          uVar22 = (ulong)(uVar30 + 1);
        } while (uVar30 + 1 <= uVar21);
      }
    }
  }
  bVar2 = *(byte *)(param_2 + 0xb);
  if (((bVar2 & 8) != 0) && ((iVar3 == 3 || (iVar3 == 0)))) {
    if ((int)param_2[10] == 0) {
      if ((bVar2 & 4) == 0) goto LAB_000851e5;
      uVar19 = local_38 | (ulong)uVar28 << 0x20;
      uVar26 = uVar31 | uVar26 << 0x20;
      uVar30 = 3;
    }
    else {
      uVar19 = local_38 | (ulong)uVar28 << 0x20;
      uVar26 = uVar31 | uVar26 << 0x20;
      if ((bVar2 & 4) == 0) {
        uVar30 = 2;
      }
      else {
        uVar30 = 4;
      }
    }
    resolve_combined(param_1,(long)param_2,uVar30,uVar19,uVar26);
  }
LAB_000851e5:
  if (((*(byte *)(param_2 + 0xb) & 0x20) == 0) && ((local_60 & 0xffff) <= uVar21)) {
    uVar10 = (ushort)(1L << ((byte)uVar28 & 0x3f));
    uVar10 = ~((short)(-1L << ((byte)local_38 & 0x3f)) + uVar10 | uVar10);
    lVar14 = *(long *)param_2[1];
    lVar6 = ((long *)param_2[1])[1];
    do {
      puVar1 = (ushort *)(lVar14 + (uVar31 & 0xffff) * 2);
      *puVar1 = *puVar1 & uVar10;
      puVar1 = (ushort *)(lVar6 + (uVar31 & 0xffff) * 2);
      *puVar1 = *puVar1 & uVar10;
      uVar30 = (int)uVar31 + 1;
      uVar31 = (ulong)uVar30;
    } while ((uVar30 & 0xffff) <= uVar21);
  }
  puVar13 = (undefined8 *)IOAccelCommandBufferPool2::getBufferPtrNoInc(uVar24);
  *(long *)(param_1 + 0x616) = (long)puVar13 + 100;
  lVar14 = param_2[2];
  puVar13[1] = 0;
  puVar13[2] = 0;
  *puVar13 = 0x20007a000004;
  *(undefined4 *)(puVar13 + 1) = 0;
  puVar13[4] = 0;
  puVar13[5] = 0;
  puVar13[3] = 0x1050217a000004;
  *(uint *)(puVar13 + 4) = (uint)lVar14 & 0xfffffffc;
  *(int *)((long)puVar13 + 0x24) = (int)((ulong)lVar14 >> 0x20);
  puVar13[7] = 0;
  puVar13[8] = 0;
  puVar13[6] = 0x4107a000004;
  *(undefined4 *)(puVar13 + 7) = 0;
  puVar13[10] = 0;
  puVar13[0xb] = 0;
  puVar13[9] = 0x20007a000004;
  *(undefined4 *)(puVar13 + 10) = 0;
  *(undefined4 *)(puVar13 + 0xc) = 0xac7dc;
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// resolve_combined(IOAccelCommandBufferPool2*, depth_resolve_params_t const*, CombinedMode,
// ResolveRange, ResolveRange)

void __cdecl
resolve_combined(uint *param_1,long param_2,uint param_3,ulong param_4,undefined8 param_5)

{
  int iVar1;
  long lVar2;
  undefined4 *puVar3;
  undefined8 uVar4;
  ulong uVar5;
  size_t sVar6;
  SeparateStencilSurfaceState *pSVar7;
  SeparateStencilSurfaceState *this;
  uint uVar8;
  uint uVar10;
  ulong uVar11;
  int iVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  SeparateStencilSurfaceState *pSVar17;
  ulong *puVar18;
  uint uVar19;
  ulong uVar9;
  
  uVar16 = (uint)param_4;
  uVar10 = (uint)(param_4 >> 0x20);
  uVar8 = (uVar10 - uVar16) + 1;
  uVar9 = (ulong)uVar8;
  uVar11 = (ulong)(param_3 == 4) | 2;
  sVar6 = uVar11 * 0x40;
  lVar2 = (sVar6 + 0x38) * uVar9;
  puVar3 = (undefined4 *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)param_1);
  this = (SeparateStencilSurfaceState *)((long)puVar3 + 0x4fU & 0xffffffffffffffc0);
  puVar18 = (ulong *)((long)puVar3 + lVar2 + 0x14c);
  *puVar3 = 0xac7dc;
  *(undefined8 *)(puVar3 + 1) = 0x18800101;
  puVar3[3] = 0;
  uVar4 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
  puVar3[3] = (int)((ulong)uVar4 >> 0x20);
  *(ulong *)(puVar3 + 1) =
       *(ulong *)(puVar3 + 1) & 0x3ffffffff | (ulong)((uint)uVar4 & 0xfffffffc) << 0x20;
  uVar5 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
  LegacyCombinedSsStart::Generate
            ((LegacyCombinedSsStart *)((long)puVar3 + lVar2 + 0x50),param_2,uVar5,param_3);
  switch(param_3) {
  case 0:
    SeparateStencilSurfaceState::Generate(this,param_2,1);
    iVar1 = 3;
    break;
  case 1:
    SeparateDepthSurfaceState::Generate((SeparateDepthSurfaceState *)this,param_2,1);
    iVar1 = 2;
    break;
  case 2:
    CombinedDepthStencilSurfaceState::Generate((CombinedDepthStencilSurfaceState *)this,param_2,1,2)
    ;
    pSVar7 = this + 0x40;
    goto LAB_000854c6;
  case 3:
    CombinedDepthStencilSurfaceState::Generate((CombinedDepthStencilSurfaceState *)this,param_2,1,3)
    ;
    SeparateStencilSurfaceState::Generate(this + 0x40,param_2,0);
    goto switchD_000853fe_default;
  case 4:
    CombinedDepthStencilSurfaceState::Generate((CombinedDepthStencilSurfaceState *)this,param_2,1,2)
    ;
    SeparateStencilSurfaceState::Generate(this + 0x40,param_2,0);
    pSVar7 = this + 0x80;
LAB_000854c6:
    SeparateDepthSurfaceState::Generate((SeparateDepthSurfaceState *)pSVar7,param_2,0);
  default:
    goto switchD_000853fe_default;
  }
  CombinedDepthStencilSurfaceState::Generate
            ((CombinedDepthStencilSurfaceState *)(this + 0x40),param_2,0,iVar1);
switchD_000853fe_default:
  uVar14 = (uint)uVar5 & 0xfff;
  iVar12 = (int)uVar11;
  iVar1 = uVar8 * iVar12;
  pSVar7 = this + (ulong)(uint)(iVar1 * 0x10) * 4;
  if (uVar16 <= uVar10) {
    uVar13 = ((uint)param_5 & 0x7ff) << 0x12;
    iVar12 = iVar12 * 0x40;
    uVar16 = uVar16 << 4;
    uVar5 = param_4 & 0xffffffff;
    uVar19 = uVar14;
    do {
      pSVar17 = pSVar7;
      uVar15 = (uint)uVar5;
      *(ulong *)(this + 0x14) = *(ulong *)(this + 0x14) & 0xfffffffffffffff0 | (ulong)(uVar15 & 0xf)
      ;
      *(uint *)(this + 0x10) = *(uint *)(this + 0x10) & 0xe003ffff | uVar13;
      *(ulong *)(this + 0x54) =
           *(ulong *)(this + 0x54) & 0xffffffffffffff0f | (ulong)(uVar16 & 0xf0);
      *(uint *)(this + 0x50) = *(uint *)(this + 0x50) & 0xe003ffff | uVar13;
      if (param_3 == 4) {
        *(ulong *)(this + 0x94) =
             *(ulong *)(this + 0x94) & 0xffffffffffffff0f | (ulong)(uVar16 & 0xf0);
        *(uint *)(this + 0x90) = *(uint *)(this + 0x90) & 0xe003ffff | uVar13;
      }
      *(uint *)pSVar17 = uVar19;
      *(uint *)(pSVar17 + 4) = uVar19 + 0x40;
      *(uint *)(pSVar17 + 8) = iVar12 + -0x40 + uVar19;
      pSVar7 = this;
      if (uVar10 != uVar15) {
        pSVar7 = this + sVar6;
        _memmove(pSVar7,this,sVar6);
      }
      uVar5 = (ulong)(uVar15 + 1);
      uVar16 = uVar16 + 0x10;
      uVar19 = uVar19 + iVar12;
      this = pSVar7;
      pSVar7 = pSVar17 + 0x20;
    } while (uVar15 + 1 <= uVar10);
    pSVar7 = pSVar17 + 0x20;
  }
  uVar4 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
  LegacyVertexBuffers::Generate
            ((LegacyVertexBuffers *)((long)puVar3 + lVar2 + 0x138),param_2,(float *)pSVar7,uVar4,
             param_4,'\0');
  if (uVar8 != 0) {
    uVar16 = uVar14 + iVar1 * 0x40 >> 5;
    iVar1 = 0;
    do {
      *puVar18 = (ulong)(uVar16 & 0x7ff) << 0x25 | 0x782a0000;
      puVar18[2] = 0;
      puVar18[3] = 0;
      puVar18[1] = 0x10027a000004;
      *(undefined4 *)(puVar18 + 2) = 0;
      puVar18[7] = 0;
      puVar18[8] = 0;
      puVar18[5] = 3;
      puVar18[6] = 1;
      puVar18[4] = 0x7b000008;
      *(undefined4 *)(puVar18 + 5) = 3;
      *(uint *)(puVar18 + 6) = ((int)((ulong)param_5 >> 0x20) - (uint)param_5) + 1;
      *(int *)((long)puVar18 + 0x2c) = iVar1;
      puVar18 = puVar18 + 9;
      iVar1 = iVar1 + 3;
      uVar16 = uVar16 + 1;
      uVar10 = (int)uVar9 - 1;
      uVar9 = (ulong)uVar10;
    } while (uVar10 != 0);
  }
  IOAccelCommandBufferPool2::setBufferPtr(param_1);
  return;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// resolve_ccs(IOAccelCommandBufferPool2*, color_resolve_params_t*, IGVector<_blit_rect,
// IGIOMallocAllocatorPolicy> const&)

void __cdecl resolve_ccs(uint *param_1,long param_2,long *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  byte bVar4;
  ushort uVar5;
  long lVar6;
  undefined4 *puVar7;
  undefined8 uVar8;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  ulong uVar12;
  float *pfVar13;
  ulong uVar14;
  ulong uVar15;
  float *pfVar16;
  ulong uVar17;
  uint uVar18;
  ulong uVar19;
  uint uVar20;
  ulong uVar21;
  ulong uVar22;
  ulong *puVar23;
  undefined8 *puVar24;
  bool bVar25;
  
  lVar6 = *param_3;
  puVar7 = (undefined4 *)IOAccelCommandBufferPool2::getBufferPtrNoInc((uint)param_1);
  puVar23 = (ulong *)((long)puVar7 + 0x4fU & 0xffffffffffffffc0);
  puVar24 = (undefined8 *)(puVar7 + lVar6 * 6 + 0x2b);
  *puVar7 = 0xac7dc;
  *(undefined8 *)(puVar7 + 1) = 0x18800101;
  puVar7[3] = 0;
  uVar8 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
  puVar7[3] = (int)((ulong)uVar8 >> 0x20);
  *(ulong *)(puVar7 + 1) =
       *(ulong *)(puVar7 + 1) & 0x3ffffffff | (ulong)((uint)uVar8 & 0xfffffffc) << 0x20;
  uVar9 = IOAccelCommandBufferPool2::getGPUVirtualAddress(param_1);
  lVar10 = *param_3;
  if (lVar10 != 0) {
    pfVar16 = (float *)(puVar23 + 0xb);
    pfVar13 = (float *)(param_3[2] + 0xc);
    do {
      fVar1 = pfVar13[-3];
      pfVar16[-1] = fVar1;
      fVar2 = pfVar13[-2];
      *pfVar16 = fVar2;
      pfVar16[-3] = fVar1;
      fVar3 = *pfVar13;
      pfVar16[-2] = fVar1 + fVar3;
      pfVar16[-5] = fVar1 + pfVar13[-1];
      pfVar16[-4] = fVar2 + fVar3;
      pfVar16 = pfVar16 + 6;
      pfVar13 = pfVar13 + 4;
      lVar10 = lVar10 + -1;
    } while (lVar10 != 0);
  }
  puVar23[3] = 0x977000000000000;
  puVar23[1] = 0;
  puVar23[7] = 0;
  puVar23[6] = 0;
  puVar23[5] = 0;
  puVar23[4] = 0;
  puVar23[2] = 0;
  *puVar23 = 0x80000000231d4000;
  puVar23[4] = *(ulong *)(param_2 + 0x28);
  uVar17 = (ulong)((*(uint *)(param_2 + 0x44) & 0x1ff) << 0x12);
  puVar23[1] = 0;
  *puVar23 = uVar17 | 0x8000000020014000;
  uVar11 = (ulong)(1 < *(uint *)(param_2 + 0x1c)) << 0x1c;
  uVar12 = uVar11 | uVar17 | 0x8000000020014000;
  puVar23[1] = 0;
  *puVar23 = uVar12;
  uVar14 = (ulong)(*(int *)(param_2 + 0x14) - 1U & 0x3fff);
  *puVar23 = uVar12;
  puVar23[1] = uVar14;
  uVar20 = *(int *)(param_2 + 0x18) - 1U & 0x3fff;
  if (*(int *)(param_2 + 0x18) == 0) {
    uVar20 = 0;
  }
  uVar21 = (ulong)uVar20 << 0x10 | uVar14;
  *puVar23 = uVar12;
  puVar23[1] = uVar21;
  uVar15 = (ulong)(*(int *)(param_2 + 0x1c) - 1) << 0x35;
  uVar21 = uVar15 | uVar21;
  *puVar23 = uVar12;
  puVar23[1] = uVar21;
  uVar18 = *(byte *)(param_2 + 0x4b) & 0xf;
  *(undefined4 *)((long)puVar23 + 0x1c) = 0x9770000;
  *(ulong *)((long)puVar23 + 0x14) = (ulong)uVar18;
  uVar19 = (ulong)(byte)(*(char *)(param_2 + 0x4b) << 4 | (byte)uVar18);
  *(undefined4 *)((long)puVar23 + 0x1c) = 0x9770000;
  *(ulong *)((long)puVar23 + 0x14) = uVar19;
  uVar22 = (ulong)(*(int *)(param_2 + 0x20) - 1U & 0x3ffff) << 0x20;
  *puVar23 = uVar12;
  puVar23[1] = uVar22 | uVar21;
  uVar21 = (ulong)(*(byte *)(param_2 + 0x4a) & 3) << 0xc;
  uVar22 = uVar22 | uVar15 | (ulong)uVar20 << 0x10 | uVar14;
  puVar23[1] = uVar22;
  *puVar23 = uVar21 | uVar12;
  bVar4 = *(byte *)(param_2 + 0x4a);
  *(undefined4 *)((long)puVar23 + 0x1c) = 0x9770000;
  *(ulong *)((long)puVar23 + 0x14) = (bVar4 & 0xc) << 0x10 | uVar19;
  puVar23[1] = uVar22;
  *puVar23 = uVar21 | uVar12 | 0x4600000000000000;
  *(undefined4 *)(puVar23 + 2) = 2;
  *(uint *)(puVar23 + 2) = (*(uint *)(param_2 + 0x50) & 2) << 5 | 2;
  uVar12 = (ulong)(*(byte *)(param_2 + 0x49) & 3) << 0x10;
  puVar23[1] = uVar22;
  *puVar23 = uVar21 | uVar11 | uVar17 | 0x8000000020004000 | 0x4600000000000000 | uVar12;
  uVar17 = uVar21 | uVar11 | uVar17 | 0x8000000020000000 | 0x4600000000000000 | uVar12 |
           (ulong)(*(byte *)(param_2 + 0x48) & 3) << 0xe;
  puVar23[1] = uVar22;
  *puVar23 = uVar17;
  uVar20 = *(uint *)(param_2 + 0x24);
  puVar23[1] = uVar22;
  *puVar23 = (ulong)(uVar20 & 0x7fff) << 0x20 | uVar17;
  if (*(long *)(param_2 + 0x38) != 0) {
    bVar25 = *(int *)(param_2 + 0x4c) != 1;
    *(uint *)(puVar23 + 3) = (uint)bVar25 * 4 + 1;
    uVar17 = (ulong)((uint)puVar23[5] & 0xfff) | *(ulong *)(param_2 + 0x38) & 0xfffffffffffff000;
    puVar23[5] = uVar17;
    *(uint *)(puVar23 + 3) =
         ((*(int *)(param_2 + 0x40) + 0x7fU >> 4) + 0xff8 & 0xff8) + (uint)bVar25 * 4 + 1;
    if ((*(byte *)(param_2 + 0x50) & 1) != 0) {
      uVar12 = (ulong)((uint)*(undefined8 *)(param_2 + 0x30) & 0xffffffc0);
      uVar11 = puVar23[6];
      puVar23[6] = uVar11 & 0xffffffff0000003f | uVar12;
      uVar5 = *(ushort *)(param_2 + 0x34);
      puVar23[5] = uVar17 | 0x400;
      puVar23[6] = ((ulong)uVar5 << 0x20) + (uVar11 & 0xffff00000000001f | uVar12) + 0x20;
    }
  }
  uVar18 = (uint)uVar9 & 0xfff;
  *(uint *)(puVar23 + 8) = uVar18;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x2f) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x2d) = 0;
  *puVar24 = 0x7a000004;
  uVar20 = *(uint *)(param_2 + 8);
  *puVar24 = 0x7a000004;
  uVar20 = uVar20 & 0xfffffffc;
  puVar7[lVar6 * 6 + 0x2d] = uVar20;
  puVar7[lVar6 * 6 + 0x2e] = *(undefined4 *)(param_2 + 0xc);
  puVar7[lVar6 * 6 + 0x2d] = uVar20;
  *puVar24 = 0x1014047a000004;
  puVar7[lVar6 * 6 + 0x31] = 0x69041310;
  _memcpy(puVar7 + lVar6 * 6 + 0x32,&g_cInitGfxStateBaseAddress,0x58);
  *(ulong *)(puVar7 + lVar6 * 6 + 0x36) =
       (ulong)((uint)*(undefined8 *)(puVar7 + lVar6 * 6 + 0x36) & 0x81e) +
       (uVar9 & 0xfffffffffffff000) + 0x701;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x48) = 0x478140000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4a) = 0x7820000a;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4c) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4e) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x54) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x52) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x50) = 0x1f800002;
  uVar17 = (ulong)(*(int *)(param_2 + 0x4c) == 2) * 0x100;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x54) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x52) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4e) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4c) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4a) = 0x7820000a;
  *(ulong *)(puVar7 + lVar6 * 6 + 0x50) = uVar17 | 0x1f800002;
  uVar20 = *(uint *)(param_2 + 0x4c);
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x54) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x52) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4e) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4c) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x4a) = 0x7820000a;
  *(ulong *)(puVar7 + lVar6 * 6 + 0x50) = (ulong)(uVar20 & 3) * 0x40 + uVar17 + 0x1f800002;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x56) = 0x80000100784f0000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x5a) = 0x200480800020000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x58) = 0x78130002;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x5e) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x60) = 0xffffffffffffffff;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x5c) = 0x30000820781f0004;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 100) = 0x3fff3fff;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x62) = 0x79000002;
  puVar7[lVar6 * 6 + 0x6a] = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x68) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x66) = 0x1000078500003;
  *(ulong *)(puVar7 + lVar6 * 6 + 0x6b) = (ulong)(uVar18 + 0x40 >> 5) << 0x25 | 0x782a0000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x73) = 0x800;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x71) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x6f) = 0;
  puVar7[lVar6 * 6 + 0x75] = 0x10000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x6d) = 0x78100007;
  *(ulong *)(puVar7 + lVar6 * 6 + 0x73) =
       *(ulong *)(puVar7 + lVar6 * 6 + 0x73) & 0xfffffffffffe07ff | 0x800;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x76) = 0xf784b0000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x78) = 0xa400878080003;
  *(ulong *)(puVar7 + lVar6 * 6 + 0x7a) = uVar9 + 0x44;
  puVar7[lVar6 * 6 + 0x7c] = (int)lVar6 * 0x18;
  _memcpy(puVar7 + lVar6 * 6 + 0x7d,&g_cInitGfx3dStateVertexElements,0x114);
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x7e) = 0x2222000002000000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0x80) = 0x1123000002000000;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 200) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xca) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xc4) = 3;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xc6) = 1;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xc2) = 0x7b000008;
  puVar7[lVar6 * 6 + 0xc4] = 3;
  puVar7[lVar6 * 6 + 0xc6] = 1;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xce) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xd0) = 0;
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xcc) = 0x40007a000004;
  puVar7[lVar6 * 6 + 0xce] = 0;
  uVar20 = *(uint *)(param_2 + 8);
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xcc) = 0x40007a000004;
  uVar20 = uVar20 & 0xfffffffc;
  puVar7[lVar6 * 6 + 0xce] = uVar20;
  puVar7[lVar6 * 6 + 0xcf] = *(undefined4 *)(param_2 + 0xc);
  *(undefined8 *)(puVar7 + lVar6 * 6 + 0xcc) = 0x1050007a000004;
  puVar7[lVar6 * 6 + 0xce] = uVar20;
  IOAccelCommandBufferPool2::setBufferPtr(param_1);
  return;
}



// IGTelemetryGPU::getNameGPU()

char * IGTelemetryGPU::getNameGPU(void)

{
  return "icl";
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryGPU::isRegisterValid(unsigned int)

int __cdecl IGTelemetryGPU::isRegisterValid(int param_1)

{
  long lVar1;
  
  lVar1 = 0;
  do {
    if (*(int *)((long)&g_validRegisters + lVar1) == param_1) {
      return param_1;
    }
    lVar1 = lVar1 + 4;
  } while (lVar1 != 0x288);
  return 0;
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGTelemetryGPU::initTelemetryItems(unsigned int, void*, unsigned int)

void __cdecl IGTelemetryGPU::initTelemetryItems(undefined8 param_1,long param_2,uint param_3)

{
  long lVar1;
  
  if (*(long *)(param_2 + 8) != 0) {
    do {
      IGTelemetryShared::initPerfEvent();
      lVar1 = param_2 + 8;
      param_2 = param_2 + (ulong)param_3;
    } while (*(long *)(lVar1 + (ulong)param_3) != 0);
  }
  return;
}



// IGTelemetryGPU::initTelemetryItemsOnce()

void IGTelemetryGPU::initTelemetryItemsOnce(void)

{
  long *plVar1;
  undefined *puVar2;
  undefined4 *puVar3;
  
  puVar2 = &_FormatReportPerfCount;
  _memcpy(&_FormatReportPerfCount,&_FormatReportPerfCount_Default,0x910);
  do {
    IGTelemetryShared::initPerfEvent();
    plVar1 = (long *)(puVar2 + 0x30);
    puVar2 = puVar2 + 0x28;
  } while (*plVar1 != 0);
  if (PTR_s_IAVertices_00133418 != (undefined *)0x0) {
    puVar2 = &_FormatPipeStats;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x30);
      puVar2 = puVar2 + 0x28;
    } while (*plVar1 != 0);
  }
  if (PTR_s_GTRequestQueueFull_00133628 != (undefined *)0x0) {
    puVar2 = &_FormatGPURelative;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x30);
      puVar2 = puVar2 + 0x28;
    } while (*plVar1 != 0);
  }
  if (PTR_s_RPPREVUP_GPU_ABS_00133d08 != (undefined *)0x0) {
    puVar2 = &_FormatGPUAbsolute;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x30);
      puVar2 = puVar2 + 0x28;
    } while (*plVar1 != 0);
  }
  if (PTR_s_TIMESTAMP_LO_tics_00133e98 != (undefined *)0x0) {
    puVar3 = &_FormatDynamicRegStats;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar3 + 0xc);
      puVar3 = puVar3 + 10;
    } while (*plVar1 != 0);
  }
  if (PTR_s_CPU_relativeTime_nSec_00134898 != (undefined *)0x0) {
    puVar2 = &_FormatRelativeValue;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x28);
      puVar2 = puVar2 + 0x20;
    } while (*plVar1 != 0);
  }
  if (PTR_s_CPU_sampleTime_nSec_00134978 != (undefined *)0x0) {
    puVar2 = &_FormatAbsoluteValue;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x28);
      puVar2 = puVar2 + 0x20;
    } while (*plVar1 != 0);
  }
  if (PTR_s_CLKernelName_00134e98 != (undefined *)0x0) {
    puVar2 = &_FormatAbsoluteValueOpenCL;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x28);
      puVar2 = puVar2 + 0x20;
    } while (*plVar1 != 0);
  }
  if (PTR_s_GPU_beginSampleTime_nSec_00135258 != (undefined *)0x0) {
    puVar2 = &_FormatAbsoluteValueMDLIB;
    do {
      IGTelemetryShared::initPerfEvent();
      plVar1 = (long *)(puVar2 + 0x28);
      puVar2 = puVar2 + 0x20;
    } while (*plVar1 != 0);
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// IGTelemetryGPU::init()

void __thiscall IGTelemetryGPU::init(IGTelemetryGPU *this)

{
  int iVar1;
  undefined8 uVar2;
  int *piVar3;
  ulong uVar4;
  long lVar5;
  
  lVar5 = 0;
  uVar2 = IGTelemetryShared::operationGet
                    ((IGTelemetryShared *)this,600,0,(undefined8 *)0x0,(undefined8 *)0x0,
                     (undefined4 *)0x0);
  *(undefined8 *)(this + 0x1400) = uVar2;
  uVar2 = IGTelemetryShared::operationGet
                    ((IGTelemetryShared *)this,0x259,0,(undefined8 *)0x0,(undefined8 *)0x0,
                     (undefined4 *)0x0);
  *(undefined8 *)(this + 0x1408) = uVar2;
  uVar2 = IGTelemetryShared::operationGet
                    ((IGTelemetryShared *)this,0x25a,0,(undefined8 *)0x0,(undefined8 *)0x0,
                     (undefined4 *)0x0);
  *(undefined8 *)(this + 0x1410) = uVar2;
  IGTelemetryShared::initPerProcessData();
  piVar3 = &DAT_00133eb4;
  do {
    if (*piVar3 == 0) goto LAB_0008609d;
    lVar5 = lVar5 + 1;
    piVar3 = piVar3 + 10;
  } while (lVar5 != 0x40);
  lVar5 = 0x40;
LAB_0008609d:
  _DAT_00135cb0 = (int)lVar5;
  *(int *)(this + 0x1418) = _DAT_00135cb0;
  *(undefined8 *)(this + 0x1420) = 0;
  *(uint *)(this + 0x778) = _DAT_00135cb0 * 8 + 0x3feU & 0xffffffc0;
  iVar1 = (**(code **)(*(long *)this + 0x30))(this,0);
  lVar5 = 0x285;
  do {
    uVar4 = ~(-1L << ((byte)iVar1 & 0x3f));
    if (iVar1 == 0x40) {
      uVar4 = 0xffffffffffffffff;
    }
    *(ulong *)(this + lVar5 * 8 + 0x48) = uVar4;
    *(ulong *)(this + lVar5 * 8) = uVar4;
    iVar1 = (**(code **)(*(long *)this + 0x30))(this,(int)lVar5 + -0x284);
    lVar5 = lVar5 + 1;
  } while (lVar5 != 0x28d);
  *(undefined8 *)(this + 0x14b0) = 0xffffffffffffffff;
  *(undefined8 *)(this + 0x1468) = 0xffffffffffffffff;
  lVar5 = 0x28e;
  do {
    *(ulong *)(this + lVar5 * 8) =
         *(ulong *)(this + lVar5 * 8) & *(ulong *)(this + lVar5 * 8 + -0x48);
    lVar5 = lVar5 + 1;
  } while (lVar5 != 0x297);
  IGTelemetryShared::init((IGTelemetryShared *)this);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// IGTelemetryGPU::setDynamicRegStats(unsigned int, MDAPIConfigRegs*)

void __thiscall
IGTelemetryGPU::setDynamicRegStats(IGTelemetryGPU *this,uint param_1,undefined8 *param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 *puVar3;
  ulong uVar4;
  int *piVar5;
  ulong uVar6;
  undefined *puVar7;
  int iVar8;
  undefined4 uVar9;
  long lVar10;
  
  uVar4 = (ulong)param_1;
  *(uint *)(this + 0x1418) = param_1;
  *(undefined8 *)(this + 0x1420) = 0;
  _DAT_00135cb0 = param_1;
  *(uint *)(this + 0x778) = param_1 * 8 + 0x3fe & 0xffffffc0;
  if (param_2 != (undefined8 *)0x0) {
    *(undefined8 *)(this + 0x1420) = *param_2;
    param_2[3] = 0;
    if (param_1 == 0) {
      uVar4 = 0;
    }
    else {
      uVar1 = *(uint *)((long)param_2 + 0x14);
      uVar6 = 0;
      do {
        (&_FormatDynamicRegStats)[uVar6 * 10] = (int)uVar6 * 8;
        if (uVar6 < uVar1) {
          puVar7 = (undefined *)
                   ((ulong)*(uint *)((long)param_2 +
                                    uVar6 * 4 + (ulong)*(uint *)(param_2 + 2) * 8 + 0x20) +
                   (long)param_2);
        }
        else {
          puVar7 = (undefined *)0x0;
        }
        piVar5 = &DAT_00133eb0 + uVar6 * 10;
        (&PTR_s_TIMESTAMP_LO_tics_00133e98)[uVar6 * 5] = puVar7;
        (&PTR_s_timeLo_tics__low_32_bits_of_GPU_t_00133ea0)[uVar6 * 5] = "unknown desc";
        *piVar5 = 0;
        iVar2 = *(int *)(param_2 + uVar6 + 4);
        lVar10 = 0;
        do {
          iVar8 = iVar2;
          if (*(int *)((long)&g_validRegisters + lVar10) == iVar2) goto LAB_0008622c;
          lVar10 = lVar10 + 4;
        } while (lVar10 != 0x288);
        iVar8 = 0;
LAB_0008622c:
        (&DAT_00133eb4)[uVar6 * 10] = iVar8;
        if (*(int *)((long)param_2 + uVar6 * 8 + 0x24) == 0x40) {
          iVar8 = iVar2 + 4;
          lVar10 = 0;
          do {
            if (*(int *)((long)&g_validRegisters + lVar10) == iVar8) goto LAB_00086255;
            lVar10 = lVar10 + 4;
          } while (lVar10 != 0x288);
          iVar8 = 0;
LAB_00086255:
          *piVar5 = iVar8;
        }
        if (iVar2 == 0x91c4) {
          *(undefined4 *)((long)param_2 + 0x1c) = 1;
          uVar9 = 0x91c0;
LAB_00086286:
          (&DAT_00133eb4)[uVar6 * 10] = uVar9;
          *piVar5 = iVar2;
        }
        else if (iVar2 == 0x91bc) {
          *(undefined4 *)(param_2 + 3) = 1;
          uVar9 = 0x91b8;
          goto LAB_00086286;
        }
        uVar6 = uVar6 + 1;
      } while (uVar6 != param_1);
      if (0x3f < param_1) {
        return;
      }
    }
    puVar3 = &DAT_00133eb4 + uVar4 * 10;
    do {
      uVar4 = uVar4 + 1;
      *puVar3 = 0;
      puVar3 = puVar3 + 10;
    } while ((int)uVar4 != 0x40);
  }
  return;
}



// IGTelemetryGPU::prepareCollectionStateOnGPU()

void __thiscall IGTelemetryGPU::prepareCollectionStateOnGPU(IGTelemetryGPU *this)

{
  long lVar1;
  char *param1;
  
  lVar1 = IGTelemetryShared::operationGet
                    ((IGTelemetryShared *)this,500,0,(undefined8 *)0x0,(undefined8 *)0x0,
                     (undefined4 *)0x0);
  if (lVar1 != 1) {
    param1 = (char *)(**(code **)(*(long *)this + 0xa8))(this);
    _kprintf("ERROR: COULD NOT ACTIVATE TELEMETRY FOR %s\n",param1);
  }
  lVar1 = 0x28e;
  do {
    IGTelemetryShared::operationSet
              ((IGTelemetryShared *)this,(int)lVar1 + 0x2e,*(undefined8 *)(this + lVar1 * 8 + -0x48)
               ,0,0,(undefined4 *)0x0);
    IGTelemetryShared::operationSet
              ((IGTelemetryShared *)this,(int)lVar1 + 0x60,*(undefined8 *)(this + lVar1 * 8),0,0,
               (undefined4 *)0x0);
    lVar1 = lVar1 + 1;
  } while (lVar1 != 0x297);
  return;
}



// IGTelemetryGPU::shutdown()

int IGTelemetryGPU::shutdown(int param_1,int param_2)

{
  int iVar1;
  
  iVar1 = IGTelemetryShared::shutdown(param_1,param_2);
  return iVar1;
}



// IGTelemetryGPU::getGroupName(unsigned int)

undefined * __thiscall IGTelemetryGPU::getGroupName(IGTelemetryGPU *this,uint param_1)

{
  if (8 < param_1) {
    return (undefined *)0x0;
  }
  return (&_telemetryGroupNames)[param_1];
}



// IGTelemetryGPU::setItemNameDesc(unsigned int, unsigned int, char const*, char const*)

void __thiscall
IGTelemetryGPU::setItemNameDesc
          (IGTelemetryGPU *this,uint param_1,uint param_2,long param_3,long param_4)

{
  uint uVar1;
  uint uVar2;
  
  if (param_1 < 9) {
    uVar1 = param_2 + 5;
    if (param_1 != 0) {
      uVar1 = param_2;
    }
    uVar2 = (**(code **)(*(long *)this + 0x30))();
    if ((((uVar1 < uVar2) && (param_1 == 0)) && (param_3 != 0)) && (param_4 != 0)) {
      *(long *)(&DAT_001369c8 + (ulong)uVar1 * 0x28) = param_3;
      *(long *)(&DAT_001369d0 + (ulong)uVar1 * 0x28) = param_4;
    }
  }
  return;
}



// IGTelemetryGPU::getItemName(unsigned int, unsigned int, char const**)

undefined8 __thiscall
IGTelemetryGPU::getItemName(IGTelemetryGPU *this,uint param_1,uint param_2,undefined8 *param_3)

{
  uint uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  long lVar4;
  undefined4 *puVar5;
  undefined *puVar6;
  
  if ((8 < param_1) || (uVar1 = (**(code **)(*(long *)this + 0x30))(), uVar1 <= param_2)) {
    return 0;
  }
  switch(param_1) {
  case 0:
    lVar4 = (ulong)param_2 * 5;
    puVar5 = (undefined4 *)&_FormatReportPerfCount;
    break;
  case 1:
    lVar4 = (ulong)param_2 * 5;
    puVar5 = (undefined4 *)&_FormatPipeStats;
    break;
  case 2:
    lVar4 = (ulong)param_2 * 5;
    puVar5 = (undefined4 *)&_FormatGPURelative;
    break;
  case 3:
    lVar4 = (ulong)param_2 * 5;
    puVar5 = (undefined4 *)&_FormatGPUAbsolute;
    break;
  case 4:
    lVar4 = (ulong)param_2 * 5;
    puVar5 = &_FormatDynamicRegStats;
    break;
  case 5:
    lVar4 = (ulong)param_2 << 5;
    puVar6 = &_FormatRelativeValue;
    goto LAB_000864da;
  case 6:
    lVar4 = (ulong)param_2 << 5;
    puVar6 = &_FormatAbsoluteValue;
    goto LAB_000864da;
  case 7:
    lVar4 = (ulong)param_2 << 5;
    puVar6 = &_FormatAbsoluteValueOpenCL;
    goto LAB_000864da;
  case 8:
    lVar4 = (ulong)param_2 << 5;
    puVar6 = &_FormatAbsoluteValueMDLIB;
LAB_000864da:
    uVar2 = *(undefined8 *)(puVar6 + lVar4 + 8);
    uVar3 = *(undefined8 *)(puVar6 + lVar4 + 0x10);
    goto LAB_000864e4;
  default:
    uVar2 = 0;
    uVar3 = 0;
    goto LAB_000864e4;
  }
  uVar2 = *(undefined8 *)(puVar5 + lVar4 * 2 + 2);
  uVar3 = *(undefined8 *)(puVar5 + lVar4 * 2 + 4);
LAB_000864e4:
  if (param_3 != (undefined8 *)0x0) {
    *param_3 = uVar3;
  }
  return uVar2;
}



// IGTelemetryGPU::getNumItemsInGroup(int)

undefined4 __thiscall IGTelemetryGPU::getNumItemsInGroup(IGTelemetryGPU *this,uint param_1)

{
  if (-1 < (int)param_1) {
    return *(undefined4 *)(&_telemetryItemsPerGroup + (ulong)param_1 * 4);
  }
  return 9;
}



// IGTelemetryGPU::setNumItemsInGroup(int, unsigned int)

void __thiscall
IGTelemetryGPU::setNumItemsInGroup(IGTelemetryGPU *this,int param_1,undefined4 param_2)

{
  *(undefined4 *)(&_telemetryItemsPerGroup + (long)param_1 * 4) = param_2;
  return;
}



// IGTelemetryGPU::getGroupSampleBytes(int)

int __thiscall IGTelemetryGPU::getGroupSampleBytes(IGTelemetryGPU *this,uint param_1)

{
  if (-1 < (int)param_1) {
    return *(int *)(&_telemetryItemsPerGroup + (ulong)param_1 * 4) << 3;
  }
  return 9;
}



// IGTelemetryGPU::writeSampleRequestToGPU(unsigned long long, TelemetrySampleInfo*)

void __thiscall
IGTelemetryGPU::writeSampleRequestToGPU(IGTelemetryGPU *this,undefined8 param_1,undefined8 *param_2)

{
  undefined4 uVar1;
  uint uVar2;
  uint64_t uVar3;
  undefined8 uVar4;
  long lVar5;
  ulong uVar6;
  long lVar7;
  IGTelemetryGPU *pIVar8;
  undefined8 *puVar9;
  byte bVar10;
  
  bVar10 = 0;
  uVar3 = _mach_absolute_time();
  lVar5 = param_2[3];
  *(uint64_t *)(lVar5 + 0x1c8) = uVar3;
  *(uint64_t *)(lVar5 + 0x1f8) = uVar3;
  *(undefined8 *)(lVar5 + 0x208) = *(undefined8 *)(this + 0x1410);
  *(undefined8 *)(lVar5 + 0x210) = *(undefined8 *)(*(long *)(this + 0x18) + 0x10);
  uVar4 = (**(code **)(*(long *)this + 0xb0))(this);
  *(undefined8 *)(lVar5 + 0x218) = uVar4;
  *(undefined8 *)(lVar5 + 0x220) = *(undefined8 *)(this + 0x780);
  *(undefined8 *)(lVar5 + 0x230) = param_1;
  uVar4 = *param_2;
  *(undefined8 *)(lVar5 + 0x248) = uVar4;
  *(ulong *)(lVar5 + 0x250) = (ulong)((uint)uVar4 & 0x3f);
  *(undefined8 *)(lVar5 + 0x298) = *(undefined8 *)(this + 0x1420);
  *(ulong *)(lVar5 + 0x2a0) = (ulong)*(uint *)(this + 0x1418);
  pIVar8 = this + 0x368;
  puVar9 = (undefined8 *)(lVar5 + 0x2a8);
  for (lVar7 = 0xb; lVar7 != 0; lVar7 = lVar7 + -1) {
    *puVar9 = *(undefined8 *)pIVar8;
    pIVar8 = pIVar8 + (ulong)bVar10 * -0x10 + 8;
    puVar9 = puVar9 + (ulong)bVar10 * -2 + 1;
  }
  (**(code **)(*(long *)this + 0x60))(this,param_2);
  if (*(long *)(this + 0x1428) == 0) {
    lVar5 = 0x100;
  }
  else {
    lVar5 = (**(code **)(*(long *)this + 0x68))(this,param_2,&_FormatReportPerfCount);
  }
  param_2[1] = param_2[1] + lVar5;
  if (*(long *)(this + 0x1430) == 0) {
    uVar2 = (**(code **)(*(long *)this + 0x40))(this,1);
    uVar6 = (ulong)uVar2;
  }
  else {
    uVar6 = (**(code **)(*(long *)this + 0x70))(this,param_2,&_FormatPipeStats);
  }
  param_2[1] = param_2[1] + uVar6;
  uVar1 = (**(code **)(*(long *)this + 0x30))(this,2);
  if (*(long *)(this + 0x1438) == 0) {
    uVar2 = (**(code **)(*(long *)this + 0x40))(this,2);
    uVar6 = (ulong)uVar2;
  }
  else {
    uVar6 = (**(code **)(*(long *)this + 0x78))(this,param_2,uVar1,&_FormatGPURelative);
  }
  param_2[1] = param_2[1] + uVar6;
  uVar1 = (**(code **)(*(long *)this + 0x30))(this,3);
  if (*(long *)(this + 0x1440) == 0) {
    uVar2 = (**(code **)(*(long *)this + 0x40))(this,3);
    uVar6 = (ulong)uVar2;
  }
  else {
    uVar6 = (**(code **)(*(long *)this + 0x78))(this,param_2,uVar1,&_FormatGPUAbsolute);
  }
  param_2[1] = param_2[1] + uVar6;
  lVar5 = (**(code **)(*(long *)this + 0x80))(this,param_2);
  param_2[1] = param_2[1] + lVar5;
  if ((*(int *)(this + 0x1418) != 0) && (*(long *)(this + 0x1448) != 0)) {
    lVar5 = (**(code **)(*(long *)this + 0x78))
                      (this,param_2,*(int *)(this + 0x1418),&_FormatDynamicRegStats);
    param_2[1] = param_2[1] + lVar5;
  }
  return;
}



// IGTelemetryGPU::cvtGPUPerfSampleToMetaSample(TelemetrySampleGPU*, TelemetrySampleMeta*)

void __thiscall
IGTelemetryGPU::cvtGPUPerfSampleToMetaSample(IGTelemetryGPU *this,uint *param_1,ulong *param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  long lVar6;
  ulong uVar7;
  ulong *puVar8;
  
  param_1[1] = param_1[1];
  uVar5 = ((ulong)param_1[1] * 10000) / _g_timestampFreqPerDenominator;
  *param_2 = uVar5;
  uVar1 = param_1[1];
  param_2[1] = (ulong)uVar1;
  uVar2 = param_1[3];
  param_2[2] = (ulong)uVar2;
  uVar3 = *param_1;
  param_2[3] = (ulong)uVar3;
  uVar4 = param_1[2];
  param_2[4] = (ulong)uVar4;
  if (*(long *)(this + 0x14b0) != 0) {
    param_2[0x84] = uVar5;
    param_2[0x85] = (ulong)uVar1;
    param_2[0x86] = (ulong)uVar2;
    param_2[0x87] = (ulong)uVar3;
    param_2[0x88] = (ulong)uVar4;
    ___bzero(param_2 + 0x84,0x280);
  }
  lVar6 = 0;
  uVar5 = 0;
  do {
    uVar7 = (ulong)param_1[uVar5 + 4];
    if (uVar5 < 0x20) {
      uVar7 = (ulong)CONCAT14(*(undefined1 *)((long)param_1 + uVar5 + 0xa0),param_1[uVar5 + 4]);
    }
    param_2[uVar5 + 5] = uVar7;
    uVar5 = uVar5 + 1;
    lVar6 = lVar6 + -8;
  } while (uVar5 != 0x24);
  puVar8 = (ulong *)((long)param_2 + (0x28 - lVar6));
  lVar6 = 0;
  do {
    *puVar8 = (ulong)param_1[lVar6 + 0x30];
    puVar8 = puVar8 + 1;
    lVar6 = lVar6 + 1;
  } while (lVar6 != 8);
  lVar6 = 0;
  do {
    *puVar8 = (ulong)param_1[lVar6 + 0x38];
    puVar8 = puVar8 + 1;
    lVar6 = lVar6 + 1;
  } while (lVar6 != 8);
  return;
}



// IGTelemetryGPU::emitSampleGPU(TelemetrySampleInfo*)

void __thiscall IGTelemetryGPU::emitSampleGPU(IGTelemetryGPU *this,long param_1)

{
  uint *puVar1;
  ulong *puVar2;
  double dVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  char cVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  ulong uVar12;
  double dVar13;
  uint uVar14;
  uint uVar15;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  double dVar16;
  ulong uVar17;
  void *pvVar18;
  long lVar19;
  uintptr_t uVar20;
  long lVar21;
  int iVar22;
  long lVar23;
  int *piVar24;
  ulong uVar25;
  ulong uVar26;
  long lVar27;
  ulong *puVar28;
  IGTelemetryGPU *local_40;
  
  puVar1 = *(uint **)(param_1 + 0x10);
  puVar2 = *(ulong **)(param_1 + 0x18);
  cvtGPUPerfSampleToMetaSample(this,puVar1,puVar2);
  if ((*(uint *)(*(long *)(this + 0x770) + 0x54) >> 0x18 & 1) != 0) {
    *(ulong *)(puVar1 + 0x52) = *(ulong *)(puVar1 + 0x52) >> 2;
  }
  if (puVar2[0x49] == 1) {
    _memmove(this + 0x788,puVar1,(ulong)*(uint *)(this + 0x778));
    _memmove(this + 0xd48,puVar2,0x6a8);
    *(ulong *)(this + 0xa88) =
         (ulong)(*(long *)(puVar1 + 0xc0) * 10000) / _g_timestampFreqPerDenominator;
  }
  cVar8 = IGTelemetryShared::isSampleEnabledForOutput();
  if (cVar8 == '\0') {
    pvVar18 = *(void **)(param_1 + 0x18);
    _memmove(this + 0x788,*(void **)(param_1 + 0x10),(ulong)*(uint *)(this + 0x778));
  }
  else {
    IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,9,1,"%lld, ",puVar2[0x49]);
    IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,9,2,"%lld",puVar2[0x46]);
    IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,9,3,".%02lld, ",puVar2[0x47]);
    puVar28 = (ulong *)(puVar1 + 0x40);
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,1);
    if (uVar9 != 0) {
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x1478);
        if (-1 < (int)uVar25) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          if (((byte)this[0x38] & 4) == 0) {
            uVar12 = *(ulong *)(this + uVar25 * 8 + 0x888);
            uVar17 = *puVar28;
            uVar26 = uVar17 - uVar12;
            if (uVar17 < uVar12) {
              uVar7 = 0x3f;
              if (uVar12 != 0) {
                for (; uVar12 >> uVar7 == 0; uVar7 = uVar7 - 1) {
                }
              }
              uVar15 = (uint)(uVar7 ^ 0x3f);
              if (uVar15 < 0x20) {
                if (uVar15 != 0) {
                  uVar26 = (uVar17 | 1L << ((ulong)(byte)(0x40 - (char)(uVar7 ^ 0x3f)) & 0x3f)) -
                           uVar12;
                }
              }
              else {
                uVar26 = (ulong)(uint)((int)uVar17 - (int)uVar12);
              }
            }
          }
          else {
            uVar26 = *puVar28;
          }
          IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,1,(int)uVar25,"%lld, ",uVar26)
          ;
        }
        uVar25 = uVar25 + 1;
        puVar28 = puVar28 + 1;
      } while (uVar9 != uVar25);
    }
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,2);
    if (uVar9 != 0) {
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x1480);
        if (-1 < (int)uVar25) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          if (((byte)this[0x38] & 4) == 0) {
            uVar12 = *(ulong *)(this + uVar25 * 8 + 0x8e8);
            uVar17 = *puVar28;
            uVar26 = uVar17 - uVar12;
            if (uVar17 < uVar12) {
              uVar7 = 0x3f;
              if (uVar12 != 0) {
                for (; uVar12 >> uVar7 == 0; uVar7 = uVar7 - 1) {
                }
              }
              uVar15 = (uint)(uVar7 ^ 0x3f);
              if (uVar15 < 0x20) {
                if (uVar15 != 0) {
                  uVar26 = (uVar17 | 1L << ((ulong)(byte)(0x40 - (char)(uVar7 ^ 0x3f)) & 0x3f)) -
                           uVar12;
                }
              }
              else {
                uVar26 = (ulong)(uint)((int)uVar17 - (int)uVar12);
              }
            }
          }
          else {
            uVar26 = *puVar28;
          }
          IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,2,(int)uVar25,"%lld, ",uVar26)
          ;
        }
        uVar25 = uVar25 + 1;
        puVar28 = puVar28 + 1;
      } while (uVar9 != uVar25);
    }
    uVar9 = (**(code **)(*(long *)this + 0x30))(this);
    uVar25 = extraout_RDX;
    if (uVar9 != 0) {
      uVar26 = 0;
      do {
        uVar12 = *(ulong *)(this + 0x1488);
        if (-1 < (int)uVar26) {
          uVar12 = uVar12 >> (uVar26 & 0x3f) & 1;
        }
        if (uVar12 != 0) {
          IGTelemetryShared::emitSampleItem
                    ((IGTelemetryShared *)this,3,(int)uVar26,"%lld, ",puVar28[uVar26]);
          uVar25 = extraout_RDX_00;
        }
        uVar26 = uVar26 + 1;
      } while (uVar9 != uVar26);
    }
    if (*(long *)(this + 0x1428) != 0) {
      uVar26 = (ulong)((int)*(undefined8 *)(puVar1 + 0xc0) - puVar1[1]) * 10000;
      uVar25 = uVar26 % _g_timestampFreqPerDenominator;
      puVar2[0x40] = uVar26 / _g_timestampFreqPerDenominator;
    }
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,0,uVar25);
    if (uVar9 != 0) {
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x1470);
        uVar15 = (uint)uVar25;
        if (-1 < (int)uVar15) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          if (((byte)this[0x38] & 4) == 0) {
            uVar12 = *(ulong *)(this + uVar25 * 8 + 0xd48);
            uVar17 = puVar2[uVar25];
            uVar26 = uVar17 - uVar12;
            if (uVar17 < uVar12) {
              uVar7 = 0x3f;
              if (uVar12 != 0) {
                for (; uVar12 >> uVar7 == 0; uVar7 = uVar7 - 1) {
                }
              }
              uVar14 = (uint)(uVar7 ^ 0x3f);
              if (uVar14 < 0x20) {
                if (uVar14 != 0) {
                  uVar26 = (uVar17 | 1L << ((ulong)(byte)(0x40 - (char)(uVar7 ^ 0x3f)) & 0x3f)) -
                           uVar12;
                }
              }
              else {
                uVar26 = (ulong)(uint)((int)uVar17 - (int)uVar12);
              }
            }
          }
          else {
            uVar26 = puVar2[uVar25];
          }
          if ((uVar15 < 5) && ((0x19U >> (uVar15 & 0x1f) & 1) != 0)) {
            uVar26 = puVar2[uVar25];
          }
          IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,0,uVar15,"%lld, ",uVar26);
        }
        uVar25 = uVar25 + 1;
      } while (uVar9 != uVar25);
    }
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,4);
    if (uVar9 != 0) {
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x1490);
        if (-1 < (int)uVar25) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          if (((byte)this[0x38] & 4) == 0) {
            uVar26 = *(ulong *)(this + uVar25 * 8 + 0xb48);
            uVar12 = *(ulong *)(puVar1 + uVar25 * 2 + 0xf0);
            uVar20 = uVar12 - uVar26;
            if (uVar12 < uVar26) {
              uVar17 = 0x3f;
              if (uVar26 != 0) {
                for (; uVar26 >> uVar17 == 0; uVar17 = uVar17 - 1) {
                }
              }
              uVar15 = (uint)(uVar17 ^ 0x3f);
              if (uVar15 < 0x20) {
                if (uVar15 != 0) {
                  uVar20 = (uVar12 | 1L << ((ulong)(byte)(0x40 - (char)(uVar17 ^ 0x3f)) & 0x3f)) -
                           uVar26;
                }
              }
              else {
                uVar20 = (uintptr_t)(uint)((int)uVar12 - (int)uVar26);
              }
            }
          }
          else {
            uVar20 = *(uintptr_t *)(puVar1 + uVar25 * 2 + 0xf0);
          }
          IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,4,(int)uVar25,"%lld, ",uVar20)
          ;
        }
        uVar25 = uVar25 + 1;
      } while (uVar9 != uVar25);
    }
    puVar28 = puVar2 + 0x39;
    local_40 = this + 0xf10;
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,5);
    if (uVar9 != 0) {
      lVar23 = 0;
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x1498);
        if (-1 < (int)uVar25) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          if (((byte)this[0x38] & 4) == 0) {
            uVar12 = *(ulong *)(local_40 + uVar25 * 8);
            uVar17 = puVar28[uVar25];
            uVar26 = uVar17 - uVar12;
            if (uVar17 < uVar12) {
              uVar7 = 0x3f;
              if (uVar12 != 0) {
                for (; uVar12 >> uVar7 == 0; uVar7 = uVar7 - 1) {
                }
              }
              uVar15 = (uint)(uVar7 ^ 0x3f);
              if (uVar15 < 0x20) {
                if (uVar15 != 0) {
                  uVar26 = (uVar17 | 1L << ((ulong)(byte)(0x40 - (char)(uVar7 ^ 0x3f)) & 0x3f)) -
                           uVar12;
                }
              }
              else {
                uVar26 = (ulong)(uint)((int)uVar17 - (int)uVar12);
              }
            }
          }
          else {
            uVar26 = puVar28[uVar25];
          }
          IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,5,(int)uVar25,"%lld, ",uVar26)
          ;
        }
        uVar25 = uVar25 + 1;
        lVar23 = lVar23 + -8;
      } while (uVar9 != uVar25);
      local_40 = local_40 + -lVar23;
      puVar28 = (ulong *)((long)puVar28 - lVar23);
    }
    uVar9 = (**(code **)(*(long *)this + 0x30))(this,6);
    if (uVar9 != 0) {
      lVar23 = 0;
      uVar25 = 0;
      do {
        uVar26 = *(ulong *)(this + 0x14a0);
        if (-1 < (int)uVar25) {
          uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
        }
        if (uVar26 != 0) {
          IGTelemetryShared::emitSampleItem
                    ((IGTelemetryShared *)this,6,(int)uVar25,"%lld, ",puVar28[uVar25]);
        }
        uVar25 = uVar25 + 1;
        lVar23 = lVar23 + -8;
      } while (uVar9 != uVar25);
      local_40 = local_40 + -lVar23;
      puVar28 = (ulong *)((long)puVar28 - lVar23);
    }
    if (((byte)this[0x44] & 0xf) == 0) {
      puVar28 = puVar2 + 0x84;
      local_40 = this + 0x1168;
    }
    else {
      uVar9 = (**(code **)(*(long *)this + 0x30))(this,7);
      if (uVar9 != 0) {
        lVar23 = 0;
        uVar25 = 0;
        do {
          uVar26 = *(ulong *)(this + 0x14a8);
          if (-1 < (int)uVar25) {
            uVar26 = uVar26 >> (uVar25 & 0x3f) & 1;
          }
          if (uVar26 != 0) {
            IGTelemetryShared::emitSampleItem
                      ((IGTelemetryShared *)this,7,(int)uVar25,"%lld, ",puVar28[uVar25]);
          }
          uVar25 = uVar25 + 1;
          lVar23 = lVar23 + -8;
        } while (uVar9 != uVar25);
        local_40 = local_40 + -lVar23;
        puVar28 = (ulong *)((long)puVar28 - lVar23);
      }
    }
    iVar10 = (**(code **)(*(long *)this + 0x30))(this,8);
    if (iVar10 != 0) {
      piVar24 = &DAT_0013526c;
      uVar25 = 0;
      do {
        if (*(long *)(piVar24 + -5) == 0) break;
        iVar22 = (int)uVar25;
        if (iVar22 < 0) {
          if (*(ulong *)(this + 0x14b0) != 0) {
            iVar11 = *piVar24;
LAB_00086f0d:
            dVar13 = (double)puVar28[uVar25];
            dVar16 = dVar13;
            goto LAB_00086f14;
          }
        }
        else if ((*(ulong *)(this + 0x14b0) >> (uVar25 & 0x3f) & 1) != 0) {
          iVar11 = *piVar24;
          if ((iVar22 - 3U < 0xfffffffe) || (((byte)this[0x38] & 4) != 0)) goto LAB_00086f0d;
          dVar3 = *(double *)(local_40 + uVar25 * 8);
          dVar13 = (double)puVar28[uVar25];
          dVar16 = (double)((long)dVar13 - (long)dVar3);
          if ((ulong)dVar13 < (ulong)dVar3) {
            uVar26 = 0x3f;
            if (dVar3 != 0.0) {
              for (; (ulong)dVar3 >> uVar26 == 0; uVar26 = uVar26 - 1) {
              }
            }
            uVar9 = (uint)(uVar26 ^ 0x3f);
            if (uVar9 < 0x20) {
              if (uVar9 != 0) {
                dVar16 = (double)(((ulong)dVar13 |
                                  1L << ((ulong)(byte)(0x40 - (char)(uVar26 ^ 0x3f)) & 0x3f)) -
                                 (long)dVar3);
              }
            }
            else {
              dVar16 = (double)(ulong)(uint)(SUB84(dVar13,0) - SUB84(dVar3,0));
            }
          }
LAB_00086f14:
          dVar13 = (double)((long)(dVar13 - 9.223372036854776e+18) & (long)dVar13 >> 0x3f |
                           (long)dVar13);
          if (iVar11 != 1) {
            dVar13 = dVar16;
          }
          IGTelemetryShared::emitSampleItem
                    ((IGTelemetryShared *)this,8,iVar22,"%lld, ",(uintptr_t)dVar13);
        }
        uVar25 = uVar25 + 1;
        piVar24 = piVar24 + 8;
      } while (iVar10 != (int)uVar25);
    }
    uVar26 = _g_timestampFreqPerDenominator;
    uVar12 = (ulong)(*(long *)(puVar1 + 0xc0) * 10000) / _g_timestampFreqPerDenominator;
    uVar25 = *(ulong *)(puVar1 + 0xc0);
    lVar23 = *(long *)(this + 0xa0);
    uVar20 = 0xffffffffffffffff;
    if (lVar23 != 0) {
      lVar19 = *(long *)(this + 0x80);
      if (1000000000 < (ulong)(*(long *)(lVar23 + 0x110) - lVar19)) {
        do {
          uVar17 = (ulong)(*(int *)(lVar23 + 0x8c) - 1U & 0xf);
          lVar4 = *(long *)(lVar23 + 0x90 + uVar17 * 8);
          lVar5 = *(long *)(lVar23 + 0x110 + uVar17 * 8);
        } while (0xc < (uint)(*(int *)(lVar23 + 0x8c) - *(int *)(lVar23 + 0x8c)));
        lVar6 = *(long *)(this + 0x90);
        lVar21 = lVar5 - lVar6;
        if (lVar21 != 0) {
          lVar27 = lVar4 - *(long *)(this + 0x88);
          if (lVar27 != 0) {
            *(long *)(this + 0x78) = *(long *)(this + 0x88);
            *(long *)(this + 0x80) = lVar6;
            *(long *)(this + 0x88) = lVar4;
            *(long *)(this + 0x90) = lVar5;
            *(double *)(this + 0x98) = (double)lVar21 / (double)lVar27;
            lVar19 = lVar6;
          }
        }
      }
      uVar15 = (uint)(uVar25 >> 0x22);
      uVar9 = uVar15 & 3;
      uVar17 = (ulong)uVar9;
      if (*(long *)(lVar23 + 0x68 + uVar17 * 8) == 0) {
        if (uVar17 == 0) {
          *(long *)(lVar23 + 0x68) = *(long *)(lVar23 + 0x80) + 0x10;
        }
        else {
          *(undefined8 *)(lVar23 + 0x68 + uVar17 * 8) =
               *(undefined8 *)(lVar23 + 0x68 + (ulong)(uVar9 - 1) * 8);
        }
        *(undefined8 *)(lVar23 + 0x68 + (ulong)(uVar15 + 1 & 3) * 8) = 0;
        lVar19 = *(long *)(this + 0x80);
        uVar26 = _g_timestampFreqPerDenominator;
      }
      if ((lVar19 != 0) && (*(long *)(this + 0x78) != 0)) {
        uVar20 = (((*(long *)(lVar23 + 0x68 + uVar17 * 8) << 0x20 | uVar25 & 0xfffffffff) * 10000) /
                  uVar26 + lVar19) - *(long *)(this + 0x78);
      }
    }
    IGTelemetryShared::emitSampleItem((IGTelemetryShared *)this,9,0x3f,"%lld\n",uVar20);
    *(ulong *)(puVar1 + 0xc0) = uVar12;
    if (((byte)this[0x30] & 0x10) != 0) {
      IGTelemetryShared::fflush_tlm();
    }
    pvVar18 = *(void **)(param_1 + 0x18);
    _memmove(this + 0x788,*(void **)(param_1 + 0x10),(ulong)*(uint *)(this + 0x778));
  }
  _memmove(this + 0xd48,pvVar18,0x6a8);
  return;
}



// IGTelemetryGPU::copySampleToLast(TelemetrySampleInfo*)

void __thiscall IGTelemetryGPU::copySampleToLast(IGTelemetryGPU *this,long param_1)

{
  void *pvVar1;
  
  pvVar1 = *(void **)(param_1 + 0x18);
  _memmove(this + 0x788,*(void **)(param_1 + 0x10),(ulong)*(uint *)(this + 0x778));
  _memmove(this + 0xd48,pvVar1,0x6a8);
  return;
}



// IGTelemetryGPU::emitSampleHeaderGPU(void**, unsigned int)

void IGTelemetryGPU::emitSampleHeaderGPU(void)

{
  return;
}



// IGTelemetryGPU::emitHeaderInfoGPU(void**)

void IGTelemetryGPU::emitHeaderInfoGPU(void)

{
  return;
}



// IGTelemetryGPU::~IGTelemetryGPU()

void __thiscall IGTelemetryGPU::~IGTelemetryGPU(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGTelemetryGPU::~IGTelemetryGPU()

void __thiscall IGTelemetryGPU::~IGTelemetryGPU(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGTelemetry::init()

void __thiscall IGTelemetry::init(IGTelemetry *this)

{
  readUserConfig(this);
  *(undefined8 *)(this + 0x38) = *(undefined8 *)(this + 0x30);
  *(long *)(this + 0x68) = *(long *)(this + 0x48);
  *(undefined8 *)(this + 0x70) = *(undefined8 *)(this + 0x50);
  if (*(long *)(this + 0x58) != 0) {
    *(long *)(this + 0x70) = *(long *)(this + 0x58) + *(long *)(this + 0x48);
  }
  return;
}



// IGTelemetry::readUserConfig()

void __thiscall IGTelemetry::readUserConfig(IGTelemetry *this)

{
  undefined *puVar1;
  
  puVar1 = ___idvarGetParam(0x2b);
  *(undefined **)(this + 0x30) = puVar1;
  puVar1 = ___idvarGetParam(0x2c);
  *(undefined **)(this + 0x40) = puVar1;
  puVar1 = ___idvarGetParam(0x2d);
  *(undefined **)(this + 0x48) = puVar1;
  puVar1 = ___idvarGetParam(0x2e);
  *(undefined **)(this + 0x50) = puVar1;
  puVar1 = ___idvarGetParam(0x2f);
  *(undefined **)(this + 0x58) = puVar1;
  return;
}



// IGTelemetry::shutdown()

int IGTelemetry::shutdown(int param_1,int param_2)

{
  int in_EAX;
  
  return in_EAX;
}



// IGTimeConverter::Test()

long __thiscall IGTimeConverter::Test(IGTimeConverter *this)

{
  long lVar1;
  long lVar2;
  
  lVar2 = (*(long *)this + *(long *)(this + 0x18)) - (*(long *)(this + 0x10) + *(long *)(this + 8));
  lVar1 = -lVar2;
  if (lVar1 < 0) {
    lVar1 = lVar2;
  }
  return lVar1;
}



// IGMemoryManager::initDeviceMemory() [clone .cold.1]

void IGMemoryManager::initDeviceMemory(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGMemoryManager::initDeviceMemory() [clone .cold.2]

void IGMemoryManager::initDeviceMemory(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// int utilGetProperty<int>(IORegistryEntry*, char const*, int) [clone .cold.1]

int utilGetProperty<int>(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleGucToHostInterruptSecondary(IOInterruptEventSource*, int) [clone .cold.1]

void __cdecl IGGuC::handleGucToHostInterruptSecondary(long param_1)

{
  long lVar1;
  byte bVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  long lVar6;
  uint *puVar7;
  uint uVar8;
  uint *puVar9;
  ulonglong param1;
  
  uVar5 = 0;
  _IOLog("[IGPU] Gfx Firmware exception:\n");
  _kprintf("[IGPU] Gfx Firmware exception:\n");
  lVar4 = IGSharedMappedBuffer::getVirtualAddress(*(IGSharedMappedBuffer **)(param_1 + 0x80840));
  uVar3 = *(uint *)(lVar4 + 0x80c);
  uVar8 = 0;
  if ((uVar3 & 8) != 0) {
    uVar8 = *(uint *)(lVar4 + 0x7cc);
    uVar5 = *(uint *)(lVar4 + 0x7d8);
    _IOLog("[IGPU] Exception Info:\n");
    _kprintf("[IGPU] Exception Info:\n");
    _IOLog("[IGPU]   Fault #: 0x%x (%u), Error Code = 0x%x (%u)\n",*(undefined4 *)(lVar4 + 0x7cc),
           *(undefined4 *)(lVar4 + 0x7cc),*(undefined4 *)(lVar4 + 2000),
           *(undefined4 *)(lVar4 + 2000));
    _kprintf("[IGPU]   Fault #: 0x%x (%u), Error Code = 0x%x (%u)\n",*(uint *)(lVar4 + 0x7cc),
             *(uint *)(lVar4 + 0x7cc),*(uint *)(lVar4 + 2000),*(uint *)(lVar4 + 2000));
    _IOLog("[IGPU]   Current esp: 0x%08x, esp before exception: 0x%08x\n",
           *(undefined4 *)(lVar4 + 0x7e0),*(undefined4 *)(lVar4 + 0x7dc));
    _kprintf("[IGPU]   Current esp: 0x%08x, esp before exception: 0x%08x\n",*(uint *)(lVar4 + 0x7e0)
             ,*(uint *)(lVar4 + 0x7dc));
    _IOLog("[IGPU]   eip = 0x%08x, cs = 0x%08x, eflags = 0x%08x\n",*(undefined4 *)(lVar4 + 0x7d8),
           *(undefined4 *)(lVar4 + 0x7e8),*(undefined4 *)(lVar4 + 0x7e4));
    _kprintf("[IGPU]   eip = 0x%08x, cs = 0x%08x, eflags = 0x%08x\n",*(uint *)(lVar4 + 0x7d8),
             *(uint *)(lVar4 + 0x7e8),*(uint *)(lVar4 + 0x7e4));
    _IOLog("[IGPU]   eax = 0x%08x, ebx = 0x%08x, ecx = 0x%08x, edx = 0x%08x\n",
           *(undefined4 *)(lVar4 + 0x7ec),*(undefined4 *)(lVar4 + 0x7f0),
           *(undefined4 *)(lVar4 + 0x7f4),*(undefined4 *)(lVar4 + 0x7f8));
    _kprintf("[IGPU]   eax = 0x%08x, ebx = 0x%08x, ecx = 0x%08x, edx = 0x%08x\n",
             *(uint *)(lVar4 + 0x7ec),*(uint *)(lVar4 + 0x7f0),*(uint *)(lVar4 + 0x7f4),
             *(uint *)(lVar4 + 0x7f8));
    _IOLog("[IGPU]   edi = 0x%08x, esi = 0x%08x, ebp = 0x%08x, esp = 0x%08x\n",
           *(undefined4 *)(lVar4 + 0x800),*(undefined4 *)(lVar4 + 0x7fc),
           *(undefined4 *)(lVar4 + 0x804),*(undefined4 *)(lVar4 + 0x808));
    _kprintf("[IGPU]   edi = 0x%08x, esi = 0x%08x, ebp = 0x%08x, esp = 0x%08x\n",
             *(uint *)(lVar4 + 0x800),*(uint *)(lVar4 + 0x7fc),*(uint *)(lVar4 + 0x804),
             *(uint *)(lVar4 + 0x808));
    uVar3 = *(uint *)(lVar4 + 0x80c);
  }
  if ((uVar3 & 0x10) != 0) {
    bVar2 = *__got::_page_shift;
    lVar6 = (long)(4 << (bVar2 & 0x1f));
    lVar1 = lVar4 + lVar6;
    _IOLog("[IGPU] Firmware Dump:\n");
    _kprintf("[IGPU] Firmware Dump:\n");
    puVar7 = (uint *)((0x48 << (bVar2 & 0x1f)) + lVar1);
    if ((uint *)(lVar4 + lVar6 + 0x8000) < puVar7) {
      param1 = 0x8000;
      do {
        puVar9 = (uint *)(lVar1 + param1);
        _IOLog("[IGPU] 0x%05llx: 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x\n",param1,
               *puVar9,puVar9[1],puVar9[2],puVar9[3],puVar9[4],puVar9[5],puVar9[6],puVar9[7]);
        _kprintf("[IGPU] 0x%05llx: 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x 0x%08x\n",param1
                 ,*puVar9,puVar9[1],puVar9[2],puVar9[3],puVar9[4],puVar9[5],puVar9[6],puVar9[7]);
        param1 = param1 + 0x20;
      } while (puVar9 + 8 < puVar7);
    }
  }
                    // WARNING: Subroutine does not return
  _panic("\"Graphics firmware encountered an exception (eip: 0x%x, fault #: 0x%x)\\n\" @%s:%d",
         (ulong)uVar5,(ulong)uVar8,"IGGuC.cpp",0x406);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::handleGucToHostInterruptSecondary(IOInterruptEventSource*, int) [clone .cold.2]

void __cdecl IGGuC::handleGucToHostInterruptSecondary(undefined8 *param_1,IGGuC *param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined8 in_RAX;
  undefined4 uVar5;
  
  uVar5 = (undefined4)((ulong)in_RAX >> 0x20);
  uVar1 = IntelAccelerator::SafeReadRegister32((IntelAccelerator *)*param_1,(undefined *)0xc184);
  uVar2 = IntelAccelerator::SafeReadRegister32((IntelAccelerator *)*param_1,(undefined *)0xc188);
  uVar3 = IntelAccelerator::SafeReadRegister32((IntelAccelerator *)*param_1,(undefined *)0xc18c);
  uVar4 = IntelAccelerator::SafeReadRegister32((IntelAccelerator *)*param_1,(undefined *)0xc190);
  dumpGuCPanicDebugInfo(param_2,"Unrecoverable firmware error: unexpected CSB entry.\n",0x100000);
                    // WARNING: Subroutine does not return
  _panic("\"Unrecoverable firmware error: unexpected %s CSB entry. Expected Ctx 0x%x but got 0x%x! Context Switch Reason: 0x%x\\n\" @%s:%d"
         ,*(undefined8 *)((long)&PTR_s_RCS_00121b75 + (ulong)uVar1 * 0x79),(ulong)uVar2,(ulong)uVar3
         ,(ulong)uVar4,"IGGuC.cpp",CONCAT44(uVar5,0x3d0));
}



// IGGuC::loadBinary(bool) [clone .cold.1]

void IGGuC::loadBinary(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to create %s memory.\\n\" @%s:%d","Graphics Firmware Binary","IGGuC.cpp",
         &DAT_000010aa);
}



// IGGuC::loadBinary(bool) [clone .cold.2]

void IGGuC::loadBinary(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to create %s memory.\\n\" @%s:%d","uKernel RSA public key","IGGuC.cpp",
         &DAT_000010aa);
}



// IGGuC::loadBinary(bool) [clone .cold.3]

void __thiscall IGGuC::loadBinary(IGGuC *this,uint param_1)

{
  dumpGuCPanicDebugInfo(this,"[IGPU] Failed to load graphics firmware binary\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to load graphics firmware binary, STATUS = 0x%08X\\n\" @%s:%d",param_1,
         "IGGuC.cpp",0x8ee);
}



// IGGuC::loadBinary(bool) [clone .cold.4]

void __thiscall IGGuC::loadBinary(IGGuC *this,uint param_1)

{
  dumpGuCPanicDebugInfo(this,"[IGPU] Hash data from ME never returned",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Hash data from ME never returned, status = %x, failing load!\\n\" @%s:%d",param_1
         ,"IGGuC.cpp",0x79f);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::loadBinary(bool) [clone .cold.5]

void __cdecl IGGuC::loadBinary(IGGuC *param_1)

{
  dumpGuCPanicDebugInfo(param_1,"[IGPU] Failed to get public key hash injected\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to get public key hash injected\\n\" @%s:%d","IGGuC.cpp",0x76e);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::loadBinary(bool) [clone .cold.6]

void __cdecl IGGuC::loadBinary(IGGuC *param_1)

{
  dumpGuCPanicDebugInfo(param_1,"[IGPU] Failed to reset the graphics firmware.\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to reset the graphics firmware.\\n\" @%s:%d","IGGuC.cpp",0x73c);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::loadBinary(bool) [clone .cold.7]

void __cdecl IGGuC::loadBinary(long *param_1,ulong param_2,IGGuC *param_3,uint param_4)

{
  changeFrequencyWait(*param_1,param_2);
  IntelAccelerator::SafeForceWake((IntelAccelerator *)*param_1,0,7);
  dumpGuCPanicDebugInfo(param_3,"[IGPU] Failed to wake the ME.\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to wake the ME: reload=%u, retries=%d\\n\" @%s:%d",(ulong)(param_4 & 1),
         0x32,"IGGuC.cpp",0x71f);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::loadBinary(bool) [clone .cold.8]

void __cdecl IGGuC::loadBinary(IGGuC *param_1)

{
  dumpGuCPanicDebugInfo(param_1,"[IGPU] Failed to reset the graphics firmware.\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to reset the graphics firmware.\\n\" @%s:%d","IGGuC.cpp",0x6ee);
}



// IGGuC::loadBinary(bool) [clone .cold.9]

void IGGuC::loadBinary(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to create %s memory.\\n\" @%s:%d","Springboard binary","IGGuC.cpp",
         &DAT_000010aa);
}



// IGGuC::loadBinary(bool) [clone .cold.10]

void IGGuC::loadBinary(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Failed to create %s memory.\\n\" @%s:%d","uKernel signature","IGGuC.cpp",
         &DAT_000010aa);
}



// IGGuC::systemDidWake() [clone .cold.1]

void __thiscall IGGuC::systemDidWake(IGGuC *this)

{
  dumpGuCPanicDebugInfo
            (this,"Fatal firmware communication error: cannot re-establish work queue bindings.\n",0
            );
                    // WARNING: Subroutine does not return
  _panic("\"Fatal firmware communication error: cannot re-establish work queue bindings.\\n\" @%s:%d"
         ,"IGGuC.cpp",0x34a);
}



// IGGuC::systemDidWake() [clone .cold.2]

void __thiscall IGGuC::systemDidWake(IGGuC *this)

{
  dumpGuCPanicDebugInfo(this,"Failed to reload Gfx firmware binary to hardware.\n",0);
                    // WARNING: Subroutine does not return
  _panic("\"Failed to reload Gfx firmware binary to hardware.\\n\" @%s:%d","IGGuC.cpp",0x32a);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::dmaHostToGuC(unsigned long long, unsigned int, unsigned int, IGGuC::IGGucDmaType, bool)
// [clone .cold.1]

void __cdecl IGGuC::dmaHostToGuC(IGGuC *param_1)

{
  dumpGuCPanicDebugInfo
            (param_1,"Graphics Firmware Load failed to get CSS Header due to HW Bug.!!! ",0);
                    // WARNING: Subroutine does not return
  _panic("\"Graphics Firmware Load failed to get CSS Header due to HW Bug.!!! \" \"Radar: <rdar://problem/23375228> SKL: Add DMA failure workaround for firmware loading. \" \"However, this should have been fixed.  Please update the radar with your system specifics! \" @%s:%d"
         ,"IGGuC.cpp",0x594);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::dmaHostToGuC(unsigned long long, unsigned int, unsigned int, IGGuC::IGGucDmaType, bool)
// [clone .cold.2]

void __cdecl IGGuC::dmaHostToGuC(IGGuC *param_1)

{
  dumpGuCPanicDebugInfo
            (param_1,"Graphics Firmware Load failed to get CSS Header due to HW Bug.!!! ",0);
                    // WARNING: Subroutine does not return
  _panic("\"Graphics Firmware Load failed boot hash check!\" @%s:%d","IGGuC.cpp",0x5c8);
}



// IGGuC::dmaHostToGuC(unsigned long long, unsigned int, unsigned int, IGGuC::IGGucDmaType, bool)
// [clone .cold.3]

void IGGuC::dmaHostToGuC(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Media firmware DMA support not implemented, yet\\n\" @%s:%d","IGGuC.cpp",0x51e);
}



// IGGuC::waitForHostToGucActionResponse(IGHostToGucMessage const*, unsigned int, char const*)
// [clone .cold.1]

void __thiscall
IGGuC::waitForHostToGucActionResponse(IGGuC *this,char *param_1,uint param_2,undefined8 param_3)

{
  char cVar1;
  char *param1;
  
  IntelAccelerator::encodeDebugInfo(*(IntelAccelerator **)(this + 0x10),8);
  if ((param_1 != (char *)0x0) && (*param_1 != '\t')) {
    cVar1 = (**(code **)(*(long *)this + 0x158))(this,param_2 | 0x20000);
    param1 = "NOT HUNG";
    if (cVar1 != '\0') {
      param1 = "HUNG";
    }
    _IOLog("[IGPU] Gfx Firmware is %s\n",param1);
    _kprintf("[IGPU] Gfx Firmware is %s\n",param1);
  }
  this[0x470] = (IGGuC)0x0;
  dumpGuCPanicDebugInfo(this,"Firmware communication error: no action response!",param_2 | 0x20000);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] %s: Firmware communication error: no action response!\\n\" @%s:%d",param_3,
         "IGGuC.cpp",0xead);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IGGuC::push(IGHardwareContext*, unsigned int, unsigned int, bool, bool) [clone .cold.1]

void __cdecl IGGuC::push(ulong *param_1,undefined8 param_2)

{
  ulong uVar1;
  
  uVar1 = 0;
  if ((*param_1 & 0x7fffffffffffffff) != 0) {
    uVar1 = (*param_1 & 0x7fffffffffffffff) - 1;
  }
  *param_1 = uVar1;
                    // WARNING: Subroutine does not return
  _panic("\"Submission on work queue %d failed due to insufficient space!\\n\" @%s:%d",param_2,
         "IGGuC.cpp",0xc37);
}



// IGGuC::isHung(unsigned int) [clone .cold.1]

void __thiscall IGGuC::isHung(IGGuC *this,undefined8 param_1)

{
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] Gfx firmware is hung (eip=0x%08X,counter=0x%08X,idle=0x%08X).\\n\" @%s:%d",
         param_1,(ulong)*(uint *)(*(long *)(&DAT_00001270 + *(long *)this) + 0xc0b4),
         (ulong)*(uint *)(*(long *)(&DAT_00001270 + *(long *)this) + 0xc028),"IGGuC.cpp",0xfa4);
}



// IGHardwareGuCWorkQueue::addItem(SGfxContextDescriptor const&, IGHwCsType, unsigned int,
// UK_GEN11_SCHED_WORK_QUEUE_ITEM_REC&) [clone .cold.1]

void IGHardwareGuCWorkQueue::addItem(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"Failed work queue item alloc.\" @%s:%d","IGHardwareGuCWorkQueue.cpp",0xff);
}



// IntelAccelerator::stopGraphicsEngine() [clone .cold.1]

void __thiscall IntelAccelerator::stopGraphicsEngine(IntelAccelerator *this)

{
  IOGraphicsAccelerator2::lock_busy();
  (**(code **)(*(long *)this + 0x850))(this,"",0);
  _IOLog("[IGPU] ERROR: stopGraphicsEngine got lock with TryLock\n");
  _kprintf("[IGPU] ERROR: stopGraphicsEngine got lock with TryLock\n");
                    // WARNING: Subroutine does not return
  _panic("\"ERROR: stopGraphicsEngine got lock with TryLock\\n\" @%s:%d","IntelAccelerator.cpp",
         &DAT_00001199);
}



// int utilGetProperty<int>(IORegistryEntry*, char const*, int) [clone .cold.1]

int utilGetProperty<int>(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// unsigned int utilGetProperty<unsigned int>(IORegistryEntry*, char const*, unsigned int) [clone
// .cold.1]

uint utilGetProperty<>(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IntelAccelerator::getGPUInfo() [clone .cold.1]

void IntelAccelerator::getGPUInfo(void)

{
  _IOLog("[IGPU] ERROR: Unsupported ICL Sku!\n");
  _kprintf("[IGPU] ERROR: Unsupported ICL Sku!\n");
                    // WARNING: Subroutine does not return
  _panic("\"ERROR: Unsupported ICL Sku!\\n\" @%s:%d","IntelAccelerator.cpp",0x1605);
}



// IntelAccelerator::appsPavpSessionMgmt(unsigned int, PAVPSessionCommandID_t, unsigned int,
// SGfxMIFlushDW*, void*, bool, bool) [clone .cold.1]

void IntelAccelerator::appsPavpSessionMgmt(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"No space in rings in recovery path!\\n\" @%s:%d","IntelAccelerator.cpp",0x1b21);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::SafeForceWakeMultithreaded(bool, unsigned int, unsigned int) [clone .cold.1]

void __cdecl IntelAccelerator::SafeForceWakeMultithreaded(uint param_1,uint param_2,long param_3)

{
  _IOLog("[IGPU] SafeForceWake failed on GLOBAL domain wake! Value read = 0x%x, expecting 0x%x\n",
         param_1,param_2);
  _kprintf("[IGPU] SafeForceWake failed on GLOBAL domain wake! Value read = 0x%x, expecting 0x%x\n",
           param_1,param_2);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] ERROR: SafeForceWake acknowledgement never received on GLOBAL domain, fFlags.systemInSleep: %u, fFlags.enabled: %u\\n\" @%s:%d"
         ,(ulong)(*(uint *)(param_3 + 0xc78) >> 4 & 1),(ulong)(*(uint *)(param_3 + 0xc78) >> 1 & 1),
         "IntelAccelerator.cpp",0x230e);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::SafeForceWakeMultithreaded(bool, unsigned int, unsigned int) [clone .cold.2]

void __cdecl IntelAccelerator::SafeForceWakeMultithreaded(uint param_1,uint param_2,long param_3)

{
  _IOLog("[IGPU] SafeForceWake failed on MEDIA domain wake! Value read = 0x%x, expecting 0x%x\n",
         param_1,param_2);
  _kprintf("[IGPU] SafeForceWake failed on MEDIA domain wake! Value read = 0x%x, expecting 0x%x\n",
           param_1,param_2);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] ERROR: SafeForceWake acknowledgement never received on MEDIA domain, fFlags.systemInSleep: %u, fFlags.enabled: %u\\n\" @%s:%d"
         ,(ulong)(*(uint *)(param_3 + 0xc78) >> 4 & 1),(ulong)(*(uint *)(param_3 + 0xc78) >> 1 & 1),
         "IntelAccelerator.cpp",0x22eb);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// IntelAccelerator::SafeForceWakeMultithreaded(bool, unsigned int, unsigned int) [clone .cold.3]

void __cdecl IntelAccelerator::SafeForceWakeMultithreaded(uint param_1,uint param_2,long param_3)

{
  _IOLog("[IGPU] SafeForceWake failed on RENDER domain wake! Value read = 0x%x, expecting 0x%x\n",
         param_1,param_2);
  _kprintf("[IGPU] SafeForceWake failed on RENDER domain wake! Value read = 0x%x, expecting 0x%x\n",
           param_1,param_2);
                    // WARNING: Subroutine does not return
  _panic("\"[IGPU] ERROR: SafeForceWake acknowledgement never received on RENDER domain, fFlags.systemInSleep: %u, fFlags.enabled: %u\\n\" @%s:%d"
         ,(ulong)(*(uint *)(param_3 + 0xc78) >> 4 & 1),(ulong)(*(uint *)(param_3 + 0xc78) >> 1 & 1),
         "IntelAccelerator.cpp",0x22c5);
}



// IGScheduler5::initPriorityConfig() [clone .cold.1]

void IGScheduler5::initPriorityConfig(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// ContextStatusBufferValidate(IGHwCsExecList5 const&, SGfxContextStatusBufferEntry const*) [clone
// .cold.1]

void __cdecl ContextStatusBufferValidate(uint *param_1)

{
  DebugDumpContextStatusBufferEntry(param_1);
                    // WARNING: Subroutine does not return
  _panic("\"EL[0] was invalidated!!\" @%s:%d","IGHardwareCommandStreamer.cpp",0x40);
}



// WARNING: Unknown calling convention: __cdecl -- yet parameter storage is locked
// ContextStatusBufferValidate(IGHwCsExecList5 const&, SGfxContextStatusBufferEntry const*) [clone
// .cold.2]

void __cdecl ContextStatusBufferValidate(uint *param_1)

{
  DebugDumpContextStatusBufferEntry(param_1);
                    // WARNING: Subroutine does not return
  _panic("\"Unexpected context status buffer entry\" @%s:%d","IGHardwareCommandStreamer.cpp",0x47);
}



// IGHardwareRingBuffer::waitTimeout(bool ( block_pointer)()) [clone .cold.1]

void IGHardwareRingBuffer::waitTimeout(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"GPU reset did not succeed\\n\" @%s:%d","IGHardwareRingBuffer.cpp",0x121);
}



// IGHardwareRingBuffer::submitToRing() [clone .cold.1]

void IGHardwareRingBuffer::submitToRing(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"Enter debugger: submitToRing: Work queue failure detected\" @%s:%d",
         "IGHardwareRingBuffer.cpp",0x673);
}



// IntelICLMemoryManager::detectEDRAM() [clone .cold.1]

void IntelICLMemoryManager::detectEDRAM(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IntelICLMemoryManager::detectEDRAM() [clone .cold.2]

void IntelICLMemoryManager::detectEDRAM(void)

{
  code *pcVar1;
  
                    // WARNING: Does not return
  pcVar1 = (code *)invalidInstructionException();
  (*pcVar1)();
}



// IGScheduler::create(IntelAccelerator*) [clone .cold.1]

void IGScheduler::create(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"Unexpected scheduler type!\" @%s:%d","IGScheduler.cpp",0x23);
}



// IGTelemetryManager::getThreadInfo(unsigned long long) [clone .cold.1]

void IGTelemetryManager::getThreadInfo(void)

{
                    // WARNING: Subroutine does not return
  _panic("\"could not allocate PerThreadInfo for GPU Usage\\n\" @%s:%d","IGTelemetryManager.cpp",
         0xb12);
}


